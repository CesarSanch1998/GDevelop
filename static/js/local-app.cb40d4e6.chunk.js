(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{114:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",(function(){return D}));var r=n(16),o=n.n(r),a=n(650),i=n(18),c=n(971),u=n(968),s=(n(34),n(67),n(938)),l=n(1983),p=n(1985),f=n(1986),d=n(1990),m=n(1993),h=n(2002),v=n(2003),g=n.n(v),b=n(2005),y=n(473),w=n(232),E=n(970),x=n(2017),j=n(2018),P=n(959),O=n(637),k=n(2019),S=n(2020),C=e.gd,D=function(e){i.b.setUpContextMenu();var t=i.b.getArguments(),n=i.b.isDev();return o.a.createElement(E.a,{authentication:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:b.a,eventsFunctionsExtensionWriter:x.a,eventsFunctionsExtensionOpener:j.a,resourceFetcher:S.a},(function(e){var r=e.i18n;return o.a.createElement(P.a,{appArguments:t,storageProviders:[O.a],defaultStorageProvider:O.a},(function(e){var t=e.getStorageProviderOperations,i=e.storageProviders,v=e.initialFileMetadataToOpen,b=e.getStorageProvider;return o.a.createElement(a.a,{i18n:r,renderMainMenu:function(e){return o.a.createElement(h.a,e)},renderPreviewLauncher:function(e,t){return o.a.createElement(d.a,Object.assign({},e,{ref:t}))},renderExportDialog:function(e){return o.a.createElement(c.a,Object.assign({},e,{exporters:Object(m.a)()}))},renderCreateDialog:function(e){return o.a.createElement(u.a,Object.assign({},e,{examplesComponent:s.a,startersComponent:l.a}))},renderGDJSDevelopmentWatcher:n?function(){return o.a.createElement(k.a,null)}:null,storageProviders:i,getStorageProviderOperations:t,getStorageProvider:b,resourceSources:p.a,resourceExternalEditors:f.a,extensionsLoader:g()({gd:C,objectsEditorService:y.a,objectsRenderingService:w.a,filterExamples:!n}),initialFileMetadataToOpen:v})}))}))}}.call(this,n(10))},1983:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(4),o=n(5),a=n(7),i=n(6),c=n(116),u=n(16),s=n.n(u),l=n(2307),p=n(128),f=n(394),d=n(125),m=n(27),h=n(118),v=n(142),g=n(186),b=n(1984),y=n(17),w=n.n(y),E=n(196),x=n(938),j=n(637),P=w()("path"),O=w()("fs-extra"),k=e.gd,S=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"createFromExample",value:function(e,t){var n=this,r=this.props.outputPath;O&&r&&Object(b.a)((function(o){try{O.mkdirsSync(r),O.copySync(P.join(o,t),r)}catch(a){return void Object(x.b)(e,r,a)}n.props.onOpen(j.a,{fileIdentifier:P.join(r,t+".json")}),Object(m.j)(t)}))}},{key:"createEmptyGame",value:function(e){var t=this.props.outputPath;if(O&&t){try{O.mkdirsSync(t)}catch(o){return void Object(x.b)(e,t,o)}var n=k.ProjectHelper.createNewGDJSProject(),r=P.join(t,"game.json");n.setProjectFile(r),this.props.onCreate(n,j.a,{fileIdentifier:r}),Object(m.j)("")}}},{key:"render",value:function(){var e=this;return s.a.createElement(c.I18n,null,(function(t){var n=t.i18n;return s.a.createElement(h.a,{noMargin:!0},s.a.createElement(h.b,{expand:!0},s.a.createElement(h.a,{expand:!0},s.a.createElement(f.a,{fullWidth:!0,value:e.props.outputPath,onChange:e.props.onChangeOutputPath,type:"create-game"}))),s.a.createElement(l.a,null),s.a.createElement(h.b,null,s.a.createElement(h.a,null,s.a.createElement(d.a,null,s.a.createElement(c.Trans,{id:"Choose a game to use as a starter:"})))),s.a.createElement(h.b,null,s.a.createElement(h.a,{expand:!0,noMargin:!0},s.a.createElement(v.a,null,s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/platformer.png"}),primaryText:s.a.createElement(c.Trans,{id:"Platformer"}),secondaryText:s.a.createElement(c.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"platformer")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/space-shooter.png"}),primaryText:s.a.createElement(c.Trans,{id:"8-bit Space Shooter"}),secondaryText:s.a.createElement(c.Trans,{id:"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!"}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"space-shooter")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/geometry-monster.png"}),primaryText:s.a.createElement(c.Trans,{id:"Geometry Monster"}),secondaryText:s.a.createElement(c.Trans,{id:"A hyper casual endless game where you have to collect shapes and avoid bombs, with a progressively increasing difficulty."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"geometry-monster")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/isometric-game.png"}),primaryText:s.a.createElement(c.Trans,{id:"Isometric game"}),secondaryText:s.a.createElement(c.Trans,{id:"An example of an isometric game where you can explore a map with your character."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"isometric-game")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/downhill-bike-physics-demo.png"}),primaryText:"Downhill Bike Racing",secondaryText:s.a.createElement(c.Trans,{id:"An example of a 2D physics based game, where players have to reach the end as fast as possible."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"downhill-bike-physics-demo")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/pairs.png"}),primaryText:"Pairs",secondaryText:s.a.createElement(c.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"pairs")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/new.png"}),primaryText:s.a.createElement(c.Trans,{id:"Empty game"}),secondaryText:s.a.createElement(c.Trans,{id:"Start a new game from scratch."}),secondaryTextLines:2,onClick:function(){return e.createEmptyGame(n)}}),s.a.createElement(g.a,null,s.a.createElement(c.Trans,{id:"Advanced"})),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/particle-effects-demo.png"}),primaryText:s.a.createElement(c.Trans,{id:"Particle Effects Demo"}),secondaryText:s.a.createElement(c.Trans,{id:"A demo of various high quality particle effects (fire, magic, snow, rune spell...) that you can try and use in your game."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"particle-effects-demo")}}),s.a.createElement(v.b,{leftIcon:s.a.createElement(E.a,{iconSize:40,src:"res/starters_icons/game-feel-demo.png"}),primaryText:s.a.createElement(c.Trans,{id:"Game Feel Demo"}),secondaryText:s.a.createElement(c.Trans,{id:'A demo showing how to enhance the "game feel" of your project: VFX, shot trail, ambient sounds and SFX, screenshake, wobble...'}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"game-feel-demo")}})),s.a.createElement(h.b,{alignItems:"center",justifyContent:"center"},s.a.createElement(p.a,{label:s.a.createElement(c.Trans,{id:"See examples"}),onClick:function(){return e.props.onShowExamples()}})))))}))}}]),n}(u.Component)}).call(this,n(10))},1984:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(17),o=n.n(r),a=o()("electron"),i=o()("path"),c=a?a.remote.app:null,u=o()("fs"),s=o()("process"),l=function(e,t,n){return u.access(e,u.constants.R_OK,(function(r){r?n():t(e)}))},p=function(e){if(!s||!u)return"";var t=c?c.getAppPath():s.cwd();l(i.join(t,"..","examples"),e,(function(){l(i.join(t,"..","..","app","resources","examples"),e,(function(){e(null)}))}))}},1985:function(e,t,n){"use strict";(function(e){var r=n(4),o=n(5),a=n(7),i=n(6),c=n(16),u=n(244),s=n(17),l=n.n(s),p=n(18),f=l()("electron"),d=f?f.remote.dialog:null,m=l()("path"),h=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose an audio file"}),name:o._({id:"Audio files"}),extensions:["aac","wav","mp3","ogg"]};return v(o,t,c,a,i,"audio").then((function(e){return e.map((function(e){var n=new h.AudioResource,r=m.dirname(t.getProjectFile());return n.setFile(m.relative(r,e)),n.setName(m.relative(r,e)),n}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose an image"}),name:o._({id:"Image files"}),extensions:["png","jpg"]};return v(o,t,c,a,i,"image").then((function(e){return e.map((function(e){var n=new h.ImageResource,r=m.dirname(t.getProjectFile());return n.setFile(m.relative(r,e)),n.setName(m.relative(r,e)),n}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a font file"}),name:o._({id:"Font files"}),extensions:["ttf","otf"]};return v(o,t,c,a,i,"font").then((function(e){return e.map((function(e){var n=new h.FontResource,r=m.dirname(t.getProjectFile());return n.setFile(m.relative(r,e)),n.setName(m.relative(r,e)),n}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a video file"}),name:o._({id:"Video files"}),extensions:["mp4"]};return v(o,t,c,a,i,"video").then((function(e){return e.map((function(e){var n=new h.VideoResource,r=m.dirname(t.getProjectFile());return n.setFile(m.relative(r,e)),n.setName(m.relative(r,e)),n}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component)},{name:"localJsonFileOpener",displayName:"Choose a new json file",kind:"json",component:function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a json file"}),name:o._({id:"JSON file"}),extensions:["json"]};return v(o,t,c,a,i,"json").then((function(e){return e.map((function(e){var n=new h.JsonResource,r=m.dirname(t.getProjectFile());return n.setFile(m.relative(r,e)),n.setName(m.relative(r,e)),n}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component)},{name:"localBitmapFontFileOpener",displayName:"Choose a new bitmap font file (.fnt, .xml)",kind:"bitmapFont",component:function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a bitmap font file"}),name:o._({id:"FNT, XML file"}),extensions:["fnt","xml"]};return v(o,t,c,a,i,"bitmapFont").then((function(e){return e.map((function(e){var n=new h.BitmapFontResource,r=m.dirname(t.getProjectFile());return n.setFile(m.relative(r,e)),n.setName(m.relative(r,e)),n}))}))},e}return Object(o.a)(n,[{key:"render",value:function(){return null}}]),n}(c.Component)}];var v=function(e,t,n,r,o,a){if(!d)return Promise.reject("Not supported");var i=["openFile"];n.multiSelections&&i.push("multiSelections");var c=m.dirname(t.getProjectFile()),s=r(t,a)||c,l=f.remote.getCurrentWindow();return d.showOpenDialog(l,{title:n.title,properties:i,filters:[{name:n.name,extensions:n.extensions}],defaultPath:s}).then((function(n){var r=n.filePaths;if(!r||!r.length)return[];var i=m.parse(r[0]).dir;if((o(t,a,i),r.filter((function(e){return!Object(u.g)(t,e)})).length)&&p.b.showConfirmDialog(e._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"})))return Object(u.c)(t,r);return r}))}}).call(this,n(10))},1986:function(e,t,n){"use strict";var r=n(1987),o=n(1988),a=n(1989),i=n(27),c=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(i.g)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(i.g)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(i.g)("yarn"),Object(a.a)(e)}}];t.a=c},1987:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(121),o=n(17),a=n.n(o),i=n(244),c=a()("electron"),u=a()("path"),s=c?c.ipcRenderer:null,l=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(c&&s){var f=n.map((function(e,n){return{resourcePath:Object(i.e)(t,e),resourceName:e,originalIndex:n}})),d=u.dirname(t.getProjectFile()),m=Object(r.a)(Object(r.a)({},p),{},{resources:f,singleFrame:o,projectPath:d});s.removeAllListeners("piskel-changes-saved"),s.on("piskel-changes-saved",(function(e,n,r,o){var c=o.data?{pskl:o}:null,s=t.getResourcesManager();n.forEach((function(e){e.name=u.relative(d,e.path),Object(i.d)(t,new l.ImageResource,e.name)})),n[0].metadata=c,n[0].newAnimationName=r,o.singleFrame?(c&&s.getResource(u.relative(d,n[0].path)).setMetadata(JSON.stringify(c)),a(n)):a(n)})),s.send("piskel-open-then-load-animation",m)}}}).call(this,n(10))},1988:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(17),o=n.n(r),a=n(244),i=o()("electron"),c=o()("path"),u=i?i.ipcRenderer:null,s=e.gd,l=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&u){var l=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:l};u.removeAllListeners("jfxr-changes-saved"),u.on("jfxr-changes-saved",(function(e,n,o){var i=c.relative(l,n);Object(a.d)(t,new s.AudioResource,i);var u={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(u)),r([{metadata:u,name:i}])})),u.send("jfxr-create-wav",p)}}}).call(this,n(10))},1989:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l}));var r=n(17),o=n.n(r),a=n(244),i=o()("electron"),c=o()("path"),u=i?i.ipcRenderer:null,s=e.gd,l=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&u){var l=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:l};u.removeAllListeners("yarn-changes-saved"),u.on("yarn-changes-saved",(function(e,n){var o=c.relative(l,n);Object(a.d)(t,new s.JsonResource,o),r([{name:o}])})),u.send("yarn-create-json",p)}}}).call(this,n(10))},1990:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var r=n(4),o=n(5),a=n(7),i=n(6),c=n(116),u=n(16),s=n(254),l=n(17),p=n.n(l),f=n(931),d=n(233),m=n(1991),h=n(174),v=n.n(h),g=n(555),b=n(1992),y=p()("electron"),w=p()("path"),E=y?y.ipcRenderer:null,x=y?y.remote.BrowserWindow:null,j=e.gd,P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,devToolsOpen:!1,previewBrowserWindowConfig:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){if(x&&e.state.previewBrowserWindowConfig&&e.state.previewGamePath){var t=new x(e.state.previewBrowserWindowConfig);t.loadURL("file://".concat(e.state.previewGamePath,"/index.html")),t.setMenuBarVisibility(e.state.hideMenuBar),t.setAlwaysOnTop(e.state.alwaysOnTop),t.webContents.on("devtools-opened",(function(){e.setState({devToolsOpen:!0})})),t.webContents.on("devtools-closed",(function(){e.setState({devToolsOpen:!1})})),e.state.devToolsOpen&&t.openDevTools()}},e._openPreviewWindow=function(t,n,r){e.setState({previewBrowserWindowConfig:{width:t.getGameResolutionWidth(),height:t.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(t.getName()),backgroundColor:"#000000",webPreferences:{nodeIntegration:!0}},previewGamePath:n,hideMenuBar:!r.getIsMenuBarHiddenInPreview(),alwaysOnTop:r.getIsAlwaysOnTopInPreview()},(function(){if(r.networkPreview){if(!E)return;E.removeAllListeners("serve-folder-done"),E.removeAllListeners("local-network-ips"),E.on("serve-folder-done",(function(t,n,r){n?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:n}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),E.on("local-network-ip",(function(t,n){e.setState({networkPreviewHost:n})})),E.send("serve-folder",{root:n}),E.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(d.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=v()(new j.AbstractFileSystemJS,s.a);return{outputDir:w.join(n.getTempDir(),"preview"),exporter:new j.Exporter(n,t)}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.outputDir,c=a.exporter;Object(f.a)((function(){var a=new j.PreviewExportOptions(n,i);a.setLayoutName(r.getName()),o&&a.setExternalLayoutName(o.getName());var u=e.getPreviewDebuggerServer().getServerAddress();u&&a.setDebuggerServerAddress(u.address,""+u.port);var s=e.props.getIncludeFileHashs();for(var l in s){var p=s[l];a.setIncludeFileHash(l,p)}var f=e.getPreviewDebuggerServer().getExistingDebuggerIds(),d=t.hotReload&&!!f.length;a.setProjectDataOnlyExport(d&&t.projectDataOnlyExport),a.setFullLoadingScreen(t.fullLoadingScreen),c.exportProjectForPixiPreview(a),a.delete(),c.delete(),d?(f.forEach((function(t){e.getPreviewDebuggerServer().sendMessage(t,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(n,i,t)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkHasSubscription()},e}return Object(o.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return b.a}},{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return u.createElement(u.Fragment,null,u.createElement(g.a,{ref:function(t){return e._networkPreviewSubscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:u.createElement(c.Trans,{id:"Preview over wifi"}),mode:"try"}),u.createElement(g.a,{ref:function(t){return e._hotReloadSubscriptionChecker=t},onChangeSubscription:function(){e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Hot reloading",title:u.createElement(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),u.createElement(m.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),n}(u.Component)}).call(this,n(10))},1991:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(4),o=n(5),a=n(7),i=n(6),c=n(116),u=n(16),s=n(129),l=n(126),p=n(137),f=n(125),d=n(118),m=n(168),h=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?u.createElement(s.a,{actions:[u.createElement(l.a,{key:"close",label:u.createElement(c.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&u.createElement(l.a,{key:"export",label:u.createElement(c.Trans,{id:"Export game"}),onClick:o}),u.createElement(l.a,{key:"run-preview-locally",label:u.createElement(c.Trans,{id:"Run on this computer"}),onClick:i})],cannotBeDismissed:!0,open:n,onRequestClose:a},r&&u.createElement(d.b,null,u.createElement(f.a,null,u.createElement(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!r&&!t&&u.createElement(m.a,null),!r&&t&&u.createElement("div",null,u.createElement(d.b,null,u.createElement(f.a,null,u.createElement(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),u.createElement(p.b,{value:t,fullWidth:!0}),u.createElement(d.b,null,u.createElement(f.a,null,u.createElement(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}]),n}(u.Component)},1992:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(17),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i="stopped",c=null,u=[],s=[],l={startServer:function(){if(!a)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,t){var n=!1;i="stopped",c=null,a&&(a.removeAllListeners("debugger-send-message-done"),a.removeAllListeners("debugger-error-received"),a.removeAllListeners("debugger-connection-closed"),a.removeAllListeners("debugger-connection-opened"),a.removeAllListeners("debugger-start-server-done"),a.removeAllListeners("debugger-message-received")),a.on("debugger-error-received",(function(e,r){n||(t(r),n=!0),u.forEach((function(e){return(0,e.onErrorReceived)(r)}))})),a.on("debugger-connection-closed",(function(e,t){var n=t.id,r=s.indexOf(n);-1!==r&&s.splice(r,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:n,debuggerIds:s})}))})),a.on("debugger-connection-opened",(function(e,t){var n=t.id;s.push(n),u.forEach((function(e){return(0,e.onConnectionOpened)({id:n,debuggerIds:s})}))})),a.on("debugger-start-server-done",(function(t,r){var o=r.address;console.info("Local preview debugger started"),i="started",c=o,n||(e(),n=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),a.on("debugger-message-received",(function(e,t){var n=t.id,r=t.message;console.info("Processing message received for debugger");try{var o=JSON.parse(r);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:n,parsedMessage:o})}))}catch(a){console.warn("Error while parsing message received from debugger client:",a)}})),a.send("debugger-start-server")})),t=new Promise((function(e,t){setTimeout((function(){t(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,t])},sendMessage:function(e,t){a&&("stopped"!==i?a.send("debugger-send-message",{id:e,message:JSON.stringify(t)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getServerAddress:function(){return c},getExistingDebuggerIds:function(){return s},registerCallbacks:function(e){return u.push(e),function(){var t=u.indexOf(e);-1!==t&&u.splice(t,1)}}}},1993:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(116),o=n(16),a=n(1994),i=n(1995),c=n(1996),u=n(1997),s=n(1999),l=n(2e3),p=n(2001),f=n(953),d=n.n(f),m=n(955),h=n.n(m),v=n(954),g=n.n(v),b=n(950),y=n(951),w=n(952),E=function(){return[{name:o.createElement(r.Trans,{id:"Android (& iOS coming soon)"}),renderIcon:function(e){return o.createElement(d.a,e)},helpPage:"/publishing/android_and_ios",description:o.createElement(r.Trans,{id:"Package your game for Android directly from GDevelop. iOS support is coming soon!"}),key:"localonlinecordovaexport",exportPipeline:s.a},{name:o.createElement(r.Trans,{id:"Web (upload online)"}),renderIcon:function(e){return o.createElement(w.a,e)},helpPage:"/publishing/web",description:o.createElement(r.Trans,{id:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones."}),key:"localonlinewebexport",exportPipeline:p.a},{name:o.createElement(r.Trans,{id:"Local folder"}),renderIcon:function(e){return o.createElement(g.a,e)},helpPage:"/publishing/html5_game_in_a_local_folder",description:o.createElement(r.Trans,{id:"Build the game locally as a HTML5 game. You can then publish it on website like Kongregate, Game Jolt, itch.io, Poki..."}),key:"localexport",exportPipeline:c.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Facebook Instant Games"}),renderIcon:function(e){return o.createElement(b.a,e)},helpPage:"/publishing/publishing-to-facebook-instant-games",description:o.createElement(r.Trans,{id:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger."}),key:"localfacebookinstantgames",exportPipeline:u.a,advanced:!0},{name:o.createElement(r.Trans,{id:"iOS & Android (manual)"}),renderIcon:function(e){return o.createElement(y.a,e)},helpPage:"/publishing/android_and_ios_with_cordova",description:o.createElement(r.Trans,{id:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools."}),key:"localcordovaexport",exportPipeline:a.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux"}),renderIcon:function(e){return o.createElement(h.a,e)},helpPage:"/publishing/windows-macos-linux",description:o.createElement(r.Trans,{id:"Package your game as an app for Windows, macOS or Linux directly from GDevelop."}),key:"localonlineelectronexport",exportPipeline:l.a},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux (manual)"}),renderIcon:function(e){return o.createElement(h.a,e)},helpPage:"/publishing/windows-macos-linux-with-electron",description:o.createElement(r.Trans,{id:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools."}),key:"localelectronexport",exportPipeline:i.a,advanced:!0}]}},1994:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(116),o=n(16),a=n.n(o),i=n(128),c=n(118),u=n(233),s=n(254),l=n(394),p=n(174),f=n.n(p),d=n(17),m=n.n(d),h=n(943),v=m()("electron"),g=v?v.shell:null,b=e.gd,y={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(l.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=f()(new b.AbstractFileSystemJS,s.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForCordova",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(10))},1995:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(116),o=n(16),a=n.n(o),i=n(128),c=n(118),u=n(233),s=n(254),l=n(394),p=n(174),f=n.n(p),d=n(17),m=n.n(d),h=n(944),v=m()("electron"),g=v?v.shell:null,b=e.gd,y={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(l.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=f()(new b.AbstractFileSystemJS,s.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForElectron",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(10))},1996:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(116),o=n(16),a=n.n(o),i=n(128),c=n(118),u=n(233),s=n(254),l=n(394),p=n(174),f=n.n(p),d=n(17),m=n.n(d),h=n(945),v=m()("electron"),g=v?v.shell:null,b=e.gd,y={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(h.b,null)),a.a.createElement(c.b,null,a.a.createElement(l.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=f()(new b.AbstractFileSystemJS,s.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{fullWidth:!0,primary:!0,onClick:function(){g&&g.openItem(t.outputDir)},label:a.a.createElement(r.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,n(10))},1997:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var r=n(116),o=n(16),a=n.n(o),i=n(128),c=n(118),u=n(233),s=n(254),l=n(174),p=n.n(l),f=n(17),d=n.n(f),m=n(1998),h=n(479),v=n(946),g=d()("path"),b=d()("electron"),y=b?b.remote.app:null,w=b?b.shell:null,E=e.gd,x={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:y?g.join(y.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},renderHeader:function(e){e.project;var t=e.exportState,n=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(v.b,null)),a.a.createElement(c.b,null,a.a.createElement(m.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:y?y.getPath("documents"):"",onChange:function(e){return n((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=p()(new E.AbstractFileSystemJS,s.a),r=new E.Exporter(n,t),o=g.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new E.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir;return Object(h.a)({path:n,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){w&&g&&w.openItem(g.dirname(t.archiveOutputFilename))});return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(10))},1998:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(121),o=n(4),a=n(5),i=n(7),c=n(6),u=n(116),s=n(16),l=n.n(s),p=n(137),f=n(17),d=n.n(f),m=n(128),h=d()("electron"),v=h?h.remote.dialog:null,g={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},b=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChooseFolder=function(){if(v&&h){var t=h.remote.getCurrentWindow();return v.showSaveDialog(t,{title:e.props.title,filters:e.props.filters,message:e.props.message,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePath;e.props.onChange(n||"")}))}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},g.container),{},{width:this.props.fullWidth?"100%":void 0})},l.a.createElement(p.b,{margin:"dense",style:g.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),l.a.createElement(m.a,{label:l.a.createElement(u.Trans,{id:"Choose"}),style:g.button,onClick:this.onChooseFolder}))}}]),n}(s.PureComponent)},1999:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(116),o=n(16),a=n(174),i=n.n(a),c=n(253),u=n(630),s=n(233),l=n(479),p=n(17),f=n.n(p),d=n(254),m=n(947),h=f()("path"),v=f()("os"),g=e.gd,b={name:"local-online-cordova",onlineBuildType:"cordova-build",packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(){return!0},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,d.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(l.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.firebaseUser;return o?Object(c.a)(r,o.uid,n,e.targets,e.keystore):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(10))},2e3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(116),o=n(16),a=n(174),i=n.n(a),c=n(253),u=n(233),s=n(630),l=n(479),p=n(17),f=n.n(p),d=n(254),m=n(948),h=f()("path"),v=f()("os"),g=e.gd,b={name:"local-online-electron",onlineBuildType:"electron-build",packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e){return!!e.targets.length},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,d.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(l.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(s.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.firebaseUser;return o?Object(c.b)(r,o.uid,n,e.targets):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(10))},2001:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(116),o=n(16),a=n(174),i=n.n(a),c=n(253),u=n(630),s=n(233),l=n(479),p=n(17),f=n.n(p),d=n(254),m=n(949),h=f()("path"),v=f()("os"),g=e.gd,b={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},renderHeader:function(){return o.createElement(m.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Publish online"})},prepareExporter:function(e){return Object(s.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,d.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(l.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.firebaseUser;return o?Object(c.c)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(10))},2002:function(e,t,n){"use strict";var r=n(16),o=n(17),a=n.n(o),i=n(249),c=n(303),u=n(44),s=a()("electron"),l=s?s.ipcRenderer:null,p=function(e,t){r.useEffect((function(){if(l){var n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,r)};return l.on(e,n),function(){return l.removeListener(e,n)}}}),[e,t])};t.a=function(e){var t=e.i18n,n=e.project,o=e.recentProjectFiles,a=e.onOpenRecentFile,s=Object(c.e)(),f=t.language;return p("main-menu-open",e.onChooseProject),p("main-menu-open-recent",e.onOpenRecentFile),p("main-menu-save",e.onSaveProject),p("main-menu-save-as",e.onSaveProjectAs),p("main-menu-close",e.onCloseProject),p("main-menu-close-app",e.onCloseApp),p("main-menu-export",e.onExportProject),p("main-menu-create",e.onCreateProject),p("main-menu-open-project-manager",e.onOpenProjectManager),p("main-menu-open-start-page",e.onOpenStartPage),p("main-menu-open-debugger",e.onOpenDebugger),p("main-menu-open-about",e.onOpenAbout),p("main-menu-open-preferences",e.onOpenPreferences),p("main-menu-open-language",e.onOpenLanguage),p("main-menu-open-profile",e.onOpenProfile),p("main-menu-open-games-dashboard",e.onOpenGamesDashboard),p("update-status",e.setUpdateStatus),r.useEffect((function(){!function(e,t,n,r){var o={label:t._({id:"File"}),submenu:[{label:t._({id:"Create a New Project..."}),accelerator:Object(c.a)(r.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create"},{type:"separator"},{label:t._({id:"Open..."}),accelerator:Object(c.a)(r.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:t._({id:"Open Recent"}),submenu:n.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}}))},{type:"separator"},{label:t._({id:"Save"}),accelerator:Object(c.a)(r.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!e},{label:t._({id:"Save as..."}),accelerator:Object(c.a)(r.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:!!e},{type:"separator"},{label:t._({id:"Export (web, iOS, Android)..."}),accelerator:Object(c.a)(r.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!e},{type:"separator"},{label:t._({id:"Close Project"}),accelerator:Object(c.a)(r.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!e}]};Object(u.e)()||o.submenu.push({type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{label:t._({id:"Exit GDevelop"}),accelerator:Object(c.a)(r.QUIT_APP),onClickSendEvent:"main-menu-close-app"});var a={label:t._({id:"Edit"}),submenu:[{label:t._({id:"Undo"}),role:"undo"},{label:t._({id:"Redo"}),role:"redo"},{type:"separator"},{label:t._({id:"Cut"}),role:"cut"},{label:t._({id:"Copy"}),role:"copy"},{label:t._({id:"Paste"}),role:"paste"},{label:t._({id:"Paste and Match Style"}),role:"pasteandmatchstyle"},{label:t._({id:"Delete"}),role:"delete"},{label:t._({id:"Select All"}),role:"selectall"}]},i={label:t._({id:"View"}),submenu:[{label:t._({id:"Show Project Manager"}),accelerator:Object(c.a)(r.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!e},{label:t._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:t._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!e},{type:"separator"},{label:t._({id:"Toggle Developer Tools"}),role:"toggledevtools"},{type:"separator"},{label:t._({id:"Toggle Fullscreen"}),role:"togglefullscreen"}]},s={label:t._({id:"Window"}),role:"window",submenu:[{label:t._({id:"Minimize"}),role:"minimize"}]},p={label:t._({id:"Help"}),role:"help",submenu:[{label:t._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:t._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:t._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/gdevelop"},{type:"separator"},{label:t._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:t._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:t._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:t._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(u.e)()||p.submenu.push({type:"separator"},{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var f=[o,a,i,s,p];Object(u.e)()&&(f.unshift({label:t._({id:"GDevelop 5"}),submenu:[{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),a.submenu.push({type:"separator"},{label:t._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),s.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),l&&l.send("set-main-menu",f)}(n,t,o,s)}),[t,f,n,o,s]),Object(i.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:r.useCallback((function(){return o.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return a(e)}}}))}),[a,o])}),null}},2003:function(e,t,n){var r=n(956).loadExtension,o=n(17),a=n(2004).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return a({filterExamples:c,onFindGDJS:u}).then((function(a){return Promise.all(a.map((function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(u){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(n&&c.registerEditorConfigurations&&c.registerEditorConfigurations(n),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},2004:function(e,t,n){var r=n(233).findGDJS,o=n(17),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples,n=e.onFindGDJS;return(n?n():r()).then((function(e){var n=e.gdjsRoot,r=a.join(n,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(r,"...")),new Promise((function(e,n){i.readdir(r,(function(o,c){if(o)return n(o);var u=c.filter((function(e){return!t||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return t=a.join(r,e),new Promise((function(e){var n=a.join(t,"JsExtension.js");i.stat(n,(function(t,r){return e(t?null:r.isFile()?n:null)}))}));var t}))).then((function(t){e(t.filter((function(e){return!!e})))}),n)}))}))}))}}},2005:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(17),o=n.n(r),a=n(942),i=n(453),c=n.n(i),u=o()("path"),s=o()("os"),l=o()("fs"),p=function(e){var t=e.onWriteFile,n=u.join(s.tmpdir(),"GDGeneratedEventsFunctions-"+Object(a.a)());l.mkdir(n,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var r=function(e){return"".concat(n,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return r(e)},writeFunctionCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),l.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))},writeBehaviorCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),l.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))}}}},2017:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(4),o=n(173),a=n(17),i=n.n(a),c=i()("fs-extra"),u=i()("path"),s=i()("electron"),l=s?s.remote.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(){if(!l)return Promise.reject("Not supported");var e=s.remote.getCurrentWindow();return l.showSaveDialog(e,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"}).then((function(e){var t=e.filePath;return t||null}))},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!c)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return c.ensureDir(u.dirname(t)).then((function(){return new Promise((function(e,r){c.writeFile(t,n,(function(t){return t?r(t):e()}))}))}))}catch(r){return Promise.reject(r)}}(Object(o.b)(e),t).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))}},2018:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),o=n(17),a=n.n(o),i=a()("fs"),c=a()("electron"),u=c?c.remote.dialog:null,s=function e(){Object(r.a)(this,e)};s.chooseEventsFunctionExtensionFile=function(){if(!u)return Promise.reject("Not supported");var e=c.remote.getCurrentWindow();return u.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},s.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise((function(t,n){i.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},2019:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(16),o=n(17),a=n.n(o),i=n(149),c=n(285),u=n.n(c),s=a()("electron"),l=a()("child_process"),p=a()("process"),f=a()("path"),d=a()("chokidar"),m=function(){if(!s)return"";var e=p.cwd();return f.join(e,"../app")},h=function(){return l&&f?new Promise((function(e,t){var n=performance.now();l.exec('node "'.concat(f.join(m(),"scripts/import-GDJS-Runtime.js"),'" --skip-clean --skip-sources'),(function(r,o,a){if(r)return console.error("GDJS Runtime update error:\n".concat(r)),void t(r);var i=(performance.now()-n).toFixed(0);if(console.info("GDJS Runtime updated in ".concat(i,"ms:\n").concat(o)),a)return console.error("GDJS Runtime update error:\n".concat(a)),void t(new Error("Error while updating GDJS Runtime"));e()}))})):Promise.reject(new Error("Unsupported"))},v=u()((function(e,t){var n=e||"unknown-event",r=t||"unknown-file";console.info('GDJS/extensions watchers found a "'.concat(n,'" in ').concat(r,", updating GDJS Runtime...")),h().catch((function(){}))}),100),g=function(){var e=r.useContext(i.b).values.useGDJSDevelopmentWatcher;return r.useEffect((function(){if(e){var t=performance.now();if(d){var n=["../../GDJS/Runtime/**/*","../../Extensions/**/*.ts","../../Extensions/**/*.js"].map((function(e){return f.join(m(),e)}));h().catch((function(){}));var r=d.watch(n,{awaitWriteFinish:!0,ignoreInitial:!0}).on("all",v).on("error",(function(e){return console.error("Error in watcher for GDJS Runtime - manually call npm run `node import-GDJS-Runtime.js` in the newIDE/app/scripts folder if you make changes to GDJS. Error:",e)})).on("ready",(function(){var e=(performance.now()-t).toFixed(2);console.info("Watchers for GDJS Runtime/extensions installed in ".concat(e,"ms."))}));return function(){return r.close()}}console.error("Unable to use 'chokidar' from Node.js to watch changes in GDJS.")}}),[e]),null}},2020:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(0),o=n.n(r),a=n(2),i=n(17),c=n.n(i),u=n(163),s=n(2021),l=n.n(s),p=c()("electron"),f=p?p.ipcRenderer:null,d=c()("fs-extra"),m=c()("path"),h=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().filter((function(e){var n,r=t.getResource(e);return(n=r.getFile()).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")}))},v=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,i,c,s,p,v,g,b,y,w;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.resourceNames,i=t.onProgress,d&&f){e.next=3;break}throw new Error("Unsupported");case 3:return c=n.getResourcesManager(),s=m.dirname(n.getProjectFile()),p=m.join(s,"assets"),v=new Set,g=[],b=[],y=0,w=h(n),e.abrupt("return",l.a.withConcurrency(3).for(r).process(function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,l,h,E;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.getResource(t),r=n.getFile(),a=m.extname(r),l=m.basename(r,a),h=Object(u.a)(l,(function(e){var t=m.join(p,e)+a;return d.existsSync(t)||v.has(t)})),E=m.join(p,h)+a,v.add(E),e.prev=7,e.next=10,d.ensureDir(p);case 10:return e.next=12,f.invoke("local-file-download",r,E);case 12:n.setFile(m.relative(s,E).replace(/\\/g,"/")),b.push({resourceName:t}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),g.push({resourceName:t,error:e.t0});case 19:i(y++,w.length);case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return{fetchedResources:b,erroredResources:g}})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={getResourcesToFetch:h,fetchResources:v}},2021:function(e,t,n){"use strict";var r=n(2022);e.exports=r.PromisePool},2022:function(e,t,n){"use strict";var r=n(0),o=n(631),a=n(286),i=n(287);Object.defineProperty(t,"__esModule",{value:!0}),t.PromisePool=void 0;var c=n(2023),u=function(){function e(t){a(this,e),this.concurrency=10,this.items=null!==t&&void 0!==t?t:[],this.errorHandler=void 0}return i(e,[{key:"withConcurrency",value:function(e){return this.concurrency=e,this}},{key:"for",value:function(t){return new e(t).withConcurrency(this.concurrency)}},{key:"handleError",value:function(e){return this.errorHandler=e,this}},{key:"process",value:function(){var e=o(r.mark((function e(t){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(new c.PromisePoolExecutor).withConcurrency(this.concurrency).withHandler(t).handleError(this.errorHandler).for(this.items).start());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"withConcurrency",value:function(e){return(new this).withConcurrency(e)}},{key:"for",value:function(e){return(new this).for(e)}}]),e}();t.PromisePool=u},2023:function(e,t,n){"use strict";var r=n(2024),o=n(0),a=n(631),i=n(286),c=n(287);Object.defineProperty(t,"__esModule",{value:!0}),t.PromisePoolExecutor=void 0;var u=n(2027),s=function(){function e(){i(this,e),this.tasks=[],this.items=[],this.errors=[],this.results=[],this.concurrency=10,this.handler=function(){},this.errorHandler=void 0}return c(e,[{key:"withConcurrency",value:function(e){return this.concurrency=e,this}},{key:"for",value:function(e){return this.items=e,this}},{key:"withHandler",value:function(e){return this.handler=e,this}},{key:"handleError",value:function(e){return this.errorHandler=e,this}},{key:"hasReachedConcurrencyLimit",value:function(){return this.activeCount()>=this.concurrency}},{key:"activeCount",value:function(){return this.tasks.length}},{key:"start",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateInputs(),e.next=3,this.process();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateInputs",value:function(){if("function"!==typeof this.handler)throw new Error("The first parameter for the .process(fn) method must be a function");if(!("number"===typeof this.concurrency&&this.concurrency>=1))throw new TypeError('"concurrency" must be a number, 1 or up. Received "'.concat(this.concurrency,'" (').concat(typeof this.concurrency,")"));if(!Array.isArray(this.items))throw new TypeError('"items" must be an array. Received '.concat(typeof this.items));if(this.errorHandler&&"function"!==typeof this.errorHandler)throw new Error("The error handler must be a function. Received ".concat(typeof this.errorHandler))}},{key:"process",value:function(){var e=a(o.mark((function e(){var t,n,a;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r(this.items),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}if(a=n.value,!this.hasReachedConcurrencyLimit()){e.next=8;break}return e.next=8,this.processingSlot();case 8:this.startProcessing(a);case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:return e.abrupt("return",this.drained());case 20:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"processingSlot",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.waitForTaskToFinish());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForTaskToFinish",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.race(this.tasks);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"startProcessing",value:function(e){var t=this,n=this.createTaskFor(e).then((function(e){t.results.push(e),t.tasks.splice(t.tasks.indexOf(n),1)})).catch((function(r){if(t.tasks.splice(t.tasks.indexOf(n),1),t.errorHandler)return t.errorHandler(r,e);t.errors.push(u.PromisePoolError.createFrom(r,e))}));this.tasks.push(n)}},{key:"createTaskFor",value:function(){var e=a(o.mark((function e(t){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.handler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"drained",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.drainActiveTasks();case 2:return e.abrupt("return",{results:this.results,errors:this.errors});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"drainActiveTasks",value:function(){var e=a(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.tasks);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.PromisePoolExecutor=s},2024:function(e,t,n){var r=n(2025);e.exports=function(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=r(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,i=!0,c=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==o.return||o.return()}finally{if(c)throw a}}}}},2025:function(e,t,n){var r=n(2026);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},2026:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},2027:function(e,t,n){"use strict";var r=n(286),o=n(287),a=n(632),i=n(960),c=n(961),u=n(2030);Object.defineProperty(t,"__esModule",{value:!0}),t.PromisePoolError=void 0;var s=function(e){i(n,e);var t=c(n);function n(e,o){var i;return r(this,n),(i=t.call(this)).item=o,i.name=i.constructor.name,i.message=i.messageFrom(e),Error.captureStackTrace(a(i),i.constructor),i}return o(n,[{key:"messageFrom",value:function(e){return e instanceof Error||"object"===typeof e?e.message:"string"===typeof e||"number"===typeof e?e.toString():""}}],[{key:"createFrom",value:function(e,t){return new this(e,t)}}]),n}(u(Error));t.PromisePoolError=s},2030:function(e,t,n){var r=n(480),o=n(633),a=n(2031),i=n(2032);function c(t){var n="function"===typeof Map?new Map:void 0;return e.exports=c=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},c(t)}e.exports=c},2031:function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},2032:function(e,t,n){var r=n(633),o=n(962);function a(t,n,i){return o()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&r(a,n.prototype),a},a.apply(null,arguments)}e.exports=a},254:function(e,t,n){"use strict";(function(e){var r=n(17),o=n.n(r),a=n(942),i=o()("fs-extra"),c=o()("path"),u=o()("os"),s=e.gd;t.a={mkDir:function(e){try{i.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return i.existsSync(e)},clearDir:function(e){try{i.emptyDirSync(e)}catch(t){console.error("clearDir("+e+") failed: "+t)}},getTempDir:function(){return c.join(u.tmpdir(),"GDTMP-".concat(Object(a.a)()))},fileNameFrom:function(e){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.basename(e))},dirNameFrom:function(e){return this._isExternalUrl(e)?"":(e=this._translateUrl(e),c.dirname(e).replace(/\\/g,"/"))},makeAbsolute:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),this.isAbsolute(t)||(t=c.resolve(t)),c.resolve(t,c.normalize(e)).replace(/\\/g,"/"))},makeRelative:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.relative(t,c.normalize(e)).replace(/\\/g,"/"))},isAbsolute:function(e){return!!this._isExternalUrl(e)||(0===e.length||((e=this._translateUrl(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalUrl(e))return!0;e=this._translateUrl(e);try{e!==t&&i.copySync(e,t)}catch(n){return console.error("copyFile("+e+", "+t+") failed: "+n),!1}return!0},writeToFile:function(e,t){try{i.outputFileSync(e,t)}catch(n){return console.error("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return i.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new s.VectorString;try{i.existsSync(e)&&i.readdirSync(e).forEach((function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)}))}catch(r){console.error("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateUrl(e);try{return i.statSync(e).isFile()}catch(t){return!1}},_isExternalUrl:function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")},_translateUrl:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(10))},394:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(121),o=n(4),a=n(5),i=n(7),c=n(6),u=n(116),s=n(16),l=n.n(s),p=n(137),f=n(128),d=n(17),m=n.n(d)()("electron"),h=m?m.remote.dialog:null,v={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},g=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._onChooseFolder=function(t){var n=t.title,r=t.message;if(h&&m){var o=m.remote.getCurrentWindow();h.showOpenDialog(o,{title:n,properties:["openDirectory","createDirectory"],message:r,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePaths;n&&n.length&&e.props.onChange(n[0])}))}},e._getTitleAndMessage=function(t){var n=e.props.type;return"export"===n?{title:t._({id:"Choose an export folder"}),message:t._({id:"Choose where to export the game"})}:"create-game"===n?{title:t._({id:"Choose a folder for the new game"}),message:t._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(u.I18n,null,(function(t){var n=t.i18n,o=e._getTitleAndMessage(n);return l.a.createElement("div",{style:Object(r.a)(Object(r.a)({},v.container),{},{width:e.props.fullWidth?"100%":void 0})},l.a.createElement(p.b,{margin:"dense",style:v.textField,type:"text",hintText:o.title,value:e.props.value,onChange:function(t,n){return e.props.onChange(n)}}),l.a.createElement(f.a,{label:l.a.createElement(u.Trans,{id:"Choose folder"}),primary:!1,style:v.button,onClick:function(){return e._onChooseFolder(o)}}))}))}}]),n}(s.PureComponent)},479:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(17),o=n.n(r),a=n(571),i=o()("fs"),c=Object(a.a)("archiver"),u=function(e){var t=e.path,n=e.outputFilename,r=c();return new Promise((function(e,o){if(!i||!r)return o(new Error("Archiver unavailable"));var a=i.createWriteStream(n),c=r("zip",{zlib:{level:9}});a.on("close",(function(){console.log("Archive written at ".concat(n,", ").concat(c.pointer()," total bytes.")),e(n)})),c.on("error",(function(e){o(e)})),c.pipe(a),c.directory(t,!1),c.finalize()}))}},630:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(17),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i=function(e,t,n){return a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((function(r,o){a.on("local-file-upload-progress",(function(e,t,r){n(t,r)})),a.on("local-file-upload-done",(function(e,t){if(t)return o(t);r()})),a.send("local-file-upload",e,t)}))):Promise.reject("No support for local file upload")}},637:function(e,t,n){"use strict";var r=n(121),o=n(17),a=n.n(o),i=n(940),c=a()("fs"),u=a()("path"),s=a()("electron"),l=s?s.remote.dialog:null,p=function(e){return c?new Promise((function(t,n){c.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},f=function(){if(!l)return Promise.reject("Not supported");var e=s.remote.getCurrentWindow();return l.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?{fileIdentifier:t[0]}:null}))},d=function(e){var t=e.fileIdentifier,n=u.dirname(t);return p(t).then((function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(u.join(n,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},m=function(e,t){var n=e.fileIdentifier,r=n+".autosave";if(c.existsSync(r)){if(!t)return Promise.resolve(!0);try{if(c.statSync(r).mtime.getTime()>c.statSync(n).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},h=function(e){return Promise.resolve(Object(r.a)(Object(r.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},v=n(941),g=n(18);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:function(e){return e[g.a]&&e[g.a].length?{fileIdentifier:e[g.a][0]}:null},createOperations:function(){return{onOpenWithPicker:f,onOpen:d,hasAutoSave:m,onSaveProject:v.b,onSaveProjectAs:v.c,onAutoSaveProject:v.a,onGetAutoSave:h,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."}}}}}},938:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return O}));var r=n(0),o=n.n(r),a=n(2),i=n(26),c=n(116),u=n(16),s=n(975),l=n(326),p=n(2307),f=n(394),d=n(27),m=n(118),h=n(17),v=n.n(h),g=n(42),b=n(637),y=n(941),w=n(31),E=n.n(w),x=v()("path"),j=v()("fs-extra"),P=function(e,t,n){Object(g.a)({message:e._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:t}}),rawError:n,errorId:"local-example-creation-error"})};function O(e){var t=e.outputPath,n=e.onChangeOutputPath,r=e.onOpen,h=u.useState(!1),v=Object(i.a)(h,2),w=v[0],P=v[1];return u.createElement(c.I18n,null,(function(e){var i=e.i18n;return u.createElement(m.a,{noMargin:!0,expand:!0,useFullHeight:!0},u.createElement(m.b,null,u.createElement(m.a,{expand:!0},u.createElement(f.a,{fullWidth:!0,value:t,onChange:n,type:"create-game"}))),u.createElement(p.a,null),u.createElement(s.a,{isOpening:w,onOpen:function(){var e=Object(a.a)(o.a.mark((function e(n){var a,c,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(!0),e.next=6,Object(l.a)(n);case 6:return a=e.sent,j.mkdirsSync(t),e.next=10,E.a.get(a.projectFileUrl,{responseType:"text",transformResponse:[function(e){return e}]});case 10:return c=e.sent,u=c.data,s=x.join(t,"game.json"),e.next=15,Object(y.d)(u,s);case 15:r(b.a,{fileIdentifier:s}),Object(d.j)(a.projectFileUrl),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),Object(g.a)({message:i._({id:"Unable to load the example or save it on disk."})+" "+i._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"});case 22:return e.prev=22,P(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()}))}))}},940:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(1),o=n(163),a=n(453),i=n.n(a),c=function(e,t){var n=t.pathSeparator,o=t.getArrayItemReferenceName,a=t.shouldSplit,i=t.isReferenceMagicPropertyName,c=[],u=function(e,t){var n;return c.push({reference:e,object:t}),n={},Object(r.a)(n,i,!0),Object(r.a)(n,"referenceTo",e),n};return function e(t,r,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var c in t){var s=r+n+"*";if(a(s)){var l=t[c],p=o(l,i),f=i+n+p;t[c]=u(f,l),e(l,s,f)}else{var d=i+n+c;e(t[c],s,d)}}else for(var m in t){var h=r+n+m,v=i+n+m;if(a(h)){var g=t[m];t[m]=u(v,g),e(g,h,v)}else e(t[m],h,v)}}(e,"",""),c},u=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map((function(o){var i=function(e){return!0===e[n]?e:null}(t[o]);return i?r(i.referenceTo).then((function(n){return t[o]=n,e(t[o],a+1)})):e(t[o],a+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},s=function(e){return function(t){return e.has(t)}},l=function(e){var t={};return function(n,r){var a=n[e];if("string"!==typeof a)throw new Error("Property ".concat(e," is not a string"));t[r]=t[r]||{};var c=Object(o.a)(i()(a),(function(e){return!!t[r][e]}));return t[r][c]=!0,c}}},941:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return w})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return O}));var r=n(121),o=n(0),a=n.n(o),i=n(2),c=n(173),u=n(17),s=n.n(u),l=n(940),p=n(254),f=n(174),d=n.n(f),m=e.gd,h=s()("fs-extra"),v=s()("path"),g=s()("electron"),b=g?g.remote.dialog:null,y=function(e,t){var n=performance.now();return new Promise((function(r,o){h.readFile(e,{encoding:"utf8"},(function(a,i){if(a)return o(a);""===i&&o(new Error("Written file is empty, did the write fail?")),i!==t&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-n;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),r()}))}))},w=function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==t){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,h.ensureDir(v.dirname(n));case 6:return e.next=8,h.writeFile(n,t);case 8:return e.next=10,y(n,t);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t,null,2),e.next=3,w(r,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e,t,n){var r=Object(c.b)(e);if(e.isFolderProject()){var o=Object(l.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(l.a)("name"),shouldSplit:Object(l.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(o.map((function(e){return E(e.object,v.join(n,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return E(r,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return E(r,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},j=function(e,t){var n=t.fileIdentifier;if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');var r=v.dirname(n);return x(e,n,r).then((function(){return{wasSaved:!0,fileMetadata:t}}))},P=function(e,t){var n=t?t.fileIdentifier:"",o=d()(new m.AbstractFileSystemJS,p.a),a=g.remote.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!b)return Promise.reject("Unsupported");var c=b.showSaveDialogSync(a,i);if(!c)return Promise.resolve({wasSaved:!1,fileMetadata:t});var u=v.dirname(c);return m.ProjectResourcesCopier.copyAllResourcesTo(e,o,u,!0,!1,!0),e.setProjectFile(c),x(e,c,u).then((function(){return{wasSaved:!0,fileMetadata:Object(r.a)(Object(r.a)({},t),{},{fileIdentifier:c})}}))},O=function(e,t){var n=t.fileIdentifier+".autosave";return w(Object(c.a)(e),n).catch((function(e){throw console.error("Unable to write ".concat(n,":"),e),e}))}}).call(this,n(10))},942:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(17),o=n.n(r)()("os"),a=function(){try{return o.userInfo().uid}catch(e){return""}}}}]);
//# sourceMappingURL=local-app.cb40d4e6.chunk.js.map