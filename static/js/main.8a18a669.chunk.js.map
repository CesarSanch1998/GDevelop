{"version":3,"sources":["Utils/Window.js","Utils/OptionalRequire.js","Utils/GDevelopServices/ApiConfigs.js","Version/VersionMetadata.js","Utils/Analytics/LocalStats.js","Utils/Analytics/EventSender.js","Version/index.js","UI/Messages/MessageBox.js","Utils/Analytics/UserUUID.js","Utils/GDevelopServices/Authentication.js","Utils/Platform.js","Utils/LoadScript.js","Utils/StartupTimes.js","Utils/Analytics/Raven.js","serviceWorker.js","index.js"],"names":["electron","optionalRequire","shell","dialog","remote","POSITIONAL_ARGUMENTS_KEY","currentTitleBarColor","Window","title","getCurrentWindow","setTitle","err","console","error","document","newColor","metaElement","querySelector","setAttribute","x","y","width","height","scaleFactor","isWindows","rect","screen","getDisplayMatching","browserWindow","setBounds","Math","round","warn","this","show","app","quit","showInactive","setAlwaysOnTop","forceHide","isFocused","hide","cb","on","getGlobal","argumentsObject","URLSearchParams","window","location","search","forEach","value","name","project","message","type","showMessageBoxSync","buttons","alert","confirm","buildEditorContextMenu","require","addEventListener","e","target","closest","menu","setTimeout","popup","preventDefault","url","openExternal","open","process","isDev","dev","nodeRequire","module","exports","moduleName","config","rethrowException","global","ex","GDevelopGamePreviews","baseUrl","GDevelopBuildApi","GDevelopFirebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","GDevelopUsageApi","GDevelopReleaseApi","GDevelopAssetApi","GDevelopAnalyticsApi","GDevelopGameApi","GDevelopUserApi","getProgramOpeningCount","count","localStorage","getItem","parseInt","client","startupTimesSummary","installAnalyticsEvents","authentication","info","version","getIDEVersion","versionWithHash","getIDEVersionWithHash","sessionCookie","Keen","utils","cookie","sessionTimer","timer","start","writeKey","extendEvents","firebaseUser","getFirebaseUserSync","getStartupTimesSummary","user","uuid","getUserUUID","uid","undefined","providerId","email","emailVerified","localStats","programOpeningCount","versionMetadata","page","href","referrer","tech","browser","helpers","getBrowserProfile","ip","ua","time","getDatetimeIndex","visitor","id","get","time_on_page","keen","timestamp","Date","toISOString","addons","input","output","ua_string","page_url","referrer_url","sendProgramOpening","setItem","incrementProgramOpeningCount","recordEvent","sendExportLaunched","exportKind","platform","sendNewGameCreated","templateName","sendTutorialOpened","tutorialName","sendHelpFinderOpened","sendHelpSearch","searchText","log","sendErrorMessage","rawError","errorId","sendSignupDone","sendSubscriptionCheckDialogShown","mode","sendSubscriptionCheckDismiss","sendSubscriptionDialogShown","sendAssetOpened","sendAssetAddedToProject","sendNewObjectCreated","sendShowcaseGameLinkOpened","linkType","sendChoosePlanClicked","planId","sendExternalEditorOpened","editorName","VersionMetadata","gdCoreVersionString","getGDCoreVersion","gd","VersionWrapper","fullString","showMessageBox","showWarningBox","options","delayToNextTick","showErrorBox","doNotReport","existingUserUUID","newUserUUID","generateUUID","a","random","toString","replace","Authentication","_onUserLogoutCallback","_onUserUpdateCallback","setOnUserLogoutCallback","setOnUserUpdateCallback","createFirebaseAccount","form","createUserWithEmailAndPassword","auth","password","then","userCredentials","sendEmailVerification","catch","createUser","getAuthorizationHeader","authorizationHeader","currentUser","Error","axios","post","username","params","userId","headers","Authorization","login","signInWithEmailAndPassword","forgotPassword","sendPasswordResetEmail","getFirebaseUser","reload","sendFirebaseEmailVerification","changeEmail","updateEmail","patch","getUserProfile","response","data","editUserProfile","description","getGameStatsEmail","acceptGameStatsEmail","logout","signOut","getIdToken","token","isAuthenticated","initializeApp","getAuth","onAuthStateChanged","_isWindows","windows","_isMacLike","navigator","match","_isMobile","test","userAgent","getUserAgent","getArch","arch","getSystemVersion","getPlatformName","isMacLike","isMobile","loadScript","source","Promise","resolve","reject","body","scriptElement","createElement","src","onload","onerror","onabort","appendChild","GD_STARTUP_TIMES","previousStep","steps","map","step","stepSummary","stepName","elapsedTime","totalStartupTime","installRaven","Raven","release","install","setUserContext","isLocalhost","Boolean","hostname","register","publicUrl","URL","origin","swUrl","fetch","contentType","status","indexOf","serviceWorker","ready","registration","unregister","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","styles","loadingMessage","position","top","left","right","fontSize","fontFamily","color","textAlign","animation","Bootstrapper","App","handleEditorLoadError","setState","push","performance","now","initializeGDevelopJs","locateFile","path","prefix","create","Fragment","style","Component","rootElement","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.8a18a669.chunk.js","sourcesContent":["// @flow\n\nimport optionalRequire from './OptionalRequire.js';\nimport URLSearchParams from 'url-search-params';\nimport { isWindows } from './Platform';\nconst electron = optionalRequire('electron');\nconst shell = electron ? electron.shell : null;\nconst dialog = electron ? electron.remote.dialog : null;\n\nexport type AppArguments = { [string]: any };\n\n/**\n * The name of the key, in AppArguments, containing the array of\n * positional arguments (i.e: `[\"file1\", \"file2\"]` in `ls file1 file2`).\n */\nexport const POSITIONAL_ARGUMENTS_KEY = '_';\n\nlet currentTitleBarColor: ?string = null;\n\n/**\n * Various utilities related to the app window management.\n */\nexport default class Window {\n  static setTitle(title: string) {\n    if (electron) {\n      try {\n        const browserWindow = electron.remote.getCurrentWindow();\n        browserWindow.setTitle(title);\n      } catch (err) {\n        // This rarely, but sometimes happen that setTitle throw.\n        // Catch the error in the hope that things will continue to work.\n        console.error(\n          'Caught an error while calling browserWindow.setTitle',\n          err\n        );\n      }\n    } else {\n      document.title = title;\n    }\n  }\n\n  static setTitleBarColor(newColor: string) {\n    if (electron) {\n      // Nothing to do, the title bar is using the system window management.\n      return;\n    }\n\n    if (currentTitleBarColor === newColor) {\n      // Avoid potentially expensive DOM query/modification if no changes needed.\n      return;\n    }\n\n    const metaElement = document.querySelector('meta[name=\"theme-color\"]');\n    if (metaElement) {\n      metaElement.setAttribute('content', newColor);\n      currentTitleBarColor = newColor;\n    }\n  }\n\n  static setBounds(x: number, y: number, width: number, height: number) {\n    if (!electron) return;\n\n    let scaleFactor = 1;\n    if (isWindows()) {\n      // setBounds need to be called with the scale factor of the screen\n      // on Windows.\n      const rect = { x, y, width, height };\n      const display = electron.remote.screen.getDisplayMatching(rect);\n      scaleFactor = display.scaleFactor;\n    }\n\n    const browserWindow = electron.remote.getCurrentWindow();\n    try {\n      browserWindow.setBounds({\n        x: Math.round(x / scaleFactor),\n        y: Math.round(y / scaleFactor),\n        width: Math.round(width / scaleFactor),\n        height: Math.round(height / scaleFactor),\n      });\n    } catch (err) {\n      console.warn('Unable to change window bounds', err);\n    }\n    this.show();\n  }\n\n  static quit() {\n    if (!electron) return;\n\n    const electronApp = electron.remote.app;\n    electronApp.quit();\n  }\n\n  static show() {\n    if (!electron) return;\n\n    const browserWindow = electron.remote.getCurrentWindow();\n    browserWindow.showInactive();\n    browserWindow.setAlwaysOnTop(true);\n  }\n\n  static hide(forceHide: boolean = false) {\n    if (!electron) return;\n\n    const browserWindow = electron.remote.getCurrentWindow();\n    if (!browserWindow.isFocused() || forceHide) {\n      browserWindow.setAlwaysOnTop(false);\n      browserWindow.hide();\n    }\n  }\n\n  static onFocus(cb: () => void) {\n    if (!electron) return;\n\n    return electron.remote.getCurrentWindow().on('focus', cb);\n  }\n\n  static onBlur(cb: () => void) {\n    if (!electron) return;\n\n    return electron.remote.getCurrentWindow().on('blur', cb);\n  }\n\n  static onClose(cb: () => void) {\n    if (!electron) return;\n\n    return electron.remote.getCurrentWindow().on('close', cb);\n  }\n\n  /**\n   * Return the arguments passed to the IDE, either from Electron\n   * or from the web-app URL. The resulting object will have a key \"_\"\n   * containing an array of string, representing all the arguments that\n   * didn't have an option associated with them (see https://github.com/substack/minimist).\n   * (On the web-app, this is emulated using the \"project\" argument).\n   */\n  static getArguments(): AppArguments {\n    if (electron) {\n      return electron.remote.getGlobal('args');\n    }\n\n    const argumentsObject = {};\n    const params = new URLSearchParams(window.location.search);\n    params.forEach((value, name) => (argumentsObject[name] = value));\n\n    // Emulate the minimist behavior of putting the positional arguments\n    // in \"_\".\n    argumentsObject[POSITIONAL_ARGUMENTS_KEY] = argumentsObject.project\n      ? [argumentsObject.project]\n      : [];\n\n    return argumentsObject;\n  }\n\n  static showMessageBox(\n    message: string,\n    type?: 'none' | 'info' | 'error' | 'question' | 'warning'\n  ) {\n    if (!dialog || !electron) {\n      alert(message);\n      return;\n    }\n\n    const browserWindow = electron.remote.getCurrentWindow();\n    dialog.showMessageBoxSync(browserWindow, {\n      message,\n      type,\n      buttons: ['OK'],\n    });\n  }\n\n  static showConfirmDialog(\n    message: string,\n    type?: 'none' | 'info' | 'error' | 'question' | 'warning'\n  ) {\n    if (!dialog || !electron) {\n      // eslint-disable-next-line\n      return confirm(message);\n    }\n\n    const browserWindow = electron.remote.getCurrentWindow();\n    const answer = dialog.showMessageBoxSync(browserWindow, {\n      message,\n      type,\n      buttons: ['OK', 'Cancel'],\n    });\n    return answer === 0;\n  }\n\n  static setUpContextMenu() {\n    const textEditorSelectors = 'textarea, input, [contenteditable=\"true\"]';\n\n    if (electron) {\n      // `remote.require` since `Menu` is a main-process module.\n      var buildEditorContextMenu = electron.remote.require(\n        'electron-editor-context-menu'\n      );\n\n      window.addEventListener('contextmenu', function(e) {\n        // Only show the context menu in text editors.\n        if (!e.target.closest(textEditorSelectors)) return;\n\n        var menu = buildEditorContextMenu();\n\n        // The 'contextmenu' event is emitted after 'selectionchange' has fired but possibly before the\n        // visible selection has changed. Try to wait to show the menu until after that, otherwise the\n        // visible selection will update after the menu dismisses and look weird.\n        setTimeout(function() {\n          menu.popup({ window: electron.remote.getCurrentWindow() });\n        }, 30);\n      });\n    } else if (document) {\n      document.addEventListener('contextmenu', function(e: any) {\n        // Only show the context menu in text editors.\n        if (!e.target.closest(textEditorSelectors)) {\n          e.preventDefault();\n          return false;\n        }\n\n        return true;\n      });\n    }\n  }\n\n  static openExternalURL(url: string) {\n    if (!url) return;\n\n    if (electron) {\n      if (shell) shell.openExternal(url);\n      return;\n    }\n\n    window.open(url, '_blank');\n  }\n\n  static hasMainMenu() {\n    return !!electron;\n  }\n\n  static isDev(): boolean {\n    if (!electron)\n      return !process.env.NODE_ENV || process.env.NODE_ENV === 'development';\n\n    try {\n      const isDev = electron.remote.require('electron-is').dev();\n      return isDev;\n    } catch (err) {\n      // This rarely, but sometimes happen that require throw (\"missing remote object\").\n      // Catch the error in the hope that things will continue to work.\n      console.error(\n        \"Caught an error while calling electron.remote.require('electron-is').dev\",\n        err\n      );\n      return false; // Assume we're not in development mode. Might be incorrect but better not consider production as development.\n    }\n  }\n}\n","// Note: this file don't use export/imports to allow its usage from Node.js\nconst nodeRequire = require('node-require-function')(); //TODO\n\n/**\n * Allow to require a Node.js/npm module without having it bundled by webpack.\n * This means that this module will only be available when running on Electron or Node.js.\n * When running without Electron or Node.js, `null` will be returned.\n *\n * Note: **in most cases**, prefer `optionalLazyRequire` to avoid loading too many modules\n * at the app startup. Only use optionalRequire for \"well-known\" Node.js modules (fs, path...)\n *\n * @param {string} moduleName The name of the module. For example: `fs`.\n */\nconst optionalRequire = (\n  moduleName,\n  config = {\n    rethrowException: false,\n  }\n) => {\n  try {\n    if (global.require) {\n      // Electron will expose require on global object. Use it, with an\n      // expression to avoid webpack to try to bundle the call to require.\n      return global['require'](moduleName);\n    } else if (nodeRequire) {\n      //Node.js\n      // nodeRequire is Node.js' require function that is properly extracted\n      // by node-require-function when running on Node.js\n      return nodeRequire(moduleName);\n    }\n\n    // We don't have Electron require nor Node.js require (we must be in a browser)\n    return null;\n  } catch (ex) {\n    if (config.rethrowException) throw ex;\n\n    return null;\n  }\n};\n\nmodule.exports = optionalRequire;\n","// @flow\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport const GDevelopGamePreviews = {\n  baseUrl: `https://game-previews.gdevelop-app.com/`,\n};\n\nexport const GDevelopBuildApi = {\n  baseUrl: isDev\n    ? 'https://69p4m07edd.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/build',\n};\n\nexport const GDevelopFirebaseConfig = {\n  apiKey: 'AIzaSyAnX9QMacrIl3yo4zkVFEVhDppGVDDewBc',\n  authDomain: 'gdevelop-services.firebaseapp.com',\n  databaseURL: 'https://gdevelop-services.firebaseio.com',\n  projectId: 'gdevelop-services',\n  storageBucket: 'gdevelop-services.appspot.com',\n  messagingSenderId: '44882707384',\n};\n\nexport const GDevelopUsageApi = {\n  baseUrl: isDev\n    ? 'https://dwjjhr5k76.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/usage',\n};\n\nexport const GDevelopReleaseApi = {\n  baseUrl: isDev\n    ? 'https://c8cldf4iqh.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/release',\n};\n\nexport const GDevelopAssetApi = {\n  baseUrl: isDev\n    ? 'https://57l4cj31aj.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/asset',\n};\n\nexport const GDevelopAnalyticsApi = {\n  baseUrl: isDev\n    ? 'https://fixpe96o0h.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/analytics',\n};\n\nexport const GDevelopGameApi = {\n  baseUrl: isDev\n    ? 'https://we7eqjifc2.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/game',\n};\n\nexport const GDevelopUserApi = {\n  baseUrl: isDev\n    ? 'https://yrun9q6udj.execute-api.us-east-1.amazonaws.com/dev'\n    : 'https://api.gdevelop-app.com/user',\n};\n","// @flow\n// This file is generated by make-version-metadata.js script\n// Don't import this file directly, prefer to use newIDE/app/src/Version/index.js instead.\n// prettier-ignore\nmodule.exports = {\n  \"version\": \"5.0.124\",\n  \"gitHash\": \"b3ea46d7e620ae40a86296a3f1bc792038c4265c\",\n  \"versionWithHash\": \"5.0.124-b3ea46d7e620ae40a86296a3f1bc792038c4265c\"\n};\n","// @flow\nconst localStoragePrefix = 'gd-local-stats';\n\nexport const getProgramOpeningCount = (): number => {\n  try {\n    const count = localStorage.getItem(`${localStoragePrefix}-program-opening`);\n    if (count !== null) return parseInt(count, 10);\n  } catch (e) {\n    console.warn('Unable to load stored program opening count', e);\n  }\n\n  return 0;\n};\n\nexport const incrementProgramOpeningCount = () => {\n  const count = getProgramOpeningCount() + 1;\n\n  try {\n    localStorage.setItem(`${localStoragePrefix}-program-opening`, '' + count);\n  } catch (e) {\n    console.warn('Unable to store program opening count', e);\n  }\n};\n","// @flow\nimport Keen from 'keen-tracking';\nimport Window from '../Window';\nimport { getUserUUID } from './UserUUID';\nimport Authentication from '../GDevelopServices/Authentication';\nimport {\n  getProgramOpeningCount,\n  incrementProgramOpeningCount,\n} from './LocalStats';\nimport { getStartupTimesSummary } from '../StartupTimes';\nimport { getIDEVersion, getIDEVersionWithHash } from '../../Version';\n\nconst isDev = Window.isDev();\nlet client = null;\nlet startupTimesSummary = null;\n\nexport const installAnalyticsEvents = (authentication: Authentication) => {\n  if (isDev) {\n    console.info('Development build - Analytics disabled');\n    return;\n  }\n\n  const version = getIDEVersion();\n  const versionWithHash = getIDEVersionWithHash();\n\n  const sessionCookie = Keen.utils.cookie('visitor-stats');\n  const sessionTimer = Keen.utils.timer();\n  sessionTimer.start();\n\n  client = new Keen({\n    projectId: '593d9f0595cfc907a1f8126a',\n    writeKey:\n      'B917F1DB50EE4C8949DBB374D2962845A22838B425AA43322A37138691A5270EB0358AEE45A4F61AFA7713B9765B4980517A1E276D4973A2E546EA851BF7757523706367ED430C041D2728A63BF61B5D1B2079C75E455DDDFAAC4324128AC2DB',\n  });\n\n  client.extendEvents(function() {\n    // Include the user public profile.\n    const firebaseUser = authentication.getFirebaseUserSync();\n\n    // Compute the startup times (only once to avoid doing this for every event).\n    startupTimesSummary = startupTimesSummary || getStartupTimesSummary();\n\n    return {\n      user: {\n        uuid: getUserUUID(),\n        uid: firebaseUser ? firebaseUser.uid : undefined,\n        providerId: firebaseUser ? firebaseUser.providerId : undefined,\n        email: firebaseUser ? firebaseUser.email : undefined,\n        emailVerified: firebaseUser ? firebaseUser.emailVerified : undefined,\n      },\n      localStats: {\n        programOpeningCount: getProgramOpeningCount(),\n      },\n      versionMetadata: {\n        version,\n        versionWithHash,\n      },\n      startupTimesSummary,\n      page: {\n        title: document.title,\n        url: document.location.href,\n        // info: {} (add-on)\n      },\n      referrer: {\n        url: document.referrer,\n        // info: {} (add-on)\n      },\n      tech: {\n        browser: Keen.helpers.getBrowserProfile(),\n        // info: {} (add-on)\n        ip: '${keen.ip}', // eslint-disable-line\n        ua: '${keen.user_agent}', // eslint-disable-line\n      },\n      time: Keen.helpers.getDatetimeIndex(),\n      visitor: {\n        id: sessionCookie.get('user_id'),\n        time_on_page: sessionTimer.value(),\n      },\n      // geo: {} (add-on)\n      keen: {\n        timestamp: new Date().toISOString(),\n        addons: [\n          {\n            name: 'keen:ip_to_geo',\n            input: {\n              ip: 'tech.ip',\n            },\n            output: 'geo',\n          },\n          {\n            name: 'keen:ua_parser',\n            input: {\n              ua_string: 'tech.ua',\n            },\n            output: 'tech.info',\n          },\n          {\n            name: 'keen:url_parser',\n            input: {\n              url: 'page.url',\n            },\n            output: 'page.info',\n          },\n          {\n            name: 'keen:referrer_parser',\n            input: {\n              page_url: 'page.url',\n              referrer_url: 'referrer.url',\n            },\n            output: 'referrer.info',\n          },\n        ],\n      },\n    };\n  });\n};\n\nexport const sendProgramOpening = () => {\n  if (isDev || !client) return;\n\n  incrementProgramOpeningCount();\n  client.recordEvent('program_opening');\n};\n\nexport const sendExportLaunched = (exportKind: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('export_launched', {\n    platform: 'GDevelop JS Platform', // Hardcoded here for now\n    exportKind,\n  });\n};\n\nexport const sendNewGameCreated = (templateName: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('new_game_creation', {\n    platform: 'GDevelop JS Platform', // Hardcoded here for now\n    templateName,\n  });\n};\n\nexport const sendTutorialOpened = (tutorialName: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('tutorial_opened', {\n    tutorialName,\n  });\n};\n\nexport const sendHelpFinderOpened = () => {\n  if (isDev || !client) return;\n\n  client.recordEvent('help_finder_opened', {});\n};\n\nexport const sendHelpSearch = (searchText: string) => {\n  console.log('sendHelpSearch', searchText);\n  if (isDev || !client) return;\n\n  client.recordEvent('help_search', {\n    searchText,\n  });\n};\n\nexport const sendErrorMessage = (\n  message: string,\n  type: 'error' | 'error-boundary',\n  rawError: any,\n  errorId: string\n) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('error_message', {\n    message,\n    type,\n    rawError,\n    errorId,\n  });\n};\n\nexport const sendSignupDone = (email: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('signup', {\n    email,\n  });\n};\n\nexport const sendSubscriptionCheckDialogShown = ({\n  mode,\n  id,\n}: {|\n  mode: string,\n  id: string,\n|}) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('subscription-check-dialog-shown', {\n    mode,\n    title: id,\n  });\n};\n\nexport const sendSubscriptionCheckDismiss = () => {\n  if (isDev || !client) return;\n\n  client.recordEvent('subscription-check-dialog-dismiss');\n};\n\nexport const sendSubscriptionDialogShown = () => {\n  if (isDev || !client) return;\n\n  client.recordEvent('subscription-dialog-shown', {});\n};\n\nexport const sendAssetOpened = ({\n  id,\n  name,\n}: {|\n  id: string,\n  name: string,\n|}) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('asset-opened', { id, name });\n};\n\nexport const sendAssetAddedToProject = ({\n  id,\n  name,\n}: {|\n  id: string,\n  name: string,\n|}) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('asset-added-to-project', { id, name });\n};\n\nexport const sendNewObjectCreated = (name: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('new-object-created', { name });\n};\n\nexport const sendShowcaseGameLinkOpened = (title: string, linkType: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('showcase-open-game-link', { title, linkType });\n};\n\nexport const sendChoosePlanClicked = (planId: string | null) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('choose-plan-click', { planId });\n};\n\nexport const sendExternalEditorOpened = (editorName: string) => {\n  if (isDev || !client) return;\n\n  client.recordEvent('open_external_editor', { editorName });\n};\n","// @flow\nimport VersionMetadata from './VersionMetadata';\n\nexport const getIDEVersion = (): string => VersionMetadata.version;\nexport const getIDEVersionWithHash = (): string =>\n  VersionMetadata.versionWithHash;\n\nlet gdCoreVersionString = '';\nexport const getGDCoreVersion = (): string => {\n  if (gdCoreVersionString) return gdCoreVersionString;\n\n  const gd: libGDevelop = global.gd;\n  gdCoreVersionString = gd ? gd.VersionWrapper.fullString() : 'Unknown';\n  return gdCoreVersionString;\n};\n","// @flow\n\nimport Window from '../../Utils/Window';\nimport { sendErrorMessage } from '../../Utils/Analytics/EventSender';\n\nexport const showMessageBox = (message: string) => {\n  Window.showMessageBox(message, 'info');\n};\n\ntype WarningOptions = {|\n  /**\n   * Delay the display of the warning to the next tick, not blocking the current function\n   * execution. This can be useful to work around freezing issues on Linux.\n   */\n  delayToNextTick: boolean,\n|};\n\nexport const showWarningBox = (message: string, options?: WarningOptions) => {\n  if (options && options.delayToNextTick) {\n    setTimeout(() => {\n      Window.showMessageBox(message, 'warning');\n    });\n  } else {\n    Window.showMessageBox(message, 'warning');\n  }\n};\n\ntype ErrorArgs = {|\n  message: string,\n  rawError: ?Error | Object,\n  errorId: string,\n  doNotReport?: boolean,\n|};\n\nexport const showErrorBox = ({\n  message,\n  rawError,\n  errorId,\n  doNotReport,\n}: ErrorArgs) => {\n  Window.showMessageBox(message, 'error');\n  if (!doNotReport) {\n    sendErrorMessage(message, 'error', rawError, errorId);\n  }\n  console.error(`${errorId}: \"${message}\". Raw error:`, rawError);\n};\n","// See https://gist.github.com/jed/982883\nconst generateUUID = a => {\n  return a\n    ? // eslint-disable-next-line\n      (a ^ ((Math.random() * 16) >> (a / 4))).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n};\n\nconst localStorageKey = 'gd-user-uuid';\n\nexport const getUserUUID = () => {\n  try {\n    const existingUserUUID = localStorage.getItem(localStorageKey);\n    if (existingUserUUID) return existingUserUUID;\n  } catch (e) {\n    console.warn('Unable to load stored user UUID', e);\n  }\n\n  const newUserUUID = generateUUID();\n  try {\n    localStorage.setItem(localStorageKey, newUserUUID);\n  } catch (e) {\n    console.warn('Unable to save user UUID', e);\n  }\n  return newUserUUID;\n};\n","// @flow\nimport { initializeApp } from 'firebase/app';\nimport {\n  Auth,\n  getAuth,\n  onAuthStateChanged,\n  User as FirebaseUser,\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  sendPasswordResetEmail,\n  signOut,\n  sendEmailVerification,\n  updateEmail,\n} from 'firebase/auth';\nimport { GDevelopFirebaseConfig, GDevelopUserApi } from './ApiConfigs';\nimport axios from 'axios';\nimport { showErrorBox } from '../../UI/Messages/MessageBox';\n\nexport type Profile = {|\n  id: string,\n  email: string,\n  username: ?string,\n  description: ?string,\n  getGameStatsEmail: boolean,\n|};\n\nexport type LoginForm = {|\n  email: string,\n  password: string,\n|};\n\nexport type RegisterForm = {|\n  email: string,\n  password: string,\n  username: string,\n|};\n\nexport type EditForm = {|\n  username: string,\n  description: string,\n  getGameStatsEmail: boolean,\n|};\n\nexport type ChangeEmailForm = {|\n  email: string,\n|};\n\nexport type AuthError = {\n  code:\n    | 'auth/invalid-email'\n    | 'auth/user-disabled'\n    | 'auth/user-not-found'\n    | 'auth/wrong-password'\n    | 'auth/email-already-in-use'\n    | 'auth/operation-not-allowed'\n    | 'auth/weak-password'\n    | 'auth/username-used'\n    | 'auth/malformed-username'\n    | 'auth/requires-recent-login',\n};\n\nexport default class Authentication {\n  auth: Auth;\n  _onUserLogoutCallback: ?() => void | Promise<void> = null;\n  _onUserUpdateCallback: ?() => void | Promise<void> = null;\n\n  constructor() {\n    const app = initializeApp(GDevelopFirebaseConfig);\n    this.auth = getAuth(app);\n    onAuthStateChanged(this.auth, user => {\n      if (user) {\n        // User has logged in or changed.\n        if (this._onUserUpdateCallback) this._onUserUpdateCallback();\n      } else {\n        // User has logged out.\n        if (this._onUserLogoutCallback) this._onUserLogoutCallback();\n      }\n    });\n  }\n\n  setOnUserLogoutCallback = (cb: () => void | Promise<void>) => {\n    this._onUserLogoutCallback = cb;\n  };\n\n  setOnUserUpdateCallback = (cb: () => void | Promise<void>) => {\n    this._onUserUpdateCallback = cb;\n  };\n\n  createFirebaseAccount = (form: RegisterForm): Promise<void> => {\n    return createUserWithEmailAndPassword(this.auth, form.email, form.password)\n      .then(userCredentials => {\n        // The user is now stored in `this.auth`.\n        sendEmailVerification(userCredentials.user);\n      })\n      .catch(error => {\n        console.error('Error while creating firebase account:', error);\n        throw error;\n      });\n  };\n\n  createUser = (\n    getAuthorizationHeader: () => Promise<string>,\n    form: RegisterForm\n  ): Promise<void> => {\n    return getAuthorizationHeader()\n      .then(authorizationHeader => {\n        const { currentUser } = this.auth;\n        if (!currentUser) {\n          console.error(\n            'Cannot create the user as it is not logged in any more.'\n          );\n          throw new Error(\n            'Cannot create the user as it is not logged in any more.'\n          );\n        }\n        return axios.post(\n          `${GDevelopUserApi.baseUrl}/user`,\n          {\n            id: currentUser.uid,\n            email: form.email,\n            username: form.username,\n          },\n          {\n            params: {\n              userId: currentUser.uid,\n            },\n            headers: {\n              Authorization: authorizationHeader,\n            },\n          }\n        );\n      })\n      .then(() => {\n        // User successfully created\n      })\n      .catch(error => {\n        console.error('Error while creating user:', error);\n        throw error;\n      });\n  };\n\n  login = (form: LoginForm): Promise<void> => {\n    return signInWithEmailAndPassword(this.auth, form.email, form.password)\n      .then(userCredentials => {\n        // The user is now stored in `this.auth`.\n      })\n      .catch(error => {\n        console.error('Error while login:', error);\n        throw error;\n      });\n  };\n\n  forgotPassword = (form: LoginForm): Promise<void> => {\n    return sendPasswordResetEmail(this.auth, form.email);\n  };\n\n  getFirebaseUser = async (): Promise<?FirebaseUser> => {\n    const { currentUser } = this.auth;\n    if (!currentUser) {\n      return null;\n    }\n\n    // In order to fetch the latest firebaseUser properties (like emailVerified)\n    // we have to call the reload method.\n    await currentUser.reload();\n    return this.auth.currentUser;\n  };\n\n  sendFirebaseEmailVerification = async (): Promise<void> => {\n    {\n      const { currentUser } = this.auth;\n      if (!currentUser)\n        throw new Error(\n          'Tried to send verification email while not authenticated.'\n        );\n\n      await currentUser.reload();\n    }\n    const { currentUser } = this.auth;\n    if (!currentUser || currentUser.emailVerified) return;\n\n    try {\n      sendEmailVerification(currentUser);\n    } catch (error) {\n      showErrorBox({\n        message:\n          'An email has been sent recently, check your inbox or please try again later.',\n        rawError: error,\n        errorId: 'email-verification-send-error',\n      });\n    }\n  };\n\n  changeEmail = async (\n    getAuthorizationHeader: () => Promise<string>,\n    form: ChangeEmailForm\n  ) => {\n    const { currentUser } = this.auth;\n    if (!currentUser)\n      throw new Error('Tried to change email while not authenticated.');\n\n    return updateEmail(currentUser, form.email)\n      .then(() => sendEmailVerification(currentUser))\n      .then(() => {\n        console.log('Email successfully changed in Firebase.');\n        return getAuthorizationHeader();\n      })\n      .then(authorizationHeader => {\n        return axios.patch(\n          `${GDevelopUserApi.baseUrl}/user/${currentUser.uid}`,\n          {\n            email: form.email,\n          },\n          {\n            params: {\n              userId: currentUser.uid,\n            },\n            headers: {\n              Authorization: authorizationHeader,\n            },\n          }\n        );\n      })\n      .then(() => {\n        console.log('Email successfully changed in the GDevelop services.');\n      })\n      .catch(error => {\n        console.error('An error happened during email change.', error);\n        throw error;\n      });\n  };\n\n  getUserProfile = async (getAuthorizationHeader: () => Promise<string>) => {\n    const { currentUser } = this.auth;\n    if (!currentUser)\n      throw new Error('Tried to get user profile while not authenticated.');\n\n    return getAuthorizationHeader()\n      .then(authorizationHeader => {\n        return axios.get(`${GDevelopUserApi.baseUrl}/user/${currentUser.uid}`, {\n          params: {\n            userId: currentUser.uid,\n          },\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        });\n      })\n      .then(response => response.data)\n      .catch(error => {\n        console.error('Error while fetching user:', error);\n        throw error;\n      });\n  };\n\n  editUserProfile = async (\n    getAuthorizationHeader: () => Promise<string>,\n    form: EditForm\n  ) => {\n    const { currentUser } = this.auth;\n    if (!currentUser)\n      throw new Error('Tried to edit user profile while not authenticated.');\n\n    return getAuthorizationHeader()\n      .then(authorizationHeader => {\n        const { username, description, getGameStatsEmail } = form;\n        return axios.patch(\n          `${GDevelopUserApi.baseUrl}/user/${currentUser.uid}`,\n          {\n            username,\n            description,\n            getGameStatsEmail,\n          },\n          {\n            params: {\n              userId: currentUser.uid,\n            },\n            headers: {\n              Authorization: authorizationHeader,\n            },\n          }\n        );\n      })\n      .then(response => response.data)\n      .catch(error => {\n        console.error('Error while editing user:', error);\n        throw error;\n      });\n  };\n\n  acceptGameStatsEmail = async (\n    getAuthorizationHeader: () => Promise<string>\n  ) => {\n    const { currentUser } = this.auth;\n    if (!currentUser)\n      throw new Error(\n        'Tried to accept game stats email while not authenticated.'\n      );\n\n    return getAuthorizationHeader()\n      .then(authorizationHeader => {\n        return axios.patch(\n          `${GDevelopUserApi.baseUrl}/user/${currentUser.uid}`,\n          { getGameStatsEmail: true },\n          {\n            params: { userId: currentUser.uid },\n            headers: { Authorization: authorizationHeader },\n          }\n        );\n      })\n      .then(response => response.data)\n      .catch(error => {\n        console.error('Error while accepting game stats email:', error);\n        throw error;\n      });\n  };\n\n  getFirebaseUserSync = (): ?FirebaseUser => {\n    return this.auth.currentUser || null;\n  };\n\n  logout = () => {\n    signOut(this.auth)\n      .then(() => {\n        console.log('Logout successful.');\n      })\n      .catch(error => {\n        console.error('An error happened during logout.', error);\n        throw error;\n      });\n  };\n\n  getAuthorizationHeader = async (): Promise<string> => {\n    const { currentUser } = this.auth;\n    if (!currentUser) throw new Error('User is not authenticated.');\n\n    return currentUser.getIdToken().then(token => `Bearer ${token}`);\n  };\n\n  isAuthenticated = (): boolean => {\n    return !!this.auth.currentUser;\n  };\n}\n","// @flow\nimport optionalRequire from './OptionalRequire.js';\nconst electron = optionalRequire('electron');\nconst process = optionalRequire('process');\n\nlet _isWindows = false;\nif (electron) {\n  _isWindows = electron.remote.require('electron-is').windows();\n}\nconst _isMacLike =\n  typeof navigator !== 'undefined' &&\n  navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i)\n    ? true\n    : false;\n\nconst _isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n  typeof navigator !== 'undefined' ? navigator.userAgent : ''\n);\n\nexport const getUserAgent = (): string => {\n  return typeof navigator !== 'undefined'\n    ? navigator.userAgent || 'Unknown navigator'\n    : 'Unknown (not a navigator)';\n};\n\nexport const getArch = (): string => {\n  return process\n    ? process.arch || 'Unknown architecture'\n    : 'Unknown architecture (web-app)';\n};\n\nexport const getSystemVersion = (): string => {\n  return process && process.getSystemVersion\n    ? process.getSystemVersion() || 'Unknown system version'\n    : 'Unknown system version (web-app)';\n};\n\nexport const getPlatformName = (): string => {\n  return process\n    ? process.platform || 'Unknown platform'\n    : (typeof navigator !== 'undefined' ? navigator.platform : '') ||\n        'Unknown platform (web-app)';\n};\n\nexport const isWindows = () => _isWindows;\nexport const isMacLike = () => _isMacLike;\nexport const isMobile = () => _isMobile;\n","// @flow\n\n/**\n * Load a script from the specified source. The returned promise\n * resolves when the script is loaded.\n * @param source The script source\n */\nexport const loadScript = (source: string): Promise<void> => {\n  return new Promise((resolve, reject) => {\n    if (typeof document === 'undefined') {\n      reject(\n        new Error('loadScript is only supported in a browser environment.')\n      );\n      return;\n    }\n\n    const { body } = document;\n    if (!body) {\n      reject(\n        new Error('loadScript is only supported in a browser environment.')\n      );\n      return;\n    }\n\n    const scriptElement = document.createElement('script');\n    scriptElement.type = 'text/javascript';\n    scriptElement.src = source;\n    scriptElement.onload = () => resolve();\n    scriptElement.onerror = error => reject(error);\n    scriptElement.onabort = error => reject(error);\n\n    body.appendChild(scriptElement);\n  });\n};\n","// @flow\ntype RawStepMeasure = [string, number];\ntype SummarizedStep = {|\n  stepName: string,\n  time: number,\n  elapsedTime: number,\n|};\ntype Summary = {|\n  totalStartupTime: number,\n  steps: Array<SummarizedStep>,\n|};\n\nexport const GD_STARTUP_TIMES: Array<RawStepMeasure> = global.GD_STARTUP_TIMES;\n\nif (!GD_STARTUP_TIMES) {\n  console.error(\n    'Could not find GD_STARTUP_TIMES array. Have you declared it in index.html, in a synchronous script?'\n  );\n}\n\nexport const getStartupTimesSummary = (): Summary => {\n  let previousStep = ['<init>', 0];\n\n  let steps = GD_STARTUP_TIMES.map(step => {\n    const stepSummary = {\n      stepName: step[0],\n      time: step[1],\n      elapsedTime: step[1] - previousStep[1],\n    };\n\n    previousStep = step;\n    return stepSummary;\n  });\n\n  return {\n    steps,\n    totalStartupTime: previousStep[1],\n  };\n};\n","import Raven from 'raven-js';\nimport { getUserUUID } from './UserUUID';\nimport { getIDEVersionWithHash } from '../../Version';\nconst isDev = process.env.NODE_ENV === 'development';\n\nexport const installRaven = () => {\n  if (isDev) return;\n\n  Raven.config('https://e10c176ee68f432199cd292ba181e03b@sentry.io/233519', {\n    release: getIDEVersionWithHash(),\n  })\n    .install()\n    .setUserContext({\n      id: getUserUUID(),\n    });\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nconst PUBLIC_URL = process.env.PUBLIC_URL;\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      console.log(\n        `The origin in PUBLIC_URL (${\n          publicUrl.origin\n        }) is different than the current origin (${\n          window.location.origin\n        }) - Service Worker disabled`\n      );\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  } else {\n    console.log(\n      'Development build (or unsupported browser) - Service Worker disabled'\n    );\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// @flow\nimport 'element-closest';\nimport React, { Component, type Element } from 'react';\nimport ReactDOM from 'react-dom';\nimport Authentication from './Utils/GDevelopServices/Authentication';\nimport {\n  sendProgramOpening,\n  installAnalyticsEvents,\n} from './Utils/Analytics/EventSender';\nimport { installRaven } from './Utils/Analytics/Raven';\nimport { register } from './serviceWorker';\nimport './UI/icomoon-font.css'; // Styles for Icomoon font.\nimport optionalRequire from './Utils/OptionalRequire.js';\nimport { loadScript } from './Utils/LoadScript.js';\nimport { showErrorBox } from './UI/Messages/MessageBox';\nimport VersionMetadata from './Version/VersionMetadata';\n\nconst GD_STARTUP_TIMES = global.GD_STARTUP_TIMES || [];\n\n// No i18n in this file\n\nconst electron = optionalRequire('electron');\n\nconst styles = {\n  loadingMessage: {\n    position: 'absolute',\n    top: 'calc(50% + 80px)',\n    left: 15,\n    right: 15,\n    fontSize: 20,\n    fontFamily: 'sans-serif',\n    color: 'darkgray',\n    textAlign: 'center',\n    animation:\n      'text-focus-in 0.5s cubic-bezier(0.215, 0.610, 0.355, 1.000) both',\n  },\n};\n\ntype State = {|\n  loadingMessage: string,\n  App: ?Element<*>,\n|};\n\nclass Bootstrapper extends Component<{}, State> {\n  state = {\n    loadingMessage: 'Loading the editor...',\n    App: null,\n  };\n  authentication = new Authentication();\n\n  componentDidMount() {\n    installAnalyticsEvents(this.authentication);\n    installRaven();\n    GD_STARTUP_TIMES.push(['bootstrapperComponentDidMount', performance.now()]);\n\n    // Load GDevelop.js, ensuring a new version is fetched when the version changes.\n    loadScript(\n      `./libGD.js?cache-buster=${VersionMetadata.versionWithHash}`\n    ).then(() => {\n      GD_STARTUP_TIMES.push(['libGDLoadedTime', performance.now()]);\n      const initializeGDevelopJs = global.initializeGDevelopJs;\n      if (!initializeGDevelopJs) {\n        this.handleEditorLoadError(\n          new Error('Missing initializeGDevelopJs in libGD.js')\n        );\n        return;\n      }\n\n      initializeGDevelopJs({\n        // Override the resolved URL for the .wasm file,\n        // to ensure a new version is fetched when the version changes.\n        locateFile: (path: string, prefix: string) => {\n          return (\n            prefix + path + `?cache-buster=${VersionMetadata.versionWithHash}`\n          );\n        },\n      }).then(gd => {\n        global.gd = gd;\n        GD_STARTUP_TIMES.push([\n          'libGD.js initialization done',\n          performance.now(),\n        ]);\n\n        if (electron) {\n          import(/* webpackChunkName: \"local-app\" */ './LocalApp')\n            .then(module =>\n              this.setState({\n                App: module.create(this.authentication),\n                loadingMessage: '',\n              })\n            )\n            .catch(this.handleEditorLoadError);\n        } else {\n          import(/* webpackChunkName: \"browser-app\" */ './BrowserApp')\n            .then(module =>\n              this.setState({\n                App: module.create(this.authentication),\n                loadingMessage: '',\n              })\n            )\n            .catch(this.handleEditorLoadError);\n        }\n      });\n    }, this.handleEditorLoadError);\n  }\n\n  handleEditorLoadError = rawError => {\n    const message = !electron\n      ? 'Please check your internet connectivity, close the tab and reopen it.'\n      : 'Please restart the application or reinstall the latest version if the problem persists.';\n\n    this.setState({\n      loadingMessage: `Unable to load GDevelop. ${message}`,\n    });\n    showErrorBox({\n      message: `Unable to load GDevelop. ${message}`,\n      rawError,\n      errorId: 'editor-load-error',\n    });\n  };\n\n  render() {\n    const { App, loadingMessage } = this.state;\n\n    return (\n      <React.Fragment>\n        {App}\n        {loadingMessage && (\n          <div style={styles.loadingMessage}>{loadingMessage}</div>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nconst rootElement = document.getElementById('root');\nif (rootElement) {\n  GD_STARTUP_TIMES.push(['reactDOMRenderCall', performance.now()]);\n  ReactDOM.render(<Bootstrapper />, rootElement);\n} else console.error('No root element defined in index.html');\n\n// registerServiceWorker();\nregister();\nsendProgramOpening();\n"],"sourceRoot":""}