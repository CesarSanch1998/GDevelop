(this["webpackJsonpgdevelop-ide"]=this["webpackJsonpgdevelop-ide"]||[]).push([[4],{1687:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return F}));var r=n(3),o=n(4),a=n(6),i=n(5),c=n(89),u=n(13),l=n.n(u),s=n(2012),p=n(101),d=n(299),f=n(98),m=n(24),h=n(91),v=n(115),g=n(156),b=n(1688),E=n(14),w=n.n(E),y=n(162),x=n(818),j=n(562),P=n(1689),O=w()("path"),S=w()("electron"),k=S?S.remote.app:null,C=w()("fs-extra"),D=e.gd,F=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"createFromExample",value:function(e,t){var n=this,r=this.props.outputPath;C&&r&&Object(b.a)((function(o){try{C.mkdirsSync(r),C.copySync(O.join(o,t),r)}catch(a){return void Object(x.b)(e,r,a)}n.props.onOpen(j.a,{fileIdentifier:O.join(r,t+".json")}),Object(m.j)(t)}))}},{key:"createEmptyGame",value:function(e){var t=this.props.outputPath;if(C&&t){try{C.mkdirsSync(t)}catch(o){return void Object(x.b)(e,t,o)}var n=D.ProjectHelper.createNewGDJSProject(),r=O.join(t,"game.json");n.setProjectFile(r),this.props.onCreate(n,j.a,{fileIdentifier:r}),Object(m.j)("")}}},{key:"componentDidMount",value:function(){""===this.props.outputPath&&O&&k&&this.props.onChangeOutputPath(Object(P.a)(O.join(k.getPath("documents"),"GDevelop projects")))}},{key:"render",value:function(){var e=this;return l.a.createElement(c.I18n,null,(function(t){var n=t.i18n;return l.a.createElement(h.a,{noMargin:!0},l.a.createElement(h.b,{expand:!0},l.a.createElement(h.a,{expand:!0},l.a.createElement(d.a,{fullWidth:!0,value:e.props.outputPath,onChange:e.props.onChangeOutputPath,type:"create-game"}))),l.a.createElement(s.a,null),l.a.createElement(h.b,null,l.a.createElement(h.a,null,l.a.createElement(f.a,null,l.a.createElement(c.Trans,{id:"Choose a game to use as a starter:"})))),l.a.createElement(h.b,null,l.a.createElement(h.a,{expand:!0,noMargin:!0},l.a.createElement(v.a,null,l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/platformer.png"}),primaryText:l.a.createElement(c.Trans,{id:"Platformer"}),secondaryText:l.a.createElement(c.Trans,{id:"A simple platform game, with coins to collect, moving platforms and enemies."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"platformer")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/space-shooter.png"}),primaryText:l.a.createElement(c.Trans,{id:"8-bit Space Shooter"}),secondaryText:l.a.createElement(c.Trans,{id:"A beautiful, retro side-scrolling shooter where you must defeat incoming enemies with your mecha transforming spaceship. Huge boss included!"}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"space-shooter")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/geometry-monster.png"}),primaryText:l.a.createElement(c.Trans,{id:"Geometry Monster"}),secondaryText:l.a.createElement(c.Trans,{id:"A hyper casual endless game where you have to collect shapes and avoid bombs, with a progressively increasing difficulty."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"geometry-monster")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/isometric-game.png"}),primaryText:l.a.createElement(c.Trans,{id:"Isometric game"}),secondaryText:l.a.createElement(c.Trans,{id:"An example of an isometric game where you can explore a map with your character."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"isometric-game")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/downhill-bike-physics-demo.png"}),primaryText:"Downhill Bike Racing",secondaryText:l.a.createElement(c.Trans,{id:"An example of a 2D physics based game, where players have to reach the end as fast as possible."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"downhill-bike-physics-demo")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/pairs.png"}),primaryText:"Pairs",secondaryText:l.a.createElement(c.Trans,{id:"Find all matching pairs of cards in this relaxing game. Use tweens to create smooth, natural animations with a few events."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"pairs")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/new.png"}),primaryText:l.a.createElement(c.Trans,{id:"Empty game"}),secondaryText:l.a.createElement(c.Trans,{id:"Start a new game from scratch."}),secondaryTextLines:2,onClick:function(){return e.createEmptyGame(n)}}),l.a.createElement(g.a,null,l.a.createElement(c.Trans,{id:"Advanced"})),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/particle-effects-demo.png"}),primaryText:l.a.createElement(c.Trans,{id:"Particle Effects Demo"}),secondaryText:l.a.createElement(c.Trans,{id:"A demo of various high quality particle effects (fire, magic, snow, rune spell...) that you can try and use in your game."}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"particle-effects-demo")}}),l.a.createElement(v.b,{leftIcon:l.a.createElement(y.a,{iconSize:40,src:"res/starters_icons/game-feel-demo.png"}),primaryText:l.a.createElement(c.Trans,{id:"Game Feel Demo"}),secondaryText:l.a.createElement(c.Trans,{id:'A demo showing how to enhance the "game feel" of your project: VFX, shot trail, ambient sounds and SFX, screenshake, wobble...'}),secondaryTextLines:2,onClick:function(){return e.createFromExample(n,"game-feel-demo")}})),l.a.createElement(h.b,{alignItems:"center",justifyContent:"center"},l.a.createElement(p.a,{label:l.a.createElement(c.Trans,{id:"See examples"}),onClick:function(){return e.props.onShowExamples()}})))))}))}}]),n}(u.Component)}).call(this,n(8))},1688:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(14),o=n.n(r),a=o()("electron"),i=o()("path"),c=a?a.remote.app:null,u=o()("fs"),l=o()("process"),s=function(e,t,n){return u.access(e,u.constants.R_OK,(function(r){r?n():t(e)}))},p=function(e){if(!l||!u)return"";var t=c?c.getAppPath():l.cwd();s(i.join(t,"..","examples"),e,(function(){s(i.join(t,"..","..","app","resources","examples"),e,(function(){e(null)}))}))}},1689:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(137),o=n(14),a=n.n(o),i=a()("path"),c=a()("fs-extra"),u=function(e){if(!i)return e;var t=Object(r.a)("My project",(function(t){try{c.accessSync(i.join(e,t))}catch(n){return!1}return!0}));return i.join(e,t)}},1690:function(e,t,n){"use strict";(function(e){var r,o,a,i,c,u,l=n(3),s=n(4),p=n(6),d=n(5),f=n(13),m=n(223),h=n(14),v=n.n(h),g=n(15),b=v()("electron"),E=b?b.remote.dialog:null,w=v()("path"),y=e.gd;t.a=[{name:"localAudioFileOpener",displayName:"Choose a new audio file",kind:"audio",component:(r=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose an audio file"}),name:o._({id:"Audio files"}),extensions:["aac","wav","mp3","ogg"]};return x(o,t,c,a,i,"audio").then((function(e){return e.map((function(e){var n=new y.AudioResource,r=w.dirname(t.getProjectFile());return n.setFile(w.relative(r,e)),n.setName(w.relative(r,e)),n}))}))},e}return Object(s.a)(n,[{key:"render",value:function(){return null}}]),n}(f.Component),r)},{name:"localFileOpener",displayName:"Choose a new image",kind:"image",component:(o=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose an image"}),name:o._({id:"Image files"}),extensions:["png","jpg"]};return x(o,t,c,a,i,"image").then((function(e){return e.map((function(e){var n=new y.ImageResource,r=w.dirname(t.getProjectFile());return n.setFile(w.relative(r,e)),n.setName(w.relative(r,e)),n}))}))},e}return Object(s.a)(n,[{key:"render",value:function(){return null}}]),n}(f.Component),o)},{name:"localFontFileOpener",displayName:"Choose a new font file",kind:"font",component:(a=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a font file"}),name:o._({id:"Font files"}),extensions:["ttf","otf"]};return x(o,t,c,a,i,"font").then((function(e){return e.map((function(e){var n=new y.FontResource,r=w.dirname(t.getProjectFile());return n.setFile(w.relative(r,e)),n.setName(w.relative(r,e)),n}))}))},e}return Object(s.a)(n,[{key:"render",value:function(){return null}}]),n}(f.Component),a)},{name:"localVideoFileOpener",displayName:"Choose a new video file",kind:"video",component:(i=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a video file"}),name:o._({id:"Video files"}),extensions:["mp4"]};return x(o,t,c,a,i,"video").then((function(e){return e.map((function(e){var n=new y.VideoResource,r=w.dirname(t.getProjectFile());return n.setFile(w.relative(r,e)),n.setName(w.relative(r,e)),n}))}))},e}return Object(s.a)(n,[{key:"render",value:function(){return null}}]),n}(f.Component),i)},{name:"localJsonFileOpener",displayName:"Choose a new json file",kind:"json",component:(c=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a json file"}),name:o._({id:"JSON file"}),extensions:["json"]};return x(o,t,c,a,i,"json").then((function(e){return e.map((function(e){var n=new y.JsonResource,r=w.dirname(t.getProjectFile());return n.setFile(w.relative(r,e)),n.setName(w.relative(r,e)),n}))}))},e}return Object(s.a)(n,[{key:"render",value:function(){return null}}]),n}(f.Component),c)},{name:"localBitmapFontFileOpener",displayName:"Choose a new bitmap font file (.fnt, .xml)",kind:"bitmapFont",component:(u=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).chooseResources=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.props,o=r.i18n,a=r.getLastUsedPath,i=r.setLastUsedPath,c={multiSelections:n,title:o._({id:"Choose a bitmap font file"}),name:o._({id:"FNT, XML file"}),extensions:["fnt","xml"]};return x(o,t,c,a,i,"bitmapFont").then((function(e){return e.map((function(e){var n=new y.BitmapFontResource,r=w.dirname(t.getProjectFile());return n.setFile(w.relative(r,e)),n.setName(w.relative(r,e)),n}))}))},e}return Object(s.a)(n,[{key:"render",value:function(){return null}}]),n}(f.Component),u)}];var x=function(e,t,n,r,o,a){if(!E)return Promise.reject("Not supported");var i=["openFile"];n.multiSelections&&i.push("multiSelections");var c=w.dirname(t.getProjectFile()),u=r(t,a)||c,l=b.remote.getCurrentWindow();return E.showOpenDialog(l,{title:n.title,properties:i,filters:[{name:n.name,extensions:n.extensions}],defaultPath:u}).then((function(n){var r=n.filePaths;if(!r||!r.length)return[];var i=w.parse(r[0]).dir;if((o(t,a,i),r.filter((function(e){return!Object(m.g)(t,e)})).length)&&g.b.showConfirmDialog(e._({id:"This/these file(s) are outside the project folder. Would you like to make a copy of them in your project folder first (recommended)?"})))return Object(m.c)(t,r);return r}))}}).call(this,n(8))},1691:function(e,t,n){"use strict";var r=n(1692),o=n(1693),a=n(1694),i=n(24),c=[{name:"piskel-app",displayName:"Edit with Piskel",kind:"image",edit:function(e){return Object(i.g)("piskel"),Object(r.a)(e)}},{name:"Jfxr",displayName:"Create/Edit a Sound effect with Jfxr (*.wav)",kind:"audio",edit:function(e){return Object(i.g)("jfxr"),Object(o.a)(e)}},{name:"Yarn",displayName:"Create/Edit a Dialogue Tree with Yarn (*.json)",kind:"json",edit:function(e){return Object(i.g)("yarn"),Object(a.a)(e)}}];t.a=c},1692:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(94),o=n(14),a=n.n(o),i=n(223),c=a()("electron"),u=a()("path"),l=c?c.ipcRenderer:null,s=e.gd,p=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),o=e.singleFrame,a=e.onChangesSaved,p=e.extraOptions;if(c&&l){var d=n.map((function(e,n){return{resourcePath:Object(i.e)(t,e),resourceName:e,originalIndex:n}})),f=u.dirname(t.getProjectFile()),m=Object(r.a)(Object(r.a)({},p),{},{resources:d,singleFrame:o,projectPath:f});l.removeAllListeners("piskel-changes-saved"),l.on("piskel-changes-saved",(function(e,n,r,o){var c=o.data?{pskl:o}:null,l=t.getResourcesManager();n.forEach((function(e){e.name=u.relative(f,e.path),Object(i.d)(t,new s.ImageResource,e.name)})),n[0].metadata=c,n[0].newAnimationName=r,o.singleFrame?(c&&l.getResource(u.relative(f,n[0].path)).setMetadata(JSON.stringify(c)),a(n)):a(n)})),l.send("piskel-open-then-load-animation",m)}}}).call(this,n(8))},1693:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(14),o=n.n(r),a=n(223),i=o()("electron"),c=o()("path"),u=i?i.ipcRenderer:null,l=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&u){var s=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:s};u.removeAllListeners("jfxr-changes-saved"),u.on("jfxr-changes-saved",(function(e,n,o){var i=c.relative(s,n);Object(a.d)(t,new l.AudioResource,i);var u={jfxr:o};t.getResourcesManager().getResource(i).setMetadata(JSON.stringify(u)),r([{metadata:u,name:i}])})),u.send("jfxr-create-wav",p)}}}).call(this,n(8))},1694:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var r=n(14),o=n.n(r),a=n(223),i=o()("electron"),c=o()("path"),u=i?i.ipcRenderer:null,l=e.gd,s=function(e){var t=e.project,n=(e.resourcesLoader,e.resourceNames),r=e.onChangesSaved,o=e.extraOptions;if(i&&u){var s=c.dirname(t.getProjectFile()),p={resourcePath:Object(a.e)(t,n[0]),externalEditorData:o.externalEditorData,projectPath:s};u.removeAllListeners("yarn-changes-saved"),u.on("yarn-changes-saved",(function(e,n){var o=c.relative(s,n);Object(a.d)(t,new l.JsonResource,o),r([{name:o}])})),u.send("yarn-create-json",p)}}}).call(this,n(8))},1695:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return P}));var r=n(3),o=n(4),a=n(6),i=n(5),c=n(89),u=n(13),l=n(200),s=n(14),p=n.n(s),d=n(811),f=n(185),m=n(1696),h=n(139),v=n.n(h),g=n(492),b=n(1697),E=p()("electron"),w=p()("path"),y=E?E.ipcRenderer:null,x=E?E.remote.BrowserWindow:null,j=e.gd,P=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canDoNetworkPreview=function(){return!0},e.canDoHotReload=function(){return!0},e.state={networkPreviewDialogOpen:!1,networkPreviewHost:null,networkPreviewPort:null,networkPreviewError:null,previewGamePath:null,devToolsOpen:!1,previewBrowserWindowConfig:null,hotReloadsCount:0,hideMenuBar:!0,alwaysOnTop:!0},e._networkPreviewSubscriptionChecker=null,e._hotReloadSubscriptionChecker=null,e._openPreviewBrowserWindow=function(){if(x&&e.state.previewBrowserWindowConfig&&e.state.previewGamePath){var t=new x(e.state.previewBrowserWindowConfig);t.loadURL("file://".concat(e.state.previewGamePath,"/index.html")),t.setMenuBarVisibility(e.state.hideMenuBar),t.setAlwaysOnTop(e.state.alwaysOnTop),t.webContents.on("devtools-opened",(function(){e.setState({devToolsOpen:!0})})),t.webContents.on("devtools-closed",(function(){e.setState({devToolsOpen:!1})})),e.state.devToolsOpen&&t.openDevTools()}},e._openPreviewWindow=function(t,n,r){e.setState({previewBrowserWindowConfig:{width:t.getGameResolutionWidth(),height:t.getGameResolutionHeight(),useContentSize:!0,title:"Preview of ".concat(t.getName()),backgroundColor:"#000000",webPreferences:{nodeIntegration:!0}},previewGamePath:n,hideMenuBar:!r.getIsMenuBarHiddenInPreview(),alwaysOnTop:r.getIsAlwaysOnTopInPreview()},(function(){if(r.networkPreview){if(!y)return;y.removeAllListeners("serve-folder-done"),y.removeAllListeners("local-network-ips"),y.on("serve-folder-done",(function(t,n,r){n?e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:null,networkPreviewHost:null,networkPreviewError:n}):e.setState({networkPreviewDialogOpen:!0,networkPreviewPort:r.port}),setTimeout((function(){return e._checkSubscriptionForNetworkPreview()}))})),y.on("local-network-ip",(function(t,n){e.setState({networkPreviewHost:n})})),y.send("serve-folder",{root:n}),y.send("get-local-network-ip")}else e._openPreviewBrowserWindow()}))},e._prepareExporter=function(){return Object(f.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=v()(new j.AbstractFileSystemJS,l.a);return{outputDir:w.join(n.getTempDir(),"preview"),exporter:new j.Exporter(n,t)}}))},e.launchPreview=function(t){var n=t.project,r=t.layout,o=t.externalLayout;return e.getPreviewDebuggerServer().startServer().catch((function(e){console.error("Unable to start the Debugger Server for the preview:",e)})).then((function(){return e._prepareExporter()})).then((function(a){var i=a.outputDir,c=a.exporter;Object(d.a)((function(){var a=new j.PreviewExportOptions(n,i);a.setLayoutName(r.getName()),o&&a.setExternalLayoutName(o.getName());var u=e.getPreviewDebuggerServer().getServerAddress();u&&a.setDebuggerServerAddress(u.address,""+u.port);var l=e.props.getIncludeFileHashs();for(var s in l){var p=l[s];a.setIncludeFileHash(s,p)}var d=e.getPreviewDebuggerServer().getExistingDebuggerIds(),f=t.hotReload&&!!d.length;a.setProjectDataOnlyExport(f&&t.projectDataOnlyExport),a.setFullLoadingScreen(t.fullLoadingScreen),c.exportProjectForPixiPreview(a),a.delete(),c.delete(),f?(d.forEach((function(t){e.getPreviewDebuggerServer().sendMessage(t,{command:"hotReload"})})),e.state.hotReloadsCount%16===0&&e._hotReloadSubscriptionChecker&&e._hotReloadSubscriptionChecker.checkHasSubscription(),e.setState((function(e){return{hotReloadsCount:e.hotReloadsCount+1}}))):e._openPreviewWindow(n,i,t)}),(function(e){return console.info("Preview took ".concat(e,"ms"))}))}))},e._checkSubscriptionForNetworkPreview=function(){return!e._networkPreviewSubscriptionChecker||e._networkPreviewSubscriptionChecker.checkHasSubscription()},e}return Object(o.a)(n,[{key:"getPreviewDebuggerServer",value:function(){return b.a}},{key:"render",value:function(){var e=this,t=this.state,n=t.networkPreviewDialogOpen,r=t.networkPreviewHost,o=t.networkPreviewPort,a=t.networkPreviewError;return u.createElement(u.Fragment,null,u.createElement(g.a,{ref:function(t){return e._networkPreviewSubscriptionChecker=t},onChangeSubscription:function(){e.setState({networkPreviewDialogOpen:!1}),e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Preview over wifi",title:u.createElement(c.Trans,{id:"Preview over wifi"}),mode:"try"}),u.createElement(g.a,{ref:function(t){return e._hotReloadSubscriptionChecker=t},onChangeSubscription:function(){e.props.onChangeSubscription&&e.props.onChangeSubscription()},id:"Hot reloading",title:u.createElement(c.Trans,{id:"Live preview (apply changes to the running preview)"}),mode:"try"}),u.createElement(m.a,{open:n,url:r&&o?"".concat(r,":").concat(o):null,error:a,onClose:function(){return e.setState({networkPreviewDialogOpen:!1})},onExport:this.props.onExport,onRunPreviewLocally:this._openPreviewBrowserWindow}))}}]),n}(u.Component)}).call(this,n(8))},1696:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(3),o=n(4),a=n(6),i=n(5),c=n(89),u=n(13),l=n(102),s=n(100),p=n(110),d=n(98),f=n(91),m=n(140),h=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.open,r=e.error,o=e.onExport,a=e.onClose,i=e.onRunPreviewLocally;return n?u.createElement(l.a,{actions:[u.createElement(s.a,{key:"close",label:u.createElement(c.Trans,{id:"Close"}),primary:!0,onClick:a})],secondaryActions:[o&&u.createElement(s.a,{key:"export",label:u.createElement(c.Trans,{id:"Export game"}),onClick:o}),u.createElement(s.a,{key:"run-preview-locally",label:u.createElement(c.Trans,{id:"Run on this computer"}),onClick:i})],cannotBeDismissed:!0,open:n,onRequestClose:a},r&&u.createElement(f.b,null,u.createElement(d.a,null,u.createElement(c.Trans,{id:"Unable to start the server for the preview! Make sure that you are authorized to run servers on this computer. Otherwise, use classic preview to test your game."}))),!r&&!t&&u.createElement(m.a,null),!r&&t&&u.createElement("div",null,u.createElement(f.b,null,u.createElement(d.a,null,u.createElement(c.Trans,{id:"Your preview is ready! On your mobile or tablet, open your browser and enter in the address bar:"}))),u.createElement(p.b,{value:t,fullWidth:!0}),u.createElement(f.b,null,u.createElement(d.a,null,u.createElement(c.Trans,{id:"Please note that your device should be connected on the same network as this computer."}))))):null}}]),n}(u.Component)},1697:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(14),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i="stopped",c=null,u=[],l=[],s={startServer:function(){if(!a)return Promise.reject();if("started"===i)return Promise.resolve();var e=new Promise((function(e,t){var n=!1;i="stopped",c=null,a&&(a.removeAllListeners("debugger-send-message-done"),a.removeAllListeners("debugger-error-received"),a.removeAllListeners("debugger-connection-closed"),a.removeAllListeners("debugger-connection-opened"),a.removeAllListeners("debugger-start-server-done"),a.removeAllListeners("debugger-message-received")),a.on("debugger-error-received",(function(e,r){n||(t(r),n=!0),u.forEach((function(e){return(0,e.onErrorReceived)(r)}))})),a.on("debugger-connection-closed",(function(e,t){var n=t.id,r=l.indexOf(n);-1!==r&&l.splice(r,1),u.forEach((function(e){return(0,e.onConnectionClosed)({id:n,debuggerIds:l})}))})),a.on("debugger-connection-opened",(function(e,t){var n=t.id;l.push(n),u.forEach((function(e){return(0,e.onConnectionOpened)({id:n,debuggerIds:l})}))})),a.on("debugger-start-server-done",(function(t,r){var o=r.address;console.info("Local preview debugger started"),i="started",c=o,n||(e(),n=!0),u.forEach((function(e){return(0,e.onServerStateChanged)()}))})),a.on("debugger-message-received",(function(e,t){var n=t.id,r=t.message;console.info("Processing message received for debugger");try{var o=JSON.parse(r);u.forEach((function(e){return(0,e.onHandleParsedMessage)({id:n,parsedMessage:o})}))}catch(a){console.warn("Error while parsing message received from debugger client:",a)}})),a.send("debugger-start-server")})),t=new Promise((function(e,t){setTimeout((function(){t(new Error("Debugger server not started or errored after 5s - aborting."))}),5e3)}));return Promise.race([e,t])},sendMessage:function(e,t){a&&("stopped"!==i?a.send("debugger-send-message",{id:e,message:JSON.stringify(t)}):console.error("Cannot send message when debugger server is stopped."))},getServerState:function(){return i},getServerAddress:function(){return c},getExistingDebuggerIds:function(){return l},registerCallbacks:function(e){return u.push(e),function(){var t=u.indexOf(e);-1!==t&&u.splice(t,1)}}}},1698:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(89),o=n(13),a=n(1699),i=n(1700),c=n(1701),u=n(1702),l=n(1703),s=n(1705),p=n(1706),d=n(1707),f=n(834),m=n.n(f),h=n(836),v=n.n(h),g=n(835),b=n.n(g),E=n(831),w=n(832),y=n(833),x=function(){return[{name:o.createElement(r.Trans,{id:"Android (& iOS coming soon)"}),renderIcon:function(e){return o.createElement(m.a,e)},helpPage:"/publishing/android_and_ios",description:o.createElement(r.Trans,{id:"Package your game for Android directly from GDevelop. iOS support is coming soon!"}),key:"localonlinecordovaexport",exportPipeline:s.a},{name:o.createElement(r.Trans,{id:"Web (upload online)"}),renderIcon:function(e){return o.createElement(y.a,e)},helpPage:"/publishing/web",description:o.createElement(r.Trans,{id:"Upload your game online directly from GDevelop and share the link to players. Play to your game using your browser on computers and mobile phones."}),key:"localonlinewebexport",exportPipeline:d.a},{name:o.createElement(r.Trans,{id:"Local folder"}),renderIcon:function(e){return o.createElement(b.a,e)},helpPage:"/publishing/html5_game_in_a_local_folder",description:o.createElement(r.Trans,{id:"Build the game locally as a HTML5 game. You can then publish it on website like Kongregate, Game Jolt, itch.io, Poki..."}),key:"localexport",exportPipeline:c.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Facebook Instant Games"}),renderIcon:function(e){return o.createElement(E.a,e)},helpPage:"/publishing/publishing-to-facebook-instant-games",description:o.createElement(r.Trans,{id:"Package your game as a Facebook Instant Games that can be played on Facebook Messenger."}),key:"localfacebookinstantgames",exportPipeline:l.a,advanced:!0},{name:o.createElement(r.Trans,{id:"iOS & Android (manual)"}),renderIcon:function(e){return o.createElement(w.a,e)},helpPage:"/publishing/android_and_ios_with_cordova",description:o.createElement(r.Trans,{id:"Build the game locally as a Cordova project, and export it manually to iOS or Android with Cordova developers tools."}),key:"localcordovaexport",exportPipeline:a.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux"}),renderIcon:function(e){return o.createElement(v.a,e)},helpPage:"/publishing/windows-macos-linux",description:o.createElement(r.Trans,{id:"Package your game as an app for Windows, macOS or Linux directly from GDevelop."}),key:"localonlineelectronexport",exportPipeline:p.a},{name:o.createElement(r.Trans,{id:"Windows/macOS/Linux (manual)"}),renderIcon:function(e){return o.createElement(v.a,e)},helpPage:"/publishing/windows-macos-linux-with-electron",description:o.createElement(r.Trans,{id:"Build the game locally and export it manually to Windows, macOS or Linux with third-party developer tools."}),key:"localelectronexport",exportPipeline:i.a,advanced:!0},{name:o.createElement(r.Trans,{id:"Cocos2d-JS"}),renderIcon:function(e){return o.createElement(m.a,e)},helpPage:"/publishing/android_and_ios_with_cocos2d-js",description:o.createElement(r.Trans,{id:"Export your game using Cocos2d-JS game engine. The game can be compiled for Android or iOS if you install Cocos2d-JS developer tools."}),key:"localcocos2dexport",exportPipeline:u.a,experimental:!0}]}},1699:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(89),o=n(13),a=n.n(o),i=n(101),c=n(91),u=n(185),l=n(200),s=n(299),p=n(139),d=n.n(p),f=n(14),m=n.n(f),h=n(823),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-cordova",packageNameWarningType:"mobile",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,l.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForCordova",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(8))},1700:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(89),o=n(13),a=n.n(o),i=n(101),c=n(91),u=n(185),l=n(200),s=n(299),p=n(139),d=n.n(p),f=n(14),m=n.n(f),h=n(824),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-electron",packageNameWarningType:"desktop",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(c.a,{noMargin:!0},a.a.createElement(h.b,null))),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,l.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return r.set("exportForElectron",!0),n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){g&&g.openItem(t.outputDir)});return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(8))},1701:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return E}));var r=n(89),o=n(13),a=n.n(o),i=n(101),c=n(91),u=n(185),l=n(200),s=n(299),p=n(139),d=n.n(p),f=n(14),m=n.n(f),h=n(825),v=m()("electron"),g=v?v.shell:null,b=e.gd,E={name:"local-html5",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory()}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,r=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(h.b,null)),a.a.createElement(c.b,null,a.a.createElement(s.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){r((function(){return{outputDir:e}})),t.setLastCompilationDirectory(e)},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Export as a HTML5 game"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=d()(new b.AbstractFileSystemJS,l.a);return{exporter:new b.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter,r=new b.MapStringBoolean;return n.exportWholePixiProject(e.project,e.exportState.outputDir,r),r.delete(),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState;e.onClose;return a.a.createElement(h.a,{renderGameButton:function(){return a.a.createElement(i.a,{fullWidth:!0,primary:!0,onClick:function(){g&&g.openItem(t.outputDir)},label:a.a.createElement(r.Trans,{id:"Open the exported game folder"})})}})}}}).call(this,n(8))},1702:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return y}));var r=n(94),o=n(89),a=n(13),i=n.n(a),c=n(101),u=n(91),l=n(185),s=n(200),p=n(299),d=n(139),f=n.n(d),m=n(14),h=n.n(m),v=n(318),g=n(826),b=h()("electron"),E=b?b.shell:null,w=e.gd,y={name:"local-cocos2d",getInitialExportState:function(e){return{outputDir:e.getLastCompilationDirectory(),debugMode:!1}},canLaunchBuild:function(e){return!!e.outputDir},renderHeader:function(e){var t=e.project,n=e.exportState,a=e.updateExportState;return i.a.createElement(u.a,{noMargin:!0},i.a.createElement(u.b,null,i.a.createElement(g.b,null)),i.a.createElement(u.b,null,i.a.createElement(p.a,{type:"export",value:n.outputDir,defaultPath:t.getLastCompilationDirectory(),onChange:function(e){a((function(t){return Object(r.a)(Object(r.a)({},t),{},{outputDir:e})}))},fullWidth:!0})),i.a.createElement(u.b,null,i.a.createElement(v.a,{onToggle:function(e,t){return a((function(e){return Object(r.a)(Object(r.a)({},e),{},{debugMode:t})}))},toggled:n.debugMode,labelPosition:"right",label:i.a.createElement(o.Trans,{id:"Debug mode (show FPS counter and stats in the bottom left)"})})))},renderLaunchButtonLabel:function(){return i.a.createElement(o.Trans,{id:"Package"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=f()(new w.AbstractFileSystemJS,s.a);return{exporter:new w.Exporter(n,t)}}))},launchExport:function(e,t){var n=t.exporter;return n.exportWholeCocos2dProject(e.project,e.exportState.debugMode,e.exportState.outputDir),n.delete(),Promise.resolve(null)},launchResourcesDownload:function(e,t){return Promise.resolve(null)},launchCompression:function(e,t){return Promise.resolve(null)},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){E&&E.openItem(t.outputDir)});return i.a.createElement(g.a,{renderGameButton:function(){return i.a.createElement(c.a,{key:"open",label:i.a.createElement(o.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(8))},1703:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return x}));var r=n(89),o=n(13),a=n.n(o),i=n(101),c=n(91),u=n(185),l=n(200),s=n(139),p=n.n(s),d=n(14),f=n.n(d),m=n(1704),h=n(420),v=n(827),g=f()("path"),b=f()("electron"),E=b?b.remote.app:null,w=b?b.shell:null,y=e.gd,x={name:"local-facebook-instant-games",getInitialExportState:function(e){return{archiveOutputFilename:E?g.join(E.getPath("documents"),"fb-instant-game.zip"):""}},canLaunchBuild:function(e){return!!e.archiveOutputFilename},renderHeader:function(e){e.project;var t=e.exportState,n=e.updateExportState;return a.a.createElement(c.a,{noMargin:!0},a.a.createElement(c.b,null,a.a.createElement(v.b,null)),a.a.createElement(c.b,null,a.a.createElement(m.a,{title:"Facebook Instant Games export zip file",message:"Choose where to save the exported file for Facebook Instant Games",filters:[{name:"Compressed file for Facebook Instant Games",extensions:["zip"]}],value:t.archiveOutputFilename,defaultPath:E?E.getPath("documents"):"",onChange:function(e){return n((function(){return{archiveOutputFilename:e}}))},fullWidth:!0})))},renderLaunchButtonLabel:function(){return a.a.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=p()(new y.AbstractFileSystemJS,l.a),r=new y.Exporter(n,t),o=g.join(n.getTempDir(),"FacebookInstantGamesExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new y.MapStringBoolean;return o.set("exportForFacebookInstantGames",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir;return Object(h.a)({path:n,outputFilename:e.exportState.archiveOutputFilename})},renderDoneFooter:function(e){var t=e.exportState,n=(e.onClose,function(){w&&g&&w.openItem(g.dirname(t.archiveOutputFilename))});return a.a.createElement(v.a,{renderGameButton:function(){return a.a.createElement(i.a,{key:"open",label:a.a.createElement(r.Trans,{id:"Open folder"}),primary:!0,onClick:n})}})}}}).call(this,n(8))},1704:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(94),o=n(3),a=n(4),i=n(6),c=n(5),u=n(89),l=n(13),s=n.n(l),p=n(110),d=n(14),f=n.n(d),m=n(101),h=f()("electron"),v=h?h.remote.dialog:null,g={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},b=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onChooseFolder=function(){if(v&&h){var t=h.remote.getCurrentWindow();return v.showSaveDialog(t,{title:e.props.title,filters:e.props.filters,message:e.props.message,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePath;e.props.onChange(n||"")}))}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:Object(r.a)(Object(r.a)({},g.container),{},{width:this.props.fullWidth?"100%":void 0})},s.a.createElement(p.b,{margin:"dense",style:g.textField,type:"text",hintText:{id:"Choose a file"},value:this.props.value,onChange:function(t,n){return e.props.onChange(n)}}),s.a.createElement(m.a,{label:s.a.createElement(u.Trans,{id:"Choose"}),style:g.button,onClick:this.onChooseFolder}))}}]),n}(l.PureComponent)},1705:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(89),o=n(13),a=n(139),i=n.n(a),c=n(214),u=n(556),l=n(185),s=n(420),p=n(14),d=n.n(p),f=n(200),m=n(828),h=d()("path"),v=d()("os"),g=e.gd,b={name:"local-online-cordova",onlineBuildType:"cordova-build",packageNameWarningType:"mobile",getInitialExportState:function(){return{targets:["androidApk"],keystore:"new",signingDialogOpen:!1}},canLaunchBuild:function(){return!0},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Packaging for Android"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineCordovaExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForCordova",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(s.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.a)(r,o.uid,n,e.targets,e.keystore):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(8))},1706:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(89),o=n(13),a=n(139),i=n.n(a),c=n(214),u=n(185),l=n(556),s=n(420),p=n(14),d=n.n(p),f=n(200),m=n(829),h=d()("path"),v=d()("os"),g=e.gd,b={name:"local-online-electron",onlineBuildType:"electron-build",packageNameWarningType:"desktop",getInitialExportState:function(){return{targets:["winExe"]}},canLaunchBuild:function(e){return!!e.targets.length},renderHeader:function(e){return o.createElement(m.a,e)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Package"})},prepareExporter:function(e){return Object(u.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineElectronExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return o.set("exportForElectron",!0),n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(s.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(l.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.b)(r,o.uid,n,e.targets):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(8))},1707:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b}));var r=n(89),o=n(13),a=n(139),i=n.n(a),c=n(214),u=n(556),l=n(185),s=n(420),p=n(14),d=n.n(p),f=n(200),m=n(830),h=d()("path"),v=d()("os"),g=e.gd,b={name:"local-online-web",onlineBuildType:"web-build",getInitialExportState:function(){return null},canLaunchBuild:function(){return!0},renderHeader:function(){return o.createElement(m.a,null)},renderLaunchButtonLabel:function(){return o.createElement(r.Trans,{id:"Publish online"})},prepareExporter:function(e){return Object(l.findGDJS)().then((function(e){var t=e.gdjsRoot;console.info("GDJS found in ",t);var n=i()(new g.AbstractFileSystemJS,f.a),r=new g.Exporter(n,t),o=h.join(n.getTempDir(),"OnlineWebExport");return n.mkDir(o),n.clearDir(o),{exporter:r,temporaryOutputDir:o}}))},launchExport:function(e,t){var n=t.exporter,r=t.temporaryOutputDir,o=new g.MapStringBoolean;return n.exportWholePixiProject(e.project,r,o),o.delete(),n.delete(),Promise.resolve({temporaryOutputDir:r})},launchResourcesDownload:function(e,t){var n=t.temporaryOutputDir;return Promise.resolve({temporaryOutputDir:n})},launchCompression:function(e,t){var n=t.temporaryOutputDir,r=v.tmpdir();return Object(s.a)({path:n,outputFilename:h.join(r,"game-archive.zip")})},launchUpload:function(e,t){return Object(c.f)().then((function(n){return Object(u.a)(t,n,e.updateStepProgress).then((function(){return n.key}))}))},launchOnlineBuild:function(e,t,n){var r=t.getAuthorizationHeader,o=t.profile;return o?Object(c.c)(r,o.uid,n):Promise.reject(new Error("User is not authenticated"))}}}).call(this,n(8))},1708:function(e,t,n){"use strict";var r=n(13),o=n(14),a=n.n(o),i=n(210),c=n(265),u=n(40),l=a()("electron"),s=l?l.ipcRenderer:null,p=function(e,t){r.useEffect((function(){if(s){var n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,r)};return s.on(e,n),function(){return s.removeListener(e,n)}}}),[e,t])};t.a=function(e){var t=e.i18n,n=e.project,o=e.recentProjectFiles,a=e.onOpenRecentFile,l=Object(c.e)(),d=t.language;return p("main-menu-open",e.onChooseProject),p("main-menu-open-recent",e.onOpenRecentFile),p("main-menu-save",e.onSaveProject),p("main-menu-save-as",e.onSaveProjectAs),p("main-menu-close",e.onCloseProject),p("main-menu-close-app",e.onCloseApp),p("main-menu-export",e.onExportProject),p("main-menu-create",e.onCreateProject),p("main-menu-open-project-manager",e.onOpenProjectManager),p("main-menu-open-start-page",e.onOpenStartPage),p("main-menu-open-debugger",e.onOpenDebugger),p("main-menu-open-about",e.onOpenAbout),p("main-menu-open-preferences",e.onOpenPreferences),p("main-menu-open-language",e.onOpenLanguage),p("main-menu-open-profile",e.onOpenProfile),p("main-menu-open-games-dashboard",e.onOpenGamesDashboard),p("update-status",e.setUpdateStatus),r.useEffect((function(){!function(e,t,n,r){var o={label:t._({id:"File"}),submenu:[{label:t._({id:"Create a New Project..."}),accelerator:Object(c.a)(r.CREATE_NEW_PROJECT),onClickSendEvent:"main-menu-create"},{type:"separator"},{label:t._({id:"Open..."}),accelerator:Object(c.a)(r.OPEN_PROJECT),onClickSendEvent:"main-menu-open"},{label:t._({id:"Open Recent"}),submenu:n.map((function(e){return{label:e.fileMetadata.fileIdentifier,onClickSendEvent:"main-menu-open-recent",eventArgs:e}}))},{type:"separator"},{label:t._({id:"Save"}),accelerator:Object(c.a)(r.SAVE_PROJECT),onClickSendEvent:"main-menu-save",enabled:!!e},{label:t._({id:"Save as..."}),accelerator:Object(c.a)(r.SAVE_PROJECT_AS),onClickSendEvent:"main-menu-save-as",enabled:!!e},{type:"separator"},{label:t._({id:"Export (web, iOS, Android)..."}),accelerator:Object(c.a)(r.EXPORT_GAME),onClickSendEvent:"main-menu-export",enabled:!!e},{type:"separator"},{label:t._({id:"Close Project"}),accelerator:Object(c.a)(r.CLOSE_PROJECT),onClickSendEvent:"main-menu-close",enabled:!!e}]};Object(u.e)()||o.submenu.push({type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{label:t._({id:"Exit GDevelop"}),accelerator:Object(c.a)(r.QUIT_APP),onClickSendEvent:"main-menu-close-app"});var a={label:t._({id:"Edit"}),submenu:[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteandmatchstyle"},{role:"delete"},{role:"selectall"}]},i={label:t._({id:"View"}),submenu:[{label:t._({id:"Show Project Manager"}),accelerator:Object(c.a)(r.OPEN_PROJECT_MANAGER),onClickSendEvent:"main-menu-open-project-manager",enabled:!!e},{label:t._({id:"Show Start Page"}),onClickSendEvent:"main-menu-open-start-page"},{label:t._({id:"Open Debugger"}),onClickSendEvent:"main-menu-open-debugger",enabled:!!e},{type:"separator"},{role:"toggledevtools"},{type:"separator"},{role:"togglefullscreen"}]},l={label:t._({id:"Window"}),role:"window",submenu:[{label:t._({id:"Minimize"}),role:"minimize"}]},p={label:t._({id:"Help"}),role:"help",submenu:[{label:t._({id:"GDevelop website"}),onClickOpenLink:"http://gdevelop-app.com"},{type:"separator"},{label:t._({id:"Community Forums"}),onClickOpenLink:"https://forum.gdevelop-app.com"},{label:t._({id:"Community Discord Chat"}),onClickOpenLink:"https://discord.gg/gdevelop"},{type:"separator"},{label:t._({id:"Contribute to GDevelop"}),onClickOpenLink:"https://gdevelop-app.com/contribute/"},{label:t._({id:"Create Extensions for GDevelop"}),onClickOpenLink:"https://github.com/4ian/GDevelop/blob/master/newIDE/README-extensions.md"},{type:"separator"},{label:t._({id:"Help to Translate GDevelop"}),onClickOpenLink:"https://crowdin.com/project/gdevelop"},{label:t._({id:"Report a wrong translation"}),onClickOpenLink:"https://github.com/4ian/GDevelop/issues/969"}]};Object(u.e)()||p.submenu.push({type:"separator"},{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"});var d=[o,a,i,l,p];Object(u.e)()&&(d.unshift({label:t._({id:"GDevelop 5"}),submenu:[{label:t._({id:"About GDevelop"}),onClickSendEvent:"main-menu-open-about"},{type:"separator"},{label:t._({id:"My Profile"}),onClickSendEvent:"main-menu-open-profile"},{label:t._({id:"Games Dashboard"}),onClickSendEvent:"main-menu-open-games-dashboard"},{label:t._({id:"Preferences"}),onClickSendEvent:"main-menu-open-preferences"},{label:t._({id:"Language"}),onClickSendEvent:"main-menu-open-language"},{type:"separator"},{role:"services",submenu:[]},{type:"separator"},{role:"hide"},{role:"hideothers"},{role:"unhide"},{type:"separator"},{role:"quit"}]}),a.submenu.push({type:"separator"},{label:t._({id:"Speech"}),submenu:[{role:"startspeaking"},{role:"stopspeaking"}]}),l.submenu=[{role:"minimize"},{role:"zoom"},{type:"separator"},{role:"front"}]),s&&s.send("set-main-menu",d)}(n,t,o,l)}),[t,d,n,o,l]),Object(i.b)("OPEN_RECENT_PROJECT",!0,{generateOptions:r.useCallback((function(){return o.map((function(e){return{text:e.fileMetadata.fileIdentifier,handler:function(){return a(e)}}}))}),[a,o])}),null}},1709:function(e,t,n){var r=n(837).loadExtension,o=n(14),a=n(1710).findJsExtensionModules;e.exports=function(e){var t=e.gd,n=e.objectsEditorService,i=e.objectsRenderingService,c=e.filterExamples,u=e.onFindGDJS;return{loadAllExtensions:function(e){return a({filterExamples:c,onFindGDJS:u}).then((function(a){return Promise.all(a.map((function(a){var c=null;try{c=o(a,{rethrowException:!0})}catch(u){return{extensionModulePath:a,result:{message:"Unable to import extension. Please check for any syntax error or error that would prevent it from being run.",error:!0,rawError:u}}}return c?(n&&c.registerEditorConfigurations&&c.registerEditorConfigurations(n),i&&c.registerInstanceRenderers&&c.registerInstanceRenderers(i),{extensionModulePath:a,result:r(e,t,t.JsPlatform.get(),c)}):{extensionModulePath:a,result:{error:!0,message:"Unknown error. Please check for any syntax error or error that would prevent it from being run."}}})))}),(function(e){throw console.error("Unable to find JS extensions modules"),e}))}}}},1710:function(e,t,n){var r=n(185).findGDJS,o=n(14),a=o("path"),i=o("fs");e.exports={findJsExtensionModules:function(e){var t=e.filterExamples,n=e.onFindGDJS;return(n?n():r()).then((function(e){var n=e.gdjsRoot,r=a.join(n,"Runtime","Extensions");return console.info("Searching for JS extensions (file called JsExtension.js) in ".concat(r,"...")),new Promise((function(e,n){i.readdir(r,(function(o,c){if(o)return n(o);var u=c.filter((function(e){return!t||-1===e.indexOf("Example")}));Promise.all(u.map((function(e){return t=a.join(r,e),new Promise((function(e){var n=a.join(t,"JsExtension.js");i.stat(n,(function(t,r){return e(t?null:r.isFile()?n:null)}))}));var t}))).then((function(t){e(t.filter((function(e){return!!e})))}),n)}))}))}))}}},1711:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(14),o=n.n(r),a=n(822),i=n(393),c=n.n(i),u=o()("path"),l=o()("os"),s=o()("fs"),p=function(e){var t=e.onWriteFile,n=u.join(l.tmpdir(),"GDGeneratedEventsFunctions-"+Object(a.a)());s.mkdir(n,(function(e){e&&"EEXIST"!==e.code&&console.error("Unable to create the directory where to output events functions generated code: ",e)}));var r=function(e){return"".concat(n,"/").concat(c()(e),".js")};return{getIncludeFileFor:function(e){return r(e)},writeFunctionCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),s.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))},writeBehaviorCode:function(e,n){return new Promise((function(o,a){var i=r(e);t({includeFile:i,content:n}),s.writeFile(i,n,(function(e){if(e)return a(e);o()}))}))}}}},1723:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(3),o=n(144),a=n(14),i=n.n(a),c=i()("fs-extra"),u=i()("path"),l=i()("electron"),s=l?l.remote.dialog:null,p=function e(){Object(r.a)(this,e)};p.chooseEventsFunctionExtensionFile=function(){if(!s)return Promise.reject("Not supported");var e=l.remote.getCurrentWindow();return s.showSaveDialog(e,{title:"Export an extension of the project",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}],defaultPath:"Extension.json"}).then((function(e){var t=e.filePath;return t||null}))},p.writeEventsFunctionsExtension=function(e,t){return function(e,t){if(!c)return Promise.reject(new Error("Filesystem is not supported."));try{var n=JSON.stringify(e,null,2);return c.ensureDir(u.dirname(t)).then((function(){return new Promise((function(e,r){c.writeFile(t,n,(function(t){return t?r(t):e()}))}))}))}catch(r){return Promise.reject(r)}}(Object(o.b)(e),t).catch((function(e){throw console.error("Unable to write the events function extension:",e),e}))}},1724:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(3),o=n(14),a=n.n(o),i=a()("fs"),c=a()("electron"),u=c?c.remote.dialog:null,l=function e(){Object(r.a)(this,e)};l.chooseEventsFunctionExtensionFile=function(){if(!u)return Promise.reject("Not supported");var e=c.remote.getCurrentWindow();return u.showOpenDialog(e,{title:"Import an extension in the project",properties:["openFile"],message:"Choose an extension file to import (.json file)",filters:[{name:'GDevelop 5 "events based" extension',extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?t[0]:null}))},l.readEventsFunctionExtensionFile=function(e){return function(e){return i?new Promise((function(t,n){i.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")}(e)}},1725:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(13),o=n(14),a=n.n(o),i=n(122),c=n(250),u=n.n(c),l=a()("electron"),s=a()("child_process"),p=a()("process"),d=a()("path"),f=a()("chokidar"),m=function(){if(!l)return"";var e=p.cwd();return d.join(e,"../app")},h=function(){return s&&d?new Promise((function(e,t){var n=performance.now();s.exec('node "'.concat(d.join(m(),"scripts/import-GDJS-Runtime.js"),'" --skip-clean --skip-sources'),(function(r,o,a){if(r)return console.error("GDJS Runtime update error:\n".concat(r)),void t(r);var i=(performance.now()-n).toFixed(0);if(console.info("GDJS Runtime updated in ".concat(i,"ms:\n").concat(o)),a)return console.error("GDJS Runtime update error:\n".concat(a)),void t(new Error("Error while updating GDJS Runtime"));e()}))})):Promise.reject(new Error("Unsupported"))},v=u()((function(e,t){var n=e||"unknown-event",r=t||"unknown-file";console.info('GDJS/extensions watchers found a "'.concat(n,'" in ').concat(r,", updating GDJS Runtime...")),h().catch((function(){}))}),100),g=function(){var e=r.useContext(i.b).values.useGDJSDevelopmentWatcher;return r.useEffect((function(){if(e){var t=performance.now();if(f){var n=["../../GDJS/Runtime/**/*","../../Extensions/**/*.ts","../../Extensions/**/*.js"].map((function(e){return d.join(m(),e)}));h().catch((function(){}));var r=f.watch(n,{awaitWriteFinish:!0,ignoreInitial:!0}).on("all",v).on("error",(function(e){return console.error("Error in watcher for GDJS Runtime - manually call npm run `node import-GDJS-Runtime.js` in the newIDE/app/scripts folder if you make changes to GDJS. Error:",e)})).on("ready",(function(){var e=(performance.now()-t).toFixed(2);console.info("Watchers for GDJS Runtime/extensions installed in ".concat(e,"ms."))}));return function(){return r.close()}}console.error("Unable to use 'chokidar' from Node.js to watch changes in GDJS.")}}),[e]),null}},1726:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(0),o=n.n(r),a=n(1),i=n(14),c=n.n(i),u=n(137),l=n(1727),s=n.n(l),p=c()("electron"),d=p?p.ipcRenderer:null,f=c()("fs-extra"),m=c()("path"),h=function(e){var t=e.getResourcesManager();return t.getAllResourceNames().toJSArray().filter((function(e){var n,r=t.getResource(e);return(n=r.getFile()).startsWith("http://")||n.startsWith("https://")||n.startsWith("ftp://")}))},v=function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,i,c,l,p,v,g,b,E,w;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.project,r=t.resourceNames,i=t.onProgress,f&&d){e.next=3;break}throw new Error("Unsupported");case 3:return c=n.getResourcesManager(),l=m.dirname(n.getProjectFile()),p=m.join(l,"assets"),v=new Set,g=[],b=[],E=0,w=h(n),e.abrupt("return",s.a.withConcurrency(3).for(r).process(function(){var e=Object(a.a)(o.a.mark((function e(t){var n,r,a,s,h,y;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.getResource(t),r=n.getFile(),a=m.extname(r),s=m.basename(r,a),h=Object(u.a)(s,(function(e){var t=m.join(p,e)+a;return f.existsSync(t)||v.has(t)})),y=m.join(p,h)+a,v.add(y),e.prev=7,e.next=10,f.ensureDir(p);case 10:return e.next=12,d.invoke("local-file-download",r,y);case 12:n.setFile(m.relative(l,y).replace(/\\/g,"/")),b.push({resourceName:t}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),g.push({resourceName:t,error:e.t0});case 19:i(E++,w.length);case 20:case"end":return e.stop()}}),e,null,[[7,16]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return{fetchedResources:b,erroredResources:g}})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={getResourcesToFetch:h,fetchResources:v}},200:function(e,t,n){"use strict";(function(e){var r=n(14),o=n.n(r),a=n(822),i=o()("fs-extra"),c=o()("path"),u=o()("os"),l=e.gd;t.a={mkDir:function(e){try{i.mkdirsSync(e)}catch(t){return console.error("mkDir("+e+") failed: "+t),!1}return!0},dirExists:function(e){return i.existsSync(e)},clearDir:function(e){try{i.emptyDirSync(e)}catch(t){console.error("clearDir("+e+") failed: "+t)}},getTempDir:function(){return c.join(u.tmpdir(),"GDTMP-".concat(Object(a.a)()))},fileNameFrom:function(e){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.basename(e))},dirNameFrom:function(e){return this._isExternalUrl(e)?"":(e=this._translateUrl(e),c.dirname(e).replace(/\\/g,"/"))},makeAbsolute:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),this.isAbsolute(t)||(t=c.resolve(t)),c.resolve(t,c.normalize(e)).replace(/\\/g,"/"))},makeRelative:function(e,t){return this._isExternalUrl(e)?e:(e=this._translateUrl(e),c.relative(t,c.normalize(e)).replace(/\\/g,"/"))},isAbsolute:function(e){return!!this._isExternalUrl(e)||(0===e.length||((e=this._translateUrl(e)).length>0&&"/"===e.charAt(0)||e.length>1&&":"===e.charAt(1)))},copyFile:function(e,t){if(this._isExternalUrl(e))return!0;e=this._translateUrl(e);try{e!==t&&i.copySync(e,t)}catch(n){return console.error("copyFile("+e+", "+t+") failed: "+n),!1}return!0},writeToFile:function(e,t){try{i.outputFileSync(e,t)}catch(n){return console.error("writeToFile("+e+", ...) failed: "+n),!1}return!0},readFile:function(e){try{return i.readFileSync(e).toString()}catch(t){return console.error("readFile("+e+") failed: "+t),""}},readDir:function(e,t){t=t.toUpperCase();var n=new l.VectorString;try{i.existsSync(e)&&i.readdirSync(e).forEach((function(r){0!==t.length&&-1===r.toUpperCase().indexOf(t,r.length-t.length)||n.push_back(e+"/"+r)}))}catch(r){console.error("readDir("+e+","+t+") failed: "+r)}return n},fileExists:function(e){e=this._translateUrl(e);try{return i.statSync(e).isFile()}catch(t){return!1}},_isExternalUrl:function(e){return e.startsWith("http://")||e.startsWith("https://")||e.startsWith("ftp://")},_translateUrl:function(e){return"g/"!==e.substr(0,2)&&"g\\"!==e.substr(0,2)||(e=e.substr(2)),e}}}).call(this,n(8))},299:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(94),o=n(3),a=n(4),i=n(6),c=n(5),u=n(89),l=n(13),s=n.n(l),p=n(110),d=n(101),f=n(14),m=n.n(f)()("electron"),h=m?m.remote.dialog:null,v={container:{position:"relative",display:"flex",alignItems:"baseline"},button:{marginLeft:10},textField:{flex:1}},g=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._onChooseFolder=function(t){var n=t.title,r=t.message;if(h&&m){var o=m.remote.getCurrentWindow();h.showOpenDialog(o,{title:n,properties:["openDirectory","createDirectory"],message:r,defaultPath:e.props.defaultPath}).then((function(t){var n=t.filePaths;n&&n.length&&e.props.onChange(n[0])}))}},e._getTitleAndMessage=function(t){var n=e.props.type;return"export"===n?{title:t._({id:"Choose an export folder"}),message:t._({id:"Choose where to export the game"})}:"create-game"===n?{title:t._({id:"Choose a folder for the new game"}),message:t._({id:"Choose where to create the game"})}:{title:void 0,message:void 0}},e}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return s.a.createElement(u.I18n,null,(function(t){var n=t.i18n,o=e._getTitleAndMessage(n);return s.a.createElement("div",{style:Object(r.a)(Object(r.a)({},v.container),{},{width:e.props.fullWidth?"100%":void 0})},s.a.createElement(p.b,{margin:"dense",style:v.textField,type:"text",hintText:o.title,value:e.props.value,onChange:function(t,n){return e.props.onChange(n)}}),s.a.createElement(d.a,{label:s.a.createElement(u.Trans,{id:"Choose folder"}),primary:!1,style:v.button,onClick:function(){return e._onChooseFolder(o)}}))}))}}]),n}(l.PureComponent)},420:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(14),o=n.n(r),a=n(500),i=o()("fs"),c=Object(a.a)("archiver"),u=function(e){var t=e.path,n=e.outputFilename,r=c();return new Promise((function(e,o){if(!i||!r)return o(new Error("Archiver unavailable"));var a=i.createWriteStream(n),c=r("zip",{zlib:{level:9}});a.on("close",(function(){console.log("Archive written at ".concat(n,", ").concat(c.pointer()," total bytes.")),e(n)})),c.on("error",(function(e){o(e)})),c.pipe(a),c.directory(t,!1),c.finalize()}))}},556:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(14),o=n.n(r)()("electron"),a=o?o.ipcRenderer:null,i=function(e,t,n){return a?(a.removeAllListeners("local-file-upload-progress"),a.removeAllListeners("local-file-upload-done"),new Promise((function(r,o){a.on("local-file-upload-progress",(function(e,t,r){n(t,r)})),a.on("local-file-upload-done",(function(e,t){if(t)return o(t);r()})),a.send("local-file-upload",e,t)}))):Promise.reject("No support for local file upload")}},562:function(e,t,n){"use strict";var r=n(94),o=n(14),a=n.n(o),i=n(820),c=a()("fs"),u=a()("path"),l=a()("electron"),s=l?l.remote.dialog:null,p=function(e){return c?new Promise((function(t,n){c.readFile(e,{encoding:"utf8"},(function(r,o){if(r)return n(r);try{var a=JSON.parse(o);return t(a)}catch(i){return n(e+" is a corrupted/malformed file.")}}))})):Promise.reject("Filesystem is not supported.")},d=function(){if(!s)return Promise.reject("Not supported");var e=l.remote.getCurrentWindow();return s.showOpenDialog(e,{title:"Open a project",properties:["openFile"],message:"If you want to open your GDevelop 4 project, be sure to save it as a .json file",filters:[{name:"GDevelop 5 project",extensions:["json"]}]}).then((function(e){var t=e.filePaths;return t&&t.length?{fileIdentifier:t[0]}:null}))},f=function(e){var t=e.fileIdentifier,n=u.dirname(t);return p(t).then((function(e){return Object(i.d)(e,{getReferencePartialObject:function(e){return p(u.join(n,e)+".json")},isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT",maxUnsplitDepth:3}).then((function(){return{content:e}}))}))},m=function(e,t){var n=e.fileIdentifier,r=n+".autosave";if(c.existsSync(r)){if(!t)return Promise.resolve(!0);try{if(c.statSync(r).mtime.getTime()>c.statSync(n).mtime.getTime())return Promise.resolve(!0)}catch(o){return console.error("Unable to compare *.autosave to project",o),Promise.resolve(!1)}return Promise.resolve(!1)}return Promise.resolve(!1)},h=function(e){return Promise.resolve(Object(r.a)(Object(r.a)({},e),{},{fileIdentifier:e.fileIdentifier+".autosave"}))},v=n(821),g=n(15);t.a={internalName:"LocalFile",name:{id:"Local file system"},getFileMetadataFromAppArguments:function(e){return e[g.a]&&e[g.a].length?{fileIdentifier:e[g.a][0]}:null},createOperations:function(){return{onOpenWithPicker:d,onOpen:f,hasAutoSave:m,onSaveProject:v.b,onSaveProjectAs:v.c,onAutoSaveProject:v.a,onGetAutoSave:h,getOpenErrorMessage:function(e){return{id:"Check that the file exists, that this file is a proper game created with GDevelop and that you have the authorizations to open it."}}}}}},818:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return O}));var r=n(0),o=n.n(r),a=n(1),i=n(23),c=n(89),u=n(13),l=n(857),s=n(193),p=n(2012),d=n(299),f=n(24),m=n(91),h=n(14),v=n.n(h),g=n(37),b=n(562),E=n(821),w=n(165),y=n.n(w),x=v()("path"),j=v()("fs-extra"),P=function(e,t,n){Object(g.a)({message:e._({id:"Unable to create the game in the specified folder. Check that you have permissions to write in this folder: {outputPath} or choose another folder.",values:{outputPath:t}}),rawError:n,errorId:"local-example-creation-error"})};function O(e){var t=e.outputPath,n=e.onChangeOutputPath,r=e.onOpen,h=u.useState(!1),v=Object(i.a)(h,2),w=v[0],P=v[1];return u.createElement(c.I18n,null,(function(e){var i=e.i18n;return u.createElement(m.a,{noMargin:!0,expand:!0,useFullHeight:!0},u.createElement(m.b,null,u.createElement(m.a,{expand:!0},u.createElement(d.a,{fullWidth:!0,value:t,onChange:n,type:"create-game"}))),u.createElement(p.a,null),u.createElement(l.a,{isOpening:w,onOpen:function(){var e=Object(a.a)(o.a.mark((function e(n){var a,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,P(!0),e.next=6,Object(s.b)(n);case 6:return a=e.sent,j.mkdirsSync(t),e.next=10,y.a.get(a.projectFileUrl,{responseType:"text",transformResponse:[function(e){return e}]});case 10:return c=e.sent,u=c.data,l=x.join(t,"game.json"),e.next=15,Object(E.d)(u,l);case 15:r(b.a,{fileIdentifier:l}),Object(f.j)(a.projectFileUrl),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),Object(g.a)({message:i._({id:"Unable to load the example or save it on disk."})+" "+i._({id:"Verify your internet connection or try again later."}),rawError:e.t0,errorId:"local-example-load-error"});case 22:return e.prev=22,P(!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[2,19,22,25]])})));return function(t){return e.apply(this,arguments)}}()}))}))}},820:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var r=n(137),o=n(393),a=n.n(o),i=function(e,t){var n=t.pathSeparator,r=t.getArrayItemReferenceName,o=t.shouldSplit,a=t.isReferenceMagicPropertyName,i=[],c=function(e,t){return i.push({reference:e,object:t}),{[a]:!0,referenceTo:e}};return function e(t,a,i){if(null!==t&&"object"===typeof t)if(Array.isArray(t))for(var u in t){var l=a+n+"*";if(o(l)){var s=t[u],p=r(s,i),d=i+n+p;t[u]=c(d,s),e(s,l,d)}else{var f=i+n+u;e(t[u],l,f)}}else for(var m in t){var h=a+n+m,v=i+n+m;if(o(h)){var g=t[m];t[m]=c(v,g),e(g,h,v)}else e(t[m],h,v)}}(e,"",""),i},c=function(e,t){var n=t.isReferenceMagicPropertyName,r=t.getReferencePartialObject,o=t.maxUnsplitDepth;return function e(t,a){if(void 0!==o&&a>=o)return Promise.resolve();if(null!==t&&"object"===typeof t){var i=Object.keys(t);if(i)return Promise.all(i.map((function(o){var i=function(e){return!0===e[n]?e:null}(t[o]);return i?r(i.referenceTo).then((function(n){return t[o]=n,e(t[o],a+1)})):e(t[o],a+1)}))).then((function(){}))}return Promise.resolve()}(e,0)},u=function(e){return function(t){return e.has(t)}},l=function(e){var t={};return function(n,o){var i=n[e];if("string"!==typeof i)throw new Error("Property ".concat(e," is not a string"));t[o]=t[o]||{};var c=Object(r.a)(a()(i),(function(e){return!!t[o][e]}));return t[o][c]=!0,c}}},821:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return w})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return P})),n.d(t,"a",(function(){return O}));var r=n(94),o=n(0),a=n.n(o),i=n(1),c=n(144),u=n(14),l=n.n(u),s=n(820),p=n(200),d=n(139),f=n.n(d),m=e.gd,h=l()("fs-extra"),v=l()("path"),g=l()("electron"),b=g?g.remote.dialog:null,E=function(e,t){var n=performance.now();return new Promise((function(r,o){h.readFile(e,{encoding:"utf8"},(function(a,i){if(a)return o(a);""===i&&o(new Error("Written file is empty, did the write fail?")),i!==t&&o(new Error("Written file is not containing the expected content, did the write fail?"));var c=performance.now()-n;console.info("Verified ".concat(e," content in ").concat(c.toFixed(),"ms.")),r()}))}))},w=function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}throw new Error("Filesystem is not supported.");case 2:if(""!==t){e.next=4;break}throw new Error("The content to save on disk is empty. Aborting.");case 4:return e.next=6,h.ensureDir(v.dirname(n));case 6:return e.next=8,h.writeFile(n,t);case 8:return e.next=10,E(n,t);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.stringify(t,null,2),e.next=3,w(r,n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e,t,n){var r=Object(c.b)(e);if(e.isFolderProject()){var o=Object(s.b)(r,{pathSeparator:"/",getArrayItemReferenceName:Object(s.a)("name"),shouldSplit:Object(s.c)(new Set(["/layouts/*","/externalLayouts/*","/externalEvents/*","/layouts/*","/eventsFunctionsExtensions/*"])),isReferenceMagicPropertyName:"__REFERENCE_TO_SPLIT_OBJECT"});return Promise.all(o.map((function(e){return y(e.object,v.join(n,e.reference)+".json").catch((function(e){throw console.error("Unable to write a partial file:",e),e}))}))).then((function(){return y(r,t).catch((function(e){throw console.error("Unable to write the split project:",e),e}))}))}return y(r,t).catch((function(e){throw console.error("Unable to write the project:",e),e}))},j=function(e,t){var n=t.fileIdentifier;if(!n)return Promise.reject('Project file is empty, "Save as" should have been called?');var r=v.dirname(n);return x(e,n,r).then((function(){return{wasSaved:!0,fileMetadata:t}}))},P=function(e,t){var n=t?t.fileIdentifier:"",o=f()(new m.AbstractFileSystemJS,p.a),a=g.remote.getCurrentWindow(),i={defaultPath:n,filters:[{name:"GDevelop 5 project",extensions:["json"]}]};if(!b)return Promise.reject("Unsupported");var c=b.showSaveDialogSync(a,i);if(!c)return Promise.resolve({wasSaved:!1,fileMetadata:t});var u=v.dirname(c);return m.ProjectResourcesCopier.copyAllResourcesTo(e,o,u,!0,!1,!0),e.setProjectFile(c),x(e,c,u).then((function(){return{wasSaved:!0,fileMetadata:Object(r.a)(Object(r.a)({},t),{},{fileIdentifier:c})}}))},O=function(e,t){var n=t.fileIdentifier+".autosave";return w(Object(c.a)(e),n).catch((function(e){throw console.error("Unable to write ".concat(n,":"),e),e}))}}).call(this,n(8))},822:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),o=n.n(r)()("os"),a=function(){try{return o.userInfo().uid}catch(e){return""}}},87:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"create",(function(){return D}));var r=n(13),o=n.n(r),a=n(573),i=n(15),c=n(852),u=n(851),l=(n(29),n(57),n(818)),s=n(1687),p=n(1690),d=n(1691),f=n(1695),m=n(1698),h=n(1708),v=n(1709),g=n.n(v),b=n(1711),E=n(414),w=n(196),y=n(854),x=n(1723),j=n(1724),P=n(840),O=n(562),S=n(1725),k=n(1726),C=e.gd,D=function(e){i.b.setUpContextMenu();var t=i.b.getArguments(),n=i.b.isDev();return o.a.createElement(y.a,{authentification:e,disableCheckForUpdates:!!t["disable-update-check"],makeEventsFunctionCodeWriter:b.a,eventsFunctionsExtensionWriter:x.a,eventsFunctionsExtensionOpener:j.a,resourceFetcher:k.a},(function(e){var r=e.i18n;return o.a.createElement(P.a,{appArguments:t,storageProviders:[O.a],defaultStorageProvider:O.a},(function(e){var t=e.getStorageProviderOperations,i=e.storageProviders,v=e.initialFileMetadataToOpen,b=e.getStorageProvider;return o.a.createElement(a.a,{i18n:r,renderMainMenu:function(e){return o.a.createElement(h.a,e)},renderPreviewLauncher:function(e,t){return o.a.createElement(f.a,Object.assign({},e,{ref:t}))},renderExportDialog:function(e){return o.a.createElement(c.a,Object.assign({},e,{exporters:Object(m.a)()}))},renderCreateDialog:function(e){return o.a.createElement(u.a,Object.assign({},e,{examplesComponent:l.a,startersComponent:s.a}))},renderGDJSDevelopmentWatcher:n?function(){return o.a.createElement(S.a,null)}:null,storageProviders:i,getStorageProviderOperations:t,getStorageProvider:b,resourceSources:p.a,resourceExternalEditors:d.a,extensionsLoader:g()({gd:C,objectsEditorService:E.a,objectsRenderingService:w.a,filterExamples:!n}),initialFileMetadataToOpen:v})}))}))}}.call(this,n(8))}}]);
//# sourceMappingURL=local-app.91d2e5e8.chunk.js.map