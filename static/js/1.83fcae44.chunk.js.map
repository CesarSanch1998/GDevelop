{"version":3,"sources":["UI/Grid.js","UI/Text.js","UI/FlatButton.js","UI/RaisedButton.js","UI/Dialog/index.js","UI/Layout.js","Utils/MapFor.js","UI/EmptyMessage.js","UI/TextField.js","UI/IconButton.js","UI/AcceleratorString.js","UI/SemiControlledTextField.js","UI/HelpButton/index.js","ResourcesLoader/index.js","UI/Theme/ThemeConsumer.js","MainFrame/Preferences/PreferencesContext.js","UI/List.js","Utils/UseForceUpdate.js","UI/ScrollView.js","UI/Background.js","UI/SelectField.js","UI/SelectOption.js","UI/AlertMessage.js","UI/PlaceholderLoader.js","Utils/UseOnResize.js","UI/Reponsive/ResponsiveWindowMeasurer.js","Utils/NewNameGenerator.js","UI/KeyboardShortcuts/InteractionKeys.js","EventsSheet/EventsTree/ClassNames.js","UI/Checkbox.js","Utils/Serializer.js","UI/Tabs.js","UI/Menu/ElementWithMenu.js","UI/SearchBar.js","UI/Subheader.js","Utils/ColorTransformer.js","UI/BackgroundText.js","UI/MarkdownText.js","UI/ListIcon.js","Profile/AuthenticatedUserContext.js","EventsSheet/ParameterFields/GenericExpressionField/index.js","UI/Theme/ThemeContext.js","UI/DismissableAlertMessage.js","UI/CorsAwareImage.js","EventsSheet/ParameterFields/ParameterMetadataTools.js","UI/MiniToolbar.js","ObjectsList/EnumerateObjects.js","ObjectsRendering/ObjectsRenderingService.js","GameEngineFinder/LocalGDJSFinder.js","ResourcesList/ResourceUtils.js","UI/PlaceholderError.js","UI/Table.js","UI/Search/FiltersChooser.js","UI/LeftLoader.js","Utils/GDevelopServices/Badge.js","CommandPalette/CommandHooks.js","ObjectsRendering/Renderers/RenderedInstance.js","Utils/GetObjectByName.js","Utils/GDevelopServices/Build.js","UI/Reponsive/ScreenTypeMeasurer.js","UI/SemiControlledAutoComplete.js","UI/ColorField/index.js","UI/RaisedButtonWithMenu.js","ResourcesList/ResourceSelector.js","Utils/HelpLink.js","Utils/Clipboard.js","PropertiesEditor/index.js","Utils/GDevelopServices/Asset.js","Utils/EventsRootVariablesFinder.js","InstructionOrExpression/EnumerateInstructions.js","ObjectEditor/Editors/SpriteEditor/Utils/SpriteObjectHelper.js","EventsFunctionsExtensionsLoader/index.js","InstancesEditor/ViewPosition.js","UI/OpenedDialogChecker.js","KeyboardShortcuts/ReservedShortcuts.js","KeyboardShortcuts/IsUserTyping.js","KeyboardShortcuts/index.js","UI/ToolbarIcon.js","VariablesList/VariablesEditorDialog.js","UI/InlineCheckbox.js","PropertiesEditor/PropertiesMapToSchema.js","ResourcesList/CheckeredBackground.js","UI/PlaceholderMessage.js","EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext.js","UI/Messages/InfoBar.js","Utils/GDevelopServices/Example.js","EventsSheet/EventsTree/InstructionsList.js","Utils/TagsHelper.js","EventsSheet/InstructionEditor/SelectorListItems/Keys.js","EventsSheet/InlinePopover.js","UI/EditorMosaic/index.js","Utils/Rectangle.js","UI/Toolbar.js","UI/Theme/CreateTheme.js","UI/ToolbarSeparator.js","CommandPalette/CommandsList.js","Utils/UseLongTouch.js","Utils/SerializableObjectCancelableEditor.js","HotReload/HotReloadPreviewButton.js","UI/ColorField/ColorPicker.js","Utils/GDevelopServices/Game.js","ProjectManager/EnumerateProjectItems.js","Utils/GDevelopServices/Extension.js","UI/Search/UseSearchItem.js","UI/IconContainer.js","InstructionOrExpression/CreateTree.js","InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js","EventsSheet/EventsTree/ConditionsActionsColumns.js","Utils/GDevelopServices/Tutorial.js","ResourcesList/ResourcePreview/ImagePreview.js","UI/Menu/ElectronMenuImplementation.js","UI/Menu/MaterialUIMenuImplementation.js","UI/Menu/ContextMenu.js","ResourcesList/ResourceThumbnail/index.js","ResourcesList/ResourceSelectorWithThumbnail.js","MainFrame/UnsavedChangesContext.js","UI/DragHandle.js","UI/EmptyPlaceholder.js","UI/Search/ListSearchResults.js","UI/UserPublicProfileChip.js","CommandPalette/CommandsContext.js","EventsSheet/SelectionHandler.js","EventsSheet/InstructionEditor/InstructionOrExpressionSelector/index.js","Hints/index.js","Hints/DismissableTutorialMessage.js","EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers.js","Utils/BlueprintJsPlaceholder/index.js","InstancesEditor/InstancesSelection.js","UI/RaisedButtonWithSplitMenu.js","ObjectEditor/ObjectsEditorService.js","Utils/GDevelopServices/Usage.js","UI/SortableVirtualizedItemList/ItemRow.js","UI/SortableVirtualizedItemList/DropIndicator.js","UI/SortableVirtualizedItemList/index.js","UI/Theme/DefaultTheme/index.js","UI/Toggle.js","KeyboardShortcuts/DefaultShortcuts.js","UI/ListCommonItem.js","VariablesList/index.js","UI/TreeTable/index.js","UI/TextEllipsis.js","Utils/ProjectErrorsChecker.js","GameDashboard/GameRegistration.js","Profile/CreateProfile.js","Profile/SubscriptionChecker.js","Utils/UseIsMounted.js","Utils/GDevelopServices/User.js","UI/ErrorBoundary.js","Utils/OptionalLazyRequire.js","UI/Accordion.js","EventsSheet/index.js","EventsSheet/ParameterRenderingService.js","EventsSheet/ParameterFields/ObjectField.js","ObjectsRendering/PixiResourcesLoader.js","UI/Button.js","EventsSheet/ParameterFields/GenericExpressionField/FormatExpressionCall.js","EventsSheet/ParameterFields/VariableField.js","EffectsList/EnumerateEffects.js","Tutorial/TutorialContext.js","EventsSheet/InstructionEditor/NewInstructionEditor.js","InstructionOrExpression/SetupInstructionParameters.js","UI/TagChips.js","UI/Search/CategoryChooser.js","AssetStore/AssetStoreContext.js","Utils/CssHelpers.js","ProjectsStorage/ResourceFetcher/index.js","Utils/GridHelpers.js","InstancesEditor/InstancesEditorSettings.js","ResourcesList/ResourceSource.js","Utils/TimestampedId.js","MainFrame/index.js","UI/Tooltip.js","MainFrame/UpdaterTools.js","UI/HelpIcon/index.js","UI/CustomSvgIcons/Paste.js","Utils/MapStringString.js","ResourcesList/ResourceThumbnail/ImageThumbnail.js","Utils/UseDebounce.js","AssetStore/ExtensionStore/ExtensionStoreContext.js","Profile/PublicProfileContext.js","AssetStore/ExtensionStore/InstallExtension.js","AssetStore/InstallAsset.js","SceneEditor/ScenePropertiesDialog.js","SceneEditor/SceneVariablesDialog.js","ProjectManager/EventFunctionExtensionNameVerifier.js","CommandPalette/CommandManager.js","CommandPalette/UseRefInitHook.js","MainFrame/EditorContainers/EventsEditorContainer.js","EventsSheet/EventsTree/DropIndicator.js","EventsSheet/ParameterFields/DefaultField.js","ObjectsList/ObjectSelector.js","ObjectsRendering/Renderers/RenderedIconInstance.js","EventsSheet/ParameterFields/ParameterFieldCommons.js","InstructionOrExpression/EnumerateExpressions.js","Utils/FuzzyOrEmptyFilter.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorInstructionOrExpressionListItem.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorInstructionsTreeListItem.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionParametersEditor.js","EventsSheet/ParameterFields/EnumerateVariables.js","EventsSheet/ParameterFields/SceneVariableField.js","UI/DragAndDrop/DragSourceAndDropTarget.js","EventsSheet/ClipboardKind.js","UI/DragAndDrop/DropTarget.js","EventsSheet/EnumerateEventsMetadata.js","EventsSheet/InstructionEditor/InstructionParametersEditor.js","UI/Reponsive/SelectColumns.js","Utils/History.js","EventsSheet/EventsFunctionExtractor/index.js","EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionParametersEditor.js","ObjectTypeSelector/index.js","BehaviorTypeSelector/index.js","BehaviorsEditor/EnumerateBehaviorsMetadata.js","StringArrayEditor/index.js","EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionPropertiesEditor.js","UI/EditorMosaic/CloseButton.js","MainFrame/EditorContainers/EventsFunctionsExtensionEditorContainer.js","ObjectGroupEditor/ObjectGroupEditorDialog.js","AssetStore/ResourceStore/ResourceStoreContext.js","UI/Search/BoxSearchResults.js","UI/CustomSvgIcons/Behaviors/Create.js","UI/CustomSvgIcons/Behaviors/Step.js","UI/CustomSvgIcons/Behaviors/Destroy.js","UI/CustomSvgIcons/Behaviors/Function.js","UI/CustomSvgIcons/Behaviors/Activate.js","UI/CustomSvgIcons/Behaviors/Deactivate.js","MainFrame/EditorContainers/ExternalEventsEditorContainer.js","MainFrame/EditorContainers/ExternalPropertiesDialog.js","MainFrame/EditorContainers/ExternalLayoutEditorContainer.js","SceneEditor/index.js","InstancesEditor/PinchHandler.js","LayersList/EnumerateLayers.js","UI/FullSizeMeasurer.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/styles.js","ObjectEditor/Editors/SpriteEditor/Utils/SpriteSelector.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/styles.js","MainFrame/EditorContainers/ResourcesEditorContainer.js","MainFrame/EditorContainers/SceneEditorContainer.js","Utils/TimeFunction.js","Utils/UseInterval.js","Utils/i18n/getTranslationFunction.js","Utils/Delay.js","GamesShowcase/GamesShowcaseContext.js","AssetStore/ExampleStore/ExampleStoreContext.js","Export/GenericExporters/CordovaExport.js","Export/GenericExporters/ElectronExport.js","Export/GenericExporters/HTML5Export.js","Export/GenericExporters/FacebookInstantGamesExport.js","Export/GenericExporters/OnlineCordovaExport.js","Export/GenericExporters/OnlineElectronExport.js","Export/GenericExporters/OnlineWebExport.js","UI/CustomSvgIcons/Facebook.js","UI/CustomSvgIcons/Cordova.js","UI/CustomSvgIcons/Chrome.js","JsExtensionsLoader/index.js","ProjectsStorage/ProjectStorageProviders.js","UI/KeyboardShortcuts/DeprecatedKeyboardShortcuts.js","InstancesEditor/InstancesRenderer/index.js","Utils/TransformRect.js","InstancesEditor/InstancesResizer.js","InstancesEditor/SelectedInstances.js","InstancesEditor/HighlightedInstance.js","InstancesEditor/InstancesRotator.js","InstancesEditor/InstancesMover.js","InstancesEditor/Grid.js","InstancesEditor/WindowBorder.js","InstancesEditor/WindowMask.js","InstancesEditor/BackgroundColor.js","InstancesEditor/FpsLimiter.js","Utils/PIXITicker.js","InstancesEditor/StatusBar.js","InstancesEditor/CanvasCursor.js","InstancesEditor/LongTouchHandler.js","InstancesEditor/index.js","Tutorial/TutorialListItem.js","Tutorial/index.js","UI/CustomSvgIcons/Apple.js","UI/CustomSvgIcons/GooglePlay.js","UI/CustomSvgIcons/Steam.js","UI/CustomSvgIcons/Twitter.js","UI/CustomSvgIcons/Instagram.js","UI/CustomSvgIcons/Twitch.js","UI/CustomSvgIcons/ItchIo.js","UI/CustomSvgIcons/Microsoft.js","GamesShowcase/ShowcasedGameListItem.js","GamesShowcase/index.js","ProjectCreation/LocalPathFinder.js","ProjectCreation/CreateProjectDialog.js","UI/DragAndDrop/DragAndDropContextProvider.js","UI/RightLoader.js","Profile/UsernameField.js","Profile/CreateAccountDialog.js","Profile/LoginDialog.js","Profile/EditProfileDialog.js","Profile/ChangeEmailDialog.js","Profile/EmailVerificationPendingDialog.js","Profile/AuthenticatedUserProvider.js","Profile/PublicProfileDialog.js","Profile/PublicProfileProvider.js","MainFrame/Preferences/PreferencesProvider.js","EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsProvider.js","MainFrame/Providers.js","Debugger/Toolbar.js","Debugger/InspectorsList.js","Debugger/Inspectors/VariablesContainerInspector.js","Debugger/Inspectors/RuntimeObjectInspector.js","Debugger/Inspectors/RuntimeSceneInspector.js","Debugger/GDJSInspectorDescriptions.js","Debugger/Inspectors/RawContentInspector.js","Debugger/Profiler/MeasuresTable.js","Debugger/Profiler/index.js","Debugger/DebuggerConsole.js","Debugger/DebuggerContent.js","Debugger/DebuggerSelector.js","Debugger/index.js","MainFrame/EditorContainers/DebuggerEditorContainer.js","Export/Builds/BuildProgress.js","Export/Builds/BuildsList.js","Export/Builds/BuildsWatcher.js","Export/Builds/index.js","Export/Builds/BuildsDialog.js","Profile/LimitDisplayer.js","Export/Builds/BuildStepsProgress.js","Export/ExportLauncher.js","Utils/OnlineStatus.js","Export/ExportDialog.js","CodeEditor/Theme/TomorrowNight.js","CodeEditor/Theme/Monokai.js","CodeEditor/Theme/Tomorrow.js","CodeEditor/Theme/SolarizedDark.js","CodeEditor/Theme/SolarizedLight.js","CodeEditor/Theme/VibrantInk.js","CodeEditor/Theme/GitHub.js","CodeEditor/Theme/NordDark.js","CodeEditor/Theme/OneDark.js","CodeEditor/Theme/index.js","Utils/i18n/RtlLanguages.js","Utils/Memoize.js","UI/Theme/DarkTheme/index.js","UI/Theme/NordTheme/index.js","UI/Theme/SolarizedDarkTheme/index.js","UI/Theme/OneDarkTheme/index.js","UI/Theme/ThemeRegistry.js","UI/Theme/index.js","AssetStore/AssetCard.js","AssetStore/index.js","AssetStore/AssetDetails.js","AssetStore/NewObjectDialog.js","UI/EditTagsDialog.js","ObjectsList/index.js","ObjectsList/ClipboardKind.js","UI/GravatarUrl.js","Profile/Achievement/AchievementList.js","UI/CustomSvgIcons/Trophy.js","Profile/Achievement/UserAchievements.js","Profile/ProfileDetails.js","AssetStore/ExampleStore/ExampleIcon.js","AssetStore/ExampleStore/ExampleDialog.js","AssetStore/ExampleStore/ExampleListItem.js","AssetStore/ExampleStore/index.js","MainFrame/Changelog/ChangelogRenderer.js","Utils/GDevelopServices/Release.js","MainFrame/Changelog/index.js","AssetStore/ExtensionStore/ExtensionListItem.js","AssetStore/ExtensionStore/ExtensionInstallDialog.js","AssetStore/ExtensionStore/index.js","EventsSheet/InstructionEditor/InstructionOrObjectSelector.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorObjectListItem.js","EventsSheet/InstructionEditor/SelectorListItems/SelectorGroupObjectsListItem.js","AssetStore/ResourceStore/ResourceCard.js","AssetStore/ResourceStore/index.js","Utils/GDevelopServices/Analytics.js","GameDashboard/GameDetailsDialog.js","UI/SemiControlledMultiAutoComplete.js","Utils/UsersAutocomplete.js","ObjectGroupsList/GroupRow.js","ObjectGroupsList/index.js","EffectsList/EmptyEffectsPlaceholder.js","EffectsList/index.js","MainFrame/ProjectTitlebar.js","MainFrame/AboutDialog.js","VariablesList/VariableRow.js","VariablesList/styles.js","UI/BooleanField.js","Utils/SelectionHandler.js","VariablesList/ClipboardKind.js","Utils/IsNullPtr.js","PlatformSpecificAssetsEditor/PlatformSpecificAssetsDialog.js","PlatformSpecificAssetsEditor/ImageResizer.js","UI/LoaderModal.js","UI/DrawerTopBar.js","UI/CloseConfirmDialog.js","UI/ClosableTabs.js","MainFrame/EditorTabsHandler.js","EventsSheet/EventsTree/index.js","EventsSheet/EventsTree/Renderers/StandardEvent.js","EventsSheet/EventsTree/Instruction.js","EventsSheet/ParameterFields/RelationalOperatorField.js","EventsSheet/ParameterFields/OperatorField.js","EventsSheet/ParameterFields/MouseField.js","EventsSheet/ParameterFields/KeyField.js","ObjectsRendering/Renderers/RenderedUnknownInstance.js","Utils/FontFaceLoader.js","ObjectsRendering/Renderers/RenderedSpriteInstance.js","ObjectsRendering/Renderers/RenderedTiledSpriteInstance.js","ObjectsRendering/Renderers/RenderedPanelSpriteInstance.js","ObjectsRendering/Renderers/RenderedTextInstance.js","ObjectsRendering/Renderers/RenderedShapePainterInstance.js","ObjectsRendering/Renderers/RenderedTextEntryInstance.js","ObjectsRendering/Renderers/RenderedParticleEmitterInstance.js","EventsSheet/ParameterFields/YesNoField.js","EventsSheet/ParameterFields/TrueFalseField.js","EventsSheet/ParameterFields/ExpressionField.js","EventsSheet/InstructionEditor/InstructionOrExpressionSelector/ExpressionSelector.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionParametersEditorDialog.js","EventsSheet/ParameterFields/GenericExpressionField/BackgroundHighlighting.js","ExpressionAutocompletion/index.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionAutocompletionsHandler.js","EventsSheet/ParameterFields/GenericExpressionField/ExpressionAutocompletionsDisplayer.js","EventsSheet/ParameterFields/StringField.js","EventsSheet/ParameterFields/StringWithSelectorField.js","EventsSheet/ParameterFields/BehaviorField.js","EventsSheet/ParameterFields/GlobalVariableField.js","EventsSheet/ParameterFields/ObjectVariableField.js","EventsSheet/ParameterFields/LayerField.js","EventsSheet/ParameterFields/AudioResourceField.js","EventsSheet/ParameterFields/VideoResourceField.js","EventsSheet/ParameterFields/JsonResourceField.js","EventsSheet/ParameterFields/BitmapFontResourceField.js","EventsSheet/ParameterFields/ColorExpressionField.js","EventsSheet/ParameterFields/ForceMultiplierField.js","EventsSheet/ParameterFields/SceneNameField.js","EventsSheet/ParameterFields/LayerEffectNameField.js","EventsSheet/ParameterFields/LayerEffectParameterNameField.js","EventsSheet/ParameterFields/ObjectEffectNameField.js","EventsSheet/ParameterFields/ObjectEffectParameterNameField.js","EventsSheet/ParameterFields/ObjectPointNameField.js","EventsSheet/ParameterFields/ObjectAnimationNameField.js","EventsSheet/EventsTree/InvalidParameterValue.js","EventsSheet/EventsTree/MissingParameterValue.js","EventsSheet/EventsTree/Renderers/GroupEvent.js","EventsSheet/EventsTree/Renderers/CommentEvent.js","EventsSheet/EventsTree/Renderers/ForEachEvent.js","EventsSheet/EventsTree/Renderers/ForEachChildVariableEvent.js","EventsSheet/EventsTree/Renderers/RepeatEvent.js","EventsSheet/EventsTree/Renderers/WhileEvent.js","EventsSheet/EventsTree/Renderers/LinkEvent/index.js","EventsSheet/EventsTree/Renderers/LinkEvent/ExternalEventsAutoComplete.js","EventsSheet/EventsTree/Renderers/JsCodeEvent.js","EventsSheet/EventsTree/EventHeightsCache.js","EventsSheet/EventsTree/BottomButtons.js","EventsSheet/EventsTree/EmptyEventsPlaceholder.js","EventsSheet/InstructionEditor/NewInstructionEditorDialog.js","Utils/CaseSensitiveSlug.js","EventsFunctionsExtensionsLoader/EnumerateProperties.js","EventsSheet/InstructionEditor/NewInstructionEditorMenu.js","EventsSheet/InstructionEditor/EventTextDialog.js","UI/KeyboardShortcuts/index.js","EventsSheet/InlineParameterEditor.js","EventsSheet/OnceInstructionSanitizer.js","EventsSheet/EventsContextAnalyzerDialog.js","EventsSheet/SearchPanel.js","EventsSheet/EventsSearcher.js","EventsSheet/ContainsSubInstruction.js","EventsSheet/EventsFunctionExtractor/EventsFunctionExtractorDialog.js","Utils/GetObjectGroupByName.js","EventsFunctionsExtensionEditor/index.js","EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/index.js","ObjectGroupsList/ObjectGroupsListWithObjectGroupEditor.js","ObjectGroupEditor/index.js","EventsBasedBehaviorEditor/EventsBasedBehaviorEditorDialog.js","EventsBasedBehaviorEditor/index.js","EventsBasedBehaviorEditor/EventsBasedBehaviorPropertiesEditor.js","EventsFunctionsExtensionEditor/BehaviorMethodSelectorDialog.js","EventsFunctionsExtensionEditor/ExtensionFunctionSelectorDialog.js","UI/EditorMosaic/EditorNavigator.js","EventsFunctionsExtensionEditor/ChooseEventsFunctionsExtensionEditor.js","InstancesEditor/InstancesRenderer/LayerRenderer.js","InstancesEditor/InstancesRenderer/PixiDoubleClickEvent.js","Utils/PolygonHelper.js","InstancesEditor/SelectionRectangle.js","InstancesEditor/InstancesAdder.js","InstancesEditor/InstancePropertiesEditor/index.js","InstancesEditor/InstancesList/index.js","LayersList/LayerRemoveDialog.js","LayersList/LayerEditorDialog.js","ObjectEditor/ObjectEditorDialog.js","ObjectEditor/Editors/TextEditor.js","ObjectEditor/Editors/TiledSpriteEditor.js","ObjectEditor/Editors/PanelSpriteEditor.js","ObjectEditor/Editors/SpriteEditor/index.js","ObjectEditor/Editors/SpriteEditor/SpritesList.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/index.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/PointsList.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/PointRow.js","ObjectEditor/Editors/SpriteEditor/PointsEditor/PointsPreview.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/index.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/PolygonsList.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/VerticeRow.js","ObjectEditor/Editors/SpriteEditor/CollisionMasksEditor/CollisionMasksPreview.js","ObjectEditor/Editors/EmptyEditor.js","ObjectEditor/Editors/ShapePainterEditor.js","ObjectEditor/Editors/ParticleEmitterEditor.js","ObjectEditor/Editors/ObjectPropertiesEditor.js","BehaviorsEditor/index.js","BehaviorsEditor/NewBehaviorDialog.js","BehaviorsEditor/EmptyBehaviorsPlaceholder.js","SceneEditor/SetupGridDialog.js","InstancesEditor/FullSizeInstancesEditorWithScrollbars.js","Utils/StringHelpers.js","UI/EditorMosaic/TagsButton.js","Hints/ObjectsAdditionalWork.js","ResourcesEditor/index.js","ResourcesList/index.js","ResourcesList/EnumerateResources.js","ResourcesEditor/Toolbar.js","MainFrame/Preferences/LanguageDialog.js","locales/LocalesMetadata.js","ProjectsStorage/OpenFromStorageProviderDialog.js","ProjectsStorage/SaveToStorageProviderDialog.js","ProjectsStorage/OpenConfirmDialog.js","ProjectsStorage/ProjectContentChecker.js","Utils/UseSetStateWithCallback.js","MainFrame/MainFrameCommands.js","CommandPalette/CommandsScopedContext.js","MainFrame/PreviewState.js","HotReload/HotReloadLogsDialog.js","Utils/UpdateDiscordRichPresence.js","ResourcesList/NewResourceDialog.js","Utils/i18n/GDI18nProvider.js","locales lazy /^/.//.*//messages$/ groupOptions: {} namespace object","ProjectManager/ExtensionsProperties.js","ProjectManager/LoadingScreenEditor.js","ProjectManager/ProjectPropertiesDialog.js","AssetStore/ExtensionStore/ExtensionsSearchDialog.js","UI/CustomSvgIcons/VariableTree.js","ProjectManager/ProjectManagerCommands.js","ProjectManager/index.js","Profile/AuthenticatedUserProfileDetails.js","Profile/UsagesDetails.js","Profile/SubscriptionDetails.js","Profile/ContributionsDetails.js","GameDashboard/GameCard.js","GameDashboard/GamesList.js","Profile/ProfileDialog.js","BehaviorsEditor/Editors/BehaviorPropertiesEditor.js","BehaviorsEditor/Editors/Physics2Editor/ShapePreview.js","BehaviorsEditor/Editors/Physics2Editor/PolygonEditor.js","BehaviorsEditor/Editors/Physics2Editor/index.js","BehaviorsEditor/BehaviorsEditorService.js","KeyboardShortcuts/DetectShortcutDialog.js","KeyboardShortcuts/ShortcutsListRow.js","KeyboardShortcuts/ShortcutsList.js","MainFrame/Preferences/PreferencesDialog.js","UI/Badge.js","LayersList/LayerRow.js","LayersList/BackgroundColorRow.js","LayersList/index.js","ObjectsList/UseObjectsListCommands.js","ObjectGroupsList/UseObjectGroupsListCommands.js","LayersList/UseLayersListCommands.js","SceneEditor/UseSceneEditorCommands.js","MainFrame/EditorContainers/StartPage/GDevelopLogo.js","MainFrame/EditorContainers/StartPage/ScrollBackground.js","MainFrame/EditorContainers/StartPage/index.js","CommandPalette/CommandPalette/FilterOptions.js","CommandPalette/CommandPalette/AutocompletePicker.js","CommandPalette/CommandPalette/index.js","EventsSheet/InstructionEditor/InstructionOrExpressionSelector/InstructionSelector.js","EventsSheet/InstructionEditor/index.js","EventsSheet/InstructionEditor/InstructionEditorDialog.js","EventsFunctionsExtensionEditor/OptionsEditorDialog/ExtensionOptionsEditor.js","EventsFunctionsExtensionEditor/OptionsEditorDialog/ExtensionDependenciesEditor.js","EventsFunctionsExtensionEditor/OptionsEditorDialog/index.js","ResourcesList/ResourcePreview/GenericIconPreview.js","ResourcesList/ResourcePreview/index.js","ResourcesEditor/ResourcePropertiesEditor/index.js","MainFrame/Toolbar/PreviewButtons.js","MainFrame/Toolbar/index.js","HelpFinder/DocSearchArea.js","HelpFinder/index.js","Profile/SubscriptionPendingDialog.js","Profile/SubscriptionDialog.js","MainFrame/Changelog/ChangelogDialog.js","MainFrame/Changelog/ChangelogDialogContainer.js","EventsSheet/ToolbarCommands.js","EventsSheet/Toolbar.js","EventsFunctionsList/index.js","EventsFunctionsList/EnumerateEventsFunctions.js","EventsBasedBehaviorsList/index.js","EventsBasedBehaviorsList/EnumerateEventsBasedBehaviors.js","ObjectEditor/Editors/SpriteEditor/AnimationPreview/index.js","ObjectEditor/Editors/SpriteEditor/DirectionTools.js","SceneEditor/ToolbarCommands.js","SceneEditor/Toolbar.js","UI/CustomSvgIcons/Copy.js","VariablesList/EditVariableRow.js","EventsSheet/EventsTree/Renderers/UnknownEvent.js","EventsSheet/EventsTree/EventsRenderingService.js","CodeEditor/LocalCodeEditorAutocompletions.js","CodeEditor/index.js"],"names":["Line","props","style","display","marginTop","noMargin","marginBottom","alignItems","justifyContent","flex","expand","undefined","overflow","children","Column","marginLeft","marginsSize","marginRight","flexDirection","minHeight","useFullHeight","minWidth","noOverflowParent","Spacer","width","height","flexShrink","size","align","noShrink","displayInlineAsSpan","variant","component","FlatButton","this","label","primary","icon","keyboardFocused","otherProps","color","autoFocus","focusRipple","React","RaisedButton","styles","defaultBody","overflowX","noMarginBody","padding","flexRowBody","flexBody","actionsContainerWithSecondaryActions","noTitleMargin","fullHeightModal","onApply","secondaryActions","actions","open","onRequestClose","maxWidth","title","fullHeight","backdropClickBehavior","PreferencesContext","values","useResponsiveWindowWidth","dialogActions","key","dialogContentStyle","onClose","event","reason","fullWidth","fullScreen","className","classNames","PaperProps","disableBackdropClick","buttonCommonStyles","textFieldWithButtonLayoutStyles","container","filledTextFieldWithLabelRightButtonMargins","filledTextFieldWithoutLabelRightButtonMargins","standardTextFieldWithLabelRightButtonMargins","standardTextFieldWithoutLabelRightButtonMargins","TextFieldWithButtonLayout","margin","noFloatingLabelText","renderTextField","renderButton","ResponsiveLineStackLayout","noColumnMargin","windowWidth","isFirstChild","ColumnStackLayout","map","child","index","addSpacers","mapFor","start","end","func","result","i","push","module","exports","mapReverseFor","mapVector","cppVector","at","EmptyMessage","muiTheme","messageStyle","computeTextFieldStyleProps","hiddenLabel","floatingLabelText","TextField","_input","current","focus","blur","onChange","helperText","helperMarkdownText","source","i18n","type","value","defaultValue","target","error","errorText","disabled","required","InputLabelProps","shrink","floatingLabelFixed","name","placeholder","hintText","_","id","multiline","rows","rowsMax","InputProps","disableUnderline","underlineShow","fontSize","fontStyle","inputStyle","readOnly","inputProps","onKeyPress","onKeyUp","onKeyDown","onClick","max","min","step","top","onFocus","onBlur","inputRef","spellCheck","noMarginTextFieldInListItemTopOffset","IconButton","tooltip","acceleratorString","iconButton","accelerator","Tooltip","isMobile","isMacLike","replace","placement","enterDelay","tooltipEnterDelay","SemiControlledTextField","state","focused","text","_field","setState","selectionStart","selectionEnd","input","getInputNode","commitOnBlur","ref","field","newValue","currentTarget","HelpButton","helpPagePath","helpLink","getHelpLink","Window","openExternalURL","electron","optionalRequire","path","UrlsCache","projectCache","project","cache","ptr","url","_getProjectCache","filename","systemFilename","disableCacheBurst","Date","now","ResourcesLoader","resourcesNames","resourcesManager","getResourcesManager","forEach","resourceName","hasResource","_cache","burstUrl","getResource","getFile","urlOrFilename","isResourceForPixi","startsWith","isLocalFile","cachedUrl","getCachedUrl","file","getProjectFile","projectPath","dirname","resourceAbsolutePath","resolve","console","info","cacheLocalFileUrl","urlWithParameters","urlEncodedParameterName","urlEncodedValue","separator","indexOf","addSearchParameterToUrl","cacheUrl","options","resourceRelativePath","getFullUrl","ThemeConsumer","Consumer","gdevelopTheme","initialPreferences","language","autoDownloadUpdates","themeName","window","matchMedia","matches","codeEditorThemeName","hiddenAlertMessages","hiddenTutorialHints","autoDisplayChangelog","lastLaunchedVersion","eventsSheetShowObjectThumbnails","autosaveOnPreview","useNewInstructionEditorDialog","useUndefinedVariablesInAutocompletion","useGDJSDevelopmentWatcher","eventsSheetUseAssignmentOperators","eventsSheetZoomLevel","showEffectParameterNames","projectLastUsedPaths","defaultEditorMosaicNodes","recentProjectFiles","autoOpenMostRecentProject","hasProjectOpened","userShortcutMap","newObjectDialogDefaultTab","isMenuBarHiddenInPreview","isAlwaysOnTopInPreview","eventsSheetCancelInlineParameter","setLanguage","setThemeName","setCodeEditorThemeName","setAutoDownloadUpdates","checkUpdates","setAutoDisplayChangelog","showAlertMessage","identifier","show","showAllAlertMessages","showTutorialHint","showAllTutorialHints","verifyIfIsNewVersion","setEventsSheetShowObjectThumbnails","setAutosaveOnPreview","setUseNewInstructionEditorDialog","enabled","setUseUndefinedVariablesInAutocompletion","setUseGDJSDevelopmentWatcher","setEventsSheetUseAssignmentOperators","setEventsSheetZoomLevel","zoomLevel","setShowEffectParameterNames","getLastUsedPath","kind","setLastUsedPath","getDefaultEditorMosaicNode","setDefaultEditorMosaicNode","node","getRecentProjectFiles","insertRecentProjectFile","fileMetadata","removeRecentProjectFile","getAutoOpenMostRecentProject","setAutoOpenMostRecentProject","hadProjectOpenedDuringLastSession","setHasProjectOpened","resetShortcutsToDefault","setShortcutForCommand","commandName","shortcut","getNewObjectDialogDefaultTab","setNewObjectDialogDefaultTab","getIsMenuBarHiddenInPreview","setIsMenuBarHiddenInPreview","setBackdropClickBehavior","getIsAlwaysOnTopInPreview","setIsAlwaysOnTopInPreview","setEventsSheetCancelInlineParameter","listItemWith32PxIconHeight","listItemWithoutIconHeight","listItemText","wordBreak","ListItem","initiallyOpen","isOpen","setIsOpen","elementWithMenu","openContextMenu","longTouchForContextMenuProps","useLongTouch","renderListItemSecondaryAction","displayReloadButton","reloadButtonTooltip","edge","aria-label","onReload","buildMenuTemplate","displayMenuButton","element","rightIconColor","displayLinkButton","onOpenLink","displayRemoveButton","onRemove","renderNestedItems","isItemOpen","button","dense","disableRipple","leftIcon","primaryText","secondary","secondaryText","autoGenerateNestedIndicator","in","timeout","unmountOnExit","disablePadding","paddingLeft","nestedListStyle","ContainerComponent","onDoubleClick","selected","onContextMenu","secondaryTextLines","displayAddIcon","displaySearchIcon","List","useForceUpdate","updateState","autoHideScrollbar","scrollView","scrollTo","scrollViewElement","targetElement","ReactDOM","findDOMNode","HTMLElement","yPosition","getBoundingClientRect","scrollViewYPosition","scrollTop","scrollToBottom","scrollHeight","overflowY","Background","square","noFullHeight","noExpand","SelectField","hasValidValue","childrenValues","filter","childValue","length","displayedValue","select","SelectProps","native","SelectOption","content","AlertMessage","onHide","renderRightButton","renderLeftIcon","GDevelopThemeContext","elevation","message","warning","listeners","Set","callListeners","callback","addEventListener","clearTimeout","setTimeout","ResponsiveWindowMeasurer","useEffect","add","delete","innerWidth","innerHeight","exists","prefix","potentialName","shouldCloseOrCancel","shouldValidate","shouldActivate","shouldSubmit","metaKey","ctrlKey","shouldFocusNextField","shiftKey","shouldFocusPreviousField","selectableArea","selectedArea","largeSelectableArea","largeSelectedArea","executableEventContainer","actionsContainer","conditionsContainer","subInstructionsContainer","smallWidthContainer","instructionParameter","instructionInvalidParameter","instructionMissingParameter","disabledText","eventsTree","eventsTreeWithSearchResults","dropIndicator","cantDropIndicator","linkContainer","nameAndIconContainer","onCheck","checkbox","checked","uncheckedIcon","checkedIcon","control","gd","global","serializeToJSObject","serializable","methodName","serializedElement","SerializerElement","object","JSON","parse","Serializer","toJSON","serializeToJSON","json","unserializeFromJSObject","optionalProject","fromJSObject","Tabs","textColor","e","Tab","ElementWithMenu","_contextMenu","_wrappedElement","dimensions","Math","round","left","openMenuWithSecondaryClick","passExtraProps","wrappedElement","contextMenu","SearchBar","active","_textField","handleFocus","handleBlur","trim","handleInput","handleCancel","handleKeyPressed","onRequestSearch","nextProps","nonEmpty","root","iconButtonClose","opacity","transform","transition","iconStyle","iconButtonSearch","iconButtonFilter","iconButtonHelp","searchContainer","position","getStyles","buildTagsMenuTemplate","backgroundColor","searchBar","useShouldAutofocusSearchbar","useScreenType","rgbColorToRGBString","rgbColor","r","g","b","rgbToHex","toString","slice","rgbToHexNumber","rgbStringToHexNumber","rgbString","rgbStringAndAlphaToRGBColor","rgbOrHexToHexNumber","split","parseInt","hexNumberToRGBColor","hexNumber","a","hexNumberToRGBString","hex","rgbOrHexToRGBString","hexToRGBColor","alpha","colors","BackgroundText","textShadow","emptyMessage","shadowColor","tooltipText","MarkdownText","ThemeContext","markdownCustomRenderers","isStandaloneText","allowParagraphs","link","href","rel","linkReference","paragraph","escapeHtml","translatableSource","markdownRootClassName","renderers","ListIconMemo","memo","useContext","src","isGDevelopIcon","cssAnimation","useExactIconSize","iconWidth","iconSize","iconHeight","paddingRight","maxHeight","verticalAlign","animation","gdevelopIconsCSSFilter","lineHeight","textAlign","alt","initialAuthenticatedUser","authenticated","firebaseUser","profile","badges","subscription","usages","limits","onLogout","onLogin","onEdit","onChangeEmail","onCreateAccount","onBadgesChanged","onRefreshUserProfile","onRefreshFirebaseProfile","onSendEmailVerification","onAcceptGameStatsEmail","getAuthorizationHeader","Promise","reject","Error","AuthenticatedUserContext","textFieldContainer","textFieldAndHightlightContainer","expressionSelectorPopoverContentSmall","expressionSelectorPopoverContent","fontFamily","backgroundHighlightingWithFloatingLabel","boxSizing","backgroundHighlightingInline","backgroundHighlightingInlineWithFloatingLabel","extractErrors","expressionNode","expressionValidator","ExpressionValidator","visit","errors","getErrors","errorHighlights","begin","getStartPosition","getEndPosition","getMessage","otherErrorsCount","hasMultipleErrors","highlight","join","ExpressionField","_fieldElement","_inputElement","popoverOpen","parametersDialogOpen","selectedExpressionInfo","validatedValue","autocompletions","getAutocompletionsInitialState","_enqueueValidation","_openExpressionPopover","_handleFocus","preventDefault","_handleRequestClose","_handleChange","_handleBlur","cancel","_doValidation","_shouldOpenParametersDialog","expressionInfo","hasNonCodeOnlyParameters","metadata","_handleExpressionChosen","newState","insertExpression","parameterValues","cursorPosition","functionCall","formatExpressionCall","substr","setSelectionRange","_insertAutocompletion","expressionAutocompletion","isExact","caretLocation","expression","insertAutocompletionInExpression","completion","replacementStartPosition","replacementEndPosition","addParenthesis","addDot","addParameterSeparator","addNamespaceSeparator","hasVisibleParameters","newExpression","newCaretLocation","forceSetValue","forceSetSelection","debounce","globalObjectsContainer","objectsContainer","expressionType","scope","onGetAdditionalAutocompletions","onExtractAdditionalErrors","parser","ExpressionParser2","JsPlatform","get","parseExpression","formattedErrorText","Boolean","charAt","completionDescriptions","ExpressionCompletionFinder","getCompletionDescriptionsFor","newAutocompletions","getAutocompletionsFromDescriptions","allNewAutocompletions","concat","setNewAutocompletions","Element","parameterMetadata","parameterRenderingService","description","getDescription","isInline","longDescription","getLongDescription","popoverStyle","clientWidth","zIndex","muiZIndex","backgroundHighlightingStyle","highlights","handleAutocompletionsKeyDown","onUpdateAutocompletions","onInsertAutocompletion","onClickAway","anchorEl","disablePortal","screenSize","selectedType","onChoose","focusOnMount","expressionAutocompletions","getVisibleAutocompletions","remainingCount","getRemainingCount","selectedCompletionIndex","renderExtraButton","expressionMetadata","onDone","DefaultTheme","DismissableAlertMessage","showConfirmDialog","CorsAwareImage","getLastObjectParameterValue","instructionMetadata","instruction","parameterIndex","objectName","objectParameterIndex","ParameterMetadataTools","getObjectParameterIndexFor","getParameters","getParametersCount","getParameter","getLastObjectParameterObjectType","parameters","getExtraInfo","getPreviousParameterValue","tryExtractStringLiteralContent","parameterValue","trimmedParameterValue","getParameterChoices","choice","exception","MiniToolbar","toolbar","Component","firstChildToolbarTextStyle","toolbarTextStyle","MiniToolbarText","firstChild","isSameObjectWithContext","objectWithContext","other","enumerateObjects","filterObject","getTypeOfObject","getName","containerObjectsList","getObjectsCount","getObjectAt","projectObjectsList","allObjectsList","enumerateObjectTypes","extensionsList","getCurrentPlatform","getAllPlatformExtensions","flatten","extension","getExtensionObjectsTypes","toJSArray","objectType","getObjectMetadata","objectMetadata","fullName","getFullName","iconFilename","getIconFilename","filterObjectsList","list","searchText","selectedTags","hideExactMatches","objectTags","getTags","hasStringAllTags","toLowerCase","filterGroupsList","groupWithContext","groupName","group","enumerateGroups","objectGroups","count","getAt","enumerateObjectsAndGroups","filterGroup","containerGroups","getObjectGroups","containerGroupsList","projectGroups","projectGroupsList","allGroupsList","PIXI","GlobalPIXIModule","requirableModules","unknownObjectType","RenderedUnknownInstance","Sprite","RenderedSpriteInstance","RenderedTiledSpriteInstance","RenderedPanelSpriteInstance","RenderedTextInstance","RenderedShapePainterInstance","RenderedTextEntryInstance","RenderedParticleEmitterInstance","getThumbnail","getType","hasOwnProperty","createNewInstanceRenderer","layout","instance","associatedObject","pixiContainer","PixiResourcesLoader","warn","registerInstanceRenderer","renderer","registerModule","requirePath","requireModule","requireBasePath","originalRequiredModulePath","_load","originalNodeModuleLoad","allowedModules","request","parent","isMain","loadedModule","Object","keys","requiredModule","require","ex","RenderedInstance","app","remote","fs","process","isDarwin","test","platform","tryPath","onExists","onNoAccess","access","constants","R_OK","err","findGDJS","appPath","getAppPath","cwd","pathToRoot","rootPath","onFound","gdjsRoot","onNotFound","devPath","createOrUpdateResource","newlyCreatedResource","removeResource","setFile","setName","applyResourceDefaults","addResource","getLocalResourceFullPath","resourcePath","getResourceFullUrl","substring","lastIndexOf","isPathInProjectFolder","includes","copyAllToProjectFolder","resourcePaths","all","resourceBasename","basename","fileExtension","extname","fileNameWithoutExtension","newFileNameWithoutExtension","newNameGenerator","tentativeFileName","tentativePath","existsSync","resourceNewPath","copyFile","getResourceFilePathStatus","normalize","newResource","ImageResource","setSmooth","getScaleMode","renameResourcesInProject","resourceNewNames","renamedResourcesMap","toNewGdMapStringString","resourcesRenamer","ResourcesRenamer","exposeResources","PlaceholderError","onRetry","Table","TableBody","TableHeader","TableHeaderColumn","TableRow","TableRowColumn","useFilters","chosenCategory","setChosenCategory","chosenFilters","setChosenFilters","newChosenCategory","newChosenFilters","tag","allChildrenTags","addFilter","removeFilter","FiltersChooser","filtersState","allFilters","selectedCategoryTags","defaultTags","str","toUpperCase","has","progress","isLoading","ACHIEVEMENT_FEATURE_FLAG","TRIVIAL_FIRST_EVENT","TRIVIAL_FIRST_BEHAVIOR","TRIVIAL_FIRST_PREVIEW","TRIVIAL_FIRST_WEB_EXPORT","TRIVIAL_FIRST_EXTENSION","TRIVIAL_FIRST_EFFECT","TRIVIAL_FIRST_DEBUG","isAchievementAlreadyClaimed","achievementId","badge","createOrEnsureBadgeForUser","authenticatedUser","userId","uid","authorizationHeader","axios","post","GDevelopUserApi","baseUrl","params","headers","Authorization","response","data","status","addCreateBadgePreHookIfNotClaimed","args","apply","getAchievements","then","compareAchievements","unlockedAt","useCommand","command","commandManager","CommandsContext","handler","registerCommand","deregisterCommand","useCommandWithOptions","generateOptions","pixiResourcesLoader","_pixiObject","_instance","_associatedObject","_pixiContainer","_project","_layout","_pixiResourcesLoader","wasUsed","removeChild","angleInDegrees","getObjectByName","associatedObjectName","hasObjectNamed","getObject","getBuildArtifactUrl","build","keyName","getBuildFileUploadOptions","makeTimestampedId","getSignedUrl","uploadType","contentType","signedUrl","buildElectron","targets","GDevelopBuildApi","encodeURIComponent","buildWeb","buildCordovaAndroid","keystore","stringify","signing","getBuild","buildId","getBuilds","userHasTouchedScreen","onFirstTouch","removeEventListener","ScreenTypeMeasurer","listItem","useStyles","makeStyles","option","cursor","listbox","flexGrow","inputRoot","flexWrap","popper","makeRenderItem","divider","disableGutters","translatableValue","renderIcon","textEllispsisStyle","isOptionDisabled","useState","inputValue","setInputValue","isMenuOpen","setIsMenuOpen","classes","forceInputValueTo","currentInputValue","handleInputChange","freeSolo","handleChange","onInputChange","dataSource","renderOption","getOptionDisabled","getOptionLabel","filterOptions","lowercaseInputValue","optionList","pop","shift","filterFunction","renderInput","endAdornment","getDefaultStylingProps","otherStylingProps","onMouseDown","textFieldStyle","picker","right","ColorField","disableAlpha","parseFloat","_handlePickerChange","rgb","textField","onChangeComplete","shouldNeverBeCalled","RaisedButtonWithMenu","ResourceSelector","_addFrom","onChooseResource","initialSourceName","multiSelection","resourceKind","resources","resource","_loadFrom","_onChangeResourceName","_autoComplete","catch","_onResetResourceName","notExistingError","allResourcesNames","_editWith","resourceExternalEditor","resourcesLoader","initialResourceMetadata","initialResourceMetadataRaw","getMetadata","resourceNames","externalEditorOptions","singleFrame","extraOptions","fps","isLooping","externalEditorData","onChangesSaved","newResourceData","burstUrlsCacheForResources","edit","initialResourceName","sources","resourceSources","displayName","getAllResourceNames","getKind","resourceSourceItems","_getResourceSourceItems","resourceItems","autoCompleteData","externalEditors","resourceExternalEditors","externalEditor","SemiControlledAutoComplete","openOnFocus","autoComplete","canBeReset","click","isRelativePathToDocumentationRoot","isDocumentationAbsoluteUrl","electronClipboard","clipboard","internalClipboard","mangleClipboardKind","SafeExtractor","anything","propertyName","extractObject","property","extractArray","Array","isArray","Clipboard","writeText","readText","columnContainer","fieldContainer","subPropertiesEditorContainer","subHeader","getFieldValue","instances","log","getValue","getFieldLabel","getLabel","PropertiesEditor","_onInstancesModified","unsavedChanges","triggerUnsavedChanges","onInstancesModified","forceUpdate","_getFieldDescription","renderExtraDescriptionText","descriptions","getExtraDescription","_renderInputField","valueType","setValue","onEditButtonClick","_renderSelectField","getChoices","_renderButton","_renderResourceField","mode","fields","schema","isCompatibleWithAsset","ideVersion","assetHeader","gdevelopVersion","semverSatisfies","includePrerelease","listAllAssets","GDevelopAssetApi","assetShortHeadersUrl","filtersUrl","assetShortHeaders","filters","getAsset","assetShortHeader","assetUrl","listAllResources","resourcesUrl","listAllAuthors","authorsUrl","listAllLicenses","licensesUrl","isPixelArt","tags","some","isRootVariableName","EventsRootVariablesFinder","EventsVariablesFinder","findAllGlobalVariables","toNewVectorString","findAllLayoutVariables","findAllObjectVariables","freeActionsToAddToObject","BuiltinObject","freeConditionsToAddToObject","freeActionsToAddToBehavior","freeConditionsToAddToBehavior","Physics2","freeInstructionsToRemove","deduplicateInstructionsList","createFound","enumerateInstruction","filterInstructionsToRemove","typesToRemove","types","enumerateExtraBehaviorInstructions","isCondition","behaviorType","extensionName","extensionsExtraInstructions","objectExtraInstructions","instructionMetadataMap","getAllConditions","getAllActions","enumerateExtraObjectInstructions","instrMetadata","displayedName","getGroup","fullGroupName","isPrivate","enumerateExtensionInstructions","instructions","instructionsTypes","allInstructions","j","isHidden","enumerateAllInstructions","allExtensions","asPlatform","allObjectsTypes","allBehaviorsTypes","getBehaviorsTypes","extensionFreeInstructions","behaviorMetadata","getAllConditionsForObject","getAllActionsForObject","getBehaviorMetadata","getAllConditionsForBehavior","getAllActionsForBehavior","enumerateObjectAndBehaviorsInstructions","objectBehaviorNames","getBehaviorsOfObject","objectBehaviorTypes","behaviorName","getTypeOfBehavior","hasObjectType","hasBaseObjectType","behaviorTypes","noGroupInstructions","instructionsWithGroups","orderFirstInstructionsWithoutGroup","enumerateFreeInstructions","allFreeInstructions","filterInstructionsList","directMatches","fuzzyMatches","lowercaseSearch","lowerCaseDisplayedName","lowerCaseFullGroupName","fuzzyOrEmptyFilter","getObjectParameterIndex","parametersCount","firstParameterType","ParameterMetadata","isObject","secondParameterType","getCurrentElements","animationIndex","directionIndex","spriteIndex","hasValidAnimation","getAnimationsCount","getAnimation","hasValidDirection","getDirectionsCount","direction","getDirection","hasValidSprite","getSpritesCount","sprite","getSprite","getAllPointNames","allPointNames","points","getAllNonDefaultPoints","pointIndex","point","copyPoint","originalPoint","destinationPoint","setX","getX","setY","getY","copySpritePoints","originalSprite","destinationSprite","getCenter","getOrigin","setDefaultCenterPoint","isDefaultCenterPoint","clear","addPoint","copyAnimationsSpritePoints","isSamePoint","point1","point2","allDirectionSpritesHaveSamePointsAs","every","sprite1","sprite2","sprite1Point","hasPoint","getPoint","allSpritesHaveSamePointsAs","copySpritePolygons","setCollisionMaskAutomatic","isCollisionMaskAutomatic","getCustomCollisionMask","originalPolygon","push_back","copyAnimationsSpriteCollisionMasks","haveSameCollisionMasks","sprite1CollisionMask","sprite2CollisionMask","sprite1Polygon","polygon1","polygon2","polygon1Vertices","getVertices","polygon2Vertices","get_x","get_y","isSamePolygon","allDirectionSpritesHaveSameCollisionMasksAs","allSpritesHaveSameCollisionMasksAs","deleteSpritesFromAnimation","spritePtrs","spritesToDelete","removeSprite","duplicateSpritesInAnimation","spritesToDuplicate","spriteToDuplicate","newSprite","setImageName","getImageName","addSprite","moveSprite","mangleName","caseSensitiveSlug","getFreeFunctionCodeNamespace","eventsFunction","codeNamespacePrefix","loadProjectEventsFunctionsExtensions","eventsFunctionCodeWriter","getEventsFunctionsExtensionsCount","loadProjectEventsFunctionsExtension","getEventsFunctionsExtensionAt","skipCodeGeneration","eventsFunctionsExtension","generateEventsFunctionExtension","addNewExtension","PlatformExtension","declareExtension","codeGenerationContext","extensionIncludeFiles","getEventsFunctionsCount","getEventsFunctionAt","isExtensionLifecycleEventsFunction","functionName","getIncludeFileFor","getExtensionIncludeFiles","getEventsBasedBehaviors","eventsBasedBehavior","declareBehaviorMetadata","eventsFunctionsContainer","getEventsFunctions","codeNamespace","getBehaviorFunctionCodeNamespace","includeFile","setIncludeFile","addIncludeFile","behaviorMethodMangledNames","MapStringString","declareBehaviorPropertiesInstructionAndExpressions","eventsFunctionMangledName","set","instructionOrExpression","declareBehaviorInstructionOrExpressionMetadata","declareEventsFunctionParameters","isBehaviorLifecycleEventsFunction","setHidden","setPrivate","getCodeExtraInformation","setFunctionName","includeFiles","SetString","behaviorCodeGenerator","BehaviorCodeGenerator","code","generateRuntimeBehaviorCompleteCode","writeBehaviorCode","generateBehavior","generateFreeFunction","declareInstructionOrExpressionMetadata","addCodeOnlyParameter","codeExtraInformation","EventsFunctionsExtensionCodeGenerator","generateFreeEventsFunctionCompleteCode","writeFunctionCode","unloadProjectEventsFunctionsExtensions","removeExtension","unloadProjectEventsFunctionsExtension","isAnEventFunctionMetadata","getFunctionNameFromType","parts","getFreeEventsFunctionType","getParametersIndexOffset","isEventsBasedBehaviorMethod","ViewPosition","initialViewX","initialViewY","instancesEditorSettings","viewX","viewY","toSceneCoordinates","x","y","_width","_height","abs","zoomFactor","tmp","cos","viewRotation","PI","sin","toCanvasCoordinates","resize","scale","isDialogOpen","body","document","activeEl","activeElement","mainFrame","querySelector","isInMainframe","contains","reservedShortcuts","isUserTyping","closest","getKeyTypeFromCode","getShortcutMetadataFromEvent","shortcutString","altKey","getShortcutStringFromEvent","isValidKey","keyType","ctrlOrCmdPressed","altPressed","isValidShortcutEvent","isReserved","isValid","useShortcutMap","defaultShortcuts","useKeyboardShortcuts","onRunCommand","shortcutMap","shortcutData","find","commandsList","handledByElectron","getShortcutDisplayName","keyCode","getKeyDisplayName","getElectronAccelerator","getElectronKeyString","ToolbarIcon","VariablesEditorDialog","onCancel","onEditObjectVariables","emptyExplanationMessage","emptyExplanationSecondMessage","variablesContainer","hotReloadPreviewButtonProps","onComputeAllVariableNames","onCancelChanges","useSerializableObjectCancelableEditor","serializableObject","cannotBeDismissed","commitVariableValueOnBlur","onSizeUpdated","properties","getProperties","onUpdateProperty","propertyNames","propertyDescription","choices","getAllBehaviorNames","getBehavior","getTypeName","CheckeredBackground","theme","backgroundStyle","background","imagePreview","backgroundFilter","bottom","defaultState","eventsFunctionsExtensionsError","reloadProjectEventsFunctionsExtensions","getEventsFunctionsExtensionWriter","getEventsFunctionsExtensionOpener","ensureLoadFinished","getIncludeFileHashs","EventsFunctionsExtensionsContext","InfoBar","screenType","touchScreenMessage","action","listAllExamples","getExample","exampleShortHeader","getUserExampleShortHeaders","authorId","addButton","DropTarget","makeDropTarget","reactDndInstructionType","InstructionsList","addButtonLabel","areConditions","instrsList","onAddNewInstruction","onPasteInstructions","onMoveToInstruction","onMoveToInstructionsList","onInstructionClick","onInstructionContextMenu","onInstructionDoubleClick","onAddInstructionContextMenu","onParameterClick","selection","renderObjectThumbnail","canPaste","setCanPaste","addNewInstruction","pasteInstructions","instructionContext","indexInList","isInstructionSelected","domEvent","onAddNewSubInstruction","onPasteSubInstructions","onMoveToSubInstruction","onMoveToSubInstructionsList","onSubInstructionClick","onSubInstructionDoubleClick","onSubInstructionContextMenu","onAddSubInstructionContextMenu","onSubParameterClick","instructionsListContext","addButtonDefaultLabel","canDrop","draggedItem","drop","connectDropTarget","isOver","onPointerEnter","hasClipboardConditions","hasClipboardActions","onPointerLeave","stopPropagation","removeTag","selectedTag","noTagLabel","getAllTags","onEditTags","editTagsLabel","allTags","footerMenuItems","newTags","from","getTagsFromString","tagsString","getStringFromTags","getObjectGroupListItemKey","getObjectListItemKey","getObjectOrObjectGroupListItemValue","objectOrObjectGroupName","getInstructionListItemKey","getInstructionListItemValue","instructionType","getSubheaderListItemKey","subheader","popover","paddingBottom","InlinePopover","startSentinel","endSentinel","MouseEvent","tabIndex","addNode","currentNode","newNode","splitPercentage","second","first","replaceNode","oldNode","defaultToolbarControls","renderMosaicWindowPreview","MosaicWindow","toolbarControls","renderPreview","EditorMosaic","mosaicNode","initialNodes","openEditor","editorName","editors","limitToOneSecondaryEditor","editor","openedEditorNames","getLeaves","secondaryEditorName","_persistNodes","_onChange","onPersistNodes","mosaicRootClassName","renderTile","noTitleBar","renderEditor","Rectangle","rectangle","Toolbar","toolbarGroupStyle","ToolbarGroup","closeableTabSizeOverrides","closeButtonWidth","getRootClassNames","eventsSheetRootClassName","tableRootClassName","getMuiOverrides","tabTextColor","tabBackgroundColor","inputBorderBottomColor","appBarBackgroundColor","iconColor","MuiTypography","h6","fontWeight","MuiInput","underline","borderBottom","MuiAppBar","colorPrimary","MuiIconButton","MuiListItemIcon","MuiListItem","secondaryAction","gutters","MuiListItemSecondaryAction","MuiTabs","MuiTab","textColorPrimary","paddingTop","MuiButtonBase","MuiTableCell","sizeSmall","MuiDialogTitle","MuiDialogContent","MuiFormControl","marginDense","MuiCheckbox","MuiButton","borderRadius","MuiAccordion","MuiAccordionSummary","expandIcon","MuiAccordionDetails","getThemeMode","contrastText","light","lighten","main","dark","darken","createGdevelopTheme","rootClassNameIdentifier","paletteType","palette","canvasColor","valid","separatorColor","closableTabs","containerBackgroundColor","selectedBackgroundColor","selectedTextColor","imageThumbnail","selectedBorderColor","borderColor","frameBorderColor","itemsBackgroundColor","groupBackgroundColor","groupTextColor","deprecatedGroupTextColor","selectedRightIconColor","errorTextColor","warningTextColor","selectedErrorBackgroundColor","selectedWarningBackgroundColor","logo","muiThemeOptions","typography","common","black","white","paper","default","hint","overrides","borderLeftStyle","borderLeftWidth","commandAreas","GENERAL","IDE","PROJECT","SCENE","EVENTS","QUIT_APP","area","displayText","OPEN_PROJECT_MANAGER","OPEN_PROFILE","OPEN_GAMES_DASHBOARD","LAUNCH_NEW_PREVIEW","LAUNCH_DEBUG_PREVIEW","LAUNCH_NETWORK_PREVIEW","HOT_RELOAD_PREVIEW","OPEN_START_PAGE","CREATE_NEW_PROJECT","OPEN_PROJECT","SAVE_PROJECT","SAVE_PROJECT_AS","CLOSE_PROJECT","EXPORT_GAME","OPEN_RECENT_PROJECT","OPEN_COMMAND_PALETTE","ghost","OPEN_PROJECT_PROPERTIES","OPEN_PROJECT_LOADING_SCREEN","OPEN_PROJECT_VARIABLES","OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG","OPEN_PROJECT_RESOURCES","OPEN_SEARCH_EXTENSIONS_DIALOG","OPEN_LAYOUT","OPEN_EXTERNAL_EVENTS","OPEN_EXTERNAL_LAYOUT","OPEN_EXTENSION","OPEN_SCENE_PROPERTIES","OPEN_SCENE_VARIABLES","OPEN_OBJECTS_PANEL","OPEN_OBJECT_GROUPS_PANEL","OPEN_PROPERTIES_PANEL","TOGGLE_INSTANCES_PANEL","TOGGLE_LAYERS_PANEL","SCENE_EDITOR_UNDO","noShortcut","SCENE_EDITOR_REDO","DELETE_INSTANCES","TOGGLE_WINDOW_MASK","TOGGLE_GRID","OPEN_SETUP_GRID","EDIT_LAYER_EFFECTS","EDIT_LAYER","EDIT_OBJECT","EDIT_OBJECT_BEHAVIORS","EDIT_OBJECT_EFFECTS","EDIT_OBJECT_VARIABLES","EDIT_OBJECT_GROUP","ADD_STANDARD_EVENT","ADD_SUBEVENT","ADD_COMMENT_EVENT","CHOOSE_AND_ADD_EVENT","EVENTS_EDITOR_UNDO","EVENTS_EDITOR_REDO","DELETE_SELECTION","SEARCH_EVENTS","OPEN_EXTENSION_SETTINGS","currentTouchCallbackEvent","clientX","clientY","capture","onTouchStart","touches","getClientXY","onTouchMove","touch","onTouchEnd","useProjectToUnserialize","serializedElementRef","serializeTo","unserializeFrom","NewPreviewIcon","PlayCircleFilledIcon","HotReloadPreviewIcon","OfflineBoltIcon","HotReloadPreviewButton","launchProjectDataOnlyPreview","hasPreviewsRunning","swatch","boxShadow","ColorPicker","_swatch","displayColorPicker","handleClick","handleClose","displayedColor","listAllShowcasedGames","GDevelopGameApi","gamesShowcaseUrl","showcasedGames","registerGame","gameId","gameName","authorName","updateGame","patch","getGame","deleteGame","getGames","enumerateLayouts","getLayoutsCount","getLayoutAt","enumerateExternalEvents","getExternalEventsCount","getExternalEventsAt","enumerateExternalLayouts","getExternalLayoutsCount","getExternalLayoutAt","enumerateEventsFunctionsExtensions","filterProjectItemsList","lowercaseSearchText","item","transformTagsAsStringToTagsAsArray","dataWithTags","isCompatibleWithExtension","extensionShortHeader","getExtensionsRegistry","extensionsRegistry","extensionShortHeaders","getExtensionHeader","headerUrl","getExtension","extensionHeader","getUserExtensionShortHeaders","filterSearchItems","searchItems","startTime","performance","filteredSearchItems","isTagContainerOnly","parentNodes","parentNode","totalTime","toFixed","useSearchItem","searchItemsById","getItemDescription","searchApiRef","searchResults","setSearchResults","suffledSearchItems","shuffle","terminate","newSearchApi","SearchApi","allIds","indexDocument","searchApi","discardSearch","search","partialSearchResultIds","partialSearchResults","iconBackground","IconContainer","createTree","allExpressions","tree","pathInTree","compact","update","groupInfo","existingGroupInfo","findInTree","instructionTreeNode","instructionOrGroup","searchResult","filterEnumeratedInstructionOrExpressionMetadataByScope","enumeratedInstructionOrExpressionMetadata","getNamespaceSeparator","oneColumnContainer","twoColumnsContainer","ConditionsActionsColumns","renderConditionsList","renderActionsList","leftIndentWidth","listAllTutorials","getObjectTutorialIds","getBehaviorTutorialIds","getInstructionTutorialIds","previewImagePixelated","imageRendering","getPixelatedImageRendering","contentContainer","imagePreviewContainer","touchAction","spriteThumbnailImage","pointerEvents","loadStateFrom","newProps","errored","imageSource","ImagePreview","imageWidth","imageHeight","imageZoomFactor","handleImageError","handleImageLoaded","imgElement","naturalWidth","naturalHeight","clientHeight","onSize","zoomBy","imageZoomFactorDelta","zoomTo","previewBorderColor","bounds","contentRect","measureRef","containerWidth","containerHeight","renderOverlay","fixedHeight","imageLoaded","imagePositionTop","imagePositionLeft","imageStyle","visibility","asImageResource","isSmooth","resourceIsSmooth","frameStyle","border","overlayStyle","dir","onWheel","deltaY","onError","onLoad","offsetTop","offsetLeft","ElectronMenuImplementation","template","menuTemplate","Menu","browserWindow","getCurrentWindow","menu","buildFromTemplate","popup","async","SubMenuItem","menuOpen","setMenuOpen","anchorElement","useRef","setAnchorElement","useCallback","Fragment","MenuItem","TransitionComponent","Fade","submenu","MaterialUIMenuImplementation","_onClose","visible","Divider","ListItemIcon","ListItemText","MaterialUIContextMenu","anchorX","anchorY","menuImplementation","anchorPosition","anchorReference","getMenuProps","ElectronContextMenu","showMenu","ElectronContextMenuWrapper","forwardRef","electronContextMenu","useImperativeHandle","ResourceThumbnail","ImageThumbnail","selectable","onSelect","selectorContainer","resourceThumbnail","ResourceSelectorWithThumbnail","UnsavedChangesContext","hasUnsavedChanges","sealUnsavedChanges","UnsavedChangesContextProvider","Provider","handle","disabledHandle","handleColor","DragHandle","SortableHandle","htmlColor","EmptyPlaceholder","whiteSpace","renderButtons","grid","ListSearchResults","getSearchItemUniqueId","renderSearchItem","cachedHeightsForWidth","cachedHeights","onItemHeightComputed","searchItem","getRowHeight","renderRow","rowIndex","recomputeGridSize","el","columnCount","columnWidth","rowHeight","rowCount","cellRenderer","chip","UserPublicProfileChip","user","isClickable","openUserPublicProfile","PublicProfileContext","username","CommandManager","CommandsContextProvider","useRefInit","getInitialSelection","selectedInstructions","selectedEvents","selectedInstructionsLists","getSelectedEvents","eventContext","getSelectedEventContexts","getSelectedInstructions","getSelectedInstructionsContexts","getSelectedInstructionsListsContexts","isEventSelected","hasEventSelected","hasInstructionSelected","hasSelectedAtLeastOneCondition","hasInstructionsListSelected","hasSomethingSelected","clearSelection","selectEvent","existingSelection","selectInstruction","InstructionOrExpressionSelector","_scrollView","_selectedItem","initialInstructionTypePath","instructionsInfoTree","_searchBar","searchPlaceholderObjectName","searchPlaceholderIsCondition","useSubheaders","displayedInstructionsList","instructionsInfo","hasResults","onSubmitSearch","renderInstructionOrExpressionListItem","instructionOrExpressionMetadata","selectedValue","renderInstructionOrExpressionTree","initiallyOpenedPath","selectedItemRef","getDeprecatedBehaviorsInformation","getExperimentalObjects","getExtraObjectsInformation","getExtraInstructionInformation","DismissableTutorialMessage","tutorialId","preferences","tutorials","TutorialContext","tutorial","thumbnailUrl","setExtensionInformation","getAuthor","setExtensionHelpPath","getHelpPath","setIconUrl","getIconUrl","declareExtensionDependencies","getAllDependencies","dependency","addDependency","copyFrom","getExtensionIconUrl","generatedBehavior","BehaviorJsImplementation","enumeratedProperties","enumerateNamedPropertyDescriptorsList","getPropertyDescriptors","updateProperty","behaviorContent","enumeratedProperty","addChild","propertyType","setStringValue","setDoubleValue","setBoolValue","behaviorProperties","MapStringPropertyDescriptor","newProperty","toGdPropertyDescriptor","getOrCreate","hasChild","getChild","getStringValue","getDoubleValue","getBoolValue","initializeContent","addBehavior","BehaviorsSharedData","setObjectType","getObjectType","EventsFunctionsExtension","functionType","getFunctionType","EventsFunction","Expression","addExpression","StringExpression","addStrExpression","Condition","addCondition","getSentence","addAction","addScopedCondition","addScopedAction","addObjectAndBehaviorParameters","addParameter","setExtraInfo","getterName","getBehaviorPropertyGetterName","setterName","getBehaviorPropertySetterName","propertyLabel","EventsBasedBehavior","getPropertyExpressionName","getPropertyConditionName","useStandardRelationalOperatorParameters","getPropertyActionName","useStandardOperatorParameters","setManipulatedType","setGetter","parameter","isCodeOnly","isOptional","setParameterLongDescription","InstancesSelection","getSelectedInstances","compare","multiselect","layersVisibility","isInstanceSelected","unselectInstance","getLayer","selectInstance","splice","getObjectName","layerName","RaisedButtonWithSplitMenu","getEditorConfiguration","editorConfigurations","registerEditorConfiguration","editorConfiguration","createNewObject","castToObjectType","getDefaultObjectJsImplementationPropertiesEditor","ObjectPropertiesEditor","asObjectJsImplementation","clone","release","SpriteEditor","SpriteObject","asSpriteObject","TiledSpriteEditor","TiledSpriteObject","asTiledSpriteObject","PanelSpriteEditor","PanelSpriteObject","asPanelSpriteObject","TextEditor","TextObject","asTextObject","ShapePainterEditor","ShapePainterObject","asShapePainterObject","EmptyEditor","TextEntryObject","asTextEntryObject","ParticleEmitterEditor","ParticleEmitterObject","asParticleEmitterObject","getSubscriptionPlans","planId","monthlyPriceInEuros","smallDescription","descriptionBullets","extraDescription","getUserUsages","GDevelopUsageApi","getUserLimits","getUserSubscription","changeUserSubscription","newSubscriptionDetails","getRedirectToCheckoutUrl","email","ItemRow","prevProps","editingName","itemName","isBold","errorStatus","onItemSelected","hideMenuButton","scaleUpItemIconWhenSelected","connectIconDragSource","onRename","itemStyle","ListIcon","borderTop","DropIndicator","SortableVirtualizedItemList","DragSourceAndDropTarget","makeDragSourceAndDropTarget","reactDndType","_list","forceUpdateGrid","selectedItems","getItemThumbnail","erroredItems","isItemBold","onEditItem","renamedItem","getItemName","nameBeingEdited","newName","fullList","addNewItemLabel","onAddNewItem","onMoveSelectionToItem","canMoveSelectionToItem","rowRenderer","beginDrag","canDrag","connectDragSource","canDragOnlyIcon","dropTarget","_renderItemRow","defaultStyles","Toggle","toggled","onToggle","AddListItem","SearchListItem","SortableVariableRow","SortableElement","VariableRow","SortableVariablesListBody","SortableContainer","muiName","VariablesList","nameErrors","selectedVariables","allVariableNames","_selectVariable","variableAndName","addToSelection","copySelection","CLIPBOARD_KIND","getSelection","variable","serializedVariable","paste","inheritedVariablesContainer","clipboardContent","variablesContent","variableContent","extractStringProperty","extractObjectProperty","newVariable","Variable","insert","deleteSelection","otherVariableAndName","removeRecursively","_updateOrDefineVariable","origin","String","setString","Number","setBool","_getVariableOrigin","parentVariable","depth","names","getAllChildrenNames","_renderVariableAndChildrenRows","getChildrenCount","getAtIndex","parentOrigin","arrayElement","isCollection","isPrimitive","onChangeValue","onResetToDefaultValue","onChangeType","newType","castTo","onChangeName","success","renameChild","rename","Structure","removeAtIndex","remove","onAddChild","pushNew","_renderStructureChildren","_renderArrayChildren","showHandle","showSelectionCheckbox","isSelected","undefinedVariableNames","variableName","containerInheritedVariablesTree","getNameAt","containerVariablesTree","allVariables","onSortEnd","oldIndex","newIndex","move","helperClass","useDragHandle","lockToContainerEdges","onAdd","onCopy","onPaste","onDeleteSelection","hasSelection","hasClipboard","TreeTableRow","TreeTableCell","textOverflow","validatePackageName","packageName","getProjectPropertiesErrors","t","addError","extraExplanation","getPackageName","getVersion","displayProjectErrorsBox","showErrorBox","rawError","errorId","doNotReport","findAndLogProjectPreviewErrors","problems","WholeProjectRefactorer","findInvalidRequiredBehaviorProperties","problem","suggestedBehaviorNames","getBehaviorsWithType","getSourceObject","getExpectedBehaviorTypeName","getSourcePropertyName","getSourceBehaviorContent","GameRegistration","hideIfRegistered","hideLoader","onGameRegistered","setError","unavailableReason","setUnavailableReason","game","setGame","registrationInProgress","setRegistrationInProgress","acceptGameStatsEmailInProgress","setAcceptGameStatsEmailInProgress","detailsOpened","setDetailsOpened","detailsInitialTab","setDetailsInitialTab","loadGame","getProjectUuid","onRegisterGame","_onAcceptGameStatsEmail","GameRegistrationWidget","getGameStatsEmail","initialTab","onGameUpdated","updatedGame","onGameDeleted","iconText","SubscriptionCheckDialog","_closeDialog","sendSubscriptionCheckDismiss","sendSubscriptionCheckDialogShown","onChangeSubscription","SubscriptionChecker","_dialog","checkHasSubscription","dialog","useIsMounted","isMounted","searchUserPublicProfilesByUsername","searchString","getUserBadges","getUserPublicProfilesByIds","ids","getUserPublicProfile","errorHandler","componentStack","sendErrorMessage","ErrorFallbackComponent","stack","getIDEVersionWithHash","getArch","getPlatformName","getSystemVersion","getUserAgent","ErrorBoundary","FallbackComponent","optionalLazyRequire","moduleName","moduleLoaded","bodyRoot","AccordionHeader","alignSelf","AccordionBody","Accordion","costlyBody","TransitionProps","EventsSheetComponentWithoutHandle","_containerDiv","_keyboardShortcuts","KeyboardShortcuts","isActive","inlineEditing","editedInstruction","analyzedEventsContextResult","serializedEventsToExtract","shortcutCallbacks","onDelete","onCut","cutSelection","pasteEventsOrInstructions","onSearch","_toggleSearchPanel","onEscape","_closeSearchPanel","onUndo","undo","onRedo","redo","onZoomIn","onZoomEvent","onZoomOut","history","getHistoryInitialState","events","historyMaxSize","editedParameter","inlineEditingAnchorEl","inlineInstructionEditorAnchorEl","inlineEditingChangesMade","inlineEditingPreviousValue","showSearchPanel","searchFocusOffset","allEventsMetadata","textEditedEvent","_addStandardEvent","addNewEvent","_addCommentEvent","_eventSearcher","reset","_searchPanel","addSubEvents","canHaveSubEvents","getSubEvents","insertNewEvent","getEventsCount","_saveChangesToHistory","_eventsTree","forceEventsUpdate","_selectionCanHaveSubEvents","_selectionCanToggleDisabled","isExecutable","_addNewEvent","context","hasEventsSelected","insertTopOfSelection","insertions","selectedEvent","eventsList","newEvents","scrollToEvent","openEventTextDialog","editableEvents","filterEditableWithEventTextDialog","closeEventTextDialog","_buildInstructionContextMenu","canUndo","canRedo","_invertSelectedConditions","openAddInstructionContextMenu","openInstructionEditor","Instruction","moveSelectionToInstruction","destinationContext","moveSelectionToInstructionsList","destinationIndex","isTryingToDragAnInstructionIntoItsOwnNestedInstructions","containsSubInstructions","shouldCloneInstances","deleteEvents","multiSelect","shouldMultiSelect","updateToolbar","_buildEventContextMenu","pasteEvents","hasClipboardEvents","toggleDisabled","extractEventsToFunction","moveEventsIntoNewGroup","_openEventsContextAnalyzer","openEventContextMenu","eventContextMenu","openInstructionContextMenu","instructionContextMenu","openParameterEditor","parameterContext","closeParameterEditor","shouldCancel","setParameter","setDisabled","isDisabled","deleteInstructions","eventsRemover","EventsRemover","addEventToRemove","addInstructionToRemove","launch","_ensureFocused","copySelectionToClipboard","pasteEventsFromClipboardInSelection","pasteInstructionsFromClipboardInSelection","pasteInstructionsInInstructionsList","pasteInstructionsFromClipboardInInstructionsList","setInverted","isInverted","cb","saveToHistory","markSearchResultsDirty","newHistory","towards","factor","eventsContextAnalyzer","EventsContextAnalyzer","EventsList","insertEvent","toEventsContextResult","getEventsContext","_closeEventsContextAnalyzer","_replaceSelectionByGroupOfEvents","_replaceSelectionByEventsFunction","contexts","createNewInstructionForEventsFunction","asStandardEvent","getActions","groupEvent","asGroupEvent","setFolded","insertEvents","_ensureEventUnfolded","unfoldForEvent","_replaceInEvents","doReplaceInEvents","inputs","_searchInEvents","doSearchInEvents","_onEventMoved","_renderInstructionEditorDialog","newInstructionEditorDialog","Dialog","NewInstructionEditorMenu","NewInstructionEditorDialog","InstructionEditorDialog","isNewInstruction","closeInstructionEditor","onSubmit","ensureSingleOnceInstructions","openInstructionOrExpression","canPasteInstructions","containerDivElement","enumerateEventsMetadata","prevState","setToolbar","onAddStandardEvent","onAddSubEvent","canAddSubEvent","onAddCommentEvent","onAddEvent","canRemove","onOpenSettings","onToggleSearchPanel","saveChanges","onOpenExternalEvents","onOpenLayout","onCreateEventsFunction","eventSearcher","eventsSearchResultEvents","searchInEvents","replaceInEvents","goToPreviousSearchResult","goToNextSearchResult","clearSearchResults","onDragOver","onScroll","onEventClick","onEventContextMenu","onAddNewEvent","eventType","onEventMoved","showObjectThumbnails","eventsSheetHeight","searchPanel","onSearchInEvents","onReplaceInEvents","resultsCount","onGoToPreviousSearchResult","onCloseSearchPanel","onGoToNextSearchResult","eventsContextResult","serializedEvents","onCreate","components","DefaultField","mouse","MouseField","ObjectField","relationalOperator","RelationalOperatorField","operator","OperatorField","yesorno","YesNoField","trueorfalse","TrueFalseField","string","StringField","stringWithSelector","StringWithSelectorField","behavior","BehaviorField","scenevar","SceneVariableField","globalvar","GlobalVariableField","objectvar","ObjectVariableField","layer","LayerField","KeyField","musicfile","AudioResourceField","soundfile","videoResource","VideoResourceField","jsonResource","JsonResourceField","bitmapFontResource","BitmapFontResourceField","ColorExpressionField","police","joyaxis","forceMultiplier","ForceMultiplierField","sceneName","SceneNameField","layerEffectName","LayerEffectNameField","layerEffectParameterName","LayerEffectParameterNameField","objectEffectName","ObjectEffectNameField","objectEffectParameterName","ObjectEffectParameterNameField","objectPointName","ObjectPointNameField","objectAnimationName","ObjectAnimationNameField","inlineRenderers","renderInlineDefaultField","renderInlineForceMultiplier","renderInlineGlobalVariable","renderInlineSceneVariable","renderInlineObjectVariable","renderInlineKey","renderInlineMouse","renderInlineObjectWithThumbnail","renderInlineYesNo","renderInlineTrueFalse","renderInlineOperator","renderInlineRelationalOperator","userFriendlyTypeName","getParameterComponent","rawType","fieldType","renderInlineParameter","getUserFriendlyTypeName","_description","_longDescription","_allowedObjectType","allowedObjectType","errorTextIfInvalid","MissingParameterValue","loadedBitmapFonts","loadedFontFamilies","loadedTextures","invalidTexture","texture","baseTexture","scaleMode","NEAREST","onProgress","onComplete","loader","shared","allResources","totalCount","loadingCount","progressCallbackId","load","loadedResources","detach","_initializeTexture","LINEAR","resourceOptions","autoPlay","slugs","fullFilename","loadFontFace","loadedFace","fullUrl","focusButton","buttonRef","HTMLButtonElement","getElementsByTagName","filterOutCodeOnlyParameters","array","firstParameterIndex","filterVisibleParameters","lastRequiredIndex","lastProvidedIndex","arrayWithDefaults","getDefaultValue","lastParameterIndex","getVisibleParameterTypes","parameterTypes","functionArgs","VariableField","autocompletionVariableNames","updateAutocompletions","definedVariableNames","enumerateVariables","isValidName","uniq","onOpenDialog","contextType","renderVariableWithIcon","iconPath","enumerateEffectsMetadata","getExtensionEffectTypes","getEffectMetadata","effectMetadata","effectType","parametersSchema","parameterName","effect","getDoubleParameter","setDoubleParameter","getBooleanParameter","setBooleanParameter","getStringParameter","setStringParameter","isMarkedAsNotWorkingForObjects","sort","enumeratedEffectMetadata1","enumeratedEffectMetadata2","localeCompare","enumerateEffectNames","effectsContainer","getEffectsCount","getEffectAt","setEffectDefaultParameters","clearParameters","fetchTutorials","TutorialStateProvider","setTutorials","allTutorials","timeoutId","tutorialState","getInstructionMetadata","MetadataProvider","getConditionMetadata","getActionMetadata","findInstruction","useNewInstructionEditor","getChosenObjectState","discardInstructionTypeIfNotInObjectInstructions","chosenObjectInstructionsInfo","setType","chosenObjectName","chosenObjectInstructionsInfoTree","enumeratedInstructionMetadata","chooseInstruction","chooseObject","chooseObjectInstruction","setupInstructionParameters","setParametersCount","maybeBehaviorParameterIndex","maybeBehaviorParameterMetadata","isBehavior","allowedBehaviorType","behaviorNames","currentParameterValue","chipContainer","toNodeId","nodes","TagsTreeItems","tagsTreeNodes","newParentNodes","nodeId","onLabelClick","collapseIcon","MemoizedTagsTree","allItemsLabel","defaultExpanded","onNodeSelect","tagsTree","CategoryChooser","AssetStoreContext","authors","licenses","fetchAssetsAndFilters","setSearchText","getAssetShortHeaderSearchTerms","shortDescription","AssetStoreStateProvider","assetShortHeadersById","setAssetShortHeadersById","setFilters","setAuthors","setLicenses","assetStoreState","pixelatedImageRenderingValue","CSS","supports","ResourceFetcherContext","ResourceFetcherDialog","fetchedResources","onAbandon","hasErrors","erroredResources","useResourceFetcher","resourceFetcher","setProgress","isFetching","setIsFetching","setFetchedResources","setOnRetry","setOnAbandon","ensureResourcesAreFetched","getResourcesToFetch","someResourcesWereFetched","fetchResources","total","renderResourceFetcherDialog","roundPosition","pos","gridWidth","gridHeight","gridOffsetX","gridOffsetY","gridType","cellX","cellY","deltaX","roundPositionForResizing","prepareInstancesEditorSettings","gridColor","gridAlpha","snap","windowMask","cloneInstancesEditorSettings","allResourceKindsAndMetadata","fileExtensions","createNewResource","AudioResource","FontResource","VideoResource","JsonResource","BitmapFontResource","floor","random","GD_STARTUP_TIMES","drawerContent","findStorageProviderFor","storageProviders","fileMetadataAndStorageProviderName","storageProviderName","storageProvider","internalName","initialPreviewState","previewLayoutName","previewExternalLayoutName","isPreviewOverriden","overridenPreviewLayoutName","overridenPreviewExternalLayoutName","MainFrame","useStateWithCallback","createDialogOpen","currentProject","currentFileMetadata","editorTabs","getEditorTabsInitialState","snackMessage","snackMessageOpen","updateStatus","openFromStorageProviderDialogOpen","saveToStorageProviderDialogOpen","gdjsDevelopmentWatcherEnabled","chooseResourceOptions","setChooseResourceOptions","onResourceChosen","setOnResourceChosen","_previewLauncher","isLoadingProject","setIsLoadingProject","isSavingProject","setIsSavingProject","projectManagerOpen","openProjectManager","introDialogOpen","openIntroDialog","languageDialogOpen","openLanguageDialog","helpFinderDialogOpen","openHelpFinderDialog","platformSpecificAssetsDialogOpen","openPlatformSpecificAssetsDialog","aboutDialogOpen","openAboutDialog","profileDialogInitialTab","setProfileDialogInitialTab","profileDialogOpen","openProfileDialog","preferencesDialogOpen","openPreferencesDialog","subscriptionDialogOpen","openSubscriptionDialog","exportDialogOpen","openExportDialog","previewLoading","setPreviewLoading","previewState","setPreviewState","commandPaletteRef","eventsFunctionsExtensionsContext","previewDebuggerServer","getPreviewDebuggerServer","usePreviewDebuggerServerWatcher","previewDebuggerIds","hotReloadLogs","clearHotReloadLogs","useOpenConfirmDialog","ensureInteractionHappened","renderOpenConfirmDialog","eventsFunctionsExtensionsState","createDialogInitialTab","setCreateDialogInitialTab","renderExportDialog","renderCreateDialog","renderPreviewLauncher","getStorageProviderOperations","getStorageProvider","integratedEditor","initialFileMetadataToOpen","introDialog","renderGDJSDevelopmentWatcher","renderMainMenu","openStartPage","_loadExtensions","getStartupTimesSummary","storageProviderOperations","openInitialFileMetadata","openFromFileMetadataWithStorageProvider","isDev","openProfileDialogWithTab","_showSnackMessage","_closeSnackMessage","openFromFileMetadata","openSceneOrProjectManager","newEditorTabs","editorTab","getCurrentTab","editorRef","setEditorToolbar","extensionsLoader","loadAllExtensions","getNotNullTranslationFunction","loadingResults","successLoadingResults","loadingResult","failLoadingResults","dangerous","dangerousLoadingResults","useDiscordRichPresence","closeProject","closeProjectTabs","loadFromProject","burstAllUrlsCache","setProjectFile","fileIdentifier","loadFromSerializedProject","serializedProject","timePromise","newProject","ProjectHelper","createNewGDJSProject","time","hasAutoSave","onGetAutoSave","onOpen","getOpenErrorMessage","delay","canOpenAutosave","verifyProjectContent","errorMessage","closeApp","quit","toggleProjectManager","editorToolbar","isCurrentTab","setPreviewedLayout","autosaveProjectIfNeeded","onAutoSaveProject","_launchPreview","networkPreview","hotReload","projectDataOnlyExport","fullLoadingScreen","previewLauncher","notifyPreviewWillStart","layoutName","externalLayoutName","hasLayoutNamed","getLayout","externalLayout","hasExternalLayoutNamed","getExternalLayout","launchPreview","launchNewPreview","launchHotReloadPreview","launchNetworkPreview","launchProjectWithLoadingScreenPreview","openLayout","openEventsEditor","openSceneEditor","sceneEditorOptions","projectItemName","renderEditorContainer","renderSceneEditorContainer","eventsEditorOptions","renderEventsEditorContainer","dontFocusTab","tabsWithSceneEditor","openEditorTab","tabsWithSceneAndEventsEditors","openExternalEvents","renderExternalEventsEditorContainer","openExternalLayout","renderExternalLayoutEditorContainer","openEventsFunctionsExtension","initiallyFocusedFunctionName","initiallyFocusedBehaviorName","extraEditorProps","renderEventsFunctionsExtensionEditorContainer","renderStartPageContainer","closable","_openDebugger","renderDebuggerEditorContainer","openDebugger","launchDebuggerAndPreview","hasEventsFunctionsExtensionNamed","getEventsFunctionsExtension","foundTab","getEventsFunctionsExtensionEditor","selectEventsFunctionByName","changeCurrentTab","_onProjectItemModified","createNewExtension","insertNewEventsFunctionsExtension","setFullName","setDescription","insertEventsFunction","openCreateDialog","onOpenTutorials","onOpenGamesShowcase","openOpenFromStorageProviderDialog","chooseProjectWithStorageProviderPicker","onOpenWithPicker","chooseProject","hiddenInOpenDialog","openSaveToStorageProviderDialog","saveProjectAsWithStorageProvider","saveUiSettings","onSaveProjectAs","wasSaved","saveProjectAs","hiddenInSaveDialog","saveProject","onSaveProject","saveStartTime","askToCloseProject","_onEditorTabActive","forceUpdateEditor","_onCloseAllEditorTabs","closeAllEditorTabs","setUpdateStatus","notificationTitle","getUpdateNotificationTitle","notificationBody","getUpdateNotificationBody","Notification","onclick","launchCommand","useMainFrameCommands","previewEnabled","onOpenProjectManager","allowNetworkPreview","canDoNetworkPreview","onLaunchPreview","onHotReloadPreview","onLaunchDebugPreview","onLaunchNetworkPreview","onOpenStartPage","onCreateProject","onOpenProject","onCloseApp","onCloseProject","onExportGame","onOpenExternalLayout","onOpenEventsFunctionsExtension","onOpenCommandPalette","onOpenProfile","onOpenGamesDashboard","showLoader","onChooseProject","onOpenRecentFile","onExportProject","onOpenDebugger","onOpenAbout","onOpenPreferences","onOpenLanguage","ModalProps","keepMounted","displayRightCloseButton","onAddLayout","insertNewLayout","updateBehaviorsSharedData","onAddExternalLayout","insertNewExternalLayout","onAddEventsFunctionsExtension","onAddExternalEvents","hasExternalEventsNamed","insertNewExternalEvents","onInstallExtension","eventsFunctionsExtensionName","closeEventsFunctionsExtensionTabs","onDeleteLayout","closeLayoutTabs","removeLayout","onDeleteExternalLayout","closeExternalLayoutTabs","removeExternalLayout","onDeleteEventsFunctionsExtension","removeEventsFunctionsExtension","onDeleteExternalEvents","externalEvents","closeExternalEventsTabs","removeExternalEvents","onRenameLayout","oldName","showWarningBox","delayToNextTick","onRenameExternalLayout","onRenameEventsFunctionsExtension","isExtensionNameTaken","Project","validateName","renameEventsFunctionsExtension","onRenameExternalEvents","getExternalEvents","onOpenResources","renderResourcesEditorContainer","openResources","onOpenPlatformSpecificAssets","onReloadEventsFunctionsExtensions","freezeUpdate","showProjectIcons","hasProject","exportProject","requestUpdate","simulateUpdateDownloaded","releaseName","simulateUpdateAvailable","onPreviewWithoutHotReload","onNetworkPreview","setPreviewOverride","isPreviewEnabled","hideLabels","getEditors","getCurrentTabIndex","closeEditorTab","_onCloseEditorTab","onCloseOthers","closeOtherEditorTabs","_onCloseOtherEditorTabs","onCloseAll","onActivated","canOpen","onOpenHelpFinder","onOpenLanguageDialog","onLoadEventsFunctionsExtensions","onDeleteResource","onRenameResource","autoHideDuration","ContentProps","resetProjectUuid","onExport","onChooseResources","languageChanged","reloadBuiltinExtensions","onChooseProvider","onCreateNewProject","shouldPrompt","logs","onLaunchNewPreview","getUpdateStatusLabel","getUpdateButtonLabel","canDownloadUpdate","d","thumbnailContainerStyle","SPRITE_SIZE","spriteThumbnail","checkboxContainer","normalBorderColor","containerStyle","check","useDebounce","inputsRef","leading","trailing","ExtensionStoreContext","fetchExtensionsAndFilters","getExtensionSearchTerms","ExtensionStoreStateProvider","extensionShortHeadersByName","setExtensionShortHeadersByName","extensionRegistry","sortedTags","tag1","tag2","extensionStoreState","installExtension","serializedExtension","addSerializedExtensionsToProject","importExtension","eventsFunctionsExtensionOpener","chooseEventsFunctionExtensionFile","pathOrUrl","readEventsFunctionExtensionFile","sanitizeObjectName","trimmedObjectName","prefixedObjectName","m","installResource","serializedResource","originalResourceName","resourceFileUrl","resourceOriginName","resourceOriginIdentifier","existingResourceNameFromSameOrigin","getResourceNameWithOrigin","existingResourceNameWithSameFile","getResourceNameWithFile","setOrigin","addAssetToProject","asset","objectNewNames","createdObjects","objectAssets","objectAsset","originalName","insertNewObject","customization","isBadBehaviorMetadata","addNewBehavior","getContent","GroupEvent","EventsRefactorer","replaceStringInEvents","renameObjectInEvents","getRequiredBehaviorsFromAsset","uniqBy","extensionVersion","filterMissingExtensions","requiredExtensions","loadedExtensionNames","getRequiredExtensionsForEventsFromAsset","extensions","filterMissingBehaviors","requiredBehaviors","downloadExtensions","extensionNames","serializedExtensions","newEventsFunctionsExtension","installAsset","missingBehaviors","missingExtensions","output","ScenePropertiesDialog","_onApply","setWindowDefaultTitle","windowTitle","setStopSoundsOnStartup","shouldStopSoundsOnStartup","setBackgroundColor","getWindowDefaultTitle","stopSoundsOnStartup","getBackgroundColorRed","getBackgroundColorGreen","getBackgroundColorBlue","propertiesEditors","getAllBehaviorSharedDataNames","sharedDataContent","getBehaviorSharedData","behaviorSharedData","getSharedDataInstance","isNullPtr","propertiesSchema","propertiesMapToSchema","onEditVariables","onOpenMoreSettings","getVariables","_commands","getNamedCommand","getAllNamedCommands","init","instanceRef","newInstance","EventsEditorContainer","getEvents","ObjectSelector","noGroups","rest","objectAndGroups","objects","ObjectsRenderingService","groups","getObjectsAndGroupsDataSource","hasValidChoice","makeRenderer","rotation","getAngle","getParameterValueOrDefault","isPotentiallyStringType","isPotentiallyNumberType","getExtensionPrefix","enumerateExpressionMetadataMap","expressions","exprMetadata","isShown","getSmallIconFilename","enumerateFreeExpressions","returnNumber","returnString","getAllStrExpressions","getAllExpressions","enumerateObjectExpressions","extensionAndObjectMetadata","getExtensionAndObjectMetadata","objectsExpressions","getAllStrExpressionsForObject","getAllExpressionsForObject","enumerateBehaviorExpressions","extensionAndBehaviorMetadata","getExtensionAndBehaviorMetadata","getAllStrExpressionsForBehavior","getAllExpressionsForBehavior","enumerateAllExpressions","behaviorsExpressions","freeExpressions","filterExpressions","exactMatch","unshift","favorExactMatch","enumeratedExpression","compareString","searchTextIndex","fuzzyFilter","initiallyOpenedKey","restOfInitiallyOpenedPath","instructionInformation","groupOfInstructionInformation","isVisible","ExpressionParametersEditor","ParameterComponent","onChangeParameter","isValidIdentifier","enumerateVariableAndChildrenNames","isTopLevel","isFullNameValid","enumeratedVariable","flatMap","childName","fill","editorOpen","sourceSpec","monitor","getItem","targetSpec","didDrop","InnerDragSourceAndDropTarget","DragSource","connect","dragSource","shallow","eventsCount","extractNumberProperty","conditionsCount","actionsCount","actionsList","conditionsList","eventsListContent","extractArrayProperty","actionsListContent","conditionsListContent","insertInstructions","hover","InnerDropTarget","extensionEvents","getAllEvents","emptyContainer","parametersContainer","invertToggle","isParameterVisible","InstructionParametersEditor","_firstVisibleField","isDirty","_openExtension","getExtensionAndConditionMetadata","getExtensionAndActionMetadata","_getVisibleParametersCount","noHelpButton","_renderEmpty","helpPage","instructionExtraInformation","tutorialIds","parameterFieldIndex","parameterMetadataType","ParameterRenderingService","isFirstVisibleParameterField","labelPosition","SelectColumns","columns","getColumns","columnName","columnsRenderer","undoHistory","redoHistory","maxSize","newUndoHistory","newCurrent","setupFunctionFromEvents","setFunctionType","Action","eventsContext","objectOrGroupNames","getReferencedObjectOrGroupNames","objectNames","getObjectNames","objectOrGroupName","getObjectGroupByName","parameterGroups","referencedObjectOrGroupName","parameterGroupNames","parameterObjectNames","newParameter","getBehaviorNamesOfObjectOrGroup","validateEventsFunctionName","validateExtensionName","validateExtensionNameUniqueness","validateEventsFunctionNameUniqueness","hasEventsFunctionNamed","canCreateEventsFunction","functionHasLotsOfParameters","getExtraInfoArray","extraInfoJson","EventsFunctionParametersEditor","longDescriptionShownIndexes","_addParameter","onParametersUpdated","_removeParameter","removeFromVectorParameterMetadata","_addLongDescription","_removeLongDescription","setLongDescription","_moveParameters","onMoveBehaviorEventsParameter","isDone","swapInVectorParameterMetadata","onMoveFreeEventsParameter","_setStringSelectorExtraInfo","newExtraInfo","freezeParameters","isParameterDisabled","isParameterDescriptionAndTypeShown","isParameterLongDescriptionShown","parametersIndexOffset","validateParameterName","extraInfo","ObjectTypeSelector","allowedObjectTypes","BehaviorTypeSelector","enumerateBehaviorsMetadata","valueIsListed","defaultName","getDefaultName","filterEnumeratedBehaviorMetadata","StringArrayEditor","updateExtraInfo","flexSrink","getSentenceErrorText","sentence","missingParameters","expectedString","getFullNameHintText","getDescriptionHintText","EventsFunctionPropertiesEditor","freezeEventsFunctionType","onConfigurationUpdated","renderConfigurationHeader","setSentence","CloseButton","mosaicActions","mosaicWindowActions","getPath","EventsFunctionsExtensionEditorContainer","_onBehaviorEdited","previewWillStart","eventsFunctionName","onBehaviorEdited","ObjectGroupEditorDialog","ResourceStoreContext","fetchResourcesAndFilters","getResourceSearchTerms","ResourceStoreStateProvider","resourcesByUrl","setResourcesByUrl","resourceStoreState","BoxSearchResults","baseSize","ceil","columnIndex","viewBox","stroke","strokeWidth","fillRule","cx","cy","ExternalEventsEditorContainer","externalPropertiesDialogOpen","saveExternalProperties","externalProps","setAssociatedLayout","openExternalPropertiesDialog","getAssociatedLayoutName","getAssociatedLayout","helpTexts","ExternalPropertiesDialog","initialLayoutName","selectedLayoutName","setSelectedLayoutName","layoutNames","helpText","ExternalLayoutEditorContainer","getAssociatedEditorSettings","getInstancesEditorSettings","initialInstances","getInitialInstances","getInitialInstancesEditorSettings","initialMosaicEditorNodes","initialMosaicEditorNodesSmallWindow","SceneEditor","openObjectsList","editorMosaic","showObjectsListInfoBar","openProperties","showPropertiesInfoBar","openObjectGroupsList","toggleInstancesList","showInstancesInfoBar","toggleLayersList","showLayersInfoBar","toggleWindowMask","toggleGrid","openSetupGrid","setupGridOpen","openSceneProperties","scenePropertiesDialogOpen","openObjectEditor","instancesSelection","hasSelectedInstances","selectedInstanceObjectName","editObjectByName","editLayerEffects","editedLayer","editedLayerInitialTab","editLayer","editInstanceVariables","variablesEditedInstance","editLayoutVariables","layoutVariablesDialogOpen","editObject","editedObject","editedObjectWithContext","editedObjectInitialTab","editGroup","editedGroup","setInstancesEditorSettings","forceRemount","_onObjectSelected","selectedObjectName","selectedObjectNames","_createNewObjectAndInstanceUnderCursor","newObjectInstanceSceneCoordinates","getLastCursorSceneCoordinates","_objectsList","newObjectDialogOpen","_onAddInstanceUnderCursor","objectSelected","_addInstance","addInstances","_onInstancesAdded","infoBarDetails","onInstanceAdded","additionalWorkInfoBar","showAdditionalWorkInfoBar","_onInstancesSelected","forceUpdatePropertiesEditor","_onInstanceDoubleClicked","_onInstancesMoved","_onInstancesResized","_onInstancesRotated","_onSelectInstances","centerView","selectInstances","centerViewOn","_addInstanceForNewObject","newObjectName","_onObjectCreated","onObjectAdded","_onRemoveLayer","done","layerRemoveDialogOpen","layerRemoved","onCloseLayerRemoveDialog","doRemove","newLayer","unselectInstancesOnLayer","removeAllInstancesOnLayer","moveInstancesToLayer","forceUpdateLayersList","_onRenameLayer","_onDeleteObject","answer","unselectInstancesOfObject","globalObjectOrGroupRemoved","objectOrGroupRemovedInLayout","_canObjectOrGroupUseNewName","_onRenameEditedObject","_onRenameObject","globalObjectOrGroupRenamed","objectOrGroupRenamedInLayout","_onDeleteGroup","_onRenameGroup","isLocked","removeInstance","clearHighlightedInstance","setZoomFactor","zoomIn","zoomOut","_onContextMenu","useLastCursorPosition","serializedSelection","getLastContextMenuSceneCoordinates","instancesContent","serializedInstance","InitialInstance","insertInitialInstance","resetPersistentUuid","forceUpdateObjectsList","forceUpdateList","_layersList","forceUpdateInstancesList","_instancesList","_propertiesEditor","reloadResourcesFor","resourcesInUse","ResourcesInUseHelper","objectResourceNames","getAllImages","loadTextures","resetInstanceRenderersFor","_getAllObjectTags","tagsSet","_buildObjectTagsMenuTemplate","selectedObjectTags","layersListOpen","isGridShown","isWindowMaskShown","selectedInstances","onEditObjectByName","propertiesEditor","onEditLayerEffects","onEditLayer","onRemoveLayer","onRenameLayer","layersContainer","layersList","onSelectInstances","instancesList","onChangeInstancesEditorSettings","onInstancesAdded","onInstancesSelected","onInstanceDoubleClicked","onInstancesMoved","onInstancesResized","onInstancesRotated","wrappedEditorRef","pauseRendering","bind","onEditObject","onDeleteObject","canRenameObject","onObjectCreated","onObjectSelected","onRenameObject","onObjectPasted","onChangeSelectedObjectTags","getAllObjectTags","objectsList","globalObjectGroups","onEditGroup","onDeleteGroup","onRenameGroup","canRenameGroup","onOpenSceneProperties","onOpenSceneVariables","onEditObjectGroup","onUpdateBehaviorsSharedData","variablesEditedObject","shortenString","defaultProps","shouldBeHandledByPinch","targetTouches","PinchHandler","canvas","getZoomFactor","viewPosition","_lastPinchCenterX","_lastPinchCenterY","_startPinch","_onPinchMove","centerX","centerY","sceneDeltaX","_getZoomFactor","sceneDeltaY","_viewPosition","scrollBy","_setZoomFactor","_endPinch","unmount","_unregisterCanvasPinchDetector","onPinchStart","onPinchMove","onPinchEnd","lastPinch","dx","dy","distance","sqrt","p","date","newCenter","scaleChange","registerCanvasPinchDetector","getLayersCount","getLayerAt","flexContainer","FullSizeMeasurer","handleColumn","coordinateColumn","toolColumn","SpriteSelector","spriteObject","sameForAllAnimations","sameForAllSprites","chooseAnimation","chooseDirection","chooseSprite","setSameForAllAnimations","setSameForAllSprites","setSameForAllAnimationsLabel","setSameForAllSpritesLabel","ResourcesEditorContainer","SceneEditorContainer","timeFunction","fn","onResult","t0","promiseFn","t1","useInterval","savedCallback","setInterval","clearInterval","getTranslationFunction","i18nModule","ms","res","GamesShowcaseContext","fetchShowcasedGamesAndFilters","getShowcasedGameSearchTerms","showcasedGame","author","GamesShowcaseStateProvider","showcasedGamesByName","setShowcasedGamesByName","allShowcasedGames","gamesShowcaseState","ExampleStoreContext","fetchExamplesAndFilters","getExampleSearchTerms","example","ExampleStoreStateProvider","exampleShortHeadersById","setExampleShortHeadersById","allExamples","exampleShortHeaders","ExplanationHeader","DoneFooter","renderGameButton","SetupExportHeader","exportState","updateExportState","targetName","prevExportState","signingDialogOpen","setTarget","enable","runExtensionSanityTests","jsExtensionModule","testResults","loadExtension","createExtension","testsResult","emptyStorageProvider","createOperations","computeInitialFileMetadataToOpen","defaultStorageProvider","appArguments","candidates","currentStorageProvider","getFileMetadataFromAppArguments","ProjectStorageProviders","renderDialog","_setDialog","_getStorageProviderOperations","newStorageProvider","setDialog","closeDialog","_getStorageProvider","DeprecatedKeyboardShortcuts","onMove","_isControlPressed","metaPressed","rawCtrlPressed","_onKeyDown","evt","isFocused","which","shiftPressed","spacePressed","_onKeyUp","_onMouseDown","mouseMidButtonPressed","_onMouseUp","_onKeyPress","_noop","mount","InstancesRenderer","onInstanceClicked","onOverInstance","onOutInstance","onMoveInstance","onMoveInstanceEnd","onDownInstance","layersRenderers","temporaryRectangle","instanceMeasurer","getInstanceAABB","layerRenderer","getUnrotatedInstanceAABB","getInstanceRect","aabb","LayerRenderer","getPixiContainer","zOrder","render","_updatePixiObjectsZOrder","_cleanUnusedLayerRenderers","destroy","transformRect","transformPoint","startPos","endPos","resizeGrabbingLocationValues","resizeGrabbingRelativePositions","TopLeft","BottomLeft","BottomRight","TopRight","Top","Left","Bottom","Right","canMoveOnX","location","canMoveOnY","InstancesResizer","_initialSelectionAABB","_unrotatedInstanceAABBs","_instanceAABBs","_instancePositions","totalDeltaX","totalDeltaY","_temporaryGrabbingPosition","initialInstanceAABB","initialUnrotatedInstanceAABB","initialPosition","initialSelectionAABB","setRectangle","_getOrCreateInstanceAABB","union","grabbingLocation","proportional","nonLockedInstances","_getOrCreateSelectionAABB","grabbingRelativePosition","initialGrabbingX","initialGrabbingY","grabbingPosition","roundedTotalDeltaX","roundedTotalDeltaY","flippedTotalDeltaX","flippedTotalDeltaY","scaleX","scaleY","hasRotatedInstance","areAnyInstancesNotStraight","fixedPointX","fixedPointY","selectedInstance","_getOrCreateUnrotatedInstanceAABB","initialInstanceOriginPosition","_getOrCreateInstanceOriginPosition","initialWidth","initialHeight","angle","setCustomWidth","setCustomHeight","setHasCustomSize","centerToOriginX","centerToOriginY","resizeGrabbingIconNames","SelectedInstances","onResize","onResizeEnd","onRotate","onRotateEnd","rectanglesContainer","selectedRectangles","resizeButtons","rotateButton","_screenType","resizeGrabbingLocation","resizeButton","_makeButton","objectButton","onEnd","interactive","buttonMode","gesture","panable","on","buttonObject","canvasPosition","shape","hitAreaPadding","beginFill","lineStyle","drawRect","drawCircle","endFill","hitArea","bigButtonSize","smallButtonSize","buttonPadding","x1","y1","x2","y2","initialised","newRectangle","instanceRect","selectionRectangle","selectionRectangleColor","relativePositions","buttonSize","resizeButtonPos","rotateButtonPos","highlightedInstance","highlightRectangle","tooltipBackground","tooltipInfo","getZOrder","drawRoundedRect","InstancesRotator","_instanceAngles","_fixedPointIsUpToDate","_fixedPoint","_instanceMeasurer","initialAngle","atan2","initialAABB","selectionAABB","_getOrCreateInstanceAngle","degreeAngle","_getNewAngle","setAngle","rotationAngle","cosa","sina","InstancesMover","_startX","_startY","instancePositions","_temporaryPoint","followAxis","startX","startY","noGridSnap","magnetLeft","magnetTop","initialMagnetX","initialMagnetY","magnetPosition","_getMoveDeltaX","_getMoveDeltaY","Grid","pixiGrid","sceneStartPoint","sceneEndPoint","getWidth","getHeight","offsetX","offsetY","endX","endY","countX","countY","lineCount","lineStartX","lineStartY","lineEndX","lineEndY","moveTo","lineTo","WindowBorder","pixiRectangle","windowRectangle","getGameResolutionWidth","getGameResolutionHeight","displayedRectangle","WindowMask","getViewX","getViewY","BackgroundColor","pixiRenderer","FpsLimiter","maxFps","_lastFrameTime","_interval","_forceUpdate","delta","stopPIXITicker","ticker","stop","startPIXITicker","StatusBar","_getLastCursorSceneCoordinates","_statusBarContainer","_statusBarBackground","_statusBarText","CanvasCursor","shouldMoveView","LongTouchHandler","onLongTouch","_lastTouchX","_lastTouchY","_onTouchStart","_clear","_longTouchTimeoutID","_onLongTouch","_onTouchMove","_canvas","canvasArea","dropCursor","objectWithContextReactDndType","InstancesEditor","lastContextMenuX","lastContextMenuY","lastCursorX","lastCursorY","fpsLimiter","_unmounted","_renderingPaused","_instancesAdder","_onMouseMove","_onBackgroundClicked","view","keyboardShortcuts","startSelectionRectangle","_onPanMove","onViewPositionChanged","updateSelectionRectangle","_getLayersVisibility","getVisibility","_onPanEnd","hasStartedSelectionRectangle","instancesSelected","endSelectionRectangle","_onInstanceClicked","_onOverInstance","setInstance","_onDownInstance","sceneX","sceneY","instancesMover","startMove","_onOutInstance","getInstance","_onMoveInstance","moveBy","shouldFollowAxis","shouldNotSnapToGrid","_onMoveInstanceEnd","endMove","_onResize","shouldResizeProportionally","instancesResizer","resizeBy","_onResizeEnd","endResize","_onRotate","instancesRotator","rotateBy","_onRotateEnd","endRotate","moveSelection","getViewPosition","_renderScene","shouldUpdate","canvasCursor","instancesRenderer","windowBorder","statusBar","nextFrame","requestAnimationFrame","pauseSceneRendering","cancelAnimationFrame","restartSceneRendering","_initializeCanvasAndRenderer","preserveDrawingBuffer","antialias","appendChild","longTouchHandler","onwheel","shouldZoom","zoomOnCursorBy","shouldScrollHorizontally","setAttribute","backgroundArea","originalEvent","cursorX","cursorY","getPixiObject","pinchHandler","InstancesAdder","_mountEditorComponents","SelectionRectangle","getInstanceMeasurer","HighlightedInstance","forceNextUpdate","setScreenType","beforeZoomCursorPosition","afterZoomCursorPosition","scrollToInstance","getClientOffset","canvasRect","createOrUpdateTemporaryInstancesFromObjectNames","deleteTemporaryInstances","updateTemporaryInstancePositions","commitTemporaryInstances","thumbnailImageWithDescription","objectFit","smallScreenThumbnailImage","card","TutorialListItem","onHeightComputed","isLoaded","setIsLoaded","containerRef","isImageLoadingRef","notifyHeightChanged","ButtonBase","sendTutorialOpened","Card","Text","TutorialsList","SvgIcon","thumbnailImageWithoutDescription","LinkButton","Apple","GooglePlay","Steam","ItchIo","Twitter","Microsoft","Instagram","Twitch","getLinkIconAndLabel","sendShowcaseGameLinkOpened","ShowcasedGameListItem","hasDescription","firstLinks","links","otherLinks","genres","TagChips","getShowcasedGameTitle","GamesShowcase","ScrollView","Subheader","findEmptyPath","basePath","folderName","generateName","accessSync","CreateProjectDialog","currentTab","outputPath","_onChangeTab","newTab","_showExamples","ExamplesComponent","examplesComponent","StartersComponent","startersComponent","onChangeOutputPath","onShowExamples","DragAndDropContextProvider","DragDropContext","MultiBackend","HTML5toTouch","CircularProgress","isUsernameValid","allowEmpty","usernameFormatError","UsernameField","getEmailErrorText","getPasswordErrorText","CreateAccountDialog","form","password","_onCreateAccount","createAccountInProgress","onGoToLogin","LeftLoader","LoginDialog","_onLogin","_onForgotPassword","onForgotPassword","onGoToCreateAccount","loginInProgress","resetPasswordDialogOpen","onCloseResetPasswordDialog","forgotPasswordInProgress","RightLoader","getUsernameErrorText","EditDialog","_onEdit","editInProgress","Checkbox","ChangeEmailDialog","_onChangeEmail","changeEmailInProgress","EmailVerificationPendingDialog","isVerified","emailVerified","AuthenticatedUserProvider","loginDialogOpen","createAccountDialogOpen","editProfileDialogOpen","authError","emailVerificationPendingDialogOpen","changeEmailDialogOpen","_automaticallyUpdateUserProfile","_reloadFirebaseProfile","authentication","getFirebaseUser","_fetchUserProfileWithoutThrowingErrors","_fetchUserProfile","_fetchUserBadges","getUserProfile","userProfile","_doLogout","logout","_resetAuthenticatedUser","_doLogin","login","openLoginDialog","_doEdit","editUserProfile","openEditProfileDialog","_doCreateAccount","createFirebaseAccount","createUser","sendSignupDone","_doForgotPassword","forgotPassword","openResetPassword","_doSendEmailVerification","sendFirebaseEmailVerification","openEmailVerificationPendingDialog","_doAcceptGameStatsEmail","acceptGameStatsEmail","_doChangeEmail","changeEmail","openChangeEmailDialog","openCreateAccountDialog","setOnUserLogoutCallback","setOnUserUpdateCallback","getFirebaseUserSync","PublicProfileDialog","setProfile","setBadges","fetchProfile","fetchUserBadges","ProfileDetails","visitedPublicProfileUserId","setVisitedPublicProfileUserId","closeUserPublicProfile","publicProfileState","ipcRenderer","PreferencesProvider","_loadValuesFromLocalStorage","_setLanguage","_setThemeName","_setCodeEditorThemeName","_setAutoDownloadUpdates","_checkUpdates","_setAutoDisplayChangelog","_showAlertMessage","_showAllAlertMessages","_showTutorialHint","_showAllTutorialHints","_verifyIfIsNewVersion","_setEventsSheetShowObjectThumbnails","_setAutosaveOnPreview","_setUseNewInstructionEditorDialog","_setUseUndefinedVariablesInAutocompletion","_setUseGDJSDevelopmentWatcher","_setEventsSheetUseAssignmentOperators","_setEventsSheetZoomLevel","_setShowEffectParameterNames","_getLastUsedPath","_setLastUsedPath","_getDefaultEditorMosaicNode","_setDefaultEditorMosaicNode","_getRecentProjectFiles","_insertRecentProjectFile","_removeRecentProjectFile","_getAutoOpenMostRecentProject","_setAutoOpenMostRecentProject","_hadProjectOpenedDuringLastSession","_setHasProjectOpened","_setShortcutForCommand","_resetShortcutsToDefault","_getNewObjectDialogDefaultTab","_setNewObjectDialogDefaultTab","_getIsMenuBarHiddenInPreview","_setIsMenuBarHiddenInPreview","_setBackdropClickBehavior","_getIsAlwaysOnTopInPreview","_setIsAlwaysOnTopInPreview","_setEventsSheetCancelInlineParameter","_persistValuesToLocalStorage","forceDownload","disableCheckForUpdates","send","currentVersion","getIDEVersion","persistedState","localStorage","setItem","projectPaths","latestPath","newProjectLastUsedPaths","recents","newRecentFile","_setRecentProjectFiles","recentFile","recentFileItem","setToDefault","updatedShortcutMap","EventsFunctionsExtensionsProvider","_eventsFunctionCodeWriter","makeEventsFunctionCodeWriter","onWriteFile","_onWriteFile","_includeFileHashs","_lastLoadPromise","_loadProjectEventsFunctionsExtensions","_unloadProjectEventsFunctionsExtensions","_unloadProjectEventsFunctionsExtension","_reloadProjectEventsFunctionsExtensions","_ensureLoadFinished","eventsFunctionsExtensionWriter","xxhashjs","h32","toNumber","lastLoadPromise","jss","create","plugins","jssPreset","rtl","Providers","getTheme","GDI18nProvider","StylesProvider","ThemeProvider","PublicProfileProvider","ResourceFetcher","onPlay","onPause","canPlay","canPause","onOpenProfiler","canOpenProfiler","onOpenConsole","canOpenConsole","lastChild","ToolbarSeparator","InspectorsList","gameData","getInspectorDescriptions","inspectorDescription","fullInspectorPath","getSubInspectors","onChooseInspector","_renderInspectorList","transformVariable","transformedVariable","_type","_str","_value","_bool","mapValues","_children","_childrenArray","handleEdit","onCall","editPath","variableInContainerName","_variables","items","skip","constructPathToVariable","namespace","new_value","isNaN","collapsed","enableClipboard","displayDataTypes","displayObjectSize","groupArraysAfterLength","validationMessage","runtimeObject","Angle","Layer","hidden","VariablesContainerInspector","transformLayer","_cameraRotation","_zoomFactor","_hidden","_cameraX","_cameraY","_timeScale","runtimeScene","_timeManager","Layers","_layers","RuntimeSceneInspector","_objects","gdjsRuntimeGame","renderInspector","gdjsStack","_name","RuntimeObjectInspector","indent","MeasuresTable","collapsedPaths","_convertToDataRows","parentSection","section","profilerMeasures","parentPercent","totalPercent","isCollapsed","_isSectionCollapsed","hasSubsections","subsections","subsection","subsectionName","_toggleSection","_rowClassName","_renderSectionNameCell","rowData","dataRows","headerHeight","headerClassName","rowGetter","onRowClick","rowClassName","dataKey","tableContainer","Profiler","onStart","onStop","profilerOutput","profilingInProgress","stats","framesCount","LinearProgress","framesAverageMeasures","LogsManager","_onNewLog","_onNewGroup","_pendingLogs","_pendingCommit","f","_commitLogs","selectableTextStyle","userSelect","consoleTextArea","Tag","Chip","iconMap","DebuggerConsole","logsManager","onUpdate","off","cellMeasurerCache","CellMeasurerCache","defaultHeight","fixedWidth","keyMapper","hideInternal","setHideInternal","showDetails","_setShowDetails","editingHiddenGroups","setEditingHiddenGroups","hiddenGroups","filteredLogs","internal","clearAll","deferredMeasurementCache","registerChild","timestamp","DebuggerContent","selectedInspector","selectedInspectorFullPath","rawMode","_editors","openProfiler","openConsole","onRefresh","onStartProfiler","onStopProfiler","inspectors","RawContentInspector","profiler","DebuggerSelector","hasDebuggers","debuggerIds","selectedId","onChooseDebugger","isUnavoidableLibraryWarning","Debugger","debuggerServerState","getServerState","debuggerServerError","getExistingDebuggerIds","unregisterDebuggerServerCallbacks","debuggerGameData","profilerOutputs","_debuggerContents","_debuggerLogs","Map","_registerServerCallbacks","unregisterCallbacks","registerCallbacks","onErrorReceived","onConnectionClosed","onConnectionOpened","onServerStateChanged","onHandleParsedMessage","parsedMessage","_handleMessage","payload","_getLogsManager","addLog","_play","sendMessage","_pause","_refresh","_edit","_call","_startProfiler","_stopProfiler","_hasSelectedDebugger","PlaceholderMessage","PlaceholderLoader","debuggerContent","DebuggerEditorContainer","subscriptionChecked","_checkHasSubscription","_subscriptionChecker","subscriptionChecker","buildTypesConfig","estimatedTimeInSeconds","completeDescription","buttons","onDownload","config","secondsSinceLastUpdate","differenceInSeconds","updatedAt","estimatedRemainingTime","buildContainer","builds","isOld","differenceInCalendarDays","Paper","buildType","formatBuildText","format","BuildProgress","BuildsWatcher","runningWatchers","nextWatcherId","_pollBuild","waitTime","watcherId","onBuildUpdated","createdAt","Builds","buildsWatcher","_startBuildsWatcher","newBuild","oldBuild","_refreshBuilds","onBuildsUpdated","_download","BuildsList","BuildsDialog","_onBuildsUpdated","limit","hasSubscription","noSubscription","limitReached","stepper","linearProgress","exportStep","stepMaxProgress","stepCurrentProgress","hasBuildStep","showSeeAllMyBuildsExplanation","Stepper","activeStep","orientation","Step","StepLabel","StepContent","ExportLauncher","compressionOutput","doneFooterOpen","exportPipeline","getInitialExportState","_setupAchievementHook","launchWholeExport","_launchWholeExport","_updateStepProgress","_startBuildWatch","registerAndUpdateGame","sendExportLaunched","getErrorMessage","handleError","setStep","exportPipelineContext","updateStepProgress","prepareExporter","preparedExporter","launchExport","exportOutput","launchResourcesDownload","resourcesDownloadOutput","launchCompression","launchUpload","launchOnlineBuild","uploadBucketKey","_downloadBuild","_closeDoneFooter","_updateExportState","updater","getBuildLimit","onlineBuildType","packageNameWarningType","renderHeader","renderLaunchButtonLabel","canLaunchBuild","LimitDisplayer","CreateProfile","BuildStepsProgress","renderDoneFooter","useOnlineStatus","navigator","onLine","onlineStatus","setOnlineStatus","goOnline","goOffline","OnlineStatus","disabledItem","ExperimentalExportButton","showExperimental","ExportDialog","chosenExporterKey","buildsDialogOpen","chooseExporter","_showExperimental","_openBuildsDialog","_renderExporterListItem","exporter","forceDisable","allExportersRequireOnline","exporters","cantExportBecauseOffline","advanced","experimental","themeData","base","inherit","rules","foreground","token","fontground","themes","GitHub","Monokai","SolarizedDark","SolarizedLight","Tomorrow","TomorrowNight","VibrantInk","NordDark","OneDark","getAllThemes","rtlLanguages","primitives","WeakMap","cacheFor","cachedValue","darkStyles","DarkTheme","NordTheme","SolarizedDarkTheme","OneDarkTheme","themeList","ltr","createLtrTheme","createRtlTheme","memoize","createMuiTheme","rtlOverrides","rtlDirection","MuiSvgIcon","order","MuiFormControlLabel","MuiTextField","previewContainer","previewImage","cardContainer","titleContainer","AssetCard","onOpenDetails","previewImageUrls","AssetStore","previewBackground","verticalPreviewBackground","horizontalPreviewBackground","AssetDetails","canInstall","isBeingInstalled","setAsset","loadAsset","loadedAsset","assetAuthors","assetLicense","license","Link","website","ObjectListItem","NewObjectDialog","onCreateNewObject","onObjectAddedFromAsset","assetWasInstalled","setAssetWasInstalled","openedAsset","setOpenedAsset","setCurrentTab","setShowExperimental","experimentalObjectsInformation","resourcesFetcher","experimentalObjects","assetBeingInstalled","setAssetBeingInstalled","onInstallAsset","installOutput","sendAssetAddedToProject","sendAssetOpened","sendNewObjectCreated","EditTagsDialog","_tagsField","listContainer","getObjectWithContextName","isObjectWithContextGlobal","getPasteLabel","isGlobalObject","clipboardObjectName","ObjectsList","_displayedObjectWithContextsList","renamedObjectWithContext","tagEditedObject","addObject","setTags","_onObjectAddedFromAsset","onAddNewObject","_deleteObject","removeObject","_onObjectModified","_copyObject","_cutObject","_duplicateObject","_pasteAndRename","_editName","_paste","pasteObject","copiedObject","newObject","getObjectPosition","sortableList","_rename","doRename","_canMoveSelectionTo","destinationObjectWithContext","movedObjectWithContext","_moveSelectionTo","fromIndex","toIndex","moveObject","_setAsGlobalObject","moveObjectToAnotherContainer","_openEditTagDialog","_changeObjectTags","_selectObject","_getObjectThumbnail","_renderObjectMenuTemplate","shouldForceUpdateList","nextState","lists","selectedObjects","listKey","getGravatarUrl","hash","md5","achievementsContainer","lockedAchievement","unlockedAchievement","AchievementList","achievements","displayUnclaimedAchievements","achievementsWithUnlockedDate","setAchievementsWithUnlockedDate","badgeByAchievementId","reduce","acc","achievementsWithDate","achievement","hasBadge","parseISO","data-name","strokeMiterlimit","summary","leftContainer","rightContainer","UserAchievements","setAchievements","displayError","setDisplayError","fetchAchievements","Trophy","isAuthenticatedUserProfile","onEditProfile","Avatar","ExampleIcon","openExampleInWebApp","projectFileUrl","ExampleDialog","isOpening","setExample","loadExample","isCompatible","hasIcon","ExampleListItem","fetchAndOpenExampleInWebApp","getExampleName","ExampleStore","selectedExampleShortHeader","setSelectedExampleShortHeader","ChangelogRenderer","releases","currentReleaseName","openReleaseNote","currentRelease","findRelease","currentVersionHasBreakingChange","Changelog","_onUpdated","onUpdated","GDevelopReleaseApi","last","ExtensionListItem","alreadyInstalled","previewIconUrl","getTransformedDescription","ExtensionInstallDialog","_loadExtensionheader","isInstalling","onInstall","version","getExtensionName","ExtensionStore","showOnlyWithBehaviors","selectedExtensionShortHeader","setSelectedExtensionShortHeader","filteredSearchResults","eventsBasedBehaviorsCount","InstructionOrObjectSelector","freeInstructionsInfo","freeInstructionsInfoTree","chosenInstructionType","allInstructionsInfo","onChooseInstruction","onChooseObject","onChangeTab","onSearchStartOrReset","isOutsideLayout","displayedObjectsList","displayedObjectGroupsList","isSearching","filteredInstructionsList","remainingResultsCount","oldSearchText","renderObjectListItem","renderGroupObjectsListItem","previewIcon","audioElement","ImageCard","GenericCard","ResourceCard","controls","ResourceStore","searchResultsForResourceKind","getGameMetrics","dayIsoDate","GDevelopAnalyticsApi","validateStatus","bigIcon","GameDetailsDialog","gameRollingMetrics","setGameMetrics","gameRollingMetricsError","setGameMetricsError","isGameMetricsLoading","setIsGameMetricsLoading","yesterdayIsoDate","formatISO","subDays","representation","analyticsDate","setAnalyticsDate","loadGameMetrics","updateGameFromProject","unregisterGame","areProjectAndGameDiffering","_index","newIsoDate","isoDate","reverse","players","d0Players","sessions","d0Sessions","d0NewPlayers","retention","dayIndex","SemiControlledMultiAutoComplete","Autocomplete","multiple","loading","UsersAutocomplete","users","setUsers","userInput","setUserInput","setLoading","completionUserPublicProfiles","setCompletionUserPublicProfiles","searchUserPublicProfiles","userPublicProfiles","getUserPublicProfilesForAutocomplete","userIds","userPublicProfilesByIds","userPublicProfile","GroupRow","isGlobalGroup","onSetAsGlobalGroup","canSetAsGlobalGroup","onEditName","SortableGroupRow","SortableAddGroupRow","GroupsList","onAddGroup","renamedGroupWithScope","SortableGroupsList","withRef","GroupsListContainer","objectGroupsList","globalObjectGroupsList","addGroup","insertNew","_onObjectGroupModified","onGroupAdded","_onDelete","onGroupRemoved","_onEditName","getWrappedInstance","_onRename","onGroupRenamed","_onMove","globalObjectGroupsOldIndex","globalObjectGroupsNewIndex","_setAsGlobalGroup","EmptyEffectsPlaceholder","getEnumeratedEffectMetadata","allEffectDescriptions","EffectsList","onEffectsUpdated","allEffectMetadata","_addEffect","hasEffectNamed","insertNewEffect","addEffect","getEffectType","newEffectType","setEffectType","chooseEffectType","removeEffect","ProjectTitlebar","setTitle","setTitleBarColor","contributors","AboutDialog","_openContributePage","_openLink","_changeTab","updateStatusString","updateButtonLabel","getGDCoreVersion","contributor","PureComponent","Indent","indentIconColor","limitEditing","tableChildIndentation","fadedButton","getString","noPaddingMultilineTextField","getBool","toolColumnHeader","buttonStyle","BooleanField","getPointer","desktopSizes","androidSizes","iosSizes","PlatformSpecificAssetsDialog","_generateFromFile","fullPath","resizeImage","results","imageResource","desktopIconResourceNames","androidIconResourceNames","iosIconResourceNames","getPlatformSpecificAssets","isResizeSupported","newIcons","lazyRequireJimp","inputFile","outputFile","Jimp","read","jimpImage","contain","write","dialogContent","transitionDuration","enter","exit","circularProgress","disableShrink","appBar","displayLeftCloseButton","delayElectronClose","onbeforeunload","close","returnValue","TabContentContainer","ClosableTabs","tabItemContainerStyle","ClosableTab","existingEditorId","findIndex","newTabId","closeTabsExceptIf","keepPredicate","currentEditorTab","remainingEditors","chosenEditorTab","editorProject","getProject","editorLayout","defaultEventContainer","smallEventContainer","getIndentWidth","EventContainer","_onEventUpdated","_onEventContextMenu","_container","offsetHeight","eventsHeightsCache","setEventHeight","EventComponent","EventsRenderingService","getEventComponent","getNodeKey","treeIndex","SortableTree","noop","ThemableEventsTree","_eventsToTreeData","flatData","parentDisabled","treeData","getEventAt","_renderEvent","expanded","isFolded","extraNodes","_onMoveNode","targetPath","targetNode","getNodeAtPath","targetEventsList","targetPosition","moveEventToAnotherEventsList","_canDrag","_canDrop","nextParent","_canNodeHaveChildren","_onVisibilityToggle","_renderObjectThumbnail","_isNodeHighlighted","searchQuery","highlightedEvent","EventHeightsCache","onHeightsChanged","wrappedInstance","recomputeRowHeights","row","_getEventRow","scrollToRow","EventsListUnfolder","unfoldWhenContaining","searchedEvent","scaffoldBlockPxWidth","onVisibilityToggle","onMoveNode","canNodeHaveChildren","getEventHeight","searchMethod","reactVirtualizedListProps","StandardEvent","standardEvent","getConditions","wordWrap","instrFormatter","InstructionSentenceFormatter","useAssignmentOperators","dragAllowed","instructionDragSourceElement","formattedTexts","getAsFormattedText","getTextFormatting","getUserData","parameterType","InvalidParameterValue","renderInstructionText","instructionDragSourceDropTargetElement","canHaveSubInstructions","getSubInstructions","operatorLabels","mapTypeToOperators","unknown","number","comparedValueType","operators","isEmpty","keyNames","isKeyValid","call","hasCustomSize","getCustomWidth","getCustomHeight","prototype","descriptors","FontFace","fontFace","fonts","newStyle","createElement","createTextNode","head","FontFaceObserver","_renderedAnimation","_renderedDirection","_centerX","_centerY","_originX","_originY","getInvalidPIXITexture","updatePIXITextureAndSprite","imageName","updatePIXISprite","anchor","frame","_shouldNotRotate","toRad","updateSprite","_sprite","hasNoAnimations","getRawDoubleProperty","hasNoDirections","useMultipleDirections","normalizedAngle","getPIXITexture","center","once","getOriginX","getOriginY","getDefaultWidth","getDefaultHeight","tiledSprite","_texture","getTexture","makeObjects","updateTexture","panelSprite","isTiled","_tiled","_textureName","updateAngle","updatePosition","oldWidth","oldHeight","updateWidthHeight","StretchedSprite","_centerSprite","_borderSprites","removeChildren","_updateLocalPositions","getLeftMargin","getTopMargin","getRightMargin","getBottomMargin","_updateSpritesAndTexturesSize","_wasRendered","cacheAsBitmap","makeInsideTexture","rect","pivot","_styleFontDirty","textObject","isItalic","_isItalic","_isBold","getCharacterSize","_characterSize","_wrapping","_wrappingWidth","_fontName","getFontName","loadFontFamily","_fontFamily","wordWrapWidth","breakWords","dirty","getColorR","_colorR","getColorG","_colorG","getColorB","_colorB","updateGraphics","particleEmitterObject","emitterAngle","sprayConeAngle","getConeSprayAngle","line1Angle","line2Angle","getParticleRed2","getParticleGreen2","getParticleBlue2","getParticleRed1","getParticleGreen1","getParticleBlue1","_yesButton","createRef","effectiveValue","_trueButton","ExpressionSelector","minHeightContainer","ExpressionParametersEditorDialog","editedIndex","oldValue","defaultStyle","highlightedText","borderSizing","sortedHighlights","highlight1","highlight2","elements","lastPos","filterStringList","getAutocompletionsForExpressions","expressionMetadatas","enumeratedExpressionMetadata","getAutocompletionsForText","expressionAutocompletionContext","completionDescription","getPrefix","autocompletionTexts","getParameterMetadata","autocompletion","spriteObjectName","animationName","filteredTextList","isLastParameter","getReplacementStartPosition","getReplacementEndPosition","expressionCompletionDescriptions","completionKind","getCompletionKind","ExpressionCompletionDescription","getBehaviorName","behaviorExpressions","filteredBehaviorExpressions","getAutocompletionsForBehaviorExpressions","objectExpressions","filteredObjectExpressions","getAutocompletionsForObjectExpressions","filteredFreeExpressions","getAutocompletionsForFreeExpressions","filteredObjectsList","filteredGroupsList","getAutocompletionsForObject","Behavior","getAutocompletionsForBehavior","getAutocompletionsForVariable","insertedAutocompletion","formatCompletion","nextCharacter","suffix","addSuffix","wordStartPosition","wordEndPosition","maybeNextCharacter","newExpressionStart","insertedWord","visibleAutocompletionsLength","defaultTextStyle","overflowWrap","AutocompletionIcon","DisplayedTextAutocompletion","onPointerDown","DisplayedExpressionAutocompletion","userFriendlyName","formatParameterTypesString","DisplayedObjectAutocompletion","thumbnail","DisplayedBehaviorAutocompletion","tooManyTextContainer","popperStyle","ExpressionAutocompletionsDisplayer","selectedAutocompletionElement","_behaviorNames","_getError","_forceChooseBehavior","_behaviorTypeAllowed","_updateBehaviorsList","noBehaviorErrorText","layerNames","ParameterColorField","expressioNode","_instantButton","showDeprecatedNumericValue","hasLayerNamed","getEffects","effectName","getEffectNames","getEffect","getEffectParameterNames","pointName","getPointNames","getAnimationNames","editing","endEditing","getBackgroundColorR","getBackgroundColorG","getBackgroundColorB","WebkitTextFillColor","underlineFocusStyle","commentTextStyle","commentTextField","commentSpan","CommentEvent","onEvent","asCommentEvent","setComment","_getCommentHTML","getComment","commentEvent","getTextColorRed","getTextColorGreen","getTextColorBlue","_selectable","dangerouslySetInnerHTML","__html","instructionsContainer","ForEachEvent","_objectField","editingPreviousValue","asForEachEvent","getObjectToPick","cancelEditing","forEachEvent","setObjectToPick","objectField","variableContainer","eventLabel","ForEachChildVariableEvent","_valueIteratorField","_keyIteratorField","_iterableField","editingValueIteratorVariableName","editingKeyIteratorVariableName","editingIterableVariableName","forEachChildVariableEvent","asForEachChildVariableEvent","valueIteratorName","getValueIteratorVariableName","keyIteratorName","getKeyIteratorVariableName","iterableName","getIterableVariableName","setIterableVariableName","setValueIteratorVariableName","setKeyIteratorVariableName","iteratorField","iterableField","RepeatEvent","asRepeatEvent","getRepeatExpression","repeatEvent","setRepeatExpression","whileEvent","asWhileEvent","getWhileConditions","openInNewIcon","LinkEvent","_externalEventsAutoComplete","asLinkEvent","getTarget","openTarget","linkEvent","externalEventsName","externalEventsAutoComplete","getList","currentSceneName","currentExternalEventName","layouts","ExternalEventsAutoComplete","wrappingText","comment","commentLink","textDecoration","JsCodeEvent","editingObject","asJsCodeEvent","setInlineCode","parameterObjects","getParameterObjects","cancelObjectEditing","endObjectEditing","jsCodeEvent","setParameterObjects","toggleExpanded","setEventsSheetExpanded","isEventsSheetExpanded","_getCodeEditorHeight","heightToFillSheet","textStyle","eventsFunctionContext","functionStart","functionEnd","getInlineCode","onEditorMounted","eventHeights","updateTimeoutId","cachedHeight","_notifyComponent","makeMenuTemplateBuilderForEvents","BottomButtons","EmptyEventsPlaceholder","fullHeightSelector","newInstructionEditorState","newInstructionEditorSetters","hasObjectChosen","getInitialStepName","getInitialTab","currentInstructionOrObjectSelectorTab","setCurrentInstructionOrObjectSelectorTab","instructionParametersEditor","instructionHelpPage","renderInstructionOrObjectSelector","renderParameters","renderObjectInstructionSelector","stepBackFrom","incString","preserved","s","RegExp","namedProperties","namedProperty","propertyDescriptor","setLabel","addExtraInfo","submitInstruction","anchorOrigin","vertical","horizontal","transformOrigin","sizeTextField","EventTextDialog","textValue","setTextValue","setTextColor","_shiftPressed","_ctrlPressed","_altPressed","_metaPressed","_updateModifiersFromEvent","_isControlOrCmdPressed","_isActive","_shortcutCallbacks","InlineParameterEditor","_loadComponentFromInstruction","_unload","instructionsList","hasEndingOnceInstruction","hasInvalidOnce","removeAt","onceInstruction","objectsNames","objectOrGroupBehaviorNames","EventsContextAnalyzerDialog","searchTextField","focusSearchField","setSearchResultsDirty","replaceText","setReplaceText","matchCase","setMatchCase","searchInActions","setSearchInActions","searchInConditions","setSearchInConditions","searchInEventStrings","setSearchInEventStrings","searchInSelection","searchResultsDirty","launchSearch","searchInEventSentences","isSearchAndReplaceTab","launchReplace","launchSearchIfResultsDirty","EventsSearcher","eventsSearchResults","_resultEvents","_doReplaceInEvents","_doSearchInEvents","newEventsSearchResults","_updateListOfResultEvents","resultEventsWithDuplicates","eventsSearchResult","isEventValid","getEvent","_goToSearchResults","newSearchFocusOffset","_goToPreviousSearchResult","_goToNextSearchResult","subInstructionsList","EventsFunctionExtractorDialog","eventsFunctionsExtensions","hasLotsOfParameters","objectGroupName","EventsFunctionsExtensionEditor","selectedEventsFunction","selectedEventsBasedBehavior","editedEventsBasedBehavior","editOptionsDialogOpen","behaviorMethodSelectorDialogOpen","extensionFunctionSelectorDialogOpen","onAddEventsFunctionCb","_loadEventsFunctionFrom","_globalObjectsContainer","ObjectsContainer","_objectsContainer","EventsFunctionTools","behaviorEventsFunctionToObjectsContainer","freeEventsFunctionToObjectsContainer","eventsBasedBehaviors","behaviorEventsFunctions","_selectEventsFunction","getEventsFunction","_editorNavigator","_makeRenameFreeEventsFunction","renameEventsFunction","_makeRenameBehaviorEventsFunction","renameBehaviorEventsFunction","_makeMoveFreeEventsParameter","moveEventsFunctionParameter","_makeMoveBehaviorEventsParameter","moveBehaviorEventsFunctionParameter","_onDeleteEventsFunction","_selectEventsBasedBehavior","_editorMosaic","_makeRenameEventsBasedBehavior","renameEventsBasedBehavior","_onEventsBasedBehaviorRenamed","_onDeleteEventsBasedBehavior","_onAddFreeEventsFunction","_onCloseExtensionFunctionSelectorDialog","_onAddBehaviorEventsFunction","_onCloseBehaviorMethodSelectorDialog","_onBehaviorEventsFunctionAdded","ensureBehaviorEventsFunctionsProperParameters","_onBehaviorPropertyRenamed","renameEventsBasedBehaviorProperty","_editOptions","_editBehavior","fixInvalidRequiredBehaviorProperties","_openFreeFunctionsListEditor","_openBehaviorsListEditor","_onEditorNavigatorEditorChanged","onEditFreeFunctions","onEditBehaviors","onEditExtensionOptions","onParametersOrGroupsUpdated","onSelectEventsFunction","onDeleteEventsFunction","canRename","onRenameEventsFunction","onAddEventsFunction","onEventsFunctionAdded","eventsBasedBehaviorsList","onSelectEventsBasedBehavior","onDeleteEventsBasedBehavior","onRenameEventsBasedBehavior","onEventsBasedBehaviorRenamed","onEditProperties","editorNavigator","initialEditorName","transitions","previousEditor","nextIcon","nextLabel","nextEditor","onEditorChanged","onRenameProperty","EventsFunctionConfigurationEditor","objectOrGroupRemovedInEventsFunction","objectOrGroupRenamedInEventsFunction","_chooseTab","onGroupsUpdated","ObjectGroupsListWithObjectGroupEditor","ObjectGroupEditor","getAllObjectsNames","_renderExplanation","EventsBasedBehaviorEditorDialog","onTabChanged","onPropertiesUpdated","EventsBasedBehaviorEditor","_allObjectTypes","getAllObjectTypesUsingEventsBasedBehavior","propertiesContainer","EventsBasedBehaviorPropertiesEditor","_addProperty","getCount","_removeProperty","_moveProperty","_setChoiceExtraInfo","vectorString","VectorString","validatePropertyName","MethodListItem","BehaviorMethodSelectorDialog","eventsFunctions","showAdvanced","setShowAdvanced","FunctionListItem","currentEditorName","setCurrentEditorName","buttonLineJustifyContent","eventsFunctionsCount","renderedInstances","_temporaryRectangle","_temporaryRectanglePath","getUnrotatedInstanceLeft","getUnrotatedInstanceTop","getUnrotatedInstanceWidth","getUnrotatedInstanceHeight","getRendererOfInstance","renderedInstance","makeDoubleClickable","viewPoint","scenePoint","viewTopLeft","viewBottomRight","InitialInstanceJSFunctor","invoke","instancePtr","wrapPointer","pixiObject","_isInstanceVisible","rotatePolygon","rotatedRectangle","_getInstanceRotatedRectangle","MAX_VALUE","len","_computeViewBounds","iterateOverInstancesWithZOrdering","_updateVisibility","_destroyUnusedInstanceRenderers","onRemovedFromScene","pixiDisplayObject","lastClickTime","lastClickGlobalX","lastClickGlobalY","handleTap","currentTime","emit","vertices","selectionRectangleStart","selectionRectangleEnd","lastX","lastY","_instancesInSelectionRectangle","iterateOverInstances","selector","_temporaryAABB","instanceAABB","selectionSceneStart","selectionSceneEnd","roundPositionsToGrid","newPos","_zOrderFinder","HighestZOrderFinder","_instances","getHighestZOrder","_instancesEditorSettings","insertNewInitialInstance","setObjectName","setZOrder","_temporaryInstances","_createTemporaryInstancesFromObjectNames","InstancePropertiesEditor","_instanceVariablesList","setLocked","enumerateLayers","setLayer","getCustomProperties","instanceSchema","updateCustomProperty","_renderInstancesProperties","InstancesList","renderedRows","_onRowClick","_rowGetter","_selectFirstInstance","instanceRowRenderer","locked","tableKey","table","selectedLayer","LayerEditorDialog","useMemo","zOrderFinder","restrictSearchToLayer","instancesCount","getInstancesCount","highestZOrder","isLightingLayer","getUseDeprecatedZeroAsDefaultZOrder","setVisibility","isFollowingBaseLayerCamera","setFollowBaseLayerCamera","getAmbientLightColorRed","getAmbientLightColorGreen","getAmbientLightColorBlue","setAmbientLightColor","InnerDialog","setNewObjectName","EditorComponent","editorComponent","ObjectEditorDialog","ObjectsEditorService","toolbarItemStyle","resourcesSelector","toolbarItem","setCharacterSize","setColor","setBold","setItalic","setFontName","tiledSpriteObject","setTexture","setWidth","setHeight","panelSpriteObject","setTiled","setTopMargin","setBottomMargin","setLeftMargin","setRightMargin","Animation","onSpriteContextMenu","selectedSprites","onSelectSprite","onReplaceDirection","onReplaceByDirection","newDirection","SortableAnimation","SortableAnimationsList","onRemoveAnimation","onAddAnimation","onChangeAnimationName","extraBottomTools","directionId","AnimationsListContainer","moveAnimation","addAnimation","emptyAnimation","setDirectionsCount","removeAnimation","changeAnimationName","otherNames","duplicateSelection","openSpriteContextMenu","selectSprite","spriteContextMenu","replaceDirection","animationId","setDirection","lockAxis","axis","pointsEditorOpen","setPointsEditorOpen","advancedOptionsOpen","setAdvancedOptionsOpen","collisionMasksEditorOpen","setCollisionMasksEditorOpen","getUpdateIfNotVisible","setUpdateIfNotVisible","spritesList","thumbnailExtraStyle","AddSpriteButton","displayHint","SortableSpriteThumbnail","SortableList","onAddSprite","spritesCount","checkDirectionPointsAndCollisionsMasks","allDirectionSpritesHaveSamePoints","allDirectionSpritesHaveSameCollisionMasks","SpritesList","editWith","metadataRaw","getTimeBetweenFrames","Direction","setTimeBetweenFrames","setLoop","originalIndex","setMetadata","newAnimationName","smallest","onEditWith","horizontalMosaicNodes","verticalMosaicNodes","PointsEditor","setAnimationIndex","setDirectionIndex","setSpriteIndex","samePointsForAnimations","setSamePointsForAnimations","samePointsForSprites","setSamePointsForSprites","updatePoints","otherAnimation","setSamePointsForAllAnimations","setSamePointsForAllSprites","editorNodes","preview","overlayProps","pointsContainer","onPointsUpdated","SortablePointRow","PointRow","SortablePointsListBody","setNameErrors","nonDefaultPoints","pointsRows","pointX","pointY","onChangePointX","updatePointX","onChangePointY","updatePointY","nameError","old","delPoint","originPoint","centerPoint","originRow","centerRow","isAutomatic","PointsList","Point","pointKindIdentifiers","PointsPreview","frameRef","draggedPoint","draggedPointKind","renderPoint","imageSrc","automaticCenterPosition","onPointerMove","frameBoundingRect","xOnFrame","yOnFrame","onPointerUp","CollisionMasksEditor","sameCollisionMasksForAnimations","setSameCollisionMasksForAnimations","sameCollisionMasksForSprites","setSameCollisionMasksForSprites","spriteWidth","setSpriteWidth","spriteHeight","setSpriteHeight","updateCollisionMasks","onSetCollisionMaskAutomatic","automatic","setSameCollisionMasksForAllAnimations","setSameCollisionMasksForAllSprites","setCurrentSpriteSize","isDefaultBoundingBox","polygons","onPolygonsUpdated","restoreCollisionMask","SortableVerticeRow","VerticeRow","SortableVerticesTable","hasWarning","vertice","verticeX","verticeY","onChangeVerticeX","set_x","updateVerticeX","onChangeVerticeY","set_y","updateVerticeY","removeFromVectorVector2f","newVertice","Vector2f","PolygonSection","warningColor","polygon","verticesCount","isConvex","polygonActions","ev","PolygonsList","addCollisionMask","newPolygon","Polygon2d","createRectangle","removeFromVectorPolygon2d","vertexCircle","CollisionMasksPreview","svgRef","draggedVertex","setDraggedVertex","confinePointToFrame","freeX","freeY","maxX","maxY","frameX","frameY","svgStyle","pointOnScreen","createSVGPoint","screenToSvgMatrix","getScreenCTM","inverse","pointOnSvg","matrixTransform","vertex","onStartDragVertex","shapePainterObject","areCoordinatesAbsolute","setCoordinatesRelative","setCoordinatesAbsolute","isClearedBetweenFrames","setClearBetweenFrames","getOutlineColorR","getOutlineColorG","getOutlineColorB","setOutlineColor","getOutlineOpacity","setOutlineOpacity","getOutlineSize","setOutlineSize","getFillColorR","getFillColorG","getFillColorB","setFillColor","getFillOpacity","setFillOpacity","getRendererType","rendererType","setRendererType","Quad","setParticleTexture","getRendererParam1","setRendererParam1","getRendererParam2","setRendererParam2","getParticleTexture","setParticleRed1","setParticleGreen1","setParticleBlue1","getParticleAlpha1","setParticleAlpha1","setParticleRed2","setParticleGreen2","setParticleBlue2","getParticleAlpha2","setParticleAlpha2","isRenderingAdditive","setRenderingAdditive","setRenderingAlpha","getDestroyWhenNoParticles","setDestroyWhenNoParticles","getMaxParticleNb","setMaxParticleNb","getTank","setTank","getFlow","setFlow","getEmitterForceMin","setEmitterForceMin","getEmitterForceMax","setEmitterForceMax","setConeSprayAngle","getZoneRadius","setZoneRadius","getParticleGravityX","setParticleGravityX","getParticleGravityY","setParticleGravityY","getParticleLifeTimeMin","setParticleLifeTimeMin","getParticleLifeTimeMax","setParticleLifeTimeMax","getParticleSize1","setParticleSize1","getParticleSize2","setParticleSize2","getParticleAngle1","setParticleAngle1","getParticleAngle2","setParticleAngle2","objectAsGdObject","castObject","gdObject","extraInformation","BehaviorsEditor","newBehaviorDialogOpen","setNewBehaviorDialogOpen","allBehaviorNames","_addBehavior","hasBehaviorWithType","hasBehaviorNamed","addBehaviorAndRequiredBehaviors","onRemoveBehavior","dependentBehaviors","findDependentBehaviorNames","removeBehavior","behaviorTypeName","BehaviorComponent","BehaviorsEditorService","getEditor","enabledTutorialIds","iconUrl","renameBehavior","onChangeBehaviorName","BehaviorListItem","NewBehaviorDialog","showDeprecated","setShowDeprecated","setIsInstalling","extensionInstallTime","setExtensionInstallTime","shouldAutofocusSearchbar","deprecatedBehaviorsInformation","filteredBehaviorMetadata","behaviors","deprecatedBehaviors","chooseBehavior","showMessageBox","canBehaviorBeUsed","hasSearchNoResult","EmptyBehaviorsPlaceholder","SetupGridDialog","previousOptions","xScrollbar","yScrollbar","FullSizeInstancesEditorWithScrollbars","_editor","xValue","yValue","xMin","xMax","yMin","yMax","_handleXChange","_handleYChange","_setAndAdjust","_handleViewPositionChange","throttle","maxLength","TagsButton","additionalWork","getInfoBarDetails","getLightingLayer","insertNewLayer","setLightingLayer","lightingLayer","infoBarEvent","shell","ResourcesEditor","_resourcesList","selectedResource","deleteResource","_removeUnusedResources","selectedResourceName","removedResourceNames","ProjectResourcesAdder","getAllUseless","removeAllUseless","_onResourceSelected","_removeAllResourcesWithInvalidPath","openProjectFolder","openItem","onOpenProjectFolder","onOpenProperties","canDelete","onResourcePathUpdated","checkMissingPaths","onSelectResource","resourcesList","onRemoveUnusedResources","onRemoveAllResourcesWithInvalidPath","lazyRequireGlob","hasElectron","getResourceName","ResourcesList","renamedResource","resourcesWithErrors","_deleteResource","_locateResourceFile","resourceFolderPath","_openResourceFile","resourceFilePath","_copyResourceFilePath","_scanForNewResources","createResource","glob","allFiles","filesToCheck","filePath","relative","filePathsNotInResources","findFilesNotInResources","relativeFilePath","_getResourceThumbnail","destinationResource","moveResource","getResourcePosition","_renderResourceMenuTemplate","allResourcesList","filteredList","filterResourcesList","displayLocaleMetadata","localeMetadata","languageCode","renderLanguageSelectOption","translationRatio","percent","isStarted","languageNativeName","languageName","LanguageDialog","languageDidChange","localesToDisplay","LocalesMetadata","goodProgressLocales","startedLocales","isLoadingLanguage","OpenFromStorageProviderDialog","OpenConfirmDialog","onConfirm","interactionMade","pendingConfirmationPromiseResolve","openConfirmDialogOpen","openOpenConfirmDialog","doesInitialOpenRequireUserInteraction","closeAndResolveWith","proceed","gdVersion","initialValue","useStateWithCB","generateProjectItemOptions","enumerate","handlers","ScopedCommandManager","centralCommandManager","setActive","_centralManager","registerAllCommandsToCentralManager","deregisterAllCommandsFromCentralManager","cmd","CommandsContextScopedProvider","centralManager","scopedManager","setDebuggerIds","setHotReloadLogs","HotReloadLogsDialog","shouldDisplayDialogForLogs","ipc","richPresenceStartTimestamp","updateDiscordRichPresence","details","startTimestamp","largeImageKey","largeImageText","lastCallTime","setLastCallTime","NewResourceDialog","possibleResourceSources","standaloneTabResourceSources","displayTab","importTabResourceSources","initialSource","isInitialSourceHeadless","selectResourcesHeadless","renderComponent","catalogs","_loadCatalog","catalog","_loadLanguage","setupI18n","getTranslation","webpackAsyncContext","req","__webpack_require__","o","ExtensionsProperties","propertyList","getExtensionProperties","getAllExtensionProperties","getAllProperties","LoadingScreenEditor","loadingScreen","getBackgroundImageResourceName","setBackgroundImageResourceName","getBackgroundColor","getBackgroundFadeInDuration","setBackgroundFadeInDuration","isGDevelopSplashShown","showGDevelopSplash","getGDevelopLogoStyle","setGDevelopLogoStyle","getLogoAndProgressLogoFadeInDelay","setLogoAndProgressLogoFadeInDelay","getLogoAndProgressFadeInDuration","setLogoAndProgressFadeInDuration","getShowProgressBar","setShowProgressBar","getProgressBarMinWidth","setProgressBarMinWidth","getProgressBarWidthPercent","setProgressBarWidthPercent","getProgressBarMaxWidth","setProgressBarMaxWidth","getProgressBarHeight","setProgressBarHeight","getProgressBarColor","setProgressBarColor","getMinDuration","setMinDuration","ProjectPropertiesDialog","initialProperties","gameResolutionWidth","gameResolutionHeight","adaptGameResolutionAtRuntime","getAdaptGameResolutionAtRuntime","authorIds","getAuthorIds","getOrientation","pixelsRounding","getPixelsRounding","sizeOnStartupMode","getSizeOnStartupMode","minFPS","getMinimumFPS","maxFPS","getMaximumFPS","isFolderProject","useDeprecatedZeroAsDefaultZOrder","loadPropertiesFromProject","setGameResolutionWidth","setGameResolutionHeight","setAdaptGameResolutionAtRuntime","setAuthor","setVersion","setPackageName","setOrientation","setScaleMode","setPixelsRounding","setSizeOnStartupMode","setMinFPS","setMaxFPS","setIsFolderProject","setUseDeprecatedZeroAsDefaultZOrder","onCancelLoadingScreenChanges","getLoadingScreen","newProperties","setGameResolutionSize","setMinimumFPS","setMaximumFPS","setFolderProject","applyPropertiesToProject","ExtensionsSearchDialog","extensionWasInstalled","setExtensionWasInstalled","installDisplayedExtension","wasExtensionImported","wasExtensionInstalled","ProjectManagerCommands","onOpenProjectProperties","onOpenProjectLoadingScreen","onOpenProjectVariables","onOpenPlatformSpecificAssetsDialog","onOpenResourcesDialog","onOpenSearchExtensionDialog","noIndentNestedList","itemTextField","ProjectStructureItem","indentNestedItems","Item","buildExtraMenuTemplate","addLabel","onDuplicate","canMoveUp","onMoveUp","canMoveDown","onMoveDown","ProjectManager","editedPropertiesLayout","editedVariablesLayout","renamedItemKind","renamedItemName","projectPropertiesDialogOpen","projectPropertiesDialogInitialTab","projectVariablesEditorOpen","extensionsSearchDialogOpen","layoutPropertiesDialogOpen","_openProjectProperties","_openProjectLoadingScreen","_openProjectVariables","_openSearchExtensionDialog","_copyLayout","_cutLayout","_pasteLayout","copiedLayout","newLayout","_duplicateLayout","_addLayout","_onOpenLayoutProperties","_onOpenLayoutVariables","_addExternalEvents","_addExternalLayout","_addEventsFunctionsExtension","_moveUpLayout","swapLayouts","_moveDownLayout","_copyExternalEvents","_cutExternalEvents","_pasteExternalEvents","copiedExternalEvents","newExternalEvents","_duplicateExternalEvents","_moveUpExternalEvents","swapExternalEvents","_moveDownExternalEvents","_copyExternalLayout","_cutExternalLayout","_pasteExternalLayout","copiedExternalLayout","newExternalLayout","_duplicateExternalLayout","_moveUpExternalLayout","swapExternalLayouts","_moveDownExternalLayout","_copyEventsFunctionsExtension","_cutEventsFunctionsExtension","_duplicateEventsFunctionsExtension","_pasteEventsFunctionsExtension","copiedEventsFunctionsExtension","_moveUpEventsFunctionsExtension","swapEventsFunctionsExtensions","_moveDownEventsFunctionsExtension","_onSearchChange","_onRequestSearch","hasMainMenu","forceOpen","_renderMenu","VariableTree","SceneVariablesDialog","AuthenticatedUserProfileDetails","emailSent","setEmailSent","sendEmail","usage","ContributionLine","ExamplesAccordion","examples","exampleError","ExtensionsAccordion","extensionError","AssetsAccordion","setExtensions","setExamples","setExtensionError","setExampleError","fetchUserExtensions","fetchUserExamples","GameCard","isCurrentGame","onOpenAnalytics","onOpenMonetization","CardHeader","CardActions","GamesList","games","setGames","openedGame","setOpenedGame","openedGameInitialTab","setOpenedGameInitialTab","loadGames","projectUuid","thisGame","displayedGames","ProfileDialog","SubscriptionDetails","ContributionsDetails","UsagesDetails","BehaviorPropertiesEditor","ShapePreview","draggedIndex","frameOffsetTop","frameOffsetLeft","polygonOrigin","onMoveVertex","dimensionA","dimensionB","renderBox","renderCircle","halfLength","renderEdge","onVertexDown","renderPolygon","PolygonEditor","edges","v1","v2","zProductIsPositive","alignedX","alignedY","onChangeVertexX","onChangeVertexY","_isPolygonConvex","NumericProperty","BitGroupEditor","ButtonGroup","disableElevation","bits","bit","Button","Physics2Editor","image","setImage","isBitEnabled","bitsValue","enableBit","layersValues","masksValues","newX","newY","idx","shortcutBox","DetectShortcutDialog","setShortcutString","setIsValid","onSet","Typography","commandText","shortcutChip","ShortcutsListRow","ListItemSecondaryAction","isClashing","onEditShortcut","isDefault","onResetShortcut","ShortcutsList","editedShortcut","setEditedShortcut","areaWiseCommands","shortcutStringToCommands","areaName","userShortcut","defaultShortcut","sortCommandsIntoAreasAndGetReverseMap","commandPaletteShortcut","onReset","shortcutDisplayName","clashingCommands","hasClash","resetShortcut","PreferencesDialog","codeEditorTheme","Badge","onBackgroundColorChanged","TreeTable","SortableLayerRow","effectsCount","onEditEffects","onChangeVisibility","InlineCheckbox","badgeContent","LayersListBody","_onLayerModified","layersCount","containerLayersList","removeLayer","BackgroundColorRow","SortableLayersListBody","LayersList","_addLayer","_addLightingLayer","isLightingLayerPresent","hasLightingLayer","moveLayer","generateLayoutObjectsOptions","onChooseArg","iconSrc","useObjectsListCommands","useObjectGroupsListCommands","useLayersListCommands","UseSceneEditorCommands","GDevelopLogo","ScrollBackground","innerContainer","centerContainer","logoPaper","StartPage","optionText","listItemContainer","AutocompletePicker","setOpen","getItemText","areaText","autoHighlight","getItemIcon","getItemHint","scrollPaper","CommandPalette","setMode","selectedCommand","selectCommand","handleCommandChoose","handleOptionChoose","openPalette","hideBackdrop","InstructionSelector","parametersEditor","InstructionEditor","chooseType","_instructionParametersEditor","downloadSvgAsBase64","responseType","btoa","Uint8Array","byte","fromCharCode","HelpPathTextField","helpPath","onChangeHelpPath","isAbsoluteUrl","isRelativePath","ExtensionOptionsEditor","onLoadChange","resourceStoreOpen","setResourceStoreOpen","getPreviewIconUrl","setPreviewIconUrl","getShortDescription","setShortDescription","setHelpPath","base64Svg","checkNameExists","deps","ExtensionDependenciesEditor","TableContainer","getExportName","newExportName","setExportName","newVersion","getDependencyType","__","setDependencyType","removeDependencyAt","openGitHubIssue","OptionsEditorDialog","setIsLoading","setExportDialogOpen","writeEventsFunctionsExtension","exportExtension","iconContainer","ResourcePreview","GenericIconPreview","ResourcePropertiesEditor","_chooseResourcePath","resourceSchema","_renderPreview","_renderResourcesProperties","PreviewButtons","MainFrameToolbar","fixSomeHtmlCharacters","apiKey","algoliaOptions","hitsPerPage","DocSearchArea","client","algoliasearch","_handleSearchTextChange","_launchSearchRequest","indexName","query","hits","_renderResult","hierarchy","lvl0","lvl1","lvl2","lvl3","lvl4","lvl5","lvl6","objectID","HelpFinder","_sendHelpSearch","sendHelpSearch","sendHelpFinderOpened","SubscriptionPendingDialog","hasPlan","descriptionText","bulletIcon","bulletText","SubscriptionDialog","subscriptionPendingDialogOpen","choosePlan","plan","sendChoosePlanClicked","stripeSubscriptionId","handleUpdatedSubscriptionSuccess","handleUpdatedSubscriptionFailure","_isLoading","sendSubscriptionDialogShown","_renderPrice","CardContent","descriptionBullet","isLocalAppOnly","ChangelogDialog","ChangelogDialogContainer","defaultOpen","ToolbarCommands","getEventsFunctionName","EventsFunctionsList","renamedEventsFunction","_togglePrivate","_deleteEventsFunction","askForConfirmation","removeEventsFunction","_onEventsFunctionModified","destinationEventsFunction","moveEventsFunction","getEventsFunctionPosition","_copyEventsFunction","_cutEventsFunction","_pasteEventsFunction","copiedEventsFunction","newEventsFunction","insertNewEventsFunction","_renderEventsFunctionMenuTemplate","_addNewEventsFunction","filterEventFunctionsList","enumerateEventsFunctions","getEventsBasedBehaviorName","EventsBasedBehaviorsList","renamedEventsBasedBehavior","_deleteEventsBasedBehavior","_onEventsBasedBehaviorModified","destinationEventsBasedBehavior","getPosition","_copyEventsBasedBehavior","_cutEventsBasedBehavior","_pasteEventsBasedBehavior","copiedEventsBasedBehavior","newEventsBasedBehavior","_renderEventsBasedBehaviorMenuTemplate","_addNewEventsBasedBehavior","filterEventsBasedBehaviorsList","timeField","timeIcon","AnimationPreview","currentFrameIndex","currentFrameElapsedTime","paused","timeBetweenFrames","nextUpdate","previousUpdateTimeInMs","replay","play","pause","_updateAnimation","updateTimeInMs","elapsedTime","spritesContainer","newFrameIndex","newFrameElapsedTime","onChangeTimeBetweenFrames","precision","spacer","formatTime","DirectionTools","timeError","previewOpen","saveTimeBetweenFrames","newTime","newTimeIsValid","setLooping","openPreview","imageResourceExternalEditors","openPropertiesPanel","canDeleteSelection","setupGrid","EditVariableRow","Copy","Paste","UnknownEvent","unknownEvent","WhileEvent","registerEvent","renderFunction","setupAutocompletions","monaco","importAllJsFilesFromFolder","folderPath","readdir","filenames","endsWith","readFile","fileError","languages","typescript","javascriptDefaults","addExtraLib","runtimePath","runtimeTypesPath","runtimeLibsPath","runtimePixiRenderersPath","runtimeCocosRenderersPath","runtimeHowlerSoundManagerPath","runtimeCocosSoundManagerPath","runtimeFontfaceobserverFontManagerPath","extensionsPath","eventToolsPath","folderNames","monacoEditorOptions","scrollBeyondLastLine","minimap","monacoCompletionsInitialized","monacoThemesInitialized","CodeEditor","MonacoEditor","setupEditorThemes","defineTheme","setupEditorCompletions","setCompilerOptions","ScriptTarget","ES6","allowNonTsExtensions","allowJs","checkJs","_handleContextMenu","loadMonacoEditor","MonacoEnvironment","getWorkerUrl","workerId","handleLoadError","editorWillMount","editorDidMount"],"mappings":"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LgB,CAChBC,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,WAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,uBAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCrCpB,GACbpa,KAAM,UACNuH,UAAW,UACX6gJ,UAhJgB,CAChBC,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,gBAET,CACED,WAAY,SACZ5nJ,UAAW,YACX6nJ,MAAO,qBAET,CACED,WAAY,SACZ5nJ,UAAW,mBACX6nJ,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,gBAET,CACED,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,iBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,WAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,4DAET,CACED,WAAY,SACZC,MAAO,aAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,sDAET,CACED,WAAY,SACZC,MAAO,uCAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,UAC/B,qCAAsC,UACtC,kCAAmC,aCyCxB,GACbpa,KAAM,WACNuH,UAAW,WACX6gJ,UArLgB,CAChBC,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,WAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,uBAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCxCpB,GACbpa,KAAM,iBACNuH,UAAW,iBACX6gJ,UAzIgB,CAChBC,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,WAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,WAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,mCAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCGpB,GACbpa,KAAM,kBACNuH,UAAW,kBACX6gJ,UAxIgB,CAChBC,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,WAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,mCAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aC0EpB,GACbpa,KAAM,cACNuH,UAAW,cACX6gJ,UA9MgB,CAChBC,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,QAET,CACErwG,WAAY,SACZqwG,MAAO,mCAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,WAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,UAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,4BAET,CACE7nJ,UAAW,SACX6nJ,MAAO,sBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,oCAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,iDAET,CACE7nJ,UAAW,YACX6nJ,MAAO,qBAET,CACE7nJ,UAAW,YACX6nJ,MAAO,oBAET,CACE7nJ,UAAW,mBACX6nJ,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,2BAET,CACED,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,gDAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,sCAET,CACED,WAAY,SACZC,MAAO,yCAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,qCAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,0CAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aC6CpB,GACbpa,KAAM,SACNuH,UAAW,SACX6gJ,UAvPgB,CAChBC,KAAM,KACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZ5nJ,UAAW,SACX6nJ,MAAO,WAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,8BAET,CACED,WAAY,SACZ5nJ,UAAW,cACX6nJ,MAAO,yBAET,CACED,WAAY,SACZ5nJ,UAAW,cACX6nJ,MAAO,+BAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,mBAET,CACE7nJ,UAAW,OACX6nJ,MAAO,WAET,CACE7nJ,UAAW,OACX6nJ,MAAO,WAET,CACE7nJ,UAAW,OACX6nJ,MAAO,oBAET,CACE7nJ,UAAW,OACX6nJ,MAAO,qBAET,CACE7nJ,UAAW,OACX6nJ,MAAO,oBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,gBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,oBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,gCAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAET,CACED,WAAY,SACZC,MAAO,6BAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,mCAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,yBAET,CACE7nJ,UAAW,OACX6nJ,MAAO,eAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACE7nJ,UAAW,SACX6nJ,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,cAET,CACED,WAAY,SACZC,MAAO,iBAET,CACE7nJ,UAAW,OACX6nJ,MAAO,eAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACE7nJ,UAAW,YACX6nJ,MAAO,oBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,mBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,mBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,8BAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,4BAET,CACED,WAAY,SACZC,MAAO,cAGXruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,UAC9B,iCAAkC,UAClC,0BAA2B,UAC3B,8BAA+B,aCPpB,GACbpa,KAAM,YACNuH,UAAW,YACX6gJ,UA5OgB,CAChBC,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,8BAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,2BAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZ5nJ,UAAW,OACX6nJ,MAAO,yBAET,CACEC,WAAY,SACZD,MAAO,eAET,CACED,WAAY,SACZC,MAAO,kBAET,CACE7nJ,UAAW,SACX6nJ,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACE7nJ,UAAW,OACX6nJ,MAAO,eAET,CACE7nJ,UAAW,YACX6nJ,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAGXruI,OAAQ,CACN,oCAAqC,UACrC,0BAA2B,UAC3B,oBAAqB,UACrB,wBAAyB,UACzB,+BAAgC,UAChC,qCAAsC,UACtC,8BAA+B,UAC/B,oCAAqC,UACrC,8BAA+B,UAC/B,0BAA2B,UAC3B,sBAAuB,UACvB,oBAAqB,UACrB,oBAAqB,UACrB,kCAAmC,UACnC,6BAA8B,UAC9B,sCAAuC,UACvC,sCAAuC,UACvC,iCAAkC,UAClC,6BAA8B,UAC9B,qCAAsC,UACtC,6BAA8B,UAC9B,sCAAuC,UACvC,kCAAmC,UACnC,iCAAkC,UAClC,uCAAwC,UACxC,yBAA0B,UAC1B,qBAAsB,UACtB,2BAA4B,UAC5B,uBAAwB,UACxB,gCAAiC,UACjC,4BAA6B,UAC7B,4BAA6B,UAC7B,yBAA0B,UAC1B,qBAAsB,UACtB,6BAA8B,UAC9B,qCAAsC,UACtC,mCAAoC,UACpC,+BAAgC,UAChC,0BAA2B,UAC3B,kCAAmC,UACnC,+BAAgC,UAChC,iCAAkC,UAClC,+BAAgC,UAChC,2BAA4B,UAC5B,8BAA+B,UAC/B,oCAAqC,UACrC,yCAA0C,UAC1C,2CAA4C,UAC5C,6BAA8B,UAC9B,+CAAgD,UAChD,gDAAiD,UACjD,0CAA2C,UAC3C,+CAAgD,UAChD,mDAAoD,UACpD,8CAA+C,UAC/C,oDAAqD,UACrD,yCAA0C,UAC1C,sCAAuC,UACvC,wCAAyC,UACzC,sCAAuC,UACvC,wCAAyC,UACzC,qCAAsC,UACtC,yBAA0B,UAC1B,iCAAkC,UAClC,6BAA8B,UAC9B,iCAAkC,UAClC,0CAA2C,UAC3C,yCAA0C,aCqK/B,GACbpa,KAAM,WACNuH,UAAW,WACX6gJ,UA7YgB,CAChBC,KAAM,UACNC,SAAS,EACTC,MAAO,CACL,CACEC,WAAY,SACZC,MAAO,QAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZ5nJ,UAAW,UACX6nJ,MAAO,WAET,CACED,WAAY,SACZ5nJ,UAAW,UACX6nJ,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,QAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZC,MAAO,cAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,WAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,UAET,CACED,WAAY,SACZC,MAAO,yBAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,oBAET,CACED,WAAY,SACZC,MAAO,QAET,CACED,WAAY,SACZC,MAAO,QAET,CACED,WAAY,SACZC,MAAO,YAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,kCAET,CACED,WAAY,SACZC,MAAO,iCAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,QAET,CACED,WAAY,SACZC,MAAO,iDAET,CACED,WAAY,SACZC,MAAO,uBAET,CACED,WAAY,SACZC,MAAO,sBAET,CACED,WAAY,SACZC,MAAO,eAET,CACED,WAAY,SACZC,MAAO,+BAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,iCAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,qBAET,CACED,WAAY,SACZC,MAAO,8CAET,CACED,WAAY,SACZC,MAAO,aAET,CACED,WAAY,SACZC,MAAO,eAET,CACED,WAAY,SACZC,MAAO,gBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,mBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,kBAET,CACED,WAAY,SACZC,MAAO,wBAET,CACED,WAAY,SACZC,MAAO,iBAET,CACED,WAAY,SACZC,MAAO,6BAET,CACED,WAAY,SACZC,MAAO,gCAET,CACED,WAAY,SACZC,MAAO,0BAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,mBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,kBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,sBAET,CACED,WAAY,SACZpwG,WAAY,SACZqwG,MAAO,yBAET,CACED,WAAY,SACZC,MACE,wEAEJ,CACED,WAAY,SACZC,MACE,6GAEJ,CACED,WAAY,SACZC,MACE,4IAEJ,CACED,WAAY,SACZC,MACE,iLAEJ,CACED,WAAY,SACZC,MACE,uFAEJ,CACED,WAAY,SACZC,MACE,wFAEJ,CACED,WAAY,SACZC,MACE,yGAEJ,CACED,WAAY,SACZC,MAAO,+DAET,CACED,WAAY,SACZC,MAAO,iDAET,CACED,WAAY,SACZC,MACE,mFAEJ,CACED,WAAY,SACZC,MACE,iFAEJ,CACED,WAAY,SACZC,MACE,kHAEJ,CACED,WAAY,SACZC,MACE,2EAEJ,CACED,WAAY,SACZC,MACE,oGAEJ,CACED,WAAY,SACZC,MAAO,kDAET,CACED,WAAY,SACZC,MACE,sEAEJ,CACED,WAAY,SACZC,MACE,8EAEJ,CACED,WAAY,SACZC,MACE,uKAEJ,CACED,WAAY,SACZ5nJ,UAAW,UACX6nJ,MAAO,oEAET,CACED,WAAY,SACZC,MAAO,yCAET,CACED,WAAY,SACZC,MACE,uEAEJ,CACED,WAAY,SACZC,MACE,iIAEJ,CACED,WAAY,SACZC,MACE,sFAEJ,CACED,WAAY,SACZC,MACE,mHAEJ,CACED,WAAY,SACZC,MACE,6HAEJ,CACED,WAAY,SACZC,MACE,8HAEJ,CACED,WAAY,SACZC,MACE,8EAEJ,CACED,WAAY,SACZC,MACE,kFAGNruI,OAAQ,CACN,oBAAqB,UACrB,oBAAqB,UACrB,6BAA8B,YAC9B,qCAAsC,YACtC,iCAAkC,YAClC,0BAA2B,UAC3B,8BAA+B,UAC/B,+BAAgC,UAChC,qCAAsC,UACtC,kCAAmC,eCrYvC,kCAoBA,IAAMuuI,EAAiC,CAErC,CACE3oJ,KAAM,gBACNuH,UAAW,MAEb,CACEvH,KAAM,qBACNuH,UAAW,WAGbqhJ,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAGWC,EAAe,kBAAMV,I,oDCzC5BW,EAAe,IAAIv3I,IAAI,CAE3B,QAGA,QACA,QACA,QACA,QACA,UCTa,eAAwBpU,GACrC,IAAM4rJ,EAAa,IAA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WAAS,EACT6C,kBAAmB2lB,EACnBnlB,mBACEilB,EAAoBA,EAAkBM,0BAAuB1sB,EAE/DuH,MAAOA,EACP8D,IAAK,SAAAC,GAAK,OAAK,EAAKR,OAASQ,GAC7BrE,SAAU,SAACmX,EAAGtY,EAAGyB,GAAP,OAAiB,EAAKjI,MAAM2H,SAASM,KAE/C,kBAAC,IAAD,CAAcA,MAAM,OAAO6O,YAAa,wBACxC,kBAAC,IAAD,CAAc7O,MAAM,QAAQ6O,YAAa,2BACzC,kBAAC,IAAD,CACE7O,MAAM,SACN6O,YAAa,kE,GA7BiB0Z,aAoC3Bm9D,EAAoB,SAAC,GAGG,IAFnC1lF,EAEkC,EAFlCA,MACA4mK,EACkC,EADlCA,sBAEA,OAAO5mK,GAGL,kBAAC4mK,EAAD,CAAuBW,SAAO,GAC5B,kBAAC,QAAD,iC,oKC9CAC,EAAW,CACf,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,OACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,WACA,WACA,YACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SACA,QACA,SACA,OACA,MACA,SACA,WACA,MACA,OACA,SACA,SACA,MACA,WACA,WACA,SACA,YACA,iBACA,iBACA,eACA,OACA,QACA,KACA,OACA,aACA,cACA,WACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,MACA,QACA,WACA,WACA,OACA,OACA,SACA,UAGIC,EAAa,SAACvrK,GAAD,OAA4C,IAA3BsrK,EAASngK,QAAQnL,IAEhConF,E,sKAIbtpF,KAAKuJ,QAAQvJ,KAAKuJ,OAAO/D,U,+BAGrB,IAAD,SAQHxF,KAAKjC,MANPiI,EAFK,EAELA,MACAN,EAHK,EAGLA,SACAulB,EAJK,EAILA,SACAJ,EALK,EAKLA,kBACAppB,EANK,EAMLA,eACAJ,EAPK,EAOLA,QAGF,OACE,kBAAC,IAA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D,oBAAqB,CACpB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,IAED,mBAAoB,CACnB,KACA,KAGF,SAAS0tM,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAE7tM,EAAK2tM,GAC9B,OAAOltL,QAAQ1X,UAAU2vB,MAAK,WAC7B,IAAI3f,EAAI,IAAI4H,MAAM,uBAAyBgtL,EAAM,KAEjD,MADA50L,EAAEu7B,KAAO,mBACHv7B,KAIR,IAAI28D,EAAM11E,EAAI2tM,GAAM3qM,EAAK0yE,EAAI,GAC7B,OAAOk4H,EAAoB70L,EAAE28D,EAAI,IAAIh9C,MAAK,WACzC,OAAOk1K,EAAoBl8H,EAAE1uE,EAAI,MAGnC0qM,EAAoBl9K,KAAO,W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","file":"static/js/1.83fcae44.chunk.js","sourcesContent":["// @flow\nimport * as React from 'react';\nconst marginsSize = 4;\n\n/**\n * A Line in the standard GDevelop grid to position components.\n * Check `Layout` first to see if there is already a layout made\n * specifically for your components (like `TextFieldWithButton`).\n */\nexport const Line = (props: {|\n  children?: React.Node,\n  noMargin?: boolean,\n  alignItems?: string,\n  justifyContent?: string,\n  expand?: boolean,\n  overflow?: string,\n|}) => (\n  <div\n    style={{\n      display: 'flex',\n      marginTop: props.noMargin ? 0 : marginsSize,\n      marginBottom: props.noMargin ? 0 : marginsSize,\n      alignItems: props.alignItems,\n      justifyContent: props.justifyContent,\n      flex: props.expand ? 1 : undefined,\n      overflow: props.overflow,\n    }}\n  >\n    {props.children}\n  </div>\n);\n\n/**\n * A Column in the standard GDevelop grid to position components.\n * Check `Layout` first to see if there is already a layout made\n * specifically for your components (like `TextFieldWithButton`).\n */\nexport const Column = (props: {|\n  children?: React.Node,\n  noMargin?: boolean,\n  alignItems?: string,\n  justifyContent?: string,\n  expand?: boolean,\n  useFullHeight?: boolean,\n  noOverflowParent?: boolean,\n|}) => (\n  <div\n    style={{\n      display: 'flex',\n      marginLeft: props.noMargin ? 0 : marginsSize * 2,\n      marginRight: props.noMargin ? 0 : marginsSize * 2,\n      flexDirection: 'column',\n      alignItems: props.alignItems || 'stretch',\n      justifyContent: props.justifyContent,\n      flex: props.expand ? 1 : undefined,\n      // Setting the min-height to 0 forces the flex to use\n      // all the height (if set to flex: 1) and to *not* grow\n      // larger than the parent.\n      minHeight: props.useFullHeight ? '0' : undefined,\n      // In some cases, if some flex children cannot contract to\n      // within `Column`, it is possible for Column to overflow\n      // outside its parent. Setting min-width to 0 avoids this.\n      // See: https://stackoverflow.com/a/36247448/6199068\n      minWidth: props.noOverflowParent ? 0 : undefined,\n    }}\n  >\n    {props.children}\n  </div>\n);\n\n/**\n * A Spacer in the standard GDevelop grid to position components.\n * Check `Layout` first to see if there is already a layout made\n * specifically for your components (like `TextFieldWithButton`).\n */\nexport const Spacer = () => (\n  <span\n    style={{\n      width: marginsSize,\n      height: marginsSize,\n      flexShrink: 0, // Ensure the spacer is not shrinked when in a flex container\n    }}\n  />\n);\n","// @flow\nimport * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\ntype Props = {|\n  /** The text to display. */\n  children: ?React.Node,\n  /** Size of the text. `body` if not specified. */\n  size?: 'body' | 'body2' | 'title' | 'bold-title',\n  /** The text alignment. */\n  align?: 'inherit' | 'left' | 'center' | 'right' | 'justify',\n  /** Don't shrink the text if there is not enough place in a flex container. */\n  noShrink?: boolean,\n  /** Remove the margin around the text. */\n  noMargin?: boolean,\n  /** By default the text is a paragraph (`p`). It can be shown inline  */\n  displayInlineAsSpan?: boolean,\n  /** A limited set of styling is supported. */\n  style?: {|\n    // Margins\n    marginLeft?: number,\n    marginRight?: number,\n\n    // Allow to specify that the text should break words\n    overflow?: 'hidden',\n    overflowWrap?: 'break-word',\n    whiteSpace?: 'nowrap' | 'pre-wrap',\n    textOverflow?: 'ellipsis',\n\n    // Allow to expand the text\n    flex?: 1,\n\n    // Allow to change color\n    opacity?: number,\n  |},\n|};\n\n// A Text to be displayed in the app. Prefer using this\n// than a `<p>`/`<span>` or `<div>` as this will help to maintain\n// consistency of text in the whole app.\nexport default ({\n  children,\n  style,\n  size,\n  align,\n  noShrink,\n  noMargin,\n  displayInlineAsSpan,\n}: Props) => (\n  <Typography\n    variant={\n      size === 'bold-title'\n        ? 'h5'\n        : size === 'title'\n        ? 'h6'\n        : size === 'body2'\n        ? 'body2'\n        : 'body1'\n    }\n    component={displayInlineAsSpan ? 'span' : undefined}\n    style={{\n      ...style,\n      display: displayInlineAsSpan ? 'inline-block' : undefined,\n      flexShrink: noShrink ? 0 : undefined,\n      marginTop: noMargin ? 0 : 6,\n      marginBottom: noMargin ? 0 : 6,\n    }}\n    align={align || 'inherit'}\n  >\n    {children}\n  </Typography>\n);\n","// @flow\nimport * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Spacer } from './Grid';\n\n// We support a subset of the props supported by Material-UI v0.x FlatButton\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  label: React.Node,\n  onClick: ?(ev: any) => void,\n  primary?: boolean,\n  disabled?: boolean,\n  keyboardFocused?: boolean,\n  fullWidth?: boolean,\n  icon?: React.Node,\n  style?: {|\n    marginTop?: number,\n    marginBottom?: number,\n    marginLeft?: number,\n    marginRight?: number,\n    margin?: number,\n    flexShrink?: 0,\n  |},\n  target?: '_blank',\n|};\n\n/**\n * A \"flat\" button based on Material-UI button.\n */\nexport default class FlatButton extends React.Component<Props, {||}> {\n  render() {\n    const { label, primary, icon, keyboardFocused, ...otherProps } = this.props;\n\n    // In theory, focus ripple is only shown after a keyboard interaction\n    // (see https://github.com/mui-org/material-ui/issues/12067). However, as\n    // it's important to get focus right in the whole app, make the ripple\n    // always visible to be sure we're getting focusing right.\n    const focusRipple = true;\n\n    return (\n      <Button\n        size=\"small\"\n        color={primary ? 'primary' : 'default'}\n        autoFocus={keyboardFocused}\n        focusRipple={focusRipple}\n        {...otherProps}\n      >\n        {icon}\n        {icon && <Spacer />}\n        {label}\n      </Button>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Button from '@material-ui/core/Button';\nimport { Spacer } from './Grid';\n\n// We support a subset of the props supported by Material-UI v0.x RaisedButton\n// They should be self descriptive - refer to Material UI docs otherwise.\nexport type RaisedButtonPropsWithoutOnClick = {|\n  label?: React.Node,\n  primary?: boolean,\n  disabled?: boolean,\n  fullWidth?: boolean,\n  icon?: React.Node,\n  style?: {|\n    marginTop?: number,\n    marginBottom?: number,\n    marginLeft?: number,\n    marginRight?: number,\n    margin?: number,\n    flexShrink?: 0,\n  |},\n|};\n\ntype Props = {|\n  ...RaisedButtonPropsWithoutOnClick,\n  onClick: ?() => void | Promise<void>,\n|};\n\n/**\n * A raised button based on Material-UI button.\n */\nexport default class RaisedButton extends React.Component<Props, {||}> {\n  render() {\n    const { label, primary, icon, ...otherProps } = this.props;\n\n    // In theory, focus ripple is only shown after a keyboard interaction\n    // (see https://github.com/mui-org/material-ui/issues/12067). However, as\n    // it's important to get focus right in the whole app, make the ripple\n    // always visible to be sure we're getting focusing right.\n    const focusRipple = true;\n\n    return (\n      <Button\n        variant=\"contained\"\n        size=\"small\"\n        color={primary ? 'primary' : 'default'}\n        focusRipple={focusRipple}\n        {...otherProps}\n      >\n        {icon}\n        {icon && <Spacer />}\n        {label}\n      </Button>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Dialog as DialogMaterialUI } from '@material-ui/core';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { useResponsiveWindowWidth } from '../Reponsive/ResponsiveWindowMeasurer';\nimport classNames from 'classnames';\nimport PreferencesContext from '../../MainFrame/Preferences/PreferencesContext';\n\nconst styles = {\n  defaultBody: {\n    overflowX: 'hidden',\n  },\n  noMarginBody: {\n    padding: 0,\n    overflowX: 'hidden',\n  },\n  flexRowBody: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  flexBody: {\n    display: 'flex',\n  },\n  actionsContainerWithSecondaryActions: {\n    display: 'flex',\n    justifyContent: 'space-between',\n  },\n  noTitleMargin: {\n    padding: 0,\n  },\n  fullHeightModal: {\n    minHeight: 'calc(100% - 64px)',\n  },\n};\n\n// We support a subset of the props supported by Material-UI v0.x Dialog\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  open?: boolean,\n  title?: React.Node,\n  actions?: React.Node,\n  secondaryActions?: React.Node,\n\n  /**\n   * Callback called when the dialog is asking to be closed\n   * (either by Escape key or a click outside, according to preferences).\n   * This is the default way of closing a dialog and should almost always be\n   * specified - unless your dialog is an representing an uninteruptible process.\n   *\n   * If `onApply` is also specified, this must be interpreted as a \"cancelling\"\n   * of changes.\n   */\n  onRequestClose?: () => void,\n  /**\n   * Is specified, will be called when the dialog is dismissed in a way where changes\n   * must be kept.\n   * This is not applicable to all dialogs. Some dialogs may have no `onApply` and just a\n   * single `onRequestClose`.\n   */\n  onApply?: ?() => void,\n\n  cannotBeDismissed?: boolean, // Currently unused.\n\n  children: React.Node, // The content of the dialog\n\n  // Display:\n  flexRowBody?: boolean, //Check if necessary\n  flexBody?: boolean,\n\n  // Size\n  maxWidth?: 'xs' | 'sm' | 'md' | 'lg' | 'xl' | false,\n  fullHeight?: boolean,\n\n  // Style:\n  noMargin?: boolean,\n  noTitleMargin?: boolean,\n|};\n\n// Help Flow to understand the type of the dialog content style.\ntype DialogContentStyle = {\n  padding?: 0,\n  overflowX?: 'hidden',\n  display?: 'flex',\n  flexDirection?: 'row',\n};\n\n/**\n * A enhanced material-ui Dialog that can have optional secondary actions\n * and no margins if required.\n */\nexport default (props: Props) => {\n  const {\n    onApply,\n    secondaryActions,\n    actions,\n    open,\n    onRequestClose,\n    maxWidth,\n    noMargin,\n    title,\n    children,\n    flexRowBody,\n    flexBody,\n    fullHeight,\n    noTitleMargin,\n  } = props;\n\n  const preferences = React.useContext(PreferencesContext);\n  const backdropClickBehavior = preferences.values.backdropClickBehavior;\n  const size = useResponsiveWindowWidth();\n\n  const dialogActions = secondaryActions ? (\n    <React.Fragment>\n      <div key=\"secondary-actions\">{secondaryActions}</div>\n      <div key=\"actions\">{actions}</div>\n    </React.Fragment>\n  ) : (\n    actions\n  );\n\n  const dialogContentStyle: DialogContentStyle = {\n    ...(noMargin ? styles.noMarginBody : styles.defaultBody),\n    ...((flexRowBody ? styles.flexRowBody : {}): DialogContentStyle),\n    ...((flexBody ? styles.flexBody : {}): DialogContentStyle),\n  };\n\n  return (\n    <DialogMaterialUI\n      open={open}\n      onClose={(event: any, reason: string) => {\n        if (reason === 'escapeKeyDown') {\n          if (onRequestClose) onRequestClose();\n        } else if (reason === 'backdropClick') {\n          if (backdropClickBehavior === 'cancel') {\n            if (onRequestClose) onRequestClose();\n          } else if (backdropClickBehavior === 'apply') {\n            if (onApply) onApply();\n            else if (onRequestClose) onRequestClose();\n          } else if (backdropClickBehavior === 'nothing') {\n            return;\n          }\n        }\n      }}\n      fullWidth\n      fullScreen={size === 'small'}\n      className={classNames({\n        'safe-area-aware-container': size === 'small',\n      })}\n      PaperProps={{ style: fullHeight ? styles.fullHeightModal : {} }}\n      maxWidth={maxWidth !== undefined ? maxWidth : 'md'}\n      disableBackdropClick={false}\n    >\n      {title && (\n        <DialogTitle style={noTitleMargin ? styles.noTitleMargin : undefined}>\n          {title}\n        </DialogTitle>\n      )}\n      <DialogContent style={dialogContentStyle}>{children}</DialogContent>\n      <DialogActions\n        style={\n          secondaryActions\n            ? styles.actionsContainerWithSecondaryActions\n            : undefined\n        }\n      >\n        {dialogActions}\n      </DialogActions>\n    </DialogMaterialUI>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { Spacer, Line, Column } from './Grid';\nimport { useResponsiveWindowWidth } from './Reponsive/ResponsiveWindowMeasurer';\n\ntype TextFieldWithButtonLayoutProps = {|\n  renderTextField: () => React.Node,\n  renderButton: (style: {|\n    marginTop?: number,\n    marginBottom?: number,\n    marginLeft?: number,\n    marginRight?: number,\n    margin?: number,\n    flexShrink?: 0,\n  |}) => React.Node,\n  margin?: 'none' | 'dense',\n  noFloatingLabelText?: boolean,\n|};\n\nconst buttonCommonStyles = {\n  // Ensure the button is not shrinked, even if the text field\n  // (in particular with a long helper text) is large.\n  flexShrink: 0,\n};\n\nconst textFieldWithButtonLayoutStyles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n    alignItems: 'flex-start', // Align from the top to stay at the same position when error/multiline\n  },\n  filledTextFieldWithLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 15, // Properly align with the text field (only dense \"filled\" text fields supported)\n    marginLeft: 8,\n  },\n  filledTextFieldWithoutLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 6, // Properly align with the text field (only dense \"filled\" text fields supported)\n    marginLeft: 8,\n  },\n  standardTextFieldWithLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 17, // Properly align with the text field (only \"standard\" text fields with margin \"none\" supported)\n    marginLeft: 8,\n  },\n  standardTextFieldWithoutLabelRightButtonMargins: {\n    ...buttonCommonStyles,\n    marginTop: 0, // Properly align with the text field (only \"standard\" text fields with margin \"none\" supported)\n    marginLeft: 8,\n  },\n};\n\n/**\n * Position a button on the right of a TextField.\n */\nexport const TextFieldWithButtonLayout = ({\n  margin,\n  noFloatingLabelText,\n  renderTextField,\n  renderButton,\n}: TextFieldWithButtonLayoutProps) => {\n  return (\n    <div style={textFieldWithButtonLayoutStyles.container}>\n      {renderTextField()}\n      {renderButton(\n        margin === 'none'\n          ? noFloatingLabelText\n            ? textFieldWithButtonLayoutStyles.standardTextFieldWithoutLabelRightButtonMargins\n            : textFieldWithButtonLayoutStyles.standardTextFieldWithLabelRightButtonMargins\n          : noFloatingLabelText\n          ? textFieldWithButtonLayoutStyles.filledTextFieldWithoutLabelRightButtonMargins\n          : textFieldWithButtonLayoutStyles.filledTextFieldWithLabelRightButtonMargins\n      )}\n    </div>\n  );\n};\n\ntype ResponsiveLineStackLayoutProps = {|\n  alignItems?: string,\n  justifyContent?: string,\n  expand?: boolean,\n  /** Prefer `noColumnMargin` if needed. */\n  noMargin?: boolean,\n  /** Remove the margin on the left and right of the column, when the layout is shown as a single column. */\n  noColumnMargin?: boolean,\n  children: React.Node,\n|};\n\nexport const ResponsiveLineStackLayout = ({\n  alignItems,\n  justifyContent,\n  expand,\n  noMargin,\n  noColumnMargin,\n  children,\n}: ResponsiveLineStackLayoutProps) => {\n  const windowWidth = useResponsiveWindowWidth();\n  let isFirstChild = true;\n\n  return windowWidth === 'small' ? (\n    <ColumnStackLayout noMargin={noMargin || noColumnMargin} expand>\n      {children}\n    </ColumnStackLayout>\n  ) : (\n    <Line\n      alignItems={alignItems}\n      justifyContent={justifyContent}\n      expand={expand}\n      noMargin={noMargin}\n    >\n      {React.Children.map(children, (child, index) => {\n        if (!child) return null;\n\n        const addSpacers = !isFirstChild;\n        isFirstChild = false;\n\n        return (\n          <React.Fragment>\n            {addSpacers && <Spacer />}\n            {child}\n          </React.Fragment>\n        );\n      })}\n    </Line>\n  );\n};\n\ntype ColumnStackLayoutProps = {|\n  alignItems?: string,\n  justifyContent?: string,\n  expand?: boolean,\n  noMargin?: boolean,\n  children: React.Node,\n|};\n\nexport const ColumnStackLayout = ({\n  alignItems,\n  justifyContent,\n  expand,\n  noMargin,\n  children,\n}: ColumnStackLayoutProps) => {\n  let isFirstChild = true;\n  return (\n    <Column\n      alignItems={alignItems}\n      justifyContent={justifyContent}\n      expand={expand}\n      noMargin={noMargin}\n    >\n      {React.Children.map(children, (child, index) => {\n        if (!child) return null;\n\n        const addSpacers = !isFirstChild;\n        isFirstChild = false;\n\n        return (\n          <React.Fragment>\n            {addSpacers && <Spacer />}\n            {child}\n          </React.Fragment>\n        );\n      })}\n    </Column>\n  );\n};\n","// @flow\n// Note: this file does not use export/imports and use Flow comments to allow its usage from Node.js\n\nconst mapFor = /*:: <T>*/ (\n  start /*: number */,\n  end /*: number */,\n  func /*: (number) => T */\n) /*:Array<T> */ => {\n  const result = [];\n  for (let i = start; i < end; i++) {\n    result.push(func(i));\n  }\n  return result;\n};\n\nconst mapReverseFor = /*:: <T>*/ (\n  start /*: number */,\n  end /*: number */,\n  func /*: (number) => T */\n) /*:Array<T> */ => {\n  const result = [];\n  for (let i = end - 1; i >= start; i--) {\n    result.push(func(i));\n  }\n  return result;\n};\n\n/*flow-include\ntype CppVector<T> = {\n  +size: () => number,\n  +at: (number) => T,\n}\n*/\n\nconst mapVector = /*:: <T, U>*/ (\n  cppVector /*: CppVector<T> */,\n  func /*: (T, number) => U */\n) /*:Array<U> */ => {\n  return mapFor(0, cppVector.size(), i => func(cppVector.at(i), i));\n};\n\nmodule.exports = {\n  mapFor,\n  mapReverseFor,\n  mapVector,\n};\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport BackgroundText from './BackgroundText';\n// No i18n in this file\n\nconst styles = {\n  containerStyle: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    padding: 10,\n  },\n};\n\ntype Props = {|\n  style?: Object,\n  messageStyle?: Object,\n  children: ?React.Node,\n|};\n\n/**\n * Show a message when there is no content to display.\n * Also take a look at EmptyPlaceholder for a more visible placerholder.\n */\nconst EmptyMessage = (props: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <div style={{ ...styles.containerStyle, ...props.style }}>\n        <BackgroundText style={props.messageStyle}>\n          {props.children}\n        </BackgroundText>\n      </div>\n    )}\n  </ThemeConsumer>\n);\n\nexport default EmptyMessage;\n","// @flow\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport MUITextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { MarkdownText } from './MarkdownText';\n\ntype ValueProps =\n  // Support \"text\" and \"password\" type:\n  | {|\n      type?: 'text' | 'password' | 'search',\n      value: string,\n      onChange?: (\n        event: {| target: {| value: string |} |},\n        text: string\n      ) => void,\n    |}\n  // Support \"number\" type (note that onChange returns a string):\n  | {|\n      type: 'number',\n      value: number | string,\n      onChange?: (event: {||}, value: string) => void,\n    |}\n  // Support an \"uncontrolled\" field:\n  | {| defaultValue: string |}\n  // Support an empty field with just a hint text:\n  | {| hintText?: React.Node |};\n\n// We support a subset of the props supported by Material-UI v0.x TextField\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  // Value and change handling:\n  ...ValueProps,\n\n  // DOM events:\n  onFocus?: ({\n    currentTarget: {\n      value: string,\n    },\n    preventDefault: () => void,\n  }) => void,\n  onBlur?: ({\n    currentTarget: {\n      value: string,\n    },\n  }) => void,\n\n  // Advanced DOM events, for exceptional usage:\n  onClick?: () => void,\n  onKeyPress?: (event: SyntheticKeyboardEvent<>) => void,\n  onKeyUp?: (event: SyntheticKeyboardEvent<>) => void,\n  onKeyDown?: (event: SyntheticKeyboardEvent<>) => void,\n\n  // Error handling/Validation:\n  errorText?: React.Node,\n  required?: boolean,\n\n  // Accessibility:\n  disabled?: boolean,\n  readOnly?: boolean,\n\n  // Labels:\n  floatingLabelFixed?: boolean,\n  floatingLabelText?: React.Node,\n  name?: string,\n  hintText?: MessageDescriptor,\n  helperMarkdownText?: ?string,\n  id?: string,\n\n  // Keyboard focus:\n  autoFocus?: boolean,\n\n  // Number text field:\n  precision?: number,\n  max?: number,\n  min?: number,\n  step?: number,\n\n  // Support for multiline:\n  multiline?: boolean,\n  rows?: number,\n  rowsMax?: number,\n\n  // Styling:\n  margin?: 'none' | 'dense',\n  fullWidth?: boolean,\n  style?: {|\n    fontSize?: 14 | 18 | '1.3em',\n    fontStyle?: 'normal' | 'italic',\n    width?: number | '30%' | '60%' | '100%',\n    flex?: 1,\n    top?: number,\n    padding?: number,\n  |},\n  inputStyle?: {|\n    // Allow to customize color (replace by color prop?) // TO VERIFY\n    color?: string,\n    WebkitTextFillColor?: string,\n    fontSize?: '1em',\n\n    // Allow to display monospaced font\n    fontFamily?: '\"Lucida Console\", Monaco, monospace',\n    lineHeight?: 1.4 | 1.5,\n    padding?: 0,\n  |},\n  underlineFocusStyle?: {| borderColor: string |}, // TODO\n  underlineShow?: boolean,\n|};\n\n/**\n * Compute the `variant`, `margin` and `hiddenLabel` props for a material-ui `TextField`\n * to give it the proper style according to its usage.\n *\n * 1. A traditional `TextField` is by default \"filled\"\n *    (see material-ui component doc: https://material-ui.com/components/text-fields/\n *     and [Material Design specification](https://material.io/components/text-fields/#specs)).\n *\n *   The filled background gives them more emphasize compared compared to a single underline\n *   (as done in previous GDevelop versions). They have a label indicating what they refer to.\n *\n * 2. Sometimes, a floating label would not provide more information and is considered to be\n *   obvious (thanks to the existing value, dialog title or button label).\n *\n *   In this case, not specifying a label is fine (`floatingLabelText` is undefined or empty).\n *   This will lead to a filled text field without the extra space for the label.\n *\n *   A `placeholder` should still be passed so that the user can know what the field is about\n *     when not filled.\n *   Example: this is particularly adapted to file/folder pickers (see `LocalFilePicker`,\n *     `LocalFolderPicker`) or a `SearchPanel`.\n *\n * 3. `TextField` in `MiniToolbar` are usually less changed by the user than other text fields\n *   (for example, they are the animation name or the object name in a Sprite editor.\n *   These are not changed a lot compared to behaviours or object properties).\n *\n *   They also are already in a MiniToolbar that has an \"emphasis\" with the slightly\n *   different background color of `MiniToolbar`. Finally, `MiniToolbar` is also small in height.\n *\n *   In these cases, use `none` for `margin`.\n *   This will generate a text field without filled background (just an underline).\n *\n * 4. `TextField` can be used with `margin=\"none\"` and also the underline hidden,\n *   in the very special case of an embedded text field in another form control (like `SearchBar`).\n */\nexport const computeTextFieldStyleProps = (props: {\n  margin?: 'none' | 'dense',\n  floatingLabelText?: React.Node,\n}) => {\n  return {\n    // Use \"filled\" variant by default, unless `margin` is \"none\" (see 1. and 2.)\n    variant: props.margin === 'none' ? 'standard' : 'filled',\n    // Use \"dense\" fields by default, unless `margin` is \"none\" (see 3.)\n    margin: props.margin === 'none' ? 'none' : 'dense',\n    // For variant \"standard\", if there is no label, no extra space is taken. For variant \"filled\",\n    // even when no label is passed, there is a space for it. Remove this space if no\n    // label is provided. (see 2.)\n    hiddenLabel: props.margin !== 'none' && !props.floatingLabelText,\n  };\n};\n\n/**\n * A text field based on Material-UI text field.\n */\nexport default class TextField extends React.Component<Props, {||}> {\n  _input = React.createRef<HTMLInputElement>();\n\n  focus() {\n    if (this._input.current) {\n      this._input.current.focus();\n    }\n  }\n\n  blur() {\n    if (this._input.current) {\n      this._input.current.blur();\n    }\n  }\n\n  getInputNode(): ?HTMLInputElement {\n    if (this._input.current) {\n      return this._input.current;\n    }\n\n    return null;\n  }\n\n  render() {\n    const { props } = this;\n    const onChange = props.onChange || undefined;\n\n    const helperText = props.helperMarkdownText ? (\n      <MarkdownText source={props.helperMarkdownText} />\n    ) : null;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <MUITextField\n            // Value and change handling:\n            type={props.type !== undefined ? props.type : undefined}\n            value={props.value !== undefined ? props.value : undefined}\n            defaultValue={\n              props.defaultValue !== undefined ? props.defaultValue : undefined\n            }\n            onChange={\n              onChange\n                ? event => onChange(event, event.target.value)\n                : undefined\n            }\n            // Error handling:\n            error={!!props.errorText}\n            helperText={props.errorText || helperText}\n            disabled={props.disabled}\n            required={props.required}\n            InputLabelProps={{\n              shrink: props.floatingLabelFixed ? true : undefined,\n            }}\n            label={props.floatingLabelText}\n            name={props.name}\n            placeholder={props.hintText ? i18n._(props.hintText) : undefined}\n            id={props.id}\n            // Keyboard focus:\n            autoFocus={props.autoFocus}\n            // Multiline:\n            multiline={props.multiline}\n            rows={props.rows}\n            rowsMax={props.rowsMax}\n            // Styling:\n            {...computeTextFieldStyleProps(props)}\n            fullWidth={props.fullWidth}\n            InputProps={{\n              disableUnderline:\n                props.underlineShow === undefined\n                  ? false\n                  : !props.underlineShow,\n              style: {\n                fontSize: props.style ? props.style.fontSize : undefined,\n                fontStyle: props.style ? props.style.fontStyle : undefined,\n                ...props.inputStyle,\n              },\n              readOnly: props.readOnly,\n              inputProps: {\n                onKeyPress: props.onKeyPress,\n                onKeyUp: props.onKeyUp,\n                onKeyDown: props.onKeyDown,\n                onClick: props.onClick,\n                // Number field props:\n                max: props.max,\n                min: props.min,\n                step: props.step,\n              },\n            }}\n            style={\n              props.style\n                ? {\n                    width: props.style.width || undefined,\n                    flex: props.style.flex || undefined,\n                    top: props.style.top || undefined,\n                  }\n                : undefined\n            }\n            onFocus={props.onFocus}\n            onBlur={props.onBlur}\n            inputRef={this._input}\n            spellCheck=\"false\"\n          />\n        )}\n      </I18n>\n    );\n  }\n}\n\n// The \"top\" offset to add to the position of the TextField when\n// it's used inside a ListItem \"primaryText\"\nexport const noMarginTextFieldInListItemTopOffset = 0;\n","// @flow\nimport * as React from 'react';\nimport MUIIconButton from '@material-ui/core/IconButton';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { I18n } from '@lingui/react';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { adaptAcceleratorString } from '../UI/AcceleratorString';\nimport { tooltipEnterDelay } from './Tooltip';\n\ntype IconProps =\n  | {|\n      children: React.Node,\n    |}\n  // Support a few specific icons from iconmoon-font.css\n  | {|\n      className:\n        | 'icon-youtube'\n        | 'icon-twitter'\n        | 'icon-facebook'\n        | 'icon-discord'\n        | 'icon-reddit',\n    |};\n\n// We support a subset of the props supported by Material-UI v0.x IconButton\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  ...IconProps,\n  onClick?: (ev: any) => void,\n  onContextMenu?: () => void,\n  disabled?: boolean,\n  edge?: 'start' | 'end' | false,\n\n  style?: {|\n    padding?: number,\n    width?: number,\n    height?: number,\n    transform?: string,\n    transition?: string,\n    opacity?: number,\n    margin?: number,\n    marginRight?: number,\n    marginLeft?: number,\n    marginTop?: number,\n    marginBottom?: number,\n  |},\n  size?: 'small',\n\n  tooltip?: MessageDescriptor,\n  acceleratorString?: string,\n|};\n\n/**\n * A button showing just an icon, based on Material-UI icon button.\n * Supports displaying a tooltip.\n */\nexport default class IconButton extends React.Component<Props, {||}> {\n  render() {\n    const { tooltip, acceleratorString, ...otherProps } = this.props;\n    const iconButton = <MUIIconButton {...otherProps} />;\n\n    return tooltip && !this.props.disabled ? (\n      <I18n>\n        {({ i18n }) => (\n          <Tooltip\n            title={\n              i18n._(tooltip) +\n              (acceleratorString\n                ? ' ' + adaptAcceleratorString(acceleratorString)\n                : '')\n            }\n            placement=\"bottom\"\n            enterDelay={tooltipEnterDelay}\n          >\n            {iconButton}\n          </Tooltip>\n        )}\n      </I18n>\n    ) : (\n      iconButton\n    );\n  }\n}\n","// @flow\nimport { isMacLike, isMobile } from '../Utils/Platform';\n\nexport const adaptAcceleratorString = (accelerator: string): string => {\n  if (isMobile()) {\n    return ''; // Do not display accelerators on mobile devices\n  } else if (isMacLike()) {\n    return accelerator\n      .replace(/CmdOrCtrl\\+/, '⌘')\n      .replace(/CommandOrControl\\+/, '⌘')\n      .replace(/Super\\+/, '⌘')\n      .replace(/Shift\\+/, '⇧')\n      .replace(/Alt\\+/, '⌥')\n      .replace(/Option\\+/, '⌥')\n      .replace(/Delete/, '⌦')\n      .replace(/Backspace/, '⌫');\n  } else {\n    return accelerator\n      .replace(/CmdOrCtrl\\+/, 'Ctrl+')\n      .replace(/CommandOrControl\\+/, 'Ctrl+')\n      .replace(/Super\\+/, 'Win+')\n      .replace(/Option\\+/, 'Alt+')\n      .replace(/Delete/, 'DEL');\n  }\n};\n","// @flow\nimport * as React from 'react';\nimport TextField from './TextField';\n\ntype State = {|\n  focused: boolean,\n  text: ?any,\n|};\n\ntype Props = {|\n  onChange: string => void,\n  value: string,\n  commitOnBlur?: boolean,\n  onFocus?: ({\n    currentTarget: {\n      value: string,\n    },\n    preventDefault: () => void,\n  }) => void,\n  onBlur?: ({\n    currentTarget: {\n      value: string,\n    },\n  }) => void,\n  type?: 'text' | 'number',\n\n  // Some TextField props that can be reused:\n  onClick?: () => void,\n  onKeyPress?: (event: SyntheticKeyboardEvent<HTMLInputElement>) => void,\n  onKeyUp?: (event: SyntheticKeyboardEvent<HTMLInputElement>) => void,\n  onKeyDown?: (event: SyntheticKeyboardEvent<HTMLInputElement>) => void,\n  margin?: 'none' | 'dense',\n  disabled?: boolean,\n  errorText?: React.Node,\n  floatingLabelFixed?: boolean,\n  floatingLabelText?: React.Node,\n  fullWidth?: boolean,\n  hintText?: React.Node,\n  helperMarkdownText?: ?string,\n  id?: string,\n  inputStyle?: Object,\n  max?: number,\n  min?: number,\n  multiline?: boolean,\n  name?: string,\n  step?: number,\n  style?: Object,\n  rows?: number,\n  rowsMax?: number,\n  autoFocus?: boolean,\n|};\n\n/**\n * This component works like a material-ui TextField, except that\n * the value passed as props is not forced into the text field when the user\n * is typing. This is useful if the parent component can do modifications on the value:\n * the user won't be interrupted or have the value changed until he blurs the field.\n */\nexport default class SemiControlledTextField extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    focused: false,\n    text: null,\n  };\n\n  _field: ?TextField = null;\n\n  forceSetValue(text: string) {\n    this.setState({ text });\n  }\n\n  forceSetSelection(selectionStart: number, selectionEnd: number) {\n    const input = this.getInputNode();\n    if (input) {\n      input.selectionStart = selectionStart;\n      input.selectionEnd = selectionEnd;\n    }\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  getInputNode(): ?HTMLInputElement {\n    if (this._field) return this._field.getInputNode();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      commitOnBlur,\n      onFocus,\n      onBlur,\n      type,\n      ...otherProps\n    } = this.props;\n\n    return (\n      // $FlowFixMe\n      <TextField\n        {...otherProps}\n        type={type || 'text'}\n        ref={field => (this._field = field)}\n        value={this.state.focused ? this.state.text : value}\n        onFocus={event => {\n          this.setState({\n            focused: true,\n            text: this.props.value,\n          });\n\n          if (onFocus) onFocus(event);\n        }}\n        onChange={(event, newValue) => {\n          this.setState({\n            text: newValue,\n          });\n\n          if (!commitOnBlur) onChange(newValue);\n        }}\n        onBlur={event => {\n          onChange(event.currentTarget.value);\n          this.setState({\n            focused: false,\n            text: null,\n          });\n\n          if (onBlur) onBlur(event);\n        }}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport FlatButton from '../FlatButton';\nimport HelpOutline from '@material-ui/icons/HelpOutline';\nimport Window from '../../Utils/Window';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport { Trans } from '@lingui/macro';\n\ntype PropsType = {\n  helpPagePath: ?string,\n  label?: React.Node,\n};\n\n/**\n * The button that can be used in any dialog to open a help page\n */\nconst HelpButton = (props: PropsType) => {\n  if (!props.helpPagePath) return null;\n  const helpLink = getHelpLink(props.helpPagePath);\n  if (!helpLink) return null;\n\n  return (\n    <FlatButton\n      onClick={() => {\n        if (props.helpPagePath) {\n          Window.openExternalURL(helpLink);\n        }\n      }}\n      target=\"_blank\"\n      label={props.label || <Trans>Help</Trans>}\n      icon={<HelpOutline />}\n    />\n  );\n};\n\nexport default HelpButton;\n","// @flow\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\nconst path = optionalRequire('path');\n\nclass UrlsCache {\n  projectCache: { [number]: { [string]: string } } = {};\n\n  _getProjectCache(project: gdProject) {\n    const cache = this.projectCache[project.ptr];\n    if (!cache) {\n      return (this.projectCache[project.ptr] = {});\n    }\n\n    return cache;\n  }\n\n  getCachedUrl(project: gdProject, url: string): ?string {\n    const cache = this._getProjectCache(project);\n    return cache[url];\n  }\n\n  cacheUrl(project: gdProject, url: string): string {\n    const cache = this._getProjectCache(project);\n    return (cache[url] = url);\n  }\n\n  burstUrl(project: gdProject, url: string) {\n    const cache = this._getProjectCache(project);\n    delete cache[url];\n  }\n\n  cacheLocalFileUrl(\n    project: gdProject,\n    filename: string,\n    systemFilename: string,\n    disableCacheBurst: boolean\n  ): string {\n    const cache = this._getProjectCache(project);\n\n    if (!disableCacheBurst) {\n      // The URL is cached with an extra \"cache-bursting\" parameter.\n      // If the cache is emptied or changed, local files will have another\n      // value for this parameter, forcing the browser to reload the images.\n      return (cache[filename] = `${systemFilename}?cache=${Date.now()}`);\n    } else {\n      return (cache[filename] = systemFilename);\n    }\n  }\n}\n\ntype LoadingOptions = {|\n  disableCacheBurst?: boolean,\n  isResourceForPixi?: boolean,\n|};\n\nconst addSearchParameterToUrl = (\n  url: string,\n  urlEncodedParameterName: string,\n  urlEncodedValue: string\n) => {\n  if (url.startsWith('data:') || url.startsWith('blob:')) {\n    // blob/data protocol does not support search parameters, which are useless anyway.\n    return url;\n  }\n\n  const separator = url.indexOf('?') === -1 ? '?' : '&';\n  return url + separator + urlEncodedParameterName + '=' + urlEncodedValue;\n};\n\nconst isLocalFile = (urlOrFilename: string) => {\n  return !(\n    urlOrFilename.startsWith('http://') ||\n    urlOrFilename.startsWith('https://') ||\n    urlOrFilename.startsWith('ftp://') ||\n    urlOrFilename.startsWith('blob:') ||\n    urlOrFilename.startsWith('data:')\n  );\n};\n\n/**\n * A class globally used in the whole IDE to get URLs to resources of games\n * (notably images).\n */\nexport default class ResourcesLoader {\n  static _cache = new UrlsCache();\n\n  /**\n   * Remove the specified resources resolved URLs from the cache. Useful if the\n   * file represented by these resources has changed. This force these local files to be loaded again.\n   */\n  static burstUrlsCacheForResources(\n    project: gdProject,\n    resourcesNames: Array<string>\n  ) {\n    const resourcesManager = project.getResourcesManager();\n    resourcesNames.forEach(resourceName => {\n      if (resourcesManager.hasResource(resourceName)) {\n        ResourcesLoader._cache.burstUrl(\n          project,\n          resourcesManager.getResource(resourceName).getFile()\n        );\n      }\n    });\n  }\n\n  /**\n   * Re-create a new cache for URLs. Call this to force local\n   * file to be loaded again.\n   */\n  static burstAllUrlsCache() {\n    ResourcesLoader._cache = new UrlsCache();\n  }\n\n  /**\n   * Get the fully qualified URL/filename for a URL/filename relative to the project.\n   */\n  static getFullUrl(\n    project: gdProject,\n    urlOrFilename: string,\n    { isResourceForPixi, disableCacheBurst }: LoadingOptions\n  ): string {\n    if (!!electron && isLocalFile(urlOrFilename)) {\n      const cachedUrl = ResourcesLoader._cache.getCachedUrl(\n        project,\n        urlOrFilename\n      );\n      if (cachedUrl) return cachedUrl;\n\n      // Support local filesystem with Electron\n      const file = project.getProjectFile();\n      const projectPath = path.dirname(file);\n      const resourceAbsolutePath = path\n        .resolve(projectPath, urlOrFilename)\n        .replace(/\\\\/g, '/');\n\n      console.info('Caching resolved local filename:', resourceAbsolutePath);\n      return this._cache.cacheLocalFileUrl(\n        project,\n        urlOrFilename,\n        'file://' + resourceAbsolutePath,\n        !!disableCacheBurst\n      );\n    }\n\n    let urlWithParameters = urlOrFilename;\n    if (isResourceForPixi) {\n      // To avoid strange/hard to understand CORS issues, we add a dummy parameter.\n      // By doing so, we force browser to consider this URL as different than the one traditionally\n      // used to render the resource in the editor (usually as an `<img>` or as a background image).\n      // If we don't add this distinct parameter, it can happen that browsers fail to load the image\n      // as it's already in the **browser cache** but with slightly different request parameters -\n      // making the CORS checks fail (even if it's coming from the browser cache).\n      //\n      // It's happening sometimes (according to loading order probably) in Chrome and (more often)\n      // in Safari. It might be linked to Amazon S3 + CloudFront that \"doesn't support the Vary: Origin header\".\n      // To be safe, we entirely avoid the issue with this parameter, making the browsers consider\n      // the resources for use in Pixi.js and for the rest of the editor as entirely separate.\n      //\n      // See:\n      // - https://stackoverflow.com/questions/26140487/cross-origin-amazon-s3-not-working-using-chrome\n      // - https://stackoverflow.com/questions/20253472/cors-problems-with-amazon-s3-on-the-latest-chomium-and-google-canary\n      // - https://stackoverflow.com/a/20299333\n      //\n      // Search for \"cors-cache-workaround\" in the codebase for the same workarounds.\n      urlWithParameters = addSearchParameterToUrl(\n        urlWithParameters,\n        'gdUsage', // Arbitrary parameter name to designate that this is being used for Pixi.js\n        'pixi'\n      );\n    }\n\n    const cachedUrl = ResourcesLoader._cache.getCachedUrl(\n      project,\n      urlWithParameters\n    );\n    if (cachedUrl) return cachedUrl;\n\n    console.info('Caching resolved url:', urlWithParameters);\n    return this._cache.cacheUrl(project, urlWithParameters);\n  }\n\n  /**\n   * Get the fully qualified URL/filename associated with the given resource, with potential\n   * changes to accomodate browsers CORS/cache.\n   */\n  static getResourceFullUrl(\n    project: gdProject,\n    resourceName: string,\n    options: LoadingOptions\n  ) {\n    if (project.getResourcesManager().hasResource(resourceName)) {\n      const resourceRelativePath = project\n        .getResourcesManager()\n        .getResource(resourceName)\n        .getFile();\n      return ResourcesLoader.getFullUrl(project, resourceRelativePath, options);\n    }\n\n    return resourceName;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type GDevelopTheme } from '.';\nimport GDevelopThemeContext from './ThemeContext';\n\ntype Props = {|\n  children: (gdevelopTheme: GDevelopTheme) => React.Node,\n|};\n\n/**\n * Expose the Material UI theme.\n */\nconst ThemeConsumer = (props: Props) => (\n  <GDevelopThemeContext.Consumer>\n    {gdevelopTheme => props.children(gdevelopTheme)}\n  </GDevelopThemeContext.Consumer>\n);\n\nexport default ThemeConsumer;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport type { ResourceKind } from '../../ResourcesList/ResourceSource';\nimport { type EditorMosaicNode } from '../../UI/EditorMosaic';\nimport { type FileMetadataAndStorageProviderName } from '../../ProjectsStorage';\nimport { type ShortcutMap } from '../../KeyboardShortcuts/DefaultShortcuts';\nimport { type CommandName } from '../../CommandPalette/CommandsList';\nimport optionalRequire from '../../Utils/OptionalRequire';\nconst electron = optionalRequire('electron');\n\nexport type AlertMessageIdentifier =\n  | 'default-additional-work'\n  | 'automatic-lighting-layer'\n  | 'object-moved-in-lighting-layer'\n  | 'use-non-smoothed-textures'\n  | 'use-nearest-scale-mode'\n  | 'maximum-fps-too-low'\n  | 'minimum-fps-too-low'\n  | 'function-extractor-explanation'\n  | 'events-based-behavior-explanation'\n  | 'empty-events-based-behavior-explanation'\n  | 'too-much-effects'\n  | 'effects-usage'\n  | 'lighting-layer-usage'\n  | 'resource-properties-panel-explanation'\n  | 'instance-drag-n-drop-explanation'\n  | 'objects-panel-explanation'\n  | 'instance-properties-panel-explanation'\n  | 'layers-panel-explanation'\n  | 'instances-panel-explanation'\n  | 'physics2-shape-collisions'\n  | 'edit-instruction-explanation'\n  | 'lifecycle-events-function-included-only-if-extension-used'\n  | 'p2p-broker-recommendation'\n  | 'command-palette-shortcut'\n  | 'asset-installed-explanation'\n  | 'extension-installed-explanation'\n  | 'project-should-have-unique-package-name';\n\nexport type EditorMosaicName =\n  | 'scene-editor'\n  | 'scene-editor-small'\n  | 'debugger'\n  | 'resources-editor'\n  | 'events-functions-extension-editor';\n\nexport const allAlertMessages: Array<{\n  key: AlertMessageIdentifier,\n  label: React.Node,\n}> = [\n  {\n    key: 'use-non-smoothed-textures',\n    label: <Trans>Using non smoothed textures</Trans>,\n  },\n  {\n    key: 'use-nearest-scale-mode',\n    label: <Trans>Using Nearest Scale Mode</Trans>,\n  },\n  {\n    key: 'maximum-fps-too-low',\n    label: <Trans>Maximum Fps is too low</Trans>,\n  },\n  {\n    key: 'minimum-fps-too-low',\n    label: <Trans>Minimum Fps is too low</Trans>,\n  },\n  {\n    key: 'function-extractor-explanation',\n    label: <Trans>Using function extractor</Trans>,\n  },\n  {\n    key: 'events-based-behavior-explanation',\n    label: <Trans>Using events based behavior</Trans>,\n  },\n  {\n    key: 'empty-events-based-behavior-explanation',\n    label: <Trans>Using empty events based behavior</Trans>,\n  },\n  {\n    key: 'too-much-effects',\n    label: <Trans>Using too much effects</Trans>,\n  },\n  {\n    key: 'effects-usage',\n    label: <Trans>Using effects</Trans>,\n  },\n  {\n    key: 'lighting-layer-usage',\n    label: <Trans>Using lighting layer</Trans>,\n  },\n  {\n    key: 'automatic-lighting-layer',\n    label: <Trans>Automatic creation of lighting layer</Trans>,\n  },\n  {\n    key: 'object-moved-in-lighting-layer',\n    label: <Trans>Light object automatically put in lighting layer</Trans>,\n  },\n  {\n    key: 'resource-properties-panel-explanation',\n    label: <Trans>Using the resource properties panel</Trans>,\n  },\n  {\n    key: 'instance-drag-n-drop-explanation',\n    label: <Trans>Using instance drag'n'drop</Trans>,\n  },\n  {\n    key: 'objects-panel-explanation',\n    label: <Trans>Using the objects panel</Trans>,\n  },\n  {\n    key: 'instance-properties-panel-explanation',\n    label: <Trans>Using the instance properties panel</Trans>,\n  },\n  {\n    key: 'layers-panel-explanation',\n    label: <Trans>Using the layers panel</Trans>,\n  },\n  {\n    key: 'instances-panel-explanation',\n    label: <Trans>Using the instances panel</Trans>,\n  },\n  {\n    key: 'physics2-shape-collisions',\n    label: <Trans>Collisions handling with the Physics engine</Trans>,\n  },\n  {\n    key: 'edit-instruction-explanation',\n    label: <Trans>How to edit instructions</Trans>,\n  },\n  {\n    key: 'lifecycle-events-function-included-only-if-extension-used',\n    label: <Trans>Lifecycle functions only included when extension used</Trans>,\n  },\n  {\n    key: 'p2p-broker-recommendation',\n    label: <Trans>Peer to peer broker server recommendation</Trans>,\n  },\n  {\n    key: 'command-palette-shortcut',\n    label: <Trans>Command palette keyboard shortcut</Trans>,\n  },\n  {\n    key: 'asset-installed-explanation',\n    label: (\n      <Trans>Explanation after an object is installed from the store</Trans>\n    ),\n  },\n  {\n    key: 'project-should-have-unique-package-name',\n    label: (\n      <Trans>Project package names should not begin with com.example</Trans>\n    ),\n  },\n];\n\n/**\n * All the preferences of GDevelop. To add a new preference, add it into this\n * type and add a setter into `Preferences` type. Then, update the\n * preference dialog.\n */\nexport type PreferencesValues = {|\n  language: string,\n  autoDownloadUpdates: boolean,\n  themeName: string,\n  codeEditorThemeName: string,\n  hiddenAlertMessages: { [AlertMessageIdentifier]: boolean },\n  hiddenTutorialHints: { [string]: boolean },\n  autoDisplayChangelog: boolean,\n  lastLaunchedVersion: ?string,\n  eventsSheetShowObjectThumbnails: boolean,\n  autosaveOnPreview: boolean,\n  useNewInstructionEditorDialog: boolean,\n  useUndefinedVariablesInAutocompletion: boolean,\n  useGDJSDevelopmentWatcher: boolean,\n  eventsSheetUseAssignmentOperators: boolean,\n  eventsSheetZoomLevel: number,\n  showEffectParameterNames: boolean,\n  projectLastUsedPaths: { [string]: { [ResourceKind]: string } },\n  defaultEditorMosaicNodes: { [EditorMosaicName]: ?EditorMosaicNode },\n  recentProjectFiles: Array<FileMetadataAndStorageProviderName>,\n  autoOpenMostRecentProject: boolean,\n  hasProjectOpened: boolean,\n  userShortcutMap: ShortcutMap,\n  newObjectDialogDefaultTab: 'asset-store' | 'new-object',\n  isMenuBarHiddenInPreview: boolean,\n  isAlwaysOnTopInPreview: boolean,\n  backdropClickBehavior: 'nothing' | 'apply' | 'cancel',\n  eventsSheetCancelInlineParameter: 'cancel' | 'apply',\n|};\n\n/**\n * Type containing all the preferences of GDevelop and their setters.\n */\nexport type Preferences = {|\n  values: PreferencesValues,\n  setLanguage: (language: string) => void,\n  setThemeName: (themeName: string) => void,\n  setCodeEditorThemeName: (codeEditorThemeName: string) => void,\n  setAutoDownloadUpdates: (enabled: boolean) => void,\n  checkUpdates: (forceDownload?: boolean) => void,\n  setAutoDisplayChangelog: (enabled: boolean) => void,\n  showAlertMessage: (identifier: AlertMessageIdentifier, show: boolean) => void,\n  showAllAlertMessages: () => void,\n  showTutorialHint: (identifier: string, show: boolean) => void,\n  showAllTutorialHints: () => void,\n  verifyIfIsNewVersion: () => boolean,\n  setEventsSheetShowObjectThumbnails: (enabled: boolean) => void,\n  setAutosaveOnPreview: (enabled: boolean) => void,\n  setUseNewInstructionEditorDialog: (enabled: boolean) => void,\n  setUseUndefinedVariablesInAutocompletion: (enabled: boolean) => void,\n  setUseGDJSDevelopmentWatcher: (enabled: boolean) => void,\n  setEventsSheetUseAssignmentOperators: (enabled: boolean) => void,\n  setEventsSheetZoomLevel: (zoomLevel: number) => void,\n  setShowEffectParameterNames: (enabled: boolean) => void,\n  getLastUsedPath: (project: gdProject, kind: ResourceKind) => string,\n  setLastUsedPath: (\n    project: gdProject,\n    kind: ResourceKind,\n    path: string\n  ) => void,\n  getDefaultEditorMosaicNode: (name: EditorMosaicName) => ?EditorMosaicNode,\n  setDefaultEditorMosaicNode: (\n    name: EditorMosaicName,\n    node: ?EditorMosaicNode\n  ) => void,\n  getRecentProjectFiles: () => Array<FileMetadataAndStorageProviderName>,\n  insertRecentProjectFile: (\n    fileMetadata: FileMetadataAndStorageProviderName\n  ) => void,\n  removeRecentProjectFile: (\n    fileMetadata: FileMetadataAndStorageProviderName\n  ) => void,\n  getAutoOpenMostRecentProject: () => boolean,\n  setAutoOpenMostRecentProject: (enabled: boolean) => void,\n  hadProjectOpenedDuringLastSession: () => boolean,\n  setHasProjectOpened: (enabled: boolean) => void,\n  resetShortcutsToDefault: () => void,\n  setShortcutForCommand: (commandName: CommandName, shortcut: string) => void,\n  getNewObjectDialogDefaultTab: () => 'asset-store' | 'new-object',\n  setNewObjectDialogDefaultTab: ('asset-store' | 'new-object') => void,\n  getIsMenuBarHiddenInPreview: () => boolean,\n  setIsMenuBarHiddenInPreview: (enabled: boolean) => void,\n  setBackdropClickBehavior: (value: string) => void,\n  getIsAlwaysOnTopInPreview: () => boolean,\n  setIsAlwaysOnTopInPreview: (enabled: boolean) => void,\n  setEventsSheetCancelInlineParameter: (value: string) => void,\n|};\n\nexport const initialPreferences = {\n  values: {\n    language: 'en',\n    autoDownloadUpdates: true,\n    themeName:\n      typeof window !== 'undefined' &&\n      window.matchMedia('(prefers-color-scheme: dark)').matches\n        ? 'Nord'\n        : 'GDevelop default',\n    codeEditorThemeName: 'vs-dark',\n    hiddenAlertMessages: {},\n    hiddenTutorialHints: {},\n    autoDisplayChangelog: true,\n    lastLaunchedVersion: undefined,\n    eventsSheetShowObjectThumbnails: true,\n    autosaveOnPreview: true,\n    useNewInstructionEditorDialog: true,\n    useUndefinedVariablesInAutocompletion: false,\n    useGDJSDevelopmentWatcher: true,\n    eventsSheetUseAssignmentOperators: false,\n    eventsSheetZoomLevel: 14,\n    showEffectParameterNames: false,\n    projectLastUsedPaths: {},\n    defaultEditorMosaicNodes: {},\n    recentProjectFiles: [],\n    autoOpenMostRecentProject: true,\n    hasProjectOpened: false,\n    userShortcutMap: {},\n    newObjectDialogDefaultTab: electron ? 'new-object' : 'asset-store',\n    isMenuBarHiddenInPreview: true,\n    isAlwaysOnTopInPreview: false,\n    backdropClickBehavior: 'nothing',\n    eventsSheetCancelInlineParameter: 'apply',\n  },\n  setLanguage: () => {},\n  setThemeName: () => {},\n  setCodeEditorThemeName: () => {},\n  setAutoDownloadUpdates: () => {},\n  checkUpdates: () => {},\n  setAutoDisplayChangelog: () => {},\n  showAlertMessage: (identifier: AlertMessageIdentifier, show: boolean) => {},\n  showAllAlertMessages: () => {},\n  showTutorialHint: (identifier: string, show: boolean) => {},\n  showAllTutorialHints: () => {},\n  verifyIfIsNewVersion: () => false,\n  setEventsSheetShowObjectThumbnails: () => {},\n  setAutosaveOnPreview: () => {},\n  setUseNewInstructionEditorDialog: (enabled: boolean) => {},\n  setUseUndefinedVariablesInAutocompletion: (enabled: boolean) => {},\n  setUseGDJSDevelopmentWatcher: (enabled: boolean) => {},\n  setEventsSheetUseAssignmentOperators: (enabled: boolean) => {},\n  setEventsSheetZoomLevel: (zoomLevel: number) => {},\n  setShowEffectParameterNames: (enabled: boolean) => {},\n  getLastUsedPath: (project: gdProject, kind: ResourceKind) => '',\n  setLastUsedPath: (project: gdProject, kind: ResourceKind, path: string) => {},\n  getDefaultEditorMosaicNode: (name: EditorMosaicName) => null,\n  setDefaultEditorMosaicNode: (\n    name: EditorMosaicName,\n    node: ?EditorMosaicNode\n  ) => {},\n  getRecentProjectFiles: () => [],\n  insertRecentProjectFile: (\n    fileMetadata: FileMetadataAndStorageProviderName\n  ) => {},\n  removeRecentProjectFile: (\n    fileMetadata: FileMetadataAndStorageProviderName\n  ) => {},\n  getAutoOpenMostRecentProject: () => true,\n  setAutoOpenMostRecentProject: () => {},\n  hadProjectOpenedDuringLastSession: () => false,\n  setHasProjectOpened: () => {},\n  resetShortcutsToDefault: () => {},\n  setShortcutForCommand: (commandName: CommandName, shortcut: string) => {},\n  getNewObjectDialogDefaultTab: () => 'asset-store',\n  setNewObjectDialogDefaultTab: () => {},\n  getIsMenuBarHiddenInPreview: () => true,\n  setIsMenuBarHiddenInPreview: () => {},\n  setBackdropClickBehavior: () => {},\n  getIsAlwaysOnTopInPreview: () => true,\n  setIsAlwaysOnTopInPreview: () => {},\n  setEventsSheetCancelInlineParameter: () => {},\n};\n\nconst PreferencesContext = React.createContext<Preferences>(initialPreferences);\n\nexport default PreferencesContext;\n","// @flow\nimport * as React from 'react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport MUIList from '@material-ui/core/List';\nimport MUIListItem from '@material-ui/core/ListItem';\nimport MUIListItemIcon from '@material-ui/core/ListItemIcon';\nimport MUIListItemText from '@material-ui/core/ListItemText';\nimport MUIListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport IconButton from '@material-ui/core/IconButton';\nimport Refresh from '@material-ui/icons/Refresh';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Remove from '@material-ui/icons/Remove';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Add from '@material-ui/icons/Add';\nimport Search from '@material-ui/icons/Search';\nimport { type MenuItemTemplate } from './Menu/Menu.flow';\nimport { useLongTouch } from '../Utils/UseLongTouch';\nimport { Collapse } from '@material-ui/core';\nconst useDenseLists = true;\nexport const listItemWith32PxIconHeight = 32;\nexport const listItemWithoutIconHeight = 29;\n\nconst styles = {\n  listItemText: {\n    // Reduce the default spacing between list items\n    // to densify the lists.\n    margin: '1px 0',\n    // Always break the words if necessary. Otherwise a long word\n    // without spaces would be overflowing the list.\n    // This seems to be necessary for all lists (we don't ever want\n    // an overflow - and it's strange in a way that Material-UI is\n    // not handling this by default?)\n    wordBreak: 'break-word',\n  },\n};\n\ntype DoubleClickMouseEvent = {| button: 0 | 1 | 2 |};\n\n// Support for a bunch of different secondary actions\ntype ListItemRightButtonProps =\n  | {|\n      displayReloadButton: boolean,\n      reloadButtonTooltip: string,\n      onReload?: () => void,\n    |}\n  | {|\n      displayMenuButton: boolean,\n      buildMenuTemplate: (i18n: I18nType) => Array<MenuItemTemplate>,\n    |}\n  | {|\n      displayLinkButton: boolean,\n      onOpenLink: () => void,\n    |}\n  | {|\n      displayRemoveButton: true,\n      onRemove: () => void,\n    |}\n  | {|\n      displayAddIcon: true,\n    |}\n  | {|\n      displaySearchIcon: true,\n    |}\n  | {||};\n\n// We support a subset of the props supported by Material-UI v0.x ListItem\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype ListItemProps = {|\n  onClick?: () => void | Promise<void>,\n  onDoubleClick?: (event: DoubleClickMouseEvent) => void,\n  primaryText: ?React.Node,\n  secondaryText?: React.Node,\n  selected?: boolean,\n  autoGenerateNestedIndicator?: boolean, // TODO: Rename?\n  renderNestedItems?: () => Array<React$Element<any> | null>,\n  open?: boolean,\n  initiallyOpen?: boolean,\n  disabled?: boolean,\n  rightIconColor?: string,\n  nestedListStyle?: {|\n    padding: 0,\n  |},\n\n  style?: {|\n    color?: string,\n    backgroundColor?: string,\n    borderBottom?: string,\n    opacity?: number,\n  |},\n\n  leftIcon?: React.Node,\n  ...ListItemRightButtonProps,\n\n  secondaryTextLines?: 1 | 2,\n|};\n\nexport type ListItemRefType = any; // Should be a material-ui ListIten\n\n/**\n * A ListItem to be used in a List.\n *\n * Also used outside of a List by virtualized lists.\n */\nexport const ListItem = React.forwardRef<ListItemProps, ListItemRefType>(\n  (props: ListItemProps, ref) => {\n    const [isOpen, setIsOpen] = React.useState(!!props.initiallyOpen);\n    const elementWithMenu = React.useRef<?ElementWithMenu>(null);\n\n    const openContextMenu = React.useCallback(\n      () => {\n        if (elementWithMenu.current) {\n          elementWithMenu.current.open();\n        }\n      },\n      [elementWithMenu]\n    );\n    const longTouchForContextMenuProps = useLongTouch(openContextMenu);\n\n    const renderListItemSecondaryAction = () => {\n      if (props.displayReloadButton) {\n        return (\n          <MUIListItemSecondaryAction>\n            <Tooltip title={props.reloadButtonTooltip}>\n              <IconButton\n                size=\"small\"\n                edge=\"end\"\n                aria-label=\"reload\"\n                onClick={props.onReload}\n              >\n                <Refresh />\n              </IconButton>\n            </Tooltip>\n          </MUIListItemSecondaryAction>\n        );\n      }\n      if (props.buildMenuTemplate) {\n        return props.displayMenuButton ? (\n          <MUIListItemSecondaryAction>\n            <ElementWithMenu\n              ref={elementWithMenu}\n              element={\n                <IconButton size=\"small\" edge=\"end\" aria-label=\"menu\">\n                  <MoreVert style={{ color: props.rightIconColor }} />\n                </IconButton>\n              }\n              buildMenuTemplate={props.buildMenuTemplate}\n            />\n          </MUIListItemSecondaryAction>\n        ) : (\n          <ElementWithMenu\n            ref={elementWithMenu}\n            element={\n              <div /> /* We still need a dummy div for context menu placement */\n            }\n            buildMenuTemplate={props.buildMenuTemplate}\n          />\n        );\n      }\n      if (props.displayLinkButton) {\n        return (\n          <MUIListItemSecondaryAction>\n            <IconButton\n              size=\"small\"\n              edge=\"end\"\n              aria-label=\"open link\"\n              onClick={props.onOpenLink}\n            >\n              <OpenInNew style={{ color: props.rightIconColor }} />\n            </IconButton>\n          </MUIListItemSecondaryAction>\n        );\n      }\n      if (props.displayRemoveButton) {\n        return (\n          <MUIListItemSecondaryAction>\n            <IconButton\n              size=\"small\"\n              edge=\"end\"\n              aria-label=\"remove\"\n              onClick={props.onRemove}\n            >\n              <Remove style={{ color: props.rightIconColor }} />\n            </IconButton>\n          </MUIListItemSecondaryAction>\n        );\n      }\n\n      return null;\n    };\n\n    const { renderNestedItems } = props;\n\n    if (!renderNestedItems) {\n      return (\n        <MUIListItem\n          button\n          dense={useDenseLists}\n          disableRipple\n          ContainerComponent={\n            'div' /* Otherwise, when ListItemSecondaryAction is defined, we would get a li, that is not playing well in virtualized list, that are using ListItem without List */\n          }\n          onClick={props.onClick}\n          onDoubleClick={props.onDoubleClick}\n          disabled={props.disabled}\n          selected={props.selected}\n          style={props.style}\n          onContextMenu={props.buildMenuTemplate ? openContextMenu : undefined}\n          {...longTouchForContextMenuProps}\n          alignItems={props.secondaryTextLines === 2 ? 'flex-start' : undefined}\n          ref={ref}\n        >\n          {props.leftIcon && (\n            <MUIListItemIcon>{props.leftIcon}</MUIListItemIcon>\n          )}\n          <MUIListItemText\n            style={styles.listItemText}\n            primary={props.primaryText}\n            secondary={props.secondaryText}\n          />\n          {renderListItemSecondaryAction()}\n          {props.displayAddIcon && (\n            <Add style={{ color: props.rightIconColor }} />\n          )}\n          {props.displaySearchIcon && (\n            <Search style={{ color: props.rightIconColor }} />\n          )}\n        </MUIListItem>\n      );\n    } else {\n      const isItemOpen = props.open === undefined ? isOpen : props.open;\n      return (\n        <React.Fragment>\n          <MUIListItem\n            button\n            dense={useDenseLists}\n            disableRipple\n            onClick={() => {\n              setIsOpen(!isItemOpen);\n              if (props.onClick) {\n                props.onClick();\n              }\n            }}\n            disabled={props.disabled}\n            style={props.style}\n            ref={ref}\n          >\n            {props.leftIcon && (\n              <MUIListItemIcon>{props.leftIcon}</MUIListItemIcon>\n            )}\n            <MUIListItemText\n              style={styles.listItemText}\n              primary={props.primaryText}\n              secondary={props.secondaryText}\n            />\n            {props.autoGenerateNestedIndicator ? (\n              isItemOpen ? (\n                <ExpandLess />\n              ) : (\n                <ExpandMore />\n              )\n            ) : null}\n            {renderListItemSecondaryAction()}\n          </MUIListItem>\n          <Collapse in={isItemOpen} timeout=\"auto\" unmountOnExit>\n            <MUIList\n              component=\"div\"\n              disablePadding\n              style={{\n                paddingLeft: 16,\n                ...props.nestedListStyle,\n              }}\n              dense={useDenseLists}\n            >\n              {renderNestedItems()}\n            </MUIList>\n          </Collapse>\n        </React.Fragment>\n      );\n    }\n  }\n);\n\n// We support a subset of the props supported by Material-UI v0.x List\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype ListProps = {|\n  children: React.Node,\n  style?: {|\n    overflowY?: 'scroll',\n    flex?: 1,\n    padding?: number,\n  |},\n|};\n\n/**\n * List based on Material-UI List.\n */\nexport class List extends React.Component<ListProps, {||}> {\n  render() {\n    return (\n      <MUIList style={this.props.style} dense={useDenseLists}>\n        {this.props.children}\n      </MUIList>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport default function useForceUpdate() {\n  const [, updateState] = React.useState();\n  const forceUpdate = React.useCallback(() => updateState({}), []);\n\n  return forceUpdate;\n}\n","// @flow\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst styles = {\n  container: {\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  children: React.Node,\n  /**\n   * If true, scrollbar won't be shown if the content is not clipped.\n   */\n  autoHideScrollbar?: ?boolean,\n  style?: ?Object,\n|};\n\nexport type ScrollViewInterface = {|\n  scrollTo: (target: ?React$Component<any, any>) => void,\n  scrollToBottom: () => void,\n|};\n\nexport default React.forwardRef<Props, ScrollViewInterface>(\n  ({ children, autoHideScrollbar, style }: Props, ref) => {\n    const scrollView = React.useRef((null: ?HTMLDivElement));\n    React.useImperativeHandle(ref, () => ({\n      /**\n       * Scroll the view to the target component.\n       */\n      scrollTo: (target: ?React$Component<any, any>) => {\n        const scrollViewElement = scrollView.current;\n        if (!scrollViewElement) return;\n\n        const targetElement = ReactDOM.findDOMNode(target);\n        if (targetElement instanceof HTMLElement) {\n          const yPosition = targetElement.getBoundingClientRect().top;\n\n          const scrollViewYPosition = scrollViewElement.getBoundingClientRect()\n            .top;\n          scrollViewElement.scrollTop += yPosition - scrollViewYPosition;\n        } else {\n          console.error(\n            'Tried to scroll to something that is not a HTMLElement'\n          );\n        }\n      },\n      /**\n       * Scroll the view to the bottom.\n       */\n      scrollToBottom: () => {\n        const scrollViewElement = scrollView.current;\n        if (!scrollViewElement) return;\n\n        scrollViewElement.scrollTop = scrollViewElement.scrollHeight;\n      },\n    }));\n\n    return (\n      <div\n        style={{\n          ...styles.container,\n          overflowY: autoHideScrollbar ? 'auto' : 'scroll',\n          ...style,\n        }}\n        ref={scrollView}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  maxWidth: {\n    maxWidth: '100%',\n  },\n};\n\ntype Props = {|\n  children: ?React.Node,\n  maxWidth?: boolean,\n  width?: number | string,\n  /** Sometimes required on Safari */\n  noFullHeight?: boolean,\n  noExpand?: boolean,\n|};\n\n/**\n * This is the component to be used to display the standard\n * background of editor/windows/dialogs.\n */\nconst Background = (props: Props) => (\n  <Paper\n    square\n    style={{\n      ...styles.container,\n      height: props.noFullHeight ? undefined : '100%',\n      width: props.width ? props.width : undefined,\n      flex: props.noExpand ? undefined : 1,\n      ...(props.maxWidth ? styles.maxWidth : undefined),\n    }}\n  >\n    {props.children}\n  </Paper>\n);\n\nexport default Background;\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport TextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { computeTextFieldStyleProps } from './TextField';\nimport { MarkdownText } from './MarkdownText';\n\ntype ValueProps = {|\n  value: number | string,\n  // event and index should not be used, and be removed eventually\n  onChange?: (\n    event: {| target: {| value: string |} |},\n    index: number,\n    text: string // Note that even for number values, a string is returned\n  ) => void,\n|};\n\n// We support a subset of the props supported by Material-UI v0.x SelectField\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  ...ValueProps,\n  fullWidth?: boolean,\n  children: React.Node,\n  disabled?: boolean,\n\n  style?: {\n    flex?: 1,\n    width?: 'auto',\n  },\n  margin?: 'none' | 'dense',\n\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n\n  // If a hint text is specified, will be shown as an option for the empty\n  // value (\"\"), disabled.\n  hintText?: MessageDescriptor,\n|};\n\nconst INVALID_VALUE = '';\n\n/**\n * A select field based on Material-UI select field.\n * To be used with `SelectOption`.\n */\nexport default class SelectField extends React.Component<Props, {||}> {\n  _input = React.createRef<HTMLInputElement>();\n\n  focus() {\n    if (this._input.current) this._input.current.focus();\n  }\n\n  render() {\n    const { props } = this;\n    const onChange = props.onChange || undefined;\n\n    // Dig into children props to see if the current value is valid or not.\n    let hasValidValue = true;\n    const childrenValues = React.Children.map(props.children, child => {\n      if (child === null || !child.props) return null;\n\n      return child.props.value;\n    });\n    if (!childrenValues) {\n      console.error(\n        'SelectField has been passed no or invalid children. Only SelectOption and null are supported.'\n      );\n    } else {\n      hasValidValue =\n        childrenValues.filter(childValue => childValue === props.value)\n          .length !== 0;\n    }\n    const displayedValue = hasValidValue ? props.value : INVALID_VALUE;\n\n    const helperText = props.helperMarkdownText ? (\n      <MarkdownText source={props.helperMarkdownText} />\n    ) : null;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <TextField\n            select\n            {...computeTextFieldStyleProps(props)}\n            disabled={props.disabled}\n            fullWidth={props.fullWidth}\n            label={props.floatingLabelText}\n            helperText={helperText}\n            value={displayedValue}\n            onChange={\n              onChange\n                ? event => {\n                    onChange(event, -1, event.target.value);\n                  }\n                : undefined\n            }\n            InputLabelProps={{\n              shrink: true,\n            }}\n            SelectProps={{\n              native: true,\n            }}\n            style={props.style}\n            inputRef={this._input}\n          >\n            {!hasValidValue ? (\n              <option value={INVALID_VALUE} disabled>\n                {props.hintText\n                  ? i18n._(props.hintText)\n                  : i18n._(t`Choose an option`)}\n              </option>\n            ) : null}\n            {props.children}\n          </TextField>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\n// We support a subset of the props supported by Material-UI v0.x MenuItem\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  value: string | number | boolean,\n  primaryText: MessageDescriptor,\n  disabled?: boolean,\n|};\n\n/**\n * A native select option to be used with `SelectField`.\n */\nexport default class SelectOption extends React.Component<Props, {||}> {\n  render() {\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <option value={this.props.value} disabled={this.props.disabled}>\n            {i18n._(this.props.primaryText)}\n          </option>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Info from '@material-ui/icons/Info';\nimport Warning from '@material-ui/icons/Warning';\nimport Error from '@material-ui/icons/Error';\nimport { Spacer, Line, Column } from './Grid';\nimport FlatButton from './FlatButton';\nimport Text from './Text';\nimport GDevelopThemeContext from './Theme/ThemeContext';\nimport { ResponsiveLineStackLayout } from './Layout';\n\nconst styles = {\n  icon: { width: 28, height: 28, marginRight: 10, marginLeft: 10 },\n  content: { flex: 1 },\n};\n\ntype Props = {|\n  kind: 'info' | 'warning' | 'error',\n  children: React.Node,\n  onHide?: () => void,\n  renderLeftIcon?: () => React.Node,\n  renderRightButton?: () => React.Node,\n|};\n\n/**\n * Show an hint, warning or other message. If you want to allow the user\n * to permanently hide the hint/alert/message, see DismissableAlertMessage.\n */\nconst AlertMessage = ({\n  kind,\n  children,\n  onHide,\n  renderRightButton,\n  renderLeftIcon,\n}: Props) => {\n  const gdevelopTheme = React.useContext(GDevelopThemeContext);\n\n  return (\n    <Paper elevation={10} square>\n      <Column expand>\n        <ResponsiveLineStackLayout\n          alignItems=\"center\"\n          justifyContent=\"space-between\"\n          noMargin\n        >\n          <Line noMargin alignItems=\"center\">\n            {renderLeftIcon ? (\n              <React.Fragment>\n                {renderLeftIcon()}\n                <Spacer />\n                <Spacer />\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n                {kind === 'info' && <Info style={styles.icon} />}\n                {kind === 'warning' && (\n                  <Warning\n                    style={{\n                      ...styles.icon,\n                      color: gdevelopTheme.message.warning,\n                    }}\n                  />\n                )}\n                {kind === 'error' && (\n                  <Error\n                    style={{\n                      ...styles.icon,\n                      color: gdevelopTheme.message.error,\n                    }}\n                  />\n                )}\n              </React.Fragment>\n            )}\n            <Text style={styles.content}>{children}</Text>\n          </Line>\n          <ResponsiveLineStackLayout noMargin alignItems=\"center\">\n            {renderRightButton && renderRightButton()}\n            {onHide && (\n              <FlatButton\n                label={<Trans>Hide</Trans>}\n                onClick={() => onHide()}\n              />\n            )}\n          </ResponsiveLineStackLayout>\n        </ResponsiveLineStackLayout>\n      </Column>\n    </Paper>\n  );\n};\n\nexport default AlertMessage;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = {\n  containerStyle: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    padding: 10,\n  },\n};\n\nexport default props => (\n  <div style={{ ...styles.containerStyle, ...props.style }}>\n    <CircularProgress size={40} />\n  </div>\n);\n","//@flow\nimport React from 'react';\n\n/**\n * The list of event listeners.\n */\nconst listeners: Set<() => void> = new Set();\n\n// Event listener set-up\nconst callListeners = () => listeners.forEach(callback => callback());\nlet timeout;\nwindow.addEventListener('resize', () => {\n  clearTimeout(timeout);\n  timeout = setTimeout(callListeners, 200);\n});\n\n/**\n * A hook to call a callback when the window is resized,\n * while having only one resize DOM event handler.\n */\nexport const useOnResize = (callback: () => void) => {\n  React.useEffect(\n    () => {\n      listeners.add(callback);\n      return () => {\n        listeners.delete(callback);\n      };\n    },\n    [callback]\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport useForceUpdate from '../../Utils/UseForceUpdate';\nimport { useOnResize } from '../../Utils/UseOnResize';\n\nexport type WidthType = 'small' | 'medium' | 'large';\n\ntype Props = {|\n  children: (width: WidthType) => React.Node,\n|};\n\n/**\n * Wraps useResponsiveWindowWidth in a component.\n */\nexport const ResponsiveWindowMeasurer = ({ children }: Props) =>\n  children(useResponsiveWindowWidth());\n\n/**\n * Return the size of the window.\n * This considers a window to be \"small\" if *both* the width and height\n * are small.\n */\nexport const useResponsiveWindowWidth = (): WidthType => {\n  useOnResize(useForceUpdate());\n\n  if (typeof window === 'undefined') {\n    return 'medium';\n  }\n\n  return window.innerWidth < 750 || window.innerHeight < 350\n    ? 'small'\n    : window.innerWidth < 1150\n    ? 'medium'\n    : 'large';\n};\n","// @flow\n\nexport default (\n  name /*:string */,\n  exists /*:(string) => boolean */,\n  prefix /*: string */ = ''\n) => {\n  if (!exists(name)) return name;\n\n  let potentialName = prefix + name;\n  for (let i = 2; exists(potentialName); ++i) {\n    potentialName = prefix + name + i;\n  }\n\n  return potentialName;\n};\n","// @flow\n\n// These functions are very simple, but are there to ensure consistency\n// in the codebase when dealing with keys.\n\ntype SupportedEvent = KeyboardEvent | SyntheticKeyboardEvent<any>;\n\n/**\n * Check if the user asked to close/cancel what is being edited.\n */\nexport const shouldCloseOrCancel = (event: SupportedEvent) => {\n  return event.key === 'Escape';\n};\n\n/**\n * Check if the user asked to validate what is being edited.\n */\nexport const shouldValidate = (event: SupportedEvent) => {\n  return event.key === 'Enter';\n};\n\n/**\n * Check if the user asked to activate something.\n */\nexport const shouldActivate = (event: SupportedEvent) => {\n  return event.key === 'Enter' || event.key === ' ';\n};\n\n/**\n * Check if the user wants to apply changes or \"submit\" what they did.\n * This is more intentional from the user than just\n * `shouldValidate` or `shouldActivate`.\n */\nexport const shouldSubmit = (event: SupportedEvent) => {\n  return (event.metaKey || event.ctrlKey) && event.key === 'Enter';\n};\n\n/**\n * Check if the user asked to go to the next field.\n * Note that in most case, this should be automatically handled by the browser\n * (or material-ui), and using this should not be needed.\n */\nexport const shouldFocusNextField = (event: SupportedEvent) => {\n  return event.key === 'Tab' && !event.shiftKey;\n};\n\n/**\n * Check if the user asked to go to the previous field.\n * Note that in most case, this should be automatically handled by the browser\n * (or material-ui), and using this should not be needed.\n */\nexport const shouldFocusPreviousField = (event: SupportedEvent) => {\n  return event.key === 'Tab' && event.shiftKey;\n};\n","// @flow\nexport const selectableArea = 'selectable';\nexport const selectedArea = 'selected';\nexport const icon = 'icon';\n\nexport const largeSelectableArea = 'large-selectable';\nexport const largeSelectedArea = 'large-selected';\n\nexport const executableEventContainer = 'executable-event-container';\nexport const actionsContainer = 'actions-container';\nexport const conditionsContainer = 'conditions-container';\nexport const subInstructionsContainer = 'sub-instructions-container';\nexport const smallWidthContainer = 'small-width-container';\nexport const instructionParameter = 'instruction-parameter';\nexport const instructionInvalidParameter = 'instruction-invalid-parameter';\nexport const instructionMissingParameter = 'instruction-missing-parameter';\nexport const disabledText = 'disabled-text';\n\nexport const background = 'background';\n\nexport const eventsTree = 'events-tree';\nexport const eventsTreeWithSearchResults = 'with-search-results';\n\nexport const dropIndicator = 'drop-indicator';\nexport const cantDropIndicator = 'cant-drop-indicator';\n\nexport const linkContainer = 'link-container';\n\nexport const nameAndIconContainer = 'name-and-icon-container';\n","// @flow\nimport * as React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\n// We support a subset of the props supported by Material-UI v0.x Checkbox\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  label?: ?React.Node,\n  checked: boolean,\n  onCheck?: (e: {||}, checked: boolean) => void,\n  checkedIcon?: React.Node,\n  uncheckedIcon?: React.Node,\n  disabled?: boolean,\n\n  style?: {|\n    display?: 'inline-block',\n    marginRight?: number,\n    margin?: number,\n  |},\n|};\n\n/**\n * A text field based on Material-UI text field.\n */\nexport default (props: Props) => {\n  const { onCheck } = props;\n  const checkbox = (\n    <Checkbox\n      disabled={props.disabled}\n      checked={props.checked}\n      onChange={\n        onCheck ? event => onCheck(event, event.target.checked) : undefined\n      }\n      icon={props.uncheckedIcon}\n      checkedIcon={props.checkedIcon}\n      color=\"primary\"\n      style={props.label ? undefined : props.style}\n    />\n  );\n  return props.label ? (\n    <FormControlLabel\n      control={checkbox}\n      label={props.label}\n      style={props.style}\n    />\n  ) : (\n    checkbox\n  );\n};\n","// @flow\n\nconst gd: libGDevelop = global.gd;\n\n/**\n * Tool function to save a serializable object to a JS object.\n * Most gd.* objects are \"serializable\", meaning they have a serializeTo\n * and unserializeFrom method.\n *\n * @param {*} serializable\n * @param {*} methodName The name of the serialization method. \"unserializeFrom\" by default\n */\nexport function serializeToJSObject(\n  serializable: gdSerializable,\n  methodName: string = 'serializeTo'\n) {\n  const serializedElement = new gd.SerializerElement();\n  serializable[methodName](serializedElement);\n\n  // JSON.parse + toJSON is 30% faster than gd.Serializer.toJSObject.\n  const object = JSON.parse(gd.Serializer.toJSON(serializedElement));\n  serializedElement.delete();\n\n  return object;\n}\n\n/**\n * Tool function to save a serializable object to a JSON.\n * Most gd.* objects are \"serializable\", meaning they have a serializeTo\n * and unserializeFrom method.\n *\n * @param {*} serializable\n * @param {*} methodName The name of the serialization method. \"unserializeFrom\" by default\n */\nexport function serializeToJSON(\n  serializable: gdSerializable,\n  methodName: string = 'serializeTo'\n): string {\n  const serializedElement = new gd.SerializerElement();\n  serializable[methodName](serializedElement);\n\n  // toJSON is 20% faster than gd.Serializer.toJSObject + JSON.stringify.\n  const json = gd.Serializer.toJSON(serializedElement);\n  serializedElement.delete();\n\n  return json;\n}\n\n/**\n * Tool function to restore a serializable object from a JS object.\n * Most gd.* objects are \"serializable\", meaning they have a serializeTo\n * and unserializeFrom method.\n * @param {*} serializable A gd.* object to restore\n * @param {*} object The JS object to be used to restore the serializable.\n * @param {*} methodName The name of the unserialization method. \"unserializeFrom\" by default\n * @param {*} optionalProject The project to pass as argument for unserialization\n */\nexport function unserializeFromJSObject(\n  serializable: gdSerializable,\n  object: Object,\n  methodName: string = 'unserializeFrom',\n  optionalProject: ?gdProject = undefined\n) {\n  const serializedElement = gd.Serializer.fromJSObject(object);\n  if (!optionalProject) {\n    serializable[methodName](serializedElement);\n  } else {\n    // It's not uncommon for unserializeFrom methods of gd.* classes\n    // to require the project to be passed as first argument.\n    serializable[methodName](optionalProject, serializedElement);\n  }\n  serializedElement.delete();\n}\n","// @flow\nimport * as React from 'react';\nimport MUITabs from '@material-ui/core/Tabs';\nimport MUITab from '@material-ui/core/Tab';\n\n// We support a subset of the props supported by Material-UI v0.x Tabs\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype TabsProps<TabName> = {|\n  value?: TabName,\n  onChange: TabName => void,\n  children: React.Node, // Should be Tab\n|};\n\n/**\n * Tabs based on Material-UI Tabs.\n */\nexport class Tabs<TabName> extends React.Component<TabsProps<TabName>, {||}> {\n  render() {\n    return (\n      <MUITabs\n        variant=\"fullWidth\"\n        textColor=\"primary\"\n        value={this.props.value}\n        onChange={(e, newValue) => this.props.onChange(newValue)}\n      >\n        {this.props.children}\n      </MUITabs>\n    );\n  }\n}\n\n// We support a subset of the props supported by Material-UI v0.x Tabs\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype TabProps = {|\n  label: React.Node,\n  value: string,\n  tabIndex?: string,\n|};\n\n/**\n * A Tab based on Material-UI Tab.\n */\nexport class Tab extends React.Component<TabProps, {||}> {\n  render() {\n    return <MUITab {...this.props} />;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport ReactDOM from 'react-dom';\nimport ContextMenu from './ContextMenu';\nimport { type MenuItemTemplate } from './Menu.flow';\n\ntype Props = {|\n  element: React$Element<any>,\n  buildMenuTemplate: (i18n: I18nType) => Array<MenuItemTemplate>,\n  openMenuWithSecondaryClick?: boolean,\n  passExtraProps?: boolean,\n|};\n\ntype State = {||};\n\n/**\n * Wrap an element and display a menu when `onClick` prop is called on the element.\n */\n\nexport default class ElementWithMenu extends React.Component<Props, State> {\n  _contextMenu: ?ContextMenu;\n  _wrappedElement: ?any;\n\n  open = () => {\n    const { _contextMenu } = this;\n    if (!_contextMenu) return;\n\n    const node = ReactDOM.findDOMNode(this._wrappedElement);\n    if (node instanceof HTMLElement) {\n      const dimensions = node.getBoundingClientRect();\n\n      _contextMenu.open(\n        Math.round(dimensions.left + dimensions.width / 2),\n        Math.round(dimensions.top + dimensions.height)\n      );\n    }\n  };\n\n  render() {\n    const {\n      element,\n      buildMenuTemplate,\n      openMenuWithSecondaryClick,\n      passExtraProps,\n      ...otherProps\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        {React.cloneElement(element, {\n          onContextMenu: this.open,\n          // $FlowFixMe - Flow complaining about using too much spread operators\n          ...(openMenuWithSecondaryClick ? {} : { onClick: this.open }),\n          ref: wrappedElement => (this._wrappedElement = wrappedElement),\n          ...(passExtraProps ? otherProps : {}),\n        })}\n        <ContextMenu\n          ref={contextMenu => (this._contextMenu = contextMenu)}\n          buildMenuTemplate={buildMenuTemplate}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport IconButton from './IconButton';\nimport TextField from './TextField';\nimport Paper from '@material-ui/core/Paper';\nimport Close from '@material-ui/icons/Close';\nimport Search from '@material-ui/icons/Search';\nimport FilterList from '@material-ui/icons/FilterList';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport HelpIcon from './HelpIcon';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { useScreenType } from './Reponsive/ScreenTypeMeasurer';\nimport { shouldValidate } from './KeyboardShortcuts/InteractionKeys';\n\ntype Props = {|\n  /** Disables text field. */\n  disabled?: boolean,\n  /** Sets placeholder for the embedded text field. */\n  placeholder?: MessageDescriptor,\n  /** Fired when the text value changes. */\n  onChange?: string => void,\n  /** Fired when the search icon is clicked. */\n  onRequestSearch: string => void,\n  /** Override the inline-styles of the root element. */\n  style?: Object,\n  /** The value of the text field. */\n  value: string,\n  /** If tags are supported, the function to list the tags menu */\n  buildTagsMenuTemplate?: () => any,\n  /** If defined, a help icon button redirecting to this page will be shown */\n  helpPagePath?: ?string,\n|};\n\ntype State = {|\n  focus: boolean,\n  value: string,\n  active: boolean,\n|};\n\nconst getStyles = (props: Props, state: State) => {\n  const { disabled } = props;\n  const { value } = state;\n  const nonEmpty = value.length > 0;\n\n  return {\n    root: {\n      height: 30,\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    iconButtonClose: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n        transform: nonEmpty ? 'scale(1, 1)' : 'scale(0, 0)',\n        transition: 'transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n      },\n      iconStyle: {\n        opacity: nonEmpty ? 1 : 0,\n        transition: 'opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n      },\n    },\n    iconButtonSearch: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n        transform: nonEmpty ? 'scale(0, 0)' : 'scale(1, 1)',\n        transition: 'transform 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n        marginRight: -30,\n      },\n      iconStyle: {\n        opacity: nonEmpty ? 0 : 1,\n        transition: 'opacity 200ms cubic-bezier(0.4, 0.0, 0.2, 1)',\n      },\n    },\n    iconButtonFilter: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n      },\n    },\n    iconButtonHelp: {\n      style: {\n        opacity: !disabled ? 0.54 : 0.38,\n      },\n    },\n    input: {\n      width: '100%',\n    },\n    searchContainer: {\n      top: -1,\n      position: 'relative',\n      margin: 'auto 8px',\n      width: '100%',\n    },\n  };\n};\n\n/**\n * Material design search bar,\n * inspired from https://github.com/TeamWertarbyte/material-ui-search-bar\n *\n * Customized to add optional tags button.\n */\nexport default class SearchBar extends React.PureComponent<Props, State> {\n  state = {\n    focus: false,\n    value: this.props.value,\n    active: false,\n  };\n  _textField = React.createRef<TextField>();\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (this.props.value !== nextProps.value) {\n      this.setState({ ...this.state, value: nextProps.value });\n    }\n  }\n\n  focus = () => {\n    if (this._textField.current) {\n      this._textField.current.focus();\n    }\n  };\n\n  blur = () => {\n    if (this._textField.current) {\n      this._textField.current.blur();\n    }\n  };\n\n  handleFocus = () => {\n    this.setState({ focus: true });\n  };\n\n  handleBlur = () => {\n    this.setState({ focus: false });\n    if (this.state.value.trim().length === 0) {\n      this.setState({ value: '' });\n    }\n  };\n\n  handleInput = (e: {| target: {| value: string |} |}) => {\n    this.setState({ value: e.target.value });\n    this.props.onChange && this.props.onChange(e.target.value);\n  };\n\n  handleCancel = () => {\n    this.setState({ active: false, value: '' });\n    this.props.onChange && this.props.onChange('');\n  };\n\n  handleKeyPressed = (event: SyntheticKeyboardEvent<>) => {\n    if (shouldValidate(event)) {\n      this.props.onRequestSearch(this.state.value);\n    }\n  };\n\n  render() {\n    const styles = getStyles(this.props, this.state);\n    const { value } = this.state;\n    const { disabled, style, buildTagsMenuTemplate, helpPagePath } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <Paper\n            style={{\n              backgroundColor: muiTheme.searchBar.backgroundColor,\n              ...styles.root,\n              ...style,\n            }}\n            square\n            elevation={1}\n          >\n            <div style={styles.searchContainer}>\n              <TextField\n                margin=\"none\"\n                hintText={this.props.placeholder || t`Search`}\n                onBlur={this.handleBlur}\n                value={value}\n                onChange={this.handleInput}\n                onKeyUp={this.handleKeyPressed}\n                onFocus={this.handleFocus}\n                fullWidth\n                style={styles.input}\n                underlineShow={false}\n                disabled={disabled}\n                ref={this._textField}\n              />\n            </div>\n            {buildTagsMenuTemplate && (\n              <ElementWithMenu\n                element={\n                  <IconButton\n                    style={styles.iconButtonFilter.style}\n                    disabled={disabled}\n                    size=\"small\"\n                  >\n                    <FilterList />\n                  </IconButton>\n                }\n                buildMenuTemplate={buildTagsMenuTemplate}\n              />\n            )}\n            {helpPagePath && (\n              <HelpIcon\n                disabled={disabled}\n                helpPagePath={helpPagePath}\n                style={styles.iconButtonHelp.style}\n                size=\"small\"\n              />\n            )}\n            <IconButton\n              style={styles.iconButtonSearch.style}\n              disabled={disabled}\n              size=\"small\"\n            >\n              <Search style={styles.iconButtonSearch.iconStyle} />\n            </IconButton>\n            <IconButton\n              onClick={this.handleCancel}\n              style={styles.iconButtonClose.style}\n              disabled={disabled}\n              size=\"small\"\n            >\n              <Close style={styles.iconButtonClose.iconStyle} />\n            </IconButton>\n          </Paper>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n\nexport const useShouldAutofocusSearchbar = () => {\n  // Note: this is not a React hook but is named as one to encourage\n  // components to use it as such, so that it could be reworked\n  // at some point to use a context (verify in this case all usages).\n  const isTouchscreen = useScreenType() === 'touch';\n  return !isTouchscreen;\n};\n","// @flow\nimport * as React from 'react';\nimport Typography from '@material-ui/core/Typography';\n\ntype Props = {|\n  children: ?React.Node,\n|};\n\nconst style = {\n  paddingLeft: 8,\n};\n\n// A Subheader to be displayed in a List.\nexport default ({ children }: Props) =>\n  children ? (\n    <Typography variant={'overline'} style={style}>\n      {children}\n    </Typography>\n  ) : null;\n","// @flow\n\nexport type RGBColor = {|\n  r: number,\n  g: number,\n  b: number,\n  a?: number,\n|};\n\n/**\n * Convert a RGB color to a RGB string.\n */\nexport const rgbColorToRGBString = (rgbColor: ?RGBColor) => {\n  if (!rgbColor) return '';\n  return `${rgbColor.r};${rgbColor.g};${rgbColor.b}`;\n};\n\n/**\n * Convert a RGB color value to a Hex string.\n * @note No \"#\" or \"0x\" are added.\n */\nexport const rgbToHex = (r: number, g: number, b: number) =>\n  '' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n\n/**\n * Convert a RGB color to a Hex number.\n */\nexport const rgbToHexNumber = (r: number, g: number, b: number) =>\n  (r << 16) + (g << 8) + b;\n\n/**\n * Convert a RGB string (\"rr;gg;bb\") to a Hex number.\n */\nexport const rgbStringToHexNumber = (rgbString: string) => {\n  const rgbColor = rgbStringAndAlphaToRGBColor(rgbString);\n  if (!rgbColor) return 0;\n  return rgbToHexNumber(rgbColor.r, rgbColor.g, rgbColor.b);\n};\n\n/**\n * Convert a RGB string (\"rrr;ggg;bbb\") or a Hex string (\"#112244\") to a Hex number.\n */\nexport const rgbOrHexToHexNumber = (value: string): number => {\n  const splitValue = value.split(';');\n  // If a RGB string is provided, convert it to HexNumber and return it.\n  if (splitValue.length === 3) {\n    return rgbStringToHexNumber(value);\n  }\n  // Otherwise, convert the Hex to a number.\n  return parseInt(value.replace('#', ''), 16);\n};\n\n/**\n * Convert a Hex number to a RGB color.\n */\nconst hexNumberToRGBColor = (hexNumber: number) => {\n  return {\n    r: (hexNumber >> 16) & 0xff,\n    g: (hexNumber >> 8) & 0xff,\n    b: hexNumber & 0xff,\n    a: 255,\n  };\n};\n\n/**\n * Convert a Hex string to a RGB color.\n */\nconst hexToRGBColor = (hex: string) => {\n  const hexNumber = parseInt(hex.replace('#', ''), 16);\n  return hexNumberToRGBColor(hexNumber);\n};\n\n/**\n * Convert a Hex number to a RGB string.\n */\nexport const hexNumberToRGBString = (hex: number) => {\n  const rgbColor = hexNumberToRGBColor(hex);\n  return rgbColorToRGBString(rgbColor);\n};\n\n/**\n * Convert a RGB string (\"rrr;ggg;bbb\") or a Hex string (#rrggbb) to a RGB string.\n * @param value The color as a RGB string or Hex string\n */\nexport const rgbOrHexToRGBString = function(value: string): string {\n  const splitValue = value.split(';');\n  // If a RGB string is provided, just return it.\n  if (splitValue.length === 3) {\n    return value;\n  }\n  // Otherwise, convert the Hex to RGB.\n  const rgbColor = hexToRGBColor(value);\n  return `${rgbColor.r};${rgbColor.g};${rgbColor.b}`;\n};\n\n/**\n * Convert a RGB string (\"rrr;ggg;bbb\") and an alpha number to a RGB color.\n * If alpha is not defined, defaults to 1 (fully opaque)\n */\nexport const rgbStringAndAlphaToRGBColor = (\n  rgbColor: string,\n  alpha?: number\n): RGBColor | null => {\n  const colors = rgbColor.replace(/\"/g, '').split(';');\n  if (colors.length !== 3) {\n    return null;\n  }\n\n  const r = parseInt(colors[0], 10);\n  const g = parseInt(colors[1], 10);\n  const b = parseInt(colors[2], 10);\n  // alpha can be 0, and we need to handle this case.\n  const a = alpha === undefined || alpha === null ? 1 : alpha;\n\n  // Check if parsing of number was done properly (if not,\n  // we receive NaN which is not equal to itself).\n  // eslint-disable-next-line\n  if (r !== r || g !== g || b !== b) return null;\n\n  return {\n    r,\n    g,\n    b,\n    a,\n  };\n};\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport Typography from '@material-ui/core/Typography';\n// No i18n in this file\n\ntype Props = {|\n  tooltipText?: string,\n  style?: Object,\n  children: ?React.Node,\n|};\n\nconst BackgroundText = (props: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <Typography\n        variant=\"body2\"\n        align=\"center\"\n        style={{\n          opacity: 0.6,\n          textShadow: `1px 1px 0px ${muiTheme.emptyMessage.shadowColor}`,\n          ...props.style,\n        }}\n        title={props.tooltipText}\n      >\n        {props.children}\n      </Typography>\n    )}\n  </ThemeConsumer>\n);\n\nexport default BackgroundText;\n","// @flow\nimport * as React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { I18n } from '@lingui/react';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport ThemeContext from './Theme/ThemeContext';\nimport classNames from 'classnames';\n\n// Sensible defaults for react-markdown\nconst makeMarkdownCustomRenderers = (\n  isStandaloneText: boolean,\n  allowParagraphs: boolean\n) => ({\n  // Ensure link are opened in a new page\n  root: props => (isStandaloneText ? <div {...props} /> : <span {...props} />),\n  link: props =>\n    props.href ? (\n      <a href={props.href} target=\"_blank\" rel=\"noopener noreferrer\">\n        {props.children}\n      </a>\n    ) : (\n      props.children\n    ),\n  linkReference: props =>\n    props.href ? (\n      <a href={props.href} target=\"_blank\" rel=\"noopener noreferrer\">\n        {props.children}\n      </a>\n    ) : (\n      props.children\n    ),\n  // Add paragraphs only if we explictly opt in.\n  paragraph: props =>\n    isStandaloneText || allowParagraphs ? (\n      <p>{props.children}</p>\n    ) : (\n      props.children\n    ),\n});\n\ntype Props = {|\n  source?: string,\n  translatableSource?: MessageDescriptor,\n  isStandaloneText?: boolean,\n  allowParagraphs?: boolean,\n|};\n\n/**\n * Display a markdown text\n */\nexport const MarkdownText = (props: Props) => {\n  const gdevelopTheme = React.useContext(ThemeContext);\n  const markdownCustomRenderers = React.useMemo(\n    () =>\n      makeMarkdownCustomRenderers(\n        props.isStandaloneText || false,\n        props.allowParagraphs || false\n      ),\n    [props.isStandaloneText, props.allowParagraphs]\n  );\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <ReactMarkdown\n          escapeHtml\n          source={\n            props.translatableSource\n              ? i18n._(props.translatableSource)\n              : props.source\n          }\n          className={classNames({\n            'gd-markdown': true,\n            [gdevelopTheme.markdownRootClassName]: true,\n            'standalone-text-container': props.isStandaloneText,\n          })}\n          renderers={markdownCustomRenderers}\n        />\n      )}\n    </I18n>\n  );\n};\n","// @flow\nimport React from 'react';\nimport { CorsAwareImage } from './CorsAwareImage';\nimport GDevelopThemeContext from './Theme/ThemeContext';\n// No i18n in this file\n\ntype SizeProps =\n  | {|\n      iconSize: number,\n    |}\n  | {|\n      iconWidth: number,\n      iconHeight: number,\n    |};\n\ntype Props = {|\n  src: string,\n  tooltip?: string,\n  disabled?: boolean,\n  isGDevelopIcon?: boolean,\n  cssAnimation?: string,\n  useExactIconSize?: boolean,\n  ...SizeProps,\n|};\n\n/**\n * An icon that can be used as the leftIcon of a ListItem.\n * See also ToolbarIcon.\n */\nfunction ListIcon(props: Props) {\n  const gdevelopTheme = React.useContext(GDevelopThemeContext);\n  const {\n    src,\n    tooltip,\n    disabled,\n    isGDevelopIcon,\n    cssAnimation,\n    useExactIconSize,\n  } = props;\n\n  const iconWidth =\n    props.iconWidth !== undefined ? props.iconWidth : props.iconSize;\n  const iconHeight =\n    props.iconHeight !== undefined ? props.iconHeight : props.iconSize;\n\n  // The material-ui List component reserves 56 pixels for the icon, so the maximum\n  // size is 40px before we start consuming the padding space between the icon and\n  // the text. Add it back if necessary\n  const paddingRight = iconWidth > 40 ? 16 : 0;\n\n  const style = {\n    maxWidth: useExactIconSize ? undefined : iconWidth,\n    maxHeight: useExactIconSize ? undefined : iconHeight,\n    width: useExactIconSize ? iconWidth : undefined,\n    height: useExactIconSize ? iconHeight : undefined,\n    verticalAlign: 'middle', // Vertical centering\n    animation: cssAnimation,\n    filter: !isGDevelopIcon\n      ? undefined\n      : disabled\n      ? 'grayscale(100%)'\n      : gdevelopTheme.gdevelopIconsCSSFilter,\n  };\n\n  return (\n    <div\n      style={{\n        width: iconWidth,\n        height: iconHeight,\n        lineHeight: `${iconHeight}px`, // Vertical centering\n        textAlign: 'center', // Horizontal centering\n        paddingRight,\n      }}\n    >\n      {isGDevelopIcon ? (\n        <img title={tooltip} alt={tooltip} src={src} style={style} />\n      ) : (\n        <CorsAwareImage title={tooltip} alt={tooltip} src={src} style={style} />\n      )}\n    </div>\n  );\n}\n\nconst ListIconMemo = React.memo<Props>(ListIcon);\nexport default ListIconMemo;\n","// @flow\nimport * as React from 'react';\nimport { type Profile } from '../Utils/GDevelopServices/Authentication';\nimport { User as FirebaseUser } from 'firebase/auth';\nimport { type Badge } from '../Utils/GDevelopServices/Badge';\nimport {\n  type Limits,\n  type Usages,\n  type Subscription,\n} from '../Utils/GDevelopServices/Usage';\n\nexport type AuthenticatedUser = {|\n  authenticated: boolean,\n  firebaseUser: ?FirebaseUser,\n  profile: ?Profile,\n  badges: ?Array<Badge>,\n  limits: ?Limits,\n  usages: ?Usages,\n  subscription: ?Subscription,\n  onLogout: () => void,\n  onLogin: () => void,\n  onEdit: () => void,\n  onChangeEmail: () => void,\n  onCreateAccount: () => void,\n  onBadgesChanged: () => Promise<void>,\n  onRefreshUserProfile: () => Promise<void>,\n  onRefreshFirebaseProfile: () => Promise<void>,\n  onSendEmailVerification: () => Promise<void>,\n  onAcceptGameStatsEmail: () => Promise<void>,\n  getAuthorizationHeader: () => Promise<string>,\n|};\n\nexport const initialAuthenticatedUser = {\n  authenticated: false,\n  firebaseUser: null,\n  profile: null,\n  badges: null,\n  subscription: null,\n  usages: null,\n  limits: null,\n  onLogout: () => {},\n  onLogin: () => {},\n  onEdit: () => {},\n  onChangeEmail: () => {},\n  onCreateAccount: () => {},\n  onBadgesChanged: async () => {},\n  onRefreshUserProfile: async () => {},\n  onRefreshFirebaseProfile: async () => {},\n  onSendEmailVerification: async () => {},\n  onAcceptGameStatsEmail: async () => {},\n  getAuthorizationHeader: () => Promise.reject(new Error('Unimplemented')),\n};\n\nconst AuthenticatedUserContext = React.createContext<AuthenticatedUser>(\n  initialAuthenticatedUser\n);\n\nexport default AuthenticatedUserContext;\n","// @flow\nimport * as React from 'react';\nimport ReactDOM from 'react-dom';\nimport Popper from '@material-ui/core/Popper';\nimport muiZIndex from '@material-ui/core/styles/zIndex';\nimport Functions from '@material-ui/icons/Functions';\nimport RaisedButton from '../../../UI/RaisedButton';\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\nimport { mapVector } from '../../../Utils/MapFor';\nimport ExpressionSelector from '../../InstructionEditor/InstructionOrExpressionSelector/ExpressionSelector';\nimport ExpressionParametersEditorDialog, {\n  type ParameterValues,\n} from './ExpressionParametersEditorDialog';\nimport { hasNonCodeOnlyParameters } from './ExpressionParametersEditor';\nimport { formatExpressionCall } from './FormatExpressionCall';\nimport { type EnumeratedExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type ParameterFieldProps } from '../ParameterFieldCommons';\nimport BackgroundHighlighting, {\n  type Highlight,\n} from './BackgroundHighlighting';\nimport debounce from 'lodash/debounce';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Paper from '@material-ui/core/Paper';\nimport { TextFieldWithButtonLayout } from '../../../UI/Layout';\nimport {\n  type ExpressionAutocompletion,\n  insertAutocompletionInExpression,\n  getAutocompletionsFromDescriptions,\n} from '../../../ExpressionAutocompletion';\nimport {\n  type AutocompletionsState,\n  getAutocompletionsInitialState,\n  setNewAutocompletions,\n  handleAutocompletionsKeyDown,\n  getVisibleAutocompletions,\n  getRemainingCount,\n} from './ExpressionAutocompletionsHandler';\nimport ExpressionAutocompletionsDisplayer from './ExpressionAutocompletionsDisplayer';\nimport { ResponsiveWindowMeasurer } from '../../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport {\n  shouldCloseOrCancel,\n  shouldSubmit,\n} from '../../../UI/KeyboardShortcuts/InteractionKeys';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    alignItems: 'flex-start',\n  },\n  textFieldContainer: {\n    flex: 1,\n    minWidth: 300,\n  },\n  textFieldAndHightlightContainer: {\n    position: 'relative',\n  },\n  expressionSelectorPopoverContentSmall: {\n    display: 'flex',\n    maxHeight: 250,\n  },\n  expressionSelectorPopoverContent: {\n    display: 'flex',\n    maxHeight: 350,\n  },\n  input: {\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    lineHeight: 1.4,\n  },\n  backgroundHighlightingWithFloatingLabel: {\n    marginTop: 22, //Properly align with the text field\n    paddingLeft: 12,\n    paddingRight: 12,\n    boxSizing: 'border-box',\n  },\n  backgroundHighlightingInline: {\n    marginTop: 0, //Properly align with the text field\n    paddingLeft: 0,\n    paddingRight: 0,\n  },\n  backgroundHighlightingInlineWithFloatingLabel: {\n    marginTop: 22, //Properly align with the text field\n    paddingLeft: 0,\n    paddingRight: 0,\n  },\n};\n\ntype State = {|\n  popoverOpen: boolean,\n  parametersDialogOpen: boolean,\n  selectedExpressionInfo: ?EnumeratedExpressionMetadata,\n  validatedValue: string,\n  errorText: ?string,\n  errorHighlights: Array<Highlight>,\n  autocompletions: AutocompletionsState,\n|};\n\ntype Props = {|\n  expressionType: 'number' | 'string',\n  /** An optional callback that can be used to provide additional autocompletions. */\n  onGetAdditionalAutocompletions?: (\n    currentExpression: string\n  ) => Array<ExpressionAutocompletion>,\n  /** An optional callback that can be used to show a custom error message. */\n  onExtractAdditionalErrors?: (\n    currentExpression: string,\n    currentExpressionNode: gdExpressionNode\n  ) => ?string,\n  renderExtraButton?: ({|\n    style: Object,\n  |}) => React.Node,\n  ...ParameterFieldProps,\n|};\n\nconst MAX_ERRORS_COUNT = 10;\n\nconst extractErrors = (\n  expressionNode: gdExpressionNode\n): {|\n  errorText: ?string,\n  errorHighlights: Array<Highlight>,\n|} => {\n  const expressionValidator = new gd.ExpressionValidator();\n  expressionNode.visit(expressionValidator);\n  const errors = expressionValidator.getErrors();\n\n  const errorHighlights: Array<Highlight> = mapVector(errors, error => ({\n    begin: error.getStartPosition(),\n    end: error.getEndPosition() + 1,\n    message: error.getMessage(),\n    type: 'error',\n  }));\n  const otherErrorsCount = Math.max(\n    0,\n    errorHighlights.length - MAX_ERRORS_COUNT\n  );\n  const hasMultipleErrors = errorHighlights.length > 1;\n\n  const filteredErrorHighlights =\n    otherErrorsCount > 0\n      ? errorHighlights.slice(0, MAX_ERRORS_COUNT)\n      : errorHighlights;\n\n  const errorText = filteredErrorHighlights\n    .map(\n      (highlight, i) =>\n        (hasMultipleErrors ? `[${i + 1}] ` : '') + highlight.message\n    )\n    .join(' ');\n\n  expressionValidator.delete();\n\n  return { errorText, errorHighlights };\n};\n\nexport default class ExpressionField extends React.Component<Props, State> {\n  _field: ?SemiControlledTextField = null;\n  _fieldElement: ?Element = null;\n  _inputElement: ?HTMLInputElement = null;\n\n  state = {\n    popoverOpen: false,\n    parametersDialogOpen: false,\n    selectedExpressionInfo: null,\n\n    validatedValue: this.props.value,\n    errorText: null,\n    errorHighlights: [],\n    autocompletions: getAutocompletionsInitialState(),\n  };\n\n  componentDidMount() {\n    if (this._field) {\n      const node = ReactDOM.findDOMNode(this._field);\n      if (node instanceof Element) {\n        this._fieldElement = node;\n      }\n      this._inputElement = this._field ? this._field.getInputNode() : null;\n    }\n  }\n\n  focus = () => {\n    if (this._field) {\n      this._field.focus();\n      this._enqueueValidation();\n    }\n  };\n\n  _openExpressionPopover = () => {\n    this.setState({\n      popoverOpen: true,\n    });\n  };\n\n  _handleFocus = (event: { preventDefault: () => void }) => {\n    // This prevents ghost click.\n    event.preventDefault();\n  };\n\n  _handleRequestClose = () => {\n    this.setState({\n      popoverOpen: false,\n    });\n  };\n\n  _handleChange = (value: string) => {\n    this.setState(\n      {\n        validatedValue: value,\n      },\n      () => this._enqueueValidation()\n    );\n  };\n\n  _handleBlur = (event: { currentTarget: { value: string } }) => {\n    const value = event.currentTarget.value;\n    if (this.props.onChange) this.props.onChange(value);\n    this.setState({ validatedValue: value }, () => {\n      this._enqueueValidation.cancel();\n      this._doValidation();\n      this.setState({\n        autocompletions: getAutocompletionsInitialState(),\n      });\n    });\n  };\n\n  _shouldOpenParametersDialog = (\n    expressionInfo: EnumeratedExpressionMetadata\n  ): boolean => {\n    // If there is no parameter to fill for the selected expression, no need to open the dialog.\n    return hasNonCodeOnlyParameters(expressionInfo.metadata);\n  };\n\n  _handleExpressionChosen = (expressionInfo: EnumeratedExpressionMetadata) => {\n    let newState = { popoverOpen: false };\n    if (this._shouldOpenParametersDialog(expressionInfo)) {\n      newState = {\n        ...newState,\n        parametersDialogOpen: true,\n        selectedExpressionInfo: expressionInfo,\n      };\n    } else {\n      this.insertExpression(expressionInfo, []);\n    }\n    this.setState(newState);\n  };\n\n  insertExpression = (\n    expressionInfo: EnumeratedExpressionMetadata,\n    parameterValues: ParameterValues\n  ) => {\n    if (!this._inputElement) return;\n    const cursorPosition = this._inputElement.selectionStart;\n\n    const functionCall = formatExpressionCall(expressionInfo, parameterValues);\n\n    // Generate the expression with the function call\n    const { value } = this.props;\n    const newValue =\n      value.substr(0, cursorPosition) +\n      functionCall +\n      value.substr(cursorPosition);\n\n    // Apply changes\n    if (this.props.onChange) this.props.onChange(newValue);\n    this.setState(\n      {\n        validatedValue: newValue,\n      },\n      () => this._enqueueValidation()\n    );\n\n    // Focus again and select what was just added.\n    setTimeout(() => {\n      if (this._field) this._field.focus();\n\n      setTimeout(() => {\n        if (this._inputElement) {\n          this._inputElement.setSelectionRange(\n            cursorPosition,\n            cursorPosition + functionCall.length\n          );\n        }\n      }, 5);\n    }, 5);\n  };\n\n  _insertAutocompletion = (\n    expressionAutocompletion: ExpressionAutocompletion\n  ) => {\n    // If the completion is exact, it's not a completion but just\n    // shown for informing the user.\n    if (expressionAutocompletion.isExact) return;\n\n    const caretLocation = this._inputElement\n      ? this._inputElement.selectionStart\n      : 0;\n    const expression = this.state.validatedValue;\n\n    const {\n      expression: newExpression,\n      caretLocation: newCaretLocation,\n    } = insertAutocompletionInExpression(\n      { expression, caretLocation },\n      {\n        completion: expressionAutocompletion.completion,\n        replacementStartPosition:\n          expressionAutocompletion.replacementStartPosition,\n        replacementEndPosition: expressionAutocompletion.replacementEndPosition,\n        addParenthesis: expressionAutocompletion.addParenthesis,\n        addDot: expressionAutocompletion.addDot,\n        addParameterSeparator: expressionAutocompletion.addParameterSeparator,\n        addNamespaceSeparator: expressionAutocompletion.addNamespaceSeparator,\n        hasVisibleParameters: expressionAutocompletion.hasVisibleParameters,\n      }\n    );\n\n    if (this._field) {\n      this._field.forceSetValue(newExpression);\n    }\n    if (this.props.onChange) this.props.onChange(newExpression);\n    this.setState(\n      {\n        validatedValue: newExpression,\n      },\n      () => {\n        this._enqueueValidation();\n        if (this._field) {\n          this._field.forceSetSelection(newCaretLocation, newCaretLocation);\n        }\n      }\n    );\n  };\n\n  _enqueueValidation = debounce(() => {\n    this._doValidation();\n  }, 250);\n\n  _doValidation = () => {\n    const {\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      expressionType,\n      scope,\n      onGetAdditionalAutocompletions,\n      onExtractAdditionalErrors,\n    } = this.props;\n    if (!project) return null;\n\n    const expression = this.state.validatedValue;\n\n    // Parsing can be time consuming (~1ms for simple expression,\n    // a few milliseconds for complex ones).\n\n    const parser = new gd.ExpressionParser2(\n      gd.JsPlatform.get(),\n      globalObjectsContainer,\n      objectsContainer\n    );\n\n    const expressionNode = parser\n      .parseExpression(expressionType, expression)\n      .get();\n\n    const { errorText, errorHighlights } = extractErrors(expressionNode);\n    const extraErrorText = onExtractAdditionalErrors\n      ? onExtractAdditionalErrors(expression, expressionNode)\n      : null;\n    const formattedErrorText = [extraErrorText, errorText]\n      .filter(Boolean)\n      .join(' - ');\n\n    // If the expression ends with a space, the user must be navigating or switching to another text\n    // so let's not return any autocompletions.\n    if (\n      expression.length > 0 &&\n      expression.charAt(expression.length - 1) === ' '\n    ) {\n      this.setState(state => ({\n        errorText: formattedErrorText,\n        errorHighlights,\n        autocompletions: getAutocompletionsInitialState(),\n      }));\n      return;\n    }\n\n    const cursorPosition = this._inputElement\n      ? this._inputElement.selectionStart\n      : 0;\n    const completionDescriptions = gd.ExpressionCompletionFinder.getCompletionDescriptionsFor(\n      expressionNode,\n      cursorPosition - 1\n    );\n    const newAutocompletions = getAutocompletionsFromDescriptions(\n      {\n        gd,\n        project,\n        globalObjectsContainer,\n        objectsContainer,\n        scope,\n      },\n      completionDescriptions\n    );\n    const allNewAutocompletions = onGetAdditionalAutocompletions\n      ? onGetAdditionalAutocompletions(expression).concat(newAutocompletions)\n      : newAutocompletions;\n\n    parser.delete();\n\n    this.setState(state => ({\n      errorText: formattedErrorText,\n      errorHighlights,\n      autocompletions: setNewAutocompletions(\n        state.autocompletions,\n        allNewAutocompletions\n      ),\n    }));\n  };\n\n  render() {\n    const {\n      value,\n      expressionType,\n      parameterMetadata,\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n      parameterRenderingService,\n    } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : this.props.isInline\n      ? undefined\n      : '-'; // We're using multiline TextField, which does not support having no label.\n    const longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : undefined;\n\n    const popoverStyle = {\n      width: this._fieldElement ? this._fieldElement.clientWidth : 'auto',\n      marginLeft: -5, // Remove the offset that the Popper has for some reason with disablePortal={true}\n      // Ensure the popper is above everything (modal, dialog, snackbar, tooltips, etc).\n      // There will be only one ExpressionSelector opened at a time, so it's fair to put the\n      // highest z index. If this is breaking, check the z-index of material-ui.\n      zIndex: muiZIndex.tooltip + 100,\n    };\n\n    const backgroundHighlightingStyle = this.props.isInline\n      ? // An inline GenericExpressionField is shown with a TextField\n        // with variant \"standard\", and no margins. The label is shown\n        // only if provided (description), so we need to adapt the margins\n        // of the background\n        description\n        ? styles.backgroundHighlightingInlineWithFloatingLabel\n        : styles.backgroundHighlightingInline\n      : // A non-inline GenericExpressionField is shown with a TextField\n        // with variant \"filled\". As we're using a *multiline* field, it\n        // always put space for the label, even if not provided.\n        styles.backgroundHighlightingWithFloatingLabel;\n\n    return (\n      <React.Fragment>\n        <TextFieldWithButtonLayout\n          margin={this.props.isInline ? 'none' : 'dense'}\n          renderTextField={() => (\n            <div style={styles.textFieldContainer}>\n              <div style={styles.textFieldAndHightlightContainer}>\n                <BackgroundHighlighting\n                  value={this.state.validatedValue}\n                  style={{ ...styles.input, ...backgroundHighlightingStyle }}\n                  highlights={this.state.errorHighlights}\n                />\n                <SemiControlledTextField\n                  margin={this.props.isInline ? 'none' : 'dense'}\n                  value={value}\n                  floatingLabelText={description}\n                  helperMarkdownText={longDescription}\n                  hintText={expressionType === 'string' ? '\"\"' : undefined}\n                  inputStyle={styles.input}\n                  onChange={this._handleChange}\n                  onBlur={this._handleBlur}\n                  ref={field => (this._field = field)}\n                  onFocus={this._handleFocus}\n                  errorText={this.state.errorText}\n                  onClick={() => this._enqueueValidation()}\n                  onKeyDown={event => {\n                    const autocompletions = handleAutocompletionsKeyDown(\n                      this.state.autocompletions,\n                      {\n                        event,\n                        onUpdateAutocompletions: this._enqueueValidation,\n                        onInsertAutocompletion: this._insertAutocompletion,\n                      }\n                    );\n                    this.setState({ autocompletions });\n\n                    // If the user pressed the key to close (or to submit),\n                    // there is a chance that this will trigger the closing\n                    // of the dialog/popover containing the expression field.\n                    // Apply the changes now as otherwise the onBlur handler\n                    // has a risk not to be called (as the component will be\n                    // unmounted).\n                    if (shouldCloseOrCancel(event) || shouldSubmit(event)) {\n                      const value = event.currentTarget.value;\n                      if (this.props.onChange) this.props.onChange(value);\n                    }\n                  }}\n                  multiline\n                  fullWidth\n                />\n              </div>\n              {this._inputElement && this.state.popoverOpen && (\n                <ClickAwayListener onClickAway={this._handleRequestClose}>\n                  <Popper\n                    style={popoverStyle}\n                    open={this.state.popoverOpen}\n                    anchorEl={this._inputElement}\n                    placement=\"bottom\"\n                    disablePortal={\n                      true /* Can't use portals as this would put the Popper outside of the Modal, which is keeping the focus in the modal (so the search bar and keyboard browsing won't not work) */\n                    }\n                  >\n                    <ResponsiveWindowMeasurer>\n                      {screenSize => (\n                        <Paper\n                          style={\n                            screenSize === 'small'\n                              ? styles.expressionSelectorPopoverContentSmall\n                              : styles.expressionSelectorPopoverContent\n                          }\n                        >\n                          <ExpressionSelector\n                            selectedType=\"\"\n                            onChoose={(type, expression) => {\n                              this._handleExpressionChosen(expression);\n                            }}\n                            expressionType={expressionType}\n                            focusOnMount\n                            scope={scope}\n                          />\n                        </Paper>\n                      )}\n                    </ResponsiveWindowMeasurer>\n                  </Popper>\n                </ClickAwayListener>\n              )}\n              {this._inputElement &&\n                !this.state.popoverOpen &&\n                parameterRenderingService && (\n                  <ExpressionAutocompletionsDisplayer\n                    project={project}\n                    anchorEl={this._inputElement}\n                    expressionAutocompletions={getVisibleAutocompletions(\n                      this.state.autocompletions\n                    )}\n                    remainingCount={getRemainingCount(\n                      this.state.autocompletions\n                    )}\n                    selectedCompletionIndex={\n                      this.state.autocompletions.selectedCompletionIndex\n                    }\n                    onChoose={expressionAutocompletion => {\n                      this._insertAutocompletion(expressionAutocompletion);\n\n                      setTimeout(\n                        this.focus,\n                        50 /* Give back the focus to the field after a completion is inserted */\n                      );\n                    }}\n                    parameterRenderingService={parameterRenderingService}\n                  />\n                )}\n            </div>\n          )}\n          renderButton={style => (\n            <React.Fragment>\n              {!this.props.isInline &&\n                this.props.renderExtraButton &&\n                this.props.renderExtraButton({\n                  style,\n                })}\n              {!this.props.isInline && (\n                <RaisedButton\n                  icon={<Functions />}\n                  label={\n                    expressionType === 'string'\n                      ? '\"ABC\"'\n                      : expressionType === 'number'\n                      ? '123'\n                      : ''\n                  }\n                  primary\n                  style={style}\n                  onClick={this._openExpressionPopover}\n                />\n              )}\n            </React.Fragment>\n          )}\n        />\n\n        {this.state.parametersDialogOpen && this.state.selectedExpressionInfo && (\n          <ExpressionParametersEditorDialog\n            project={project}\n            scope={scope}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            expressionMetadata={this.state.selectedExpressionInfo.metadata}\n            onDone={parameterValues => {\n              if (!this.state.selectedExpressionInfo) return;\n\n              this.insertExpression(\n                this.state.selectedExpressionInfo,\n                parameterValues\n              );\n              this.setState({\n                parametersDialogOpen: false,\n                selectedExpressionInfo: null,\n              });\n            }}\n            onRequestClose={() => {\n              this.setState({\n                parametersDialogOpen: false,\n                selectedExpressionInfo: null,\n              });\n            }}\n            parameterRenderingService={parameterRenderingService}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type GDevelopTheme } from '.';\nimport DefaultTheme from './DefaultTheme';\n\nconst GDevelopThemeContext = React.createContext<GDevelopTheme>(\n  DefaultTheme.gdevelopTheme\n);\n\nexport default GDevelopThemeContext;\n","// @flow\nimport * as React from 'react';\nimport PreferencesContext, {\n  type AlertMessageIdentifier,\n} from '../MainFrame/Preferences/PreferencesContext';\nimport AlertMessage from './AlertMessage';\nimport Window from '../Utils/Window';\n\ntype Props = {|\n  kind: 'info' | 'warning',\n  children: React.Node,\n  identifier: AlertMessageIdentifier,\n|};\n\n/**\n * Show an alert that can be permanently hidden. Hidden messages\n * will be stored in preferences.\n */\nconst DismissableAlertMessage = ({ identifier, kind, children }: Props) => (\n  <PreferencesContext.Consumer>\n    {({ values, showAlertMessage }) =>\n      !values.hiddenAlertMessages[identifier] && (\n        <AlertMessage\n          kind={kind}\n          children={children}\n          onHide={() => {\n            const answer = Window.showConfirmDialog(\n              \"Are you sure you want to hide this hint? You won't see it again, unless you re-activate it from the preferences.\"\n            );\n\n            if (!answer) return;\n\n            showAlertMessage(identifier, false);\n          }}\n        />\n      )\n    }\n  </PreferencesContext.Consumer>\n);\n\nexport default DismissableAlertMessage;\n","// @flow\nimport * as React from 'react';\n\ntype Props = {|\n  src: ?string,\n  className?: string,\n  style?: Object,\n  /* img elements must have an alt prop, either with meaningful text, or an empty string for decorative images */\n  alt: ?string,\n  title?: ?string,\n  onError?: (?Error) => void,\n  onLoad?: (e: any) => void,\n|};\n\nconst addSearchParameterToUrl = (\n  url: string,\n  urlEncodedParameterName: string,\n  urlEncodedValue: string\n) => {\n  if (url.startsWith('data:') || url.startsWith('blob:')) {\n    // blob/data protocol does not support search parameters, which are useless anyway.\n    return url;\n  }\n\n  const separator = url.indexOf('?') === -1 ? '?' : '&';\n  return url + separator + urlEncodedParameterName + '=' + urlEncodedValue;\n};\n\n/**\n * An `img` element where the `src` URL has an extra parameter added to avoid CORS issue\n * when trying to load the image from another website (typically for game previews/exports).\n *\n * As a rule of thumb, use this **anytime you need to display an image that is a game resource/\n * user chosen image**.\n * On the contrary, if you're displaying a built-in GDevelop image, coming for example from the\n * \"res/\" folder (i.e: a GDevelop icon), you don't need this and can use `<img>` as usual.\n */\nexport const CorsAwareImage = (props: Props) => (\n  <img // eslint-disable-line jsx-a11y/alt-text\n    {...props}\n    src={\n      // To avoid strange/hard to understand CORS issues, we add a dummy parameter.\n      // By doing so, we force browser to consider this URL as different than the one traditionally\n      // used to render the resource in the editor (usually as an `<img>` or as a background image).\n      // If we don't add this distinct parameter, it can happen that browsers fail to load the image\n      // as it's already in the **browser cache** but with slightly different request parameters -\n      // making the CORS checks fail (even if it's coming from the browser cache).\n      //\n      // It's happening sometimes (according to loading order probably) in Chrome and (more often)\n      // in Safari. It might be linked to Amazon S3 + CloudFront that \"doesn't support the Vary: Origin header\".\n      // To be safe, we entirely avoid the issue with this parameter, making the browsers consider\n      // the resources for use in Pixi.js and for the rest of the editor as entirely separate.\n      //\n      // See:\n      // - https://stackoverflow.com/questions/26140487/cross-origin-amazon-s3-not-working-using-chrome\n      // - https://stackoverflow.com/questions/20253472/cors-problems-with-amazon-s3-on-the-latest-chomium-and-google-canary\n      // - https://stackoverflow.com/a/20299333\n      //\n      // Search for \"cors-cache-workaround\" in the codebase for the same workarounds.\n      props.src\n        ? addSearchParameterToUrl(props.src, 'gdUsage', 'img')\n        : undefined\n    }\n  />\n);\n","// @flow\nimport { type ExpressionParameters } from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nconst gd: libGDevelop = global.gd;\n\n/**\n * Given an instruction or an expression and a parameter number,\n * return the name of the object that this parameter (usually, a \"behavior\" or a \"objectvar\") should use.\n *\n * This is an extension to ParameterMetadataTools.cpp and ParameterMetadataTools.h.\n * It's only here to ease to search of the object name in fields like BehaviorField or\n * ObjectVariableField.\n */\nexport const getLastObjectParameterValue = ({\n  instructionMetadata,\n  instruction,\n  expressionMetadata,\n  expression,\n  parameterIndex,\n}: {|\n  instructionMetadata: ?gdInstructionMetadata,\n  instruction: ?gdInstruction,\n  expressionMetadata: ?gdExpressionMetadata,\n  expression: ?ExpressionParameters,\n  parameterIndex: ?number,\n|}): ?string => {\n  if (parameterIndex === undefined || parameterIndex == null) {\n    // No parameter index given: the parameter is not even in a list of parameters\n    return null;\n  }\n\n  let objectName = null;\n  if (instructionMetadata && instruction) {\n    const objectParameterIndex = gd.ParameterMetadataTools.getObjectParameterIndexFor(\n      instructionMetadata.getParameters(),\n      parameterIndex\n    );\n    if (\n      objectParameterIndex >= 0 &&\n      objectParameterIndex < instruction.getParametersCount()\n    ) {\n      objectName = instruction.getParameter(objectParameterIndex);\n    }\n  } else if (expressionMetadata && expression) {\n    const objectParameterIndex = gd.ParameterMetadataTools.getObjectParameterIndexFor(\n      expressionMetadata.getParameters(),\n      parameterIndex\n    );\n    if (\n      objectParameterIndex >= 0 &&\n      objectParameterIndex < expression.getParametersCount()\n    ) {\n      objectName = expression.getParameter(objectParameterIndex);\n    }\n  }\n\n  return objectName;\n};\n\nexport const getLastObjectParameterObjectType = (\n  parameters: gdVectorParameterMetadata,\n  parameterIndex: number\n) => {\n  const objectParameterIndex = gd.ParameterMetadataTools.getObjectParameterIndexFor(\n    parameters,\n    parameterIndex\n  );\n  if (objectParameterIndex < 0 || objectParameterIndex >= parameters.size()) {\n    return '';\n  }\n\n  return parameters.at(objectParameterIndex).getExtraInfo();\n};\n\n/**\n * Given an instruction or an expression and a parameter number,\n * return the value of the previous parameter.\n */\nexport const getPreviousParameterValue = ({\n  instruction,\n  expression,\n  parameterIndex,\n}: {|\n  instruction: ?gdInstruction,\n  expression: ?ExpressionParameters,\n  parameterIndex: ?number,\n|}): ?string => {\n  if (parameterIndex === undefined || parameterIndex == null) {\n    // No parameter index given: the parameter is not even in a list of parameters\n    return null;\n  }\n\n  if (instruction) {\n    if (\n      parameterIndex >= 1 &&\n      parameterIndex < instruction.getParametersCount()\n    ) {\n      return instruction.getParameter(parameterIndex - 1);\n    }\n  } else if (expression) {\n    if (\n      parameterIndex >= 1 &&\n      parameterIndex < expression.getParametersCount()\n    ) {\n      return expression.getParameter(parameterIndex - 1);\n    }\n  }\n\n  return null;\n};\n\n/**\n * Try to extract the value of a string literal, or null. Result is not guaranteed to be valid.\n * - for `\"Hello\"`, this returns `Hello`.\n * - for `\"Hello`, this returns null.\n * - for `\"H\" + \"O\"`, this returns `H\" + \"O`.\n */\nexport const tryExtractStringLiteralContent = (\n  parameterValue: ?string\n): ?string => {\n  if (!parameterValue) return null;\n\n  const trimmedParameterValue = parameterValue.trim();\n  if (\n    trimmedParameterValue.length >= 2 &&\n    trimmedParameterValue[0] === '\"' &&\n    trimmedParameterValue[trimmedParameterValue.length - 1] === '\"'\n  ) {\n    return trimmedParameterValue.substr(1, trimmedParameterValue.length - 2);\n  }\n\n  return null;\n};\n\nexport const getParameterChoices = (\n  parameterMetadata: ?gdParameterMetadata\n): Array<ExpressionAutocompletion> => {\n  if (!parameterMetadata) {\n    return [];\n  }\n\n  try {\n    return JSON.parse(parameterMetadata.getExtraInfo()).map(choice => ({\n      kind: 'Text',\n      completion: `\"${choice}\"`,\n    }));\n  } catch (exception) {\n    console.error(\n      'The parameter seems misconfigured, as an array of choices could not be extracted - verify that your properly wrote a list of choices in JSON format. Full exception is:',\n      exception\n    );\n  }\n\n  return [];\n};\n","import React, { Component } from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport Text from './Text';\n\nconst style = {\n  display: 'flex',\n  alignItems: 'center',\n  paddingLeft: 8,\n  paddingRight: 8,\n};\n\nclass MiniToolbar extends Component {\n  render() {\n    const { justifyContent } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div\n            style={{\n              ...style,\n              height: 32,\n              backgroundColor: muiTheme.toolbar.backgroundColor,\n              justifyContent,\n            }}\n          >\n            {this.props.children}\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n\nconst firstChildToolbarTextStyle = {\n  marginRight: 4,\n};\nconst toolbarTextStyle = {\n  marginLeft: 4,\n  marginRight: 4,\n};\n\nexport const MiniToolbarText = ({ children, firstChild }) => (\n  <Text\n    noShrink\n    style={firstChild ? firstChildToolbarTextStyle : toolbarTextStyle}\n  >\n    {children}\n  </Text>\n);\n\nexport default MiniToolbar;\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport flatten from 'lodash/flatten';\nimport { type SelectedTags, hasStringAllTags } from '../Utils/TagsHelper';\nconst gd: libGDevelop = global.gd;\n\nexport type EnumeratedObjectMetadata = {|\n  extension: gdPlatformExtension,\n  objectMetadata: gdObjectMetadata,\n  name: string,\n  fullName: string,\n  description: string,\n  iconFilename: string,\n|};\n\nexport type ObjectWithContext = {|\n  object: gdObject,\n  global: boolean,\n|};\n\nexport type GroupWithContext = {|\n  group: gdObjectGroup,\n  global: boolean,\n|};\n\nexport type ObjectWithContextList = Array<ObjectWithContext>;\nexport type GroupWithContextList = Array<GroupWithContext>;\n\nexport const isSameObjectWithContext = (\n  objectWithContext: ?ObjectWithContext\n) => (other: ?ObjectWithContext) => {\n  return (\n    objectWithContext &&\n    other &&\n    objectWithContext.global === other.global &&\n    objectWithContext.object === other.object\n  );\n};\n\nexport const enumerateObjects = (\n  project: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  type: ?string = undefined\n) => {\n  const filterObject = (object: gdObject): boolean => {\n    return (\n      !type ||\n      gd.getTypeOfObject(project, objectsContainer, object.getName(), false) ===\n        type\n    );\n  };\n\n  const containerObjectsList: ObjectWithContextList = mapFor(\n    0,\n    objectsContainer.getObjectsCount(),\n    i => objectsContainer.getObjectAt(i)\n  )\n    .filter(filterObject)\n    .map((object: gdObject): ObjectWithContext => ({ object, global: false }));\n\n  const projectObjectsList: ObjectWithContextList =\n    project === objectsContainer\n      ? []\n      : mapFor(0, project.getObjectsCount(), i => project.getObjectAt(i))\n          .filter(filterObject)\n          .map(\n            (object: gdObject): ObjectWithContext => ({\n              object,\n              global: true,\n            })\n          );\n\n  const allObjectsList: ObjectWithContextList = containerObjectsList.concat(\n    projectObjectsList\n  );\n\n  return {\n    containerObjectsList,\n    projectObjectsList,\n    allObjectsList,\n  };\n};\n\nexport const enumerateObjectTypes = (\n  project: gdProject\n): Array<EnumeratedObjectMetadata> => {\n  const platform = project.getCurrentPlatform();\n  const extensionsList = platform.getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, extensionsList.size(), i => {\n      const extension = extensionsList.at(i);\n\n      return extension\n        .getExtensionObjectsTypes()\n        .toJSArray()\n        .map(objectType => extension.getObjectMetadata(objectType))\n        .map(objectMetadata => ({\n          extension,\n          objectMetadata,\n          name: objectMetadata.getName(),\n          fullName: objectMetadata.getFullName(),\n          description: objectMetadata.getDescription(),\n          iconFilename: objectMetadata.getIconFilename(),\n        }));\n    })\n  );\n};\n\nexport type ObjectFilteringOptions = {|\n  searchText: string,\n  selectedTags: SelectedTags,\n  hideExactMatches?: boolean,\n|};\n\nexport const filterObjectsList = (\n  list: ObjectWithContextList,\n  { searchText, selectedTags, hideExactMatches }: ObjectFilteringOptions\n): ObjectWithContextList => {\n  if (!searchText && !selectedTags.length) return list;\n\n  return list\n    .filter((objectWithContext: ObjectWithContext) => {\n      if (!selectedTags.length) return true;\n\n      const objectTags = objectWithContext.object.getTags();\n      return hasStringAllTags(objectTags, selectedTags);\n    })\n    .filter((objectWithContext: ObjectWithContext) => {\n      const objectName = objectWithContext.object.getName();\n\n      if (hideExactMatches && searchText === objectName) return undefined;\n\n      return objectName.toLowerCase().indexOf(searchText.toLowerCase()) !== -1;\n    });\n};\n\nexport type GroupFilteringOptions = {|\n  searchText: string,\n  hideExactMatches?: boolean,\n|};\n\nexport const filterGroupsList = (\n  list: GroupWithContextList,\n  { searchText, hideExactMatches }: GroupFilteringOptions\n): GroupWithContextList => {\n  if (!searchText) return list;\n\n  return list.filter((groupWithContext: GroupWithContext) => {\n    const groupName = groupWithContext.group.getName();\n\n    if (hideExactMatches && groupName === searchText) return undefined;\n\n    return groupName.toLowerCase().indexOf(searchText.toLowerCase()) !== -1;\n  });\n};\n\nexport const enumerateGroups = (\n  objectGroups: gdObjectGroupsContainer\n): Array<gdObjectGroup> => {\n  return mapFor(0, objectGroups.count(), i => {\n    return objectGroups.getAt(i);\n  });\n};\n\nexport const enumerateObjectsAndGroups = (\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  type: ?string = undefined\n) => {\n  const filterObject = (object: gdObject): boolean => {\n    return (\n      !type ||\n      gd.getTypeOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        object.getName(),\n        false\n      ) === type\n    );\n  };\n  const filterGroup = (group: gdObjectGroup): boolean => {\n    return (\n      !type ||\n      gd.getTypeOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        group.getName(),\n        true\n      ) === type\n    );\n  };\n\n  const containerObjectsList: ObjectWithContextList = mapFor(\n    0,\n    objectsContainer.getObjectsCount(),\n    i => objectsContainer.getObjectAt(i)\n  )\n    .filter(filterObject)\n    .map(object => ({ object, global: false }));\n\n  const containerGroups = objectsContainer.getObjectGroups();\n  const containerGroupsList: GroupWithContextList = enumerateGroups(\n    containerGroups\n  )\n    .filter(filterGroup)\n    .map(group => ({ group, global: false }));\n\n  const projectObjectsList: ObjectWithContextList =\n    globalObjectsContainer === objectsContainer\n      ? []\n      : mapFor(0, globalObjectsContainer.getObjectsCount(), i =>\n          globalObjectsContainer.getObjectAt(i)\n        )\n          .filter(filterObject)\n          .map(object => ({ object, global: true }));\n\n  const projectGroups = globalObjectsContainer.getObjectGroups();\n  const projectGroupsList: GroupWithContextList =\n    globalObjectsContainer === objectsContainer\n      ? []\n      : enumerateGroups(projectGroups)\n          .filter(filterGroup)\n          .map(group => ({ group, global: true }));\n\n  const allObjectsList: ObjectWithContextList = containerObjectsList.concat(\n    projectObjectsList\n  );\n  const allGroupsList: GroupWithContextList = containerGroupsList.concat(\n    projectGroupsList\n  );\n\n  return {\n    containerObjectsList,\n    projectObjectsList,\n    allObjectsList,\n    containerGroupsList,\n    projectGroupsList,\n    allGroupsList,\n  };\n};\n","// @flow\nimport RenderedUnknownInstance from './Renderers/RenderedUnknownInstance';\nimport RenderedSpriteInstance from './Renderers/RenderedSpriteInstance';\nimport RenderedTiledSpriteInstance from './Renderers/RenderedTiledSpriteInstance';\nimport RenderedPanelSpriteInstance from './Renderers/RenderedPanelSpriteInstance';\nimport RenderedTextInstance from './Renderers/RenderedTextInstance';\nimport RenderedShapePainterInstance from './Renderers/RenderedShapePainterInstance';\nimport RenderedTextEntryInstance from './Renderers/RenderedTextEntryInstance';\nimport RenderedParticleEmitterInstance from './Renderers/RenderedParticleEmitterInstance';\nimport PixiResourcesLoader from './PixiResourcesLoader';\nimport ResourcesLoader from '../ResourcesLoader';\nimport RenderedInstance from './Renderers/RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport { rgbOrHexToHexNumber } from '../Utils/ColorTransformer';\nconst path = optionalRequire('path');\nconst electron = optionalRequire('electron');\nconst gd: libGDevelop = global.gd;\n\n// Some PixiJS plugins like pixi-tilemap are not distributed as UMD modules,\n// or still require a global PIXI object to be accessible, so we expose PIXI here.\n// This can be removed if no more extension PixiJS plugin requires this.\nglobal.PIXI = PIXI;\n// We also export it as GlobalPIXIModule, which is normally used in GDJS runtime and extensions\n// to allow TypeScript typings of PIXI to work.\nglobal.GlobalPIXIModule = { PIXI };\n\nconst requirableModules = {};\n\n/**\n * A service containing functions that are called to render instances\n * of objects in a PIXI.Container.\n */\nexport default {\n  renderers: {\n    unknownObjectType: RenderedUnknownInstance,\n    Sprite: RenderedSpriteInstance,\n    'TiledSpriteObject::TiledSprite': RenderedTiledSpriteInstance,\n    'PanelSpriteObject::PanelSprite': RenderedPanelSpriteInstance,\n    'TextObject::Text': RenderedTextInstance,\n    'PrimitiveDrawing::Drawer': RenderedShapePainterInstance,\n    'TextEntryObject::TextEntry': RenderedTextEntryInstance,\n    'ParticleSystem::ParticleEmitter': RenderedParticleEmitterInstance,\n  },\n  getThumbnail: function(project: gdProject, object: gdObject) {\n    var objectType = object.getType();\n    if (this.renderers.hasOwnProperty(objectType))\n      return this.renderers[objectType].getThumbnail(\n        project,\n        ResourcesLoader,\n        object\n      );\n    else\n      return this.renderers['unknownObjectType'].getThumbnail(\n        project,\n        ResourcesLoader,\n        object\n      );\n  },\n  createNewInstanceRenderer: function(\n    project: gdProject,\n    layout: gdLayout,\n    instance: gdInitialInstance,\n    associatedObject: gdObject,\n    pixiContainer: any\n  ) {\n    var objectType = associatedObject.getType();\n    if (this.renderers.hasOwnProperty(objectType))\n      return new this.renderers[objectType](\n        project,\n        layout,\n        instance,\n        associatedObject,\n        pixiContainer,\n        PixiResourcesLoader\n      );\n    else {\n      console.warn(\n        `Object with type ${objectType} has no instance renderer registered. Please use registerInstanceRenderer to register your renderer.`\n      );\n      return new this.renderers['unknownObjectType'](\n        project,\n        layout,\n        instance,\n        associatedObject,\n        pixiContainer,\n        PixiResourcesLoader\n      );\n    }\n  },\n  registerInstanceRenderer: function(objectType: string, renderer: any) {\n    if (!renderer.getThumbnail) {\n      console.warn(\n        `Tried to register renderer for object \"${objectType}\", but getThumbnail is not defined.`\n      );\n      return;\n    }\n\n    if (this.renderers.hasOwnProperty(objectType)) {\n      console.warn(\n        `Tried to register renderer for object \"${objectType}\", but a renderer already exists.`\n      );\n\n      // If you want to update a renderer, this is currently unsupported.\n      // To implement this, we need to add support for instance renderers to be released/destroyed\n      // (some can have reference counting for some PIXI resources, etc... that would need to be properly released).\n      return;\n    }\n\n    console.info(`Properly registered renderer for object \"${objectType}\".`);\n    this.renderers[objectType] = renderer;\n  },\n  /**\n   * Register a module that can be then required using `requireModule`.\n   * This is necessary for the web-app, as all files must be bundled.\n   */\n  registerModule: function(requirePath: string, module: any) {\n    requirableModules[requirePath] = module;\n  },\n  /**\n   * Require a module, that was either registered using `registerModule` (i.e: on the web-app), or from\n   * the specified path (if `optionalRequire` can find the file, i.e: on the electron app).\n   */\n  requireModule: function(requireBasePath: string, requirePath: string): ?any {\n    // On Electron, where modules can be required at runtime from files, require the\n    // file, relative to the base path.\n    if (electron && path) {\n      const originalRequiredModulePath = path.join(\n        requireBasePath,\n        requirePath\n      );\n\n      // Get the \"module\" module from Node.js and temporarily overwrite its internal \"_load\"\n      // method. This method is called when a module is loaded, and is used here to provide \"pixi.js-legacy\"\n      // to extensions needing it. If we don't, \"pixi.js-legacy\" is found in development, because Node.js resolution\n      // algorithm traverses the paths until it reaches newIDE/app/node_modules, but is not found in production,\n      // because newIDE/app node_modules are now gone (compiled by Webpack).\n      const module = optionalRequire('module');\n      if (!module._load) {\n        throw new Error(\n          'module._load does not exist. This is possibly a change in Node.js that is breaking the custom loader, in ObjectsRenderingService.requireModule, that is injected to expose Pixi.js to extensions using \"require\".'\n        );\n      }\n      const originalNodeModuleLoad = module._load;\n\n      // Allow pixi.js to be required by extensions:\n      const allowedModules = {\n        'pixi.js-legacy': PIXI,\n        'pixi.js': PIXI,\n        '@pixi/core': PIXI,\n        '@pixi/display': PIXI,\n        '@pixi/constants': PIXI,\n        '@pixi/sprite': PIXI,\n        '@pixi/math': PIXI,\n        '@pixi/utils': PIXI,\n        '@pixi/graphics': PIXI,\n      };\n      module._load = function hookedLoader(request, parent, isMain) {\n        const loadedModule = allowedModules[request];\n        if (loadedModule) return loadedModule;\n\n        if (\n          request.indexOf('./') === 0 ||\n          request === originalRequiredModulePath\n        )\n          return originalNodeModuleLoad(request, parent, isMain);\n\n        console.error(\n          `A module (\"${request}\") was required from ${originalRequiredModulePath} but is not an allowed module or a relative file path starting with \"./\". null will be returned instead.`\n        );\n        console.warn(`Allowed modules are: `, Object.keys(allowedModules));\n        console.warn(\n          `Please use only allowed modules or a reference a local file.`\n        );\n        return null;\n      };\n\n      let requiredModule = null;\n      try {\n        requiredModule = global.require(originalRequiredModulePath);\n      } catch (ex) {\n        console.error(\n          `Unable to load module \"${requirePath}\". Only files located in ${requireBasePath} are supported. Exception was:`,\n          ex\n        );\n        requiredModule = null;\n      }\n\n      // Whatever the result, always restore the original \"_load\" in Node.js \"module\".\n      module._load = originalNodeModuleLoad;\n      return requiredModule;\n    } else {\n      // On the web-app, modules need to be registered manually.\n      if (requirableModules[requirePath]) return requirableModules[requirePath];\n\n      console.error(\n        `Unable to load module \"${requirePath}\". Are you sure you registered it using ObjectsRenderingService.registerModule? This is mandatory for the web-app to have the file bundled.`\n      );\n\n      return null;\n    }\n  },\n  rgbOrHexToHexNumber, // Expose a ColorTransformer function, useful to manage different color types for the extensions\n  gd, // Expose gd so that it can be used by renderers\n  PIXI, // Expose PIXI so that it can be used by renderers\n  RenderedInstance, // Expose the base class for renderers so that it can be used by renderers\n};\n","// @flow\n// Note: this file don't use export/imports nor Flow to allow its usage from Node.js\n\nconst optionalRequire = require('../Utils/OptionalRequire.js');\nconst electron = optionalRequire('electron');\nconst app = electron ? electron.remote.app : null;\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\nconst process = optionalRequire('process');\nvar isDarwin = process && /^darwin/.test(process.platform);\n\nconst tryPath = (\n  path /*: string*/,\n  onExists /*: string => void*/,\n  onNoAccess /*: Function*/\n) =>\n  fs.access(path, fs.constants.R_OK, err => {\n    if (!err) onExists(path);\n    else onNoAccess();\n  });\n\nconst findGDJS = () /*: Promise<{|gdjsRoot: string|}> */ => {\n  if (!path || !process || !fs) return Promise.reject(new Error('Unsupported'));\n\n  const appPath = app ? app.getAppPath() : process.cwd();\n\n  // The app path is [...]/*.app/Contents/Resources/app.asar on macOS\n  // and [...]/resources/app.asar on other OSes.\n  const pathToRoot = isDarwin ? '../../../../' : path.join('..', '..');\n  const rootPath = path.join(appPath, pathToRoot);\n\n  return new Promise((resolve, reject) => {\n    const onFound = gdjsRoot => resolve({ gdjsRoot });\n    const onNotFound = () => reject(new Error('Could not find GDJS'));\n\n    // First try to find GDJS in the parent folder (when newIDE is inside IDE)\n    tryPath(path.join(rootPath, '..', 'JsPlatform'), onFound, () => {\n      // Or in the resources (for a standalone newIDE)\n      tryPath(path.join(appPath, '..', 'GDJS'), onFound, () => {\n        // Or in the resources when developing with Electron\n        const devPath = path.join(\n          appPath,\n          '..',\n          '..',\n          'app',\n          'resources',\n          'GDJS'\n        );\n        tryPath(devPath, onFound, onNotFound);\n      });\n    });\n  });\n};\n\nmodule.exports = {\n  findGDJS,\n};\n","// @flow\nimport ResourcesLoader from '../ResourcesLoader';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { toNewGdMapStringString } from '../Utils/MapStringString';\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\nconst gd: libGDevelop = global.gd;\n\nexport const createOrUpdateResource = (\n  project: gdProject,\n  newlyCreatedResource: gdResource,\n  resourceName: string\n) => {\n  const resourcesManager = project.getResourcesManager();\n  if (resourcesManager.hasResource(resourceName)) {\n    resourcesManager.removeResource(resourceName);\n  }\n  newlyCreatedResource.setFile(resourceName);\n  newlyCreatedResource.setName(resourceName);\n  applyResourceDefaults(project, newlyCreatedResource);\n\n  // Important, we are responsible for deleting the resources that was given to us.\n  // Otherwise we have a memory leak.\n  resourcesManager.addResource(newlyCreatedResource);\n\n  newlyCreatedResource.delete();\n};\n\n/**\n * Get the local path of a resource. This works by asking the ResourcesLoader\n * for the resource URL, then stripping anything that is specific to a URL.\n */\nexport const getLocalResourceFullPath = (\n  project: gdProject,\n  resourceName: string\n) => {\n  let resourcePath = ResourcesLoader.getResourceFullUrl(\n    project,\n    resourceName,\n    {}\n  ).substring(7 /* Remove \"file://\" from the URL to get a local path */);\n\n  if (resourcePath.indexOf('?cache=') !== -1) {\n    // Remove, if needed, the cache bursting argument from the URL.\n    resourcePath = resourcePath.substring(\n      0,\n      resourcePath.lastIndexOf('?cache=')\n    );\n  }\n  return resourcePath;\n};\n\nexport const isPathInProjectFolder = (\n  project: gdProject,\n  resourcePath: string\n) => {\n  const projectPath = path.dirname(project.getProjectFile());\n  return resourcePath.includes(projectPath);\n};\n\nexport const copyAllToProjectFolder = (\n  project: gdProject,\n  resourcePaths: Array<string>\n): Promise<Array<string>> => {\n  if (!fs || !path) {\n    return Promise.resolve(resourcePaths);\n  }\n\n  const projectPath = path.dirname(project.getProjectFile());\n\n  return Promise.all(\n    resourcePaths.map(resourcePath => {\n      if (isPathInProjectFolder(project, resourcePath)) {\n        return resourcePath;\n      }\n\n      const resourceBasename = path.basename(resourcePath),\n        fileExtension = path.extname(resourceBasename),\n        fileNameWithoutExtension = path.basename(\n          resourceBasename,\n          fileExtension\n        );\n\n      const newFileNameWithoutExtension = newNameGenerator(\n        fileNameWithoutExtension,\n        tentativeFileName => {\n          const tentativePath =\n            path.join(projectPath, tentativeFileName) + fileExtension;\n          return fs.existsSync(tentativePath);\n        }\n      );\n\n      const resourceNewPath = path.join(\n        projectPath,\n        newFileNameWithoutExtension + fileExtension\n      );\n\n      return new Promise(resolve => {\n        fs.copyFile(resourcePath, resourceNewPath, err => {\n          if (err) {\n            return resolve(resourcePath);\n          }\n\n          return resolve(resourceNewPath);\n        });\n      });\n    })\n  );\n};\n\nexport const getResourceFilePathStatus = (\n  project: gdProject,\n  resourceName: string\n) => {\n  if (!fs) return '';\n  const resourcePath = path.normalize(\n    getLocalResourceFullPath(project, resourceName)\n  );\n\n  // The resource path doesn't exist\n  if (!fs.existsSync(resourcePath)) return 'error';\n\n  // The resource path is outside of the project folder\n  if (!isPathInProjectFolder(project, resourcePath)) return 'warning';\n\n  // The resource path seems ok\n  return '';\n};\n\nexport const applyResourceDefaults = (\n  project: gdProject,\n  newResource: gdResource\n) => {\n  if (newResource instanceof gd.ImageResource) {\n    newResource.setSmooth(project.getScaleMode() !== 'nearest');\n  }\n};\n\n/**\n * Refactor an entire project to rename a resource\n * @param project The project\n * @param resourceNewNames The map from old resource name to new resource name.\n */\nexport const renameResourcesInProject = (\n  project: gdProject,\n  resourceNewNames: { [string]: string }\n) => {\n  const renamedResourcesMap = toNewGdMapStringString(resourceNewNames);\n  const resourcesRenamer = new gd.ResourcesRenamer(renamedResourcesMap);\n  renamedResourcesMap.delete();\n  project.exposeResources(resourcesRenamer);\n  resourcesRenamer.delete();\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Column, Line } from './Grid';\nimport RaisedButton from './RaisedButton';\nimport EmptyMessage from './EmptyMessage';\n\ntype Props = {|\n  children: React.Node,\n  onRetry?: () => void | Promise<void>,\n|};\n\nconst PlaceholderError = ({ onRetry, children }: Props) => (\n  <Column expand alignItems=\"center\">\n    <EmptyMessage>{children}</EmptyMessage>\n    <Line>\n      {onRetry && (\n        <RaisedButton\n          primary\n          label={<Trans>Retry</Trans>}\n          onClick={() => {\n            onRetry();\n          }}\n        />\n      )}\n    </Line>\n  </Column>\n);\n\nexport default PlaceholderError;\n","// @flow\nimport * as React from 'react';\nimport MUITable from '@material-ui/core/Table';\nimport MUITableBody from '@material-ui/core/TableBody';\nimport MUITableCell from '@material-ui/core/TableCell';\nimport MUITableHead from '@material-ui/core/TableHead';\nimport MUITableRow from '@material-ui/core/TableRow';\n\ntype TableProps = {|\n  children: React.Node, // Should be TableHeader, TableBody or TableFooter\n|};\n\n/**\n * A Table based on Material-UI Table.\n * See https://material-ui.com/components/tables/\n */\nexport class Table extends React.Component<TableProps, {||}> {\n  render() {\n    return <MUITable size=\"small\" {...this.props} />;\n  }\n}\n\ntype TableBodyProps = {|\n  children?: React.Node, // Should be TableRow\n|};\n\n/**\n * A TableBody based on Material-UI TableBody.\n */\nexport class TableBody extends React.Component<TableBodyProps, {||}> {\n  render() {\n    return <MUITableBody {...this.props} />;\n  }\n}\n\ntype TableHeaderProps = {|\n  children: React.Node, // Should be a TableRow\n|};\n\n/**\n * A TableHeader based on Material-UI TableHead.\n */\nexport class TableHeader extends React.Component<TableHeaderProps, {||}> {\n  render() {\n    return <MUITableHead {...this.props} />;\n  }\n}\n\ntype TableHeaderColumnProps = {|\n  children?: React.Node, // Text of the column\n  style?: {|\n    textAlign: 'left' | 'right',\n    paddingRight: number,\n  |},\n|};\n\n/**\n * A TableHeaderColumn based on Material-UI TableCell.\n */\nexport class TableHeaderColumn extends React.Component<\n  TableHeaderColumnProps,\n  {||}\n> {\n  render() {\n    return <MUITableCell {...this.props} />;\n  }\n}\n\ntype TableRowProps = {|\n  children: React.Node,\n  style?: {|\n    backgroundColor: string,\n  |},\n|};\n\n/**\n * A TableRow based on Material-UI TableRow.\n */\nexport class TableRow extends React.Component<TableRowProps, {||}> {\n  render() {\n    return <MUITableRow {...this.props} />;\n  }\n}\n\ntype TableRowColumnProps = {|\n  children?: React.Node, // Content for the cell\n  style?: {|\n    width?: number,\n    paddingLeft?: number,\n    paddingRight?: number,\n    textAlign?: string,\n  |},\n|};\n\n/**\n * A TableRowColumn based on Material-UI TableRowColumn.\n */\nexport class TableRowColumn extends React.Component<TableRowColumnProps, {||}> {\n  render() {\n    return <MUITableCell {...this.props} />;\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport {\n  type Filters,\n  type TagsTreeNode,\n} from '../../Utils/GDevelopServices/Filters';\nimport InlineCheckbox from '../InlineCheckbox';\nimport { ColumnStackLayout } from '../Layout';\nimport PlaceholderLoader from '../PlaceholderLoader';\nimport EmptyMessage from '../EmptyMessage';\n\nexport type ChosenCategory = {|\n  node: TagsTreeNode,\n  parentNodes: Array<TagsTreeNode>,\n|};\n\nexport type FiltersState = {|\n  chosenFilters: Set<string>,\n  addFilter: string => void,\n  removeFilter: string => void,\n  chosenCategory: ?ChosenCategory,\n  setChosenCategory: (?ChosenCategory) => void,\n|};\n\nexport const useFilters = (): FiltersState => {\n  const [chosenCategory, setChosenCategory] = React.useState<?ChosenCategory>(\n    null\n  );\n  const [chosenFilters, setChosenFilters] = React.useState<Set<string>>(\n    () => new Set()\n  );\n\n  const setChosenCategoryAndUpdateFilters = React.useCallback(\n    (newChosenCategory: ?ChosenCategory) => {\n      if (!newChosenCategory) {\n        // No more category is chosen. Keep the filters\n        setChosenCategory(null);\n      } else {\n        // Remove the filters that are not included in the category,\n        // as it would make no sense (not displayed, and everything would be filtered out).\n        const newChosenFilters = new Set();\n        for (const tag of chosenFilters.keys()) {\n          if (newChosenCategory.node.allChildrenTags.includes(tag)) {\n            newChosenFilters.add(tag);\n          }\n        }\n\n        setChosenFilters(newChosenFilters);\n        setChosenCategory(newChosenCategory);\n      }\n    },\n    [chosenFilters]\n  );\n\n  return {\n    chosenCategory,\n    setChosenCategory: setChosenCategoryAndUpdateFilters,\n    chosenFilters,\n    addFilter: (tag: string) => {\n      const newChosenFilters = new Set(chosenFilters);\n      newChosenFilters.add(tag);\n      setChosenFilters(newChosenFilters);\n    },\n    removeFilter: (tag: string) => {\n      const newChosenFilters = new Set(chosenFilters);\n      newChosenFilters.delete(tag);\n\n      setChosenFilters(newChosenFilters);\n    },\n  };\n};\n\nconst capitalize = (str: string) => {\n  if (!str) return '';\n\n  return str[0].toUpperCase() + str.substr(1);\n};\n\ntype Props = {|\n  filtersState: FiltersState,\n  allFilters: ?Filters,\n  error: ?Error,\n|};\n\nexport const FiltersChooser = ({ filtersState, allFilters, error }: Props) => {\n  if (!allFilters) {\n    return <PlaceholderLoader />;\n  }\n  if (error) {\n    // Error and retry button shown somewhere else in the UI\n    return null;\n  }\n\n  // Only display the tags that are contained inside the selected category\n  const selectedCategoryTags = filtersState.chosenCategory\n    ? filtersState.chosenCategory.node.allChildrenTags\n    : allFilters.defaultTags;\n\n  return (\n    <ColumnStackLayout>\n      {!selectedCategoryTags ? (\n        <EmptyMessage>\n          <Trans>Choose a category to display filters</Trans>\n        </EmptyMessage>\n      ) : selectedCategoryTags.length ? (\n        selectedCategoryTags.map(tag => (\n          <InlineCheckbox\n            key={tag}\n            label={capitalize(tag)}\n            checked={filtersState.chosenFilters.has(tag)}\n            onCheck={() => {\n              if (filtersState.chosenFilters.has(tag)) {\n                filtersState.removeFilter(tag);\n              } else {\n                filtersState.addFilter(tag);\n              }\n            }}\n          />\n        ))\n      ) : (\n        <EmptyMessage>\n          <Trans>No filters in this category.</Trans>\n        </EmptyMessage>\n      )}\n    </ColumnStackLayout>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = {\n  progress: { marginRight: 8, verticalAlign: 'middle' },\n};\n\nexport default ({\n  children,\n  isLoading,\n}: {\n  children: React.Node,\n  isLoading: ?boolean,\n}) => (\n  <span>\n    {isLoading && <CircularProgress size={20} style={styles.progress} />}\n    {children}\n  </span>\n);\n","// @flow\nimport axios from 'axios';\nimport { GDevelopUserApi } from './ApiConfigs';\n\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\n\nexport const ACHIEVEMENT_FEATURE_FLAG = true;\n\nexport const TRIVIAL_FIRST_EVENT = 'trivial_first-event';\nexport const TRIVIAL_FIRST_BEHAVIOR = 'trivial_first-behavior';\nexport const TRIVIAL_FIRST_PREVIEW = 'trivial_first-preview';\nexport const TRIVIAL_FIRST_WEB_EXPORT = 'trivial_first-web-export';\nexport const TRIVIAL_FIRST_EXTENSION = 'trivial_first-extension';\nexport const TRIVIAL_FIRST_EFFECT = 'trivial_first-effect';\nexport const TRIVIAL_FIRST_DEBUG = 'trivial_first-debug';\n\nexport type Badge = {|\n  seen: boolean,\n  unlockedAt: string,\n  userId: string,\n  achievementId: string,\n|};\n\nexport type Achievement = {|\n  id: string,\n  category: string,\n  name: string,\n  description: string,\n|};\n\nexport type AchievementWithUnlockedDate = {|\n  ...Achievement,\n  unlockedAt: ?Date,\n|};\n\nconst isAchievementAlreadyClaimed = (\n  badges: Badge[],\n  achievementId: string\n): boolean => {\n  return badges.map(badge => badge.achievementId).includes(achievementId);\n};\n\nconst createOrEnsureBadgeForUser = async (\n  authenticatedUser: AuthenticatedUser,\n  achievementId: string\n): Promise<?Badge> => {\n  const {\n    badges,\n    firebaseUser,\n    getAuthorizationHeader,\n    onBadgesChanged,\n  } = authenticatedUser;\n  if (!badges || !firebaseUser) return null;\n  if (isAchievementAlreadyClaimed(badges, achievementId)) {\n    return null;\n  }\n\n  const userId = firebaseUser.uid;\n  try {\n    const authorizationHeader = await getAuthorizationHeader();\n    const response = await axios.post(\n      `${GDevelopUserApi.baseUrl}/user/${userId}/badge`,\n      {\n        achievementId,\n      },\n      {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      }\n    );\n    onBadgesChanged();\n    return response.data;\n  } catch (err) {\n    if (err.response && err.response.status === 409) {\n      console.warn('Badge already exists');\n    } else {\n      throw err;\n    }\n  }\n};\n\n/**\n * Check if user has already claimed the achievement, to avoid executing\n * any extra code if that's the case.\n */\nexport const addCreateBadgePreHookIfNotClaimed = <\n  T: (...args: Array<any>) => any\n>(\n  authenticatedUser: AuthenticatedUser,\n  achievementId: string,\n  callback: T\n): T => {\n  const { badges } = authenticatedUser;\n  if (!badges) return callback;\n  if (isAchievementAlreadyClaimed(badges, achievementId)) {\n    return callback;\n  }\n\n  // $FlowFixMe - hard to (or can't?) express the exact function being passed.\n  return (...args) => {\n    try {\n      createOrEnsureBadgeForUser(authenticatedUser, achievementId);\n    } catch (err) {\n      console.error(`Couldn't create badge ${achievementId}; ${err}`);\n    }\n    return callback.apply(null, args);\n  };\n};\n\nexport const getAchievements = (): Promise<Array<Achievement>> => {\n  return axios\n    .get(`${GDevelopUserApi.baseUrl}/achievement`)\n    .then(response => response.data);\n};\n\nexport const compareAchievements = (\n  a: AchievementWithUnlockedDate,\n  b: AchievementWithUnlockedDate\n) => {\n  if (b.unlockedAt && a.unlockedAt) {\n    return b.unlockedAt - a.unlockedAt;\n  } else if (a.unlockedAt && !b.unlockedAt) {\n    return -1;\n  } else if (!a.unlockedAt && b.unlockedAt) {\n    return 1;\n  } else {\n    return 0;\n  }\n};\n","// @flow\nimport * as React from 'react';\nimport { type CommandWithOptions, type SimpleCommand } from './CommandManager';\nimport CommandsContext from './CommandsContext';\nimport { type CommandName } from './CommandsList';\n\n/**\n * React hook for dynamically registering and deregistering a simple command\n */\nexport const useCommand = (\n  commandName: CommandName,\n  enabled: boolean,\n  command: SimpleCommand\n) => {\n  const commandManager = React.useContext(CommandsContext);\n  const { handler } = command;\n  React.useEffect(\n    () => {\n      if (!enabled) return;\n      commandManager.registerCommand(commandName, { handler });\n      return () => commandManager.deregisterCommand(commandName);\n    },\n    [commandManager, commandName, enabled, handler]\n  );\n};\n\n/**\n * React hook for dynamically registering and deregistering command with options\n */\nexport const useCommandWithOptions = (\n  commandName: CommandName,\n  enabled: boolean,\n  command: CommandWithOptions\n) => {\n  const commandManager = React.useContext(CommandsContext);\n  const { generateOptions } = command;\n  React.useEffect(\n    () => {\n      if (!enabled) return;\n      commandManager.registerCommand(commandName, { generateOptions });\n      return () => commandManager.deregisterCommand(commandName);\n    },\n    [commandManager, commandName, enabled, generateOptions]\n  );\n};\n\n/**\n * React component for using useCommand hook in\n * class components\n */\nexport const UseCommandHook = (props: {|\n  name: CommandName,\n  enabled: boolean,\n  command: SimpleCommand,\n|}) => {\n  useCommand(props.name, props.enabled, props.command);\n  return null;\n};\n\n/**\n * React component for using useCommandWithOptions\n * hook in class components\n */\nexport const UseCommandWithOptionsHook = (props: {|\n  name: CommandName,\n  enabled: boolean,\n  command: CommandWithOptions,\n|}) => {\n  useCommandWithOptions(props.name, props.enabled, props.command);\n  return null;\n};\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport PixiResourcesLoader from '../../ObjectsRendering/PixiResourcesLoader';\n\n/**\n * RenderedInstance is the base class used for creating renderers of instances,\n * which display on the scene editor, using Pixi.js, the instance of an object (see InstancesEditor).\n */\nexport default class RenderedInstance {\n  _project: gdProject;\n  _layout: gdLayout;\n  _instance: gdInitialInstance;\n  _associatedObject: gdObject;\n  _pixiContainer: PIXI.Container;\n  _pixiResourcesLoader: PixiResourcesLoader;\n  _pixiObject: any;\n  wasUsed: boolean;\n\n  constructor(\n    project: gdProject,\n    layout: gdLayout,\n    instance: gdInitialInstance,\n    associatedObject: gdObject,\n    pixiContainer: PIXI.Container,\n    pixiResourcesLoader: PixiResourcesLoader\n  ) {\n    this._pixiObject = null;\n    this._instance = instance;\n    this._associatedObject = associatedObject;\n    this._pixiContainer = pixiContainer;\n    this._project = project;\n    this._layout = layout;\n    this._pixiResourcesLoader = pixiResourcesLoader;\n    this.wasUsed = true; //Used by InstancesRenderer to track rendered instance that are not used anymore.\n  }\n\n  /**\n   * Convert an angle from degrees to radians.\n   */\n  static toRad(angleInDegrees: number) {\n    return (angleInDegrees / 180) * 3.14159;\n  }\n\n  /**\n   * Called when the scene editor is rendered.\n   */\n  update() {\n    //Nothing to do.\n  }\n\n  getPixiObject() {\n    return this._pixiObject;\n  }\n\n  getInstance() {\n    return this._instance;\n  }\n\n  /**\n   * Called to notify the instance renderer that its associated instance was removed from\n   * the scene. The PIXI object should probably be removed from the container: This is what\n   * the default implementation of the method does.\n   */\n  onRemovedFromScene() {\n    if (this._pixiObject !== null)\n      this._pixiContainer.removeChild(this._pixiObject);\n  }\n\n  getOriginX() {\n    return 0;\n  }\n\n  getOriginY() {\n    return 0;\n  }\n\n  /**\n   * Return the width of the instance when the instance doesn't have a custom size.\n   */\n  getDefaultWidth() {\n    return 32;\n  }\n\n  /**\n   * Return the height of the instance when the instance doesn't have a custom size.\n   */\n  getDefaultHeight() {\n    return 32;\n  }\n}\n","// @flow\n\nexport default function getObjectByName(\n  project: gdProject,\n  layout?: ?gdLayout,\n  associatedObjectName: string\n): ?gdObject {\n  let associatedObject = null;\n  if (layout && layout.hasObjectNamed(associatedObjectName))\n    associatedObject = layout.getObject(associatedObjectName);\n  else if (project.hasObjectNamed(associatedObjectName))\n    associatedObject = project.getObject(associatedObjectName);\n  return associatedObject;\n}\n","// @flow\nimport axios from 'axios';\nimport { makeTimestampedId } from '../../Utils/TimestampedId';\nimport { GDevelopBuildApi } from './ApiConfigs';\nimport { getSignedUrl } from './Usage';\n\nexport type TargetName =\n  | 'winExe'\n  | 'winZip'\n  | 'macZip'\n  | 'linuxAppImage'\n  | 'androidApk'\n  | 'androidAppBundle'\n  | 's3';\n\nexport type Build = {\n  id: string,\n  userId: string,\n  bucket?: string,\n  logsKey?: string,\n  apkKey?: string,\n  aabKey?: string,\n  windowsExeKey?: string,\n  windowsZipKey?: string,\n  macosZipKey?: string,\n  linuxAppImageKey?: string,\n  s3Key?: string,\n  status: 'pending' | 'complete' | 'error',\n  type: 'cordova-build' | 'electron-build' | 'web-build',\n  targets?: Array<TargetName>,\n  createdAt: number,\n  updatedAt: number,\n};\n\nexport type BuildArtifactKeyName =\n  | 'apkKey'\n  | 'aabKey'\n  | 'windowsExeKey'\n  | 'windowsZipKey'\n  | 'macosZipKey'\n  | 'linuxAppImageKey'\n  | 's3Key'\n  | 'logsKey';\n\nexport const getBuildArtifactUrl = (\n  build: ?Build,\n  keyName: BuildArtifactKeyName\n): ?string => {\n  if (!build || !build[keyName]) {\n    return null;\n  }\n\n  if (keyName === 's3Key') {\n    return `https://games.gdevelop-app.com/${build[keyName]}/index.html`;\n  }\n\n  return `https://builds.gdevelop-app.com/${build[keyName]}`;\n};\n\ntype UploadOptions = {|\n  signedUrl: string,\n  contentType: string,\n  key: string,\n|};\n\nexport const getBuildFileUploadOptions = (): Promise<UploadOptions> => {\n  const prefix = 'game-archive-' + makeTimestampedId();\n  const filename = 'game-archive.zip';\n  const contentType = 'application/zip';\n  const key = prefix + '/' + filename;\n\n  return getSignedUrl({ uploadType: 'build', key, contentType }).then(\n    ({ signedUrl }) => {\n      return {\n        signedUrl,\n        contentType,\n        key,\n      };\n    }\n  );\n};\n\nexport const buildElectron = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  key: string,\n  targets: Array<TargetName>\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopBuildApi.baseUrl}/build?userId=${encodeURIComponent(\n          userId\n        )}&key=${encodeURIComponent(\n          key\n        )}&type=electron-build&targets=${encodeURIComponent(\n          targets.join(',')\n        )}`,\n        null,\n        {\n          params: {},\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const buildWeb = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  key: string\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopBuildApi.baseUrl}/build?userId=${encodeURIComponent(\n          userId\n        )}&key=${encodeURIComponent(key)}&type=web-build&targets=s3`,\n        null,\n        {\n          params: {},\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const buildCordovaAndroid = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  key: string,\n  targets: Array<TargetName>,\n  keystore: 'old' | 'new'\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopBuildApi.baseUrl}/build?userId=${encodeURIComponent(\n          userId\n        )}&key=${encodeURIComponent(\n          key\n        )}&type=cordova-build&targets=${encodeURIComponent(targets.join(','))}`,\n        JSON.stringify({\n          signing: {\n            keystore,\n          },\n        }),\n        {\n          params: {},\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const getBuild = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  buildId: string\n): Promise<Build> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopBuildApi.baseUrl}/build/${buildId}`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const getBuilds = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Array<Build>> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopBuildApi.baseUrl}/build`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n","// @flow\nimport * as React from 'react';\n\nexport type ScreenType = 'normal' | 'touch';\n\nlet userHasTouchedScreen = false;\nif (typeof window !== 'undefined') {\n  window.addEventListener(\n    'touchstart',\n    function onFirstTouch() {\n      console.info('Touch detected, considering the screen as touch enabled.');\n      userHasTouchedScreen = true;\n      window.removeEventListener('touchstart', onFirstTouch, false);\n    },\n    false\n  );\n}\n\ntype Props = {|\n  children: (screenType: ScreenType) => React.Node,\n|};\n\n/**\n * Wraps useScreenType in a component.\n */\nexport const ScreenTypeMeasurer = ({ children }: Props) =>\n  children(useScreenType());\n\n/**\n * Return if the screen is a touchscreen or not.\n */\nexport const useScreenType = (): ScreenType => {\n  // Note: this is not a React hook but is named as one to encourage\n  // components to use it as such, so that it could be reworked\n  // at some point to use a context (verify in this case all usages).\n  if (typeof window === 'undefined') return 'normal';\n\n  return userHasTouchedScreen ? 'touch' : 'normal';\n};\n","// @flow\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport TextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport ListIcon from './ListIcon';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { MarkdownText } from './MarkdownText';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport ListItem from '@material-ui/core/ListItem';\nimport { computeTextFieldStyleProps } from './TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport muiZIndex from '@material-ui/core/styles/zIndex';\nimport {\n  shouldCloseOrCancel,\n  shouldSubmit,\n} from './KeyboardShortcuts/InteractionKeys';\nimport { textEllispsisStyle } from './TextEllipsis';\n\ntype Option =\n  | {|\n      type: 'separator',\n    |}\n  | {|\n      text: string, // The text used for filtering. If empty, item is always shown.\n      value: string, // The value to show on screen and to be selected\n      translatableValue?: MessageDescriptor,\n      onClick?: () => void, // If defined, will be called when the item is clicked. onChange/onChoose won't be called.\n      renderIcon?: ?() => React.Element<typeof ListIcon | typeof SvgIcon>,\n    |};\n\nexport type DataSource = Array<Option>;\n\ntype Props = {|\n  value: string,\n  onChange: string => void,\n  onChoose?: string => void,\n  dataSource: DataSource,\n\n  id?: string,\n  onBlur?: (event: SyntheticFocusEvent<HTMLInputElement>) => void,\n  onRequestClose?: () => void,\n  onApply?: () => void,\n  errorText?: React.Node,\n  disabled?: boolean,\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n  hintText?: MessageDescriptor | string,\n  fullWidth?: boolean,\n  margin?: 'none' | 'dense',\n  textFieldStyle?: Object,\n  openOnFocus?: boolean,\n  style?: Object,\n|};\n\nexport type SemiControlledAutoCompleteInterface = {|\n  focus: () => void,\n  forceInputValueTo: (newValue: string) => void,\n|};\n\nconst styles = {\n  container: {\n    position: 'relative',\n    width: '100%',\n  },\n  listItem: {\n    // Make the list items very dense:\n    padding: 0,\n    margin: 0,\n  },\n  listItemText: {\n    margin: '1px 0',\n  },\n};\n\nconst useStyles = makeStyles({\n  option: {\n    cursor: 'default',\n  },\n  listbox: {\n    padding: 0,\n    margin: 0,\n  },\n  input: {\n    width: 'auto',\n    flexGrow: 1,\n  },\n  inputRoot: {\n    flexWrap: 'wrap',\n  },\n  popper: {\n    zIndex: muiZIndex.tooltip + 100,\n  },\n});\n\nconst makeRenderItem = (i18n: I18nType) => (\n  option: Option,\n  state: Object\n): React.Node => {\n  if (option.type && option.type === 'separator') {\n    return (\n      <ListItem\n        divider\n        disableGutters\n        component={'div'}\n        style={styles.listItem}\n      />\n    );\n  }\n\n  const value = option.translatableValue\n    ? i18n._(option.translatableValue)\n    : option.value;\n  return (\n    <ListItem dense={true} component={'div'} style={styles.listItem}>\n      {option.renderIcon && <ListItemIcon>{option.renderIcon()}</ListItemIcon>}\n      <ListItemText\n        style={styles.listItemText}\n        primary={\n          <div title={value} style={textEllispsisStyle}>\n            {value}\n          </div>\n        }\n      />\n    </ListItem>\n  );\n};\n\nconst isOptionDisabled = (option: Option) =>\n  option.type === 'separator' ? true : false;\n\nconst filterFunction = (\n  options: DataSource,\n  state: Object,\n  value: string\n): DataSource => {\n  const lowercaseInputValue = value.toLowerCase();\n  const optionList = options.filter(option => {\n    if (option.type === 'separator') return true;\n    if (!option.text) return true;\n    return option.text.toLowerCase().indexOf(lowercaseInputValue) !== -1;\n  });\n\n  if (\n    !optionList.filter(\n      option =>\n        option.type !== 'separator' &&\n        (option.value || option.translatableValue)\n    ).length\n  )\n    return [];\n\n  // Remove divider(s) if they are at the start or end of array\n  while (\n    optionList[optionList.length - 1] !== undefined &&\n    optionList[optionList.length - 1].type !== undefined\n  )\n    optionList.pop();\n  while (optionList[0] !== undefined && optionList[0].type !== undefined)\n    optionList.shift();\n\n  return optionList;\n};\n\nconst handleChange = (\n  input: HTMLInputElement,\n  option: Option,\n  props: Props\n): void => {\n  if (option.type === 'separator') return;\n  else if (option.onClick) option.onClick();\n  else {\n    // Force the input to the selected value. We do this, bypassing inputValue state,\n    // because the change could be immediately followed by a blur, in which case the blur\n    // must have the updated value.\n    // Search for \"blur-value\" in this file for the rest of this \"workaround\".\n    input.value = option.value;\n\n    // Call the props to notify of the change. Note that if the component is blurred just after,\n    // onChange could be called again. Hence why we immediately set the input.value below.\n    // Search for \"blur-value\" in this file for the rest of this \"workaround\".\n    if (props.onChoose) {\n      props.onChoose(option.value);\n    } else {\n      props.onChange(option.value);\n    }\n\n    // Call onApply (if specified) as an option was chosen.\n    if (props.onApply) props.onApply();\n    else if (props.onRequestClose) props.onRequestClose();\n  }\n};\n\nconst getDefaultStylingProps = (params: Object, props: Props): Object => {\n  const { InputProps, inputProps, InputLabelProps, ...other } = params;\n  return {\n    ...other,\n    InputProps: {\n      ...InputProps,\n      className: null,\n      endAdornment: null,\n    },\n    inputProps: {\n      ...inputProps,\n      className: null,\n      disabled: props.disabled,\n      onKeyDown: (event: SyntheticKeyboardEvent<HTMLInputElement>): void => {\n        if (shouldCloseOrCancel(event)) {\n          if (props.onRequestClose) props.onRequestClose();\n        } else if (shouldSubmit(event)) {\n          // Make sure the current value is reported to the parent before\n          // calling onApply (or onRequestClose), otherwise the parent would only\n          // know about the previous value.\n          props.onChange(event.currentTarget.value);\n\n          if (props.onApply) props.onApply();\n          else if (props.onRequestClose) props.onRequestClose();\n        }\n      },\n    },\n  };\n};\n\nconst getOptionLabel = (option: Option, value: string): string =>\n  option.value ? option.value : value;\n\nexport default React.forwardRef<Props, SemiControlledAutoCompleteInterface>(\n  function SemiControlledAutoComplete(props: Props, ref) {\n    const input = React.useRef((null: ?HTMLInputElement));\n    const [inputValue, setInputValue] = useState((null: string | null));\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const classes = useStyles();\n\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (input.current) input.current.focus();\n      },\n      forceInputValueTo: (newValue: string) => {\n        if (inputValue !== null) setInputValue(newValue);\n      },\n    }));\n\n    const currentInputValue = inputValue !== null ? inputValue : props.value;\n\n    const helperText = props.helperMarkdownText ? (\n      <MarkdownText source={props.helperMarkdownText} />\n    ) : null;\n\n    const handleInputChange = (\n      event: SyntheticKeyboardEvent<HTMLInputElement>,\n      value: string,\n      reason: string\n    ): void => {\n      setInputValue(value);\n      if (!isMenuOpen) setIsMenuOpen(true);\n    };\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Autocomplete\n            freeSolo\n            classes={classes}\n            onChange={(\n              event: SyntheticKeyboardEvent<HTMLInputElement>,\n              option: Option | null\n            ) => {\n              if (option === null || !input.current) return;\n\n              handleChange(input.current, option, props);\n              setInputValue(null);\n              setIsMenuOpen(false);\n            }}\n            open={isMenuOpen}\n            style={{\n              ...props.style,\n              ...styles.container,\n            }}\n            inputValue={currentInputValue}\n            value={currentInputValue}\n            onInputChange={handleInputChange}\n            options={props.dataSource}\n            renderOption={makeRenderItem(i18n)}\n            getOptionDisabled={isOptionDisabled}\n            getOptionLabel={(option: Option) =>\n              getOptionLabel(option, currentInputValue)\n            }\n            filterOptions={(options: DataSource, state) =>\n              filterFunction(options, state, currentInputValue)\n            }\n            renderInput={params => {\n              const {\n                InputProps,\n                inputProps,\n                ...otherStylingProps\n              } = getDefaultStylingProps(params, props);\n              return (\n                <TextField\n                  InputProps={{\n                    ...InputProps,\n                    placeholder:\n                      typeof props.hintText === 'string'\n                        ? props.hintText\n                        : i18n._(props.hintText),\n                  }}\n                  inputProps={{\n                    ...inputProps,\n                    onFocus: (\n                      event: SyntheticFocusEvent<HTMLInputElement>\n                    ): void => {\n                      setIsMenuOpen(true);\n                      if (input.current)\n                        input.current.selectionStart =\n                          input.current.value.length;\n                    },\n                    // Redefine onBlur to call onChange when the component is blurred.\n                    // We do this because the default behavior of the Autocomplete is not\n                    // to call onChange when blurred (though it should according to the docs?).\n                    onBlur: (\n                      event: SyntheticFocusEvent<HTMLInputElement>\n                    ): void => {\n                      setInputValue(null);\n                      setIsMenuOpen(false);\n\n                      // Use the value of the input, rather than inputValue\n                      // that could be not updated.\n                      // Search for \"blur-value\" in this file for the rest of this \"workaround\".\n                      props.onChange(event.currentTarget.value);\n\n                      if (props.onBlur) props.onBlur(event);\n                    },\n                    onMouseDown: (\n                      event: SyntheticMouseEvent<HTMLInputElement>\n                    ): void => {\n                      // Toggle the menu when clicked and empty\n                      if (input.current && !input.current.value.length)\n                        setIsMenuOpen(!isMenuOpen);\n                    },\n                  }}\n                  {...otherStylingProps}\n                  {...computeTextFieldStyleProps(props)}\n                  style={props.textFieldStyle}\n                  label={props.floatingLabelText}\n                  inputRef={input}\n                  disabled={props.disabled}\n                  error={!!props.errorText}\n                  helperText={helperText || props.errorText}\n                  fullWidth={props.fullWidth}\n                />\n              );\n            }}\n          />\n        )}\n      </I18n>\n    );\n  }\n);\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport TextField from '../TextField';\nimport ColorPicker, { type ColorResult } from './ColorPicker';\nimport {\n  rgbStringAndAlphaToRGBColor,\n  rgbColorToRGBString,\n} from '../../Utils/ColorTransformer';\n\nconst styles = {\n  container: {\n    position: 'relative',\n    display: 'inline-block',\n  },\n  picker: {\n    position: 'absolute',\n    right: '8px',\n    top: '19px',\n  },\n};\n\ntype Props = {|\n  fullWidth?: boolean,\n  disableAlpha?: boolean,\n  id?: string,\n  floatingLabelText?: string | React.Node,\n  helperMarkdownText?: ?string,\n  onChange: (string, ?number) => void,\n  color: string,\n  alpha?: number,\n|};\n\ntype State = {|\n  color: string,\n  alpha: number,\n|};\n\nexport default class ColorField extends React.Component<Props, State> {\n  state = {\n    color: this.props.color,\n    // alpha can be equal to 0, so we have to check if it is not undefined\n    alpha:\n      !this.props.disableAlpha && this.props.alpha !== undefined\n        ? this.props.alpha\n        : 1,\n  };\n\n  _textField: ?TextField = null;\n\n  _handleChange = (color: string, alpha: number) => {\n    this.setState({ color, alpha });\n  };\n\n  _handleBlur = () => {\n    // change alpha value to be within allowed limits (0-1)\n    let alpha = parseFloat(this.state.alpha);\n    if (alpha < 0) alpha = 0;\n    if (alpha > 1) alpha = 1;\n    this.setState({ alpha });\n    this.props.onChange(this.state.color, alpha);\n  };\n\n  _handlePickerChange = (color: ColorResult) => {\n    const rgbString = rgbColorToRGBString(color.rgb);\n    const alpha = this.props.disableAlpha ? 1 : color.rgb.a;\n    this.setState({ color: rgbString, alpha });\n    this.props.onChange(rgbString, alpha);\n  };\n\n  render() {\n    return (\n      <div\n        style={{\n          ...styles.container,\n          width: this.props.fullWidth ? '100%' : undefined,\n        }}\n      >\n        <TextField\n          id={this.props.id}\n          fullWidth={this.props.disableAlpha}\n          style={!this.props.disableAlpha ? { width: '60%' } : undefined}\n          floatingLabelText={this.props.floatingLabelText}\n          floatingLabelFixed\n          helperMarkdownText={this.props.helperMarkdownText}\n          type=\"text\"\n          hintText={t`Text in the format R;G;B, like 100;200;180`}\n          value={this.state.color}\n          onChange={event =>\n            this._handleChange(event.target.value, this.state.alpha)\n          }\n          onBlur={this._handleBlur}\n          ref={textField => (this._textField = textField)}\n        />\n        {!this.props.disableAlpha && (\n          <TextField\n            id={`${this.props.id || ''}-alpha`}\n            floatingLabelText=\"Alpha\"\n            floatingLabelFixed\n            style={{ width: '30%' }}\n            hintText={t`Number between 0 and 1`}\n            value={this.state.alpha.toString()}\n            onChange={(event, value) =>\n              this._handleChange(this.state.color, parseFloat(value))\n            }\n            onBlur={this._handleBlur}\n            ref={textField => (this._textField = textField)}\n            type=\"number\"\n            step={0.1}\n          />\n        )}\n        <div style={styles.picker}>\n          <ColorPicker\n            disableAlpha={this.props.disableAlpha}\n            onChangeComplete={this._handlePickerChange}\n            color={rgbStringAndAlphaToRGBColor(\n              this.state.color,\n              this.state.alpha\n            )}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport RaisedButton, {\n  type RaisedButtonPropsWithoutOnClick,\n} from './RaisedButton';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport { type MenuItemTemplate } from './Menu/Menu.flow';\nimport { type I18n as I18nType } from '@lingui/core';\n\n// We support a subset of the props supported by Material-UI v0.x RaisedButton\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  ...RaisedButtonPropsWithoutOnClick,\n  buildMenuTemplate: (i18n: I18nType) => Array<MenuItemTemplate>,\n|};\n\nconst shouldNeverBeCalled = () => {\n  throw new Error('This RaisedButtonWithMenu onClick should never be called');\n};\n\n/**\n * A raised button based on Material-UI button, that has a menu displayed when clicked.\n */\nconst RaisedButtonWithMenu = (props: Props) => {\n  const { buildMenuTemplate, ...otherProps } = props;\n\n  return (\n    <ElementWithMenu\n      element={<RaisedButton {...otherProps} onClick={shouldNeverBeCalled} />}\n      buildMenuTemplate={buildMenuTemplate}\n    />\n  );\n};\n\nexport default RaisedButtonWithMenu;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SemiControlledAutoComplete, {\n  type DataSource,\n  type SemiControlledAutoCompleteInterface,\n} from '../UI/SemiControlledAutoComplete';\nimport BackspaceIcon from '@material-ui/icons/Backspace';\nimport Add from '@material-ui/icons/Add';\nimport Brush from '@material-ui/icons/Brush';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n  type ResourceKind,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport ResourcesLoader from '../ResourcesLoader';\nimport { applyResourceDefaults } from './ResourceUtils';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport RaisedButtonWithMenu from '../UI/RaisedButtonWithMenu';\nimport { TextFieldWithButtonLayout } from '../UI/Layout';\nimport IconButton from '../UI/IconButton';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  resourcesLoader: typeof ResourcesLoader,\n  resourceKind: ResourceKind,\n  fullWidth?: boolean,\n  canBeReset?: boolean,\n  initialResourceName: string,\n  onChange: string => void,\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n  hintText?: MessageDescriptor,\n  onRequestClose?: () => void,\n  onApply?: () => void,\n  margin?: 'none' | 'dense',\n  style?: {| alignSelf?: 'center' |},\n|};\n\ntype State = {|\n  notExistingError: boolean,\n  resourceName: string,\n|};\n\nexport default class ResourceSelector extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      notExistingError: false,\n      resourceName: props.initialResourceName || '',\n    };\n\n    const { project } = props;\n    if (project) {\n      this._loadFrom(project.getResourcesManager());\n    }\n  }\n\n  allResourcesNames: Array<string>;\n  autoCompleteData: DataSource;\n  _autoComplete: ?SemiControlledAutoCompleteInterface;\n\n  focus() {\n    if (this._autoComplete) this._autoComplete.focus();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.initialResourceName !== this.props.initialResourceName) {\n      this.setState({\n        resourceName: nextProps.initialResourceName || '',\n      });\n    }\n  }\n\n  _getResourceSourceItems(): DataSource {\n    const sources = this.props.resourceSources || [];\n    return [\n      ...sources\n        .filter(source => source.kind === this.props.resourceKind)\n        .map(source => ({\n          text: '',\n          value: '',\n          translatableValue: source.displayName,\n          renderIcon: () => <Add />,\n          onClick: () => this._addFrom(source),\n        })),\n      {\n        type: 'separator',\n      },\n    ];\n  }\n\n  _loadFrom(resourcesManager: gdResourcesManager) {\n    this.allResourcesNames = resourcesManager.getAllResourceNames().toJSArray();\n    if (this.props.resourceKind) {\n      this.allResourcesNames = this.allResourcesNames.filter(resourceName => {\n        return (\n          resourcesManager.getResource(resourceName).getKind() ===\n          this.props.resourceKind\n        );\n      });\n    }\n    const resourceSourceItems = this._getResourceSourceItems();\n    const resourceItems = this.allResourcesNames.map(resourceName => ({\n      text: resourceName,\n      value: resourceName,\n    }));\n    this.autoCompleteData = [...resourceSourceItems, ...resourceItems];\n  }\n\n  _addFrom = (source: ResourceSource) => {\n    if (!source) return;\n\n    const { project, onChooseResource } = this.props;\n    onChooseResource({\n      initialSourceName: source.name,\n      multiSelection: false,\n      resourceKind: this.props.resourceKind,\n    })\n      .then(resources => {\n        if (!resources.length) return;\n        const resource = resources[0];\n        applyResourceDefaults(project, resource);\n\n        // addResource will check if a resource with the same name exists, and if it is\n        // the case, no new resource will be added.\n        project.getResourcesManager().addResource(resource);\n\n        this._loadFrom(project.getResourcesManager());\n        const resourceName: string = resource.getName();\n        this._onChangeResourceName(resourceName);\n\n        // Imperatively set the value of the autocomplete, as it can be (on Windows for example),\n        // still focused. This means that when it's then getting blurred, the value we\n        // set for the resource name would get erased by the one that was getting entered.\n        if (this._autoComplete)\n          this._autoComplete.forceInputValueTo(resourceName);\n\n        // Important, we are responsible for deleting the resources that were given to us.\n        // Otherwise we have a memory leak, as calling addResource is making a copy of the resource.\n        resources.forEach(resource => resource.delete());\n      })\n      .catch(err => {\n        // Should never happen, errors should be shown in the interface.\n        console.error('Unable to choose a resource', err);\n      });\n  };\n\n  _onResetResourceName = () => {\n    this.setState(\n      {\n        resourceName: '',\n        notExistingError: false,\n      },\n      () => {\n        if (this.props.onChange) this.props.onChange(this.state.resourceName);\n      }\n    );\n  };\n\n  _onChangeResourceName = (resourceName: string) => {\n    if (resourceName === '') {\n      this._onResetResourceName();\n      return;\n    }\n\n    const notExistingError =\n      this.allResourcesNames.indexOf(resourceName) === -1;\n\n    if (!notExistingError) {\n      if (this.props.onChange) this.props.onChange(resourceName);\n    }\n    this.setState({\n      resourceName,\n      notExistingError,\n    });\n  };\n\n  _editWith = (resourceExternalEditor: ResourceExternalEditor) => {\n    const { project, resourcesLoader, resourceKind } = this.props;\n    const { resourceName } = this.state;\n    const resourcesManager = project.getResourcesManager();\n    const initialResource = resourcesManager.getResource(resourceName);\n    let initialResourceMetadata = {};\n    const initialResourceMetadataRaw = initialResource.getMetadata();\n    if (initialResourceMetadataRaw) {\n      try {\n        initialResourceMetadata = JSON.parse(initialResourceMetadataRaw);\n      } catch (e) {\n        console.error('Malformed metadata', e);\n      }\n    }\n\n    if (resourceKind === 'image') {\n      const resourceNames = [];\n      if (resourcesManager.hasResource(resourceName)) {\n        resourceNames.push(resourceName);\n      }\n      const externalEditorOptions = {\n        project,\n        resourcesLoader,\n        singleFrame: true,\n        resourceNames,\n        extraOptions: {\n          fps: 0,\n          name: resourceName,\n          isLooping: false,\n          externalEditorData: initialResourceMetadata,\n        },\n        onChangesSaved: newResourceData => {\n          if (!newResourceData.length) return;\n\n          // Burst the ResourcesLoader cache to force images to be reloaded (and not cached by the browser).\n          resourcesLoader.burstUrlsCacheForResources(project, [\n            newResourceData[0].name,\n          ]);\n          this.props.onChange(newResourceData[0].name);\n        },\n      };\n      resourceExternalEditor.edit(externalEditorOptions);\n    } else if (resourceKind === 'audio') {\n      const externalEditorOptions = {\n        project,\n        resourcesLoader,\n        resourceNames: [resourceName],\n        extraOptions: {\n          externalEditorData: initialResourceMetadata,\n        },\n        onChangesSaved: newResourceData => {\n          // Burst the ResourcesLoader cache to force audio to be reloaded (and not cached by the browser).\n          resourcesLoader.burstUrlsCacheForResources(project, [\n            newResourceData[0].name,\n          ]);\n          this.props.onChange(newResourceData[0].name);\n        },\n      };\n      resourceExternalEditor.edit(externalEditorOptions);\n    } else if (resourceKind === 'json') {\n      const externalEditorOptions = {\n        project,\n        resourcesLoader,\n        resourceNames: [resourceName],\n        extraOptions: {\n          initialResourceMetadata,\n        },\n        onChangesSaved: newResourceData => {\n          this.props.onChange(newResourceData[0].name);\n        },\n      };\n      resourceExternalEditor.edit(externalEditorOptions);\n    }\n  };\n\n  render() {\n    const errorText = this.state.notExistingError\n      ? 'This resource does not exist in the game'\n      : null;\n\n    const externalEditors = this.props.resourceExternalEditors.filter(\n      externalEditor => externalEditor.kind === this.props.resourceKind\n    );\n    return (\n      <TextFieldWithButtonLayout\n        noFloatingLabelText={!this.props.floatingLabelText}\n        margin={this.props.margin}\n        renderTextField={() => (\n          <SemiControlledAutoComplete\n            style={this.props.style}\n            floatingLabelText={this.props.floatingLabelText}\n            helperMarkdownText={this.props.helperMarkdownText}\n            hintText={this.props.hintText}\n            openOnFocus\n            dataSource={this.autoCompleteData || []}\n            value={this.state.resourceName}\n            onChange={this._onChangeResourceName}\n            errorText={errorText}\n            fullWidth={this.props.fullWidth}\n            margin={this.props.margin}\n            onRequestClose={this.props.onRequestClose}\n            onApply={this.props.onApply}\n            ref={autoComplete => (this._autoComplete = autoComplete)}\n          />\n        )}\n        renderButton={style => (\n          <React.Fragment>\n            {this.props.canBeReset && (\n              <IconButton\n                size=\"small\"\n                onClick={() => {\n                  this._onResetResourceName();\n                }}\n              >\n                <BackspaceIcon />\n              </IconButton>\n            )}\n            {!!externalEditors.length ? (\n              <RaisedButtonWithMenu\n                style={style}\n                icon={<Brush />}\n                label={\n                  this.state.resourceName ? (\n                    <Trans>Edit</Trans>\n                  ) : (\n                    <Trans>Create</Trans>\n                  )\n                }\n                primary\n                buildMenuTemplate={() =>\n                  externalEditors.map(externalEditor => ({\n                    label: externalEditor.displayName,\n                    click: () => this._editWith(externalEditor),\n                  }))\n                }\n              />\n            ) : null}\n          </React.Fragment>\n        )}\n      />\n    );\n  }\n}\n","// @flow\n\nexport const isRelativePathToDocumentationRoot = (path: string) => {\n  return path.startsWith('/');\n};\n\nexport const isDocumentationAbsoluteUrl = (path: string) => {\n  return path.startsWith('http://') || path.startsWith('https://');\n};\n\nexport const getHelpLink = (path: string): string => {\n  if (isRelativePathToDocumentationRoot(path))\n    return `http://wiki.compilgames.net/doku.php/gdevelop5${path}?utm_source=gdevelop&utm_medium=help-link`;\n\n  if (isDocumentationAbsoluteUrl(path)) return path;\n\n  return '';\n};\n","// @flow\nimport optionalRequire from './OptionalRequire.js';\nconst electron = optionalRequire('electron');\nconst electronClipboard = electron ? electron.clipboard : null;\n\nexport type ClipboardKind = string;\n\nlet internalClipboard = '';\n\nconst mangleClipboardKind = (kind: ClipboardKind): string => {\n  // Mangle the name with GDevelop specific strings and random\n  // characters so that the probability that something that is not\n  // a valid GDevelop clipboard content is recognized as valid is almost 0.\n  return 'GDEVELOP_' + kind + '_CLIPBOARD_KIND-jsBdHbLy912y8Rc';\n};\n\n/**\n * Access to properties and type objects safely (ensuring no crash and no exception\n * in case the expected type is not the one found or totally different than assumed).\n *\n * Each method returns null if the expected type is not found.\n *\n * Useful to deal with arbitrary content coming from the Clipboard.\n */\nexport class SafeExtractor {\n  static extractNumberProperty(\n    anything: any,\n    propertyName: string\n  ): number | null {\n    const object = this.extractObject(anything);\n    if (!object) return null;\n\n    const property = anything[propertyName];\n\n    if (typeof property !== 'number') return null;\n\n    return property;\n  }\n\n  static extractStringProperty(\n    anything: any,\n    propertyName: string\n  ): string | null {\n    const object = this.extractObject(anything);\n    if (!object) return null;\n\n    const property = anything[propertyName];\n\n    if (typeof property !== 'string') return null;\n\n    return property;\n  }\n\n  static extractObjectProperty(\n    anything: any,\n    propertyName: string\n  ): Object | null {\n    const object = this.extractObject(anything);\n    if (!object) return null;\n\n    const property = anything[propertyName];\n\n    return this.extractObject(property);\n  }\n\n  static extractArrayProperty(\n    anything: any,\n    propertyName: string\n  ): Array<any> | null {\n    const object = this.extractObject(anything);\n    if (!object) return null;\n\n    const property = anything[propertyName];\n\n    return this.extractArray(property);\n  }\n\n  static extractObject(anything: any): Object | null {\n    if (\n      anything === null ||\n      anything === undefined ||\n      typeof anything !== 'object' ||\n      Array.isArray(anything)\n    )\n      return null;\n\n    return anything;\n  }\n\n  static extractArray(anything: any): Array<any> | null {\n    if (\n      anything === null ||\n      anything === undefined ||\n      typeof anything !== 'object' ||\n      !Array.isArray(anything)\n    )\n      return null;\n\n    return anything;\n  }\n}\n\nexport default class Clipboard {\n  static set(kind: ClipboardKind, object: any) {\n    const text = JSON.stringify({\n      '000kind': mangleClipboardKind(kind), /// 000 to ensure the key is written first.\n      content: object,\n    });\n\n    if (electronClipboard) {\n      electronClipboard.writeText(text);\n    } else {\n      internalClipboard = text;\n    }\n  }\n\n  /**\n   * Quickly check that the clipboard content *should* be containing valid JSON content\n   * of the specified kind.\n   *\n   * This is only a quick check and not a guarantee. Use `Clipboard.get` to get the value.\n   */\n  static has(kind: ClipboardKind): boolean {\n    let text = '';\n    if (electronClipboard) {\n      text = electronClipboard.readText();\n    } else {\n      text = internalClipboard;\n    }\n\n    return text.indexOf(mangleClipboardKind(kind)) === 12; /// 12 is the position of '000kind' value\n  }\n\n  /**\n   * Get the content of the clipboard. Will return null if not valid JSON.\n   *\n   * Even after parsing, content is **arbitrary** and should be accessed with `SafeExtractor`\n   * to ensure everything is accessed without risk of having a wrong type, which could\n   * crash the app.\n   */\n  static get(kind: ClipboardKind): ?any {\n    if (!Clipboard.has(kind)) return null;\n\n    let text = '';\n    if (electronClipboard) {\n      text = electronClipboard.readText();\n    } else {\n      text = internalClipboard;\n    }\n\n    try {\n      const parsedText = JSON.parse(text);\n      return parsedText.content;\n    } catch (e) {\n      console.warn('The clipboard content is not valid JSON');\n      return null;\n    }\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport ResourceSelector from '../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../ResourcesLoader';\nimport Subheader from '../UI/Subheader';\nimport FlatButton from '../UI/FlatButton';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Edit from '@material-ui/icons/Edit';\nimport ColorField from '../UI/ColorField';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport { rgbOrHexToRGBString } from '../Utils/ColorTransformer';\nimport FormHelperText from '@material-ui/core/FormHelperText';\n\nimport {\n  type ResourceKind,\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  TextFieldWithButtonLayout,\n  ResponsiveLineStackLayout,\n  ColumnStackLayout,\n} from '../UI/Layout';\nimport RaisedButton from '../UI/RaisedButton';\nimport UnsavedChangesContext, {\n  type UnsavedChanges,\n} from '../MainFrame/UnsavedChangesContext';\nimport { Line } from '../UI/Grid';\n\n// An \"instance\" here is the objects for which properties are shown\nexport type Instance = Object; // This could be improved using generics.\nexport type Instances = Array<Instance>;\n\n// \"Value\" fields are fields displayed in the properties.\nexport type ValueFieldCommonProperties = {|\n  name: string,\n  getLabel?: Instance => string,\n  getDescription?: Instance => string,\n  getExtraDescription?: Instance => string,\n  disabled?: boolean,\n  onEditButtonClick?: Instance => void,\n  onClick?: Instance => void,\n|};\n\n// \"Primitive\" value fields are \"simple\" fields.\nexport type PrimitiveValueField =\n  | {|\n      valueType: 'number',\n      getValue: Instance => number,\n      setValue: (instance: Instance, newValue: number) => void,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'string',\n      getValue: Instance => string,\n      setValue: (instance: Instance, newValue: string) => void,\n      getChoices?: ?() => Array<{| value: string, label: string |}>,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'boolean',\n      getValue: Instance => boolean,\n      setValue: (instance: Instance, newValue: boolean) => void,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'color',\n      getValue: Instance => string,\n      setValue: (instance: Instance, newValue: string) => void,\n      ...ValueFieldCommonProperties,\n    |}\n  | {|\n      valueType: 'textarea',\n      getValue: Instance => string,\n      setValue: (instance: Instance, newValue: string) => void,\n      ...ValueFieldCommonProperties,\n    |};\n\n// \"Resource\" fields are showing a resource selector.\ntype ResourceField = {|\n  valueType: 'resource',\n  resourceKind: ResourceKind,\n  getValue: Instance => string,\n  setValue: (instance: Instance, newValue: string) => void,\n  ...ValueFieldCommonProperties,\n|};\n\n// A value field is a primitive or a resource.\nexport type ValueField = PrimitiveValueField | ResourceField;\n\n// A field can be a primitive, a resource or a list of fields\nexport type Field =\n  | PrimitiveValueField\n  | ResourceField\n  | {|\n      name: string,\n      type: 'row' | 'column',\n      children: Array<Object>,\n    |};\n\n// The schema is the tree of all fields.\nexport type Schema = Array<Field>;\n\n// Mandatory props in any case when using the component\ntype MandatoryProps = {|\n  onInstancesModified?: Instances => void,\n  instances: Instances,\n  schema: Schema,\n  mode?: 'column' | 'row',\n\n  // If set, render the \"extra\" description content from fields\n  // (see getExtraDescription).\n  renderExtraDescriptionText?: (extraDescription: string) => string,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\ntype Props =\n  // Mandatory props in all cases:\n  | MandatoryProps\n  // Props to be used when you want to display resources:\n  | {|\n      ...MandatoryProps,\n      project: gdProject,\n      resourceSources: Array<ResourceSource>,\n      onChooseResource: ChooseResourceFunction,\n      resourceExternalEditors: Array<ResourceExternalEditor>,\n    |};\n\nconst styles = {\n  columnContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  fieldContainer: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'baseline',\n  },\n  field: {\n    flex: 1,\n    width: 'auto',\n  },\n  subPropertiesEditorContainer: {\n    marginLeft: 15,\n  },\n  subHeader: {\n    paddingLeft: 0,\n  },\n};\n\nconst getFieldValue = (\n  instances: Instances,\n  field: ValueField,\n  defaultValue?: any\n): any => {\n  if (!instances[0]) {\n    console.log(\n      'getFieldValue was called with an empty list of instances (or containing undefined). This is a bug that should be fixed'\n    );\n    return defaultValue;\n  }\n\n  let value = field.getValue(instances[0]);\n  for (var i = 1; i < instances.length; ++i) {\n    if (value !== field.getValue(instances[i])) {\n      if (typeof defaultValue !== 'undefined') value = defaultValue;\n      break;\n    }\n  }\n\n  return value;\n};\n\nconst getFieldLabel = (instances: Instances, field: ValueField): any => {\n  if (!instances[0]) {\n    console.log(\n      'PropertiesEditor._getFieldLabel was called with an empty list of instances (or containing undefined). This is a bug that should be fixed'\n    );\n    return field.name;\n  }\n\n  if (field.getLabel) return field.getLabel(instances[0]);\n\n  return field.name;\n};\n\nexport default class PropertiesEditor extends React.Component<Props, {||}> {\n  _onInstancesModified = (instances: Instances) => {\n    // This properties editor is dealing with fields that are\n    // responsible to update their state (see field.setValue).\n\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    if (this.props.onInstancesModified)\n      this.props.onInstancesModified(instances);\n    this.forceUpdate();\n  };\n\n  _getFieldDescription = (instances: Instances, field: ValueField): ?string => {\n    const { renderExtraDescriptionText } = this.props;\n    if (!instances[0]) {\n      console.log(\n        'PropertiesEditor._getFieldDescription was called with an empty list of instances (or containing undefined). This is a bug that should be fixed'\n      );\n      return undefined;\n    }\n\n    const descriptions: Array<string> = [];\n    if (field.getDescription)\n      descriptions.push(field.getDescription(instances[0]));\n    if (renderExtraDescriptionText && field.getExtraDescription)\n      descriptions.push(\n        renderExtraDescriptionText(field.getExtraDescription(instances[0]))\n      );\n\n    return descriptions.join('\\n') || undefined;\n  };\n\n  _renderInputField = (field: ValueField) => {\n    if (field.name === 'PLEASE_ALSO_SHOW_EDIT_BUTTON_THANKS') return null; // This special property was used in GDevelop 4 IDE to ask for a Edit button to be shown, ignore it.\n\n    if (field.valueType === 'boolean') {\n      const { setValue } = field;\n      const description = this._getFieldDescription(\n        this.props.instances,\n        field\n      );\n\n      return (\n        <InlineCheckbox\n          label={\n            !description ? (\n              getFieldLabel(this.props.instances, field)\n            ) : (\n              <React.Fragment>\n                <Line noMargin>\n                  {getFieldLabel(this.props.instances, field)}\n                </Line>\n                <FormHelperText style={{ display: 'inline' }}>\n                  <MarkdownText source={description} />\n                </FormHelperText>\n              </React.Fragment>\n            )\n          }\n          key={field.name}\n          checked={getFieldValue(this.props.instances, field)}\n          onCheck={(event, newValue) => {\n            this.props.instances.forEach(i => setValue(i, !!newValue));\n            this._onInstancesModified(this.props.instances);\n          }}\n          disabled={field.disabled}\n        />\n      );\n    } else if (field.valueType === 'number') {\n      const { setValue } = field;\n      return (\n        <SemiControlledTextField\n          value={getFieldValue(this.props.instances, field)}\n          key={field.name}\n          id={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          floatingLabelFixed\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          onChange={newValue => {\n            this.props.instances.forEach(i =>\n              setValue(i, parseFloat(newValue) || 0)\n            );\n            this._onInstancesModified(this.props.instances);\n          }}\n          type=\"number\"\n          style={styles.field}\n          disabled={field.disabled}\n        />\n      );\n    } else if (field.valueType === 'color') {\n      const { setValue } = field;\n      return (\n        <ColorField\n          key={field.name}\n          id={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          disableAlpha\n          fullWidth\n          color={getFieldValue(this.props.instances, field)}\n          onChange={color => {\n            this.props.instances.forEach(i =>\n              setValue(i, rgbOrHexToRGBString(color))\n            );\n            this._onInstancesModified(this.props.instances);\n          }}\n        />\n      );\n    } else if (field.valueType === 'textarea') {\n      const { setValue } = field;\n      return (\n        <SemiControlledTextField\n          key={field.name}\n          id={field.name}\n          onChange={text => {\n            this.props.instances.forEach(i => setValue(i, text || ''));\n            this._onInstancesModified(this.props.instances);\n          }}\n          value={getFieldValue(this.props.instances, field)}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          floatingLabelFixed\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          multiline\n          style={styles.field}\n        />\n      );\n    } else {\n      const { onEditButtonClick, setValue } = field;\n      return (\n        <TextFieldWithButtonLayout\n          key={field.name}\n          renderTextField={() => (\n            <SemiControlledTextField\n              value={getFieldValue(\n                this.props.instances,\n                field,\n                '(Multiple values)'\n              )}\n              id={field.name}\n              floatingLabelText={getFieldLabel(this.props.instances, field)}\n              floatingLabelFixed\n              helperMarkdownText={this._getFieldDescription(\n                this.props.instances,\n                field\n              )}\n              onChange={newValue => {\n                this.props.instances.forEach(i => setValue(i, newValue || ''));\n                this._onInstancesModified(this.props.instances);\n              }}\n              style={styles.field}\n              disabled={field.disabled}\n            />\n          )}\n          renderButton={style =>\n            onEditButtonClick ? (\n              <RaisedButton\n                style={style}\n                primary\n                disabled={this.props.instances.length !== 1}\n                icon={<Edit />}\n                label={<Trans>Edit</Trans>}\n                onClick={() => onEditButtonClick(this.props.instances[0])}\n              />\n            ) : null\n          }\n        />\n      );\n    }\n  };\n\n  _renderSelectField = (field: ValueField) => {\n    if (!field.getChoices || !field.getValue) return;\n\n    const children = field\n      .getChoices()\n      .map(({ value, label }) => (\n        <SelectOption key={value} value={value} primaryText={label} />\n      ));\n\n    if (field.valueType === 'number') {\n      const { setValue } = field;\n      return (\n        <SelectField\n          value={getFieldValue(this.props.instances, field)}\n          key={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          onChange={(event, index, newValue: string) => {\n            this.props.instances.forEach(i =>\n              setValue(i, parseFloat(newValue) || 0)\n            );\n            this._onInstancesModified(this.props.instances);\n          }}\n          style={styles.field}\n          disabled={field.disabled}\n        >\n          {children}\n        </SelectField>\n      );\n    } else if (field.valueType === 'string') {\n      const { setValue } = field;\n      return (\n        <SelectField\n          value={getFieldValue(\n            this.props.instances,\n            field,\n            '(Multiple values)'\n          )}\n          key={field.name}\n          floatingLabelText={getFieldLabel(this.props.instances, field)}\n          helperMarkdownText={this._getFieldDescription(\n            this.props.instances,\n            field\n          )}\n          onChange={(event, index, newValue: string) => {\n            this.props.instances.forEach(i => setValue(i, newValue || ''));\n            this._onInstancesModified(this.props.instances);\n          }}\n          style={styles.field}\n          disabled={field.disabled}\n        >\n          {children}\n        </SelectField>\n      );\n    }\n  };\n\n  _renderButton = (field: ValueField) => {\n    //TODO: multi selection handling\n    return (\n      <FlatButton\n        key={field.name}\n        fullWidth\n        primary\n        label={getFieldLabel(this.props.instances, field)}\n        onClick={() => {\n          if (field.onClick) field.onClick(this.props.instances[0]);\n        }}\n      />\n    );\n  };\n\n  _renderResourceField = (field: ResourceField) => {\n    if (!this.props.project) {\n      console.error(\n        'You tried to display a resource field in a PropertiesEditor that does not support display resources. If you need to display resources, pass additional props (project, resourceSources, etc...)'\n      );\n      return;\n    }\n\n    const { setValue } = field;\n    return (\n      <ResourceSelector\n        key={field.name}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind={field.resourceKind}\n        fullWidth\n        initialResourceName={getFieldValue(\n          this.props.instances,\n          field,\n          '(Multiple values)' //TODO\n        )}\n        onChange={newValue => {\n          this.props.instances.forEach(i => setValue(i, newValue));\n          this._onInstancesModified(this.props.instances);\n        }}\n        floatingLabelText={getFieldLabel(this.props.instances, field)}\n        helperMarkdownText={this._getFieldDescription(\n          this.props.instances,\n          field\n        )}\n      />\n    );\n  };\n\n  render() {\n    const { mode } = this.props;\n\n    const renderContainer =\n      mode === 'row'\n        ? (fields: React.Node) => (\n            <ResponsiveLineStackLayout noMargin>\n              {fields}\n            </ResponsiveLineStackLayout>\n          )\n        : (fields: React.Node) => (\n            <ColumnStackLayout noMargin>{fields}</ColumnStackLayout>\n          );\n\n    return renderContainer(\n      this.props.schema.map(field => {\n        if (field.children) {\n          if (field.type === 'row') {\n            return (\n              <UnsavedChangesContext.Consumer key={field.name}>\n                {unsavedChanges => (\n                  <PropertiesEditor\n                    schema={field.children}\n                    instances={this.props.instances}\n                    mode=\"row\"\n                    unsavedChanges={unsavedChanges}\n                    onInstancesModified={this.props.onInstancesModified}\n                  />\n                )}\n              </UnsavedChangesContext.Consumer>\n            );\n          }\n\n          return (\n            <div key={field.name}>\n              <Subheader>{field.name}</Subheader>\n              <div style={styles.subPropertiesEditorContainer}>\n                <UnsavedChangesContext.Consumer key={field.name}>\n                  {unsavedChanges => (\n                    <PropertiesEditor\n                      schema={field.children}\n                      instances={this.props.instances}\n                      mode=\"column\"\n                      unsavedChanges={unsavedChanges}\n                      onInstancesModified={this.props.onInstancesModified}\n                    />\n                  )}\n                </UnsavedChangesContext.Consumer>\n              </div>\n            </div>\n          );\n        } else if (field.valueType === 'resource') {\n          return this._renderResourceField(field);\n        } else {\n          if (field.getChoices && field.getValue)\n            return this._renderSelectField(field);\n          if (field.getValue) return this._renderInputField(field);\n          if (field.onClick) return this._renderButton(field);\n        }\n\n        return null;\n      })\n    );\n  }\n}\n","// @flow\nimport axios from 'axios';\nimport { GDevelopAssetApi } from './ApiConfigs';\nimport semverSatisfies from 'semver/functions/satisfies';\nimport { type Filters } from './Filters';\n\nexport type SerializedParameterMetadata = {|\n  codeOnly: boolean,\n  defaultValue: string,\n  description: string,\n  longDescription: string,\n  name: string,\n  optional: boolean,\n  supplementaryInformation: string,\n  type: string, // See ParameterRenderingService for valid types.\n|};\n\nexport type AssetCustomization =\n  | {|\n      required: boolean,\n      extensionName: string,\n      extensionVersion: string,\n      behaviorName: string,\n      behaviorType: string,\n      properties: Array<SerializedParameterMetadata>,\n    |}\n  | {|\n      required: boolean,\n      events: any /*(serialized gdEventsList)*/,\n      parameters: Array<SerializedParameterMetadata>,\n      extensions: Array<{|\n        extensionName: string,\n        extensionVersion: string,\n      |}>,\n    |};\n\nexport type ObjectAsset = {|\n  object: any /*(serialized gdObject)*/,\n  resources: Array<any /*(serialized gdResource)*/>,\n  customization: Array<AssetCustomization>,\n|};\n\nexport type AssetShortHeader = {|\n  id: string,\n  name: string,\n  shortDescription: string,\n  previewImageUrls: Array<string>,\n  tags: Array<string>,\n|};\n\nexport type AssetHeader = {|\n  ...AssetShortHeader,\n  gdevelopVersion: string,\n  version: string,\n  description: string,\n|};\n\nexport type Asset = {|\n  ...AssetHeader,\n  authors: Array<string>,\n  license: string,\n  objectAssets: Array<ObjectAsset>,\n|};\n\nexport type AllAssets = {|\n  assetShortHeaders: Array<AssetShortHeader>,\n  filters: Filters,\n|};\n\nexport type Resource = {|\n  url: string,\n  name: string,\n  license: string,\n  type: string,\n  tags: Array<string>,\n|};\n\nexport type AllResources = {|\n  resources: Array<Resource>,\n  filters: Filters,\n|};\n\nexport type License = {|\n  name: string,\n  website: string,\n|};\n\nexport type Author = {|\n  name: string,\n  website: string,\n|};\n\n/** Check if the IDE version, passed as argument, satisfy the version required by the asset. */\nexport const isCompatibleWithAsset = (\n  ideVersion: string,\n  assetHeader: { gdevelopVersion: string }\n) =>\n  assetHeader.gdevelopVersion\n    ? semverSatisfies(ideVersion, assetHeader.gdevelopVersion, {\n        includePrerelease: true,\n      })\n    : true;\n\nexport const listAllAssets = (): Promise<AllAssets> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/asset`)\n    .then(response => response.data)\n    .then(({ assetShortHeadersUrl, filtersUrl }) => {\n      if (!assetShortHeadersUrl || !filtersUrl) {\n        throw new Error('Unexpected response from the resource endpoint.');\n      }\n      return Promise.all([\n        axios.get(assetShortHeadersUrl).then(response => response.data),\n        axios.get(filtersUrl).then(response => response.data),\n      ]).then(([assetShortHeaders, filters]) => ({\n        assetShortHeaders,\n        filters,\n      }));\n    });\n};\n\nexport const getAsset = (\n  assetShortHeader: AssetShortHeader\n): Promise<Asset> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/asset/${assetShortHeader.id}`)\n    .then(response => response.data)\n    .then(({ assetUrl }) => {\n      if (!assetUrl) {\n        throw new Error('Unexpected response from the asset endpoint.');\n      }\n\n      return axios.get(assetUrl);\n    })\n    .then(response => response.data);\n};\n\nexport const listAllResources = (): Promise<AllResources> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/resource`)\n    .then(response => response.data)\n    .then(({ resourcesUrl, filtersUrl }) => {\n      if (!resourcesUrl || !filtersUrl) {\n        throw new Error('Unexpected response from the resource endpoint.');\n      }\n      return Promise.all([\n        axios.get(resourcesUrl).then(response => response.data),\n        axios.get(filtersUrl).then(response => response.data),\n      ]).then(([resources, filters]) => ({\n        resources,\n        filters,\n      }));\n    });\n};\n\nexport const listAllAuthors = (): Promise<Array<Author>> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/author`)\n    .then(response => response.data)\n    .then(({ authorsUrl }) => {\n      if (!authorsUrl)\n        throw new Error('Unexpected response from author endpoint.');\n      return axios.get(authorsUrl);\n    })\n    .then(response => response.data);\n};\n\nexport const listAllLicenses = (): Promise<Array<License>> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/license`)\n    .then(response => response.data)\n    .then(({ licensesUrl }) => {\n      if (!licensesUrl)\n        throw new Error('Unexpected response from license endpoint.');\n      return axios.get(licensesUrl);\n    })\n    .then(response => response.data);\n};\n\nexport const isPixelArt = (assetShortHeader: AssetShortHeader) => {\n  return assetShortHeader.tags.some(tag => {\n    return tag.toLowerCase() === 'pixel art';\n  });\n};\n","// @flow\nconst gd: libGDevelop = global.gd;\n\n/** Naive way to check if a variable expression is not using a structure/array. */\nconst isRootVariableName = fullName =>\n  !fullName.includes('.') && !fullName.includes('[') && fullName.length > 0;\n\n/**\n * Find variables used in a project - useful to let the user know about variables\n * that are not declared in a list of variables (providing autocompletion for it,\n * or at least a hint that a variable was not declared - on purpose or by mistake).\n *\n * Note that this **works only for non structure/array variables**.\n *\n * TODO: Improve this to support all kind of variables, probably by returning the\n * \"shape\"/\"types\" of identified variables (especially for structures/arrays).\n */\nexport default class EventsRootVariablesFinder {\n  static findAllGlobalVariables(\n    platform: gdPlatform,\n    project: gdProject\n  ): string[] {\n    return (\n      gd.EventsVariablesFinder.findAllGlobalVariables(platform, project)\n        .toNewVectorString()\n        .toJSArray()\n        // Remove child references\n        .filter(isRootVariableName)\n    );\n  }\n\n  static findAllLayoutVariables(\n    platform: gdPlatform,\n    project: gdProject,\n    layout: gdLayout\n  ): string[] {\n    return gd.EventsVariablesFinder.findAllLayoutVariables(\n      project.getCurrentPlatform(),\n      project,\n      layout\n    )\n      .toNewVectorString()\n      .toJSArray()\n      .filter(isRootVariableName);\n  }\n\n  static findAllObjectVariables(\n    platform: gdPlatform,\n    project: gdProject,\n    layout: gdLayout,\n    object: gdObject\n  ): string[] {\n    return gd.EventsVariablesFinder.findAllObjectVariables(\n      project.getCurrentPlatform(),\n      project,\n      layout,\n      object\n    )\n      .toNewVectorString()\n      .toJSArray()\n      .filter(isRootVariableName);\n  }\n}\n","// @flow\nimport {\n  type EnumeratedInstructionMetadata,\n  type InstructionOrExpressionScope,\n  type EnumeratedInstructionOrExpressionMetadata,\n} from './EnumeratedInstructionOrExpressionMetadata.js';\nimport { fuzzyOrEmptyFilter } from '../Utils/FuzzyOrEmptyFilter';\n\nconst gd: libGDevelop = global.gd;\n\nconst GROUP_DELIMITER = '/';\n\ntype ExtensionsExtraInstructions = {\n  BuiltinObject?: {\n    '': Array<string>,\n  },\n  Physics2?: {\n    'Physics2::Physics2Behavior': Array<string>,\n  },\n};\n\nconst freeActionsToAddToObject: ExtensionsExtraInstructions = {\n  BuiltinObject: {\n    '': ['AjoutHasard', 'Create', 'AjoutObjConcern'],\n  },\n};\n\nconst freeConditionsToAddToObject: ExtensionsExtraInstructions = {\n  BuiltinObject: {\n    '': [\n      'AjoutHasard',\n      'AjoutObjConcern',\n      'CollisionNP',\n      'NbObjet',\n      'PickNearest',\n      'Distance',\n      'SeDirige',\n      'EstTourne',\n      'SourisSurObjet',\n    ],\n  },\n};\n\nconst freeActionsToAddToBehavior: ExtensionsExtraInstructions = {};\n\nconst freeConditionsToAddToBehavior: ExtensionsExtraInstructions = {\n  Physics2: {\n    'Physics2::Physics2Behavior': ['Physics2::Collision'],\n  },\n};\n\nconst freeInstructionsToRemove = {\n  BuiltinObject: [\n    // Note: even if \"Create\" was added to the object actions for convenience,\n    // we also keep it in the list of free actions.\n\n    // $FlowFixMe\n    ...freeConditionsToAddToObject.BuiltinObject[''],\n  ],\n  Physics2: [\n    // $FlowFixMe\n    ...freeConditionsToAddToBehavior.Physics2['Physics2::Physics2Behavior'],\n  ],\n};\n\n/**\n * When all instructions are searched, some can be duplicated\n * (on purpose, so that it's easier to find them for users)\n * in both the object instructions and in the free instructions.\n *\n * This removes the duplication, useful for showing results in a list.\n */\nexport const deduplicateInstructionsList = (\n  list: Array<EnumeratedInstructionMetadata>\n): Array<EnumeratedInstructionMetadata> => {\n  let createFound = false;\n  return list.filter(enumerateInstruction => {\n    if (enumerateInstruction.type === 'Create') {\n      if (createFound) return false;\n\n      createFound = true;\n    }\n\n    return true;\n  });\n};\n\nconst filterInstructionsToRemove = (\n  list: Array<EnumeratedInstructionMetadata>,\n  typesToRemove: ?$ReadOnlyArray<string>\n) => {\n  const types = typesToRemove; // Make Flow happy\n  if (!types) return list;\n\n  return list.filter(metadata => types.indexOf(metadata.type) === -1);\n};\n\nconst enumerateExtraBehaviorInstructions = (\n  isCondition: boolean,\n  extension: gdPlatformExtension,\n  behaviorType: string,\n  prefix: string,\n  scope: InstructionOrExpressionScope\n) => {\n  const extensionName = extension.getName();\n\n  const extensionsExtraInstructions = isCondition\n    ? freeConditionsToAddToBehavior[extensionName]\n    : freeActionsToAddToBehavior[extensionName];\n  if (!extensionsExtraInstructions) {\n    return [];\n  }\n\n  const objectExtraInstructions = extensionsExtraInstructions[behaviorType];\n  if (!objectExtraInstructions) {\n    return [];\n  }\n\n  const instructionMetadataMap = isCondition\n    ? extension.getAllConditions()\n    : extension.getAllActions();\n\n  return objectExtraInstructions.map(type =>\n    enumerateInstruction(prefix, type, instructionMetadataMap.get(type), scope)\n  );\n};\n\nconst enumerateExtraObjectInstructions = (\n  isCondition: boolean,\n  extension: gdPlatformExtension,\n  objectType: string,\n  prefix: string,\n  scope: InstructionOrExpressionScope\n) => {\n  const extensionName = extension.getName();\n\n  const extensionsExtraInstructions = isCondition\n    ? freeConditionsToAddToObject[extensionName]\n    : freeActionsToAddToObject[extensionName];\n  if (!extensionsExtraInstructions) {\n    return [];\n  }\n\n  const objectExtraInstructions = extensionsExtraInstructions[objectType];\n  if (!objectExtraInstructions) {\n    return [];\n  }\n\n  const instructionMetadataMap = isCondition\n    ? extension.getAllConditions()\n    : extension.getAllActions();\n\n  return objectExtraInstructions.map(type =>\n    enumerateInstruction(prefix, type, instructionMetadataMap.get(type), scope)\n  );\n};\n\nconst enumerateInstruction = (\n  prefix: string,\n  type: string,\n  instrMetadata: gdInstructionMetadata,\n  scope: InstructionOrExpressionScope\n): EnumeratedInstructionMetadata => {\n  const displayedName = instrMetadata.getFullName();\n  const groupName = instrMetadata.getGroup();\n  const iconFilename = instrMetadata.getIconFilename();\n  const fullGroupName = prefix + groupName;\n\n  return {\n    type,\n    metadata: instrMetadata,\n    iconFilename,\n    displayedName,\n    fullGroupName,\n    scope,\n    isPrivate: instrMetadata.isPrivate(),\n  };\n};\n\nconst enumerateExtensionInstructions = (\n  prefix: string,\n  instructions: gdMapStringInstructionMetadata,\n  scope: InstructionOrExpressionScope\n): Array<EnumeratedInstructionMetadata> => {\n  //Get the map containing the metadata of the instructions provided by the extension...\n  const instructionsTypes = instructions.keys();\n  const allInstructions = [];\n\n  //... and add each instruction\n  for (let j = 0; j < instructionsTypes.size(); ++j) {\n    const type = instructionsTypes.at(j);\n    const instrMetadata = instructions.get(type);\n    if (instrMetadata.isHidden()) continue;\n\n    allInstructions.push(\n      enumerateInstruction(prefix, type, instrMetadata, scope)\n    );\n  }\n\n  return allInstructions;\n};\n\n/**\n * List all the instructions available.\n */\nexport const enumerateAllInstructions = (\n  isCondition: boolean\n): Array<EnumeratedInstructionMetadata> => {\n  let allInstructions = [];\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); ++i) {\n    const extension = allExtensions.at(i);\n    const extensionName = extension.getName();\n    const allObjectsTypes = extension.getExtensionObjectsTypes();\n    const allBehaviorsTypes = extension.getBehaviorsTypes();\n\n    let prefix = '';\n    if (allObjectsTypes.size() > 0 || allBehaviorsTypes.size() > 0) {\n      prefix =\n        extensionName === 'BuiltinObject'\n          ? 'Common ' +\n            (isCondition ? 'conditions' : 'actions') +\n            ' for all objects'\n          : extension.getFullName();\n      prefix += GROUP_DELIMITER;\n    }\n\n    //Free instructions\n    const extensionFreeInstructions = enumerateExtensionInstructions(\n      prefix,\n      isCondition ? extension.getAllConditions() : extension.getAllActions(),\n      {\n        extension,\n        objectMetadata: undefined,\n        behaviorMetadata: undefined,\n      }\n    );\n    allInstructions = [\n      ...allInstructions,\n      ...filterInstructionsToRemove(\n        extensionFreeInstructions,\n        freeInstructionsToRemove[extensionName]\n      ),\n    ];\n\n    //Objects instructions:\n    for (let j = 0; j < allObjectsTypes.size(); ++j) {\n      const objectType = allObjectsTypes.at(j);\n      const objectMetadata = extension.getObjectMetadata(objectType);\n      const scope = { extension, objectMetadata };\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForObject(objectType)\n            : extension.getAllActionsForObject(objectType),\n          scope\n        ),\n        ...enumerateExtraObjectInstructions(\n          isCondition,\n          extension,\n          objectType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n\n    //Behaviors instructions:\n    for (let j = 0; j < allBehaviorsTypes.size(); ++j) {\n      const behaviorType = allBehaviorsTypes.at(j);\n      const behaviorMetadata = extension.getBehaviorMetadata(behaviorType);\n      const scope = { extension, behaviorMetadata };\n\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForBehavior(behaviorType)\n            : extension.getAllActionsForBehavior(behaviorType),\n          scope\n        ),\n        ...enumerateExtraBehaviorInstructions(\n          isCondition,\n          extension,\n          behaviorType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n  }\n\n  return allInstructions;\n};\n\nconst orderFirstInstructionsWithoutGroup = (\n  allInstructions: Array<EnumeratedInstructionMetadata>\n) => {\n  const noGroupInstructions = allInstructions.filter(\n    instructionMetadata => instructionMetadata.fullGroupName.length === 0\n  );\n  const instructionsWithGroups = allInstructions.filter(\n    instructionMetadata => instructionMetadata.fullGroupName.length !== 0\n  );\n\n  return [...noGroupInstructions, ...instructionsWithGroups];\n};\n\n/**\n * List all the instructions that can be used for the given object,\n * in the given context. This includes instructions for the behaviors\n * attached to the object.\n */\nexport const enumerateObjectAndBehaviorsInstructions = (\n  isCondition: boolean,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  objectName: string\n): Array<EnumeratedInstructionMetadata> => {\n  let allInstructions = [];\n\n  const objectType: string = gd.getTypeOfObject(\n    globalObjectsContainer,\n    objectsContainer,\n    objectName,\n    true\n  );\n  const objectBehaviorNames: Array<string> = gd\n    .getBehaviorsOfObject(\n      globalObjectsContainer,\n      objectsContainer,\n      objectName,\n      true\n    )\n    .toJSArray();\n  const objectBehaviorTypes = new Set(\n    objectBehaviorNames.map(behaviorName =>\n      gd.getTypeOfBehavior(\n        globalObjectsContainer,\n        objectsContainer,\n        behaviorName,\n        false\n      )\n    )\n  );\n  const baseObjectType = ''; /* An empty string means the base object */\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); ++i) {\n    const extension = allExtensions.at(i);\n    const hasObjectType =\n      extension\n        .getExtensionObjectsTypes()\n        .toJSArray()\n        .indexOf(objectType) !== -1;\n    const hasBaseObjectType =\n      extension\n        .getExtensionObjectsTypes()\n        .toJSArray()\n        .indexOf(baseObjectType) !== -1;\n    const behaviorTypes = extension\n      .getBehaviorsTypes()\n      .toJSArray()\n      .filter(behaviorType => objectBehaviorTypes.has(behaviorType));\n\n    if (!hasObjectType && !hasBaseObjectType && behaviorTypes.length === 0) {\n      continue;\n    }\n\n    const prefix = '';\n\n    //Objects instructions:\n    if (objectType !== baseObjectType && hasObjectType) {\n      const objectMetadata = extension.getObjectMetadata(objectType);\n      const scope = { extension, objectMetadata };\n\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForObject(objectType)\n            : extension.getAllActionsForObject(objectType),\n          scope\n        ),\n        ...enumerateExtraObjectInstructions(\n          isCondition,\n          extension,\n          baseObjectType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n\n    if (hasBaseObjectType) {\n      const objectMetadata = extension.getObjectMetadata(baseObjectType);\n      const scope = { extension, objectMetadata };\n\n      allInstructions = [\n        ...allInstructions,\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForObject(baseObjectType)\n            : extension.getAllActionsForObject(baseObjectType),\n          scope\n        ),\n        ...enumerateExtraObjectInstructions(\n          isCondition,\n          extension,\n          baseObjectType,\n          prefix,\n          scope\n        ),\n      ];\n    }\n\n    //Behaviors instructions (show them at the top of the list):\n    // eslint-disable-next-line\n    behaviorTypes.forEach(behaviorType => {\n      const behaviorMetadata = extension.getBehaviorMetadata(behaviorType);\n      const scope = { extension, behaviorMetadata };\n\n      allInstructions = [\n        ...enumerateExtensionInstructions(\n          prefix,\n          isCondition\n            ? extension.getAllConditionsForBehavior(behaviorType)\n            : extension.getAllActionsForBehavior(behaviorType),\n          scope\n        ),\n        ...enumerateExtraBehaviorInstructions(\n          isCondition,\n          extension,\n          behaviorType,\n          prefix,\n          scope\n        ),\n        ...allInstructions,\n      ];\n    });\n  }\n\n  return orderFirstInstructionsWithoutGroup(allInstructions);\n};\n\n/**\n * Enumerate all the instructions that are not directly tied\n * to an object.\n */\nexport const enumerateFreeInstructions = (\n  isCondition: boolean\n): Array<EnumeratedInstructionMetadata> => {\n  let allFreeInstructions = [];\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); ++i) {\n    const extension = allExtensions.at(i);\n    const extensionName: string = extension.getName();\n    const allObjectsTypes = extension.getExtensionObjectsTypes();\n    const allBehaviorsTypes = extension.getBehaviorsTypes();\n\n    let prefix = '';\n    if (allObjectsTypes.size() > 0 || allBehaviorsTypes.size() > 0) {\n      prefix = extensionName === 'BuiltinObject' ? '' : extension.getFullName();\n      prefix += GROUP_DELIMITER;\n    }\n\n    //Free instructions\n    const extensionFreeInstructions = enumerateExtensionInstructions(\n      prefix,\n      isCondition ? extension.getAllConditions() : extension.getAllActions(),\n      {\n        extension,\n        objectMetadata: undefined,\n        behaviorMetadata: undefined,\n      }\n    );\n    allFreeInstructions = [\n      ...allFreeInstructions,\n      ...filterInstructionsToRemove(\n        extensionFreeInstructions,\n        freeInstructionsToRemove[extensionName]\n      ),\n    ];\n  }\n\n  return allFreeInstructions;\n};\n\nexport type InstructionFilteringOptions = {|\n  searchText: string,\n|};\n\nexport const filterInstructionsList = <\n  T: EnumeratedInstructionOrExpressionMetadata\n>(\n  list: Array<T>,\n  { searchText }: InstructionFilteringOptions\n): Array<T> => {\n  if (!searchText) {\n    return list;\n  }\n\n  const directMatches = [];\n  const fuzzyMatches = [];\n  const lowercaseSearch = searchText.toLowerCase();\n\n  list.forEach(option => {\n    const lowerCaseDisplayedName = option.displayedName.toLowerCase();\n    const lowerCaseFullGroupName = option.fullGroupName.toLowerCase();\n    // favor direct matches first\n    if (lowerCaseDisplayedName.includes(lowercaseSearch)) {\n      return directMatches.push(option);\n    }\n    // then add fuzzy matches\n    if (\n      fuzzyOrEmptyFilter(lowercaseSearch, lowerCaseDisplayedName) ||\n      fuzzyOrEmptyFilter(lowercaseSearch, lowerCaseFullGroupName)\n    ) {\n      return fuzzyMatches.push(option);\n    }\n  });\n\n  return [...directMatches, ...fuzzyMatches];\n};\n\nexport const getObjectParameterIndex = (\n  instructionMetadata: gdInstructionMetadata\n) => {\n  const parametersCount = instructionMetadata.getParametersCount();\n  if (parametersCount >= 1) {\n    const firstParameterType = instructionMetadata.getParameter(0).getType();\n    if (firstParameterType === 'object') {\n      // By convention, all object conditions/actions have the object as first parameter\n      return 0;\n    }\n    if (gd.ParameterMetadata.isObject(firstParameterType)) {\n      // Some \"free condition/actions\" might be considered as \"object\" instructions, in which\n      // case they are taking an object list as fist parameter - which will be identified\n      // by gd.ParameterMetadata.isObject\n      return 0;\n    }\n\n    if (\n      firstParameterType === 'objectsContext' ||\n      firstParameterType === 'currentScene'\n    ) {\n      if (parametersCount >= 2) {\n        const secondParameterType = instructionMetadata\n          .getParameter(1)\n          .getType();\n        if (gd.ParameterMetadata.isObject(secondParameterType)) {\n          // Some special action/conditions like \"Create\", \"AjoutHasard\" (pick random object) or\n          // \"AjoutObjConcern\" (pick all objects) are \"free condition/actions\", but are manipulating\n          // objects list, so their first parameter is an \"objectsContext\" or \"currentScene\",\n          // followed by an object parameter.\n          return 1;\n        }\n      }\n    }\n  }\n\n  return -1;\n};\n","import { mapVector, mapFor } from '../../../../Utils/MapFor';\nimport every from 'lodash/every';\nconst gd = global.gd;\n\n/**\n * Return the specified animation, direction and sprite for a SpriteObject.\n * Returns null for these elements if the specified choice is not valid.\n * @param {*} object\n * @param {*} animationIndex\n * @param {*} directionIndex\n * @param {*} spriteIndex\n */\nexport const getCurrentElements = (\n  object,\n  animationIndex,\n  directionIndex,\n  spriteIndex\n) => {\n  const hasValidAnimation = animationIndex < object.getAnimationsCount();\n  const animation = hasValidAnimation\n    ? object.getAnimation(animationIndex)\n    : null;\n  const hasValidDirection =\n    !!animation && directionIndex < animation.getDirectionsCount();\n  const direction = hasValidDirection\n    ? animation.getDirection(directionIndex)\n    : null;\n  const hasValidSprite =\n    !!direction && spriteIndex < direction.getSpritesCount();\n  const sprite = hasValidSprite ? direction.getSprite(spriteIndex) : null;\n\n  return {\n    hasValidAnimation,\n    animation,\n    hasValidDirection,\n    direction,\n    hasValidSprite,\n    sprite,\n  };\n};\n\n/**\n * Return all the point names\n * @param {*} object\n */\nexport const getAllPointNames = object => {\n  const allPointNames = new Set();\n  for (\n    let animationIndex = 0;\n    animationIndex < object.getAnimationsCount();\n    animationIndex++\n  ) {\n    const animation = object.getAnimation(animationIndex);\n    for (\n      let directionIndex = 0;\n      directionIndex < animation.getDirectionsCount();\n      directionIndex++\n    ) {\n      const direction = animation.getDirection(directionIndex);\n      for (\n        let spriteIndex = 0;\n        spriteIndex < direction.getSpritesCount();\n        spriteIndex++\n      ) {\n        const points = direction\n          .getSprite(spriteIndex)\n          .getAllNonDefaultPoints();\n        for (let pointIndex = 0; pointIndex < points.size(); pointIndex++) {\n          const point = points.at(pointIndex);\n          allPointNames.add(point.getName());\n        }\n      }\n    }\n  }\n  return [...allPointNames];\n};\n\nexport const copyPoint = (originalPoint, destinationPoint) => {\n  destinationPoint.setX(originalPoint.getX());\n  destinationPoint.setY(originalPoint.getY());\n  destinationPoint.setName(originalPoint.getName());\n};\n\nexport const copySpritePoints = (originalSprite, destinationSprite) => {\n  if (originalSprite.ptr === destinationSprite.ptr) return;\n\n  copyPoint(originalSprite.getCenter(), destinationSprite.getCenter());\n  copyPoint(originalSprite.getOrigin(), destinationSprite.getOrigin());\n  destinationSprite.setDefaultCenterPoint(\n    originalSprite.isDefaultCenterPoint()\n  );\n\n  destinationSprite.getAllNonDefaultPoints().clear();\n  mapVector(originalSprite.getAllNonDefaultPoints(), originalPoint => {\n    destinationSprite.addPoint(originalPoint);\n  });\n};\n\nexport const copyAnimationsSpritePoints = (originalSprite, animation) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      copySpritePoints(originalSprite, sprite);\n    });\n  });\n};\n\nexport const isSamePoint = (point1, point2) => {\n  return (\n    point1.getX() === point2.getX() &&\n    point1.getY() === point2.getY() &&\n    point1.getName() === point2.getName()\n  );\n};\n\nexport const haveSamePoints = (sprite1, sprite2) => {\n  if (!isSamePoint(sprite1.getCenter(), sprite2.getCenter())) return false;\n  if (!isSamePoint(sprite1.getOrigin(), sprite2.getOrigin())) return false;\n  if (sprite1.isDefaultCenterPoint() !== sprite2.isDefaultCenterPoint())\n    return false;\n\n  if (\n    sprite1.getAllNonDefaultPoints().size() !==\n    sprite2.getAllNonDefaultPoints().size()\n  )\n    return false;\n\n  return every(\n    mapVector(sprite1.getAllNonDefaultPoints(), sprite1Point => {\n      if (!sprite2.hasPoint(sprite1Point.getName())) return false;\n\n      return isSamePoint(\n        sprite1Point,\n        sprite2.getPoint(sprite1Point.getName())\n      );\n    })\n  );\n};\n\nexport const allDirectionSpritesHaveSamePointsAs = (\n  originalSprite,\n  direction\n) => {\n  return every(\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      return haveSamePoints(sprite, originalSprite);\n    })\n  );\n};\n\nexport const allSpritesHaveSamePointsAs = (originalSprite, animation) => {\n  return every(\n    mapFor(0, animation.getDirectionsCount(), i => {\n      const direction = animation.getDirection(i);\n      return allDirectionSpritesHaveSamePointsAs(originalSprite, direction);\n    })\n  );\n};\n\nexport const copySpritePolygons = (originalSprite, destinationSprite) => {\n  if (originalSprite.ptr === destinationSprite.ptr) return;\n\n  destinationSprite.setCollisionMaskAutomatic(\n    originalSprite.isCollisionMaskAutomatic()\n  );\n\n  destinationSprite.getCustomCollisionMask().clear();\n  mapVector(originalSprite.getCustomCollisionMask(), originalPolygon => {\n    destinationSprite.getCustomCollisionMask().push_back(originalPolygon);\n  });\n};\n\nexport const copyAnimationsSpriteCollisionMasks = (\n  originalSprite,\n  animation\n) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      copySpritePolygons(originalSprite, sprite);\n    });\n  });\n};\n\nexport const isSamePolygon = (polygon1, polygon2) => {\n  const polygon1Vertices = polygon1.getVertices();\n  const polygon2Vertices = polygon2.getVertices();\n\n  if (polygon1Vertices.size() !== polygon2Vertices.size()) return false;\n\n  return every(\n    mapVector(polygon1Vertices, (point1, index) => {\n      const point2 = polygon2Vertices.at(index);\n      return (\n        point1.get_x() === point2.get_x() && point1.get_y() === point2.get_y()\n      );\n    })\n  );\n};\n\nexport const haveSameCollisionMasks = (sprite1, sprite2) => {\n  if (sprite1.isCollisionMaskAutomatic() !== sprite2.isCollisionMaskAutomatic())\n    return false;\n\n  if (sprite1.isCollisionMaskAutomatic() && sprite2.isCollisionMaskAutomatic())\n    return true;\n\n  const sprite1CollisionMask = sprite1.getCustomCollisionMask();\n  const sprite2CollisionMask = sprite2.getCustomCollisionMask();\n\n  if (sprite1CollisionMask.size() !== sprite2CollisionMask.size()) return false;\n\n  return every(\n    mapVector(sprite1CollisionMask, (sprite1Polygon, index) => {\n      return isSamePolygon(sprite1Polygon, sprite2CollisionMask.at(index));\n    })\n  );\n};\n\nexport const allDirectionSpritesHaveSameCollisionMasksAs = (\n  originalSprite,\n  direction\n) => {\n  return every(\n    mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n      return haveSameCollisionMasks(sprite, originalSprite);\n    })\n  );\n};\n\nexport const allSpritesHaveSameCollisionMasksAs = (\n  originalSprite,\n  animation\n) => {\n  return every(\n    mapFor(0, animation.getDirectionsCount(), i => {\n      const direction = animation.getDirection(i);\n      return allDirectionSpritesHaveSameCollisionMasksAs(\n        originalSprite,\n        direction\n      );\n    })\n  );\n};\n\nexport const deleteSpritesFromAnimation = (animation, spritePtrs) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    const spritesToDelete = mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n\n      return !!spritePtrs[sprite.ptr];\n    });\n\n    // Iterate from the end to the beginning to avoid invalidating indexes.\n    for (\n      let spriteIndex = direction.getSpritesCount() - 1;\n      spriteIndex >= 0;\n      spriteIndex--\n    ) {\n      if (spritesToDelete[spriteIndex]) direction.removeSprite(spriteIndex);\n    }\n  });\n};\n\nexport const duplicateSpritesInAnimation = (animation, spritePtrs) => {\n  mapFor(0, animation.getDirectionsCount(), i => {\n    const direction = animation.getDirection(i);\n\n    const spritesToDuplicate = mapFor(0, direction.getSpritesCount(), j => {\n      const sprite = direction.getSprite(j);\n\n      return !!spritePtrs[sprite.ptr];\n    });\n\n    // Iterate from the end to the beginning to avoid invalidating indexes.\n    for (\n      let spriteIndex = direction.getSpritesCount() - 1;\n      spriteIndex >= 0;\n      spriteIndex--\n    ) {\n      if (spritesToDuplicate[spriteIndex]) {\n        const spriteToDuplicate = direction.getSprite(spriteIndex);\n        const newSprite = new gd.Sprite();\n        newSprite.setImageName(spriteToDuplicate.getImageName());\n        copySpritePoints(spriteToDuplicate, newSprite);\n        copySpritePolygons(spriteToDuplicate, newSprite);\n\n        direction.addSprite(newSprite);\n        direction.moveSprite(direction.getSpritesCount() - 1, spriteIndex);\n      }\n    }\n  });\n};\n","// @flow\nimport { type I18n as I18nType } from '@lingui/core';\nimport { mapVector, mapFor } from '../Utils/MapFor';\nimport { caseSensitiveSlug } from '../Utils/CaseSensitiveSlug';\nimport {\n  declareInstructionOrExpressionMetadata,\n  declareBehaviorInstructionOrExpressionMetadata,\n  declareEventsFunctionParameters,\n  declareBehaviorMetadata,\n  declareExtension,\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n  declareBehaviorPropertiesInstructionAndExpressions,\n} from './MetadataDeclarationHelpers';\n\nconst gd: libGDevelop = global.gd;\n\nexport type EventsFunctionCodeWriter = {|\n  getIncludeFileFor: (functionName: string) => string,\n  writeFunctionCode: (functionName: string, code: string) => Promise<void>,\n  writeBehaviorCode: (behaviorName: string, code: string) => Promise<void>,\n|};\n\nexport type IncludeFileContent = {|\n  includeFile: string,\n  content: string,\n|};\n\nexport type EventsFunctionCodeWriterCallbacks = {|\n  onWriteFile: IncludeFileContent => void,\n|};\n\ntype Options = {|\n  skipCodeGeneration?: boolean,\n  eventsFunctionCodeWriter: EventsFunctionCodeWriter,\n  i18n: I18nType,\n|};\n\ntype CodeGenerationContext = {|\n  codeNamespacePrefix: string,\n  extensionIncludeFiles: Array<string>,\n|};\n\nconst mangleName = (name: string) => {\n  return caseSensitiveSlug(name, '_', []);\n};\n\n/** Generate the namespace for a free function. */\nconst getFreeFunctionCodeNamespace = (\n  eventsFunction: gdEventsFunction,\n  codeNamespacePrefix: string\n) => {\n  return codeNamespacePrefix + '__' + mangleName(eventsFunction.getName());\n};\n\n/** Generate the namespace for a behavior function. */\nconst getBehaviorFunctionCodeNamespace = (\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  codeNamespacePrefix: string\n) => {\n  return codeNamespacePrefix + '__' + mangleName(eventsBasedBehavior.getName());\n};\n\n/**\n * Load all events functions of a project in extensions\n */\nexport const loadProjectEventsFunctionsExtensions = (\n  project: gdProject,\n  eventsFunctionCodeWriter: EventsFunctionCodeWriter,\n  i18n: I18nType\n): Promise<Array<void>> => {\n  return Promise.all(\n    // First pass: generate extensions from the events functions extensions,\n    // without writing code for the functions. This is useful as events in functions\n    // could be using other functions, which would not yet be available as\n    // extensions.\n    mapFor(0, project.getEventsFunctionsExtensionsCount(), i => {\n      return loadProjectEventsFunctionsExtension(\n        project,\n        project.getEventsFunctionsExtensionAt(i),\n        { skipCodeGeneration: true, eventsFunctionCodeWriter, i18n }\n      );\n    })\n  ).then(() =>\n    Promise.all(\n      // Second pass: generate extensions, including code.\n      mapFor(0, project.getEventsFunctionsExtensionsCount(), i => {\n        return loadProjectEventsFunctionsExtension(\n          project,\n          project.getEventsFunctionsExtensionAt(i),\n          {\n            skipCodeGeneration: false,\n            eventsFunctionCodeWriter,\n            i18n,\n          }\n        );\n      })\n    )\n  );\n};\n\nconst loadProjectEventsFunctionsExtension = (\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  options: Options\n): Promise<void> => {\n  return generateEventsFunctionExtension(\n    project,\n    eventsFunctionsExtension,\n    options\n  ).then(extension => {\n    gd.JsPlatform.get().addNewExtension(extension);\n    extension.delete();\n  });\n};\n\n/**\n * Get the list of mandatory include files when using the\n * extension.\n */\nconst getExtensionIncludeFiles = (\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  options: Options,\n  codeNamespacePrefix: string\n): Array<string> => {\n  return mapFor(0, eventsFunctionsExtension.getEventsFunctionsCount(), i => {\n    const eventsFunction = eventsFunctionsExtension.getEventsFunctionAt(i);\n\n    if (isExtensionLifecycleEventsFunction(eventsFunction.getName())) {\n      const codeNamespace = getFreeFunctionCodeNamespace(\n        eventsFunction,\n        codeNamespacePrefix\n      );\n      const functionName = codeNamespace + '.func'; // TODO\n\n      return options.eventsFunctionCodeWriter.getIncludeFileFor(functionName);\n    }\n\n    return null;\n  }).filter(Boolean);\n};\n\n/**\n * Generate the code for the events based extension\n */\nconst generateEventsFunctionExtension = (\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  options: Options\n): Promise<gdPlatformExtension> => {\n  const extension = new gd.PlatformExtension();\n  declareExtension(extension, eventsFunctionsExtension);\n\n  const codeNamespacePrefix =\n    'gdjs.evtsExt__' + mangleName(eventsFunctionsExtension.getName());\n\n  const extensionIncludeFiles = getExtensionIncludeFiles(\n    project,\n    eventsFunctionsExtension,\n    options,\n    codeNamespacePrefix\n  );\n  const codeGenerationContext = {\n    codeNamespacePrefix,\n    extensionIncludeFiles,\n  };\n\n  return Promise.all(\n    // Generate all behaviors and their functions\n    mapVector(\n      eventsFunctionsExtension.getEventsBasedBehaviors(),\n      eventsBasedBehavior => {\n        return generateBehavior(\n          project,\n          extension,\n          eventsFunctionsExtension,\n          eventsBasedBehavior,\n          options,\n          codeGenerationContext\n        );\n      }\n    )\n  )\n    .then(() =>\n      // Generate all free functions\n      Promise.all(\n        mapFor(0, eventsFunctionsExtension.getEventsFunctionsCount(), i => {\n          const eventsFunction = eventsFunctionsExtension.getEventsFunctionAt(\n            i\n          );\n          return generateFreeFunction(\n            project,\n            extension,\n            eventsFunctionsExtension,\n            eventsFunction,\n            options,\n            codeGenerationContext\n          );\n        })\n      )\n    )\n    .then(() => extension);\n};\n\nconst generateFreeFunction = (\n  project: gdProject,\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsFunction: gdEventsFunction,\n  options: Options,\n  codeGenerationContext: CodeGenerationContext\n): Promise<void> => {\n  const instructionOrExpression = declareInstructionOrExpressionMetadata(\n    extension,\n    eventsFunctionsExtension,\n    eventsFunction\n  );\n  // By convention, first parameter is always the Runtime Scene.\n  instructionOrExpression.addCodeOnlyParameter('currentScene', '');\n  declareEventsFunctionParameters(eventsFunction, instructionOrExpression);\n\n  // Hide \"lifecycle\" functions as they are called automatically by\n  // the game engine.\n  if (isExtensionLifecycleEventsFunction(eventsFunction.getName()))\n    instructionOrExpression.setHidden();\n\n  if (eventsFunction.isPrivate()) instructionOrExpression.setPrivate();\n\n  const codeNamespace = getFreeFunctionCodeNamespace(\n    eventsFunction,\n    codeGenerationContext.codeNamespacePrefix\n  );\n  const functionName = codeNamespace + '.func';\n\n  const codeExtraInformation = instructionOrExpression.getCodeExtraInformation();\n  codeExtraInformation\n    .setIncludeFile(\n      options.eventsFunctionCodeWriter.getIncludeFileFor(functionName)\n    )\n    .setFunctionName(functionName);\n\n  // Always include the extension include files when using a free function.\n  codeGenerationContext.extensionIncludeFiles.forEach(includeFile => {\n    codeExtraInformation.addIncludeFile(includeFile);\n  });\n\n  if (!options.skipCodeGeneration) {\n    const includeFiles = new gd.SetString();\n    const eventsFunctionsExtensionCodeGenerator = new gd.EventsFunctionsExtensionCodeGenerator(\n      project\n    );\n    const code = eventsFunctionsExtensionCodeGenerator.generateFreeEventsFunctionCompleteCode(\n      eventsFunction,\n      codeNamespace,\n      includeFiles,\n      // For now, always generate functions for runtime (this disables\n      // generation of profiling for groups (see EventsCodeGenerator))\n      // as extensions generated can be used either for preview or export.\n      true\n    );\n\n    // Add any include file required by the function to the list\n    // of include files for this function (so that when used, the \"dependencies\"\n    // are transitively included).\n    includeFiles\n      .toNewVectorString()\n      .toJSArray()\n      .forEach((includeFile: string) => {\n        codeExtraInformation.addIncludeFile(includeFile);\n      });\n\n    includeFiles.delete();\n\n    return options.eventsFunctionCodeWriter.writeFunctionCode(\n      functionName,\n      code\n    );\n  } else {\n    // Skip code generation if no events function writer is provided.\n    // This is the case during the \"first pass\", where all events functions extensions\n    // are loaded as extensions but not code generated, as events in functions could\n    // themselves be using functions that are not yet available in extensions.\n    return Promise.resolve();\n  }\n};\n\nfunction generateBehavior(\n  project: gdProject,\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  options: Options,\n  codeGenerationContext: CodeGenerationContext\n): Promise<void> {\n  const behaviorMetadata = declareBehaviorMetadata(\n    extension,\n    eventsBasedBehavior\n  );\n\n  const eventsFunctionsContainer = eventsBasedBehavior.getEventsFunctions();\n  const codeNamespace = getBehaviorFunctionCodeNamespace(\n    eventsBasedBehavior,\n    codeGenerationContext.codeNamespacePrefix\n  );\n  const includeFile = options.eventsFunctionCodeWriter.getIncludeFileFor(\n    codeNamespace\n  );\n\n  behaviorMetadata.setIncludeFile(includeFile);\n\n  // Always include the extension include files when using a behavior.\n  codeGenerationContext.extensionIncludeFiles.forEach(includeFile => {\n    behaviorMetadata.addIncludeFile(includeFile);\n  });\n\n  return Promise.resolve().then(() => {\n    const behaviorMethodMangledNames = new gd.MapStringString();\n\n    // Declare the instructions/expressions for properties\n    declareBehaviorPropertiesInstructionAndExpressions(\n      options.i18n,\n      extension,\n      behaviorMetadata,\n      eventsBasedBehavior\n    );\n\n    // Declare all the behavior functions\n    mapFor(0, eventsFunctionsContainer.getEventsFunctionsCount(), i => {\n      const eventsFunction = eventsFunctionsContainer.getEventsFunctionAt(i);\n\n      const eventsFunctionMangledName = mangleName(eventsFunction.getName());\n      behaviorMethodMangledNames.set(\n        eventsFunction.getName(),\n        eventsFunctionMangledName\n      );\n\n      const instructionOrExpression = declareBehaviorInstructionOrExpressionMetadata(\n        extension,\n        behaviorMetadata,\n        eventsBasedBehavior,\n        eventsFunction\n      );\n      declareEventsFunctionParameters(eventsFunction, instructionOrExpression);\n\n      // Hide \"lifecycle\" methods as they are called automatically by\n      // the game engine.\n      if (isBehaviorLifecycleEventsFunction(eventsFunction.getName())) {\n        instructionOrExpression.setHidden();\n      }\n\n      if (eventsFunction.isPrivate()) instructionOrExpression.setPrivate();\n\n      const codeExtraInformation = instructionOrExpression.getCodeExtraInformation();\n      codeExtraInformation\n        .setIncludeFile(includeFile)\n        .setFunctionName(eventsFunctionMangledName);\n    });\n\n    // Generate code for the behavior and its methods\n    if (!options.skipCodeGeneration) {\n      const includeFiles = new gd.SetString();\n      const behaviorCodeGenerator = new gd.BehaviorCodeGenerator(project);\n      const code = behaviorCodeGenerator.generateRuntimeBehaviorCompleteCode(\n        eventsFunctionsExtension.getName(),\n        eventsBasedBehavior,\n        codeNamespace,\n        behaviorMethodMangledNames,\n        includeFiles,\n\n        // For now, always generate functions for runtime (this disables\n        // generation of profiling for groups (see EventsCodeGenerator))\n        // as extensions generated can be used either for preview or export.\n        true\n      );\n      behaviorCodeGenerator.delete();\n      behaviorMethodMangledNames.delete();\n\n      // Add any include file required by the functions to the list\n      // of include files for this behavior (so that when used, the \"dependencies\"\n      // are transitively included).\n      includeFiles\n        .toNewVectorString()\n        .toJSArray()\n        .forEach((includeFile: string) => {\n          behaviorMetadata.addIncludeFile(includeFile);\n        });\n\n      includeFiles.delete();\n\n      return options.eventsFunctionCodeWriter.writeBehaviorCode(\n        codeNamespace,\n        code\n      );\n    } else {\n      // Skip code generation\n      behaviorMethodMangledNames.delete();\n      return Promise.resolve();\n    }\n  });\n}\n\n/**\n * Unload all extensions providing events functions of a project\n */\nexport const unloadProjectEventsFunctionsExtensions = (\n  project: gdProject\n): Promise<Array<void>> => {\n  return Promise.all(\n    mapFor(0, project.getEventsFunctionsExtensionsCount(), i => {\n      gd.JsPlatform.get().removeExtension(\n        project.getEventsFunctionsExtensionAt(i).getName()\n      );\n    })\n  );\n};\n\n/**\n * Unload a single extension providing events functions of a project\n */\nexport const unloadProjectEventsFunctionsExtension = (\n  project: gdProject,\n  extensionName: string\n): void => {\n  gd.JsPlatform.get().removeExtension(extensionName);\n};\n\n/**\n * Given metadata about an instruction or an expression, tells if this was created\n * from an event function.\n */\nexport const isAnEventFunctionMetadata = (\n  instructionOrExpression: gdInstructionMetadata | gdExpressionMetadata\n) => {\n  const parametersCount = instructionOrExpression.getParametersCount();\n  if (parametersCount <= 0) return false;\n\n  return (\n    instructionOrExpression.getParameter(parametersCount - 1).getType() ===\n    'eventsFunctionContext'\n  );\n};\n\n/**\n * Get back the name a function from its type.\n * See also getFreeEventsFunctionType for the reverse operation.\n */\nexport const getFunctionNameFromType = (type: string) => {\n  const parts = type.split('::');\n  if (!parts.length)\n    return {\n      name: '',\n      behaviorName: '',\n      extensionName: '',\n    };\n\n  return {\n    name: parts[parts.length - 1],\n    behaviorName: parts.length > 2 ? parts[1] : undefined,\n    extensionName: parts[0],\n  };\n};\n\n/**\n * Get the type of a Events Function.\n * See also getFunctionNameFromType for the reverse operation.\n */\nexport const getFreeEventsFunctionType = (\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n) => {\n  return extensionName + '::' + eventsFunction.getName();\n};\n\n/**\n * Return the index of the first parameter to be shown to the user:\n * * 0 for a behavior \"method\",\n * * 1 for a free function (as the first parameter is by convention the runtimeScene).\n */\nexport const getParametersIndexOffset = (\n  isEventsBasedBehaviorMethod: boolean\n) => {\n  return isEventsBasedBehaviorMethod\n    ? 0 /*In the case of a behavior events function, the first two parameters are by convention the \"Object\" and \"Behavior\" */\n    : 1; /*In the case of a free events function (i.e: not tied to a behavior), the first parameter is by convention the current scene and is not shown.*/\n};\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\n\ntype Props = {|\n  initialViewX: number,\n  initialViewY: number,\n  width: number,\n  height: number,\n  instancesEditorSettings: InstancesEditorSettings,\n|};\n\nexport default class ViewPosition {\n  viewX: number = 0;\n  viewY: number = 0;\n  _width: number;\n  _height: number;\n  instancesEditorSettings: InstancesEditorSettings;\n  _pixiContainer = new PIXI.Container();\n\n  constructor({\n    initialViewX,\n    initialViewY,\n    width,\n    height,\n    instancesEditorSettings,\n  }: Props) {\n    this.viewX = initialViewX;\n    this.viewY = initialViewY;\n    this.instancesEditorSettings = instancesEditorSettings;\n    this.resize(width, height);\n  }\n\n  setInstancesEditorSettings(instancesEditorSettings: InstancesEditorSettings) {\n    this.instancesEditorSettings = instancesEditorSettings;\n  }\n\n  resize(width: number, height: number) {\n    this._width = width;\n    this._height = height;\n  }\n\n  getWidth() {\n    return this._width;\n  }\n\n  getHeight() {\n    return this._height;\n  }\n\n  /**\n   * Convert a point from the canvas coordinates (for example, the mouse position) to the\n   * \"world\" coordinates.\n   */\n  toSceneCoordinates = (x: number, y: number): [number, number] => {\n    x -= this._width / 2;\n    y -= this._height / 2;\n    x /= Math.abs(this.instancesEditorSettings.zoomFactor);\n    y /= Math.abs(this.instancesEditorSettings.zoomFactor);\n\n    var viewRotation = 0;\n    var tmp = x;\n    x =\n      Math.cos((viewRotation / 180) * Math.PI) * x -\n      Math.sin((viewRotation / 180) * Math.PI) * y;\n    y =\n      Math.sin((viewRotation / 180) * Math.PI) * tmp +\n      Math.cos((viewRotation / 180) * Math.PI) * y;\n\n    return [x + this.viewX, y + this.viewY];\n  };\n\n  /**\n   * Convert a point from the \"world\" coordinates (for example, an object position) to the\n   * canvas coordinates.\n   */\n  toCanvasCoordinates = (x: number, y: number): [number, number] => {\n    x -= this.viewX;\n    y -= this.viewY;\n\n    var viewRotation = -0;\n    var tmp = x;\n    x =\n      Math.cos((viewRotation / 180) * Math.PI) * x -\n      Math.sin((viewRotation / 180) * Math.PI) * y;\n    y =\n      Math.sin((viewRotation / 180) * Math.PI) * tmp +\n      Math.cos((viewRotation / 180) * Math.PI) * y;\n\n    x *= Math.abs(this.instancesEditorSettings.zoomFactor);\n    y *= Math.abs(this.instancesEditorSettings.zoomFactor);\n\n    return [x + this._width / 2, y + this._height / 2];\n  };\n\n  scrollBy(x: number, y: number) {\n    this.viewX += x;\n    this.viewY += y;\n  }\n\n  scrollTo(x: number, y: number) {\n    this.viewX = x;\n    this.viewY = y;\n  }\n\n  scrollToInstance(instance: gdInitialInstance) {\n    this.viewX = instance.getX();\n    this.viewY = instance.getY();\n  }\n\n  getViewX() {\n    return this.viewX;\n  }\n\n  getViewY() {\n    return this.viewY;\n  }\n\n  getPixiContainer() {\n    return this._pixiContainer;\n  }\n\n  render() {\n    this._pixiContainer.position.x =\n      -this.viewX * this.instancesEditorSettings.zoomFactor;\n    this._pixiContainer.position.y =\n      -this.viewY * this.instancesEditorSettings.zoomFactor;\n    this._pixiContainer.position.x += this._width / 2;\n    this._pixiContainer.position.y += this._height / 2;\n    this._pixiContainer.scale.x = this.instancesEditorSettings.zoomFactor;\n    this._pixiContainer.scale.y = this.instancesEditorSettings.zoomFactor;\n  }\n}\n","// @flow\n\n/**\n * Checks if a dialog or overlay is currently open on screen\n */\nconst isDialogOpen = () => {\n  // If currently focused element is inside MainFrame div, we can\n  // be sure that no dialog or overlay is opened.\n  // But clicking on some empty spaces like in properties panel leads\n  // to <body> element getting focused, so we also need to check if\n  // currently focused element is <body>.\n  const body = document.body;\n  const activeEl = document.activeElement;\n  const mainFrame = document.querySelector('div.main-frame');\n  const isInMainframe = mainFrame && mainFrame.contains(activeEl);\n  const isBody = activeEl === body;\n  return !isBody && !isInMainframe;\n};\n\nexport default isDialogOpen;\n","// @flow\n\nconst reservedShortcuts = [\n  'CmdOrCtrl+KeyZ', // Undo\n  'CmdOrCtrl+KeyY', // Redo\n  'CmdOrCtrl+Shift+KeyZ', // Redo\n  'CmdOrCtrl+KeyX', // Cut\n  'CmdOrCtrl+KeyC', // Copy\n  'CmdOrCtrl+KeyV', // Paste\n  'CmdOrCtrl+Shift+KeyV', // Paste with style\n  'CmdOrCtrl+KeyA', // Select all\n  'Delete', // Delete\n  'CmdOrCtrl+Shift+KeyI', // Open dev tools\n  'F11', // Toggle fullscreen\n\n  'NumpadAdd', // Scene: Zoom in\n  'CmdOrCtrl+Equal', // Scene: Zoom in\n  'NumpadSubtract', // Scene: Zoom out\n  'CmdOrCtrl+Minus', // Scene: Zoom out\n\n  // TODO: Following shortcuts correspond to actions\n  // that have overlapping commands\n  'CmdOrCtrl+KeyF', // Events: Search\n];\n\nexport default reservedShortcuts;\n","// @flow\n\n/**\n * Checks if the user is currently typing text\n */\nconst isUserTyping = () => {\n  const activeElement = document.activeElement;\n  if (!activeElement) return false;\n  // Check if focused element is part of a text entry HTML element\n  const textEditorSelectors = 'textarea, input, [contenteditable=\"true\"]';\n  if (activeElement.closest(textEditorSelectors)) return true;\n  return false;\n};\n\nexport default isUserTyping;\n","// @flow\nimport * as React from 'react';\nimport isDialogOpen from '../UI/OpenedDialogChecker';\nimport { isMacLike } from '../Utils/Platform';\nimport reservedShortcuts from './ReservedShortcuts';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport commandsList, { type CommandName } from '../CommandPalette/CommandsList';\nimport isUserTyping from './IsUserTyping';\nimport defaultShortcuts, { type ShortcutMap } from './DefaultShortcuts';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\n\n// Valid action keys\ntype KeyType =\n  | 'alphabet' // A-Z\n  | 'number' // Numrow 0-9\n  | 'fn-row' // F1-F12\n  | 'numpad-arith' // Numpad+, Numpad-\n  | 'numrow-arith' // Numrow-, Numrow=\n  | 'other'; // Tab, Space\n\n/**\n * Given a key code, gives the associated KeyType.\n * Returns null if the key code can't be categorised.\n */\nconst getKeyTypeFromCode = (code: string): KeyType | null => {\n  if (!code) return null;\n  if (code.indexOf('Key') === 0) return 'alphabet';\n  if (code.indexOf('Digit') === 0) return 'number';\n  if (code.indexOf('F') === 0) return 'fn-row';\n  if (code === 'NumpadAdd' || code === 'NumpadSubtract') return 'numpad-arith';\n  if (code === 'Equal' || code === 'Minus') return 'numrow-arith';\n  if (code === 'Tab' || code === 'Space') return 'other';\n  return null;\n};\n\n/**\n * Returns possibly partial shortcut string corresponding to given event object\n */\nexport const getShortcutStringFromEvent = (e: KeyboardEvent): string => {\n  let shortcutString = '';\n  if (e.ctrlKey || e.metaKey) shortcutString += 'CmdOrCtrl+';\n  if (e.shiftKey) shortcutString += 'Shift+';\n  if (e.altKey) shortcutString += 'Alt+';\n\n  const code = e.code || ''; // Somehow `code` was sometimes reported to be undefined.\n  const keyType = getKeyTypeFromCode(code);\n  if (keyType) shortcutString += code;\n  return shortcutString;\n};\n\n/**\n * Checks if the given event corresponds to a valid shortcut press.\n * Does not check if shortcut is reserved or not.\n */\nexport const isValidShortcutEvent = (e: KeyboardEvent): boolean => {\n  // Check if action key is a shortcut supported key\n  const code = e.code || ''; // Somehow `code` was sometimes reported to be undefined.\n  const keyType = getKeyTypeFromCode(code);\n  if (!keyType) return false;\n\n  const ctrlOrCmdPressed = e.ctrlKey || e.metaKey;\n  const altPressed = e.altKey;\n\n  // Check keytype-specific restrictions\n  if (keyType === 'other') {\n    // Tab and Space may clash with keyboard navigation - Ctrl or Alt required\n    if (!ctrlOrCmdPressed && !altPressed) return false;\n  }\n\n  return true;\n};\n\n/**\n * Extracts shortcut-related information from given event object\n */\nexport const getShortcutMetadataFromEvent = (\n  e: KeyboardEvent\n): {| shortcutString: string, isValid: boolean |} => {\n  const shortcutString = getShortcutStringFromEvent(e);\n  const isValidKey = isValidShortcutEvent(e);\n  const isReserved = reservedShortcuts.includes(shortcutString);\n  return { shortcutString, isValid: isValidKey && !isReserved };\n};\n\n/**\n * Patches default shortcuts set with user's custom shortcuts and\n * returns the full shortcut map obtained.\n */\nexport const useShortcutMap = (): ShortcutMap => {\n  const preferences = React.useContext(PreferencesContext);\n  const userShortcutMap = preferences.values.userShortcutMap;\n  return { ...defaultShortcuts, ...userShortcutMap };\n};\n\n/**\n * Listens for keyboard shortcuts and launches\n * callback with corresponding command\n */\nexport const useKeyboardShortcuts = (onRunCommand: CommandName => void) => {\n  const shortcutMap = useShortcutMap();\n\n  React.useEffect(\n    () => {\n      const handler = (e: KeyboardEvent) => {\n        // Extract shortcut from event object and check if it's valid\n        const shortcutData = getShortcutMetadataFromEvent(e);\n        if (!shortcutData.isValid) return;\n\n        // Get corresponding command, if it exists\n        const commandName = Object.keys(shortcutMap).find(\n          name => shortcutMap[name] === shortcutData.shortcutString\n        );\n        if (!commandName) return;\n\n        // On desktop app, ignore shortcuts that are handled by Electron\n        if (electron && commandsList[commandName].handledByElectron) return;\n\n        // e.preventDefault tends to block user from typing,\n        // so do it only if user is not typing.\n        if (isUserTyping()) return;\n        e.preventDefault();\n\n        // Discard shortcut presses if a dialog is open\n        if (isDialogOpen()) return;\n\n        onRunCommand(commandName);\n      };\n\n      document.addEventListener('keydown', handler);\n      return () => document.removeEventListener('keydown', handler);\n    },\n    [onRunCommand, shortcutMap]\n  );\n};\n\n/**\n * Converts an action key's e.code value to user-friendly string\n * For example, \"KeyA\" -> \"A\", \"NumpadAdd\" -> \"Plus\"\n */\nconst getKeyDisplayName = (code: string) => {\n  const keyType = getKeyTypeFromCode(code);\n  if (keyType === 'alphabet') return code.slice(3);\n  if (keyType === 'number') return code.slice(5);\n  if (keyType === 'fn-row') return code;\n  if (keyType === 'numpad-arith') return code === 'NumpadAdd' ? 'Num+' : 'Num-';\n  if (keyType === 'numrow-arith') return code === 'Minus' ? '-' : '=';\n  return code; // Tab, Space\n};\n\n/**\n * Parses shortcut string into array of platform-specific key strings\n */\nexport const getShortcutDisplayName = (shortcutString: string) => {\n  return shortcutString\n    .split('+')\n    .map<string>(keyCode => {\n      if (keyCode === 'CmdOrCtrl') return isMacLike() ? 'Cmd' : 'Ctrl';\n      if (keyCode === 'Shift' || keyCode === 'Alt') return keyCode;\n      return getKeyDisplayName(keyCode);\n    })\n    .join(' + ');\n};\n\n/**\n * Takes key code and returns Electron string for the key\n */\nconst getElectronKeyString = (code: string) => {\n  const keyType = getKeyTypeFromCode(code);\n  if (keyType === 'alphabet') return code.slice(3);\n  if (keyType === 'number') return code.slice(5);\n  if (keyType === 'fn-row') return code;\n  if (keyType === 'numpad-arith')\n    return code === 'NumpadAdd' ? 'numadd' : 'numsub';\n  if (keyType === 'numrow-arith') return code === 'Minus' ? '-' : '=';\n  return code; // Tab, Space\n};\n\n/**\n * Converts given shortcut string into an Electron accelerator string\n */\nexport const getElectronAccelerator = (shortcutString: string) => {\n  return shortcutString\n    .split('+')\n    .map<string>(keyCode => {\n      if (keyCode === 'CmdOrCtrl' || keyCode === 'Shift' || keyCode === 'Alt')\n        return keyCode;\n      return getElectronKeyString(keyCode);\n    })\n    .join('+');\n};\n","// @flow\nimport * as React from 'react';\nimport IconButton from './IconButton';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  src: string,\n  tooltip?: MessageDescriptor,\n  acceleratorString?: string,\n  disabled?: boolean,\n  onClick?: () => void,\n  onContextMenu?: () => void,\n|};\n\n/**\n * An icon that can be used in a ToolbarGroup of a Toolbar.\n */\nconst ToolbarIcon = React.forwardRef<Props, IconButton>((props: Props, ref) => {\n  const {\n    src,\n    tooltip,\n    acceleratorString,\n    disabled,\n    onClick,\n    onContextMenu,\n  } = props;\n\n  return (\n    <ThemeConsumer>\n      {muiTheme => (\n        <IconButton\n          onClick={onClick}\n          onContextMenu={onContextMenu}\n          size=\"small\"\n          disabled={disabled}\n          tooltip={tooltip}\n          acceleratorString={acceleratorString}\n          ref={ref}\n        >\n          <img\n            alt={tooltip}\n            src={src}\n            width={32}\n            height={32}\n            style={{\n              filter: disabled\n                ? 'grayscale(100%)'\n                : muiTheme.gdevelopIconsCSSFilter,\n            }}\n          />\n        </IconButton>\n      )}\n    </ThemeConsumer>\n  );\n});\n\nexport default ToolbarIcon;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport { useSerializableObjectCancelableEditor } from '../Utils/SerializableObjectCancelableEditor';\nimport VariablesList from './index';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport HotReloadPreviewButton, {\n  type HotReloadPreviewButtonProps,\n} from '../HotReload/HotReloadPreviewButton';\n\ntype Props = {|\n  onCancel: () => void,\n  onApply: () => void,\n  open: boolean,\n  onEditObjectVariables?: () => void,\n  title: React.Node,\n  emptyExplanationMessage?: React.Node,\n  emptyExplanationSecondMessage?: React.Node,\n  variablesContainer: gdVariablesContainer,\n  hotReloadPreviewButtonProps?: ?HotReloadPreviewButtonProps,\n  onComputeAllVariableNames: () => Array<string>,\n  helpPagePath: ?string,\n|};\n\nconst VariablesEditorDialog = ({\n  onCancel,\n  onApply,\n  open,\n  onEditObjectVariables,\n  title,\n  emptyExplanationMessage,\n  emptyExplanationSecondMessage,\n  variablesContainer,\n  hotReloadPreviewButtonProps,\n  onComputeAllVariableNames,\n  helpPagePath,\n}: Props) => {\n  const forceUpdate = useForceUpdate();\n  const onCancelChanges = useSerializableObjectCancelableEditor({\n    serializableObject: variablesContainer,\n    onCancel,\n  });\n\n  return (\n    <Dialog\n      onApply={onApply}\n      noMargin\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          onClick={onCancelChanges}\n          key={'Cancel'}\n        />,\n        <FlatButton\n          label={<Trans>Apply</Trans>}\n          primary\n          keyboardFocused\n          onClick={onApply}\n          key={'Apply'}\n        />,\n      ]}\n      open={open}\n      cannotBeDismissed={true}\n      onRequestClose={onCancelChanges}\n      secondaryActions={[\n        onEditObjectVariables ? (\n          <FlatButton\n            key=\"edit-object-variables\"\n            label={<Trans>Edit Object Variables</Trans>}\n            primary={false}\n            onClick={onEditObjectVariables}\n          />\n        ) : null,\n        hotReloadPreviewButtonProps ? (\n          <HotReloadPreviewButton\n            key=\"hot-reload-preview-button\"\n            {...hotReloadPreviewButtonProps}\n          />\n        ) : null,\n      ]}\n      title={title}\n      flexBody\n      fullHeight\n    >\n      <VariablesList\n        commitVariableValueOnBlur={\n          // Reduce the number of re-renders by saving the variable value only when the field is blurred.\n          // We don't do that by default because the VariablesList can be used in a component like\n          // InstancePropertiesEditor, that can be unmounted at any time, before the text fields get a\n          // chance to be blurred.\n          true\n        }\n        variablesContainer={variablesContainer}\n        emptyExplanationMessage={emptyExplanationMessage}\n        emptyExplanationSecondMessage={emptyExplanationSecondMessage}\n        onSizeUpdated={\n          forceUpdate /*Force update to ensure dialog is properly positioned*/\n        }\n        onComputeAllVariableNames={onComputeAllVariableNames}\n        helpPagePath={helpPagePath}\n      />\n    </Dialog>\n  );\n};\n\nexport default VariablesEditorDialog;\n","// @flow\nimport * as React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\n\ntype Props = {|\n  label?: ?React.Node,\n  checked: boolean,\n  onCheck?: (e: {||}, checked: boolean) => void,\n  checkedIcon?: React.Node,\n  uncheckedIcon?: React.Node,\n  disabled?: boolean,\n|};\n\n/**\n * A checkbox based on Material-UI Checkbox, but that can be displayed\n * without having it taking the full width of its container.\n */\nexport default (props: Props) => {\n  const { onCheck } = props;\n  const checkbox = (\n    <Checkbox\n      disabled={props.disabled}\n      checked={props.checked}\n      onChange={\n        onCheck ? event => onCheck(event, event.target.checked) : undefined\n      }\n      icon={props.uncheckedIcon}\n      checkedIcon={props.checkedIcon}\n      color=\"primary\"\n    />\n  );\n  return props.label ? (\n    <FormControlLabel control={checkbox} label={props.label} />\n  ) : (\n    checkbox\n  );\n};\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport { type Schema, type Instance } from '.';\nimport { type ResourceKind } from '../ResourcesList/ResourceSource';\n\n/**\n * Transform a MapStringPropertyDescriptor to a schema that can be used in PropertiesEditor.\n *\n * @param {gdMapStringPropertyDescriptor} properties The properties to use\n * @param {*} getProperties The function called to read again the properties\n * @param {*} onUpdateProperty The function called to update a property of an object\n */\nexport default (\n  properties: gdMapStringPropertyDescriptor,\n  getProperties: (instance: Instance) => any,\n  onUpdateProperty: (\n    instance: Instance,\n    propertyName: string,\n    newValue: string\n  ) => void,\n  object: ?gdObject\n): Schema => {\n  const propertyNames = properties.keys();\n  const propertyFields = mapFor(0, propertyNames.size(), i => {\n    const name = propertyNames.at(i);\n    const property = properties.get(name);\n    const propertyDescription = property.getDescription();\n    const valueType = property.getType().toLowerCase();\n    const getLabel = (instance: Instance) => {\n      const propertyName = getProperties(instance)\n        .get(name)\n        .getLabel();\n      if (propertyName) return propertyName;\n      return (\n        name.charAt(0).toUpperCase() +\n        name\n          .slice(1)\n          .split(/(?=[A-Z])/)\n          .join(' ')\n      );\n    };\n    const getDescription = () => propertyDescription;\n\n    if (property.isHidden()) return null;\n\n    if (valueType === 'number') {\n      return {\n        name,\n        valueType,\n        getValue: (instance: Instance): number => {\n          return (\n            parseFloat(\n              getProperties(instance)\n                .get(name)\n                .getValue()\n            ) || 0\n          ); // Consider a missing value as 0 to avoid propagating NaN.\n        },\n        setValue: (instance: Instance, newValue: number) => {\n          onUpdateProperty(instance, name, '' + newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'string' || valueType === '') {\n      return {\n        name,\n        valueType: 'string',\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'boolean') {\n      return {\n        name,\n        valueType,\n        getValue: (instance: Instance): boolean => {\n          return (\n            getProperties(instance)\n              .get(name)\n              .getValue() === 'true'\n          );\n        },\n        setValue: (instance: Instance, newValue: boolean) => {\n          onUpdateProperty(instance, name, newValue ? '1' : '0');\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'choice') {\n      // Choice is a \"string\" (with a selector for the user in the UI)\n      const choices = property\n        .getExtraInfo()\n        .toJSArray()\n        .map(value => ({ value, label: value }));\n      return {\n        name,\n        valueType: 'string',\n        getChoices: () => choices,\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'behavior') {\n      const behaviorType =\n        property.getExtraInfo().size() > 0 ? property.getExtraInfo().at(0) : '';\n      return {\n        name,\n        valueType: 'string',\n        getChoices: () => {\n          return !object || behaviorType === ''\n            ? []\n            : object\n                .getAllBehaviorNames()\n                .toJSArray()\n                .map(name =>\n                  object.getBehavior(name).getTypeName() === behaviorType\n                    ? name\n                    : null\n                )\n                .filter(Boolean)\n                .map(value => ({ value, label: value }));\n        },\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'resource') {\n      // Resource is a \"string\" (with a selector in the UI)\n      // $FlowFixMe - assume the passed resource kind is always valid.\n      const kind: ResourceKind = property.getExtraInfo().toJSArray()[0] || '';\n      return {\n        name,\n        valueType: 'resource',\n        resourceKind: kind,\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'color') {\n      return {\n        name,\n        valueType: 'color',\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else if (valueType === 'textarea') {\n      return {\n        name,\n        valueType: 'textarea',\n        getValue: (instance: Instance): string => {\n          return getProperties(instance)\n            .get(name)\n            .getValue();\n        },\n        setValue: (instance: Instance, newValue: string) => {\n          onUpdateProperty(instance, name, newValue);\n        },\n        getLabel,\n        getDescription,\n      };\n    } else {\n      console.error(\n        `A property with type=${valueType} could not be mapped to a field. Ensure that this type is correct and understood by the IDE.`\n      );\n      return null;\n    }\n  }).filter(Boolean);\n\n  return propertyFields;\n};\n","// @flow\nimport * as React from 'react';\nimport GDevelopThemeContext from '../UI/Theme/ThemeContext';\n\ntype Props = {|\n  style?: Object,\n|};\n\n/**\n * Adds a checkered background to the container element.\n * This component is made to be used as background for sprite editors\n * and previews. Example usage:\n * ```\n * <ContainerElement>\n *   <CheckeredBackground />\n *   <SpriteResource />\n *   (... and any overlays ...)\n * </ContainerElement>\n * ```\n *\n * If while using this, the background overflows out of the parent element\n * (or it just doesn't work as expected), ensure that the parent element and\n * at least one of the sibling elements have `position: relative` set.\n */\nconst CheckeredBackground = (props: Props) => {\n  const theme = React.useContext(GDevelopThemeContext);\n  const backgroundStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n\n    // Apply a theme-defined CSS filter on static checkered background\n    background: 'url(\"res/transparentback.png\") repeat',\n    filter: theme.imagePreview.backgroundFilter || 'none',\n\n    ...props.style,\n  };\n\n  return <div style={backgroundStyle} />;\n};\n\nexport default CheckeredBackground;\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\n\ntype Props = {|\n  children: React.Node,\n|};\n\nexport default (props: Props) => {\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0,0,0,0.5)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n    >\n      <Paper\n        elevation={3}\n        style={{\n          padding: 10,\n          margin: 5,\n        }}\n      >\n        {props.children}\n      </Paper>\n    </div>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  type EventsFunctionsExtensionWriter,\n  type EventsFunctionsExtensionOpener,\n} from './Storage';\n\nexport type EventsFunctionsExtensionsState = {|\n  eventsFunctionsExtensionsError: ?Error,\n  loadProjectEventsFunctionsExtensions: (project: ?gdProject) => Promise<void>,\n  unloadProjectEventsFunctionsExtensions: (project: gdProject) => void,\n  unloadProjectEventsFunctionsExtension: (\n    project: gdProject,\n    extensionName: string\n  ) => void,\n  reloadProjectEventsFunctionsExtensions: (\n    project: ?gdProject\n  ) => Promise<void>,\n  getEventsFunctionsExtensionWriter: () => ?EventsFunctionsExtensionWriter,\n  getEventsFunctionsExtensionOpener: () => ?EventsFunctionsExtensionOpener,\n  ensureLoadFinished: () => Promise<void>,\n  getIncludeFileHashs: () => { [string]: number },\n|};\n\nconst defaultState = {\n  eventsFunctionsExtensionsError: null,\n  loadProjectEventsFunctionsExtensions: () =>\n    Promise.reject(new Error('Use a provider')),\n  unloadProjectEventsFunctionsExtensions: () => {},\n  reloadProjectEventsFunctionsExtensions: () =>\n    Promise.reject(new Error('Use a provider')),\n  unloadProjectEventsFunctionsExtension: () => {},\n  getEventsFunctionsExtensionWriter: () => null,\n  getEventsFunctionsExtensionOpener: () => null,\n  ensureLoadFinished: () => Promise.reject(new Error('Use a provider')),\n  getIncludeFileHashs: () => ({}),\n};\n\nconst EventsFunctionsExtensionsContext = React.createContext<EventsFunctionsExtensionsState>(\n  defaultState\n);\n\nexport default EventsFunctionsExtensionsContext;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Button from '@material-ui/core/Button';\nimport PreferencesContext, {\n  type AlertMessageIdentifier,\n} from '../../MainFrame/Preferences/PreferencesContext';\nimport { ScreenTypeMeasurer } from '../Reponsive/ScreenTypeMeasurer';\n\ntype Props = {|\n  identifier: AlertMessageIdentifier,\n  message: React.Node,\n  touchScreenMessage?: React.Node,\n  show: boolean,\n|};\n\nexport default class InfoBar extends React.PureComponent<Props> {\n  render() {\n    const { identifier } = this.props;\n\n    return (\n      <ScreenTypeMeasurer>\n        {screenType => (\n          <PreferencesContext.Consumer>\n            {({ values, showAlertMessage }) => (\n              <Snackbar\n                open={\n                  this.props.show && !values.hiddenAlertMessages[identifier]\n                }\n                message={\n                  screenType === 'touch' && this.props.touchScreenMessage\n                    ? this.props.touchScreenMessage\n                    : this.props.message\n                }\n                action={\n                  <Button\n                    key=\"undo\"\n                    color=\"primary\"\n                    size=\"small\"\n                    onClick={() => {\n                      showAlertMessage(identifier, false);\n                    }}\n                  >\n                    <Trans>Got it</Trans>\n                  </Button>\n                }\n              />\n            )}\n          </PreferencesContext.Consumer>\n        )}\n      </ScreenTypeMeasurer>\n    );\n  }\n}\n","// @flow\nimport axios from 'axios';\nimport { GDevelopAssetApi } from './ApiConfigs';\nimport { type Filters } from './Filters';\nimport { type UserPublicProfileSearch } from './User';\n\nexport type ExampleShortHeader = {|\n  id: string,\n  name: string,\n  shortDescription: string,\n  license: string,\n  tags: Array<string>,\n  authors?: Array<UserPublicProfileSearch>,\n  authorIds?: Array<UserPublicProfileSearch>,\n  previewImageUrls: Array<string>,\n  gdevelopVersion: string,\n|};\n\nexport type Example = {|\n  ...ExampleShortHeader,\n  description: string,\n  projectFileUrl: string,\n  authors: Array<string>,\n|};\n\nexport type AllExamples = {|\n  exampleShortHeaders: Array<ExampleShortHeader>,\n  filters: Filters,\n|};\n\nexport const listAllExamples = async (): Promise<AllExamples> => {\n  const response = await axios.get(\n    `${GDevelopAssetApi.baseUrl}/example-short-header-and-filter`\n  );\n\n  return response.data;\n};\n\nexport const getExample = async (\n  exampleShortHeader: ExampleShortHeader\n): Promise<Example> => {\n  const response = await axios.get(\n    `${GDevelopAssetApi.baseUrl}/example-v2/${exampleShortHeader.id}`\n  );\n\n  return response.data;\n};\n\nexport const getUserExampleShortHeaders = async (\n  authorId: string\n): Promise<Array<ExampleShortHeader>> => {\n  const response = await axios.get(\n    `${GDevelopAssetApi.baseUrl}/example-short-header`,\n    {\n      params: {\n        authorId,\n      },\n    }\n  );\n\n  return response.data;\n};\n","// @flow\nimport * as React from 'react';\nimport Instruction, { reactDndInstructionType } from './Instruction';\nimport { mapFor } from '../../Utils/MapFor';\nimport {\n  isInstructionSelected,\n  type InstructionsListContext,\n  type InstructionContext,\n  type ParameterContext,\n} from '../SelectionHandler';\nimport DropIndicator from './DropIndicator';\nimport { Trans } from '@lingui/macro';\nimport { hasClipboardConditions, hasClipboardActions } from '../ClipboardKind';\nimport { makeDropTarget } from '../../UI/DragAndDrop/DropTarget';\nimport { type ScreenType } from '../../UI/Reponsive/ScreenTypeMeasurer';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { useLongTouch } from '../../Utils/UseLongTouch';\n\nconst styles = {\n  addButton: {\n    cursor: 'pointer',\n  },\n};\n\ntype Props = {\n  instrsList: gdInstructionsList,\n  areConditions: boolean,\n  onAddNewInstruction: InstructionsListContext => void,\n  onPasteInstructions: InstructionsListContext => void,\n  onMoveToInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onInstructionClick: InstructionContext => void,\n  onInstructionDoubleClick: InstructionContext => void,\n  onInstructionContextMenu: (x: number, y: number, InstructionContext) => void,\n  onAddInstructionContextMenu: (\n    HTMLButtonElement,\n    InstructionsListContext\n  ) => void,\n  onParameterClick: ParameterContext => void,\n  selection: any,\n  addButtonLabel?: React.Node,\n  className?: string,\n  style?: Object,\n  disabled: boolean,\n  renderObjectThumbnail: string => React.Node,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n};\n\nconst DropTarget = makeDropTarget<{\n  isCondition: boolean,\n}>(reactDndInstructionType);\n\nexport default function InstructionsList({\n  addButtonLabel,\n  areConditions,\n  className,\n  instrsList,\n  onAddNewInstruction,\n  onPasteInstructions,\n  onMoveToInstruction,\n  onMoveToInstructionsList,\n  onInstructionClick,\n  onInstructionContextMenu,\n  onInstructionDoubleClick,\n  onAddInstructionContextMenu,\n  onParameterClick,\n  selection,\n  style,\n  disabled,\n  renderObjectThumbnail,\n  screenType,\n  windowWidth,\n}: Props) {\n  const [canPaste, setCanPaste] = React.useState(false);\n\n  const addNewInstruction = React.useCallback(\n    () => {\n      if (onAddNewInstruction)\n        onAddNewInstruction({\n          instrsList,\n          isCondition: areConditions,\n        });\n    },\n    [onAddNewInstruction, instrsList, areConditions]\n  );\n\n  const pasteInstructions = React.useCallback(\n    () => {\n      onPasteInstructions({\n        instrsList,\n        isCondition: areConditions,\n      });\n    },\n    [onPasteInstructions, instrsList, areConditions]\n  );\n\n  const instructions = mapFor(0, instrsList.size(), i => {\n    const instruction = instrsList.get(i);\n    const instructionContext = {\n      isCondition: areConditions,\n      instrsList: instrsList,\n      instruction,\n      indexInList: i,\n    };\n\n    return (\n      <Instruction\n        instruction={instruction}\n        isCondition={areConditions}\n        key={instruction.ptr}\n        selected={isInstructionSelected(selection, instruction)}\n        onMoveToInstruction={() => onMoveToInstruction(instructionContext)}\n        onClick={() => onInstructionClick(instructionContext)}\n        onDoubleClick={() => onInstructionDoubleClick(instructionContext)}\n        onContextMenu={(x, y) =>\n          onInstructionContextMenu(x, y, instructionContext)\n        }\n        onParameterClick={(domEvent, parameterIndex) =>\n          onParameterClick({\n            isCondition: instructionContext.isCondition,\n            instrsList: instructionContext.instrsList,\n            instruction: instructionContext.instruction,\n            indexInList: instructionContext.indexInList,\n            parameterIndex,\n            domEvent,\n          })\n        }\n        selection={selection}\n        onAddNewSubInstruction={onAddNewInstruction}\n        onPasteSubInstructions={onPasteInstructions}\n        onMoveToSubInstruction={onMoveToInstruction}\n        onMoveToSubInstructionsList={onMoveToInstructionsList}\n        onSubInstructionClick={onInstructionClick}\n        onSubInstructionDoubleClick={onInstructionDoubleClick}\n        onSubInstructionContextMenu={onInstructionContextMenu}\n        onAddSubInstructionContextMenu={onAddInstructionContextMenu}\n        onSubParameterClick={onParameterClick}\n        disabled={disabled}\n        renderObjectThumbnail={renderObjectThumbnail}\n        screenType={screenType}\n        windowWidth={windowWidth}\n      />\n    );\n  });\n\n  const instructionsListContext = {\n    instrsList,\n    isCondition: areConditions,\n  };\n\n  const addButton = React.useRef<?HTMLButtonElement>(null);\n  const addButtonDefaultLabel = areConditions ? (\n    <Trans>Add condition</Trans>\n  ) : (\n    <Trans>Add action</Trans>\n  );\n  const longTouchForContextMenuProps = useLongTouch(\n    React.useCallback(\n      event => {\n        addButton.current &&\n          onAddInstructionContextMenu(\n            addButton.current,\n            instructionsListContext\n          );\n      },\n      [onAddInstructionContextMenu, instructionsListContext, addButton]\n    )\n  );\n\n  return (\n    <DropTarget\n      canDrop={draggedItem => draggedItem.isCondition === areConditions}\n      drop={() => {\n        onMoveToInstructionsList({\n          isCondition: areConditions,\n          instrsList: instrsList,\n        });\n      }}\n    >\n      {({ connectDropTarget, isOver, canDrop }) =>\n        connectDropTarget(\n          <div className={className} style={style}>\n            {instructions}\n            {isOver && <DropIndicator canDrop={canDrop} />}\n            <span\n              onPointerEnter={() => {\n                setCanPaste(\n                  (areConditions && hasClipboardConditions()) ||\n                    (!areConditions && hasClipboardActions())\n                );\n              }}\n              onPointerLeave={() => {\n                setCanPaste(false);\n              }}\n            >\n              <button\n                style={styles.addButton}\n                className=\"add-link\"\n                onClick={addNewInstruction}\n                onContextMenu={e => {\n                  e.stopPropagation();\n                  onAddInstructionContextMenu(\n                    e.currentTarget,\n                    instructionsListContext\n                  );\n                }}\n                {...longTouchForContextMenuProps}\n                ref={addButton}\n              >\n                {addButtonLabel || addButtonDefaultLabel}\n              </button>\n              {canPaste && (\n                <span>\n                  <button\n                    style={styles.addButton}\n                    className=\"add-link\"\n                    onClick={pasteInstructions}\n                  >\n                    {areConditions ? (\n                      <Trans>(or paste conditions)</Trans>\n                    ) : (\n                      <Trans>(or paste actions)</Trans>\n                    )}\n                  </button>\n                </span>\n              )}\n            </span>\n          </div>\n        )\n      }\n    </DropTarget>\n  );\n}\n","// @flow\n\n// Helpers to manipulate tags. See also EditTagsDialog.js\n\nexport type Tags = Array<string>;\nexport type SelectedTags = Tags;\n\nexport const removeTag = (tags: Tags, tag: string): Tags => {\n  return tags.filter(selectedTag => selectedTag !== tag);\n};\n\nexport const addTags = (tags: Tags, newTags: Tags): Tags => {\n  return Array.from(new Set([...tags, ...newTags]));\n};\n\nexport type BuildTagsMenuTemplateOptions = {|\n  noTagLabel: string,\n  getAllTags: () => Array<string>,\n  selectedTags: SelectedTags,\n  onChange: SelectedTags => void,\n  onEditTags?: () => void,\n  editTagsLabel?: string,\n|};\n\nexport const buildTagsMenuTemplate = ({\n  noTagLabel,\n  getAllTags,\n  selectedTags,\n  onChange,\n  onEditTags,\n  editTagsLabel,\n}: BuildTagsMenuTemplateOptions): Array<any> => {\n  const allTags = getAllTags();\n  const footerMenuItems =\n    onEditTags && editTagsLabel\n      ? [\n          {\n            type: 'separator',\n          },\n          {\n            label: editTagsLabel,\n            click: onEditTags,\n          },\n        ]\n      : [];\n\n  if (!allTags.length) {\n    return [\n      {\n        label: noTagLabel,\n        enabled: false,\n      },\n      ...footerMenuItems,\n    ];\n  }\n\n  return allTags\n    .map(tag => ({\n      type: 'checkbox',\n      label: tag,\n      checked: selectedTags.includes(tag),\n      click: () => {\n        if (selectedTags.includes(tag)) {\n          onChange(removeTag(selectedTags, tag));\n        } else {\n          onChange(addTags(selectedTags, [tag]));\n        }\n      },\n    }))\n    .concat(footerMenuItems);\n};\n\nexport const getTagsFromString = (tagsString: string): Tags => {\n  if (tagsString.trim() === '') return [];\n\n  return tagsString.split(',').map(tag => tag.trim());\n};\n\nexport const getStringFromTags = (tags: Tags): string => {\n  return tags.join(', ');\n};\n\nexport const hasStringAllTags = (tagsString: string, tags: Tags) => {\n  for (const tag of tags) {\n    if (tagsString.indexOf(tag) === -1) return false;\n  }\n\n  return true;\n};\n","// @flow\nimport type {\n  GroupWithContext,\n  ObjectWithContext,\n} from '../../../ObjectsList/EnumerateObjects';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\n\n// ListItem created must have consistent keys that include their type\n// (object, group, instruction) to allow them to be living\n// in the same list (in search results) and be selected.\n\nexport const getObjectGroupListItemKey = (groupWithContext: GroupWithContext) =>\n  `object-group-key-${groupWithContext.group.getName()}-${\n    groupWithContext.global ? '-global' : ''\n  }`;\nexport const getObjectListItemKey = (objectWithContext: ObjectWithContext) =>\n  `object-key-${objectWithContext.object.getName()}-${\n    objectWithContext.global ? '-global' : ''\n  }`;\nexport const getObjectOrObjectGroupListItemValue = (\n  objectOrObjectGroupName: string\n) => `object-or-object-group-value-${objectOrObjectGroupName}`;\n\nexport const getInstructionListItemKey = (\n  instruction: EnumeratedInstructionOrExpressionMetadata\n) => `instruction-key-${instruction.fullGroupName}-${instruction.type}`;\nexport const getInstructionListItemValue = (instructionType: string) =>\n  `instruction-value-${instructionType}`;\n\nexport const getSubheaderListItemKey = (subheader: string) =>\n  `subheader-key-${subheader}`;\n","// @flow\nimport * as React from 'react';\nimport Popper from '@material-ui/core/Popper';\nimport Background from '../UI/Background';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { Column, Line } from '../UI/Grid';\nimport {\n  shouldCloseOrCancel,\n  shouldFocusNextField,\n  shouldFocusPreviousField,\n  shouldSubmit,\n} from '../UI/KeyboardShortcuts/InteractionKeys';\n\nconst styles = {\n  popover: {\n    paddingBottom: 10,\n    overflowY: 'auto',\n\n    // Never show a horizontal scrollbar\n    overflowX: 'hidden',\n\n    // Restrict size in case of extra small or large popover (though this should not happen)\n    minHeight: 30,\n    maxHeight: 400,\n    maxWidth: 600,\n    minWidth: 300, // Avoid extra small popover for some parameters like relational operator\n\n    // When displayed in an events sheet that has Mosaic windows (see `EditorMosaic`) next to it,\n    // it could be displayed behind them, because they have a z-index of 1, and 4 for the window titles :/\n    // use a z-index of 5 then. Only one InlinePopover should be shown at a time anyway.\n    zIndex: 5,\n  },\n};\n\ntype Props = {|\n  children: React.Node,\n  anchorEl: ?HTMLElement,\n  open: boolean,\n  onRequestClose: () => void,\n  onApply: () => void,\n|};\n\n/**\n * A popover that can be used to show the field to edit a parameter, without\n * opening the full instruction editor.\n * Works like a dialog when opened (trapping the focus, dismissed on Escape,\n * dismissed on click/touch outside) but positioned under the edited parameter.\n */\nexport default function InlinePopover(props: Props) {\n  const startSentinel = React.useRef<?HTMLDivElement>(null);\n  const endSentinel = React.useRef<?HTMLDivElement>(null);\n\n  return (\n    <ClickAwayListener\n      onClickAway={event => {\n        // For a popover, clicking/touching away means validating,\n        // as it's very easy to do it and almost the only way to do it on a touch screen.\n        // The user can cancel with Escape.\n\n        if (event instanceof MouseEvent) {\n          // onClickAway is triggered on a \"click\" (which can actually happen\n          // on a touchscreen too!).\n          // The click already gave the opportunity to the popover content to\n          // get blurred (allowing \"semi controlled\" text fields\n          // to apply their changes). We can close now.\n          props.onApply();\n        } else {\n          // Give a bit of time to the popover content to be blurred\n          // (useful for the \"semi controlled\" text fields for example)\n          // for touch events.\n          //\n          // This timeout needs to be at least around 50ms, otherwise\n          // blur events for GenericExpressionField are not triggered on iOS.\n          // There might be a better way to do this without waiting this much time.\n          setTimeout(() => {\n            props.onApply();\n          }, 50);\n        }\n      }}\n    >\n      <Popper\n        open={props.open}\n        anchorEl={props.anchorEl}\n        style={styles.popover}\n        placement=\"bottom-start\"\n        onKeyDown={event => {\n          // Much like a dialog, offer a way to close the popover\n          // with a key.\n          // Note that the content of the popover can capture the event\n          // and stop its propagation (for example, the GenericExpressionField\n          // when showing autocompletion), which is fine.\n          if (shouldCloseOrCancel(event)) {\n            props.onRequestClose();\n          } else if (shouldSubmit(event)) {\n            props.onApply();\n          }\n\n          // Also like a dialog, add a \"focus trap\". If the user keeps pressing tab\n          // (or shift+tab), we \"loop\" the focus so that it stays inside the popover.\n          // Otherwise, the focus would espace and could go in some unrelated element\n          // in the events sheet, triggering a scroll, which would be very disturbing\n          // and would break the keyboard navigation.\n          if (shouldFocusNextField(event)) {\n            if (event.target && event.target === endSentinel.current) {\n              event.stopPropagation();\n              event.preventDefault();\n              if (startSentinel.current) {\n                startSentinel.current.focus();\n              }\n            }\n          } else if (shouldFocusPreviousField(event)) {\n            if (event.target && event.target === startSentinel.current) {\n              event.stopPropagation();\n              event.preventDefault();\n              if (endSentinel.current) {\n                endSentinel.current.focus();\n              }\n            }\n          }\n        }}\n      >\n        <Background>\n          <div tabIndex={0} ref={startSentinel} />\n          <Column expand>\n            <Line>{props.children}</Line>\n          </Column>\n          <div tabIndex={0} ref={endSentinel} />\n        </Background>\n      </Popper>\n    </ClickAwayListener>\n  );\n}\n","// @flow\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport {\n  MosaicWindow as RMMosaicWindow,\n  MosaicWithoutDragDropContext,\n  getLeaves,\n} from 'react-mosaic-component';\nimport CloseButton from './CloseButton';\nimport ThemeConsumer from '../Theme/ThemeConsumer';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport debounce from 'lodash/debounce';\n\n// EditorMosaic default styling:\nimport 'react-mosaic-component/react-mosaic-component.css';\nimport './style.css';\n\nexport type Editor = {|\n  type: 'primary' | 'secondary',\n  renderEditor: () => React.Node,\n  noTitleBar?: boolean,\n  title?: MessageDescriptor,\n  toolbarControls?: Array<React.Node>,\n|};\n\nexport type EditorMosaicNode =\n  | {|\n      direction: 'row' | 'column',\n      splitPercentage: number,\n      first: ?EditorMosaicNode,\n      second: ?EditorMosaicNode,\n    |}\n  | string;\n\n// Add a node (an editor) in the mosaic.\nconst addNode = (\n  currentNode: ?EditorMosaicNode,\n  newNode: EditorMosaicNode | string,\n  position: 'start' | 'end',\n  splitPercentage: number,\n  direction: 'row' | 'column'\n): EditorMosaicNode => {\n  if (!currentNode) return newNode;\n\n  // Add the new node inside the current node...\n  if (typeof currentNode !== 'string') {\n    if (\n      position === 'end' &&\n      currentNode.second &&\n      typeof currentNode.second !== 'string'\n    ) {\n      return {\n        ...currentNode,\n        second: addNode(\n          currentNode.second,\n          newNode,\n          position,\n          splitPercentage,\n          direction\n        ),\n      };\n    } else if (\n      position === 'start' &&\n      currentNode.first &&\n      typeof currentNode.first !== 'string'\n    ) {\n      return {\n        ...currentNode,\n        first: addNode(\n          currentNode.first,\n          newNode,\n          position,\n          splitPercentage,\n          direction\n        ),\n      };\n    }\n  }\n\n  // Or add the node here.\n  return {\n    direction:\n      direction === 'row'\n        ? // Direction of split is the opposite of what is requested for the editor\n          'column'\n        : 'row',\n    first: position === 'end' ? currentNode : newNode,\n    second: position === 'end' ? newNode : currentNode,\n    splitPercentage,\n  };\n};\n\n// Replace a node (an editor) by another.\nconst replaceNode = (\n  currentNode: ?EditorMosaicNode,\n  oldNode: ?EditorMosaicNode,\n  newNode: ?EditorMosaicNode\n): ?EditorMosaicNode => {\n  if (!currentNode) {\n    return currentNode;\n  } else if (typeof currentNode === 'string') {\n    if (currentNode === oldNode) return newNode;\n\n    return currentNode;\n  } else {\n    if (currentNode === oldNode) return newNode;\n\n    return {\n      ...currentNode,\n      first: replaceNode(currentNode.first, oldNode, newNode),\n      second: replaceNode(currentNode.second, oldNode, newNode),\n    };\n  }\n};\n\nconst defaultToolbarControls = [<CloseButton key=\"close\" />];\n\nconst renderMosaicWindowPreview = props => (\n  <div className=\"mosaic-preview\">\n    <div className=\"mosaic-window-toolbar\">\n      <div className=\"mosaic-window-title\">{props.title}</div>\n    </div>\n    <div className=\"mosaic-window-body\" />\n  </div>\n);\n\n/**\n * A window that can be used in a EditorMosaic, with a close button\n * by default in the toolbarControls and a preview when the window is\n * dragged.\n */\nconst MosaicWindow = (props: any) => (\n  <RMMosaicWindow\n    {...props}\n    toolbarControls={props.toolbarControls || defaultToolbarControls}\n    renderPreview={renderMosaicWindowPreview}\n  />\n);\n\ntype Props = {|\n  initialNodes: EditorMosaicNode,\n  editors: {\n    [string]: Editor,\n  },\n  limitToOneSecondaryEditor?: boolean,\n  onPersistNodes?: EditorMosaicNode => void,\n|};\n\ntype State = {|\n  mosaicNode: ?EditorMosaicNode,\n|};\n\n/**\n * @class EditorMosaic\n *\n * Can be used to create a mosaic of resizable editors.\n * Must be used inside a component wrapped in a DragDropContext.\n */\nexport default class EditorMosaic extends React.Component<Props, State> {\n  state = {\n    mosaicNode: this.props.initialNodes,\n  };\n\n  openEditor = (\n    editorName: string,\n    position: 'start' | 'end',\n    splitPercentage: number,\n    direction: 'row' | 'column'\n  ) => {\n    const { editors, limitToOneSecondaryEditor } = this.props;\n\n    const editor = this.props.editors[editorName];\n    if (!editor) return false;\n\n    const openedEditorNames = getLeaves(this.state.mosaicNode);\n    if (openedEditorNames.indexOf(editorName) !== -1) {\n      return false;\n    }\n\n    if (limitToOneSecondaryEditor && editor.type === 'secondary') {\n      // Replace the existing secondary editor, if any.\n      const secondaryEditorName = openedEditorNames.find(\n        editorName => editors[editorName].type === 'secondary'\n      );\n      if (secondaryEditorName) {\n        this.setState({\n          mosaicNode: replaceNode(\n            this.state.mosaicNode,\n            secondaryEditorName,\n            editorName\n          ),\n        });\n\n        this._persistNodes();\n        return true;\n      }\n    }\n\n    // Open a new editor at the indicated position\n    this.setState({\n      mosaicNode: addNode(\n        this.state.mosaicNode,\n        editorName,\n        position,\n        splitPercentage,\n        direction\n      ),\n    });\n\n    this._persistNodes();\n    return true;\n  };\n\n  _onChange = (mosaicNode: EditorMosaicNode) => {\n    this.setState({ mosaicNode });\n    this._persistNodes();\n  };\n\n  _persistNodes = debounce(() => {\n    if (this.props.onPersistNodes && this.state.mosaicNode) {\n      this.props.onPersistNodes(this.state.mosaicNode);\n    }\n  }, 2000);\n\n  render() {\n    const { editors } = this.props;\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <MosaicWithoutDragDropContext\n            className={`${\n              muiTheme.mosaicRootClassName\n            } mosaic-blueprint-theme mosaic-gd-theme`}\n            renderTile={(editorName: string, path: string) => {\n              const editor = editors[editorName];\n              if (!editor) {\n                console.error(\n                  'Trying to render un unknown editor: ' + editorName\n                );\n                return null;\n              }\n\n              if (editor.noTitleBar) {\n                return editor.renderEditor();\n              }\n\n              return (\n                <I18n>\n                  {({ i18n }) => (\n                    <MosaicWindow\n                      path={path}\n                      title={i18n._(editor.title)}\n                      toolbarControls={editor.toolbarControls}\n                    >\n                      {editor.renderEditor()}\n                    </MosaicWindow>\n                  )}\n                </I18n>\n              );\n            }}\n            value={this.state.mosaicNode}\n            onChange={this._onChange}\n          />\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","// @flow\nexport default class Rectangle {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n\n  constructor(\n    left: number = 0,\n    top: number = 0,\n    right: number = 0,\n    bottom: number = 0\n  ) {\n    this.left = left;\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n  }\n\n  set(left: number, top: number, right: number, bottom: number) {\n    this.left = left;\n    this.top = top;\n    this.right = right;\n    this.bottom = bottom;\n  }\n\n  setRectangle(rectangle: Rectangle) {\n    this.left = rectangle.left;\n    this.top = rectangle.top;\n    this.right = rectangle.right;\n    this.bottom = rectangle.bottom;\n  }\n\n  width() {\n    return this.right - this.left;\n  }\n\n  height() {\n    return this.bottom - this.top;\n  }\n\n  centerX() {\n    return (this.left + this.right) / 2;\n  }\n\n  centerY() {\n    return (this.top + this.bottom) / 2;\n  }\n\n  union(rectangle: Rectangle) {\n    if (rectangle.left < this.left) {\n      this.left = rectangle.left;\n    }\n    if (rectangle.top < this.top) {\n      this.top = rectangle.top;\n    }\n    if (rectangle.right > this.right) {\n      this.right = rectangle.right;\n    }\n    if (rectangle.bottom > this.bottom) {\n      this.bottom = rectangle.bottom;\n    }\n  }\n\n  toString() {\n    return (\n      '[' +\n      this.left +\n      ' -> ' +\n      this.right +\n      ' ; ' +\n      this.top +\n      ' -> ' +\n      this.bottom +\n      ']'\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\n\ntype ToolbarProps = {|\n  children: React.Node,\n|};\n\ntype ToolbarGroupProps = {|\n  children?: React.Node,\n  firstChild?: true, // Not used, but could be useful one day for styling\n  lastChild?: true, // Not used, but could be useful one day for styling\n|};\n\nexport const Toolbar = React.memo<ToolbarProps>(\n  ({ children }: ToolbarProps) => (\n    <ThemeConsumer>\n      {muiTheme => (\n        <div\n          style={{\n            backgroundColor: muiTheme.toolbar.backgroundColor,\n            padding: 3,\n            flexShrink: 0,\n            display: 'flex',\n            justifyContent: 'space-between',\n            overflowX: 'auto',\n            overflowY: 'hidden',\n          }}\n        >\n          {children}\n        </div>\n      )}\n    </ThemeConsumer>\n  )\n);\n\nconst toolbarGroupStyle = {\n  display: 'flex',\n  alignItems: 'center',\n};\n\nexport const ToolbarGroup = React.memo<ToolbarGroupProps>(\n  ({ children }: ToolbarGroupProps) => (\n    <span style={toolbarGroupStyle}>{children}</span>\n  )\n);\n","// @flow\nimport { darken, lighten } from '@material-ui/core/styles';\n\nexport const closeableTabSizeOverrides = {\n  width: 200,\n  height: 32,\n  closeButtonWidth: 24,\n};\n\nexport function getRootClassNames(theme: string) {\n  return {\n    mosaicRootClassName: theme,\n    eventsSheetRootClassName: theme,\n    tableRootClassName: theme,\n    markdownRootClassName: theme,\n  };\n}\n\nexport function getMuiOverrides(\n  tabTextColor: string,\n  tabBackgroundColor: string,\n  inputBorderBottomColor: string,\n  appBarBackgroundColor: string,\n  iconColor: string\n) {\n  return {\n    MuiTypography: {\n      h6: {\n        // Make h6, used in Drawer title bars, use the same weight as tabs and mosaic windows\n        fontWeight: 400,\n      },\n    },\n    MuiInput: {\n      input: {\n        padding: 0,\n        paddingBottom: 3,\n      },\n      underline: {\n        '&:before': {\n          borderBottom: `1px solid ${inputBorderBottomColor}`,\n        },\n      },\n    },\n    MuiAppBar: {\n      colorPrimary: {\n        backgroundColor: appBarBackgroundColor,\n      },\n    },\n    MuiIconButton: {\n      root: {\n        // Fix color being grey if not set to (almost) black\n        color: iconColor,\n      },\n    },\n    MuiListItemIcon: {\n      root: {\n        // Fix color being grey if not set to (almost) black\n        color: iconColor,\n      },\n    },\n    // Reduce right margins from 16px to 8px in lists:\n    MuiListItem: {\n      secondaryAction: {\n        paddingRight: 40,\n      },\n      gutters: {\n        paddingRight: 8,\n      },\n    },\n    MuiListItemSecondaryAction: {\n      root: {\n        right: 8,\n      },\n    },\n    // Use a more visible color scheme for tabs:\n    MuiTabs: {\n      root: {\n        backgroundColor: tabBackgroundColor,\n        minHeight: 32, // Reduce the height of tabs to 32px\n      },\n    },\n    MuiTab: {\n      textColorPrimary: {\n        color: tabTextColor + ' !important',\n      },\n      root: {\n        // Reduce the height of tabs to 32px\n        paddingTop: 0,\n        paddingBottom: 0,\n        minHeight: 32,\n      },\n    },\n    MuiButtonBase: {\n      // Remove the web-ish \"pointer\" (hand) cursor from buttons\n      root: {\n        cursor: 'default',\n      },\n    },\n    // Reduce default margins on tables:\n    MuiTableCell: {\n      sizeSmall: {\n        paddingTop: 0,\n        paddingBottom: 0,\n      },\n    },\n    // Reduce default margins on Dialogs:\n    MuiDialogTitle: {\n      root: {\n        padding: 8,\n      },\n    },\n    MuiDialogContent: {\n      root: {\n        padding: 8,\n        '&:first-child': {\n          paddingTop: 8,\n        },\n      },\n    },\n    // Remove default margins on form controls (we already use a Grid)\n    MuiFormControl: {\n      marginDense: {\n        marginTop: 0,\n        marginBottom: 0,\n      },\n    },\n    MuiCheckbox: {\n      root: {\n        // Cancel padding around Checkbox\n        marginTop: -9,\n        marginBottom: -9,\n      },\n    },\n    // Use non rounded buttons\n    MuiButton: {\n      root: {\n        borderRadius: 0,\n        fontWeight: 400, // Lower a bit the weight of buttons\n      },\n    },\n    // Make MuiAccordion much more compact than default.\n    // Some (or all) of these styles can be removed on MUIv5,\n    // which introduces `disableGutters` prop for compactness.\n    MuiAccordion: {\n      root: {\n        margin: '5px',\n        '&$expanded': {\n          margin: '5px',\n          '&:first-child': {\n            marginTop: 5,\n          },\n          '&:before': {\n            opacity: 1,\n          },\n        },\n        '&:not(:last-child)': {\n          borderBottom: 0,\n        },\n        '&:before': {\n          display: 'none',\n        },\n      },\n    },\n    MuiAccordionSummary: {\n      root: {\n        '&$expanded': {\n          minHeight: null,\n        },\n      },\n      content: {\n        margin: 0,\n        '&$expanded': {\n          margin: 0,\n        },\n      },\n      expandIcon: {\n        padding: 0,\n      },\n    },\n    MuiAccordionDetails: {\n      root: {\n        padding: 8,\n      },\n    },\n  };\n}\n\nexport function getThemeMode(color: string, contrastText: string) {\n  return {\n    light: lighten(color, 0.05),\n    main: color,\n    dark: darken(color, 0.05),\n    contrastText: contrastText,\n  };\n}\n\nexport function createGdevelopTheme(\n  styles: any,\n  rootClassNameIdentifier: string,\n  paletteType: string,\n  gdevelopIconsCSSFilter: string = ''\n) {\n  return {\n    gdevelopTheme: {\n      palette: {\n        canvasColor: styles['ThemeSurfaceCanvasBackgroundColor'],\n      },\n      message: {\n        warning: styles['ThemeMessageWarningColor'],\n        error: styles['ThemeMessageErrorColor'],\n        valid: styles['ThemeMessageValidColor'],\n      },\n      toolbar: {\n        backgroundColor: styles['ThemeSurfaceWindowBackgroundColor'],\n        separatorColor: styles['ThemeToolbarSeparatorColor'],\n      },\n      closableTabs: {\n        fontFamily: styles['GdevelopFontFamily'],\n        containerBackgroundColor: styles['ThemeSurfaceWindowBackgroundColor'],\n        backgroundColor: styles['ThemeClosableTabsDefaultBackgroundColor'],\n        textColor: styles['ThemeClosableTabsDefaultColor'],\n        selectedBackgroundColor:\n          styles['ThemeClosableTabsSelectedBackgroundColor'],\n        selectedTextColor: styles['ThemeClosableTabsSelectedColor'],\n        ...closeableTabSizeOverrides,\n      },\n      imageThumbnail: {\n        selectedBorderColor: styles['ThemeSelectionBackgroundColor'],\n      },\n      imagePreview: {\n        backgroundFilter: styles['ThemeImagePreviewBackgroundFilter'],\n        borderColor: styles['ThemeImagePreviewBorderColor'],\n        frameBorderColor: styles['ThemeImagePreviewFrameBorderColor'],\n      },\n      list: {\n        itemsBackgroundColor:\n          styles['ThemeSurfaceAlternateCanvasBackgroundColor'],\n      },\n      searchBar: {\n        backgroundColor: styles['ThemeSurfaceAlternateCanvasBackgroundColor'],\n      },\n      listItem: {\n        groupBackgroundColor: styles['ThemeSurfaceWindowBackgroundColor'],\n        groupTextColor: styles['ThemeListItemGroupTextColor'],\n        deprecatedGroupTextColor:\n          styles['ThemeListItemGroupTextDeprecatedColor'],\n        separatorColor: styles['ThemeListItemSeparatorColor'],\n        selectedBackgroundColor: styles['ThemeSelectionBackgroundColor'],\n        selectedTextColor: styles['ThemeSelectionColor'],\n        rightIconColor: styles['ThemeRightIconColor'],\n        selectedRightIconColor: styles['ThemeRightIconColor'],\n        errorTextColor: styles['ThemeListItemErrorColor'],\n        warningTextColor: styles['ThemeListItemWarningColor'],\n        selectedErrorBackgroundColor: styles['ThemeListItemErrorColor'],\n        selectedWarningBackgroundColor: styles['ThemeListItemWarningColor'],\n      },\n      emptyMessage: {\n        shadowColor: styles['ThemeMessageEmptyShadowColor'],\n      },\n      ...getRootClassNames(rootClassNameIdentifier),\n      logo: {\n        src: 'res/GD-logo-big.png',\n      },\n      gdevelopIconsCSSFilter,\n    },\n    muiThemeOptions: {\n      typography: {\n        fontFamily: styles['GdevelopFontFamily'],\n      },\n      palette: {\n        type: paletteType,\n        common: {\n          black: styles['ThemePaletteBlack'],\n          white: styles['ThemePaletteWhite'],\n        },\n        background: {\n          paper: styles['ThemeSurfaceCanvasBackgroundColor'],\n          default: styles['ThemeSurfaceWindowBackgroundColor'],\n        },\n        primary: getThemeMode(\n          styles['ThemePrimaryColor'],\n          styles['ThemePrimaryTextContrastColor']\n        ),\n        secondary: getThemeMode(\n          styles['ThemeSecondaryColor'],\n          styles['ThemeSecondaryTextContrastColor']\n        ),\n        text: {\n          primary: styles['ThemeTextDefaultColor'],\n          secondary: styles['ThemeTextSecondaryColor'],\n          disabled: styles['ThemeTextDisabledColor'],\n          hint: styles['ThemeTextSecondaryColor'],\n        },\n      },\n      overrides: getMuiOverrides(\n        styles['ThemeTextContrastColor'],\n        styles['TabsBackgroundColor'],\n        styles['InputBorderBottomColor'],\n        styles['MosaicToolbarBackgroundColor'],\n        styles['ThemeTextDefaultColor']\n      ),\n    },\n  };\n}\n","import React from 'react';\nimport ThemeConsumer from './Theme/ThemeConsumer';\n\nexport default props => {\n  return (\n    <ThemeConsumer>\n      {muiTheme => (\n        <span\n          style={{\n            height: 32,\n            marginLeft: 3,\n            marginRight: 3,\n            borderLeftStyle: 'solid',\n            borderLeftWidth: 1,\n            borderColor: muiTheme.toolbar.separatorColor,\n          }}\n        />\n      )}\n    </ThemeConsumer>\n  );\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\nexport type CommandName =\n  | 'QUIT_APP'\n  | 'OPEN_PROJECT_MANAGER'\n  | 'LAUNCH_NEW_PREVIEW'\n  | 'LAUNCH_DEBUG_PREVIEW'\n  | 'LAUNCH_NETWORK_PREVIEW'\n  | 'HOT_RELOAD_PREVIEW'\n  | 'OPEN_START_PAGE'\n  | 'CREATE_NEW_PROJECT'\n  | 'OPEN_PROJECT'\n  | 'SAVE_PROJECT'\n  | 'SAVE_PROJECT_AS'\n  | 'CLOSE_PROJECT'\n  | 'EXPORT_GAME'\n  | 'OPEN_RECENT_PROJECT'\n  | 'OPEN_COMMAND_PALETTE'\n  | 'OPEN_PROJECT_PROPERTIES'\n  | 'OPEN_PROJECT_LOADING_SCREEN'\n  | 'OPEN_PROJECT_VARIABLES'\n  | 'OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG'\n  | 'OPEN_PROJECT_RESOURCES'\n  | 'OPEN_SEARCH_EXTENSIONS_DIALOG'\n  | 'OPEN_LAYOUT'\n  | 'OPEN_EXTERNAL_EVENTS'\n  | 'OPEN_EXTERNAL_LAYOUT'\n  | 'OPEN_EXTENSION'\n  | 'OPEN_SCENE_PROPERTIES'\n  | 'OPEN_SCENE_VARIABLES'\n  | 'OPEN_OBJECTS_PANEL'\n  | 'OPEN_OBJECT_GROUPS_PANEL'\n  | 'OPEN_PROPERTIES_PANEL'\n  | 'TOGGLE_INSTANCES_PANEL'\n  | 'TOGGLE_LAYERS_PANEL'\n  | 'SCENE_EDITOR_UNDO'\n  | 'SCENE_EDITOR_REDO'\n  | 'DELETE_INSTANCES'\n  | 'TOGGLE_WINDOW_MASK'\n  | 'TOGGLE_GRID'\n  | 'OPEN_SETUP_GRID'\n  | 'EDIT_LAYER_EFFECTS'\n  | 'EDIT_LAYER'\n  | 'EDIT_NETWORK_PREVIEW'\n  | 'EDIT_OBJECT'\n  | 'EDIT_OBJECT_BEHAVIORS'\n  | 'EDIT_OBJECT_EFFECTS'\n  | 'EDIT_OBJECT_VARIABLES'\n  | 'EDIT_OBJECT_GROUP'\n  | 'ADD_STANDARD_EVENT'\n  | 'ADD_SUBEVENT'\n  | 'ADD_COMMENT_EVENT'\n  | 'CHOOSE_AND_ADD_EVENT'\n  | 'EVENTS_EDITOR_UNDO'\n  | 'EVENTS_EDITOR_REDO'\n  | 'DELETE_SELECTION'\n  | 'SEARCH_EVENTS'\n  | 'OPEN_EXTENSION_SETTINGS'\n  | 'OPEN_PROFILE'\n  | 'OPEN_GAMES_DASHBOARD';\n\nexport const commandAreas = {\n  GENERAL: t`General`,\n  IDE: t`IDE`,\n  PROJECT: t`Project`,\n  SCENE: t`Scene`,\n  EVENTS: t`Events`,\n};\n\ntype CommandArea = $Keys<typeof commandAreas>;\n\ntype CommandMetadata = {|\n  area: CommandArea,\n  displayText: MessageDescriptor,\n  noShortcut?: boolean, // If true, command won't show up in shortcuts list\n  ghost?: boolean, // If true, command won't show up in palette\n  handledByElectron?: boolean, // If true, command shortcut is handled by Electron in desktop app\n|};\n\nconst commandsList: { [CommandName]: CommandMetadata } = {\n  // General commands\n  QUIT_APP: {\n    area: 'GENERAL',\n    displayText: t`Close GDevelop`,\n    handledByElectron: true,\n  },\n  OPEN_PROJECT_MANAGER: {\n    area: 'IDE',\n    displayText: t`Open project manager`,\n    handledByElectron: true,\n  },\n  OPEN_PROFILE: {\n    area: 'IDE',\n    displayText: t`Open My Profile`,\n  },\n  OPEN_GAMES_DASHBOARD: {\n    area: 'IDE',\n    displayText: t`Open My Games Dashboard`,\n  },\n  LAUNCH_NEW_PREVIEW: { area: 'PROJECT', displayText: t`Launch new preview` },\n  LAUNCH_DEBUG_PREVIEW: {\n    area: 'PROJECT',\n    displayText: t`Launch preview with debugger and profiler`,\n  },\n  LAUNCH_NETWORK_PREVIEW: {\n    area: 'PROJECT',\n    displayText: t`Launch network preview over WiFi/LAN`,\n  },\n  HOT_RELOAD_PREVIEW: {\n    area: 'PROJECT',\n    displayText: t`Apply changes to the running preview`,\n  },\n  OPEN_START_PAGE: { area: 'IDE', displayText: t`Open start page` },\n  CREATE_NEW_PROJECT: {\n    area: 'GENERAL',\n    displayText: t`Create a new project`,\n    handledByElectron: true,\n  },\n  OPEN_PROJECT: {\n    area: 'GENERAL',\n    displayText: t`Open project`,\n    handledByElectron: true,\n  },\n  SAVE_PROJECT: {\n    area: 'GENERAL',\n    displayText: t`Save project`,\n    handledByElectron: true,\n  },\n  SAVE_PROJECT_AS: {\n    area: 'GENERAL',\n    displayText: t`Save project as...`,\n    handledByElectron: true,\n  },\n  CLOSE_PROJECT: {\n    area: 'GENERAL',\n    displayText: t`Close project`,\n    handledByElectron: true,\n  },\n  EXPORT_GAME: {\n    area: 'PROJECT',\n    displayText: t`Export game`,\n    handledByElectron: true,\n  },\n  OPEN_RECENT_PROJECT: {\n    area: 'GENERAL',\n    displayText: t`Open recent project...`,\n  },\n  OPEN_COMMAND_PALETTE: {\n    area: 'IDE',\n    displayText: t`Open command palette`,\n    ghost: true,\n  },\n\n  // Project manager commands\n  OPEN_PROJECT_PROPERTIES: {\n    area: 'PROJECT',\n    displayText: t`Open project properties`,\n  },\n  OPEN_PROJECT_LOADING_SCREEN: {\n    area: 'PROJECT',\n    displayText: t`Edit loading screen`,\n  },\n  OPEN_PROJECT_VARIABLES: {\n    area: 'PROJECT',\n    displayText: t`Edit global variables`,\n  },\n  OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG: {\n    area: 'PROJECT',\n    displayText: t`Open project icons`,\n  },\n  OPEN_PROJECT_RESOURCES: {\n    area: 'PROJECT',\n    displayText: t`Open project resources`,\n  },\n  OPEN_SEARCH_EXTENSIONS_DIALOG: {\n    area: 'PROJECT',\n    displayText: t`Search/import extensions`,\n  },\n\n  // Tab-opening commands\n  OPEN_LAYOUT: { area: 'IDE', displayText: t`Open scene...` },\n  OPEN_EXTERNAL_EVENTS: {\n    area: 'IDE',\n    displayText: t`Open external events...`,\n  },\n  OPEN_EXTERNAL_LAYOUT: {\n    area: 'IDE',\n    displayText: t`Open external layout...`,\n  },\n  OPEN_EXTENSION: { area: 'IDE', displayText: t`Open extension...` },\n\n  // Scene editor commands\n  OPEN_SCENE_PROPERTIES: {\n    area: 'SCENE',\n    displayText: t`Open scene properties`,\n  },\n  OPEN_SCENE_VARIABLES: {\n    area: 'SCENE',\n    displayText: t`Open scene variables`,\n  },\n\n  // Scene editor toolbar commands\n  OPEN_OBJECTS_PANEL: {\n    area: 'SCENE',\n    displayText: t`Open the objects editor`,\n  },\n  OPEN_OBJECT_GROUPS_PANEL: {\n    area: 'SCENE',\n    displayText: t`Open the object groups editor`,\n  },\n  OPEN_PROPERTIES_PANEL: {\n    area: 'SCENE',\n    displayText: t`Open the properties panel`,\n  },\n  TOGGLE_INSTANCES_PANEL: {\n    area: 'SCENE',\n    displayText: t`Open the list of instances`,\n  },\n  TOGGLE_LAYERS_PANEL: {\n    area: 'SCENE',\n    displayText: t`Open the layers editor`,\n  },\n  SCENE_EDITOR_UNDO: {\n    area: 'SCENE',\n    displayText: t`Undo the last changes`,\n    noShortcut: true,\n  },\n  SCENE_EDITOR_REDO: {\n    area: 'SCENE',\n    displayText: t`Redo the last changes`,\n    noShortcut: true,\n  },\n  DELETE_INSTANCES: {\n    area: 'SCENE',\n    displayText: t`Delete the selected instances from the scene`,\n    noShortcut: true,\n  },\n  TOGGLE_WINDOW_MASK: { area: 'SCENE', displayText: t`Toggle mask` },\n  TOGGLE_GRID: { area: 'SCENE', displayText: t`Toggle grid` },\n  OPEN_SETUP_GRID: { area: 'SCENE', displayText: t`Setup grid` },\n\n  // Layers list commands\n  EDIT_LAYER_EFFECTS: {\n    area: 'SCENE',\n    displayText: t`Edit layer effects...`,\n  },\n  EDIT_LAYER: {\n    area: 'SCENE',\n    displayText: t`Edit layer...`,\n  },\n\n  // Objects list commands\n  EDIT_OBJECT: { area: 'SCENE', displayText: t`Edit object...` },\n  EDIT_OBJECT_BEHAVIORS: {\n    area: 'SCENE',\n    displayText: t`Edit object behaviors...`,\n  },\n  EDIT_OBJECT_EFFECTS: {\n    area: 'SCENE',\n    displayText: t`Edit object effects...`,\n  },\n  EDIT_OBJECT_VARIABLES: {\n    area: 'SCENE',\n    displayText: t`Edit object variables...`,\n  },\n\n  // Object groups list commands\n  EDIT_OBJECT_GROUP: { area: 'SCENE', displayText: t`Edit object group...` },\n\n  // Events editor toolbar commands\n  ADD_STANDARD_EVENT: {\n    area: 'EVENTS',\n    displayText: t`Add a new empty event`,\n  },\n  ADD_SUBEVENT: {\n    area: 'EVENTS',\n    displayText: t`Add a sub-event to the selected event`,\n  },\n  ADD_COMMENT_EVENT: { area: 'EVENTS', displayText: t`Add a comment` },\n  CHOOSE_AND_ADD_EVENT: {\n    area: 'EVENTS',\n    displayText: t`Choose and add an event...`,\n  },\n  EVENTS_EDITOR_UNDO: {\n    area: 'EVENTS',\n    displayText: t`Undo the last changes`,\n    noShortcut: true,\n  },\n  EVENTS_EDITOR_REDO: {\n    area: 'EVENTS',\n    displayText: t`Redo the last changes`,\n    noShortcut: true,\n  },\n  DELETE_SELECTION: {\n    area: 'EVENTS',\n    displayText: t`Delete the selected event(s)`,\n    noShortcut: true,\n  },\n  SEARCH_EVENTS: {\n    area: 'EVENTS',\n    displayText: t`Search in events`,\n    noShortcut: true,\n  },\n  OPEN_EXTENSION_SETTINGS: {\n    area: 'EVENTS',\n    displayText: t`Open extension settings`,\n  },\n};\n\nexport default commandsList;\n","// @flow\nimport * as React from 'react';\n\ntype CallbackEvent = {|\n  /* The X position, relative to the viewport, not including scroll offset, of the long touch */\n  clientX: number,\n  /* The Y position, relative to the viewport, not including scroll offset, of the long touch */\n  clientY: number,\n|};\n\n// Find the position of an event on the screen\nconst getClientXY = (event: TouchEvent): CallbackEvent => {\n  if (event.touches && event.touches.length > 0) {\n    return {\n      clientX: event.touches[0].clientX,\n      clientY: event.touches[0].clientY,\n    };\n  }\n\n  return {\n    clientX: 0,\n    clientY: 0,\n  };\n};\n\nconst delay = 600; // ms\nconst moveTolerance = 10; // px\n\n/**\n * A hook to listen to a long touch (\"long press\") on an element, to workaround the\n * non working onContextMenu on some platforms (Safari on iOS).\n *\n * A long press is characterized by starting a touch and staying pressed, without\n * moving too far from the initial position (to avoid being confused with a drag/scroll).\n */\nexport const useLongTouch = (callback: (e: CallbackEvent) => void) => {\n  const timeout = React.useRef<?TimeoutID>(null);\n  const currentTouchCallbackEvent = React.useRef<CallbackEvent>({\n    clientX: 0,\n    clientY: 0,\n  });\n  const clear = React.useCallback(() => {\n    timeout.current && clearTimeout(timeout.current);\n  }, []);\n\n  React.useEffect(\n    () => {\n      // Cancel the long touch if scrolling (otherwise we can get a long touch\n      // being activated while scroll and maintaining the touch on an element,\n      // which is weird for the user that just want to scroll).\n      document.addEventListener('scroll', clear, {\n        // Get notified as soon as the scroll happens.\n        capture: true,\n\n        // No need for passive: true\n        // According to MDN: \"You don't need to worry about the value of passive for the basic scroll event.\n        // Since it can't be canceled, event listeners can't block page rendering anyway\".\n      });\n\n      return () => {\n        // Ensure we remove the timeout waiting for the long press\n        // if the component is destroyed.\n        clear();\n\n        // Remove the listener for the scroll\n        document.removeEventListener('scroll', clear, { capture: true });\n      };\n    },\n    [clear]\n  );\n\n  const start = React.useCallback(\n    (event: TouchEvent) => {\n      // Ensure we remove the timeout waiting for the long press\n      // if there is one already. This can happen if start is called\n      // multiple times.\n      timeout.current && clearTimeout(timeout.current);\n\n      currentTouchCallbackEvent.current = getClientXY(event);\n      timeout.current = setTimeout(() => {\n        callback(currentTouchCallbackEvent.current);\n      }, delay);\n    },\n    [callback]\n  );\n\n  const onMove = React.useCallback(\n    (event: TouchEvent) => {\n      // If more than one touch,\n      // it's not a long press anymore.\n      if (event.touches.length !== 1) {\n        clear();\n        return;\n      }\n\n      // If touch moved too far from the initial touch position,\n      // it's not a long press anymore.\n      const touch = event.touches[0];\n      const { clientX, clientY } = currentTouchCallbackEvent.current;\n      if (\n        Math.abs(touch.clientX - clientX) > moveTolerance ||\n        Math.abs(touch.clientY - clientY) > moveTolerance\n      ) {\n        clear();\n        return;\n      }\n    },\n    [currentTouchCallbackEvent, clear]\n  );\n\n  return {\n    onTouchStart: start,\n    onTouchMove: onMove,\n    onTouchEnd: clear,\n  };\n};\n","// @flow\nimport * as React from 'react';\nconst gd = global.gd;\n\ntype Props = {|\n  serializableObject: gdSerializable,\n  useProjectToUnserialize?: ?gdProject,\n  onCancel: () => void,\n|};\n\n/**\n * Custom hook serializing the object and allowing to restore back\n * the object to this serialized state later, by calling the function\n * returned by the hook.\n */\nexport const useSerializableObjectCancelableEditor = ({\n  serializableObject,\n  useProjectToUnserialize,\n  onCancel,\n}: Props) => {\n  const serializedElementRef = React.useRef(null);\n  React.useEffect(\n    () => {\n      // Serialize the content of the object, to be used in case the user\n      // want to cancel their changes.\n      if (serializedElementRef.current) {\n        serializedElementRef.current.delete();\n        serializedElementRef.current = null;\n      }\n\n      serializedElementRef.current = new gd.SerializerElement();\n      serializableObject.serializeTo(serializedElementRef.current);\n\n      return () => {\n        if (serializedElementRef.current) {\n          serializedElementRef.current.delete();\n          serializedElementRef.current = null;\n        }\n      };\n    },\n    [serializableObject]\n  );\n\n  const onCancelChanges = React.useCallback(\n    () => {\n      // Use the value that was serialized to cancel the changes\n      // made to the object\n      const serializedElement = serializedElementRef.current;\n      if (!serializedElement) return;\n\n      if (!useProjectToUnserialize) {\n        serializableObject.unserializeFrom(serializedElement);\n      } else {\n        serializableObject.unserializeFrom(\n          useProjectToUnserialize,\n          serializedElement\n        );\n      }\n\n      onCancel();\n    },\n    [serializableObject, useProjectToUnserialize, onCancel]\n  );\n\n  return onCancelChanges;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport PlayCircleFilledIcon from '@material-ui/icons/PlayCircleFilled';\nimport OfflineBoltIcon from '@material-ui/icons/OfflineBolt';\n\nexport type HotReloadPreviewButtonProps = {|\n  hasPreviewsRunning: boolean,\n  launchProjectDataOnlyPreview: () => void,\n  launchProjectWithLoadingScreenPreview: () => void,\n|};\n\nexport const NewPreviewIcon = PlayCircleFilledIcon;\nexport const HotReloadPreviewIcon = OfflineBoltIcon;\n\nexport default function HotReloadPreviewButton({\n  launchProjectDataOnlyPreview,\n  hasPreviewsRunning,\n}: HotReloadPreviewButtonProps) {\n  return (\n    <FlatButton\n      icon={hasPreviewsRunning ? <HotReloadPreviewIcon /> : <NewPreviewIcon />}\n      label={\n        hasPreviewsRunning ? (\n          <Trans>Apply changes to preview</Trans>\n        ) : (\n          <Trans>Run a preview</Trans>\n        )\n      }\n      onClick={() => launchProjectDataOnlyPreview()}\n    />\n  );\n}\n","// @flow\r\n// Inspired by https://github.com/LoicMahieu/material-ui-color-picker\r\n\r\nimport * as React from 'react';\r\nimport { SketchPicker } from 'react-color';\r\nimport Popover from '@material-ui/core/Popover';\r\nimport muiZIndex from '@material-ui/core/styles/zIndex';\r\nimport { type RGBColor } from '../../Utils/ColorTransformer';\r\n\r\nexport type ColorResult = {\r\n  rgb: RGBColor,\r\n};\r\n\r\ntype ColorChangeHandler = (color: ColorResult) => void;\r\n\r\ntype Props = {|\r\n  color: ?RGBColor,\r\n  style?: Object,\r\n  onChange?: ColorChangeHandler,\r\n  onChangeComplete?: ColorChangeHandler,\r\n  disableAlpha?: boolean,\r\n|};\r\n\r\ntype State = {|\r\n  displayColorPicker: boolean,\r\n|};\r\n\r\nconst styles = {\r\n  color: {\r\n    width: '36px',\r\n    height: '14px',\r\n    borderRadius: '2px',\r\n    textAlign: 'center',\r\n    fontSize: '10px',\r\n  },\r\n  swatch: {\r\n    padding: '5px',\r\n    background: '#fff',\r\n    borderRadius: '1px',\r\n    boxShadow: '0 0 0 1px rgba(0,0,0,.1)',\r\n    display: 'inline-block',\r\n    cursor: 'pointer',\r\n  },\r\n  popover: {\r\n    // Ensure the popover is above everything (modal, dialog, snackbar, tooltips, etc).\r\n    // There will be only one ColorPicker opened at a time, so it's fair to put the\r\n    // highest z index. If this is breaking, check the z-index of material-ui.\r\n    zIndex: muiZIndex.tooltip + 100,\r\n  },\r\n};\r\n\r\nclass ColorPicker extends React.Component<Props, State> {\r\n  _swatch = React.createRef<HTMLDivElement>();\r\n  state = {\r\n    displayColorPicker: false,\r\n  };\r\n\r\n  open = () => {\r\n    this.setState({ displayColorPicker: true });\r\n  };\r\n\r\n  handleClick = () => {\r\n    this.setState({ displayColorPicker: !this.state.displayColorPicker });\r\n  };\r\n\r\n  handleClose = () => {\r\n    this.setState({ displayColorPicker: false });\r\n  };\r\n\r\n  render() {\r\n    const { style, color, ...otherProps } = this.props;\r\n\r\n    const displayedColor = color\r\n      ? color\r\n      : {\r\n          r: 200,\r\n          g: 200,\r\n          b: 200,\r\n          a: 1,\r\n        };\r\n\r\n    return (\r\n      <div style={style}>\r\n        <div\r\n          style={styles.swatch}\r\n          onClick={this.handleClick}\r\n          ref={this._swatch}\r\n        >\r\n          <div\r\n            style={{\r\n              ...styles.color,\r\n              background: `rgba(${displayedColor.r}, ${displayedColor.g}, ${\r\n                displayedColor.b\r\n              }, ${displayedColor.a || 1})`,\r\n            }}\r\n          >\r\n            {color ? null : '?'}\r\n          </div>\r\n        </div>\r\n        {this.state.displayColorPicker && this._swatch.current ? (\r\n          <Popover\r\n            open\r\n            onClose={this.handleClose}\r\n            anchorEl={this._swatch.current}\r\n            style={styles.popover}\r\n          >\r\n            <SketchPicker color={displayedColor} {...otherProps} />\r\n          </Popover>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ColorPicker;\r\n","// @flow\nimport axios from 'axios';\nimport { GDevelopGameApi } from './ApiConfigs';\nimport { type Filters } from './Filters';\n\nexport type Game = {\n  id: string,\n  gameName: string,\n  authorName: string,\n  createdAt: number,\n};\n\nexport type ShowcasedGameLink = {\n  url: string,\n  type:\n    | 'app-store'\n    | 'play-store'\n    | 'play'\n    | 'download'\n    | 'download-win-mac-linux'\n    | 'learn-more',\n};\n\nexport type ShowcasedGame = {\n  title: string,\n  author: string,\n  description: string,\n  genres: Array<string>,\n  platforms: Array<string>,\n  /** Represents the union of genres+platforms. */\n  tags: Array<string>,\n  imageUrls: Array<string>,\n  links: Array<ShowcasedGameLink>,\n  isFeatured: boolean,\n  bannerUrl: string,\n  bannerBackgroundPosition: string,\n  thumbnailUrl: string,\n  editorDescription: string,\n};\n\nexport type AllShowcasedGames = {\n  showcasedGames: Array<ShowcasedGame>,\n  filters: Filters,\n};\n\nexport const listAllShowcasedGames = (): Promise<AllShowcasedGames> => {\n  return axios\n    .get(`${GDevelopGameApi.baseUrl}/showcased-game`)\n    .then(response => response.data)\n    .then(({ gamesShowcaseUrl, filtersUrl }) => {\n      if (!gamesShowcaseUrl || !filtersUrl) {\n        throw new Error('Unexpected response from the resource endpoint.');\n      }\n      return Promise.all([\n        axios.get(gamesShowcaseUrl).then(response => response.data),\n        axios.get(filtersUrl).then(response => response.data),\n      ]).then(([showcasedGames, filters]) => ({\n        showcasedGames,\n        filters,\n      }));\n    });\n};\n\nexport const registerGame = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  {\n    gameId,\n    gameName,\n    authorName,\n  }: {|\n    gameId: string,\n    gameName: string,\n    authorName: string,\n  |}\n): Promise<Game> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopGameApi.baseUrl}/game/${gameId}`,\n        {\n          gameName,\n          authorName,\n        },\n        {\n          params: {\n            userId,\n          },\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\nexport const updateGame = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  {\n    gameId,\n    gameName,\n    authorName,\n  }: {|\n    gameId: string,\n    gameName: string,\n    authorName: string,\n  |}\n): Promise<Game> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.patch(\n        `${GDevelopGameApi.baseUrl}/game/${gameId}`,\n        {\n          gameName,\n          authorName,\n        },\n        {\n          params: {\n            userId,\n          },\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\nexport const getGame = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  gameId: string\n): Promise<Game> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopGameApi.baseUrl}/game/${gameId}`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const deleteGame = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  gameId: string\n): Promise<Game> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.delete(`${GDevelopGameApi.baseUrl}/game/${gameId}`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const getGames = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Array<Game>> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopGameApi.baseUrl}/game`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\n\nexport const enumerateLayouts = (project: gdProject): Array<gdLayout> =>\n  mapFor(0, project.getLayoutsCount(), i => project.getLayoutAt(i));\n\nexport const enumerateExternalEvents = (\n  project: gdProject\n): Array<gdExternalEvents> =>\n  mapFor(0, project.getExternalEventsCount(), i =>\n    project.getExternalEventsAt(i)\n  );\n\nexport const enumerateExternalLayouts = (\n  project: gdProject\n): Array<gdExternalLayout> =>\n  mapFor(0, project.getExternalLayoutsCount(), i =>\n    project.getExternalLayoutAt(i)\n  );\n\nexport const enumerateEventsFunctionsExtensions = (\n  project: gdProject\n): Array<gdEventsFunctionsExtension> =>\n  mapFor(0, project.getEventsFunctionsExtensionsCount(), i =>\n    project.getEventsFunctionsExtensionAt(i)\n  );\n\nexport const filterProjectItemsList = <T>(\n  list: Array<T>,\n  searchText: string\n): Array<T> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(\n    (item: any) =>\n      item\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n  );\n};\n","// @flow\nimport axios from 'axios';\nimport { GDevelopAssetApi } from './ApiConfigs';\nimport semverSatisfies from 'semver/functions/satisfies';\nimport { type UserPublicProfileSearch } from './User';\n\nexport type ExtensionShortHeader = {|\n  shortDescription: string,\n  authors?: Array<UserPublicProfileSearch>,\n  extensionNamespace: string,\n  fullName: string,\n  name: string,\n  version: string,\n  gdevelopVersion?: string,\n  url: string,\n  headerUrl: string,\n  tags: Array<string>,\n  previewIconUrl: string,\n  eventsBasedBehaviorsCount: number,\n  eventsFunctionsCount: number,\n|};\nexport type ExtensionHeader = {|\n  ...ExtensionShortHeader,\n  helpPath: string,\n  description: string,\n  iconUrl: string,\n|};\n\nexport type SerializedExtension = {\n  ...ExtensionHeader,\n};\n\nexport type ExtensionsRegistry = {\n  version: string,\n  allTags: Array<string>,\n  extensionShortHeaders: Array<ExtensionShortHeader>,\n};\n\n/**\n * The ExtensionHeader returned by the API, with tags being a string\n * (which is kept in the API for compatibility with older GDevelop versions).\n */\ntype ExtensionHeaderWithTagsAsString = {|\n  ...ExtensionHeader,\n  tags: string,\n|};\n\n/**\n * The SerializedExtension returned by the API, with tags being a string\n * (which is kept in the API for compatibility with older GDevelop versions).\n */\ntype SerializedExtensionWithTagsAsString = {\n  ...SerializedExtension,\n  tags: string,\n};\n\n/**\n * Transform the tags from their old representation sent by the API (a string)\n * to their new representation (array of strings).\n */\nconst transformTagsAsStringToTagsAsArray = <T: { tags: string }>(\n  dataWithTags: T\n): $Exact<{ ...T, tags: Array<string> }> => {\n  // Handle potential future update of the API that would\n  // return tags as an array of strings.\n  if (Array.isArray(dataWithTags.tags)) {\n    // $FlowIgnore\n    return dataWithTags;\n  }\n\n  // $FlowIgnore - ignore issue with non exact types\n  return {\n    ...dataWithTags,\n    tags: dataWithTags.tags.split(',').map(tag => tag.trim().toLowerCase()),\n  };\n};\n\n/** Check if the IDE version, passed as argument, satisfiy the version required by the extension. */\nexport const isCompatibleWithExtension = (\n  ideVersion: string,\n  extensionShortHeader: ExtensionShortHeader\n) =>\n  extensionShortHeader.gdevelopVersion\n    ? semverSatisfies(ideVersion, extensionShortHeader.gdevelopVersion, {\n        includePrerelease: true,\n      })\n    : true;\n\nexport const getExtensionsRegistry = (): Promise<ExtensionsRegistry> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/extensions-registry`)\n    .then(response => response.data)\n    .then(extensionsRegistry => {\n      return {\n        ...extensionsRegistry,\n        // TODO: move this to backend endpoint\n        extensionShortHeaders: extensionsRegistry.extensionShortHeaders.map(\n          transformTagsAsStringToTagsAsArray\n        ),\n      };\n    });\n};\n\nexport const getExtensionHeader = (\n  extensionShortHeader: ExtensionShortHeader\n): Promise<ExtensionHeader> => {\n  return axios.get(extensionShortHeader.headerUrl).then(response => {\n    const data: ExtensionHeaderWithTagsAsString = response.data;\n    const transformedData: ExtensionHeader = transformTagsAsStringToTagsAsArray(\n      data\n    );\n    return transformedData;\n  });\n};\n\nexport const getExtension = (\n  extensionHeader: ExtensionShortHeader | ExtensionHeader\n): Promise<SerializedExtension> => {\n  return axios.get(extensionHeader.url).then(response => {\n    const data: SerializedExtensionWithTagsAsString = response.data;\n    const transformedData: SerializedExtension = transformTagsAsStringToTagsAsArray(\n      data\n    );\n    return transformedData;\n  });\n};\n\nexport const getUserExtensionShortHeaders = async (\n  authorId: string\n): Promise<Array<ExtensionShortHeader>> => {\n  const response = await axios.get(\n    `${GDevelopAssetApi.baseUrl}/extension-short-header`,\n    {\n      params: {\n        authorId,\n      },\n    }\n  );\n\n  return response.data;\n};\n","// @flow\nimport * as React from 'react';\nimport { type ChosenCategory } from './FiltersChooser';\nimport shuffle from 'lodash/shuffle';\nimport SearchApi from 'js-worker-search';\n\n/**\n * Filter a list of items according to the chosen category\n * and the chosen filters.\n */\nexport const filterSearchItems = <SearchItem: { tags: Array<string> }>(\n  searchItems: ?Array<SearchItem>,\n  chosenCategory: ?ChosenCategory,\n  chosenFilters: Set<string>\n): ?Array<SearchItem> => {\n  if (!searchItems) return null;\n\n  const startTime = performance.now();\n  const filteredSearchItems = searchItems\n    .filter(({ tags }) => {\n      if (!chosenCategory) return true;\n\n      const hasChosenCategoryTag =\n        // If the chosen category is a container of tags, not a real tag, then\n        // skip checking if the item has it.\n        chosenCategory.node.isTagContainerOnly ||\n        tags.some(tag => tag === chosenCategory.node.name);\n      if (!hasChosenCategoryTag) return false; // Asset is not in the selected category\n      for (const parentNode of chosenCategory.parentNodes) {\n        if (parentNode.isTagContainerOnly) {\n          // The parent is a container of tags, not a real tag. No need\n          // to check if the item has it.\n          return true;\n        }\n\n        const hasParentCategoryTag = tags.some(tag => tag === parentNode.name);\n        if (!hasParentCategoryTag) return false; // Asset is not in the the parent(s) of the selected category\n      }\n\n      return true;\n    })\n    .filter(({ tags }) => {\n      return (\n        chosenFilters.size === 0 || tags.some(tag => chosenFilters.has(tag))\n      );\n    });\n\n  const totalTime = performance.now() - startTime;\n  console.info(\n    `Filtered items by category/filters in ${totalTime.toFixed(3)}ms.`\n  );\n  return filteredSearchItems;\n};\n\n/**\n * Allow to efficiently search and filters items.\n *\n * This instanciates a search API (in a web-worker, if available), index\n * the specified items, then returns the results of the search (according to the\n * search text and the chosen category/filters).\n *\n * Search is done asynchronously within a web-worker when available, so they\n * won't block the main thread.\n */\nexport const useSearchItem = <SearchItem: { tags: Array<string> }>(\n  searchItemsById: ?{ [string]: SearchItem },\n  getItemDescription: SearchItem => string,\n  searchText: string,\n  chosenCategory: ?ChosenCategory,\n  chosenFilters: Set<string>\n): ?Array<SearchItem> => {\n  const searchApiRef = React.useRef<?any>(null);\n  const [searchResults, setSearchResults] = React.useState<?Array<SearchItem>>(\n    null\n  );\n\n  // Keep in memory a list of all the items, shuffled for\n  // easing random discovery of items when no search is done.\n  const suffledSearchItems: ?Array<SearchItem> = React.useMemo(\n    () => {\n      if (!searchItemsById) return null;\n\n      return shuffle(\n        Object.keys(searchItemsById).map(id => searchItemsById[id])\n      );\n    },\n    [searchItemsById]\n  );\n\n  // Index items that have been loaded.\n  React.useEffect(\n    () => {\n      if (!searchItemsById) {\n        // Nothing to index - yet.\n        return;\n      }\n\n      const startTime = performance.now();\n      if (searchApiRef.current) {\n        searchApiRef.current.terminate();\n        searchApiRef.current = null;\n      }\n\n      try {\n        const newSearchApi = new SearchApi();\n        const allIds = Object.keys(searchItemsById);\n\n        allIds.forEach(id => {\n          const assetShortHeader = searchItemsById[id];\n          newSearchApi.indexDocument(id, getItemDescription(assetShortHeader));\n        });\n\n        const totalTime = performance.now() - startTime;\n        console.info(\n          `Indexed ${allIds.length} items in ${totalTime.toFixed(3)}ms.`\n        );\n        searchApiRef.current = newSearchApi;\n      } catch (error) {\n        console.error('Error while indexing items: ', error);\n      }\n    },\n    [searchItemsById, getItemDescription]\n  );\n\n  // Update the search results according to the items, search term\n  // chosen category and chosen filters.\n  const searchApi = searchApiRef.current;\n  React.useEffect(\n    () => {\n      let discardSearch = false;\n      if (!searchText) {\n        setSearchResults(\n          filterSearchItems(suffledSearchItems, chosenCategory, chosenFilters)\n        );\n      } else {\n        if (!searchItemsById || !searchApi) {\n          console.info(\n            'Search for items skipped because items are not ready - will be retried when ready'\n          );\n          return;\n        }\n\n        const startTime = performance.now();\n        searchApi\n          .search(searchText)\n          .then((partialSearchResultIds: Array<string>) => {\n            if (discardSearch) {\n              console.info(\n                'Discarding search results as a new search was launched.'\n              );\n              return;\n            }\n\n            const partialSearchResults = partialSearchResultIds\n              .map(id => searchItemsById[id])\n              .filter(Boolean);\n\n            const totalTime = performance.now() - startTime;\n            console.info(\n              `Found ${\n                partialSearchResults.length\n              } items in ${totalTime.toFixed(3)}ms.`\n            );\n\n            setSearchResults(\n              filterSearchItems(\n                partialSearchResults,\n                chosenCategory,\n                chosenFilters\n              )\n            );\n          });\n      }\n\n      return () => {\n        // Effect is being destroyed - meaning that a new search was launched.\n        // Cancel this one.\n        discardSearch = true;\n      };\n    },\n    [\n      suffledSearchItems,\n      searchItemsById,\n      searchText,\n      chosenCategory,\n      chosenFilters,\n      searchApi,\n    ]\n  );\n\n  return searchResults;\n};\n","// @flow\nimport * as React from 'react';\nimport { CorsAwareImage } from './CorsAwareImage';\n\nconst styles = {\n  iconBackground: {\n    flex: 0,\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  icon: {\n    background: 'linear-gradient(45deg, #FFFFFF33, #FFFFFF)',\n    borderRadius: 4,\n  },\n};\n\ntype Props = {|\n  src: string,\n  alt: string,\n  size: number,\n|};\n\n/**\n * Display the specified icon with a background so that it's suitable\n * for display anywhere with a consistent style.\n */\nexport const IconContainer = ({ src, alt, size }: Props) => {\n  const padding = size > 24 ? 4 : 2;\n  return (\n    <div style={styles.iconBackground}>\n      <CorsAwareImage\n        style={{\n          ...styles.icon,\n          padding,\n          width: size - 2 * padding,\n          height: size - 2 * padding,\n        }}\n        src={src}\n        alt={alt}\n      />\n    </div>\n  );\n};\n","// @flow\nimport update from 'lodash/update';\nimport compact from 'lodash/compact';\nimport {\n  type EnumeratedInstructionOrExpressionMetadata,\n  type EnumeratedInstructionMetadata,\n  type EnumeratedExpressionMetadata,\n} from './EnumeratedInstructionOrExpressionMetadata.js';\n\nconst GROUP_DELIMITER = '/';\n\nexport type TreeNode<T> =\n  | T\n  | {\n      [string]: TreeNode<T>,\n    };\n\nexport type InstructionTreeNode = TreeNode<EnumeratedInstructionMetadata>;\nexport type ExpressionTreeNode = TreeNode<EnumeratedExpressionMetadata>;\nexport type InstructionOrExpressionTreeNode =\n  | InstructionTreeNode\n  | EnumeratedExpressionMetadata;\n\nexport const createTree = <T: EnumeratedInstructionOrExpressionMetadata>(\n  allExpressions: Array<T>\n): TreeNode<T> => {\n  const tree = {};\n  allExpressions.forEach((expressionInfo: T) => {\n    let pathInTree = compact(\n      expressionInfo.fullGroupName.split(GROUP_DELIMITER)\n    );\n    if (!pathInTree.length) {\n      // Group items without a group in an empty group\n      pathInTree = [''];\n    }\n\n    update(tree, pathInTree, groupInfo => {\n      const existingGroupInfo = groupInfo || {};\n      return {\n        ...existingGroupInfo,\n        [expressionInfo.displayedName]: expressionInfo,\n      };\n    });\n  });\n\n  return tree;\n};\n\nexport const findInTree = <T: Object>(\n  instructionTreeNode: TreeNode<T>,\n  instructionType: ?string\n): ?Array<string> => {\n  if (!instructionType) return null;\n\n  const keys = Object.keys(instructionTreeNode);\n  for (var i = 0; i < keys.length; ++i) {\n    const key = keys[i];\n\n    // In theory, we should have a way to distinguish\n    // between instruction (leaf nodes) and group (nodes). We use\n    // the \"type\" properties, but this will fail if a group is called \"type\"\n    // (hence the flow errors, which are valid warnings)\n    const instructionOrGroup = instructionTreeNode[key];\n    if (!instructionOrGroup) return null;\n\n    if (typeof instructionOrGroup.type === 'string') {\n      // $FlowFixMe - see above\n      const instructionInformation: EnumeratedInstructionOrExpressionMetadata = instructionOrGroup;\n\n      if (instructionInformation.type === instructionType) {\n        return [];\n      }\n    } else {\n      // $FlowFixMe - see above\n      const groupOfInstructionInformation: TreeNode<T> = instructionOrGroup;\n      const searchResult = findInTree(\n        groupOfInstructionInformation,\n        instructionType\n      );\n      if (searchResult) {\n        return [key, ...searchResult];\n      }\n    }\n  }\n\n  return null;\n};\n","//@flow\nimport { type EventsScope } from './EventsScope.flow';\nconst gd: libGDevelop = global.gd;\n\nexport type InstructionOrExpressionScope = {|\n  extension: gdPlatformExtension,\n  objectMetadata?: ?gdObjectMetadata,\n  behaviorMetadata?: ?gdBehaviorMetadata,\n|};\n\nexport type EnumeratedInstructionMetadata = {|\n  type: string,\n  displayedName: string,\n  fullGroupName: string,\n  iconFilename: string,\n  metadata: gdInstructionMetadata,\n  scope: InstructionOrExpressionScope,\n  isPrivate: boolean,\n|};\n\nexport type EnumeratedExpressionMetadata = {|\n  type: string,\n  displayedName: string,\n  fullGroupName: string,\n  iconFilename: string,\n  metadata: gdExpressionMetadata,\n  scope: InstructionOrExpressionScope,\n  isPrivate: boolean,\n  name: string,\n  /** Represents only the visible parameters in the parentheses of the expression. */\n  parameters: Array<gdParameterMetadata>,\n|};\n\n// This is copied from gd::WholeProjectRefactorer (see GetBehaviorFullType)\n// Could be factored into a single C++ function in gd::PlatformExtension?\nconst getBehaviorFullType = (extensionName: string, behaviorName: string) => {\n  const separator = gd.PlatformExtension.getNamespaceSeparator();\n  return extensionName + separator + behaviorName;\n};\n\n// An object representing InstructionMetadata or ExpressionMetadata.\n// Allow to use most information without paying the cost to call the\n// InstructionMetadata/ExpressionMetadata methods. In theory,\n// this type and objects are redundant with InstructionMetadata and ExpressionMetadata.\nexport type EnumeratedInstructionOrExpressionMetadata =\n  | EnumeratedInstructionMetadata\n  | EnumeratedExpressionMetadata;\n\n/**\n * Given a list of expression or instructions that were previously enumerated,\n * filter the ones that are not usable from the current \"scope\".\n */\nexport const filterEnumeratedInstructionOrExpressionMetadataByScope = <\n  +T: EnumeratedInstructionOrExpressionMetadata\n>(\n  list: Array<T>,\n  scope: EventsScope\n): Array<T> => {\n  return list.filter(enumeratedInstructionOrExpressionMetadata => {\n    if (!enumeratedInstructionOrExpressionMetadata.isPrivate) return true;\n\n    // The instruction or expression is marked as \"private\":\n    // we now compare its scope (where it was declared) and the current scope\n    // (where we are) to see if we should filter it or not.\n\n    const {\n      behaviorMetadata,\n      extension,\n    } = enumeratedInstructionOrExpressionMetadata.scope;\n    const { eventsBasedBehavior, eventsFunctionsExtension } = scope;\n\n    // Show private behavior functions when editing the behavior\n    if (\n      behaviorMetadata &&\n      eventsBasedBehavior &&\n      eventsFunctionsExtension &&\n      getBehaviorFullType(\n        eventsFunctionsExtension.getName(),\n        eventsBasedBehavior.getName()\n      ) === behaviorMetadata.getName()\n    )\n      return true;\n\n    // Show private non-behavior functions when editing the extension\n    if (\n      !behaviorMetadata &&\n      eventsFunctionsExtension &&\n      eventsFunctionsExtension.getName() === extension.getName()\n    )\n      return true;\n\n    return false;\n  });\n};\n","// @flow\nimport * as React from 'react';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport {\n  actionsContainer,\n  conditionsContainer,\n  smallWidthContainer,\n} from './ClassNames';\n\ntype Props = {|\n  renderConditionsList: ({ style: Object, className: string }) => React.Node,\n  renderActionsList: ({ className: string }) => React.Node,\n  windowWidth: WidthType,\n  className?: string,\n  leftIndentWidth: number,\n|};\n\nconst styles = {\n  oneColumnContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  twoColumnsContainer: {\n    display: 'flex',\n  },\n};\n\n/**\n * Display the lists of instructions (conditions and actions),\n * next to each other on a big screen (with proper sizing for the conditions column),\n * and stacked on a small one.\n */\nconst ConditionsActionsColumns = (props: Props) => {\n  if (props.windowWidth === 'small') {\n    return (\n      <div style={styles.oneColumnContainer} className={props.className}>\n        {props.renderConditionsList({\n          style: {},\n          className: `${conditionsContainer} ${smallWidthContainer}`,\n        })}\n        {props.renderActionsList({\n          style: {},\n          className: `${actionsContainer} ${smallWidthContainer}`,\n        })}\n      </div>\n    );\n  }\n\n  return (\n    <div style={styles.twoColumnsContainer} className={props.className}>\n      {props.renderConditionsList({\n        style: {\n          width: `calc(35vw - ${props.leftIndentWidth}px)`,\n        },\n        className: conditionsContainer,\n      })}\n      {props.renderActionsList({ className: actionsContainer })}\n    </div>\n  );\n};\n\nexport default ConditionsActionsColumns;\n","// @flow\nimport axios from 'axios';\nimport { GDevelopAssetApi } from './ApiConfigs';\n\nexport type Tutorial = {\n  id: string,\n  title: string,\n  description: string,\n  type: 'video' | 'text',\n  link: string,\n  thumbnailUrl: string,\n};\n\nexport const listAllTutorials = (): Promise<Array<Tutorial>> => {\n  return axios\n    .get(`${GDevelopAssetApi.baseUrl}/tutorial`)\n    .then(response => response.data);\n};\n\nexport const getObjectTutorialIds = (type: string): Array<string> => {\n  switch (type) {\n    case 'ParticleSystem::ParticleEmitter':\n      return ['particle-effects'];\n    case 'Lighting::LightObject':\n      return ['flickering-dynamic-light-effect'];\n    default:\n      return [];\n  }\n};\n\nexport const getBehaviorTutorialIds = (type: string): Array<string> => {\n  switch (type) {\n    case 'Tween::TweenBehavior':\n      return ['tween-behavior'];\n    case 'AnchorBehavior::AnchorBehavior':\n      return ['responsive-ui'];\n    case 'Physics2::Physics2Behavior':\n      return ['physics-engine-platformer-game', '2d-car-physics-movement'];\n    default:\n      return [];\n  }\n};\n\nexport const getInstructionTutorialIds = (type: string): Array<string> => {\n  switch (type) {\n    case 'CameraX':\n    case 'CameraY':\n    case 'RotateCamera':\n    case 'ZoomCamera':\n    case 'FixCamera':\n    case 'CentreCamera':\n      return ['smooth-camera-movement'];\n    case 'ChangeTimeScale':\n      return ['pause-menu'];\n    case 'EcrireFichierExp':\n    case 'EcrireFichierTxt':\n    case 'LireFichierExp':\n    case 'LireFichierTxt':\n      return ['save-and-load'];\n    case 'PlatformBehavior::SimulateJumpKey':\n      return ['simple-trampoline-platformer'];\n    default:\n      return [];\n  }\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport IconButton from '../../UI/IconButton';\nimport Measure from 'react-measure';\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { Column } from '../../UI/Grid';\nimport MiniToolbar from '../../UI/MiniToolbar';\nimport ZoomIn from '@material-ui/icons/ZoomIn';\nimport ZoomOut from '@material-ui/icons/ZoomOut';\nimport ZoomOutMap from '@material-ui/icons/ZoomOutMap';\nimport PlaceholderMessage from '../../UI/PlaceholderMessage';\nimport Text from '../../UI/Text';\nimport { CorsAwareImage } from '../../UI/CorsAwareImage';\nimport GDevelopThemeContext from '../../UI/Theme/ThemeContext';\nimport CheckeredBackground from '../CheckeredBackground';\nimport { getPixelatedImageRendering } from '../../Utils/CssHelpers';\nconst gd: libGDevelop = global.gd;\n\nconst MARGIN = 50;\nconst MAX_ZOOM_FACTOR = 10;\nconst MIN_ZOOM_FACTOR = 0.1;\n\nconst styles = {\n  previewImagePixelated: {\n    imageRendering: getPixelatedImageRendering(),\n  },\n  contentContainer: {\n    position: 'relative',\n    height: '100%',\n    overflow: 'hidden',\n  },\n  imagePreviewContainer: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n    boxSizing: 'border-box',\n    overflow: 'auto',\n\n    // The container contains the image and the \"overlay\" that can display\n    // points or polygons that can be drag'n'dropped. `touch-action` must\n    // be set to `none`, otherwise the (mobile) browser will claim the\n    // `pointermove` event for \"native\" behavior like panning the page.\n    touchAction: 'none',\n  },\n  spriteThumbnailImage: {\n    position: 'relative',\n    pointerEvents: 'none',\n    margin: MARGIN,\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcePath?: string,\n  resourcesLoader: typeof ResourcesLoader,\n  fixedHeight?: number,\n  renderOverlay?: ({|\n    imageWidth: number,\n    imageHeight: number,\n    offsetTop: number,\n    offsetLeft: number,\n    imageZoomFactor: number,\n  |}) => React.Node,\n  onSize?: (number, number) => void,\n|};\n\ntype State = {|\n  errored: boolean,\n  imageWidth: ?number,\n  imageHeight: ?number,\n  imageSource: ?string,\n  imageZoomFactor: number,\n|};\n\nconst resourceIsSmooth = (\n  project: gdProject,\n  resourceName: string\n): boolean => {\n  const resource = project.getResourcesManager().getResource(resourceName);\n  if (resource.getKind() !== 'image') return false;\n\n  const imageResource = gd.asImageResource(resource);\n  return imageResource.isSmooth();\n};\n\nconst loadStateFrom = (newProps: {\n  project: gdProject,\n  resourceName: string,\n  resourcesLoader: typeof ResourcesLoader,\n}) => {\n  return {\n    errored: false,\n    imageSource: newProps.resourcesLoader.getResourceFullUrl(\n      newProps.project,\n      newProps.resourceName,\n      {}\n    ),\n  };\n};\n\n/**\n * Display the preview for a resource of a project with kind \"image\".\n */\nconst ImagePreview = (props: Props) => {\n  const [state, setState] = React.useState<State>({\n    errored: false,\n    imageWidth: null,\n    imageHeight: null,\n    imageZoomFactor: 1,\n    ...loadStateFrom(props),\n  });\n\n  React.useEffect(\n    () => {\n      setState(state => ({\n        ...state,\n        ...loadStateFrom({\n          resourceName: props.resourceName,\n          project: props.project,\n          resourcesLoader: props.resourcesLoader,\n        }),\n      }));\n    },\n    [\n      props.resourceName,\n      props.project,\n      props.resourcesLoader,\n      props.resourcePath,\n    ]\n  );\n\n  const handleImageError = () => {\n    setState(state => ({ ...state, errored: true }));\n  };\n\n  const handleImageLoaded = (e: any) => {\n    const imgElement = e.target;\n\n    const imageWidth = imgElement\n      ? imgElement.naturalWidth || imgElement.clientWidth\n      : 0;\n    const imageHeight = imgElement\n      ? imgElement.naturalHeight || imgElement.clientHeight\n      : 0;\n    setState(state => ({ ...state, imageWidth, imageHeight }));\n    if (props.onSize) props.onSize(imageWidth, imageHeight);\n  };\n\n  const zoomBy = (imageZoomFactorDelta: number) => {\n    zoomTo(state.imageZoomFactor + imageZoomFactorDelta);\n  };\n\n  const zoomTo = (imageZoomFactor: number) => {\n    setState(state => ({\n      ...state,\n      imageZoomFactor: Math.min(\n        MAX_ZOOM_FACTOR,\n        Math.max(MIN_ZOOM_FACTOR, imageZoomFactor)\n      ),\n    }));\n  };\n\n  const theme = React.useContext(GDevelopThemeContext);\n  const frameBorderColor = theme.imagePreview.frameBorderColor || '#aaa';\n  const previewBorderColor = theme.imagePreview.borderColor || '#aaa';\n\n  return (\n    <Measure bounds>\n      {({ contentRect, measureRef }) => {\n        const containerWidth = contentRect.bounds.width;\n        const containerHeight = contentRect.bounds.height;\n        const { resourceName, renderOverlay, fixedHeight, project } = props;\n        const { imageHeight, imageWidth, imageSource, imageZoomFactor } = state;\n\n        const imageLoaded = !!imageWidth && !!imageHeight && !state.errored;\n\n        // Centre-align the image and overlays\n        const imagePositionTop = Math.max(\n          0,\n          containerHeight / 2 -\n            ((imageHeight || 0) * imageZoomFactor) / 2 -\n            MARGIN\n        );\n        const imagePositionLeft = Math.max(\n          0,\n          containerWidth / 2 -\n            ((imageWidth || 0) * imageZoomFactor) / 2 -\n            MARGIN\n        );\n\n        const imageStyle = {\n          ...styles.spriteThumbnailImage,\n          top: imagePositionTop || 0,\n          left: imagePositionLeft || 0,\n          width: imageWidth ? imageWidth * imageZoomFactor : undefined,\n          height: imageHeight ? imageHeight * imageZoomFactor : undefined,\n          visibility: imageLoaded ? undefined : 'hidden', // TODO: Loader\n          ...(!resourceIsSmooth(project, resourceName)\n            ? styles.previewImagePixelated\n            : undefined),\n        };\n\n        const frameStyle = {\n          position: 'absolute',\n          top: imagePositionTop + MARGIN || 0,\n          left: imagePositionLeft + MARGIN || 0,\n          width: imageWidth ? imageWidth * imageZoomFactor : undefined,\n          height: imageHeight ? imageHeight * imageZoomFactor : undefined,\n          visibility: imageLoaded ? undefined : 'hidden', // TODO: Loader\n          border: `1px solid ${frameBorderColor}`,\n        };\n\n        const overlayStyle = {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          visibility: imageLoaded ? undefined : 'hidden', // TODO: Loader\n        };\n\n        return (\n          <Column expand noMargin useFullHeight>\n            <MiniToolbar>\n              <IconButton\n                onClick={() => zoomBy(+0.2)}\n                tooltip={t`Zoom in (you can also use Ctrl + Mouse wheel)`}\n              >\n                <ZoomIn />\n              </IconButton>\n              <IconButton\n                onClick={() => zoomBy(-0.2)}\n                tooltip={t`Zoom out (you can also use Ctrl + Mouse wheel)`}\n              >\n                <ZoomOut />\n              </IconButton>\n              <IconButton\n                onClick={() => zoomTo(1)}\n                tooltip={t`Restore original size`}\n              >\n                <ZoomOutMap />\n              </IconButton>\n            </MiniToolbar>\n            <div\n              style={{\n                ...styles.contentContainer,\n                height: fixedHeight || '100%',\n              }}\n            >\n              <CheckeredBackground />\n              <div\n                dir={\n                  'ltr' /* Force LTR layout to avoid issues with image positioning */\n                }\n                style={{\n                  ...styles.imagePreviewContainer,\n                  border: `1px solid ${previewBorderColor}`,\n                }}\n                ref={measureRef}\n                onWheel={event => {\n                  const { deltaY } = event;\n                  //TODO: Use KeyboardShortcuts\n                  if (event.metaKey || event.ctrlKey) {\n                    zoomBy(-deltaY / 500);\n                    event.preventDefault();\n                    event.stopPropagation();\n                  } else {\n                    // Let the usual, native vertical or horizontal scrolling happen.\n                  }\n                }}\n              >\n                {!!state.errored && (\n                  <PlaceholderMessage>\n                    <Text>\n                      <Trans>Unable to load the image</Trans>\n                    </Text>\n                  </PlaceholderMessage>\n                )}\n                {!state.errored && (\n                  <CorsAwareImage\n                    style={imageStyle}\n                    alt={resourceName}\n                    src={imageSource}\n                    onError={handleImageError}\n                    onLoad={handleImageLoaded}\n                  />\n                )}\n                {imageLoaded && renderOverlay && <div style={frameStyle} />}\n                {imageLoaded && renderOverlay && (\n                  <div style={overlayStyle}>\n                    {renderOverlay({\n                      imageWidth: imageWidth || 0,\n                      imageHeight: imageHeight || 0,\n                      offsetTop: imagePositionTop + MARGIN,\n                      offsetLeft: imagePositionLeft + MARGIN,\n                      imageZoomFactor,\n                    })}\n                  </div>\n                )}\n              </div>\n            </div>\n          </Column>\n        );\n      }}\n    </Measure>\n  );\n};\n\nexport default ImagePreview;\n","import optionalRequire from '../../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\n\n/**\n * Wraps an Electron Menu\n */\nexport default class ElectronMenuImplementation {\n  buildFromTemplate(template) {\n    this.menuTemplate = template;\n    return undefined;\n  }\n\n  showMenu(dimensions) {\n    if (!electron) return;\n\n    const { Menu } = electron.remote;\n    const browserWindow = electron.remote.getCurrentWindow();\n    this.menu = Menu.buildFromTemplate(this.menuTemplate);\n    this.menu.popup({\n      window: browserWindow,\n      x: Math.round(dimensions.left),\n      y: Math.round(dimensions.top + dimensions.height),\n      async: true, // Ensure the UI is not blocked on macOS.\n    });\n  }\n\n  getMenuProps() {\n    return {\n      open: false,\n    };\n  }\n}\n","import React, { useState, useRef, useCallback } from 'react';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport Fade from '@material-ui/core/Fade';\n\nconst SubMenuItem = ({ item, buildFromTemplate }) => {\n  const [menuOpen, setMenuOpen] = useState(false);\n  const anchorElement = useRef(null);\n  const setAnchorElement = useCallback(element => {\n    anchorElement.current = element;\n  }, []);\n\n  return (\n    <React.Fragment>\n      <MenuItem\n        dense\n        key={item.label}\n        disabled={item.enabled === false}\n        onClick={event => {\n          if (item.enabled === false) {\n            return;\n          }\n\n          if (!anchorElement.current) {\n            setAnchorElement(event.currentTarget);\n          }\n\n          setMenuOpen(!menuOpen);\n        }}\n      >\n        {item.label}\n        <ArrowRightIcon />\n      </MenuItem>\n      <Menu\n        open={menuOpen}\n        anchorEl={anchorElement.current}\n        onClose={() => setMenuOpen(false)}\n        TransitionComponent={Fade}\n      >\n        {buildFromTemplate(item.submenu)}\n      </Menu>\n    </React.Fragment>\n  );\n};\n\n/**\n * Construct items for material-ui's Menu, using a template which\n * is partially supporting the Electron Menu API (https://github.com/electron/electron/blob/master/docs/api/menu-item.md).\n *\n * Supported options are:\n *  - click\n *  - visible\n *  - type ('separator' and 'checkbox')\n *  - label\n *  - accelerator\n *  - enabled\n *  - checked (when `type` is 'checkbox')\n *  - submenu\n */\nexport default class MaterialUIMenuImplementation {\n  constructor({ onClose }) {\n    this._onClose = onClose;\n  }\n\n  buildFromTemplate(template) {\n    return template\n      .map((item, id) => {\n        if (item.visible === false) return null;\n\n        // Accelerator is not implemented for Material-UI menus\n        // const accelerator = item.accelerator\n        //   ? adaptAcceleratorString(item.accelerator)\n        //   : undefined;\n\n        if (item.type === 'separator') {\n          return <Divider key={'separator' + id} />;\n          // return null;\n        } else if (item.type === 'checkbox') {\n          return (\n            <MenuItem\n              dense\n              key={'checkbox' + item.label}\n              checked={item.checked}\n              disabled={item.enabled === false}\n              onClick={() => {\n                if (item.enabled === false) {\n                  return;\n                }\n\n                if (item.click) {\n                  item.click();\n                }\n                this._onClose();\n              }}\n            >\n              <ListItemIcon>\n                {item.checked ? <CheckBoxIcon /> : <CheckBoxOutlineBlankIcon />}\n              </ListItemIcon>\n              <ListItemText primary={item.label} />\n            </MenuItem>\n          );\n        } else if (item.submenu) {\n          return (\n            <SubMenuItem\n              key={'submenu' + item.label}\n              item={item}\n              buildFromTemplate={template => this.buildFromTemplate(template)}\n            />\n          );\n        } else {\n          return (\n            <MenuItem\n              dense\n              key={'item' + item.label}\n              disabled={item.enabled === false}\n              onClick={() => {\n                if (item.enabled === false) {\n                  return;\n                }\n\n                if (item.click) {\n                  item.click();\n                  this._onClose();\n                }\n              }}\n            >\n              {item.label}\n            </MenuItem>\n          );\n        }\n      })\n      .filter(Boolean);\n  }\n\n  showMenu() {\n    // Automatically done by IconMenu\n  }\n\n  getMenuProps() {\n    return {};\n  }\n}\n","// TODO: this needs to be flow-typed\nimport React from 'react';\nimport { I18n } from '@lingui/react';\nimport Menu from '@material-ui/core/Menu';\nimport Fade from '@material-ui/core/Fade';\nimport ElectronMenuImplementation from './ElectronMenuImplementation';\nimport MaterialUIMenuImplementation from './MaterialUIMenuImplementation';\nimport optionalRequire from '../../Utils/OptionalRequire.js';\nconst electron = optionalRequire('electron');\n\nclass MaterialUIContextMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      anchorX: 0,\n      anchorY: 0,\n    };\n    this.menuImplementation = new MaterialUIMenuImplementation({\n      onClose: this._onClose,\n    });\n  }\n\n  open = (x, y) => {\n    this.setState(\n      {\n        anchorX: x,\n        anchorY: y,\n      },\n      () => {\n        this.setState({\n          open: true,\n        });\n      }\n    );\n  };\n\n  _onClose = () => {\n    this.setState({\n      open: false,\n    });\n  };\n\n  render() {\n    return this.state.open ? (\n      <I18n>\n        {({ i18n }) => (\n          <Menu\n            open={this.state.open}\n            anchorPosition={{\n              left: this.state.anchorX,\n              top: this.state.anchorY,\n            }}\n            anchorReference={'anchorPosition'}\n            onClose={this._onClose}\n            TransitionComponent={Fade}\n            {...this.menuImplementation.getMenuProps()}\n          >\n            {this.menuImplementation.buildFromTemplate(\n              this.props.buildMenuTemplate(i18n)\n            )}\n          </Menu>\n        )}\n      </I18n>\n    ) : // Don't render the menu when it's not opened, as `buildMenuTemplate` could\n    // be running logic to compute some labels or `enabled` flag values - and might\n    // not be prepared to do that when the menu is not opened.\n    null;\n  }\n}\n\nclass ElectronContextMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.menuImplementation = new ElectronMenuImplementation();\n  }\n\n  open = (x, y) => {\n    this.menuImplementation.buildFromTemplate(\n      this.props.buildMenuTemplate(this.props.i18n)\n    );\n    this.menuImplementation.showMenu({\n      left: x || 0,\n      top: y || 0,\n      width: 0,\n      height: 0,\n    });\n  };\n\n  render() {\n    return null;\n  }\n}\n\nconst ElectronContextMenuWrapper = React.forwardRef((props, ref) => {\n  const electronContextMenu = React.useRef(null);\n  React.useImperativeHandle(ref, () => ({\n    open: (x, y) => {\n      if (electronContextMenu.current) electronContextMenu.current.open(x, y);\n    },\n  }));\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <ElectronContextMenu {...props} i18n={i18n} ref={electronContextMenu} />\n      )}\n    </I18n>\n  );\n});\n\nexport default (electron ? ElectronContextMenuWrapper : MaterialUIContextMenu);\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ResourceKind } from '../ResourceSource';\nimport ImageThumbnail from './ImageThumbnail';\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcesLoader: typeof ResourcesLoader,\n  style?: Object,\n  selectable?: boolean,\n  selected?: boolean,\n  onSelect?: boolean => void,\n  onContextMenu?: (number, number) => void,\n|};\n\ntype State = {|\n  resourceKind: ?ResourceKind,\n|};\n\n/**\n * Display the right thumbnail for any given resource of a project\n */\nexport default class ResourceThumbnail extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = this._loadFrom(props);\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      newProps.resourceName !== this.props.resourceName ||\n      newProps.project !== this.props.project\n    ) {\n      this.setState(this._loadFrom(newProps));\n    }\n  }\n\n  _loadFrom(props: Props): State {\n    const { project, resourceName } = props;\n    const resourcesManager = project.getResourcesManager();\n    const resourceKind = resourcesManager.hasResource(resourceName)\n      ? resourcesManager.getResource(resourceName).getKind()\n      : null;\n\n    return {\n      resourceKind,\n    };\n  }\n\n  render() {\n    const { resourceKind } = this.state;\n\n    switch (resourceKind) {\n      case 'image':\n        return (\n          <ImageThumbnail\n            project={this.props.project}\n            resourceName={this.props.resourceName}\n            resourcesLoader={this.props.resourcesLoader}\n            style={this.props.style}\n            selectable={this.props.selectable}\n            selected={this.props.selected}\n            onSelect={this.props.onSelect}\n            onContextMenu={this.props.onContextMenu}\n          />\n        );\n      default:\n        return null;\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../ResourcesLoader';\nimport ResourceSelector from './ResourceSelector';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n  type ResourceKind,\n} from './ResourceSource';\nimport ResourceThumbnail from './ResourceThumbnail';\nimport { type ResourceExternalEditor } from './ResourceExternalEditor.flow';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  resourceKind: ResourceKind,\n  resourceName: string,\n  onChange: string => void,\n  floatingLabelText?: React.Node,\n  hintText?: MessageDescriptor,\n|};\n\nconst styles = {\n  container: { flex: 1, display: 'flex', alignItems: 'flex-end' },\n  selectorContainer: { flex: 1 },\n  resourceThumbnail: { marginLeft: 10, marginBottom: 4 },\n};\n\nconst ResourceSelectorWithThumbnail = ({\n  project,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  resourceKind,\n  resourceName,\n  onChange,\n  floatingLabelText,\n  hintText,\n}: Props) => {\n  return (\n    <div style={styles.container}>\n      <div style={styles.selectorContainer}>\n        <ResourceSelector\n          project={project}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceExternalEditors={resourceExternalEditors}\n          resourcesLoader={ResourcesLoader}\n          resourceKind={resourceKind}\n          fullWidth\n          initialResourceName={resourceName}\n          onChange={onChange}\n          floatingLabelText={floatingLabelText}\n          hintText={hintText}\n        />\n      </div>\n      <ResourceThumbnail\n        resourceName={resourceName}\n        resourcesLoader={ResourcesLoader}\n        project={project}\n        style={styles.resourceThumbnail}\n      />\n    </div>\n  );\n};\n\nexport default ResourceSelectorWithThumbnail;\n","// @flow\nimport * as React from 'react';\n\nexport type UnsavedChanges = {|\n  hasUnsavedChanges: boolean,\n  sealUnsavedChanges: () => void,\n  triggerUnsavedChanges: () => void,\n|};\n\nconst initialState: UnsavedChanges = {\n  hasUnsavedChanges: false,\n  sealUnsavedChanges: () => {},\n  triggerUnsavedChanges: () => {},\n};\n\nconst UnsavedChangesContext = React.createContext<UnsavedChanges>(initialState);\n\nexport default UnsavedChangesContext;\n\ntype State = {|\n  hasUnsavedChanges: boolean,\n|};\n\ntype Props = {|\n  children?: React.Node,\n|};\n\nexport class UnsavedChangesContextProvider extends React.Component<\n  Props,\n  State\n> {\n  state = { hasUnsavedChanges: false };\n  triggerUnsavedChanges = (): void => {\n    if (!this.state.hasUnsavedChanges)\n      this.setState({ hasUnsavedChanges: true });\n  };\n\n  sealUnsavedChanges = (): void => {\n    if (this.state.hasUnsavedChanges)\n      this.setState({ hasUnsavedChanges: false });\n  };\n\n  render() {\n    const unsavedChanges: UnsavedChanges = {\n      ...this.state,\n      triggerUnsavedChanges: this.triggerUnsavedChanges,\n      sealUnsavedChanges: this.sealUnsavedChanges,\n    };\n\n    return (\n      <UnsavedChangesContext.Provider value={unsavedChanges}>\n        {this.props.children}\n      </UnsavedChangesContext.Provider>\n    );\n  }\n}\n","import React from 'react';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport { SortableHandle } from 'react-sortable-hoc';\n\nconst styles = {\n  handle: {\n    display: 'flex',\n    cursor: 'move',\n  },\n  disabledHandle: {\n    display: 'flex',\n    opacity: 0.4,\n  },\n  handleColor: '#DDD',\n};\n\nconst DragHandle = SortableHandle(props => (\n  <span style={props.disabled ? styles.disabledHandle : styles.handle}>\n    <DragHandleIcon htmlColor={styles.handleColor} />\n  </span>\n));\nexport default DragHandle;\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport { Line, Column } from './Grid';\n\ntype Props = {|\n  children: React.Node,\n  renderButtons: () => React.Node,\n|};\n\n/**\n * A placeholder for when there is no content to display.\n * Also take a look at EmptyMessage for a less visible message.\n */\nexport const EmptyPlaceholder = (props: Props) => (\n  <Column alignItems=\"center\">\n    <Paper\n      variant=\"outlined\"\n      style={{\n        maxWidth: '450px',\n        whiteSpace: 'normal',\n      }}\n    >\n      <Column>\n        {props.children}\n        <Line expand justifyContent=\"flex-end\">\n          {props.renderButtons()}\n        </Line>\n      </Column>\n    </Paper>\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport PlaceholderLoader from '../PlaceholderLoader';\nimport PlaceholderError from '../PlaceholderError';\nimport ErrorBoundary from '../ErrorBoundary';\nimport { AutoSizer, Grid } from 'react-virtualized';\nimport EmptyMessage from '../EmptyMessage';\n\ntype Props<SearchItem> = {|\n  searchItems: ?Array<SearchItem>,\n  getSearchItemUniqueId: (item: SearchItem) => string,\n  renderSearchItem: (\n    item: SearchItem,\n    onHeightComputed: (number) => void\n  ) => React.Node,\n  error: ?Error,\n  onRetry: () => void,\n|};\n\nconst styles = {\n  container: { flex: 1 },\n  grid: { overflowX: 'hidden' },\n};\n\nconst ESTIMATED_ROW_HEIGHT = 90;\n\n/** A virtualized list of search results, caching the searched item heights. */\nexport const ListSearchResults = <SearchItem>({\n  searchItems,\n  getSearchItemUniqueId,\n  renderSearchItem,\n  error,\n  onRetry,\n}: Props<SearchItem>) => {\n  const grid = React.useRef<?Grid>(null);\n\n  // Height of each item is initially unknown. When rendered, the items\n  // are reporting their heights and we cache these values.\n  const cachedHeightsForWidth = React.useRef(0);\n  const cachedHeights = React.useRef({});\n  const onItemHeightComputed = React.useCallback(\n    (searchItem, height) => {\n      if (cachedHeights.current[getSearchItemUniqueId(searchItem)] === height)\n        return false;\n\n      cachedHeights.current[getSearchItemUniqueId(searchItem)] = height;\n      return true;\n    },\n    [getSearchItemUniqueId]\n  );\n  const getRowHeight = React.useCallback(\n    ({ index }) => {\n      if (!searchItems || !searchItems[index]) return ESTIMATED_ROW_HEIGHT;\n\n      const searchItem = searchItems[index];\n      return (\n        cachedHeights.current[getSearchItemUniqueId(searchItem)] ||\n        ESTIMATED_ROW_HEIGHT\n      );\n    },\n    [searchItems, getSearchItemUniqueId]\n  );\n\n  // Render an item, and update the cached height when it's reported\n  const renderRow = React.useCallback(\n    ({ key, rowIndex, style }) => {\n      if (!searchItems) return null;\n\n      const searchItem = searchItems[rowIndex];\n      if (!searchItem) return null;\n\n      return (\n        <div key={key} style={style}>\n          {renderSearchItem(searchItem, height => {\n            const heightWasUpdated = onItemHeightComputed(searchItem, height);\n            if (heightWasUpdated && grid.current) {\n              grid.current.recomputeGridSize(0, rowIndex);\n            }\n          })}\n        </div>\n      );\n    },\n    [searchItems, onItemHeightComputed, renderSearchItem]\n  );\n\n  if (!searchItems) {\n    if (!error) return <PlaceholderLoader />;\n    else {\n      return (\n        <PlaceholderError onRetry={onRetry}>\n          <Trans>\n            Can't load the results. Verify your internet connection or retry\n            later.\n          </Trans>\n        </PlaceholderError>\n      );\n    }\n  } else if (searchItems.length === 0) {\n    return (\n      <EmptyMessage>\n        <Trans>\n          No results returned for your search. Try something else or browse the\n          categories.\n        </Trans>\n      </EmptyMessage>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div style={styles.container}>\n        <AutoSizer>\n          {({ width, height }) => {\n            if (!width || !height) return null;\n\n            // Reset the cached heights in case the width changed.\n            if (cachedHeightsForWidth.current !== width) {\n              cachedHeights.current = {};\n              cachedHeightsForWidth.current = width;\n            }\n\n            return (\n              <Grid\n                ref={el => {\n                  if (el) {\n                    // Ensure the grid is recomputed for heights once it is rendered.\n                    el.recomputeGridSize(0, 0);\n                  }\n                  grid.current = el;\n                }}\n                width={width}\n                height={height}\n                columnCount={1}\n                columnWidth={width}\n                rowHeight={getRowHeight}\n                rowCount={searchItems.length}\n                cellRenderer={renderRow}\n                style={styles.grid}\n              />\n            );\n          }}\n        </AutoSizer>\n      </div>\n    </ErrorBoundary>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport Chip from '@material-ui/core/Chip';\nimport FaceIcon from '@material-ui/icons/Face';\nimport { type UserPublicProfileSearch } from '../Utils/GDevelopServices/User';\nimport PublicProfileContext from '../Profile/PublicProfileContext';\n\nconst styles = {\n  chip: {\n    marginRight: 2,\n  },\n};\n\ntype Props = {|\n  user: UserPublicProfileSearch,\n  isClickable?: boolean,\n|};\n\nexport const UserPublicProfileChip = ({ user, isClickable = false }: Props) => {\n  const { openUserPublicProfile } = React.useContext(PublicProfileContext);\n\n  return (\n    <Chip\n      icon={<FaceIcon />}\n      size=\"small\"\n      style={styles.chip}\n      label={user.username}\n      key={user.username}\n      onClick={isClickable ? () => openUserPublicProfile(user.id) : null}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport CommandManager, { CommandManagerInterface } from './CommandManager';\nimport useRefInit from './UseRefInitHook';\n\nconst CommandsContext = React.createContext<CommandManagerInterface>(\n  new CommandManager()\n);\n\ntype Props = {\n  children: React.Node,\n};\n\nexport const CommandsContextProvider = (props: Props) => {\n  const commandManager = useRefInit<CommandManager>(() => new CommandManager());\n\n  return (\n    <CommandsContext.Provider value={commandManager}>\n      {props.children}\n    </CommandsContext.Provider>\n  );\n};\n\nexport default CommandsContext;\n","// @flow\n\nimport values from 'lodash/values';\n\nexport type InstructionsListContext = {|\n  isCondition: boolean,\n  instrsList: gdInstructionsList,\n|};\n\nexport type InstructionContext = {|\n  isCondition: boolean,\n  instrsList: gdInstructionsList,\n  instruction: gdInstruction,\n  indexInList: number,\n|};\n\nexport type ParameterContext = {|\n  isCondition: boolean,\n  instrsList: gdInstructionsList,\n  instruction: gdInstruction,\n  indexInList: number,\n  parameterIndex: number,\n  domEvent?: any,\n|};\n\nexport type EventContext = {|\n  eventsList: gdEventsList,\n  event: gdBaseEvent,\n  indexInList: number,\n|};\n\nexport type SelectionState = {\n  selectedInstructions: { [number]: InstructionContext },\n  selectedInstructionsLists: { [number]: InstructionsListContext },\n  selectedEvents: { [number]: EventContext },\n};\n\nexport const getInitialSelection = () => {\n  return {\n    selectedInstructions: {},\n    selectedEvents: {},\n    selectedInstructionsLists: {},\n  };\n};\n\nexport const getSelectedEvents = (selection: SelectionState): Array<Object> => {\n  return values(selection.selectedEvents).map(\n    (eventContext: EventContext) => eventContext.event\n  );\n};\n\nexport const getSelectedEventContexts = (\n  selection: SelectionState\n): Array<EventContext> => {\n  return values(selection.selectedEvents);\n};\n\nexport const getSelectedInstructions = (\n  selection: SelectionState\n): Array<gdInstruction> => {\n  return values(selection.selectedInstructions).map(\n    (instructionContext: InstructionContext) => instructionContext.instruction\n  );\n};\n\nexport const getSelectedInstructionsContexts = (\n  selection: SelectionState\n): Array<InstructionContext> => {\n  return values(selection.selectedInstructions);\n};\n\nexport const getSelectedInstructionsListsContexts = (\n  selection: SelectionState\n): Array<InstructionContext> => {\n  return values(selection.selectedInstructionsLists);\n};\n\nexport const isEventSelected = (\n  selection: SelectionState,\n  event: Object\n): boolean => {\n  return !!selection.selectedEvents[event.ptr];\n};\n\nexport const isInstructionSelected = (\n  selection: SelectionState,\n  instruction: gdInstruction\n): boolean => {\n  return !!selection.selectedInstructions[instruction.ptr];\n};\n\nexport const isInstructionsListSelected = (\n  selection: SelectionState,\n  instructionsList: gdInstructionsList\n): boolean => {\n  return !!selection.selectedInstructionsLists[instructionsList.ptr];\n};\n\nexport const hasEventSelected = (selection: SelectionState): boolean => {\n  return !!Object.keys(selection.selectedEvents).length;\n};\n\nexport const hasInstructionSelected = (selection: SelectionState): boolean => {\n  return !!Object.keys(selection.selectedInstructions).length;\n};\n\nexport const hasSelectedAtLeastOneCondition = (\n  selection: SelectionState\n): boolean => {\n  for (let instructionContext of getSelectedInstructionsContexts(selection)) {\n    if (instructionContext.isCondition) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport const hasInstructionsListSelected = (\n  selection: SelectionState\n): boolean => {\n  return !!Object.keys(selection.selectedInstructionsLists).length;\n};\n\nexport const hasSomethingSelected = (selection: SelectionState): boolean => {\n  return (\n    hasInstructionSelected(selection) ||\n    hasInstructionsListSelected(selection) ||\n    hasEventSelected(selection)\n  );\n};\n\nexport const clearSelection = (): SelectionState => {\n  return getInitialSelection();\n};\n\nexport const selectEvent = (\n  selection: SelectionState,\n  eventContext: EventContext,\n  multiSelection: boolean = false\n): SelectionState => {\n  const event = eventContext.event;\n  if (isEventSelected(selection, event)) return selection;\n\n  const existingSelection = multiSelection ? selection : clearSelection();\n  return {\n    ...existingSelection,\n    selectedEvents: {\n      ...existingSelection.selectedEvents,\n      [event.ptr]: eventContext,\n    },\n  };\n};\n\nexport const selectInstruction = (\n  selection: SelectionState,\n  instructionContext: InstructionContext,\n  multiSelection: boolean = false\n): SelectionState => {\n  const instruction: gdInstruction = instructionContext.instruction;\n  if (isInstructionSelected(selection, instruction)) return selection;\n\n  const existingSelection = multiSelection ? selection : clearSelection();\n  return {\n    ...existingSelection,\n    selectedInstructions: {\n      ...existingSelection.selectedInstructions,\n      [instruction.ptr]: instructionContext,\n    },\n  };\n};\n\nexport const selectInstructionsList = (\n  selection: SelectionState,\n  instructionsListContext: InstructionsListContext,\n  multiSelection: boolean = false\n): SelectionState => {\n  const instructionsList: gdInstructionsList =\n    instructionsListContext.instrsList;\n  if (isInstructionsListSelected(selection, instructionsList)) return selection;\n\n  const existingSelection = multiSelection ? selection : clearSelection();\n  return {\n    ...existingSelection,\n    selectedInstructionsLists: {\n      ...existingSelection.selectedInstructionsLists,\n      [instructionsList.ptr]: instructionsListContext,\n    },\n  };\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { List, type ListItemRefType } from '../../../UI/List';\nimport SearchBar, { useShouldAutofocusSearchbar } from '../../../UI/SearchBar';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport {\n  type TreeNode,\n  findInTree,\n} from '../../../InstructionOrExpression/CreateTree';\nimport { filterInstructionsList } from '../../../InstructionOrExpression/EnumerateInstructions';\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\nimport { renderInstructionOrExpressionListItem } from '../SelectorListItems/SelectorInstructionOrExpressionListItem';\nimport { renderInstructionOrExpressionTree } from '../SelectorListItems/SelectorInstructionsTreeListItem';\nimport EmptyMessage from '../../../UI/EmptyMessage';\nimport ScrollView, { type ScrollViewInterface } from '../../../UI/ScrollView';\nimport { Line } from '../../../UI/Grid';\nimport { getInstructionListItemValue } from '../SelectorListItems/Keys';\n\nconst styles = {\n  searchBar: {\n    backgroundColor: 'transparent',\n    flexShrink: 0,\n    zIndex: 1, // Put the SearchBar in front of the list, to display the shadow\n  },\n};\n\ntype Props<T> = {|\n  focusOnMount?: boolean,\n  instructionsInfo: Array<T>,\n  instructionsInfoTree: TreeNode<T>,\n  selectedType: string,\n  onChoose: (type: string, T) => void,\n  iconSize: number,\n  useSubheaders?: boolean,\n  searchPlaceholderObjectName?: ?string,\n  searchPlaceholderIsCondition?: ?boolean,\n  helpPagePath?: ?string,\n  style?: Object,\n|};\ntype State<T> = {|\n  searchText: string,\n  searchResults: Array<T>,\n|};\n\nexport default class InstructionOrExpressionSelector<\n  T: EnumeratedInstructionOrExpressionMetadata\n> extends React.PureComponent<Props<T>, State<T>> {\n  state: State<T> = {\n    searchText: '',\n    searchResults: [],\n  };\n  _searchBar: ?SearchBar;\n  _scrollView = React.createRef<ScrollViewInterface>();\n  _selectedItem = React.createRef<ListItemRefType>();\n\n  initialInstructionTypePath = findInTree(\n    this.props.instructionsInfoTree,\n    this.props.selectedType\n  );\n\n  componentDidMount() {\n    if (\n      this.props.focusOnMount &&\n      useShouldAutofocusSearchbar() &&\n      this._searchBar\n    ) {\n      this._searchBar.focus();\n    }\n    if (this._selectedItem.current && this._scrollView.current) {\n      this._scrollView.current.scrollTo(this._selectedItem.current);\n    }\n  }\n\n  focus = () => {\n    if (this._searchBar) this._searchBar.focus();\n  };\n\n  render() {\n    const {\n      selectedType,\n      iconSize,\n      instructionsInfoTree,\n      onChoose,\n      searchPlaceholderObjectName,\n      searchPlaceholderIsCondition,\n      useSubheaders,\n      helpPagePath,\n      style,\n    } = this.props;\n    const { searchText } = this.state;\n    const displayedInstructionsList: Array<T> = searchText\n      ? filterInstructionsList(this.props.instructionsInfo, { searchText })\n      : [];\n    const hasResults = !searchText || !!displayedInstructionsList.length;\n\n    const onSubmitSearch = () => {\n      if (!displayedInstructionsList.length) return;\n\n      onChoose(displayedInstructionsList[0].type, displayedInstructionsList[0]);\n    };\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div\n            style={{\n              backgroundColor: muiTheme.list.itemsBackgroundColor,\n              ...style,\n            }}\n          >\n            <SearchBar\n              value={searchText}\n              onChange={searchText =>\n                this.setState({\n                  searchText,\n                })\n              }\n              onRequestSearch={onSubmitSearch}\n              style={styles.searchBar}\n              placeholder={\n                searchPlaceholderObjectName\n                  ? searchPlaceholderIsCondition\n                    ? t`Search ${searchPlaceholderObjectName} conditions`\n                    : t`Search ${searchPlaceholderObjectName} actions`\n                  : undefined\n              }\n              helpPagePath={helpPagePath}\n              ref={searchBar => (this._searchBar = searchBar)}\n            />\n            <ScrollView\n              ref={\n                // $FlowFixMe - improper typing of ScrollView?\n                this._scrollView\n              }\n            >\n              {hasResults && (\n                <List>\n                  {searchText\n                    ? displayedInstructionsList.map(\n                        enumeratedInstructionOrExpressionMetadata =>\n                          renderInstructionOrExpressionListItem({\n                            instructionOrExpressionMetadata: enumeratedInstructionOrExpressionMetadata,\n                            iconSize: iconSize,\n                            onClick: () =>\n                              onChoose(\n                                enumeratedInstructionOrExpressionMetadata.type,\n                                enumeratedInstructionOrExpressionMetadata\n                              ),\n                            selectedValue: getInstructionListItemValue(\n                              selectedType\n                            ),\n                          })\n                      )\n                    : renderInstructionOrExpressionTree({\n                        instructionTreeNode: instructionsInfoTree,\n                        iconSize,\n                        onChoose,\n                        useSubheaders,\n                        selectedValue: getInstructionListItemValue(\n                          selectedType\n                        ),\n                        initiallyOpenedPath: this.initialInstructionTypePath,\n                        selectedItemRef: this._selectedItem,\n                      })}\n                </List>\n              )}\n              {!hasResults && (\n                <Line>\n                  <EmptyMessage>\n                    <Trans>\n                      Nothing corresponding to your search. Try browsing the\n                      list instead.\n                    </Trans>\n                  </EmptyMessage>\n                </Line>\n              )}\n            </ScrollView>\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { type AlertMessageIdentifier } from '../MainFrame/Preferences/PreferencesContext';\n\nexport type Hint = {|\n  kind: 'warning' | 'info',\n  message: MessageDescriptor,\n  identifier?: AlertMessageIdentifier,\n|};\n\nexport const getDeprecatedBehaviorsInformation = (): {\n  [string]: {| warning: MessageDescriptor |},\n} => ({\n  'PhysicsBehavior::PhysicsBehavior': {\n    warning: t`A new physics engine (Physics Engine 2.0) is now available. You should prefer using it for new game. For existing games, note that the two behaviors are not compatible, so you should only use one of them with your objects.`,\n  },\n});\n\nexport const getExperimentalObjects = (): {\n  [string]: boolean,\n} => ({\n  'BitmapText::BitmapTextObject': true,\n  'TileMap::TileMap': true,\n});\n\nexport const getExtraObjectsInformation = (): {\n  [string]: Array<Hint>,\n} => ({\n  'Video::VideoObject': [\n    {\n      kind: 'warning',\n      message: t`Most browsers will require the user to have interacted with your game before allowing any video to play. Make sure that the player click/touch the screen at the beginning of the game before starting any video.`,\n    },\n    {\n      kind: 'warning',\n      message: t`For a given video resource, only one video will be played in memory and displayed. If you put this object multiple times on the scene, all the instances will be displaying the exact same video (with the same timing and paused/played/stopped state).`,\n    },\n    {\n      kind: 'info',\n      message: t`Video format supported can vary according to devices and browsers. For maximum compatibility, use H.264/mp4 file format (and AAC for audio).`,\n    },\n  ],\n  'BitmapText::BitmapTextObject': [\n    {\n      kind: 'warning',\n      message: t`This object is experimental and not yet complete. It might have bugs or incomplete support in GDevelop, be sure to read the wiki by clicking on help button bellow.`,\n    },\n    {\n      kind: 'info',\n      message: t`For a pixel type font, you must disable the Smooth checkbox related to your texture in the game resources to disable anti-aliasing.`,\n    },\n    {\n      kind: 'info',\n      message: t`The font size is stored directly inside the font. If you want to change it, export again your font using an external editor like bmFont. Click on the help button to learn more.`,\n    },\n  ],\n  'TileMap::TileMap': [\n    {\n      kind: 'info',\n      message: t`The tilemap must be designed in a separated program, Tiled, that can be downloaded on mapeditor.org. Save your map as a JSON file, then select here the Atlas image that you used and the Tile map JSON file.`,\n    },\n  ],\n});\n\nexport const getExtraInstructionInformation = (type: string): ?Hint => {\n  if (type.indexOf('PhysicsBehavior::') === 0) {\n    return {\n      kind: 'warning',\n      message: t`This action is deprecated and should not be used anymore. Instead,\n  use for all your objects the behavior called \"Physics2\" and the\n  associated actions (in this case, all objects must be set up to use\n  Physics2, you can't mix the behaviors).`,\n    };\n  }\n  if (type.startsWith('BoundingBox')) {\n    return {\n      kind: 'info',\n      message: t`The bounding box is an imaginary rectangle surrounding the object collision mask. Even if the object X and Y positions are not changed, this rectangle can change if the object is rotated or if an animation is being played. Usually you should use actions and conditions related to the object position or center, but the bounding box can be useful to deal with the area of the object.`,\n    };\n  }\n  if (type === 'BitmapText::Scale') {\n    return {\n      kind: 'info',\n      message: t`A scale under 1 on a Bitmap text object can downgrade the quality text, prefer to remake a bitmap font smaller in the external bmFont editor.`,\n    };\n  }\n  if (type === 'TextObject::Text::SetFontSize') {\n    return {\n      kind: 'warning',\n      message: t`This action will create a new texture and re-render the text each time it is called, which is expensive and can reduce performances. Prefer to avoid changing a lot the character size of a text.`,\n    };\n  }\n  if (type === 'PlayMusicCanal' || type === 'PlayMusic') {\n    return {\n      kind: 'warning',\n      message: t`Musics will only be played if the user has interacted with the game before (by clicking/touching it or pressing a key on the keyboard). This is due to browser limitations. Make sure to have the user interact with the game before using this action.`,\n    };\n  }\n  if (type === 'P2P::OnEvent') {\n    return {\n      kind: 'info',\n      message: t`Read the wiki page for more info about the dataloss mode.`,\n    };\n  }\n  if (type === 'PlatformBehavior::IsObjectOnGivenFloor') {\n    return {\n      kind: 'info',\n      message: t`This condition may have unexpected results when the object is on different floors at the same time, due to the fact that the engine only considers the first floor the object comes into contact with.`,\n    };\n  }\n  if (type === 'P2P::OverrideID') {\n    return {\n      kind: 'warning',\n      message: t`Overriding the ID may have unwanted consequences. Do not use this feature unless you really know what you are doing.`,\n    };\n  }\n  if (type.indexOf('P2P::') === 0) {\n    return {\n      kind: 'warning',\n      message: t`It is recommended to use your own custom broker server. Read the wiki page for more info.`,\n      identifier: 'p2p-broker-recommendation',\n    };\n  }\n  if (type === 'SystemInfo::IsMobile') {\n    return {\n      kind: 'warning',\n      message: t`Note that the distinction between what is a mobile device and what is not is becoming blurry (with devices like iPad pro and other \"desktop-class\" tablets). If you use this for mobile controls, prefer to check if the device has touchscreen support.`,\n    };\n  }\n  if (\n    type === 'AdvancedWindow::SetClosable' ||\n    type === 'AdvancedWindow::EnableWindow' ||\n    type === 'AdvancedWindow::Show' ||\n    type === 'AdvancedWindow::SetFocusable' ||\n    type === 'AdvancedWindow::Focus'\n  ) {\n    return {\n      kind: 'warning',\n      message: t`Be careful with this action, you may have problems exiting the preview if you don't add a way to toggle it back.`,\n    };\n  }\n  if (type === 'GetArgumentAsBoolean') {\n    return {\n      kind: 'info',\n      message: t`If the parameter is a string or a number, you probably want to use the expressions \"GetArgumentAsString\" or \"GetArgumentAsNumber\", along with the conditions \"Compare two strings\" or \"Compare two numbers\".`,\n    };\n  }\n\n  return null;\n};\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport AlertMessage from '../UI/AlertMessage';\nimport Window from '../Utils/Window';\nimport RaisedButton from '../UI/RaisedButton';\nimport YouTubeIcon from '@material-ui/icons/YouTube';\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport { TutorialContext } from '../Tutorial/TutorialContext';\nimport { type Tutorial } from '../Utils/GDevelopServices/Tutorial';\n\ntype Props = {|\n  tutorialId: string,\n|};\n\n/**\n * Show a link to a tutorial that can be permanently hidden. Hidden tutorials\n * will be stored in preferences.\n */\nconst DismissableTutorialMessage = ({ tutorialId }: Props) => {\n  const preferences = React.useContext(PreferencesContext);\n  const { values, showTutorialHint } = preferences;\n  const { tutorials } = React.useContext(TutorialContext);\n\n  if (values.hiddenTutorialHints[tutorialId]) return null;\n\n  if (!tutorials) return null; // Loading or errored, do not display the tutorial.\n  const tutorial: ?Tutorial = tutorials.find(\n    tutorial => tutorial.id === tutorialId\n  );\n  if (!tutorial) {\n    console.warn(`Tutorial ${tutorialId} not found`);\n    return null;\n  }\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <AlertMessage\n          kind={'info'}\n          children={tutorial.title}\n          renderLeftIcon={() => (\n            <img\n              alt=\"\"\n              style={{\n                maxWidth: 128,\n                maxHeight: 128,\n              }}\n              src={tutorial.thumbnailUrl}\n            />\n          )}\n          renderRightButton={() => (\n            <RaisedButton\n              icon={\n                tutorial.type === 'video' ? <YouTubeIcon /> : <MenuBookIcon />\n              }\n              label={\n                tutorial.type === 'video' ? (\n                  <Trans>Watch the tutorial</Trans>\n                ) : (\n                  <Trans>Read the tutorial</Trans>\n                )\n              }\n              onClick={() => {\n                Window.openExternalURL(tutorial.link);\n              }}\n            />\n          )}\n          onHide={() => {\n            showTutorialHint(tutorialId, false);\n          }}\n        />\n      )}\n    </I18n>\n  );\n};\n\nexport default DismissableTutorialMessage;\n","// @flow\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\nimport { mapVector } from '../Utils/MapFor';\nimport {\n  enumerateNamedPropertyDescriptorsList,\n  toGdPropertyDescriptor,\n} from './EnumerateProperties';\nconst gd: libGDevelop = global.gd;\n\n// This file contains the logic to declare extension metadata from\n// events functions or events based behaviors.\n// These are basically adapters from EventsFunctionsExtension, and children, to a\n// real extension declaration (like in `JsExtension.js` or `Extension.cpp` files).\n\n/**\n * Declare an extension from an events based extension.\n */\nexport const declareExtension = (\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) => {\n  extension\n    .setExtensionInformation(\n      eventsFunctionsExtension.getName(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      eventsFunctionsExtension.getDescription(),\n      eventsFunctionsExtension.getAuthor(),\n      ''\n    )\n    .setExtensionHelpPath(eventsFunctionsExtension.getHelpPath())\n    .setIconUrl(eventsFunctionsExtension.getIconUrl());\n\n  declareExtensionDependencies(extension, eventsFunctionsExtension);\n};\n\n/**\n * Declare the dependencies of an extension from an events based extension.\n */\nexport const declareExtensionDependencies = (\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) =>\n  mapVector<gdDependencyMetadata, void>(\n    eventsFunctionsExtension.getAllDependencies(),\n    dependency => extension.addDependency().copyFrom(dependency)\n  );\n\nconst getExtensionIconUrl = (extension: gdPlatformExtension) => {\n  return extension.getIconUrl() || 'res/function24.png';\n};\n\n/**\n * Declare the behavior for the given\n * events based behavior.\n */\nexport const declareBehaviorMetadata = (\n  extension: gdPlatformExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior\n): gdBehaviorMetadata => {\n  const generatedBehavior = new gd.BehaviorJsImplementation();\n\n  // We enumerate the properties of the behavior from a list of gdNamedPropertyDescriptor\n  // to an array of JavaScript objects. This is important to ensure that the functions\n  // below are not keeping any reference to eventsBasedBehavior.\n  //\n  // We could in theory keep a reference to eventsBasedBehavior, and avoid using\n  // `enumerateNamedPropertyDescriptorsList` and `toGdPropertyDescriptor`.\n  // This should be safe as if eventsBasedBehavior is deleted (i.e: the behavior\n  // is removed from its extension), then the extension will be re-generated.\n  //\n  // In practice, we don't want to risk keeping this references, because if at some point\n  // we delete the eventsBasedBehavior and forget to remove the extension, then the\n  // extension will use a deleted object and crash the app. Instead, we convert the\n  // properties to an array of JavaScript objects, so that we're guaranteed that the\n  // lifetime of these properties is the same as the lifetime of these functions (i.e:\n  // we use the JS garbage collector).\n  const enumeratedProperties = enumerateNamedPropertyDescriptorsList(\n    eventsBasedBehavior.getPropertyDescriptors()\n  );\n\n  // $FlowExpectedError - we're creating a behavior\n  generatedBehavior.updateProperty = function(\n    behaviorContent: gdSerializerElement,\n    propertyName: string,\n    newValue: string\n  ) {\n    const enumeratedProperty = enumeratedProperties.find(\n      enumeratedProperty => enumeratedProperty.name === propertyName\n    );\n    if (!enumeratedProperty) return false;\n\n    const element = behaviorContent.addChild(propertyName);\n    const propertyType: string = enumeratedProperty.type;\n\n    if (\n      propertyType === 'String' ||\n      propertyType === 'Choice' ||\n      propertyType === 'Color' ||\n      propertyType === 'Behavior'\n    ) {\n      element.setStringValue(newValue);\n    } else if (propertyType === 'Number') {\n      element.setDoubleValue(parseFloat(newValue));\n    } else if (propertyType === 'Boolean') {\n      element.setBoolValue(newValue === '1');\n    }\n\n    return true;\n  };\n\n  // $FlowExpectedError - we're creating a behavior\n  generatedBehavior.getProperties = function(behaviorContent) {\n    var behaviorProperties = new gd.MapStringPropertyDescriptor();\n\n    enumeratedProperties.forEach(enumeratedProperty => {\n      const propertyName = enumeratedProperty.name;\n      const propertyType = enumeratedProperty.type;\n      const newProperty = toGdPropertyDescriptor(\n        enumeratedProperty,\n        behaviorProperties.getOrCreate(propertyName)\n      );\n\n      if (behaviorContent.hasChild(propertyName)) {\n        if (\n          propertyType === 'String' ||\n          propertyType === 'Choice' ||\n          propertyType === 'Color' ||\n          propertyType === 'Behavior'\n        ) {\n          newProperty.setValue(\n            behaviorContent.getChild(propertyName).getStringValue()\n          );\n        } else if (propertyType === 'Number') {\n          newProperty.setValue(\n            '' + behaviorContent.getChild(propertyName).getDoubleValue()\n          );\n        } else if (propertyType === 'Boolean') {\n          newProperty.setValue(\n            behaviorContent.getChild(propertyName).getBoolValue()\n              ? 'true'\n              : 'false'\n          );\n        }\n      } else {\n        // No value was serialized for this property. `newProperty`\n        // will have the default value coming from `enumeratedProperty`.\n      }\n    });\n\n    return behaviorProperties;\n  };\n\n  // $FlowExpectedError - we're creating a behavior\n  generatedBehavior.initializeContent = function(behaviorContent) {\n    enumeratedProperties.forEach(enumeratedProperty => {\n      const element = behaviorContent.addChild(enumeratedProperty.name);\n      const propertyType: string = enumeratedProperty.type;\n\n      if (\n        propertyType === 'String' ||\n        propertyType === 'Choice' ||\n        propertyType === 'Color' ||\n        propertyType === 'Behavior'\n      ) {\n        element.setStringValue(enumeratedProperty.value);\n      } else if (propertyType === 'Number') {\n        element.setDoubleValue(parseFloat(enumeratedProperty.value) || 0);\n      } else if (propertyType === 'Boolean') {\n        element.setBoolValue(enumeratedProperty.value === 'true');\n      }\n    });\n  };\n\n  return extension\n    .addBehavior(\n      eventsBasedBehavior.getName(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      eventsBasedBehavior.getName(), // Default name is the name\n      eventsBasedBehavior.getDescription(),\n      '',\n      getExtensionIconUrl(extension),\n      eventsBasedBehavior.getName(), // Class name is the name, actually unused\n      generatedBehavior,\n      new gd.BehaviorsSharedData()\n    )\n    .setObjectType(eventsBasedBehavior.getObjectType());\n};\n\n/**\n * Check if the name of the function is the name of a lifecycle function (for events-based behaviors),\n * that will be called automatically by the game engine.\n */\nexport const isBehaviorLifecycleEventsFunction = (functionName: string) => {\n  return (\n    [\n      'onCreated',\n      'onActivate',\n      'onDeActivate',\n      'doStepPreEvents',\n      'doStepPostEvents',\n      'onDestroy',\n      // Compatibility with GD <= 5.0 beta 75\n      'onOwnerRemovedFromScene',\n      // end of compatibility code\n    ].indexOf(functionName) !== -1\n  );\n};\n\n/**\n * Check if the name of the function is the name of a lifecycle function (for events-based extensions),\n * that will be called automatically by the game engine.\n */\nexport const isExtensionLifecycleEventsFunction = (functionName: string) => {\n  return gd.EventsFunctionsExtension.isExtensionLifecycleEventsFunction(\n    functionName\n  );\n};\n\n/**\n * Declare the instruction (action/condition) or expression for the given\n * (free) events function.\n */\nexport const declareInstructionOrExpressionMetadata = (\n  extension: gdPlatformExtension,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsFunction: gdEventsFunction\n): gdInstructionMetadata | gdExpressionMetadata => {\n  const functionType = eventsFunction.getFunctionType();\n  if (functionType === gd.EventsFunction.Expression) {\n    return extension.addExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      getExtensionIconUrl(extension)\n    );\n  } else if (functionType === gd.EventsFunction.StringExpression) {\n    return extension.addStrExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      getExtensionIconUrl(extension)\n    );\n  } else if (functionType === gd.EventsFunction.Condition) {\n    return extension.addCondition(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      getExtensionIconUrl(extension),\n      getExtensionIconUrl(extension)\n    );\n  } else {\n    return extension.addAction(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsFunctionsExtension.getFullName() ||\n        eventsFunctionsExtension.getName(),\n      getExtensionIconUrl(extension),\n      getExtensionIconUrl(extension)\n    );\n  }\n};\n\n/**\n * Declare the instruction (action/condition) or expression for the given\n * behavior events function.\n */\nexport const declareBehaviorInstructionOrExpressionMetadata = (\n  extension: gdPlatformExtension,\n  behaviorMetadata: gdBehaviorMetadata,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  eventsFunction: gdEventsFunction\n): gdInstructionMetadata | gdExpressionMetadata => {\n  const functionType = eventsFunction.getFunctionType();\n  if (functionType === gd.EventsFunction.Expression) {\n    return behaviorMetadata.addExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      getExtensionIconUrl(extension)\n    );\n  } else if (functionType === gd.EventsFunction.StringExpression) {\n    return behaviorMetadata.addStrExpression(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      getExtensionIconUrl(extension)\n    );\n  } else if (functionType === gd.EventsFunction.Condition) {\n    // Use the new \"scoped\" way to declare an instruction, because\n    // we want to prevent any conflict between free functions and\n    // behaviors (that can totally have functions with the same name).\n    return behaviorMetadata.addScopedCondition(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      getExtensionIconUrl(extension),\n      getExtensionIconUrl(extension)\n    );\n  } else {\n    // Use the new \"scoped\" way to declare an instruction, because\n    // we want to prevent any conflict between free functions and\n    // behaviors (that can totally have functions with the same name).\n    return behaviorMetadata.addScopedAction(\n      eventsFunction.getName(),\n      eventsFunction.getFullName() || eventsFunction.getName(),\n      eventsFunction.getDescription() || eventsFunction.getFullName(),\n      eventsFunction.getSentence(),\n      eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n      getExtensionIconUrl(extension),\n      getExtensionIconUrl(extension)\n    );\n  }\n};\n\ntype gdInstructionOrExpressionMetadata =\n  | gdInstructionMetadata\n  | gdExpressionMetadata;\n\n/**\n * Declare the instructions (actions/conditions) and expressions for the\n * properties of the given events based behavior.\n * This is akin to what would happen by manually declaring a JS extension\n * (see `JsExtension.js` files of extensions).\n */\nexport const declareBehaviorPropertiesInstructionAndExpressions = (\n  i18n: I18nType,\n  extension: gdPlatformExtension,\n  behaviorMetadata: gdBehaviorMetadata,\n  eventsBasedBehavior: gdEventsBasedBehavior\n): void => {\n  const addObjectAndBehaviorParameters = <T: gdInstructionOrExpressionMetadata>(\n    instructionOrExpression: T\n  ): T => {\n    // By convention, first parameter is always the object:\n    instructionOrExpression.addParameter(\n      'object',\n      'Object',\n      '', // See below for adding the extra information\n      false\n    );\n\n    // Manually add the \"extra info\" without relying on addParameter\n    // as this method is prefixing the value passed with the extension namespace (this\n    // was done to ease extension declarations when dealing with object).\n    instructionOrExpression\n      .getParameter(instructionOrExpression.getParametersCount() - 1)\n      .setExtraInfo(eventsBasedBehavior.getObjectType());\n\n    // By convention, second parameter is always the behavior:\n    instructionOrExpression.addParameter(\n      'behavior',\n      'Behavior',\n      eventsBasedBehavior.getName(),\n      false\n    );\n\n    // All property actions/conditions/expressions are private, meaning\n    // they can only be used from the behavior events.\n    instructionOrExpression.setPrivate();\n\n    return instructionOrExpression;\n  };\n\n  mapVector(eventsBasedBehavior.getPropertyDescriptors(), property => {\n    const propertyType = property.getType();\n    const propertyName = property.getName();\n    const getterName = gd.BehaviorCodeGenerator.getBehaviorPropertyGetterName(\n      propertyName\n    );\n    const setterName = gd.BehaviorCodeGenerator.getBehaviorPropertySetterName(\n      propertyName\n    );\n    const propertyLabel =\n      property.getLabel() || i18n._(t`${propertyName} property`);\n\n    if (propertyType === 'String' || propertyType === 'Choice') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addStrExpression(\n          gd.EventsBasedBehavior.getPropertyExpressionName(propertyName),\n          propertyLabel,\n          propertyLabel,\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Compare the content of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .useStandardRelationalOperatorParameters('string')\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Change the content of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .useStandardOperatorParameters('string')\n        .getCodeExtraInformation()\n        .setFunctionName(setterName)\n        .setManipulatedType('string')\n        .setGetter(getterName);\n    } else if (propertyType === 'Number') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addExpression(\n          gd.EventsBasedBehavior.getPropertyExpressionName(propertyName),\n          propertyLabel,\n          propertyLabel,\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Compare the value of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .useStandardRelationalOperatorParameters('number')\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Change the value of ${propertyLabel}`),\n          i18n._(t`the property ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .useStandardOperatorParameters('number')\n        .getCodeExtraInformation()\n        .setFunctionName(setterName)\n        .setGetter(getterName);\n    } else if (propertyType === 'Boolean') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Check the value of ${propertyLabel}`),\n          i18n._(t`Property ${propertyName} of _PARAM0_ is true`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Update the value of ${propertyLabel}`),\n          i18n._(t`Set property ${propertyName} of _PARAM0_ to _PARAM2_`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .addParameter('yesorno', i18n._(t`New value to set`), '', false)\n        .getCodeExtraInformation()\n        .setFunctionName(setterName);\n    } else if (propertyType === 'Color') {\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedCondition(\n          gd.EventsBasedBehavior.getPropertyConditionName(propertyName),\n          propertyLabel,\n          i18n._(t`Check the color ${propertyLabel}`),\n          i18n._(t`Color ${propertyName}`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .useStandardRelationalOperatorParameters('color')\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addScopedAction(\n          gd.EventsBasedBehavior.getPropertyActionName(propertyName),\n          propertyLabel,\n          i18n._(t`Update the color of ${propertyLabel}`),\n          i18n._(t`Change color ${propertyName} of _PARAM0_ to _PARAM2_`),\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .addParameter('color', i18n._(t`New color to set`), '', false)\n        .getCodeExtraInformation()\n        .setFunctionName(setterName);\n\n      addObjectAndBehaviorParameters(\n        behaviorMetadata.addStrExpression(\n          gd.EventsBasedBehavior.getPropertyExpressionName(propertyName),\n          propertyLabel,\n          propertyLabel,\n          eventsBasedBehavior.getFullName() || eventsBasedBehavior.getName(),\n          getExtensionIconUrl(extension)\n        )\n      )\n        .getCodeExtraInformation()\n        .setFunctionName(getterName);\n    }\n  });\n};\n\n/**\n * Add to the instruction (action/condition) or expression the parameters\n * expected by the events function.\n */\nexport const declareEventsFunctionParameters = (\n  eventsFunction: gdEventsFunction,\n  instructionOrExpression: gdInstructionMetadata | gdExpressionMetadata\n) => {\n  mapVector(\n    eventsFunction.getParameters(),\n    (parameter: gdParameterMetadata) => {\n      if (!parameter.isCodeOnly()) {\n        instructionOrExpression.addParameter(\n          parameter.getType(),\n          parameter.getDescription(),\n          '', // See below for adding the extra information\n          parameter.isOptional()\n        );\n        instructionOrExpression.setParameterLongDescription(\n          parameter.getLongDescription()\n        );\n      } else {\n        instructionOrExpression.addCodeOnlyParameter(\n          parameter.getType(),\n          '' // See below for adding the extra information\n        );\n      }\n      // Manually add the \"extra info\" without relying on addParameter (or addCodeOnlyParameter)\n      // as these methods are prefixing the value passed with the extension namespace (this\n      // was done to ease extension declarations when dealing with object).\n      instructionOrExpression\n        .getParameter(instructionOrExpression.getParametersCount() - 1)\n        .setExtraInfo(parameter.getExtraInfo());\n    }\n  );\n\n  // By convention, latest parameter is always the eventsFunctionContext of the calling function\n  // (if any).\n  instructionOrExpression.addCodeOnlyParameter('eventsFunctionContext', '');\n};\n","throw new Error(\n  'This is a fake @blueprintjs/core (or @blueprintjs/icons) package that is just throwing an' +\n    \" error. It's used by react-mosaic, which will fallback to using something else.\" +\n    'This is useful for avoiding webpack/create-react-app warnings in the development' +\n    'console about a missing package - while avoiding to import blueprint.'\n);\n","// @flow\nconst gd: libGDevelop = global.gd;\n\n/**\n * Represents a list of selected instances.\n */\nexport default class InstancesSelection {\n  selection: Array<gdInitialInstance> = [];\n\n  hasSelectedInstances() {\n    return !!this.getSelectedInstances().length;\n  }\n\n  getSelectedInstances() {\n    return this.selection;\n  }\n\n  isInstanceSelected(instance: gdInitialInstance) {\n    for (var i = 0; i < this.selection.length; i++) {\n      if (gd.compare(this.selection[i], instance)) return true;\n    }\n\n    return false;\n  }\n\n  clearSelection() {\n    this.selection.length = 0;\n  }\n\n  selectInstance(\n    instance: gdInitialInstance,\n    multiselect: boolean,\n    layersVisibility: ?{ [string]: boolean } = null\n  ) {\n    if (this.isInstanceSelected(instance)) {\n      if (multiselect) this.unselectInstance(instance);\n\n      return;\n    }\n\n    if (!multiselect) this.clearSelection();\n\n    if (!layersVisibility || layersVisibility[instance.getLayer()]) {\n      this.selection.push(instance);\n    }\n  }\n\n  selectInstances(\n    instances: Array<gdInitialInstance>,\n    multiselect: boolean,\n    layersVisibility: ?{ [string]: boolean } = null\n  ) {\n    if (!multiselect) this.clearSelection();\n\n    instances.forEach(instance =>\n      this.selectInstance(instance, true, layersVisibility)\n    );\n  }\n\n  unselectInstance(instance: gdInitialInstance) {\n    if (this.isInstanceSelected(instance)) {\n      var i = this.selection.length - 1;\n      while (i >= -1 && this.selection[i].ptr !== instance.ptr) {\n        --i;\n      }\n\n      this.selection.splice(i, 1);\n    }\n  }\n\n  unselectInstancesOfObject(objectName: string) {\n    for (let i = 0; i < this.selection.length; ) {\n      if (this.selection[i].getObjectName() === objectName) {\n        this.selection.splice(i, 1);\n      } else {\n        i++;\n      }\n    }\n  }\n\n  unselectInstancesOnLayer(layerName: string) {\n    for (let i = 0; i < this.selection.length; ) {\n      if (this.selection[i].getLayer() === layerName) {\n        this.selection.splice(i, 1);\n      } else {\n        i++;\n      }\n    }\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ElementWithMenu from './Menu/ElementWithMenu';\nimport { type MenuItemTemplate } from './Menu/Menu.flow';\nimport { type I18n as I18nType } from '@lingui/core';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport Button from '@material-ui/core/Button';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport { Spacer } from './Grid';\n\ntype Props = {|\n  label?: React.Node,\n  primary?: boolean,\n  disabled?: boolean,\n  icon?: React.Node,\n  onClick: ?() => void,\n  buildMenuTemplate: (i18n: I18nType) => Array<MenuItemTemplate>,\n|};\n\nconst shouldNeverBeCalled = () => {\n  throw new Error(\n    'This RaisedButtonWithSplitMenu onClick should never be called'\n  );\n};\n\n/**\n * A raised button based on Material-UI button, that has a menu displayed\n * when the the dropdown arrow is clicked.\n */\nconst RaisedButtonWithSplitMenu = (props: Props) => {\n  const { buildMenuTemplate, onClick, label, primary, icon, disabled } = props;\n\n  // In theory, focus ripple is only shown after a keyboard interaction\n  // (see https://github.com/mui-org/material-ui/issues/12067). However, as\n  // it's important to get focus right in the whole app, make the ripple\n  // always visible to be sure we're getting focusing right.\n  const focusRipple = true;\n\n  return (\n    <ButtonGroup\n      variant=\"contained\"\n      color={primary ? 'primary' : 'default'}\n      disabled={disabled}\n      size=\"small\"\n    >\n      <Button focusRipple={focusRipple} onClick={onClick}>\n        {icon}\n        {icon && <Spacer />}\n        {label}\n      </Button>\n      <ElementWithMenu\n        passExtraProps={\n          true /* ButtonGroup is passing props to Button: disabled, color, variant, size */\n        }\n        element={\n          <Button onClick={shouldNeverBeCalled} focusRipple={focusRipple}>\n            <ArrowDropDownIcon />\n          </Button>\n        }\n        buildMenuTemplate={buildMenuTemplate}\n      />\n    </ButtonGroup>\n  );\n};\n\nexport default RaisedButtonWithSplitMenu;\n","import TextEditor from './Editors/TextEditor';\nimport TiledSpriteEditor from './Editors/TiledSpriteEditor';\nimport PanelSpriteEditor from './Editors/PanelSpriteEditor';\nimport SpriteEditor from './Editors/SpriteEditor';\nimport EmptyEditor from './Editors/EmptyEditor';\nimport ShapePainterEditor from './Editors/ShapePainterEditor';\nimport ParticleEmitterEditor from './Editors/ParticleEmitterEditor';\nimport ObjectPropertiesEditor from './Editors/ObjectPropertiesEditor';\nconst gd /* TODO: add flow in this file */ = global.gd;\n\n/**\n * A service returning editor components for each object type.\n */\nexport default {\n  getEditorConfiguration(objectType: string) {\n    if (!this.editorConfigurations[objectType]) {\n      console.warn(\n        `Object with type ${objectType} has no editor configuration registered. Please use registerEditorConfiguration to register your editor.`\n      );\n    }\n\n    return this.editorConfigurations[objectType];\n  },\n  registerEditorConfiguration: function(objectType, editorConfiguration) {\n    if (!editorConfiguration.component) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but \"component\" property is not defined.`\n      );\n      return;\n    }\n    if (!editorConfiguration.createNewObject) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but \"createNewObject\" property is not defined.`\n      );\n      return;\n    }\n    if (!editorConfiguration.castToObjectType) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but \"castToObjectType\" property is not defined.`\n      );\n      return;\n    }\n\n    if (this.editorConfigurations.hasOwnProperty(objectType)) {\n      console.warn(\n        `Tried to register editor configuration for object \"${objectType}\", but an editor configuration already exists.`\n      );\n      return;\n    }\n\n    console.info(\n      `Properly registered editor configuration for object \"${objectType}\".`\n    );\n    this.editorConfigurations[objectType] = editorConfiguration;\n  },\n  getDefaultObjectJsImplementationPropertiesEditor(options) {\n    return {\n      component: ObjectPropertiesEditor,\n      createNewObject: object =>\n        gd\n          .asObjectJsImplementation(object)\n          .clone()\n          .release(),\n      castToObjectType: object => gd.asObjectJsImplementation(object),\n      helpPagePath: options.helpPagePath,\n    };\n  },\n  editorConfigurations: {\n    Sprite: {\n      component: SpriteEditor,\n      createNewObject: () => new gd.SpriteObject(''),\n      castToObjectType: object => gd.asSpriteObject(object),\n      helpPagePath: '/objects/sprite',\n    },\n    'TiledSpriteObject::TiledSprite': {\n      component: TiledSpriteEditor,\n      createNewObject: () => new gd.TiledSpriteObject(''),\n      castToObjectType: object => gd.asTiledSpriteObject(object),\n      helpPagePath: '/objects/tiled_sprite',\n    },\n    'PanelSpriteObject::PanelSprite': {\n      component: PanelSpriteEditor,\n      createNewObject: () => new gd.PanelSpriteObject(''),\n      castToObjectType: object => gd.asPanelSpriteObject(object),\n      helpPagePath: '/objects/panel_sprite',\n    },\n    'TextObject::Text': {\n      component: TextEditor,\n      createNewObject: () => new gd.TextObject(''),\n      castToObjectType: object => gd.asTextObject(object),\n      helpPagePath: '/objects/text',\n    },\n    'PrimitiveDrawing::Drawer': {\n      component: ShapePainterEditor,\n      createNewObject: () => new gd.ShapePainterObject(''),\n      castToObjectType: object => gd.asShapePainterObject(object),\n      helpPagePath: '/objects/shape_painter',\n    },\n    'TextEntryObject::TextEntry': {\n      component: EmptyEditor,\n      createNewObject: () => new gd.TextEntryObject(''),\n      castToObjectType: object => gd.asTextEntryObject(object),\n      helpPagePath: '/objects/text_entry',\n    },\n    'ParticleSystem::ParticleEmitter': {\n      component: ParticleEmitterEditor,\n      createNewObject: () => new gd.ParticleEmitterObject(''),\n      castToObjectType: object => gd.asParticleEmitterObject(object),\n      helpPagePath: '/objects/particles_emitter',\n    },\n  },\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport axios from 'axios';\nimport { GDevelopUsageApi } from './ApiConfigs';\nimport { type MessageDescriptor } from '../i18n/MessageDescriptor.flow';\n\nexport type Usage = {\n  id: string,\n  userId: string,\n  type: string,\n  createdAt: number,\n};\nexport type Usages = Array<Usage>;\n\nexport type Subscription = {|\n  userId: string,\n  planId: string | null,\n  createdAt: number,\n  updatedAt: number,\n  stripeSubscriptionId?: string,\n  stripeCustomerId?: string,\n|};\n\nexport type Limit = {|\n  limitReached: boolean,\n  current: number,\n  max: number,\n|};\n\nexport type Limits = {\n  [string]: Limit,\n};\n\nexport type PlanDetails = {\n  planId: string | null,\n  name: string,\n  monthlyPriceInEuros: number,\n  smallDescription?: MessageDescriptor,\n  descriptionBullets: Array<{|\n    isLocalAppOnly?: boolean,\n    message: MessageDescriptor,\n  |}>,\n  extraDescription?: MessageDescriptor,\n};\n\nexport const getSubscriptionPlans = (): Array<PlanDetails> => [\n  {\n    planId: 'gdevelop_pro',\n    name: 'GDevelop Pro',\n    monthlyPriceInEuros: 7,\n    smallDescription: t`Ideal for advanced game makers`,\n    descriptionBullets: [\n      {\n        message: t`Package your game for Android up to 70 times a day (every 24 hours).`,\n      },\n      {\n        message: t`One-click packaging for Windows, macOS and Linux up to 70 times a day (every 24 hours).`,\n      },\n      {\n        message: t`Immerse your players by removing GDevelop logo when the game loads.`,\n      },\n    ],\n    extraDescription: t`You'll also have access to online packaging for iOS or other services when they are released.`,\n  },\n  {\n    planId: 'gdevelop_indie',\n    name: 'GDevelop Indie',\n    monthlyPriceInEuros: 2,\n    smallDescription: t`Ideal for beginners`,\n    descriptionBullets: [\n      {\n        message: t`Package your game for Android up to 10 times a day (every 24 hours).`,\n      },\n      {\n        message: t`One-click packaging for Windows, macOS and Linux up to 10 times a day (every 24 hours).`,\n      },\n      {\n        message: t`Immerse your players by removing GDevelop logo when the game loads`,\n      },\n    ],\n    extraDescription: t`You'll also have access to online packaging for iOS or other services when they are released.`,\n  },\n  {\n    planId: null,\n    name: 'No subscription',\n    monthlyPriceInEuros: 0,\n    descriptionBullets: [\n      {\n        message: t`You can use GDevelop for free! Online packaging for Android, Windows, macOS and Linux is limited to twice a day (every 24 hours) to avoid overloading the services.`,\n      },\n    ],\n  },\n];\n\nexport const getUserUsages = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Usages> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopUsageApi.baseUrl}/usage`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const getUserLimits = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Limits> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopUsageApi.baseUrl}/limits`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data.limits);\n};\n\nexport const getUserSubscription = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string\n): Promise<Subscription> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.get(`${GDevelopUsageApi.baseUrl}/subscription-v2`, {\n        params: {\n          userId,\n        },\n        headers: {\n          Authorization: authorizationHeader,\n        },\n      })\n    )\n    .then(response => response.data);\n};\n\nexport const changeUserSubscription = (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  newSubscriptionDetails: { planId: string | null, stripeToken?: any }\n): Promise<Subscription> => {\n  return getAuthorizationHeader()\n    .then(authorizationHeader =>\n      axios.post(\n        `${GDevelopUsageApi.baseUrl}/subscription-v2`,\n        newSubscriptionDetails,\n        {\n          params: {\n            userId,\n          },\n          headers: {\n            Authorization: authorizationHeader,\n          },\n        }\n      )\n    )\n    .then(response => response.data);\n};\n\ntype UploadType = 'build' | 'preview';\n\nexport const getSignedUrl = (params: {|\n  uploadType: UploadType,\n  key: string,\n  contentType: string,\n|}): Promise<{\n  signedUrl: string,\n}> => {\n  return axios\n    .post(`${GDevelopUsageApi.baseUrl}/upload-options/signed-url`, params)\n    .then(response => response.data);\n};\n\nexport const getRedirectToCheckoutUrl = (\n  planId: string,\n  uid: string,\n  email: string\n): string => {\n  return `${\n    GDevelopUsageApi.baseUrl\n  }/subscription-v2/redirect-to-checkout?planId=${encodeURIComponent(\n    planId\n  )}&clientReferenceId=${encodeURIComponent(\n    uid\n  )}&customerEmail=${encodeURIComponent(email)}`;\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../List';\nimport ListIcon from '../ListIcon';\nimport TextField, { noMarginTextFieldInListItemTopOffset } from '../TextField';\nimport ThemeConsumer from '../Theme/ThemeConsumer';\nimport { type MenuItemTemplate } from '../Menu/Menu.flow';\nimport { shouldValidate } from '../KeyboardShortcuts/InteractionKeys';\nimport { textEllispsisStyle } from '../TextEllipsis';\n\nconst styles = {\n  textField: {\n    top: noMarginTextFieldInListItemTopOffset,\n  },\n};\n\nconst LEFT_MOUSE_BUTTON = 0;\n\ntype Props<Item> = {\n  item: Item,\n  itemName: string,\n  isBold: boolean,\n  onRename: string => void,\n  editingName: boolean,\n  getThumbnail?: () => string,\n  selected: boolean,\n  onItemSelected: (?Item) => void,\n  errorStatus: '' | 'error' | 'warning',\n  buildMenuTemplate: () => Array<MenuItemTemplate>,\n  onEdit?: ?(Item) => void,\n  hideMenuButton: boolean,\n  scaleUpItemIconWhenSelected?: boolean,\n  connectIconDragSource?: ?(React.Element<any>) => ?React.Node,\n};\n\nclass ItemRow<Item> extends React.Component<Props<Item>> {\n  textField: ?TextField;\n\n  componentDidUpdate(prevProps: Props<Item>) {\n    if (!prevProps.editingName && this.props.editingName) {\n      setTimeout(() => {\n        if (this.textField) this.textField.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const {\n      item,\n      itemName,\n      isBold,\n      selected,\n      getThumbnail,\n      errorStatus,\n      onEdit,\n      onItemSelected,\n      hideMenuButton,\n      scaleUpItemIconWhenSelected,\n      connectIconDragSource,\n    } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => {\n          const label = this.props.editingName ? (\n            <TextField\n              id=\"rename-item-field\"\n              margin=\"none\"\n              ref={textField => (this.textField = textField)}\n              defaultValue={itemName}\n              onBlur={e => this.props.onRename(e.currentTarget.value)}\n              onKeyPress={event => {\n                if (shouldValidate(event)) {\n                  if (this.textField) this.textField.blur();\n                }\n              }}\n              fullWidth\n              style={styles.textField}\n            />\n          ) : (\n            <div\n              title={itemName}\n              style={{\n                ...textEllispsisStyle,\n                color: selected\n                  ? muiTheme.listItem.selectedTextColor\n                  : undefined,\n                fontStyle: isBold ? 'italic' : undefined,\n                fontWeight: isBold ? 'bold' : 'normal',\n              }}\n            >\n              {itemName}\n            </div>\n          );\n\n          const itemStyle = {\n            borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n            backgroundColor: selected\n              ? errorStatus === ''\n                ? muiTheme.listItem.selectedBackgroundColor\n                : errorStatus === 'error'\n                ? muiTheme.listItem.selectedErrorBackgroundColor\n                : muiTheme.listItem.selectedWarningBackgroundColor\n              : undefined,\n            color:\n              errorStatus === ''\n                ? undefined\n                : errorStatus === 'error'\n                ? muiTheme.listItem.errorTextColor\n                : muiTheme.listItem.warningTextColor,\n          };\n\n          const leftIcon = getThumbnail ? (\n            <ListIcon\n              iconSize={24}\n              src={getThumbnail()}\n              cssAnimation={\n                scaleUpItemIconWhenSelected && selected\n                  ? 'scale-and-jiggle 0.8s forwards'\n                  : ''\n              }\n            />\n          ) : null;\n\n          return (\n            <ListItem\n              style={{ ...itemStyle }}\n              primaryText={label}\n              leftIcon={\n                connectIconDragSource && leftIcon\n                  ? connectIconDragSource(<div>{leftIcon}</div>)\n                  : leftIcon\n              }\n              displayMenuButton={!hideMenuButton}\n              rightIconColor={\n                selected\n                  ? muiTheme.listItem.selectedRightIconColor\n                  : muiTheme.listItem.rightIconColor\n              }\n              buildMenuTemplate={this.props.buildMenuTemplate}\n              onClick={() => {\n                if (!onItemSelected) return;\n                if (this.props.editingName) return;\n\n                onItemSelected(selected ? null : item);\n              }}\n              onDoubleClick={event => {\n                if (event.button !== LEFT_MOUSE_BUTTON) return;\n                if (!onEdit) return;\n                if (this.props.editingName) return;\n\n                onItemSelected(null);\n                onEdit(item);\n              }}\n            />\n          );\n        }}\n      </ThemeConsumer>\n    );\n  }\n}\n\nexport default ItemRow;\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from '../Theme/ThemeConsumer';\n\nconst styles = {\n  dropIndicator: {\n    borderTop: '2px solid #18dcf2',\n    height: 0,\n    marginTop: '-1px',\n    marginBottom: '-1px',\n    width: '100%',\n    boxSizing: 'border-box',\n  },\n};\n\nexport default function DropIndicator({ canDrop }: {| canDrop: boolean |}) {\n  return (\n    <ThemeConsumer>\n      {gdevelopTheme => (\n        <div\n          style={{\n            ...styles.dropIndicator,\n            borderColor: canDrop\n              ? gdevelopTheme.listItem.selectedBackgroundColor\n              : gdevelopTheme.listItem.selectedErrorBackgroundColor,\n          }}\n        />\n      )}\n    </ThemeConsumer>\n  );\n}\n","// @flow\r\nimport * as React from 'react';\r\nimport { List } from 'react-virtualized';\r\nimport ItemRow from './ItemRow';\r\nimport { AddListItem } from '../ListCommonItem';\r\nimport { listItemWith32PxIconHeight, listItemWithoutIconHeight } from '../List';\r\nimport { makeDragSourceAndDropTarget } from '../DragAndDrop/DragSourceAndDropTarget';\r\nimport DropIndicator from './DropIndicator';\r\nimport { ResponsiveWindowMeasurer } from '../Reponsive/ResponsiveWindowMeasurer';\r\nimport { ScreenTypeMeasurer } from '../Reponsive/ScreenTypeMeasurer';\r\nimport type { WidthType } from '../Reponsive/ResponsiveWindowMeasurer';\r\n\r\ntype Props<Item> = {|\r\n  height: number,\r\n  width: number,\r\n  fullList: Array<Item>,\r\n  selectedItems: Array<Item>,\r\n  onAddNewItem?: () => void,\r\n  addNewItemLabel?: React.Node | string,\r\n  onRename: (Item, string) => void,\r\n  getItemName: Item => string,\r\n  getItemThumbnail?: Item => string,\r\n  isItemBold?: Item => boolean,\r\n  onItemSelected: (?Item) => void,\r\n  onEditItem?: Item => void,\r\n  renamedItem: ?Item,\r\n  erroredItems?: { [string]: '' | 'error' | 'warning' },\r\n  buildMenuTemplate: (Item, index: number) => any,\r\n  onMoveSelectionToItem: (destinationItem: Item) => void,\r\n  canMoveSelectionToItem?: ?(destinationItem: Item) => boolean,\r\n  scaleUpItemIconWhenSelected?: boolean,\r\n  reactDndType: string,\r\n|};\r\n\r\nexport default class SortableVirtualizedItemList<Item> extends React.Component<\r\n  Props<Item>\r\n> {\r\n  _list: ?List;\r\n  DragSourceAndDropTarget = makeDragSourceAndDropTarget<Item>(\r\n    this.props.reactDndType\r\n  );\r\n\r\n  forceUpdateGrid() {\r\n    if (this._list) this._list.forceUpdateGrid();\r\n  }\r\n\r\n  _renderItemRow(\r\n    item: Item,\r\n    index: number,\r\n    windowWidth: WidthType,\r\n    connectIconDragSource?: ?(React.Element<any>) => ?React.Node\r\n  ) {\r\n    const {\r\n      selectedItems,\r\n      getItemThumbnail,\r\n      erroredItems,\r\n      isItemBold,\r\n      onEditItem,\r\n      renamedItem,\r\n      getItemName,\r\n      scaleUpItemIconWhenSelected,\r\n    } = this.props;\r\n\r\n    const nameBeingEdited = renamedItem === item;\r\n    const itemName = getItemName(item);\r\n\r\n    return (\r\n      <ItemRow\r\n        item={item}\r\n        itemName={itemName}\r\n        isBold={isItemBold ? isItemBold(item) : false}\r\n        onRename={newName => this.props.onRename(item, newName)}\r\n        editingName={nameBeingEdited}\r\n        getThumbnail={\r\n          getItemThumbnail ? () => getItemThumbnail(item) : undefined\r\n        }\r\n        selected={selectedItems.indexOf(item) !== -1}\r\n        onItemSelected={this.props.onItemSelected}\r\n        errorStatus={erroredItems ? erroredItems[itemName] || '' : ''}\r\n        buildMenuTemplate={() => this.props.buildMenuTemplate(item, index)}\r\n        onEdit={onEditItem}\r\n        hideMenuButton={windowWidth === 'small'}\r\n        scaleUpItemIconWhenSelected={scaleUpItemIconWhenSelected}\r\n        connectIconDragSource={connectIconDragSource || null}\r\n      />\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      height,\r\n      width,\r\n      fullList,\r\n      addNewItemLabel,\r\n      renamedItem,\r\n      getItemThumbnail,\r\n      onAddNewItem,\r\n      onMoveSelectionToItem,\r\n      canMoveSelectionToItem,\r\n      selectedItems,\r\n    } = this.props;\r\n    const { DragSourceAndDropTarget } = this;\r\n\r\n    return (\r\n      <ResponsiveWindowMeasurer>\r\n        {windowWidth => (\r\n          <ScreenTypeMeasurer>\r\n            {screenType => (\r\n              <List\r\n                ref={list => (this._list = list)}\r\n                height={height}\r\n                rowCount={fullList.length + (onAddNewItem ? 1 : 0)}\r\n                rowHeight={\r\n                  getItemThumbnail\r\n                    ? listItemWith32PxIconHeight\r\n                    : listItemWithoutIconHeight\r\n                }\r\n                rowRenderer={({\r\n                  index,\r\n                  key,\r\n                  style,\r\n                }: {|\r\n                  index: number,\r\n                  key: string,\r\n                  style: Object,\r\n                |}) => {\r\n                  if (index >= fullList.length) {\r\n                    return (\r\n                      <div style={style} key={key}>\r\n                        <AddListItem\r\n                          onClick={onAddNewItem}\r\n                          primaryText={addNewItemLabel}\r\n                        />\r\n                      </div>\r\n                    );\r\n                  }\r\n\r\n                  const item = fullList[index];\r\n                  const nameBeingEdited = renamedItem === item;\r\n                  const selected = selectedItems.indexOf(item) !== -1;\r\n\r\n                  return (\r\n                    <div style={style} key={key}>\r\n                      <DragSourceAndDropTarget\r\n                        beginDrag={() => {\r\n                          this.props.onItemSelected(item);\r\n\r\n                          // $FlowFixMe\r\n                          return {};\r\n                        }}\r\n                        canDrag={() => !nameBeingEdited}\r\n                        canDrop={() =>\r\n                          canMoveSelectionToItem\r\n                            ? canMoveSelectionToItem(item)\r\n                            : true\r\n                        }\r\n                        drop={() => {\r\n                          onMoveSelectionToItem(item);\r\n                        }}\r\n                      >\r\n                        {({\r\n                          connectDragSource,\r\n                          connectDropTarget,\r\n                          isOver,\r\n                          canDrop,\r\n                        }) => {\r\n                          // If on a touch screen, setting the whole item to be\r\n                          // draggable would prevent scroll. Set the icon only to be\r\n                          // draggable if the item is not selected. When selected,\r\n                          // set the whole item to be draggable.\r\n                          const canDragOnlyIcon =\r\n                            screenType === 'touch' && !selected;\r\n\r\n                          // Add an extra div because connectDropTarget/connectDragSource can\r\n                          // only be used on native elements\r\n                          const dropTarget = connectDropTarget(\r\n                            <div>\r\n                              {isOver && <DropIndicator canDrop={canDrop} />}\r\n                              {this._renderItemRow(\r\n                                item,\r\n                                index,\r\n                                windowWidth,\r\n                                // Only mark the icon as draggable if needed\r\n                                // (touchscreens).\r\n                                canDragOnlyIcon ? connectDragSource : null\r\n                              )}\r\n                            </div>\r\n                          );\r\n\r\n                          if (!dropTarget) return null;\r\n\r\n                          return canDragOnlyIcon\r\n                            ? dropTarget\r\n                            : connectDragSource(dropTarget);\r\n                        }}\r\n                      </DragSourceAndDropTarget>\r\n                    </div>\r\n                  );\r\n                }}\r\n                width={width}\r\n              />\r\n            )}\r\n          </ScreenTypeMeasurer>\r\n        )}\r\n      </ResponsiveWindowMeasurer>\r\n    );\r\n  }\r\n}\r\n","import { createGdevelopTheme } from '../CreateTheme';\nimport defaultStyles from './DefaultThemeVariables.json';\nimport './DefaultThemeVariables.css';\n\nexport default createGdevelopTheme(defaultStyles, 'DefaultTheme', 'light');\n","// @flow\nimport * as React from 'react';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Switch from '@material-ui/core/Switch';\n\n// We support a subset of the props supported by Material-UI v0.x Toggle\n// They should be self descriptive - refer to Material UI docs otherwise.\ntype Props = {|\n  label?: ?React.Node,\n  toggled: boolean,\n  onToggle: (e: {||}, toggled: boolean) => void,\n  disabled?: boolean,\n  labelPosition: 'right',\n\n  style?: {|\n    marginTop?: number,\n  |},\n|};\n\n/**\n * A text field based on Material-UI text field.\n */\nexport default class Toggle extends React.Component<Props, {||}> {\n  render() {\n    return (\n      <FormControlLabel\n        control={\n          <Switch\n            checked={this.props.toggled}\n            onChange={event => this.props.onToggle(event, event.target.checked)}\n            color=\"primary\"\n          />\n        }\n        label={this.props.label}\n        disabled={this.props.disabled}\n        style={this.props.style}\n      />\n    );\n  }\n}\n","// @flow\nimport { type CommandName } from '../CommandPalette/CommandsList';\n\nexport type ShortcutMap = { [CommandName]: string };\n\nconst defaultShortcuts: ShortcutMap = {\n  QUIT_APP: 'CmdOrCtrl+Shift+KeyQ',\n  OPEN_PROJECT_MANAGER: 'CmdOrCtrl+Alt+KeyE',\n  LAUNCH_NEW_PREVIEW: 'F4',\n  LAUNCH_DEBUG_PREVIEW: 'F6',\n  HOT_RELOAD_PREVIEW: 'F5',\n  LAUNCH_NETWORK_PREVIEW: 'F8',\n  OPEN_START_PAGE: '',\n  CREATE_NEW_PROJECT: 'CmdOrCtrl+Alt+KeyN',\n  OPEN_PROJECT: 'CmdOrCtrl+KeyO',\n  SAVE_PROJECT: 'CmdOrCtrl+KeyS',\n  SAVE_PROJECT_AS: 'CmdOrCtrl+Shift+KeyS',\n  CLOSE_PROJECT: 'CmdOrCtrl+KeyQ',\n  EXPORT_GAME: 'CmdOrCtrl+Shift+KeyE',\n  OPEN_RECENT_PROJECT: '',\n  OPEN_COMMAND_PALETTE: 'CmdOrCtrl+KeyP',\n\n  OPEN_PROJECT_PROPERTIES: '',\n  OPEN_PROJECT_LOADING_SCREEN: '',\n  OPEN_PROJECT_VARIABLES: '',\n  OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG: '',\n  OPEN_PROJECT_RESOURCES: '',\n\n  OPEN_LAYOUT: 'Alt+KeyS',\n  OPEN_EXTERNAL_EVENTS: 'Alt+KeyV',\n  OPEN_EXTERNAL_LAYOUT: 'Alt+KeyW',\n  OPEN_EXTENSION: 'Alt+KeyE',\n\n  OPEN_SCENE_PROPERTIES: 'KeyS',\n  OPEN_SCENE_VARIABLES: 'KeyV',\n\n  OPEN_OBJECTS_PANEL: 'KeyO',\n  OPEN_OBJECT_GROUPS_PANEL: 'KeyG',\n  OPEN_PROPERTIES_PANEL: 'KeyP',\n  TOGGLE_INSTANCES_PANEL: 'KeyI',\n  TOGGLE_LAYERS_PANEL: 'KeyL',\n  TOGGLE_WINDOW_MASK: 'KeyM',\n  TOGGLE_GRID: 'Alt+KeyG',\n  OPEN_SETUP_GRID: 'CmdOrCtrl+Shift+KeyG',\n  EDIT_LAYER_EFFECTS: 'KeyE',\n  EDIT_LAYER: 'KeyT',\n  EDIT_OBJECT: 'Shift+KeyE',\n  EDIT_OBJECT_VARIABLES: 'Shift+KeyV',\n  EDIT_OBJECT_GROUP: 'Shift+KeyG',\n\n  ADD_STANDARD_EVENT: 'Shift+KeyA',\n  ADD_SUBEVENT: 'Shift+KeyD',\n  ADD_COMMENT_EVENT: '',\n  CHOOSE_AND_ADD_EVENT: 'Shift+KeyW',\n  OPEN_EXTENSION_SETTINGS: '',\n};\n\nexport default defaultShortcuts;\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from './List';\nimport BackgroundText from './BackgroundText';\n// No i18n in this file\n\ntype Props = {|\n  onClick?: () => void,\n  primaryText: ?React.Node,\n|};\n\nexport const AddListItem = (props: Props) => {\n  return (\n    <ListItem\n      onClick={props.onClick}\n      primaryText={<BackgroundText>{props.primaryText}</BackgroundText>}\n      displayAddIcon\n    />\n  );\n};\n\nexport const SearchListItem = (props: Props) => {\n  return (\n    <ListItem\n      onClick={props.onClick}\n      primaryText={<BackgroundText>{props.primaryText}</BackgroundText>}\n      displaySearchIcon\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport flatten from 'lodash/flatten';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { mapFor } from '../Utils/MapFor';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport VariableRow from './VariableRow';\nimport EditVariableRow from './EditVariableRow';\nimport {\n  getInitialSelection,\n  hasSelection,\n  addToSelection,\n  getSelection,\n} from '../Utils/SelectionHandler';\nimport { CLIPBOARD_KIND } from './ClipboardKind';\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { type VariableOrigin } from './VariablesList.flow';\nimport HelpButton from '../UI/HelpButton';\nimport { EmptyPlaceholder } from '../UI/EmptyPlaceholder';\nimport { Trans } from '@lingui/macro';\nimport Text from '../UI/Text';\nimport { Column } from '../UI/Grid';\nimport ScrollView from '../UI/ScrollView';\n\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  variablesContainer: {\n    // Somehow ensure the scrollbar is not shown when not needed.\n    marginBottom: 10,\n  },\n};\n\nconst SortableVariableRow = SortableElement(VariableRow);\nconst SortableVariablesListBody = SortableContainer(({ children }) => (\n  <div style={styles.variablesContainer}>{children}</div>\n));\nSortableVariablesListBody.muiName = 'TableBody';\n\ntype VariableAndName = {| name: string, ptr: number, variable: gdVariable |};\n\ntype Props = {|\n  variablesContainer: gdVariablesContainer,\n  onComputeAllVariableNames: () => Array<string>,\n  inheritedVariablesContainer?: ?gdVariablesContainer,\n  emptyExplanationMessage?: React.Node,\n  emptyExplanationSecondMessage?: React.Node,\n  onSizeUpdated?: () => void,\n  commitVariableValueOnBlur?: boolean,\n  helpPagePath?: ?string,\n|};\ntype State = {|\n  nameErrors: { [string]: string },\n  selectedVariables: { [number]: ?VariableAndName },\n  mode: 'select' | 'move',\n  allVariableNames: string[],\n|};\n\nexport default class VariablesList extends React.Component<Props, State> {\n  state = {\n    nameErrors: {},\n    selectedVariables: getInitialSelection(),\n    mode: 'select',\n    allVariableNames: [],\n  };\n\n  componentDidMount() {\n    this.setState({ allVariableNames: this.props.onComputeAllVariableNames() });\n  }\n\n  _selectVariable = (variableAndName: VariableAndName, select: boolean) => {\n    this.setState({\n      selectedVariables: addToSelection(\n        this.state.selectedVariables,\n        variableAndName,\n        select\n      ),\n    });\n  };\n\n  copySelection = () => {\n    Clipboard.set(\n      CLIPBOARD_KIND,\n      getSelection(this.state.selectedVariables).map(({ name, variable }) => ({\n        name,\n        serializedVariable: serializeToJSObject(variable),\n      }))\n    );\n  };\n\n  paste = () => {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n    if (!Clipboard.has(CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n    const variablesContent = SafeExtractor.extractArray(clipboardContent);\n    if (!variablesContent) return;\n\n    variablesContent.forEach(variableContent => {\n      const name = SafeExtractor.extractStringProperty(variableContent, 'name');\n      const serializedVariable = SafeExtractor.extractObjectProperty(\n        variableContent,\n        'serializedVariable'\n      );\n      if (!name || !serializedVariable) return;\n\n      const newName = newNameGenerator(\n        name,\n        name =>\n          inheritedVariablesContainer\n            ? inheritedVariablesContainer.has(name) ||\n              variablesContainer.has(name)\n            : variablesContainer.has(name),\n        'CopyOf'\n      );\n      const newVariable = new gd.Variable();\n      unserializeFromJSObject(newVariable, serializedVariable);\n      variablesContainer.insert(\n        newName,\n        newVariable,\n        variablesContainer.count()\n      );\n      newVariable.delete();\n    });\n    this.forceUpdate();\n  };\n\n  deleteSelection = () => {\n    const { variablesContainer } = this.props;\n    const selection: Array<VariableAndName> = getSelection(\n      this.state.selectedVariables\n    );\n\n    // Only delete ancestor variables, as selection can be composed of variables\n    // that are contained inside others.\n    const ancestorOnlyVariables = selection.filter(variableAndName => {\n      // Make sure that the variable has no ancestor containing it\n      return !selection.find(\n        otherVariableAndName =>\n          variableAndName !== otherVariableAndName &&\n          otherVariableAndName.variable.contains(\n            variableAndName.variable,\n            /*recursive=*/ true\n          )\n      );\n    });\n\n    // We don't want to ever manipulate/access to variables that have been deleted (by removeRecursively):\n    // that's why it's important to only delete ancestor variables.\n    ancestorOnlyVariables.forEach(({ variable }: VariableAndName) =>\n      variablesContainer.removeRecursively(variable)\n    );\n    this.clearSelection();\n  };\n\n  clearSelection = () => {\n    this.setState({\n      selectedVariables: getInitialSelection(),\n    });\n  };\n\n  _updateOrDefineVariable = (\n    name: string,\n    variable: gdVariable,\n    newValue: string,\n    index: number,\n    origin: ?VariableOrigin\n  ) => {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n\n    // If editing a variable from the parent container, clone it\n    // inside this container, before updating its value.\n    if (inheritedVariablesContainer && origin === 'parent') {\n      const serializedVariable = serializeToJSObject(\n        inheritedVariablesContainer.get(name)\n      );\n      const newVariable = new gd.Variable();\n      unserializeFromJSObject(newVariable, serializedVariable);\n      variablesContainer.insert(name, newVariable, index);\n      newVariable.delete();\n\n      variable = variablesContainer.get(name);\n    }\n\n    switch (variable.getType()) {\n      case gd.Variable.String:\n        variable.setString(newValue);\n        break;\n      case gd.Variable.Number:\n        variable.setValue(parseFloat(newValue));\n        break;\n      case gd.Variable.Boolean:\n        variable.setBool(newValue === 'true');\n        break;\n      default:\n        console.error(\n          `Cannot set variable with type ${variable.getType()} - are you sure it's a primitive type?`\n        );\n    }\n  };\n\n  _renderStructureChildren(\n    parentVariable: gdVariable,\n    depth: number,\n    origin: VariableOrigin\n  ): Array<React.Node> {\n    const names = parentVariable.getAllChildrenNames().toJSArray();\n\n    return flatten(\n      names.map((name, index) => {\n        const variable = parentVariable.getChild(name);\n        return this._renderVariableAndChildrenRows(\n          name,\n          variable,\n          depth + 1,\n          index,\n          parentVariable,\n          origin\n        );\n      })\n    );\n  }\n\n  _renderArrayChildren(\n    parentVariable: gdVariable,\n    depth: number,\n    origin: VariableOrigin\n  ): Array<React.Node> {\n    return mapFor(0, parentVariable.getChildrenCount(), index => {\n      const variable = parentVariable.getAtIndex(index);\n      return this._renderVariableAndChildrenRows(\n        '' + index,\n        variable,\n        depth + 1,\n        index,\n        parentVariable,\n        origin,\n        /* arrayElement= */ true\n      );\n    });\n  }\n\n  _getVariableOrigin = (name: string) => {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n\n    if (!inheritedVariablesContainer || !inheritedVariablesContainer.has(name))\n      return '';\n    return variablesContainer.has(name) ? 'inherited' : 'parent';\n  };\n\n  _renderVariableAndChildrenRows(\n    name: string,\n    variable: gdVariable,\n    depth: number,\n    index: number,\n    parentVariable: ?gdVariable,\n    parentOrigin: ?VariableOrigin = null,\n    arrayElement: ?boolean = false\n  ) {\n    const { variablesContainer, commitVariableValueOnBlur } = this.props;\n    const type = variable.getType();\n    const isCollection = !gd.Variable.isPrimitive(variable.getType());\n\n    const origin = parentOrigin ? parentOrigin : this._getVariableOrigin(name);\n\n    return (\n      <SortableVariableRow\n        name={name}\n        index={index}\n        key={'variable-' + name}\n        variable={variable}\n        disabled={depth !== 0}\n        depth={depth}\n        origin={origin}\n        arrayElement={!!arrayElement}\n        commitVariableValueOnBlur={commitVariableValueOnBlur}\n        errorText={\n          this.state.nameErrors[variable.ptr.toString()]\n            ? 'This name is already taken'\n            : undefined\n        }\n        onChangeValue={text => {\n          this._updateOrDefineVariable(name, variable, text, index, origin);\n\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onResetToDefaultValue={() => {\n          variablesContainer.removeRecursively(variable);\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onChangeType={newType => {\n          variable.castTo(newType);\n          this.forceUpdate();\n        }}\n        onChangeName={text => {\n          if (name === text) return;\n\n          let success = true;\n          if (!parentVariable) {\n            success = variablesContainer.rename(name, text);\n          } else {\n            success = parentVariable.renameChild(name, text);\n          }\n\n          this.setState({\n            nameErrors: {\n              ...this.state.nameErrors,\n              [variable.ptr]: !success,\n            },\n          });\n        }}\n        onRemove={() => {\n          if (!parentVariable) {\n            variablesContainer.remove(name);\n          } else {\n            if (parentVariable.getType() === gd.Variable.Structure)\n              parentVariable.removeChild(name);\n            else if (parentVariable.getType() === gd.Variable.Array)\n              parentVariable.removeAtIndex(index);\n          }\n\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        onAddChild={() => {\n          // Primitive types should be converted via onChangeType before getting children added.\n          if (!isCollection) return;\n\n          if (type === gd.Variable.Structure) {\n            const name = newNameGenerator('ChildVariable', name =>\n              variable.hasChild(name)\n            );\n            variable.getChild(name).setString('');\n          } else if (type === gd.Variable.Array) variable.pushNew();\n\n          this.forceUpdate();\n          if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n        }}\n        children={\n          type === gd.Variable.Structure\n            ? this._renderStructureChildren(variable, depth, origin)\n            : type === gd.Variable.Array\n            ? this._renderArrayChildren(variable, depth, origin)\n            : null\n        }\n        showHandle={this.state.mode === 'move'}\n        showSelectionCheckbox={this.state.mode === 'select'}\n        isSelected={!!this.state.selectedVariables[variable.ptr]}\n        onSelect={select =>\n          this._selectVariable({ name, ptr: variable.ptr, variable }, select)\n        }\n        undefinedVariableNames={\n          // autocompletion is not handled for child variables.\n          depth === 0\n            ? this.state.allVariableNames.filter(\n                variableName => !this.props.variablesContainer.has(variableName)\n              )\n            : []\n        }\n      />\n    );\n  }\n\n  render() {\n    const { variablesContainer, inheritedVariablesContainer } = this.props;\n    if (!variablesContainer) return null;\n\n    // Display inherited variables, if any\n    const containerInheritedVariablesTree = inheritedVariablesContainer\n      ? mapFor(0, inheritedVariablesContainer.count(), index => {\n          const name = inheritedVariablesContainer.getNameAt(index);\n          if (!variablesContainer.has(name)) {\n            // Show only variables from parent container that are not redefined\n            const variable = inheritedVariablesContainer.getAt(index);\n            return this._renderVariableAndChildrenRows(\n              name,\n              variable,\n              0,\n              index,\n              undefined,\n              'parent'\n            );\n          }\n        })\n      : [];\n\n    const containerVariablesTree = mapFor(\n      0,\n      variablesContainer.count(),\n      index => {\n        const variable = variablesContainer.getAt(index);\n        const name = variablesContainer.getNameAt(index);\n\n        return this._renderVariableAndChildrenRows(\n          name,\n          variable,\n          0,\n          index,\n          undefined\n        );\n      }\n    );\n\n    // Put all variables in the **same** array so that if a variable that was shown\n    // as inherited is redefined by the user, React can reconcile the variable rows\n    // (VariableRow going from containerInheritedVariablesTree array to\n    // containerVariablesTree array) and the **focus** won't be lost.\n    const allVariables = [\n      ...containerInheritedVariablesTree,\n      ...containerVariablesTree,\n    ];\n\n    return (\n      <Column noMargin expand useFullHeight>\n        {allVariables.length ? (\n          <ScrollView autoHideScrollbar>\n            <SortableVariablesListBody\n              variablesContainer={this.props.variablesContainer}\n              onSortEnd={({ oldIndex, newIndex }) => {\n                this.props.variablesContainer.move(oldIndex, newIndex);\n                this.forceUpdate();\n              }}\n              helperClass=\"sortable-helper\"\n              useDragHandle\n              lockToContainerEdges\n            >\n              {allVariables}\n            </SortableVariablesListBody>\n          </ScrollView>\n        ) : !!this.props.emptyExplanationMessage ? (\n          <Column noMargin expand justifyContent=\"center\">\n            <EmptyPlaceholder\n              renderButtons={() => (\n                <HelpButton helpPagePath={this.props.helpPagePath} />\n              )}\n            >\n              <Text>\n                <Trans>{this.props.emptyExplanationMessage}</Trans>\n              </Text>\n              <Text>\n                <Trans>{this.props.emptyExplanationSecondMessage}</Trans>\n              </Text>\n            </EmptyPlaceholder>\n          </Column>\n        ) : null}\n        <EditVariableRow\n          onAdd={() => {\n            const variable = new gd.Variable();\n            variable.setString('');\n            const name = newNameGenerator('Variable', name =>\n              inheritedVariablesContainer\n                ? inheritedVariablesContainer.has(name) ||\n                  variablesContainer.has(name)\n                : variablesContainer.has(name)\n            );\n            variablesContainer.insert(\n              name,\n              variable,\n              variablesContainer.count()\n            );\n            this.forceUpdate();\n            if (this.props.onSizeUpdated) this.props.onSizeUpdated();\n          }}\n          onCopy={this.copySelection}\n          onPaste={this.paste}\n          onDeleteSelection={this.deleteSelection}\n          hasSelection={hasSelection(this.state.selectedVariables)}\n          hasClipboard={Clipboard.has(CLIPBOARD_KIND)}\n        />\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport GDevelopThemeContext from '../Theme/ThemeContext';\n\nconst styles = {\n  row: {\n    display: 'flex',\n  },\n  cell: {\n    display: 'flex',\n    alignItems: 'center',\n    paddingLeft: 4,\n    paddingRight: 4,\n  },\n};\n\ntype TreeTableRowProps = {|\n  children: React.Node,\n  /* Allow to specify a different alignment than the default (centered). */\n  alignItems?: ?'flex-start',\n|};\n\nexport const TreeTableRow = (props: TreeTableRowProps) => {\n  const gdevelopTheme = React.useContext(GDevelopThemeContext);\n\n  return (\n    <div\n      style={{\n        ...styles.row,\n        alignItems: props.alignItems,\n        backgroundColor: gdevelopTheme.list.itemsBackgroundColor,\n      }}\n    >\n      {props.children}\n    </div>\n  );\n};\n\ntype TreeTableCellProps = {|\n  style?: Object,\n  expand?: boolean,\n  children?: React.Node,\n|};\n\nexport const TreeTableCell = (props: TreeTableCellProps) => (\n  <div\n    style={{\n      ...styles.cell,\n      flex: props.expand ? 1 : undefined,\n      ...props.style,\n    }}\n  >\n    {props.children}\n  </div>\n);\n","/**\n * The style to apply on a div to add ellipsis when the\n * text is overflowing.\n *\n * Please use this so that it's easy to search in the codebase\n * where text ellipsis is used (without having yet another component).\n * Please also use a `title` prop on the div to set the text tooltip.\n */\nexport const textEllispsisStyle = {\n  overflow: 'hidden',\n  whiteSpace: 'nowrap',\n  textOverflow: 'ellipsis',\n};\n","// @flow\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport values from 'lodash/values';\nconst gd: libGDevelop = global.gd;\n\nexport type ProjectError = {\n  type: 'error' | 'warning',\n  message: string,\n  extraExplanation: string,\n};\n\nexport type ProjectErrors = {\n  [string]: Array<ProjectError>,\n};\n\nexport const validatePackageName = (packageName: string) => {\n  const pattern = /^([A-Za-z]{1}[A-Za-z\\d_]*\\.)+[A-Za-z][A-Za-z\\d_]*$/i;\n\n  return pattern.test(packageName);\n};\n\ntype TFunction = string => string; //TODO\n\n/**\n * Check if there is any blocking error in the project properties.\n */\nexport const getProjectPropertiesErrors = (\n  t: TFunction,\n  project: gdProject\n): ProjectErrors => {\n  const errors: ProjectErrors = {};\n\n  const addError = (\n    propertyName: string,\n    type: 'error' | 'warning',\n    message: string,\n    extraExplanation: string = ''\n  ) => {\n    if (!errors[propertyName]) errors[propertyName] = [];\n\n    errors[propertyName].push({\n      type,\n      message,\n      extraExplanation,\n    });\n  };\n\n  if (!project.getPackageName()) {\n    addError(\n      'packageName',\n      'error',\n      t('The package name is empty.'),\n      t('Choose and enter a package name in the game properties.')\n    );\n  } else if (project.getPackageName().length >= 255) {\n    addError(\n      'packageName',\n      'error',\n      t('The package name is too long.'),\n      t('Change the package name in the game properties.')\n    );\n  } else if (!validatePackageName(project.getPackageName())) {\n    addError(\n      'packageName',\n      'error',\n      t(\n        'The package name is containing invalid characters or not following the convention \"xxx.yyy.zzz\" (numbers allowed after a letter only).'\n      ),\n      t('Change the package name in the game properties.')\n    );\n  }\n\n  if (!project.getName()) {\n    addError(\n      'name',\n      'error',\n      t('The name of your game is too long.'),\n      t('Change the name in the game properties.')\n    );\n  }\n\n  if (!project.getVersion() || project.getVersion().split('.').length < 3) {\n    addError(\n      'packageName',\n      'error',\n      t(\"The version that you've set for the game is invalid.\"),\n      t('Enter a version in the game properties.')\n    );\n  }\n\n  return errors;\n};\n\nexport const displayProjectErrorsBox = (\n  t: TFunction,\n  errors: ProjectErrors\n): boolean => {\n  if (!Object.keys(errors).length) return true;\n\n  showErrorBox({\n    message:\n      t(\n        'Your game has some invalid elements, please fix these before continuing:'\n      ) +\n      '\\n\\n' +\n      values(errors)\n        .map(errors =>\n          errors.map((error: ProjectError) => `- ${error.message}`).join('\\n')\n        )\n        .join('\\n'),\n    rawError: undefined,\n    errorId: 'project-invalid-settings-error',\n    doNotReport: true,\n  });\n\n  return false;\n};\n\n/**\n * Log errors found in the project and that should stop a preview (or an export)\n * of the project to be done.\n *\n * For now, not all errors are reported (errors when generating events should ideally\n * be stored and shown in the editor).\n * See https://trello.com/c/IiLgNR16/462-add-a-diagnostic-report-to-warn-about-potential-issues-in-the-game-and-show-them-in-the-events-sheet\n */\nexport const findAndLogProjectPreviewErrors = (project: gdProject) => {\n  const problems = gd.WholeProjectRefactorer.findInvalidRequiredBehaviorProperties(\n    project\n  );\n  for (let index = 0; index < problems.size(); index++) {\n    const problem = problems.at(index);\n\n    const suggestedBehaviorNames = gd.WholeProjectRefactorer.getBehaviorsWithType(\n      problem.getSourceObject(),\n      problem.getExpectedBehaviorTypeName()\n    ).toJSArray();\n\n    console.error(\n      `Invalid value for required behavior property \"${problem.getSourcePropertyName()}\" in object ${problem\n        .getSourceObject()\n        .getName()} for behavior ${problem\n        .getSourceBehaviorContent()\n        .getName()}.`\n    );\n    console.info(\n      `Expected behavior of type ${problem.getExpectedBehaviorTypeName()}. Possibles values are: ${suggestedBehaviorNames.join(\n        ', '\n      ) || '(none)'}.`\n    );\n  }\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport CreateProfile from '../Profile/CreateProfile';\nimport AuthenticatedUserContext from '../Profile/AuthenticatedUserContext';\nimport AlertMessage from '../UI/AlertMessage';\nimport { Line, Spacer } from '../UI/Grid';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport RaisedButton from '../UI/RaisedButton';\nimport Text from '../UI/Text';\nimport {\n  type Game,\n  getGame,\n  registerGame,\n} from '../Utils/GDevelopServices/Game';\nimport { type Profile } from '../Utils/GDevelopServices/Authentication';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport { GameDetailsDialog } from './GameDetailsDialog';\n\ntype Props = {|\n  project: ?gdProject,\n  hideIfRegistered?: boolean,\n  hideLoader?: boolean,\n  onGameRegistered?: () => void,\n|};\n\ntype DetailsTab = 'details' | 'analytics' | 'monetization';\ntype UnavailableReason = 'unauthorized' | 'not-existing' | null;\n\nexport const GameRegistration = ({\n  project,\n  hideIfRegistered,\n  hideLoader,\n  onGameRegistered,\n}: Props) => {\n  const {\n    authenticated,\n    onLogin,\n    onCreateAccount,\n    getAuthorizationHeader,\n    profile,\n    onAcceptGameStatsEmail,\n  } = React.useContext(AuthenticatedUserContext);\n  const [error, setError] = React.useState<Error | null>(null);\n  const [\n    unavailableReason,\n    setUnavailableReason,\n  ] = React.useState<UnavailableReason>(null);\n  const [game, setGame] = React.useState<Game | null>(null);\n  const [registrationInProgress, setRegistrationInProgress] = React.useState(\n    false\n  );\n  const [\n    acceptGameStatsEmailInProgress,\n    setAcceptGameStatsEmailInProgress,\n  ] = React.useState(false);\n  const [detailsOpened, setDetailsOpened] = React.useState(false);\n  const [detailsInitialTab, setDetailsInitialTab] = React.useState<DetailsTab>(\n    'details'\n  );\n\n  const loadGame = React.useCallback(\n    async () => {\n      if (!profile || !project) return;\n\n      const { id } = profile;\n      setError(null);\n      setUnavailableReason(null);\n      try {\n        const game = await getGame(\n          getAuthorizationHeader,\n          id,\n          project.getProjectUuid()\n        );\n        setGame(game);\n      } catch (err) {\n        console.log(err);\n        if (err.response) {\n          if (err.response.status === 403) {\n            setUnavailableReason('unauthorized');\n            return;\n          } else if (err.response.status === 404) {\n            setUnavailableReason('not-existing');\n            return;\n          }\n        }\n\n        setError(err);\n      }\n    },\n    [project, getAuthorizationHeader, profile]\n  );\n\n  const onRegisterGame = React.useCallback(\n    async () => {\n      if (!profile || !project) return;\n\n      const { id } = profile;\n      setRegistrationInProgress(true);\n      try {\n        await registerGame(getAuthorizationHeader, id, {\n          gameId: project.getProjectUuid(),\n          authorName: project.getAuthor() || 'Unspecified author',\n          gameName: project.getName() || 'Untitled game',\n        });\n        loadGame();\n        if (onGameRegistered) onGameRegistered();\n      } catch (error) {\n        console.error('Unable to register the game', error);\n        showErrorBox({\n          rawError: error,\n          errorId: 'register-game-error',\n          // TODO: i18n\n          message:\n            'Unable to register the game.' +\n            ' ' +\n            'Verify your internet connection or try again later.',\n        });\n      }\n      setRegistrationInProgress(false);\n    },\n    [getAuthorizationHeader, profile, project, loadGame, onGameRegistered]\n  );\n\n  const _onAcceptGameStatsEmail = React.useCallback(\n    async () => {\n      if (!profile || !project) return;\n\n      setAcceptGameStatsEmailInProgress(true);\n      try {\n        await onAcceptGameStatsEmail();\n      } catch (error) {\n        console.error('Unable to accept game stats email.', error);\n        showErrorBox({\n          rawError: error,\n          errorId: 'game-stats-email-error',\n          message:\n            'Unable to accept game stats email. ' +\n            ' ' +\n            'Verify your internet connection or try again later.',\n        });\n      }\n      setAcceptGameStatsEmailInProgress(false);\n    },\n    [profile, project, onAcceptGameStatsEmail]\n  );\n\n  React.useEffect(\n    () => {\n      loadGame();\n    },\n    [loadGame]\n  );\n\n  return (\n    <GameRegistrationWidget\n      authenticated={authenticated}\n      profile={profile}\n      onLogin={onLogin}\n      onCreateAccount={onCreateAccount}\n      project={project}\n      game={game}\n      setGame={setGame}\n      loadGame={loadGame}\n      onRegisterGame={onRegisterGame}\n      registrationInProgress={registrationInProgress}\n      hideIfRegistered={hideIfRegistered}\n      unavailableReason={unavailableReason}\n      acceptGameStatsEmailInProgress={acceptGameStatsEmailInProgress}\n      onAcceptGameStatsEmail={_onAcceptGameStatsEmail}\n      detailsInitialTab={detailsInitialTab}\n      setDetailsInitialTab={setDetailsInitialTab}\n      detailsOpened={detailsOpened}\n      setDetailsOpened={setDetailsOpened}\n      error={error}\n      hideLoader={hideLoader}\n    />\n  );\n};\n\nexport type GameRegistrationWidgetProps = {|\n  authenticated: boolean,\n  profile?: ?Profile,\n  onLogin: () => void,\n  onCreateAccount: () => void,\n  project?: ?gdProject,\n  game: ?Game,\n  setGame: Game => void,\n  loadGame: () => Promise<void>,\n  onRegisterGame: () => Promise<void>,\n  registrationInProgress: boolean,\n  hideIfRegistered?: boolean,\n  unavailableReason: ?UnavailableReason,\n  acceptGameStatsEmailInProgress: boolean,\n  onAcceptGameStatsEmail: () => Promise<void>,\n  detailsInitialTab: DetailsTab,\n  setDetailsInitialTab: (string: DetailsTab) => void,\n  detailsOpened: boolean,\n  setDetailsOpened: boolean => void,\n  error: ?Error,\n  hideLoader?: boolean,\n|};\n\nexport const GameRegistrationWidget = ({\n  authenticated,\n  profile,\n  onLogin,\n  onCreateAccount,\n  project,\n  game,\n  setGame,\n  loadGame,\n  onRegisterGame,\n  registrationInProgress,\n  hideIfRegistered,\n  unavailableReason,\n  acceptGameStatsEmailInProgress,\n  onAcceptGameStatsEmail,\n  detailsInitialTab,\n  setDetailsInitialTab,\n  detailsOpened,\n  setDetailsOpened,\n  error,\n  hideLoader,\n}: GameRegistrationWidgetProps) => {\n  if (!project) {\n    return null;\n  }\n\n  if (!authenticated || !profile) {\n    return (\n      <CreateProfile onLogin={onLogin} onCreateAccount={onCreateAccount} />\n    );\n  }\n\n  if (unavailableReason === 'not-existing') {\n    return (\n      <AlertMessage\n        kind=\"info\"\n        renderRightButton={() => (\n          <RaisedButton\n            label={<Trans>Register the project</Trans>}\n            disabled={registrationInProgress}\n            primary\n            onClick={onRegisterGame}\n          />\n        )}\n      >\n        <Trans>\n          This project is not registered online. Register it now to get access\n          to metrics collected anonymously, like the number of daily players and\n          retention of the players after a few days.\n        </Trans>\n      </AlertMessage>\n    );\n  }\n\n  if (unavailableReason === 'unauthorized') {\n    return (\n      <AlertMessage kind=\"error\">\n        <Trans>\n          This project is registered online but you don't have access to it. Ask\n          the original owner of the game to share it with you to get access to\n          the game metrics.\n        </Trans>\n      </AlertMessage>\n    );\n  }\n\n  if (error) {\n    return (\n      <PlaceholderError\n        onRetry={() => {\n          loadGame();\n        }}\n      >\n        <Trans>Can't check if the game is registered online.</Trans>{' '}\n        <Trans>Verify your internet connection or try again later.</Trans>\n      </PlaceholderError>\n    );\n  }\n\n  if (game) {\n    if (hideIfRegistered) return null;\n    if (!profile.getGameStatsEmail) {\n      return (\n        <AlertMessage\n          kind=\"info\"\n          renderRightButton={() => (\n            <RaisedButton\n              label={<Trans>Get weekly game stats</Trans>}\n              disabled={acceptGameStatsEmailInProgress}\n              primary\n              onClick={onAcceptGameStatsEmail}\n            />\n          )}\n        >\n          <Trans>\n            You are not receiving game stats regularly. Click this button to\n            receive weekly game stats on the games you publish, like the number\n            of weekly sessions or the total sessions in the last year.\n          </Trans>\n        </AlertMessage>\n      );\n    }\n    return (\n      <ColumnStackLayout noMargin>\n        <Text>\n          <Trans>\n            Your project is registered online. This allows you to get access to\n            metrics collected anonymously, like the number of daily players and\n            retention of the players after a few days.\n          </Trans>\n        </Text>\n        <Line justifyContent=\"center\">\n          <RaisedButton\n            primary\n            icon={<TimelineIcon />}\n            label={<Trans>Analytics</Trans>}\n            onClick={() => {\n              setDetailsInitialTab('analytics');\n              setDetailsOpened(true);\n            }}\n          />\n          <Spacer />\n          <RaisedButton\n            primary\n            icon={<MonetizationOnIcon />}\n            label={<Trans>Monetization</Trans>}\n            onClick={() => {\n              setDetailsInitialTab('monetization');\n              setDetailsOpened(true);\n            }}\n          />\n        </Line>\n        {detailsOpened && (\n          <GameDetailsDialog\n            game={game}\n            project={project}\n            initialTab={detailsInitialTab}\n            onClose={() => {\n              setDetailsOpened(false);\n            }}\n            onGameUpdated={updatedGame => {\n              setGame(updatedGame);\n            }}\n            onGameDeleted={() => {\n              setDetailsOpened(false);\n              loadGame();\n            }}\n          />\n        )}\n      </ColumnStackLayout>\n    );\n  }\n\n  return hideLoader ? null : <PlaceholderLoader />;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport BackgroundText from '../UI/BackgroundText';\n\ntype Props = {\n  message?: React.Node,\n  onLogin: () => void,\n  onCreateAccount: () => void,\n};\n\nexport default ({ message, onLogin, onCreateAccount }: Props) => (\n  <Column noMargin>\n    <Line>\n      <Text>\n        {message || (\n          <Trans>\n            You are not connected. Create an account to build your game for\n            Android, Windows, macOS and Linux in one click, and get access to\n            metrics for your game.\n          </Trans>\n        )}\n      </Text>\n    </Line>\n    <Line justifyContent=\"center\" alignItems=\"baseline\">\n      <RaisedButton\n        label={<Trans>Create my account</Trans>}\n        onClick={onCreateAccount}\n        primary\n      />\n      <Spacer />\n      <Spacer />\n      <BackgroundText>or</BackgroundText>\n      <Spacer />\n      <FlatButton label={<Trans>Login</Trans>} onClick={onLogin} />\n    </Line>\n  </Column>\n);\n","// @flow\n\nimport * as React from 'react';\nimport RaisedButton from '../UI/RaisedButton';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport Star from '@material-ui/icons/Star';\nimport Favorite from '@material-ui/icons/Favorite';\nimport AuthenticatedUserContext, {\n  type AuthenticatedUser,\n} from './AuthenticatedUserContext';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport {\n  sendSubscriptionCheckDialogShown,\n  sendSubscriptionCheckDismiss,\n} from '../Utils/Analytics/EventSender';\nimport { Trans } from '@lingui/macro';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  title: React.Node,\n  id: string,\n  onChangeSubscription?: () => void,\n  mode: 'try' | 'mandatory',\n|};\n\ntype DialogProps = {|\n  authenticatedUser: AuthenticatedUser,\n  ...$Exact<Props>,\n|};\n\ntype DialogState = {|\n  open: boolean,\n|};\n\nconst styles = {\n  icon: { width: 40, height: 40, marginRight: 20 },\n  iconText: { flex: 1 },\n};\n\nexport class SubscriptionCheckDialog extends React.Component<\n  DialogProps,\n  DialogState\n> {\n  state = { open: false };\n\n  checkHasSubscription() {\n    const { authenticatedUser, mode, id } = this.props;\n    if (authenticatedUser.subscription) {\n      const hasPlan = !!authenticatedUser.subscription.planId;\n      if (hasPlan) {\n        this.setState({\n          open: false,\n        });\n        return true;\n      }\n    }\n\n    this.setState({\n      open: true,\n    });\n    sendSubscriptionCheckDialogShown({ mode, id });\n\n    return false;\n  }\n\n  _closeDialog = () => {\n    sendSubscriptionCheckDismiss();\n    this.setState({ open: false });\n  };\n\n  render() {\n    const { open } = this.state;\n    const { onChangeSubscription, mode } = this.props;\n    if (!open) return null;\n\n    return (\n      <Dialog\n        actions={[\n          onChangeSubscription && (\n            <RaisedButton\n              label={<Trans>Get a subscription or login</Trans>}\n              key=\"subscribe\"\n              primary\n              onClick={() => {\n                this.setState({ open: false });\n                onChangeSubscription();\n              }}\n            />\n          ),\n        ]}\n        secondaryActions={[\n          <FlatButton\n            label={\n              mode === 'try' ? (\n                <Trans>Continue anyway</Trans>\n              ) : (\n                <Trans>Not now, thanks!</Trans>\n              )\n            }\n            key=\"close\"\n            primary={false}\n            onClick={this._closeDialog}\n          />,\n        ]}\n        cannotBeDismissed={false}\n        onRequestClose={this._closeDialog}\n        open={open}\n        title={\n          mode === 'try' ? (\n            <Trans>We need your support!</Trans>\n          ) : (\n            this.props.title\n          )\n        }\n      >\n        <Column noMargin>\n          <Line noMargin alignItems=\"center\">\n            {mode === 'try' ? (\n              <Text>\n                <Trans>\n                  Please get a subscription to keep GDevelop running.\n                </Trans>\n              </Text>\n            ) : (\n              <Text>\n                <Trans>\n                  To use this feature, we ask you to get a subscription to\n                  GDevelop.\n                </Trans>\n              </Text>\n            )}\n          </Line>\n          <Line noMargin alignItems=\"center\">\n            <Star style={styles.icon} />\n            <Text style={styles.iconText}>\n              <Trans>\n                Get a subscription to gain more one-click exports, remove the\n                GDevelop splashscreen, this message asking you to get a\n                subscription.\n              </Trans>\n            </Text>\n          </Line>\n          <Line noMargin alignItems=\"center\">\n            <Favorite style={styles.icon} />\n            <Text style={styles.iconText}>\n              <Trans>\n                You're also supporting the development of GDevelop, an\n                open-source software! In the future, more online services will\n                be available for users with a subscription.\n              </Trans>\n            </Text>\n          </Line>\n          <Spacer />\n          <Spacer />\n          <Spacer />\n          <Spacer />\n          <Text align=\"right\">\n            <b>\n              <Trans>Thanks!</Trans>\n            </b>\n          </Text>\n        </Column>\n      </Dialog>\n    );\n  }\n}\n\nclass SubscriptionChecker extends React.Component<Props, {}> {\n  _dialog: ?SubscriptionCheckDialog = null;\n\n  checkHasSubscription() {\n    if (this._dialog) {\n      return this._dialog.checkHasSubscription();\n    }\n\n    return false;\n  }\n\n  render() {\n    return (\n      <AuthenticatedUserContext.Consumer>\n        {(authenticatedUser: AuthenticatedUser) => (\n          <SubscriptionCheckDialog\n            authenticatedUser={authenticatedUser}\n            ref={dialog => (this._dialog = dialog)}\n            onChangeSubscription={this.props.onChangeSubscription}\n            id={this.props.id}\n            title={this.props.title}\n            mode={this.props.mode}\n          />\n        )}\n      </AuthenticatedUserContext.Consumer>\n    );\n  }\n}\n\nexport default SubscriptionChecker;\n","// @flow\nimport * as React from 'react';\n\n/**\n * Returns a React \"ref\" telling if the component is \"mounted\" or not. While this is\n * usually an anti pattern to rely on this, it can be useful when having to \"cancel\"\n * promises/network dependent effects.\n */\nexport const useIsMounted = (): {| current: boolean |} => {\n  const isMounted = React.useRef<boolean>(false);\n  React.useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n","// @flow\nimport axios from 'axios';\nimport { GDevelopUserApi } from './ApiConfigs';\n\nimport { type Badge } from './Badge';\n\nexport type UserPublicProfile = {|\n  id: string,\n  username: ?string,\n  description: ?string,\n|};\n\nexport type UserPublicProfileSearch = {|\n  id: string,\n  username: ?string,\n|};\n\nexport type UserPublicProfileByIds = {|\n  [key: string]: UserPublicProfile,\n|};\n\nexport const searchUserPublicProfilesByUsername = (\n  searchString: string\n): Promise<Array<UserPublicProfileSearch>> => {\n  return axios\n    .get(`${GDevelopUserApi.baseUrl}/user-public-profile/search`, {\n      params: {\n        username: searchString,\n      },\n    })\n    .then(response => response.data);\n};\n\nexport const getUserBadges = (id: string): Promise<Array<Badge>> => {\n  return axios\n    .get(`${GDevelopUserApi.baseUrl}/user/${id}/badge`)\n    .then(response => response.data);\n};\n\nexport const getUserPublicProfilesByIds = (\n  ids: Array<string>\n): Promise<UserPublicProfileByIds> => {\n  return axios\n    .get(`${GDevelopUserApi.baseUrl}/user-public-profile`, {\n      params: {\n        id: ids.join(','),\n      },\n    })\n    .then(response => response.data);\n};\n\nexport const getUserPublicProfile = (\n  id: string\n): Promise<UserPublicProfile> => {\n  return axios\n    .get(`${GDevelopUserApi.baseUrl}/user-public-profile/${id}`)\n    .then(response => response.data);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactErrorBoundary from 'react-error-boundary';\nimport BugReport from '@material-ui/icons/BugReport';\nimport PlaceholderMessage from './PlaceholderMessage';\nimport Divider from '@material-ui/core/Divider';\nimport RaisedButton from './RaisedButton';\nimport { sendErrorMessage } from '../Utils/Analytics/EventSender';\nimport Window from '../Utils/Window';\nimport Text from './Text';\nimport { Line, Spacer } from './Grid';\nimport { getIDEVersionWithHash } from '../Version';\nimport {\n  getArch,\n  getPlatformName,\n  getSystemVersion,\n  getUserAgent,\n} from '../Utils/Platform';\n\nconst errorHandler = (error: Error, componentStack: string) => {\n  console.error('Error catched by Boundary:', error, componentStack);\n  sendErrorMessage(\n    'Error catched by error boundary',\n    'error-boundary',\n    {\n      error,\n      componentStack,\n    },\n    'error-boundary-error'\n  );\n};\n\nexport const ErrorFallbackComponent = ({\n  componentStack,\n  error,\n}: {\n  componentStack: string,\n  error: Error,\n}) => (\n  <PlaceholderMessage>\n    <Line>\n      <BugReport fontSize=\"large\" />\n      <Spacer />\n      <Text size=\"title\">This editor encountered a problem.</Text>\n    </Line>\n    <Divider />\n    <Text>\n      Something wrong happened :(\n      <br />\n      Please <b>backup your game file</b> and save your game to ensure that you\n      don't lose anything.\n    </Text>\n    <Text>\n      The error was automatically reported.\n      <br />\n      To make sure it's fixed, you may report it on GitHub, the platform where\n      GDevelop is developed:\n    </Text>\n    <RaisedButton\n      label={<Trans>Report the issue on GitHub</Trans>}\n      onClick={() => {\n        const body = `\n=> Please write here a short description of when the error occured and how to reproduce it.\nYou also may have to create an account on GitHub before posting.\n\nWhen you're ready, click on \"Submit new issue\". Don't change the rest of the message. Thanks!\n\n## Error stack (don't write anything here)\n\\`\\`\\`\n${error ? error.stack : 'No error found'}\n\\`\\`\\`\n\n## Component stack (don't write anything here)\n\\`\\`\\`\n${componentStack || 'No component stack found'}\n\\`\\`\\`\n\n## Other details\n* IDE version: ${getIDEVersionWithHash()}\n* Arch: ${getArch()},\n* Platform Name: ${getPlatformName()},\n* System Version: ${getSystemVersion()},\n* User Agent: ${getUserAgent()},\n        `;\n        Window.openExternalURL(\n          `https://github.com/4ian/GDevelop/issues/new?body=${encodeURIComponent(\n            body\n          )}&title=Crash%20while%20using%20an%20editor`\n        );\n      }}\n    />\n  </PlaceholderMessage>\n);\n\ntype Props = {|\n  children: React.Node,\n|};\n\nconst ErrorBoundary = (props: Props) => (\n  <ReactErrorBoundary\n    FallbackComponent={ErrorFallbackComponent}\n    onError={errorHandler}\n  >\n    {props.children}\n  </ReactErrorBoundary>\n);\n\nexport default ErrorBoundary;\n","//@flow\nimport optionalRequire from './OptionalRequire';\n\n/**\n * Return a function that will load, only when called, the specified module name.\n *\n * As `optionalRequire`, this allows to require a Node.js/npm module without having it bundled by webpack.\n * This means that this module will only be available when running on Electron or Node.js.\n * When running without Electron or Node.js, `null` will be returned.\n */\nexport default function optionalLazyRequire(moduleName: string) {\n  let moduleLoaded = false;\n  let module = undefined;\n  return (): ?any => {\n    if (moduleLoaded) {\n      return module;\n    }\n\n    console.info(`Lazy loading ${moduleName}...`);\n    module = optionalRequire(moduleName);\n    moduleLoaded = true;\n    return module;\n  };\n}\n","// @flow\nimport * as React from 'react';\nimport MUIAccordion from '@material-ui/core/Accordion';\nimport MUIAccordionSummary from '@material-ui/core/AccordionSummary';\nimport MUIAccordionDetails from '@material-ui/core/AccordionDetails';\nimport MUIAccordionActions from '@material-ui/core/AccordionActions';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport IconButton from './IconButton';\nimport GDevelopThemeContext from './Theme/ThemeContext';\n\nconst styles = {\n  bodyRoot: {\n    // Remove body padding\n    padding: 0,\n  },\n};\n\ntype AccordionHeadProps = {|\n  children: React.Node,\n  actions?: Array<React.Node>,\n  expandIcon?: React.Node,\n|};\n\n/**\n * The header of an accordion section.\n * Based on Material-UI AccordionSummary.\n */\nexport const AccordionHeader = (props: AccordionHeadProps) => {\n  return (\n    <MUIAccordionSummary\n      expandIcon={\n        props.expandIcon || (\n          <IconButton size=\"small\">\n            <ExpandMoreIcon />\n          </IconButton>\n        )\n      }\n    >\n      <div style={{ flexGrow: 1, display: 'flex', alignItems: 'center' }}>\n        {props.children}\n      </div>\n      {props.actions && (\n        <div style={{ flexGrow: 0, alignSelf: 'center' }}>{props.actions}</div>\n      )}\n    </MUIAccordionSummary>\n  );\n};\n\ntype AccordionBodyProps = {|\n  children: React.Node,\n  style?: Object,\n\n  // Removes all padding in body container\n  disableGutters?: boolean,\n|};\n\n/**\n * The collapsible contents of an accordion section.\n * Based on Material-UI AccordionDetails.\n */\nexport const AccordionBody = (props: AccordionBodyProps) => {\n  return (\n    <MUIAccordionDetails\n      style={{ ...(props.disableGutters && styles.bodyRoot), ...props.style }}\n    >\n      {props.children}\n    </MUIAccordionDetails>\n  );\n};\n\ntype AccordionActionsProps = {|\n  actions: Array<React.Node>,\n  secondaryActions?: Array<React.Node>,\n|};\n\n/**\n * The footer of an accordion section, used to provide\n * actions specific to the accordion contents.\n * Based on Material-UI AccordionActions.\n */\nexport const AccordionActions = (props: AccordionActionsProps) => {\n  const accordionActions = props.secondaryActions ? (\n    <React.Fragment>\n      <div key=\"secondary-actions\">{props.secondaryActions}</div>\n      <div key=\"actions\">{props.actions}</div>\n    </React.Fragment>\n  ) : (\n    props.actions\n  );\n\n  return <MUIAccordionActions>{accordionActions}</MUIAccordionActions>;\n};\n\ntype AccordionProps = {|\n  // AccordionSummary, AccordionBody and/or AccordionDetails\n  children: React.Node,\n\n  defaultExpanded?: boolean,\n  disabled?: boolean,\n\n  // If `true`, renders body only if accordion is open\n  costlyBody?: boolean,\n\n  // Use accordion in controlled mode\n  expanded?: boolean,\n  onChange?: (open: boolean) => void,\n|};\n\n/**\n * A block of collapsible content, with an always-shown header\n * and accordion-specific actions.\n * Based on Material-UI Accordion.\n */\nexport const Accordion = (props: AccordionProps) => {\n  const { costlyBody, ...otherProps } = props;\n  const theme = React.useContext(GDevelopThemeContext);\n\n  return (\n    <MUIAccordion\n      {...otherProps}\n      square\n      elevation={0}\n      style={{ border: `1px solid ${theme.toolbar.separatorColor}` }}\n      TransitionProps={{ unmountOnExit: !!costlyBody }}\n    />\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport EventsTree from './EventsTree';\nimport NewInstructionEditorDialog from './InstructionEditor/NewInstructionEditorDialog';\nimport InstructionEditorDialog from './InstructionEditor/InstructionEditorDialog';\nimport NewInstructionEditorMenu from './InstructionEditor/NewInstructionEditorMenu';\nimport EventTextDialog, {\n  filterEditableWithEventTextDialog,\n} from './InstructionEditor/EventTextDialog';\nimport Toolbar from './Toolbar';\nimport KeyboardShortcuts from '../UI/KeyboardShortcuts';\nimport InlineParameterEditor from './InlineParameterEditor';\nimport ContextMenu from '../UI/Menu/ContextMenu';\nimport { serializeToJSObject } from '../Utils/Serializer';\nimport {\n  type HistoryState,\n  undo,\n  redo,\n  canUndo,\n  canRedo,\n  getHistoryInitialState,\n  saveToHistory,\n} from '../Utils/History';\nimport {\n  type SelectionState,\n  type EventContext,\n  type InstructionsListContext,\n  type InstructionContext,\n  type ParameterContext,\n  getInitialSelection,\n  selectEvent,\n  selectInstruction,\n  hasSomethingSelected,\n  hasEventSelected,\n  hasInstructionSelected,\n  hasSelectedAtLeastOneCondition,\n  hasInstructionsListSelected,\n  getSelectedEvents,\n  getSelectedInstructions,\n  clearSelection,\n  getSelectedEventContexts,\n  getSelectedInstructionsContexts,\n} from './SelectionHandler';\nimport { ensureSingleOnceInstructions } from './OnceInstructionSanitizer';\nimport EventsContextAnalyzerDialog, {\n  type EventsContextResult,\n  toEventsContextResult,\n} from './EventsContextAnalyzerDialog';\nimport SearchPanel, { type SearchPanelInterface } from './SearchPanel';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport EventsSearcher, {\n  type ReplaceInEventsInputs,\n  type SearchInEventsInputs,\n} from './EventsSearcher';\nimport { containsSubInstructions } from './ContainsSubInstruction';\nimport {\n  enumerateEventsMetadata,\n  type EventMetadata,\n} from './EnumerateEventsMetadata';\nimport PreferencesContext, {\n  type Preferences,\n} from '../MainFrame/Preferences/PreferencesContext';\nimport EventsFunctionExtractorDialog from './EventsFunctionExtractor/EventsFunctionExtractorDialog';\nimport { createNewInstructionForEventsFunction } from './EventsFunctionExtractor';\nimport { type EventsScope } from '../InstructionOrExpression/EventsScope.flow';\nimport {\n  pasteEventsFromClipboardInSelection,\n  copySelectionToClipboard,\n  pasteInstructionsFromClipboardInSelection,\n  hasClipboardEvents,\n  hasClipboardActions,\n  hasClipboardConditions,\n  pasteInstructionsFromClipboardInInstructionsList,\n} from './ClipboardKind';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport { useScreenType } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport AuthenticatedUserContext, {\n  type AuthenticatedUser,\n} from '../Profile/AuthenticatedUserContext';\nimport {\n  addCreateBadgePreHookIfNotClaimed,\n  TRIVIAL_FIRST_EVENT,\n  ACHIEVEMENT_FEATURE_FLAG,\n} from '../Utils/GDevelopServices/Badge';\nconst gd: libGDevelop = global.gd;\n\nconst zoomLevel = { min: 1, max: 50 };\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  events: gdEventsList,\n  setToolbar: (?React.Node) => void,\n  onOpenSettings?: ?() => void,\n  onOpenExternalEvents: string => void,\n  onOpenLayout: string => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  onCreateEventsFunction: (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => void,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\ntype ComponentProps = {|\n  ...Props,\n  authenticatedUser: AuthenticatedUser,\n  preferences: Preferences,\n|};\n\ntype State = {|\n  history: HistoryState,\n\n  editedInstruction: {\n    //TODO: This could be adapted to be a InstructionContext\n    isCondition: boolean,\n    instruction: ?gdInstruction,\n    instrsList: ?gdInstructionsList,\n    indexInList: ?number,\n  },\n  editedParameter: {\n    // TODO: This could be adapted to be a ParameterContext\n    isCondition: boolean,\n    instruction: ?gdInstruction,\n    instrsList: ?gdInstructionsList,\n    parameterIndex: number,\n  },\n\n  selection: SelectionState,\n\n  inlineEditing: boolean,\n  inlineEditingAnchorEl: ?HTMLElement,\n  inlineInstructionEditorAnchorEl: ?HTMLElement,\n  inlineEditingChangesMade: boolean,\n  inlineEditingPreviousValue: ?string,\n\n  analyzedEventsContextResult: ?EventsContextResult,\n\n  serializedEventsToExtract: ?Object,\n\n  textEditedEvent: ?gdBaseEvent,\n\n  showSearchPanel: boolean,\n  searchResults: ?Array<gdBaseEvent>,\n  searchFocusOffset: ?number,\n\n  allEventsMetadata: Array<EventMetadata>,\n\n  fontSize: number,\n|};\n\ntype EventInsertionContext = {|\n  eventsList: gdEventsList,\n  indexInList: number,\n|};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    width: '100%',\n    flexDirection: 'column',\n    flex: 1,\n    position: 'relative', // To be sure that absolutely positioned PlaceholderMessage won't go outside of the EventsSheet\n  },\n};\n\nexport class EventsSheetComponentWithoutHandle extends React.Component<\n  ComponentProps,\n  State\n> {\n  _eventsTree: ?EventsTree;\n  _eventSearcher: ?EventsSearcher;\n  _searchPanel: ?SearchPanelInterface;\n  _containerDiv = React.createRef<HTMLDivElement>();\n  _keyboardShortcuts = new KeyboardShortcuts({\n    isActive: () =>\n      !this.state.inlineEditing &&\n      !this.state.editedInstruction.instruction &&\n      !this.state.analyzedEventsContextResult &&\n      !this.state.serializedEventsToExtract,\n    shortcutCallbacks: {\n      onDelete: () => this.deleteSelection(),\n      onCopy: () => this.copySelection(),\n      onCut: () => this.cutSelection(),\n      onPaste: () => this.pasteEventsOrInstructions(),\n      onSearch: () => this._toggleSearchPanel(),\n      onEscape: () => this._closeSearchPanel(),\n      onUndo: () => this.undo(),\n      onRedo: () => this.redo(),\n      onZoomIn: (event: KeyboardEvent) => this.onZoomEvent('IN')(event),\n      onZoomOut: (event: KeyboardEvent) => this.onZoomEvent('OUT')(event),\n    },\n  });\n\n  eventContextMenu: ContextMenu;\n  instructionContextMenu: ContextMenu;\n  addNewEvent: (\n    type: string,\n    context: ?EventInsertionContext\n  ) => Array<gdBaseEvent>;\n\n  state = {\n    history: getHistoryInitialState(this.props.events, { historyMaxSize: 50 }),\n\n    editedInstruction: {\n      isCondition: true,\n      instruction: null,\n      instrsList: null,\n      indexInList: 0,\n    },\n    editedParameter: {\n      isCondition: true,\n      instruction: null,\n      instrsList: null,\n      parameterIndex: 0,\n    },\n\n    selection: getInitialSelection(),\n\n    inlineEditing: false,\n    inlineEditingAnchorEl: null,\n    inlineInstructionEditorAnchorEl: null,\n    inlineEditingChangesMade: false,\n    inlineEditingPreviousValue: null,\n\n    analyzedEventsContextResult: null,\n\n    serializedEventsToExtract: null,\n\n    showSearchPanel: false,\n    searchResults: null,\n    searchFocusOffset: null,\n\n    allEventsMetadata: [],\n\n    textEditedEvent: null,\n\n    fontSize: 14,\n  };\n\n  constructor(props: ComponentProps) {\n    super(props);\n    if (ACHIEVEMENT_FEATURE_FLAG) {\n      this.addNewEvent = addCreateBadgePreHookIfNotClaimed(\n        this.props.authenticatedUser,\n        TRIVIAL_FIRST_EVENT,\n        this._addNewEvent\n      );\n    } else {\n      this.addNewEvent = this._addNewEvent;\n    }\n  }\n\n  componentDidMount() {\n    this.setState({ allEventsMetadata: enumerateEventsMetadata() });\n  }\n\n  componentDidUpdate(prevProps: ComponentProps, prevState: State) {\n    if (ACHIEVEMENT_FEATURE_FLAG) {\n      this.addNewEvent = addCreateBadgePreHookIfNotClaimed(\n        this.props.authenticatedUser,\n        TRIVIAL_FIRST_EVENT,\n        this._addNewEvent\n      );\n    } else {\n      this.addNewEvent = this._addNewEvent;\n    }\n    if (this.state.history !== prevState.history)\n      if (this.props.unsavedChanges)\n        this.props.unsavedChanges.triggerUnsavedChanges();\n  }\n\n  updateToolbar() {\n    if (!this.props.setToolbar) return;\n\n    this.props.setToolbar(\n      <Toolbar\n        allEventsMetadata={this.state.allEventsMetadata}\n        onAddStandardEvent={this._addStandardEvent}\n        onAddSubEvent={this.addSubEvents}\n        canAddSubEvent={hasEventSelected(this.state.selection)}\n        onAddCommentEvent={this._addCommentEvent}\n        onAddEvent={this.addNewEvent}\n        canRemove={hasSomethingSelected(this.state.selection)}\n        onRemove={this.deleteSelection}\n        canUndo={canUndo(this.state.history)}\n        canRedo={canRedo(this.state.history)}\n        undo={this.undo}\n        redo={this.redo}\n        onOpenSettings={this.props.onOpenSettings}\n        onToggleSearchPanel={this._toggleSearchPanel}\n      />\n    );\n  }\n\n  _addStandardEvent = () => {\n    this.addNewEvent('BuiltinCommonInstructions::Standard');\n  };\n\n  _addCommentEvent = () => {\n    this.addNewEvent('BuiltinCommonInstructions::Comment');\n  };\n\n  _toggleSearchPanel = () => {\n    this.setState(\n      state => {\n        const show = !state.showSearchPanel;\n        if (!show) {\n          if (this._eventSearcher) this._eventSearcher.reset();\n        }\n\n        return {\n          showSearchPanel: show,\n        };\n      },\n      () => {\n        if (this.state.showSearchPanel && this._searchPanel) {\n          this._searchPanel.focus();\n        }\n      }\n    );\n  };\n\n  _closeSearchPanel = () => {\n    this.setState({ showSearchPanel: false });\n  };\n\n  addSubEvents = () => {\n    const { project } = this.props;\n\n    getSelectedEvents(this.state.selection).forEach(event => {\n      if (event.canHaveSubEvents()) {\n        event\n          .getSubEvents()\n          .insertNewEvent(\n            project,\n            'BuiltinCommonInstructions::Standard',\n            event.getSubEvents().getEventsCount()\n          );\n      }\n    });\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _selectionCanHaveSubEvents = () => {\n    return getSelectedEvents(this.state.selection).some(event => {\n      return event.canHaveSubEvents();\n    });\n  };\n\n  _selectionCanToggleDisabled = () => {\n    return getSelectedEvents(this.state.selection).some(event => {\n      return event.isExecutable();\n    });\n  };\n\n  _addNewEvent = (\n    type: string,\n    context: ?EventInsertionContext\n  ): Array<gdBaseEvent> => {\n    const { project } = this.props;\n    const hasEventsSelected = hasEventSelected(this.state.selection);\n    let insertTopOfSelection = false;\n\n    let insertions: Array<EventInsertionContext> = [];\n    if (context) {\n      insertions = [context];\n    } else if (hasEventsSelected) {\n      if (\n        type === 'BuiltinCommonInstructions::Comment' ||\n        type === 'BuiltinCommonInstructions::Group'\n      ) {\n        insertTopOfSelection = true;\n      }\n\n      insertions = getSelectedEventContexts(this.state.selection).map(\n        selectedEvent => ({\n          eventsList: selectedEvent.eventsList,\n          indexInList: insertTopOfSelection\n            ? selectedEvent.indexInList - 1\n            : selectedEvent.indexInList,\n        })\n      );\n    } else {\n      insertions = [\n        {\n          eventsList: this.props.events,\n          indexInList: this.props.events.getEventsCount(),\n        },\n      ];\n    }\n\n    const newEvents = insertions.map(\n      (context: { eventsList: gdEventsList, indexInList: number }) => {\n        return context.eventsList.insertNewEvent(\n          project,\n          type,\n          context.indexInList + 1\n        );\n      }\n    );\n\n    this._saveChangesToHistory(() => {\n      const eventsTree = this._eventsTree;\n      if (!eventsTree) return;\n\n      eventsTree.forceEventsUpdate(() => {\n        if (!context && !hasEventsSelected) {\n          eventsTree.scrollToEvent(newEvents[0]);\n        }\n      });\n    });\n\n    return newEvents;\n  };\n\n  openEventTextDialog = () => {\n    const editableEvents = filterEditableWithEventTextDialog(\n      getSelectedEvents(this.state.selection)\n    );\n    if (!editableEvents.length) return;\n\n    const event = editableEvents[editableEvents.length - 1]; // Get the last selected event.\n    this.setState({\n      textEditedEvent: event,\n    });\n  };\n\n  closeEventTextDialog = () => {\n    this.setState({\n      textEditedEvent: null,\n    });\n  };\n\n  _buildInstructionContextMenu = (i18n: I18nType) => [\n    {\n      label: i18n._(t`Copy`),\n      click: () => this.copySelection(),\n      accelerator: 'CmdOrCtrl+C',\n    },\n    {\n      label: i18n._(t`Cut`),\n      click: () => this.cutSelection(),\n      accelerator: 'CmdOrCtrl+X',\n    },\n    {\n      label: i18n._(t`Paste`),\n      click: () => this.pasteInstructions(),\n      enabled: hasClipboardConditions() || hasClipboardActions(),\n      accelerator: 'CmdOrCtrl+V',\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Delete`),\n      click: () => this.deleteSelection(),\n      accelerator: 'Delete',\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Undo`),\n      click: this.undo,\n      enabled: canUndo(this.state.history),\n      accelerator: 'CmdOrCtrl+Z',\n    },\n    {\n      label: i18n._(t`Redo`),\n      click: this.redo,\n      enabled: canRedo(this.state.history),\n      accelerator: 'CmdOrCtrl+Shift+Z',\n    },\n    {\n      label: i18n._(t`Invert Condition`),\n      click: () => this._invertSelectedConditions(),\n      visible: hasSelectedAtLeastOneCondition(this.state.selection),\n    },\n  ];\n\n  openAddInstructionContextMenu = (\n    button: HTMLButtonElement,\n    instructionsListContext: InstructionsListContext\n  ) => {\n    this.openInstructionEditor(instructionsListContext, button);\n  };\n\n  openInstructionEditor = (\n    instructionContext: InstructionContext | InstructionsListContext,\n    inlineInstructionEditorAnchorEl?: ?HTMLButtonElement = null\n  ) => {\n    if (this.state.editedInstruction.instruction) {\n      this.state.editedInstruction.instruction.delete();\n      console.warn(\n        'state.editedInstruction.instruction was containing an instruction - deleting it. Verify the logic handling the state in EventsSheet because that should not happen.'\n      );\n    }\n\n    this.setState({\n      inlineInstructionEditorAnchorEl,\n      editedInstruction: {\n        instrsList: instructionContext.instrsList,\n        isCondition: instructionContext.isCondition,\n        instruction: instructionContext.instruction\n          ? instructionContext.instruction.clone()\n          : new gd.Instruction(),\n        indexInList:\n          instructionContext.indexInList !== undefined\n            ? instructionContext.indexInList\n            : undefined,\n      },\n    });\n  };\n\n  closeInstructionEditor(saveChanges: boolean = false) {\n    const { instruction } = this.state.editedInstruction;\n    this.setState(\n      {\n        editedInstruction: {\n          isCondition: true,\n          instruction: null,\n          instrsList: null,\n          indexInList: 0,\n        },\n      },\n      () => {\n        // Delete from memory the instruction being edited, *after* resetting\n        // editedInstruction and after the re-rendering, in an effort to be\n        // sure that instruction is not used after deletion.\n        if (instruction) {\n          instruction.delete();\n        }\n        if (saveChanges) {\n          this._saveChangesToHistory();\n        }\n      }\n    );\n  }\n\n  moveSelectionToInstruction = (destinationContext: InstructionContext) => {\n    this.moveSelectionToInstructionsList(\n      {\n        instrsList: destinationContext.instrsList,\n        isCondition: destinationContext.isCondition,\n      },\n      destinationContext.indexInList\n    );\n  };\n\n  moveSelectionToInstructionsList = (\n    destinationContext: InstructionsListContext,\n    indexInList: ?number = undefined\n  ) => {\n    const selectedInstructions = getSelectedInstructions(this.state.selection);\n    const destinationIndex =\n      indexInList === undefined || indexInList === null\n        ? destinationContext.instrsList.size()\n        : indexInList;\n\n    const isTryingToDragAnInstructionIntoItsOwnNestedInstructions = !!selectedInstructions.filter(\n      instruction =>\n        containsSubInstructions(instruction, destinationContext.instrsList)\n    ).length;\n\n    if (isTryingToDragAnInstructionIntoItsOwnNestedInstructions) return;\n\n    selectedInstructions.forEach(instruction =>\n      destinationContext.instrsList.insert(instruction, destinationIndex)\n    );\n\n    if (!this._keyboardShortcuts.shouldCloneInstances()) {\n      this.deleteSelection({ deleteEvents: false });\n    } else {\n      this._saveChangesToHistory();\n    }\n  };\n\n  selectEvent = (eventContext: EventContext) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectEvent(this.state.selection, eventContext, multiSelect),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _buildEventContextMenu = (i18n: I18nType) => [\n    {\n      label: i18n._(t`Edit`),\n      click: () => this.openEventTextDialog(),\n      visible:\n        filterEditableWithEventTextDialog(\n          getSelectedEvents(this.state.selection)\n        ).length > 0,\n    },\n    {\n      label: i18n._(t`Copy`),\n      click: () => this.copySelection(),\n      accelerator: 'CmdOrCtrl+C',\n    },\n    {\n      label: i18n._(t`Cut`),\n      click: () => this.cutSelection(),\n      accelerator: 'CmdOrCtrl+X',\n    },\n    {\n      label: i18n._(t`Paste`),\n      click: () => this.pasteEvents(),\n      enabled: hasClipboardEvents(),\n      accelerator: 'CmdOrCtrl+V',\n    },\n    {\n      label: i18n._(t`Delete`),\n      click: () => this.deleteSelection(),\n      accelerator: 'Delete',\n    },\n    {\n      label: i18n._(t`Toggle disabled`),\n      click: () => this.toggleDisabled(),\n      enabled: this._selectionCanToggleDisabled(),\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Add New Event Below`),\n      click: () => this.addNewEvent('BuiltinCommonInstructions::Standard'),\n    },\n    {\n      label: i18n._(t`Add Sub Event`),\n      click: () => this.addSubEvents(),\n      enabled: this._selectionCanHaveSubEvents(),\n    },\n    {\n      label: i18n._(t`Add Other`),\n      submenu: this.state.allEventsMetadata.map(metadata => {\n        return {\n          label: metadata.fullName,\n          click: () => this.addNewEvent(metadata.type),\n        };\n      }),\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Undo`),\n      click: this.undo,\n      enabled: canUndo(this.state.history),\n      accelerator: 'CmdOrCtrl+Z',\n    },\n    {\n      label: i18n._(t`Redo`),\n      click: this.redo,\n      enabled: canRedo(this.state.history),\n      accelerator: 'CmdOrCtrl+Shift+Z',\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Extract Events to a Function`),\n      click: () => this.extractEventsToFunction(),\n    },\n    {\n      label: i18n._(t`Move Events into a Group`),\n      click: () => this.moveEventsIntoNewGroup(),\n    },\n    {\n      label: i18n._(t`Analyze Objects Used in this Event`),\n      click: this._openEventsContextAnalyzer,\n    },\n    { type: 'separator' },\n    {\n      label: i18n._(t`Zoom In`),\n      click: () => this.onZoomEvent('IN')(),\n      accelerator: 'CmdOrCtrl+=',\n      enabled:\n        this.props.preferences.values.eventsSheetZoomLevel < zoomLevel.max,\n    },\n    {\n      label: i18n._(t`Zoom Out`),\n      click: () => this.onZoomEvent('OUT')(),\n      accelerator: 'CmdOrCtrl+-',\n      enabled:\n        this.props.preferences.values.eventsSheetZoomLevel > zoomLevel.min,\n    },\n  ];\n\n  openEventContextMenu = (x: number, y: number, eventContext: EventContext) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectEvent(this.state.selection, eventContext, multiSelect),\n      },\n      () => {\n        this.updateToolbar();\n        this.eventContextMenu.open(x, y);\n      }\n    );\n  };\n\n  openInstructionContextMenu = (\n    x: number,\n    y: number,\n    instructionContext: InstructionContext\n  ) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectInstruction(\n          this.state.selection,\n          instructionContext,\n          multiSelect\n        ),\n      },\n      () => {\n        this.updateToolbar();\n        this.instructionContextMenu.open(x, y);\n      }\n    );\n  };\n\n  selectInstruction = (instructionContext: InstructionContext) => {\n    const multiSelect = this._keyboardShortcuts.shouldMultiSelect();\n    this.setState(\n      {\n        selection: selectInstruction(\n          this.state.selection,\n          instructionContext,\n          multiSelect\n        ),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openParameterEditor = (parameterContext: ParameterContext) => {\n    const { instruction, parameterIndex } = parameterContext;\n\n    // $FlowFixMe\n    this.setState({\n      editedParameter: parameterContext,\n      inlineEditing: true,\n      inlineEditingAnchorEl: parameterContext.domEvent\n        ? parameterContext.domEvent.currentTarget\n        : null,\n      inlineEditingChangesMade: false,\n      inlineEditingPreviousValue: instruction.getParameter(parameterIndex),\n    });\n  };\n\n  closeParameterEditor = (shouldCancel: boolean) => {\n    if (shouldCancel) {\n      const { instruction, parameterIndex } = this.state.editedParameter;\n      if (!instruction || !this.state.inlineEditingPreviousValue) return;\n\n      instruction.setParameter(\n        parameterIndex,\n        this.state.inlineEditingPreviousValue\n      );\n    } else {\n      if (this.state.inlineEditingChangesMade) {\n        this._saveChangesToHistory();\n      }\n    }\n\n    const { inlineEditingAnchorEl } = this.state;\n\n    this.setState(\n      {\n        inlineEditing: false,\n        inlineEditingAnchorEl: null,\n        inlineEditingChangesMade: false,\n      },\n      () => {\n        if (inlineEditingAnchorEl) {\n          // Focus back the parameter - especially useful when editing\n          // with the keyboard only.\n          //\n          // Do this **after** the state change is applied.\n          // Otherwise this could cause a blur event for the input field\n          // that was focused in the inline popover,\n          // which would override the changes just applied to the\n          // instruction in case of cancellation.\n          // As the state change is applied, the inline popover is already\n          // gone and we can change the focus without worries.\n          inlineEditingAnchorEl.focus();\n        }\n      }\n    );\n  };\n\n  toggleDisabled = () => {\n    getSelectedEvents(this.state.selection).forEach(event =>\n      event.setDisabled(!event.isDisabled())\n    );\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  deleteSelection = ({\n    deleteInstructions = true,\n    deleteEvents = true,\n  }: { deleteInstructions?: boolean, deleteEvents?: boolean } = {}) => {\n    const { events } = this.props;\n    const eventsRemover = new gd.EventsRemover();\n    if (deleteEvents) {\n      getSelectedEvents(this.state.selection).forEach(event =>\n        eventsRemover.addEventToRemove(event)\n      );\n    }\n    if (deleteInstructions) {\n      getSelectedInstructions(this.state.selection).forEach(instruction =>\n        eventsRemover.addInstructionToRemove(instruction)\n      );\n    }\n\n    eventsRemover.launch(events);\n\n    // /!\\ Events were changed, so any reference to an existing event can now\n    // be invalid. Make sure to immediately trigger a forced update before\n    // any re-render that could use a deleted/invalid event.\n    if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n\n    this.setState(\n      {\n        selection: clearSelection(),\n        inlineEditing: false,\n        inlineEditingAnchorEl: null,\n      },\n      () => {\n        this._saveChangesToHistory();\n\n        // Deletion of an event/instruction will remove it from the DOM,\n        // potentially losing the focus on the associated DOM elements. Ensure\n        // we keep the focus on the EventsSheet.\n        this._ensureFocused();\n      }\n    );\n  };\n\n  copySelection = () => {\n    copySelectionToClipboard(this.state.selection);\n  };\n\n  cutSelection = () => {\n    this.copySelection();\n    this.deleteSelection();\n  };\n\n  pasteEvents = () => {\n    if (\n      !pasteEventsFromClipboardInSelection(\n        this.props.project,\n        this.state.selection\n      )\n    ) {\n      return;\n    }\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  pasteInstructions = () => {\n    if (\n      !pasteInstructionsFromClipboardInSelection(\n        this.props.project,\n        this.state.selection\n      )\n    ) {\n      return;\n    }\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  pasteEventsOrInstructions = () => {\n    if (hasEventSelected(this.state.selection)) this.pasteEvents();\n    else if (hasInstructionSelected(this.state.selection))\n      this.pasteInstructions();\n    else if (hasInstructionsListSelected(this.state.selection))\n      this.pasteInstructions();\n  };\n\n  pasteInstructionsInInstructionsList = (\n    instructionsListContext: InstructionsListContext\n  ) => {\n    if (\n      !pasteInstructionsFromClipboardInInstructionsList(\n        this.props.project,\n        instructionsListContext\n      )\n    ) {\n      return;\n    }\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _invertSelectedConditions = () => {\n    getSelectedInstructionsContexts(this.state.selection).forEach(\n      instructionContext => {\n        if (instructionContext.isCondition) {\n          instructionContext.instruction.setInverted(\n            !instructionContext.instruction.isInverted()\n          );\n        }\n      }\n    );\n\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _saveChangesToHistory = (cb: ?Function) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.events),\n      },\n      () => {\n        this.updateToolbar();\n        if (cb) cb();\n      }\n    );\n    if (this._searchPanel) this._searchPanel.markSearchResultsDirty();\n  };\n\n  undo = () => {\n    if (!canUndo(this.state.history)) return;\n\n    const { events, project } = this.props;\n    const newHistory = undo(this.state.history, events, project);\n\n    // /!\\ Events were changed, so any reference to an existing event can now\n    // be invalid. Make sure to immediately trigger a forced update before\n    // any re-render that could use a deleted/invalid event.\n    if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n\n    // /!\\ Also clear selection, that can contain reference to invalid events or\n    // events not shown on screen.\n    this.setState({ history: newHistory, selection: clearSelection() }, () =>\n      this.updateToolbar()\n    );\n  };\n\n  redo = () => {\n    if (!canRedo(this.state.history)) return;\n\n    const { events, project } = this.props;\n    const newHistory = redo(this.state.history, events, project);\n\n    // /!\\ Events were changed, so any reference to an existing event can now\n    // be invalid. Make sure to immediately trigger a forced update before\n    // any re-render that could use a deleted/invalid event.\n    if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n\n    // /!\\ Also clear selection, that can contain reference to invalid events or\n    // events not shown on screen.\n    this.setState({ history: newHistory, selection: clearSelection() }, () =>\n      this.updateToolbar()\n    );\n  };\n\n  onZoomEvent = (\n    towards: 'IN' | 'OUT'\n  ): ((domEvent?: KeyboardEvent) => void) => {\n    const factor = towards === 'IN' ? 1 : -1;\n    return (domEvent?: KeyboardEvent) => {\n      if (domEvent) {\n        // Browsers usually implement their own zoom features on the same shortcut\n        domEvent.preventDefault();\n        domEvent.stopPropagation();\n      }\n      this.props.preferences.setEventsSheetZoomLevel(\n        Math.min(\n          Math.max(\n            this.props.preferences.values.eventsSheetZoomLevel + factor * 1,\n            zoomLevel.min\n          ),\n          zoomLevel.max\n        )\n      );\n    };\n  };\n\n  _openEventsContextAnalyzer = () => {\n    const { globalObjectsContainer, objectsContainer } = this.props;\n    const eventsContextAnalyzer = new gd.EventsContextAnalyzer(\n      gd.JsPlatform.get(),\n      globalObjectsContainer,\n      objectsContainer\n    );\n\n    const eventsList = new gd.EventsList();\n    getSelectedEvents(this.state.selection).forEach(event =>\n      eventsList.insertEvent(event, eventsList.getEventsCount())\n    );\n\n    eventsContextAnalyzer.launch(eventsList);\n    eventsList.delete();\n\n    this.setState({\n      analyzedEventsContextResult: toEventsContextResult(\n        eventsContextAnalyzer.getEventsContext()\n      ),\n    });\n    eventsContextAnalyzer.delete();\n  };\n\n  _closeEventsContextAnalyzer = () => {\n    this.setState({\n      analyzedEventsContextResult: null,\n    });\n  };\n\n  extractEventsToFunction = () => {\n    const eventsList = new gd.EventsList();\n\n    getSelectedEvents(this.state.selection).forEach(event =>\n      eventsList.insertEvent(event, eventsList.getEventsCount())\n    );\n\n    this.setState({\n      serializedEventsToExtract: serializeToJSObject(eventsList),\n    });\n\n    eventsList.delete();\n  };\n\n  moveEventsIntoNewGroup = () => {\n    const eventsList = new gd.EventsList();\n\n    getSelectedEvents(this.state.selection).forEach(event =>\n      eventsList.insertEvent(event, eventsList.getEventsCount())\n    );\n\n    this._replaceSelectionByGroupOfEvents(eventsList);\n    eventsList.delete();\n  };\n\n  _replaceSelectionByEventsFunction = (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => {\n    const contexts = getSelectedEventContexts(this.state.selection);\n    if (!contexts.length) return;\n\n    const newEvents = this.addNewEvent('BuiltinCommonInstructions::Standard', {\n      eventsList: contexts[0].eventsList,\n      indexInList: contexts[0].indexInList,\n    });\n    if (!newEvents.length) {\n      console.error('A new event should have been created');\n      return;\n    }\n\n    const action = createNewInstructionForEventsFunction(\n      extensionName,\n      eventsFunction\n    );\n    const standardEvt = gd.asStandardEvent(newEvents[0]);\n    standardEvt.getActions().push_back(action);\n    action.delete();\n\n    this.deleteSelection({ deleteInstructions: false });\n  };\n\n  _replaceSelectionByGroupOfEvents = (eventsList: gdEventsList) => {\n    const contexts = getSelectedEventContexts(this.state.selection);\n    if (!contexts.length) return;\n\n    const newEvents = this.addNewEvent('BuiltinCommonInstructions::Group', {\n      eventsList: contexts[0].eventsList,\n      indexInList: contexts[0].indexInList,\n    });\n    if (!newEvents.length) {\n      console.error('A new event should have been created');\n      return;\n    }\n\n    const groupEvent = gd.asGroupEvent(newEvents[0]);\n\n    groupEvent.setName('Grouped events');\n    groupEvent.setFolded(true);\n    groupEvent\n      .getSubEvents()\n      .insertEvents(eventsList, 0, eventsList.getEventsCount(), 0);\n\n    this.deleteSelection({ deleteInstructions: false });\n  };\n\n  _ensureEventUnfolded = (cb: () => ?gdBaseEvent) => {\n    const event = cb();\n    if (event && this._eventsTree) {\n      this._eventsTree.unfoldForEvent(event);\n    }\n  };\n\n  _replaceInEvents = (\n    doReplaceInEvents: (inputs: ReplaceInEventsInputs) => void,\n    inputs: ReplaceInEventsInputs\n  ) => {\n    doReplaceInEvents(inputs);\n    this._saveChangesToHistory(() => {\n      if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n    });\n  };\n\n  _searchInEvents = (\n    doSearchInEvents: (inputs: SearchInEventsInputs, cb: () => void) => void,\n    inputs: SearchInEventsInputs\n  ) => {\n    doSearchInEvents(inputs, () => {\n      this.forceUpdate(() => {\n        if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n      });\n    });\n  };\n\n  _onEventMoved = () => {\n    // Move of the event in the list is handled by EventsTree.\n    // This could be refactored and put here if the drag'n'drop of events\n    // is reworked at some point.\n    this._saveChangesToHistory();\n  };\n\n  _renderInstructionEditorDialog = (newInstructionEditorDialog: boolean) => {\n    const {\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    // Choose the dialog to use\n    const Dialog = this.state.inlineInstructionEditorAnchorEl\n      ? NewInstructionEditorMenu\n      : newInstructionEditorDialog\n      ? NewInstructionEditorDialog\n      : InstructionEditorDialog;\n\n    return this.state.editedInstruction.instruction ? (\n      <Dialog\n        project={project}\n        scope={scope}\n        globalObjectsContainer={globalObjectsContainer}\n        objectsContainer={objectsContainer}\n        instruction={this.state.editedInstruction.instruction}\n        isCondition={this.state.editedInstruction.isCondition}\n        isNewInstruction={\n          this.state.editedInstruction.indexInList === undefined\n        }\n        anchorEl={this.state.inlineInstructionEditorAnchorEl}\n        open={true}\n        onCancel={() => this.closeInstructionEditor()}\n        onSubmit={() => {\n          const {\n            instrsList,\n            instruction,\n            indexInList,\n          } = this.state.editedInstruction;\n          if (!instrsList || !instruction) return;\n\n          if (indexInList !== undefined && indexInList !== null) {\n            // Replace an existing instruction\n            instrsList.set(indexInList, instruction);\n          } else {\n            // Add a new instruction\n            instrsList.insert(instruction, instrsList.size());\n          }\n\n          this.closeInstructionEditor(true);\n          ensureSingleOnceInstructions(instrsList);\n          if (this._eventsTree) this._eventsTree.forceEventsUpdate();\n        }}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        openInstructionOrExpression={(extension, type) => {\n          this.closeInstructionEditor();\n          this.props.openInstructionOrExpression(extension, type);\n        }}\n        canPasteInstructions={\n          this.state.editedInstruction.isCondition\n            ? hasClipboardConditions()\n            : hasClipboardActions()\n        }\n        onPasteInstructions={() => {\n          const { instrsList, isCondition } = this.state.editedInstruction;\n          if (!instrsList) return;\n\n          this.pasteInstructionsInInstructionsList({\n            instrsList,\n            isCondition,\n          });\n        }}\n      />\n    ) : (\n      undefined\n    );\n  };\n\n  /**\n   * Call this to ensure that the events sheet stays focused after a potential\n   * lost of focus (for example, after a scroll, the focused element might have\n   * been scrolled out of the view and so removed from the DOM)\n   */\n  _ensureFocused = () => {\n    if (!this._containerDiv || !document) return;\n\n    const containerDivElement = this._containerDiv.current;\n    if (document.activeElement === containerDivElement) {\n      // Focus is already on the container\n      return;\n    }\n    if (containerDivElement) {\n      if (\n        document.activeElement !== document.body &&\n        containerDivElement.contains(document.activeElement)\n      ) {\n        // Focus is already on an element of the container\n        return;\n      }\n\n      // Focus is not on an element of the container, we probably lost the focus\n      // after scrolling or removing an element. Give back the focus to the container.\n      containerDivElement.focus();\n    }\n  };\n\n  render() {\n    const {\n      project,\n      scope,\n      events,\n      onOpenExternalEvents,\n      onOpenLayout,\n      globalObjectsContainer,\n      objectsContainer,\n      preferences,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n      onCreateEventsFunction,\n    } = this.props;\n    if (!project) return null;\n\n    const screenType = useScreenType();\n\n    return (\n      <ResponsiveWindowMeasurer>\n        {windowWidth => (\n          <EventsSearcher\n            key={events.ptr}\n            ref={eventSearcher => (this._eventSearcher = eventSearcher)}\n            events={events}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            selection={this.state.selection}\n            project={project}\n          >\n            {({\n              eventsSearchResultEvents,\n              searchFocusOffset,\n              searchInEvents,\n              replaceInEvents,\n              goToPreviousSearchResult,\n              goToNextSearchResult,\n              clearSearchResults,\n            }) => (\n              <div\n                className=\"gd-events-sheet\"\n                style={styles.container}\n                onKeyDown={this._keyboardShortcuts.onKeyDown}\n                onKeyUp={this._keyboardShortcuts.onKeyUp}\n                onDragOver={this._keyboardShortcuts.onDragOver}\n                ref={this._containerDiv}\n                tabIndex={0}\n              >\n                <EventsTree\n                  ref={eventsTree => (this._eventsTree = eventsTree)}\n                  key={events.ptr}\n                  onScroll={this._ensureFocused}\n                  events={events}\n                  project={project}\n                  scope={scope}\n                  globalObjectsContainer={globalObjectsContainer}\n                  objectsContainer={objectsContainer}\n                  selection={this.state.selection}\n                  onInstructionClick={this.selectInstruction}\n                  onInstructionDoubleClick={this.openInstructionEditor}\n                  onInstructionContextMenu={this.openInstructionContextMenu}\n                  onAddInstructionContextMenu={\n                    this.openAddInstructionContextMenu\n                  }\n                  onAddNewInstruction={this.openInstructionEditor}\n                  onPasteInstructions={this.pasteInstructionsInInstructionsList}\n                  onMoveToInstruction={this.moveSelectionToInstruction}\n                  onMoveToInstructionsList={\n                    this.moveSelectionToInstructionsList\n                  }\n                  onParameterClick={this.openParameterEditor}\n                  onEventClick={this.selectEvent}\n                  onEventContextMenu={this.openEventContextMenu}\n                  onAddNewEvent={(\n                    eventType: string,\n                    eventsList: gdEventsList\n                  ) => {\n                    this.addNewEvent(eventType, {\n                      eventsList,\n                      indexInList: eventsList.getEventsCount(),\n                    });\n                  }}\n                  onOpenExternalEvents={onOpenExternalEvents}\n                  onOpenLayout={onOpenLayout}\n                  searchResults={eventsSearchResultEvents}\n                  searchFocusOffset={searchFocusOffset}\n                  onEventMoved={this._onEventMoved}\n                  showObjectThumbnails={\n                    preferences.values.eventsSheetShowObjectThumbnails\n                  }\n                  screenType={screenType}\n                  windowWidth={windowWidth}\n                  eventsSheetHeight={\n                    this._containerDiv.current\n                      ? this._containerDiv.current.clientHeight\n                      : 0\n                  }\n                  fontSize={preferences.values.eventsSheetZoomLevel}\n                />\n                {this.state.showSearchPanel && (\n                  <SearchPanel\n                    ref={searchPanel => (this._searchPanel = searchPanel)}\n                    onSearchInEvents={inputs =>\n                      this._searchInEvents(searchInEvents, inputs)\n                    }\n                    onReplaceInEvents={inputs =>\n                      this._replaceInEvents(replaceInEvents, inputs)\n                    }\n                    resultsCount={\n                      eventsSearchResultEvents\n                        ? eventsSearchResultEvents.length\n                        : null\n                    }\n                    hasEventSelected={hasEventSelected(this.state.selection)}\n                    onGoToPreviousSearchResult={() =>\n                      this._ensureEventUnfolded(goToPreviousSearchResult)\n                    }\n                    onCloseSearchPanel={() => {\n                      clearSearchResults();\n                      this._closeSearchPanel();\n                    }}\n                    onGoToNextSearchResult={() =>\n                      this._ensureEventUnfolded(goToNextSearchResult)\n                    }\n                    searchFocusOffset={searchFocusOffset}\n                  />\n                )}\n                <InlineParameterEditor\n                  open={this.state.inlineEditing}\n                  anchorEl={this.state.inlineEditingAnchorEl}\n                  onRequestClose={() => {\n                    this.closeParameterEditor(\n                      /*shouldCancel=*/ preferences.values\n                        .eventsSheetCancelInlineParameter === 'cancel'\n                    );\n                  }}\n                  onApply={() => {\n                    this.closeParameterEditor(/*shouldCancel=*/ false);\n                  }}\n                  project={project}\n                  scope={scope}\n                  globalObjectsContainer={globalObjectsContainer}\n                  objectsContainer={objectsContainer}\n                  isCondition={this.state.editedParameter.isCondition}\n                  instruction={this.state.editedParameter.instruction}\n                  parameterIndex={this.state.editedParameter.parameterIndex}\n                  onChange={value => {\n                    const {\n                      instruction,\n                      parameterIndex,\n                    } = this.state.editedParameter;\n                    if (!instruction || !this.state.inlineEditing) {\n                      // Unlikely to ever happen, but maybe a component could\n                      // fire the \"onChange\" while the inline editor was just\n                      // dismissed.\n                      return;\n                    }\n                    instruction.setParameter(parameterIndex, value);\n                    this.setState({\n                      inlineEditingChangesMade: true,\n                    });\n                    if (this._searchPanel)\n                      this._searchPanel.markSearchResultsDirty();\n                  }}\n                  resourceSources={resourceSources}\n                  onChooseResource={onChooseResource}\n                  resourceExternalEditors={resourceExternalEditors}\n                />\n                <ContextMenu\n                  ref={eventContextMenu =>\n                    (this.eventContextMenu = eventContextMenu)\n                  }\n                  buildMenuTemplate={this._buildEventContextMenu}\n                />\n                <ContextMenu\n                  ref={instructionContextMenu =>\n                    (this.instructionContextMenu = instructionContextMenu)\n                  }\n                  buildMenuTemplate={this._buildInstructionContextMenu}\n                />\n                {this._renderInstructionEditorDialog(\n                  // Force using the new instruction editor on touch screens.\n                  preferences.values.useNewInstructionEditorDialog ||\n                    screenType === 'touch'\n                )}\n                {this.state.analyzedEventsContextResult && (\n                  <EventsContextAnalyzerDialog\n                    onClose={this._closeEventsContextAnalyzer}\n                    eventsContextResult={this.state.analyzedEventsContextResult}\n                  />\n                )}\n                {this.state.serializedEventsToExtract && (\n                  <EventsFunctionExtractorDialog\n                    project={project}\n                    globalObjectsContainer={globalObjectsContainer}\n                    objectsContainer={objectsContainer}\n                    onClose={() =>\n                      this.setState({\n                        serializedEventsToExtract: null,\n                      })\n                    }\n                    serializedEvents={this.state.serializedEventsToExtract}\n                    onCreate={(extensionName, eventsFunction) => {\n                      onCreateEventsFunction(extensionName, eventsFunction);\n                      this._replaceSelectionByEventsFunction(\n                        extensionName,\n                        eventsFunction\n                      );\n                      this.setState({\n                        serializedEventsToExtract: null,\n                      });\n                    }}\n                  />\n                )}\n                {this.state.textEditedEvent && (\n                  <EventTextDialog\n                    event={this.state.textEditedEvent}\n                    onApply={() => {\n                      this.closeEventTextDialog();\n                      this._saveChangesToHistory();\n                    }}\n                    onClose={this.closeEventTextDialog}\n                  />\n                )}\n                <InfoBar\n                  identifier=\"edit-instruction-explanation\"\n                  message={\n                    <Trans>\n                      Double click on a condition or action to edit it.\n                    </Trans>\n                  }\n                  touchScreenMessage={\n                    <Trans>\n                      Double tap a condition or action to edit it. Long press to\n                      show more options.\n                    </Trans>\n                  }\n                  show={hasInstructionSelected(this.state.selection)}\n                />\n              </div>\n            )}\n          </EventsSearcher>\n        )}\n      </ResponsiveWindowMeasurer>\n    );\n  }\n}\n\nexport type EventsSheetInterface = {|\n  updateToolbar: () => void,\n|};\n\n// EventsSheet is a wrapper so that the component can use multiple\n// context in class methods while correctly exposing the interface.\nconst EventsSheet = (props, ref) => {\n  React.useImperativeHandle(ref, () => ({\n    updateToolbar,\n  }));\n\n  const component = React.useRef<?EventsSheetComponentWithoutHandle>(null);\n  const updateToolbar = () => {\n    if (component.current) component.current.updateToolbar();\n  };\n\n  const authenticatedUser = React.useContext(AuthenticatedUserContext);\n  const preferences = React.useContext(PreferencesContext);\n  return (\n    <EventsSheetComponentWithoutHandle\n      ref={component}\n      authenticatedUser={authenticatedUser}\n      preferences={preferences}\n      {...props}\n    />\n  );\n};\n\nexport default React.forwardRef<Props, EventsSheetInterface>(EventsSheet);\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport {\n  type ParameterInlineRenderer,\n  type ParameterInlineRendererProps,\n} from './ParameterFields/ParameterInlineRenderer.flow';\nimport DefaultField, {\n  renderInlineDefaultField,\n} from './ParameterFields/DefaultField';\nimport RelationalOperatorField, {\n  renderInlineRelationalOperator,\n} from './ParameterFields/RelationalOperatorField';\nimport OperatorField, {\n  renderInlineOperator,\n} from './ParameterFields/OperatorField';\nimport MouseField, { renderInlineMouse } from './ParameterFields/MouseField';\nimport KeyField, { renderInlineKey } from './ParameterFields/KeyField';\nimport ObjectField, {\n  renderInlineObjectWithThumbnail,\n} from './ParameterFields/ObjectField';\nimport YesNoField, { renderInlineYesNo } from './ParameterFields/YesNoField';\nimport TrueFalseField, {\n  renderInlineTrueFalse,\n} from './ParameterFields/TrueFalseField';\nimport ExpressionField from './ParameterFields/ExpressionField';\nimport StringField from './ParameterFields/StringField';\nimport StringWithSelectorField from './ParameterFields/StringWithSelectorField';\nimport BehaviorField from './ParameterFields/BehaviorField';\nimport SceneVariableField, {\n  renderInlineSceneVariable,\n} from './ParameterFields/SceneVariableField';\nimport GlobalVariableField, {\n  renderInlineGlobalVariable,\n} from './ParameterFields/GlobalVariableField';\nimport ObjectVariableField, {\n  renderInlineObjectVariable,\n} from './ParameterFields/ObjectVariableField';\nimport LayerField from './ParameterFields/LayerField';\nimport AudioResourceField from './ParameterFields/AudioResourceField';\nimport VideoResourceField from './ParameterFields/VideoResourceField';\nimport JsonResourceField from './ParameterFields/JsonResourceField';\nimport BitmapFontResourceField from './ParameterFields/BitmapFontResourceField';\nimport ColorExpressionField from './ParameterFields/ColorExpressionField';\nimport ForceMultiplierField, {\n  renderInlineForceMultiplier,\n} from './ParameterFields/ForceMultiplierField';\nimport SceneNameField from './ParameterFields/SceneNameField';\nimport LayerEffectNameField from './ParameterFields/LayerEffectNameField';\nimport LayerEffectParameterNameField from './ParameterFields/LayerEffectParameterNameField';\nimport ObjectEffectNameField from './ParameterFields/ObjectEffectNameField';\nimport ObjectEffectParameterNameField from './ParameterFields/ObjectEffectParameterNameField';\nimport ObjectPointNameField from './ParameterFields/ObjectPointNameField';\nimport ObjectAnimationNameField from './ParameterFields/ObjectAnimationNameField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nconst gd: libGDevelop = global.gd;\n\nconst components = {\n  default: DefaultField,\n  mouse: MouseField,\n  object: ObjectField,\n  relationalOperator: RelationalOperatorField,\n  operator: OperatorField,\n  yesorno: YesNoField,\n  trueorfalse: TrueFalseField,\n  expression: ExpressionField,\n  string: StringField,\n  stringWithSelector: StringWithSelectorField,\n  behavior: BehaviorField,\n  scenevar: SceneVariableField,\n  globalvar: GlobalVariableField,\n  objectvar: ObjectVariableField,\n  layer: LayerField,\n  key: KeyField,\n  file: DefaultField, //TODO\n  musicfile: AudioResourceField,\n  soundfile: AudioResourceField,\n  videoResource: VideoResourceField,\n  jsonResource: JsonResourceField,\n  bitmapFontResource: BitmapFontResourceField,\n  color: ColorExpressionField,\n  police: DefaultField, //TODO\n  joyaxis: DefaultField, //TODO\n  forceMultiplier: ForceMultiplierField,\n  sceneName: SceneNameField,\n  layerEffectName: LayerEffectNameField,\n  layerEffectParameterName: LayerEffectParameterNameField,\n  objectEffectName: ObjectEffectNameField,\n  objectEffectParameterName: ObjectEffectParameterNameField,\n  objectPointName: ObjectPointNameField,\n  objectAnimationName: ObjectAnimationNameField,\n};\nconst inlineRenderers: { [string]: ParameterInlineRenderer } = {\n  default: renderInlineDefaultField,\n  forceMultiplier: renderInlineForceMultiplier,\n  globalvar: renderInlineGlobalVariable,\n  scenevar: renderInlineSceneVariable,\n  objectvar: renderInlineObjectVariable,\n  key: renderInlineKey,\n  mouse: renderInlineMouse,\n  object: renderInlineObjectWithThumbnail,\n  yesorno: renderInlineYesNo,\n  trueorfalse: renderInlineTrueFalse,\n  operator: renderInlineOperator,\n  relationalOperator: renderInlineRelationalOperator,\n};\nconst userFriendlyTypeName: { [string]: MessageDescriptor } = {\n  mouse: t`Mouse button`,\n  object: t`Object`,\n  relationalOperator: t`Relational operator`,\n  operator: t`Operator`,\n  yesorno: t`Yes or No`,\n  trueorfalse: t`True or False`,\n  expression: t`Number`,\n  string: t`String`,\n  stringWithSelector: t`String`,\n  behavior: t`Behavior`,\n  scenevar: t`Scene variable`,\n  globalvar: t`Global variable`,\n  objectvar: t`Object variable`,\n  layer: t`Layer`,\n  key: t`Keyboard key`,\n  musicfile: t`Audio resource`,\n  soundfile: t`Audio resource`,\n  videoResource: t`Video resource`,\n  bitmapFontResource: t`Bitmap font resource`,\n  jsonResource: t`JSON resource`,\n  color: t`Color`,\n  forceMultiplier: t`Instant or permanent force`,\n  sceneName: t`Scene name`,\n  layerEffectName: t`Layer effect name`,\n  layerEffectParameterName: t`Layer effect parameter name`,\n  objectEffectName: t`Object effect name`,\n  objectEffectParameterName: t`Object effect parameter name`,\n  objectPointName: t`Object point name`,\n  objectAnimationName: t`Object animation name`,\n};\n\nexport default {\n  components,\n  getParameterComponent: (rawType: string) => {\n    const fieldType = gd.ParameterMetadata.isObject(rawType)\n      ? 'object'\n      : rawType;\n\n    if (components.hasOwnProperty(fieldType)) return components[fieldType];\n    else return components.default;\n  },\n  renderInlineParameter: (props: ParameterInlineRendererProps): React.Node => {\n    const rawType = props.parameterMetadata.getType();\n    const fieldType = gd.ParameterMetadata.isObject(rawType)\n      ? 'object'\n      : rawType;\n\n    const inlineRenderer =\n      inlineRenderers[fieldType] || inlineRenderers.default;\n    return inlineRenderer(props);\n  },\n  getUserFriendlyTypeName: (rawType: string): ?MessageDescriptor => {\n    const fieldType = gd.ParameterMetadata.isObject(rawType)\n      ? 'object'\n      : rawType;\n\n    return userFriendlyTypeName[fieldType] || null;\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport ObjectSelector from '../../ObjectsList/ObjectSelector';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { Trans } from '@lingui/macro';\nimport { nameAndIconContainer } from '../EventsTree/ClassNames';\n\nexport default class ObjectField extends React.Component<\n  ParameterFieldProps,\n  {||}\n> {\n  _description: ?string;\n  _longDescription: ?string;\n  _allowedObjectType: ?string;\n  _field: ?ObjectSelector;\n\n  constructor(props: ParameterFieldProps) {\n    super(props);\n\n    const { parameterMetadata } = this.props;\n\n    this._description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    this._longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : undefined;\n\n    this._allowedObjectType = parameterMetadata\n      ? parameterMetadata.getExtraInfo()\n      : undefined;\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <ObjectSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        value={this.props.value}\n        onChange={this.props.onChange}\n        onRequestClose={this.props.onRequestClose}\n        onApply={this.props.onApply}\n        allowedObjectType={this._allowedObjectType}\n        globalObjectsContainer={this.props.globalObjectsContainer}\n        objectsContainer={this.props.objectsContainer}\n        floatingLabelText={this._description}\n        helperMarkdownText={this._longDescription}\n        fullWidth\n        errorTextIfInvalid={\n          this._allowedObjectType ? (\n            <Trans>The object does not exist or can't be used here.</Trans>\n          ) : (\n            <Trans>Enter the name of an object.</Trans>\n          )\n        }\n        openOnFocus={\n          !this.props\n            .value /* Only force showing the list if no object is entered, see https://github.com/4ian/GDevelop/issues/859 */\n        }\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n\nexport const renderInlineObjectWithThumbnail = ({\n  value,\n  parameterMetadata,\n  renderObjectThumbnail,\n  MissingParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value && !parameterMetadata.isOptional()) {\n    return <MissingParameterValue />;\n  }\n\n  return (\n    <span\n      title={value}\n      className={classNames({\n        [nameAndIconContainer]: true,\n      })}\n    >\n      {renderObjectThumbnail(value)}\n      {value}\n    </span>\n  );\n};\n","// @flow\nimport slugs from 'slugs';\nimport axios from 'axios';\nimport * as PIXI from 'pixi.js-legacy';\nimport ResourcesLoader from '../ResourcesLoader';\nimport { loadFontFace } from '../Utils/FontFaceLoader';\nconst gd: libGDevelop = global.gd;\n\nconst loadedBitmapFonts = {};\nconst loadedFontFamilies = {};\nconst loadedTextures = {};\nconst invalidTexture = PIXI.Texture.from('res/error48.png');\n\n/**\n * Expose functions to load PIXI textures or fonts, given the names of\n * resources and a gd.Project.\n *\n * This internally uses ResourcesLoader to get the URL of the resources.\n */\nexport default class PixiResourcesLoader {\n  static _initializeTexture(resource: gdResource, texture: any) {\n    if (resource.getKind() !== 'image') return;\n\n    const imageResource = gd.asImageResource(resource);\n    if (!imageResource.isSmooth()) {\n      texture.baseTexture.scaleMode = PIXI.SCALE_MODES.NEAREST;\n    }\n  }\n\n  /**\n   * (Re)load the PIXI texture represented by the given resources.\n   */\n  static loadTextures(\n    project: gdProject,\n    resourceNames: Array<string>,\n    onProgress: (number, number) => void,\n    onComplete: () => void\n  ) {\n    const resourcesManager = project.getResourcesManager();\n    const loader = PIXI.Loader.shared;\n    loader.reset();\n\n    const allResources = {};\n    resourceNames.forEach(resourceName => {\n      if (!resourcesManager.hasResource(resourceName)) return;\n\n      const resource = resourcesManager.getResource(resourceName);\n      const filename = ResourcesLoader.getResourceFullUrl(\n        project,\n        resourceName,\n        {\n          isResourceForPixi: true,\n        }\n      );\n      loader.add(resourceName, filename);\n      allResources[resourceName] = resource;\n    });\n\n    const totalCount = Object.keys(allResources).length;\n    if (!totalCount) {\n      onComplete();\n      return;\n    }\n\n    let loadingCount = 0;\n    const progressCallbackId = loader.onProgress.add(function() {\n      loadingCount++;\n      onProgress(loadingCount, totalCount);\n    });\n\n    loader.load((loader, loadedResources) => {\n      loader.onProgress.detach(progressCallbackId);\n\n      //Store the loaded textures so that they are ready to use.\n      for (const resourceName in loadedResources) {\n        if (loadedResources.hasOwnProperty(resourceName)) {\n          const resource = resourcesManager.getResource(resourceName);\n          if (resource.getKind() !== 'image') continue;\n\n          loadedTextures[resourceName] = loadedResources[resourceName].texture;\n          PixiResourcesLoader._initializeTexture(\n            resource,\n            loadedTextures[resourceName]\n          );\n        }\n      }\n\n      onComplete();\n    });\n  }\n\n  /**\n   * Return the PIXI texture represented by the given resource.\n   * If not loaded, it will load it.\n   * @returns The PIXI.Texture to be used. It can be loading, so you\n   * should listen to PIXI.Texture `update` event, and refresh your object\n   * if this event is triggered.\n   */\n  static getPIXITexture(project: gdProject, resourceName: string) {\n    if (loadedTextures[resourceName]) {\n      // TODO: we never consider textures as not valid anymore. When we\n      // update the IDE to unload textures, we should handle loading them again\n      // here (and also be careful to return the same texture if it's not valid\n      // but still loading, when multiple objects are rapidly asking for the same texture).\n      return loadedTextures[resourceName];\n    }\n\n    if (!project.getResourcesManager().hasResource(resourceName))\n      return invalidTexture;\n\n    const resource = project.getResourcesManager().getResource(resourceName);\n    if (resource.getKind() !== 'image') return invalidTexture;\n\n    loadedTextures[resourceName] = PIXI.Texture.from(\n      ResourcesLoader.getResourceFullUrl(project, resourceName, {\n        isResourceForPixi: true,\n      })\n    );\n\n    PixiResourcesLoader._initializeTexture(\n      resource,\n      loadedTextures[resourceName]\n    );\n    return loadedTextures[resourceName];\n  }\n\n  /**\n   * Return the PIXI video texture represented by the given resource.\n   * If not loaded, it will load it.\n   * @returns The PIXI.Texture to be used. It can be loading, so you\n   * should listen to PIXI.Texture `update` event, and refresh your object\n   * if this event is triggered.\n   */\n  static getPIXIVideoTexture(project: gdProject, resourceName: string) {\n    if (loadedTextures[resourceName]) {\n      // TODO: we never consider textures as not valid anymore. When we\n      // update the IDE to unload textures, we should handle loading them again\n      // here (and also be careful to return the same texture if it's not valid\n      // but still loading, when multiple objects are rapidly asking for the same texture).\n      return loadedTextures[resourceName];\n    }\n\n    if (!project.getResourcesManager().hasResource(resourceName))\n      return invalidTexture;\n\n    const resource = project.getResourcesManager().getResource(resourceName);\n    if (resource.getKind() !== 'video') return invalidTexture;\n\n    loadedTextures[resourceName] = PIXI.Texture.from(\n      ResourcesLoader.getResourceFullUrl(project, resourceName, {\n        disableCacheBurst: true, // Disable cache bursting for video because it prevent the video to be recognized as such (for a local file)\n        isResourceForPixi: true,\n      }),\n      {\n        scaleMode: PIXI.SCALE_MODES.LINEAR,\n        resourceOptions: {\n          autoPlay: false,\n        },\n      }\n    );\n\n    return loadedTextures[resourceName];\n  }\n\n  /**\n   * Load the given font from its url/filename.\n   * @returns a Promise that resolves with the font-family to be used\n   * to render a text with the font.\n   */\n  static loadFontFamily(\n    project: gdProject,\n    resourceName: string\n  ): Promise<string> {\n    // Avoid reloading a font if it's already cached\n    if (loadedFontFamilies[resourceName]) {\n      return Promise.resolve(loadedFontFamilies[resourceName]);\n    }\n\n    const fontFamily = slugs(resourceName);\n    let fullFilename = null;\n    if (project.getResourcesManager().hasResource(resourceName)) {\n      const resource = project.getResourcesManager().getResource(resourceName);\n      if (resource.getKind() === 'font') {\n        fullFilename = ResourcesLoader.getResourceFullUrl(\n          project,\n          resourceName,\n          {\n            isResourceForPixi: true,\n          }\n        );\n      }\n    } else {\n      // Compatibility with GD <= 5.0-beta56\n      // Assume resourceName is just the filename to the font\n      fullFilename = ResourcesLoader.getFullUrl(project, resourceName, {\n        isResourceForPixi: true,\n      });\n      // end of compatibility code\n    }\n\n    if (!fullFilename) {\n      // If no resource is found/resource is not a font, default to Arial,\n      // as done by the game engine too.\n      return Promise.resolve('Arial');\n    }\n\n    return loadFontFace(fontFamily, `url(\"${fullFilename}\")`, {}).then(\n      loadedFace => {\n        loadedFontFamilies[resourceName] = fontFamily;\n\n        return fontFamily;\n      }\n    );\n  }\n\n  /**\n   * Get the font family name for the given font resource.\n   * The font won't be loaded.\n   * @returns The font-family to be used to render a text with the font.\n   */\n  static getFontFamily(project: gdProject, resourceName: string) {\n    if (loadedFontFamilies[resourceName]) {\n      return loadedFontFamilies[resourceName];\n    }\n\n    const fontFamily = slugs(resourceName);\n    return fontFamily;\n  }\n\n  /**\n   * Get the the data from a bitmap font file (fnt/xml) resource in the IDE.\n   */\n  static getBitmapFontData(\n    project: gdProject,\n    resourceName: string\n  ): Promise<any> {\n    if (loadedBitmapFonts[resourceName]) {\n      return Promise.resolve(loadedBitmapFonts[resourceName].data);\n    }\n\n    if (!project.getResourcesManager().hasResource(resourceName))\n      return Promise.reject(\n        new Error(`Can't find resource called ${resourceName}.`)\n      );\n\n    const resource = project.getResourcesManager().getResource(resourceName);\n    if (resource.getKind() !== 'bitmapFont')\n      return Promise.reject(\n        new Error(\n          `The resource called ${resourceName} is not a bitmap font file. Require .fnt or .xml format.`\n        )\n      );\n\n    const fullUrl = ResourcesLoader.getResourceFullUrl(project, resourceName, {\n      isResourceForPixi: true,\n    });\n    if (!fullUrl) {\n      return Promise.reject(\n        new Error(\n          `The resource called ${resourceName} was no found.\\nThe default bitmap font will be used.`\n        )\n      );\n    }\n\n    return axios.get(fullUrl).then(response => {\n      loadedBitmapFonts[resourceName] = response;\n      return response.data;\n    });\n  }\n\n  static getInvalidPIXITexture() {\n    return invalidTexture;\n  }\n\n  /**\n   * Get the the data from a json resource in the IDE.\n   */\n  static getResourceJsonData(\n    project: gdProject,\n    resourceName: string\n  ): Promise<any> {\n    if (!project.getResourcesManager().hasResource(resourceName))\n      return Promise.reject(\n        new Error(`Can't find resource called ${resourceName}.`)\n      );\n\n    const resource = project.getResourcesManager().getResource(resourceName);\n    if (resource.getKind() !== 'json')\n      return Promise.reject(\n        new Error(`The resource called ${resourceName} is not a json file.`)\n      );\n\n    const fullUrl = ResourcesLoader.getResourceFullUrl(project, resourceName, {\n      isResourceForPixi: true,\n    });\n    return axios.get(fullUrl).then(response => response.data);\n  }\n}\n","// @flow\nimport ReactDOM from 'react-dom';\nimport RaisedButton from './RaisedButton';\n\n// If you're searching for button components,\n// take a look at FlatButton or RaisedButton.\n\n/**\n * Focus a button. This won't display the material-ui Ripple effect\n * but is still better than nothing.\n */\nexport const focusButton = (buttonRef: { current: null | RaisedButton }) => {\n  if (buttonRef && buttonRef.current) {\n    const element = ReactDOM.findDOMNode(buttonRef.current);\n    if (element instanceof HTMLButtonElement) {\n      element.focus();\n    } else if (element instanceof HTMLElement) {\n      const children = element.getElementsByTagName('button');\n      if (\n        children &&\n        children.length &&\n        children[0] instanceof HTMLButtonElement\n      ) {\n        children[0].focus();\n      }\n    }\n  }\n};\n","//@flow\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type ParameterValues } from './ExpressionParametersEditorDialog';\nimport { mapVector } from '../../../Utils/MapFor';\n\nconst filterOutCodeOnlyParameters = (\n  array: Array<string>,\n  expressionMetadata: gdExpressionMetadata | gdInstructionMetadata,\n  firstParameterIndex: number\n) => {\n  const parametersCount = expressionMetadata.getParametersCount();\n\n  return array.filter((parameter, index) => {\n    if (index < firstParameterIndex) return false;\n\n    return (\n      index < parametersCount &&\n      !expressionMetadata.getParameter(index).isCodeOnly()\n    );\n  });\n};\n\nconst filterVisibleParameters = (\n  array: Array<string>,\n  expressionMetadata: gdExpressionMetadata | gdInstructionMetadata,\n  firstParameterIndex: number\n) => {\n  let lastRequiredIndex = -1;\n  let lastProvidedIndex = -1;\n\n  const arrayWithDefaults = array.map((parameter, index) => {\n    const metadata = expressionMetadata.getParameter(index);\n\n    if (!metadata.isOptional()) {\n      lastRequiredIndex = index;\n    }\n\n    if (parameter.length > 0) {\n      lastProvidedIndex = index;\n      return parameter;\n    } else {\n      // Fill default values for intermediate parameters so that the user doesn't have to.\n      return metadata.getDefaultValue();\n    }\n  });\n\n  const lastParameterIndex = Math.max(lastRequiredIndex, lastProvidedIndex, 0);\n\n  return arrayWithDefaults.filter(\n    (parameter, index) =>\n      firstParameterIndex <= index &&\n      index <= lastParameterIndex &&\n      !expressionMetadata.getParameter(index).isCodeOnly()\n  );\n};\n\nexport const getVisibleParameterTypes = (\n  expressionMetadata: EnumeratedInstructionOrExpressionMetadata\n): Array<string> => {\n  const parameterTypes: Array<string> = mapVector(\n    expressionMetadata.metadata.getParameters(),\n    parameterMetadata => parameterMetadata.getType()\n  );\n\n  if (expressionMetadata.scope.objectMetadata) {\n    return filterOutCodeOnlyParameters(\n      parameterTypes,\n      expressionMetadata.metadata,\n      1\n    );\n  } else if (expressionMetadata.scope.behaviorMetadata) {\n    return filterOutCodeOnlyParameters(\n      parameterTypes,\n      expressionMetadata.metadata,\n      2\n    );\n  } else {\n    return filterOutCodeOnlyParameters(\n      parameterTypes,\n      expressionMetadata.metadata,\n      0\n    );\n  }\n};\n\nexport const formatExpressionCall = (\n  expressionInfo: EnumeratedInstructionOrExpressionMetadata,\n  parameterValues: ParameterValues\n): string => {\n  const functionName = expressionInfo.name || '';\n\n  if (expressionInfo.scope.objectMetadata) {\n    const objectName = parameterValues[0];\n\n    const functionArgs = filterVisibleParameters(\n      parameterValues,\n      expressionInfo.metadata,\n      1\n    ).join(', ');\n    return `${objectName}.${functionName}(${functionArgs})`;\n  } else if (expressionInfo.scope.behaviorMetadata) {\n    const objectName = parameterValues[0];\n    const behaviorName = parameterValues[1];\n\n    const functionArgs = filterVisibleParameters(\n      parameterValues,\n      expressionInfo.metadata,\n      2\n    ).join(', ');\n    return `${objectName}.${behaviorName}::${functionName}(${functionArgs})`;\n  } else {\n    const functionArgs = filterVisibleParameters(\n      parameterValues,\n      expressionInfo.metadata,\n      0\n    ).join(', ');\n    return `${functionName}(${functionArgs})`;\n  }\n};\n","// @flow\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { enumerateVariables } from './EnumerateVariables';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport classNames from 'classnames';\nimport { icon, nameAndIconContainer } from '../EventsTree/ClassNames';\nimport SemiControlledAutoComplete, {\n  type SemiControlledAutoCompleteInterface,\n  type DataSource,\n} from '../../UI/SemiControlledAutoComplete';\nimport { TextFieldWithButtonLayout } from '../../UI/Layout';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport PreferencesContext from '../../MainFrame/Preferences/PreferencesContext';\nimport uniq from 'lodash/uniq';\n\ntype Props = {\n  ...ParameterFieldProps,\n  variablesContainer: ?gdVariablesContainer,\n  onComputeAllVariableNames: () => Array<string>,\n  onOpenDialog: ?() => void,\n};\n\ntype State = {|\n  autocompletionVariableNames: DataSource,\n|};\n\nexport default class VariableField extends Component<Props, State> {\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  static contextType = PreferencesContext;\n\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      autocompletionVariableNames: [],\n    };\n  }\n\n  componentDidMount() {\n    this.updateAutocompletions();\n  }\n\n  /**\n   * Can be called to set up or force updating the variables list.\n   */\n  updateAutocompletions() {\n    const definedVariableNames = enumerateVariables(\n      this.props.variablesContainer\n    )\n      .map(({ name, isValidName }) =>\n        isValidName\n          ? name\n          : // Hide invalid variable names - they would not\n            // be parsed correctly anyway.\n            null\n      )\n      .filter(Boolean);\n    const preferences = this.context;\n    const autocompletionVariableNames = preferences.values\n      .useUndefinedVariablesInAutocompletion\n      ? uniq([\n          ...definedVariableNames,\n          ...this.props.onComputeAllVariableNames(),\n        ])\n      : definedVariableNames;\n    this.setState({\n      autocompletionVariableNames: autocompletionVariableNames.map(name => ({\n        text: name,\n        value: name,\n      })),\n    });\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      isInline,\n      onOpenDialog,\n      parameterMetadata,\n      onRequestClose,\n      onApply,\n    } = this.props;\n\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <TextFieldWithButtonLayout\n        renderTextField={() => (\n          <SemiControlledAutoComplete\n            margin={this.props.isInline ? 'none' : 'dense'}\n            floatingLabelText={description}\n            helperMarkdownText={\n              parameterMetadata\n                ? parameterMetadata.getLongDescription()\n                : undefined\n            }\n            fullWidth\n            value={value}\n            onChange={onChange}\n            onRequestClose={onRequestClose}\n            onApply={onApply}\n            dataSource={this.state.autocompletionVariableNames}\n            openOnFocus={!isInline}\n            ref={field => (this._field = field)}\n          />\n        )}\n        renderButton={style =>\n          onOpenDialog && !isInline ? (\n            <RaisedButton\n              icon={<OpenInNew />}\n              disabled={!this.props.variablesContainer}\n              primary\n              style={style}\n              onClick={onOpenDialog}\n            />\n          ) : null\n        }\n      />\n    );\n  }\n}\n\nexport const renderVariableWithIcon = (\n  {\n    value,\n    parameterMetadata,\n    MissingParameterValue,\n  }: ParameterInlineRendererProps,\n  iconPath: string,\n  tooltip: string\n) => {\n  if (!value && !parameterMetadata.isOptional()) {\n    return <MissingParameterValue />;\n  }\n\n  return (\n    <span\n      title={tooltip}\n      className={classNames({\n        [nameAndIconContainer]: true,\n      })}\n    >\n      <img\n        className={classNames({\n          [icon]: true,\n        })}\n        src={iconPath}\n        alt=\"\"\n      />\n      {value}\n    </span>\n  );\n};\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport { type Schema } from '../PropertiesEditor';\nimport { type ResourceKind } from '../ResourcesList/ResourceSource';\nimport flatten from 'lodash/flatten';\n\nexport type EnumeratedEffectMetadata = {|\n  extension: gdPlatformExtension,\n  effectMetadata: gdEffectMetadata,\n  type: string,\n  fullName: string,\n  description: string,\n  parametersSchema: Schema,\n  isMarkedAsNotWorkingForObjects: boolean,\n|};\n\n/**\n * Fetch all the effects available for a project, and convert them\n * to a format easier to use.\n */\nexport const enumerateEffectsMetadata = (\n  project: gdProject\n): Array<EnumeratedEffectMetadata> => {\n  const platform = project.getCurrentPlatform();\n  const extensionsList = platform.getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, extensionsList.size(), i => {\n      const extension = extensionsList.at(i);\n\n      return extension\n        .getExtensionEffectTypes()\n        .toJSArray()\n        .map(type => extension.getEffectMetadata(type))\n        .map((effectMetadata: gdEffectMetadata) => {\n          const effectType = effectMetadata.getType();\n\n          // Convert the effect type properties to a PropertiesEditor Schema.\n          const properties = effectMetadata.getProperties();\n          const parameterNames = properties.keys().toJSArray();\n          const parametersSchema: Schema = parameterNames\n            .map((parameterName: string) => {\n              const property = properties.get(parameterName);\n              const valueType = property.getType().toLowerCase();\n              const propertyLabel = property.getLabel();\n              const propertyDescription = property.getDescription();\n              const getLabel = () => propertyLabel;\n              const getDescription = () => propertyDescription;\n              const getExtraDescription = () => parameterName;\n\n              if (valueType === 'number') {\n                return {\n                  name: parameterName,\n                  valueType: 'number',\n                  getValue: (effect: gdEffect) =>\n                    effect.getDoubleParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: number) =>\n                    effect.setDoubleParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else if (valueType === 'boolean') {\n                return {\n                  name: parameterName,\n                  valueType: 'boolean',\n                  getValue: (effect: gdEffect) =>\n                    effect.getBooleanParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: boolean) =>\n                    effect.setBooleanParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else if (valueType === 'resource') {\n                // Resource is a \"string\" (with a selector in the UI)\n                const kind: ResourceKind =\n                  // $FlowFixMe - assume the passed resource kind is always valid.\n                  property.getExtraInfo().toJSArray()[0] || '';\n                return {\n                  name: parameterName,\n                  valueType: 'resource',\n                  resourceKind: kind,\n                  getValue: (effect: gdEffect) =>\n                    effect.getStringParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: string) =>\n                    effect.setStringParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else if (valueType === 'color') {\n                return {\n                  name: parameterName,\n                  valueType: 'color',\n                  getValue: (effect: gdEffect) =>\n                    effect.getStringParameter(parameterName),\n                  setValue: (effect: gdEffect, newValue: string) =>\n                    effect.setStringParameter(parameterName, newValue),\n                  getLabel,\n                  getDescription,\n                  getExtraDescription,\n                };\n              } else {\n                console.error(\n                  `A property with type=${valueType} could not be mapped to a field for effect ${effectType}. Ensure that this type is correct.`\n                );\n                return null;\n              }\n            })\n            .filter(Boolean);\n\n          return {\n            extension,\n            type: effectType,\n            effectMetadata,\n            fullName: effectMetadata.getFullName(),\n            description: effectMetadata.getDescription(),\n            isMarkedAsNotWorkingForObjects: effectMetadata.isMarkedAsNotWorkingForObjects(),\n            parametersSchema,\n          };\n        });\n    })\n  ).sort(\n    (\n      enumeratedEffectMetadata1: EnumeratedEffectMetadata,\n      enumeratedEffectMetadata2: EnumeratedEffectMetadata\n    ) => {\n      return enumeratedEffectMetadata1.fullName.localeCompare(\n        enumeratedEffectMetadata2.fullName\n      );\n    }\n  );\n};\n\nexport const enumerateEffectNames = (\n  effectsContainer: gdEffectsContainer\n): Array<string> => {\n  return mapFor(0, effectsContainer.getEffectsCount(), (i: number) => {\n    const effect: gdEffect = effectsContainer.getEffectAt(i);\n    return effect.getName();\n  });\n};\n\nexport const setEffectDefaultParameters = (\n  effect: gdEffect,\n  effectMetadata: gdEffectMetadata\n) => {\n  effect.clearParameters();\n\n  const properties = effectMetadata.getProperties();\n  const parameterNames = properties.keys().toJSArray();\n  parameterNames.forEach((parameterName: string) => {\n    const property = properties.get(parameterName);\n    const valueType = property.getType().toLowerCase();\n\n    if (valueType === 'number') {\n      effect.setDoubleParameter(\n        parameterName,\n        parseFloat(property.getValue()) || 0\n      );\n    } else if (valueType === 'boolean') {\n      effect.setBooleanParameter(parameterName, property.getValue() === 'true');\n    } else {\n      effect.setStringParameter(parameterName, property.getValue());\n    }\n  });\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  listAllTutorials,\n  type Tutorial,\n} from '../Utils/GDevelopServices/Tutorial';\n\ntype TutorialState = {|\n  tutorials: ?Array<Tutorial>,\n  fetchTutorials: () => void,\n  error: ?Error,\n|};\n\nexport const TutorialContext = React.createContext<TutorialState>({\n  tutorials: null,\n  fetchTutorials: () => {},\n  error: null,\n});\n\ntype TutorialStateProviderProps = {|\n  children: React.Node,\n|};\n\nexport const TutorialStateProvider = ({\n  children,\n}: TutorialStateProviderProps) => {\n  const [tutorials, setTutorials] = React.useState<?(Tutorial[])>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const isLoading = React.useRef<boolean>(false);\n\n  const fetchTutorials = React.useCallback(\n    () => {\n      // Don't attempt to load again tutorials if they\n      // were loaded already.\n      if (tutorials || isLoading.current) return;\n\n      (async () => {\n        setError(null);\n        isLoading.current = true;\n\n        try {\n          const allTutorials: Array<Tutorial> = await listAllTutorials();\n\n          console.info(`Loaded ${allTutorials.length} tutorials.`);\n          setTutorials(allTutorials);\n        } catch (error) {\n          console.error(`Unable to load the tutorials:`, error);\n          setError(error);\n        }\n\n        isLoading.current = false;\n      })();\n    },\n    [tutorials, isLoading]\n  );\n\n  React.useEffect(\n    () => {\n      // Don't attempt to load again tutorials if they\n      // were loaded already.\n      if (tutorials || isLoading.current) return;\n\n      const timeoutId = setTimeout(() => {\n        console.info('Pre-fetching tutorials...');\n        fetchTutorials();\n      }, 5000);\n      return () => clearTimeout(timeoutId);\n    },\n    [fetchTutorials, tutorials, isLoading]\n  );\n\n  const tutorialState = React.useMemo(\n    () => ({\n      tutorials,\n      fetchTutorials,\n      error,\n    }),\n    [tutorials, fetchTutorials, error]\n  );\n\n  return (\n    <TutorialContext.Provider value={tutorialState}>\n      {children}\n    </TutorialContext.Provider>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  enumerateObjectAndBehaviorsInstructions,\n  enumerateAllInstructions,\n  getObjectParameterIndex,\n} from '../../InstructionOrExpression/EnumerateInstructions';\nimport {\n  createTree,\n  type InstructionTreeNode,\n} from '../../InstructionOrExpression/CreateTree';\nimport {\n  type EnumeratedInstructionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nconst gd: libGDevelop = global.gd;\n\n/** Helper to get the gdInstructionMetadata of an instruction. */\nexport const getInstructionMetadata = ({\n  instructionType,\n  isCondition,\n  project,\n}: {|\n  instructionType: string,\n  isCondition: boolean,\n  project: gdProject,\n|}): ?gdInstructionMetadata => {\n  if (!instructionType) return null;\n\n  return isCondition\n    ? gd.MetadataProvider.getConditionMetadata(\n        project.getCurrentPlatform(),\n        instructionType\n      )\n    : gd.MetadataProvider.getActionMetadata(\n        project.getCurrentPlatform(),\n        instructionType\n      );\n};\n\ntype Parameters = {|\n  project: gdProject,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  isNewInstruction: boolean,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n|};\n\ntype NewInstructionEditorState = {|\n  chosenObjectName: ?string,\n  chosenObjectInstructionsInfo: ?Array<EnumeratedInstructionMetadata>,\n  chosenObjectInstructionsInfoTree: ?InstructionTreeNode,\n|};\n\ntype NewInstructionEditorSetters = {|\n  /** Select an instruction - which can be a free or an object instruction. */\n  chooseInstruction: (\n    type: string\n  ) => {| ...NewInstructionEditorState, instruction: gdInstruction |},\n  /** Select an object, so that then this object specific instructions can be searched and selected. */\n  chooseObject: (\n    objectName: string\n  ) => {| ...NewInstructionEditorState, instruction: gdInstruction |},\n  /** Select an instruction for the currently selected object. */\n  chooseObjectInstruction: (\n    type: string\n  ) => {| ...NewInstructionEditorState, instruction: gdInstruction |},\n|};\n\nconst findInstruction = (\n  list: Array<EnumeratedInstructionMetadata>,\n  instructionType: string\n): ?EnumeratedInstructionMetadata => {\n  return list.find(({ type }) => type === instructionType);\n};\n\n/** React Hook handling the state of an instruction editor. */\nexport const useNewInstructionEditor = ({\n  instruction,\n  isCondition,\n  project,\n  isNewInstruction,\n  scope,\n  globalObjectsContainer,\n  objectsContainer,\n}: Parameters): [NewInstructionEditorState, NewInstructionEditorSetters] => {\n  const getChosenObjectState = (\n    objectName: string,\n    discardInstructionTypeIfNotInObjectInstructions: boolean\n  ): NewInstructionEditorState => {\n    const chosenObjectInstructionsInfo = filterEnumeratedInstructionOrExpressionMetadataByScope(\n      enumerateObjectAndBehaviorsInstructions(\n        isCondition,\n        globalObjectsContainer,\n        objectsContainer,\n        objectName\n      ),\n      scope\n    );\n\n    // As we changed to a new object, verify if the instruction is still valid for this object. If not,\n    // discard the chosen instruction - this is to avoid the user creating invalid instructions.\n    if (\n      instruction.getType() &&\n      discardInstructionTypeIfNotInObjectInstructions\n    ) {\n      const instructionMetadata = findInstruction(\n        chosenObjectInstructionsInfo,\n        instruction.getType()\n      );\n      if (!instructionMetadata) {\n        instruction.setType('');\n      }\n    }\n\n    return {\n      chosenObjectName: objectName,\n      chosenObjectInstructionsInfo,\n      chosenObjectInstructionsInfoTree: createTree(\n        chosenObjectInstructionsInfo\n      ),\n    };\n  };\n\n  const getInitialState = (): NewInstructionEditorState => {\n    if (!isNewInstruction) {\n      // Check if the instruction is an object/behavior instruction. If yes\n      // select the object, which is the first parameter of the instruction.\n      const allInstructions = enumerateAllInstructions(isCondition);\n      const instructionType: string = instruction.getType();\n      const enumeratedInstructionMetadata = findInstruction(\n        allInstructions,\n        instructionType\n      );\n      if (\n        enumeratedInstructionMetadata &&\n        (enumeratedInstructionMetadata.scope.objectMetadata ||\n          enumeratedInstructionMetadata.scope.behaviorMetadata)\n      ) {\n        const objectParameterIndex = getObjectParameterIndex(\n          enumeratedInstructionMetadata.metadata\n        );\n        if (objectParameterIndex !== -1) {\n          return getChosenObjectState(\n            instruction.getParameter(objectParameterIndex),\n            false /* Even if the instruction is invalid for the object, show it as it's what we have already */\n          );\n        }\n      }\n    }\n\n    // We're either making a new instruction or editing a free instruction.\n    return {\n      chosenObjectName: null,\n      chosenObjectInstructionsInfo: null,\n      chosenObjectInstructionsInfoTree: null,\n    };\n  };\n\n  const [state, setState] = React.useState(getInitialState);\n\n  const chooseObject = (objectName: string) => {\n    const newState = getChosenObjectState(objectName, true);\n    setState(newState);\n    return {\n      instruction,\n      ...newState,\n    };\n  };\n\n  const chooseObjectInstruction = (type: string) => {\n    instruction.setType(type);\n    if (state.chosenObjectName) {\n      const newState = getChosenObjectState(state.chosenObjectName, true);\n      setState(newState);\n      return {\n        instruction,\n        ...newState,\n      };\n    }\n\n    return {\n      instruction,\n      ...state,\n    };\n  };\n\n  const chooseInstruction = (type: string) => {\n    instruction.setType(type);\n    const newState = {\n      chosenObjectName: null,\n      chosenObjectInstructionsInfo: null,\n      chosenObjectInstructionsInfoTree: null,\n    };\n    setState({\n      chosenObjectName: null,\n      chosenObjectInstructionsInfo: null,\n      chosenObjectInstructionsInfoTree: null,\n    });\n\n    return {\n      instruction,\n      ...newState,\n    };\n  };\n\n  return [\n    state,\n    {\n      chooseInstruction,\n      chooseObject,\n      chooseObjectInstruction,\n    },\n  ];\n};\n","// @flow\nimport { getObjectParameterIndex } from './EnumerateInstructions';\nconst gd: libGDevelop = global.gd;\n\n/**\n * After selecting an instruction, this function allows to set up the proper\n * number of parameters, set up the object name (if an object instruction was chosen)\n * and set up the behavior name (if a behavior instruction was chosen).\n */\nexport const setupInstructionParameters = (\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  instructionMetadata: gdInstructionMetadata,\n  objectName: ?string\n) => {\n  instruction.setParametersCount(instructionMetadata.getParametersCount());\n\n  // For free instructions (not linked to an object or behavior), we can stop there.\n  // In the future, we could set up default values for parameters.\n  if (!objectName) return;\n\n  // Set the object name.\n  const objectParameterIndex = getObjectParameterIndex(instructionMetadata);\n  if (objectParameterIndex === -1) {\n    console.error(\n      `Instruction \"${instructionMetadata.getFullName()}\" is used for an object, but does not have an object as first parameter`\n    );\n    return;\n  }\n\n  instruction.setParameter(objectParameterIndex, objectName);\n\n  // Set the behavior name, if any.\n  const maybeBehaviorParameterIndex = objectParameterIndex + 1;\n  if (maybeBehaviorParameterIndex < instructionMetadata.getParametersCount()) {\n    const maybeBehaviorParameterMetadata = instructionMetadata.getParameter(\n      maybeBehaviorParameterIndex\n    );\n    if (\n      !gd.ParameterMetadata.isBehavior(maybeBehaviorParameterMetadata.getType())\n    ) {\n      // The parameter after the object is not a behavior, there is nothing to complete.\n      return;\n    }\n\n    const allowedBehaviorType = maybeBehaviorParameterMetadata.getExtraInfo();\n    const behaviorNames = gd\n      .getBehaviorsOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        objectName,\n        true\n      )\n      .toJSArray()\n      .filter(behaviorName => {\n        return (\n          !allowedBehaviorType ||\n          gd.getTypeOfBehavior(\n            globalObjectsContainer,\n            objectsContainer,\n            behaviorName,\n            false\n          ) === allowedBehaviorType\n        );\n      });\n\n    if (behaviorNames.length > 0) {\n      const currentParameterValue = instruction.getParameter(\n        maybeBehaviorParameterIndex\n      );\n\n      // Set the behavior to the first matching behavior, in case a matching behavior name\n      // is not already set.\n      if (\n        !behaviorNames.some(\n          behaviorName => currentParameterValue === behaviorName\n        )\n      ) {\n        instruction.setParameter(maybeBehaviorParameterIndex, behaviorNames[0]);\n      }\n    } else {\n      // Ignore - this will be shown as an error in the BehaviorField (the required\n      // behavior is not attached to the object).\n    }\n  }\n};\n","// @flow\nimport React from 'react';\nimport { type Tags, removeTag } from '../Utils/TagsHelper';\nimport Chip from '@material-ui/core/Chip';\n\nconst styles = {\n  chipContainer: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    overflowX: 'auto',\n    marginTop: 4,\n  },\n  chip: {\n    marginRight: 4,\n    marginBottom: 4,\n  },\n};\n\ntype Props = {|\n  tags: Tags,\n  onChange?: Tags => void,\n|};\n\nexport default ({ tags, onChange }: Props) => {\n  if (!tags.length) return null;\n\n  return (\n    <div style={styles.chipContainer}>\n      {tags.map(tag => (\n        <Chip\n          key={tag}\n          size=\"small\"\n          style={styles.chip}\n          onDelete={onChange ? () => onChange(removeTag(tags, tag)) : undefined}\n          label={tag}\n        />\n      ))}\n    </div>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  type Filters,\n  type TagsTreeNode,\n} from '../../Utils/GDevelopServices/Filters';\nimport TreeView from '@material-ui/lab/TreeView';\nimport TreeItem from '@material-ui/lab/TreeItem';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport PlaceholderLoader from '../PlaceholderLoader';\nimport { type FiltersState, type ChosenCategory } from './FiltersChooser';\n\nconst nodeIdSeparator = ';-/>'; // A seemingly random string to ensure no clashes with tag names.\nconst toNodeId = (nodes: Array<TagsTreeNode>) =>\n  nodes.map(node => node.name).join(nodeIdSeparator);\n\nconst TagsTreeItems = ({\n  tagsTreeNodes,\n  onChoose,\n  parentNodes,\n}: {|\n  parentNodes: Array<TagsTreeNode>,\n  tagsTreeNodes: Array<TagsTreeNode>,\n  onChoose: ChosenCategory => void,\n|}) => {\n  if (!tagsTreeNodes.length) return null;\n\n  return tagsTreeNodes.map(node => {\n    const newParentNodes = [...parentNodes, node];\n    return (\n      <TreeItem\n        nodeId={toNodeId(newParentNodes)}\n        label={node.name}\n        key={node.name}\n        onLabelClick={() => onChoose({ node, parentNodes })}\n        collapseIcon={node.children.length ? <ExpandMoreIcon /> : null}\n        expandIcon={node.children.length ? <ChevronRightIcon /> : null}\n      >\n        <TagsTreeItems\n          tagsTreeNodes={node.children}\n          parentNodes={newParentNodes}\n          onChoose={onChoose}\n        />\n      </TreeItem>\n    );\n  });\n};\n\ntype MemoizedTagsTreeProps = {|\n  allItemsLabel: React.Node,\n  chosenCategory: ?ChosenCategory,\n  setChosenCategory: (?ChosenCategory) => void,\n  allFilters: Filters,\n|};\n\nconst MemoizedTagsTree = React.memo<MemoizedTagsTreeProps>(function TagsTree({\n  allItemsLabel,\n  chosenCategory,\n  setChosenCategory,\n  allFilters,\n}: MemoizedTagsTreeProps) {\n  return (\n    <TreeView\n      selected={\n        chosenCategory\n          ? toNodeId([...chosenCategory.parentNodes, chosenCategory.node])\n          : ''\n      }\n      defaultExpanded={[]}\n      onNodeSelect={() => {}}\n    >\n      <TreeItem\n        nodeId=\"\"\n        label={allItemsLabel}\n        onLabelClick={() => setChosenCategory(null)}\n      />\n      <TagsTreeItems\n        tagsTreeNodes={allFilters.tagsTree}\n        onChoose={setChosenCategory}\n        parentNodes={[]}\n      />\n    </TreeView>\n  );\n});\n\ntype Props = {|\n  allItemsLabel: React.Node,\n  filtersState: FiltersState,\n  allFilters: ?Filters,\n  error: ?Error,\n|};\n\nexport const CategoryChooser = ({\n  filtersState,\n  allFilters,\n  error,\n  allItemsLabel,\n}: Props) => {\n  if (!allFilters) {\n    return <PlaceholderLoader />;\n  }\n  if (error) {\n    // Error and retry button shown somewhere else in the UI\n    return null;\n  }\n\n  return (\n    <MemoizedTagsTree\n      allItemsLabel={allItemsLabel}\n      chosenCategory={filtersState.chosenCategory}\n      setChosenCategory={filtersState.setChosenCategory}\n      allFilters={allFilters}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { type FiltersState, useFilters } from '../UI/Search/FiltersChooser';\nimport { type Filters } from '../Utils/GDevelopServices/Filters';\nimport {\n  type AssetShortHeader,\n  type Author,\n  type License,\n  listAllAssets,\n  listAllAuthors,\n  listAllLicenses,\n} from '../Utils/GDevelopServices/Asset';\nimport { useSearchItem } from '../UI/Search/UseSearchItem';\n\nconst defaultSearchText = '';\n\ntype AssetStoreState = {|\n  filters: ?Filters,\n  authors: ?Array<Author>,\n  licenses: ?Array<License>,\n  searchResults: ?Array<AssetShortHeader>,\n  fetchAssetsAndFilters: () => void,\n  error: ?Error,\n  searchText: string,\n  setSearchText: string => void,\n  filtersState: FiltersState,\n|};\n\nexport const AssetStoreContext = React.createContext<AssetStoreState>({\n  filters: null,\n  authors: null,\n  licenses: null,\n  searchResults: null,\n  fetchAssetsAndFilters: () => {},\n  error: null,\n  searchText: '',\n  setSearchText: () => {},\n  filtersState: {\n    chosenFilters: new Set(),\n    addFilter: () => {},\n    removeFilter: () => {},\n    chosenCategory: null,\n    setChosenCategory: () => {},\n  },\n});\n\ntype AssetStoreStateProviderProps = {|\n  children: React.Node,\n|};\n\nconst getAssetShortHeaderSearchTerms = (assetShortHeader: AssetShortHeader) => {\n  return (\n    assetShortHeader.name +\n    '\\n' +\n    assetShortHeader.shortDescription +\n    '\\n' +\n    assetShortHeader.tags.join(', ')\n  );\n};\n\nexport const AssetStoreStateProvider = ({\n  children,\n}: AssetStoreStateProviderProps) => {\n  const [assetShortHeadersById, setAssetShortHeadersById] = React.useState<?{\n    [string]: AssetShortHeader,\n  }>(null);\n  const [filters, setFilters] = React.useState<?Filters>(null);\n  const [authors, setAuthors] = React.useState<?Array<Author>>(null);\n  const [licenses, setLicenses] = React.useState<?Array<License>>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const isLoading = React.useRef<boolean>(false);\n\n  const [searchText, setSearchText] = React.useState(defaultSearchText);\n  const filtersState = useFilters();\n\n  const fetchAssetsAndFilters = React.useCallback(\n    () => {\n      // Don't attempt to load again assets and filters if they\n      // were loaded already.\n      if (assetShortHeadersById || isLoading.current) return;\n\n      (async () => {\n        setError(null);\n        isLoading.current = true;\n\n        try {\n          const { assetShortHeaders, filters } = await listAllAssets();\n          const authors = await listAllAuthors();\n          const licenses = await listAllLicenses();\n\n          const assetShortHeadersById = {};\n          assetShortHeaders.forEach(assetShortHeader => {\n            assetShortHeadersById[assetShortHeader.id] = assetShortHeader;\n          });\n\n          console.info(\n            `Loaded ${assetShortHeaders.length} assets from the asset store.`\n          );\n          setAssetShortHeadersById(assetShortHeadersById);\n          setFilters(filters);\n          setAuthors(authors);\n          setLicenses(licenses);\n        } catch (error) {\n          console.error(\n            `Unable to load the assets from the asset store:`,\n            error\n          );\n          setError(error);\n        }\n\n        isLoading.current = false;\n      })();\n    },\n    [assetShortHeadersById, isLoading]\n  );\n\n  React.useEffect(\n    () => {\n      // Don't attempt to load again assets and filters if they\n      // were loaded already.\n      if (assetShortHeadersById || isLoading.current) return;\n\n      const timeoutId = setTimeout(() => {\n        console.info('Pre-fetching assets from asset store...');\n        fetchAssetsAndFilters();\n      }, 6000);\n      return () => clearTimeout(timeoutId);\n    },\n    [fetchAssetsAndFilters, assetShortHeadersById, isLoading]\n  );\n\n  const { chosenCategory, chosenFilters } = filtersState;\n  const searchResults: ?Array<AssetShortHeader> = useSearchItem(\n    assetShortHeadersById,\n    getAssetShortHeaderSearchTerms,\n    searchText,\n    chosenCategory,\n    chosenFilters\n  );\n\n  const assetStoreState = React.useMemo(\n    () => ({\n      searchResults,\n      fetchAssetsAndFilters,\n      filters,\n      authors,\n      licenses,\n      error,\n      searchText,\n      setSearchText,\n      filtersState,\n    }),\n    [\n      searchResults,\n      error,\n      filters,\n      authors,\n      licenses,\n      searchText,\n      filtersState,\n      fetchAssetsAndFilters,\n    ]\n  );\n\n  return (\n    <AssetStoreContext.Provider value={assetStoreState}>\n      {children}\n    </AssetStoreContext.Provider>\n  );\n};\n","// @flow\nlet pixelatedImageRenderingValue: ?string = null;\nexport const getPixelatedImageRendering = (): string => {\n  if (pixelatedImageRenderingValue) return pixelatedImageRenderingValue;\n\n  return (pixelatedImageRenderingValue = global.CSS.supports(\n    'image-rendering: crisp-edges'\n  )\n    ? 'crisp-edges'\n    : 'pixelated');\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport { Line } from '../../UI/Grid';\nimport Text from '../../UI/Text';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../../UI/Table';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { ColumnStackLayout } from '../../UI/Layout';\n\nexport type FetchedResources = {|\n  erroredResources: Array<{|\n    resourceName: string,\n    error: Error,\n  |}>,\n  fetchedResources: Array<{|\n    resourceName: string,\n  |}>,\n|};\n\nexport type FetchResourcesArgs = {|\n  project: gdProject,\n  resourceNames: Array<string>,\n  onProgress: (count: number, total: number) => void,\n|};\n\n/**\n * Describe a way to fetch resources so that they can be used in the editor\n * and in previews. For the local editor, this means downloading the resources\n * that have URLs.\n */\nexport type ResourceFetcher = {|\n  getResourcesToFetch: (project: gdProject) => Array<string>,\n  fetchResources: FetchResourcesArgs => Promise<FetchedResources>,\n|};\n\nexport const ResourceFetcherContext = React.createContext<?ResourceFetcher>(\n  null\n);\n\ntype ResourceFetcherDialogProps = {|\n  progress: number,\n  fetchedResources: ?FetchedResources,\n  onAbandon: ?() => void,\n  onRetry: ?() => void,\n|};\n\nexport const ResourceFetcherDialog = ({\n  progress,\n  fetchedResources,\n  onAbandon,\n  onRetry,\n}: ResourceFetcherDialogProps) => {\n  const hasErrors =\n    fetchedResources && fetchedResources.erroredResources.length > 0;\n\n  return (\n    <Dialog\n      actions={[\n        onRetry ? (\n          <RaisedButton\n            label={<Trans>Retry</Trans>}\n            primary\n            onClick={onRetry}\n            key=\"retry\"\n          />\n        ) : null,\n        <FlatButton\n          label={\n            onAbandon ? <Trans>Abandon</Trans> : <Trans>Please wait...</Trans>\n          }\n          disabled={!onAbandon}\n          onClick={onAbandon}\n          key=\"close\"\n        />,\n      ]}\n      cannotBeDismissed={true}\n      noMargin\n      open\n      maxWidth=\"sm\"\n    >\n      <Line>\n        <ColumnStackLayout expand>\n          <Text>\n            {hasErrors ? (\n              <Trans>\n                There were errors when fetching resources for the project.\n              </Trans>\n            ) : (\n              <Trans>Resources needed for the project are downloaded...</Trans>\n            )}\n          </Text>\n          <LinearProgress variant=\"determinate\" value={progress} />\n          {hasErrors && fetchedResources ? (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHeaderColumn>Resource name</TableHeaderColumn>\n                  <TableHeaderColumn>Error</TableHeaderColumn>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {fetchedResources.erroredResources.map(\n                  ({ resourceName, error }) => (\n                    <TableRow key={resourceName}>\n                      <TableRowColumn>{resourceName}</TableRowColumn>\n                      <TableRowColumn>{error.toString()}</TableRowColumn>\n                    </TableRow>\n                  )\n                )}\n              </TableBody>\n            </Table>\n          ) : null}\n        </ColumnStackLayout>\n      </Line>\n    </Dialog>\n  );\n};\n\ntype RetryOrAbandonCallback = () => void;\n\ntype UseResourceFetcherOutput = {\n  /**\n   * Launch the fetching of the resources, if needed. For example, for the desktop\n   * app, this means downloading the resources that have URLs.\n   */\n  ensureResourcesAreFetched: (\n    project: gdProject\n  ) => Promise<{|\n    someResourcesWereFetched: boolean,\n  |}>,\n  /**\n   * Render, if needed, the dialog that will show the progress of resources fetching.\n   */\n  renderResourceFetcherDialog: () => React.Node,\n};\n\n/**\n * Hook allowing to launch the fetching of resources, useful after opening a project\n * or adding assets from the asset store (as they must be downloaded on the desktop app).\n */\nexport const useResourceFetcher = (): UseResourceFetcherOutput => {\n  const resourceFetcher = React.useContext(ResourceFetcherContext);\n  const [progress, setProgress] = React.useState(0);\n  const [isFetching, setIsFetching] = React.useState(false);\n  const [\n    fetchedResources,\n    setFetchedResources,\n  ] = React.useState<?FetchedResources>(null);\n  const [onRetry, setOnRetry] = React.useState<?RetryOrAbandonCallback>(null);\n  const [onAbandon, setOnAbandon] = React.useState<?RetryOrAbandonCallback>(\n    null\n  );\n\n  const ensureResourcesAreFetched = React.useCallback(\n    async (project: gdProject) => {\n      if (!resourceFetcher) throw new Error('No resourceFetcher was defined');\n\n      const resourceNames = resourceFetcher.getResourcesToFetch(project);\n      if (resourceNames.length === 0)\n        return { someResourcesWereFetched: false };\n\n      setProgress(0);\n      setOnRetry(null);\n      setOnAbandon(null);\n      setFetchedResources(null);\n      setIsFetching(true);\n\n      // TODO: handle error?\n      const fetchedResources = await resourceFetcher.fetchResources({\n        project,\n        resourceNames,\n        onProgress: (count, total) => {\n          setProgress((count / total) * 100);\n        },\n      });\n\n      setProgress(100);\n      if (fetchedResources.erroredResources.length === 0) {\n        // No error happened: finish normally, closing the dialog.\n        setIsFetching(false);\n        setFetchedResources(null);\n        return { someResourcesWereFetched: true };\n      }\n\n      // An error happened. Store the errors and offer a way to\n      // retry.\n      return new Promise(resolve => {\n        setOnRetry(\n          (): RetryOrAbandonCallback => () => {\n            // Launch the fetch again, and solve the promise once\n            // this new fetch resolve itself.\n            resolve(ensureResourcesAreFetched(project));\n          }\n        );\n        setOnAbandon(\n          (): RetryOrAbandonCallback => () => {\n            // Abandon: resolve immediately, closing the dialog\n            setIsFetching(false);\n            setFetchedResources(null);\n            resolve({ someResourcesWereFetched: true });\n          }\n        );\n\n        // Display the errors to the user:\n        setFetchedResources(fetchedResources);\n        setIsFetching(false);\n      });\n    },\n    [resourceFetcher]\n  );\n\n  const renderResourceFetcherDialog = () => {\n    const hasErrors =\n      fetchedResources && fetchedResources.erroredResources.length >= 0;\n    if (!isFetching && !hasErrors) return null;\n\n    return (\n      <ResourceFetcherDialog\n        progress={progress}\n        fetchedResources={fetchedResources}\n        onAbandon={onAbandon}\n        onRetry={onRetry}\n      />\n    );\n  };\n\n  return {\n    ensureResourcesAreFetched,\n    renderResourceFetcherDialog,\n  };\n};\n","// @flow\n\nexport const roundPosition = (\n  pos: [number, number],\n  gridWidth: number,\n  gridHeight: number,\n  gridOffsetX: number,\n  gridOffsetY: number,\n  gridType: string\n) => {\n  if (gridType === 'isometric') {\n    if (gridWidth <= 0 || gridHeight <= 0) {\n      pos[0] = Math.round(pos[0]);\n      pos[1] = Math.round(pos[1]);\n      return;\n    }\n    // Why do we need this?\n    // Take a 2x2 squares, put a diamond inside each square,\n    // there is a 5th diamond in the center\n    // So, half cells are needed, but some are not to be used.\n    // It makes a pattern in diagonal like this:\n    // o-o-o-\n    // -o-o-o\n    // o-o-o-\n    let cellX = Math.round(((pos[0] - gridOffsetX) * 2) / gridWidth);\n    let cellY = Math.round(((pos[1] - gridOffsetY) * 2) / gridHeight);\n\n    if ((((cellX + cellY) % 2) + 2) % 2 === 1) {\n      // This cell should not be used, find the nearest one\n      const deltaX =\n        (pos[0] - ((cellX / 2) * gridWidth + gridOffsetX)) / gridWidth;\n      const deltaY =\n        (pos[1] - ((cellY / 2) * gridHeight + gridOffsetY)) / gridHeight;\n\n      if (Math.abs(deltaX) > Math.abs(deltaY)) {\n        if (deltaX > 0) {\n          cellX++;\n        } else {\n          cellX--;\n        }\n      } else {\n        if (deltaY > 0) {\n          cellY++;\n        } else {\n          cellY--;\n        }\n      }\n    }\n    // magnet to the half cell\n    pos[0] = (cellX / 2) * gridWidth + gridOffsetX;\n    pos[1] = (cellY / 2) * gridHeight + gridOffsetY;\n  } else {\n    if (gridWidth <= 0) {\n      pos[0] = Math.round(pos[0]);\n    } else {\n      pos[0] =\n        Math.round((pos[0] - gridOffsetX) / gridWidth) * gridWidth +\n        gridOffsetX;\n    }\n\n    if (gridHeight <= 0) {\n      pos[1] = Math.round(pos[1]);\n    } else {\n      pos[1] =\n        Math.round((pos[1] - gridOffsetY) / gridHeight) * gridHeight +\n        gridOffsetY;\n    }\n  }\n};\n\nexport const roundPositionForResizing = (\n  pos: [number, number],\n  gridWidth: number,\n  gridHeight: number,\n  gridOffsetX: number,\n  gridOffsetY: number,\n  gridType: string\n) => {\n  if (gridType === 'isometric') {\n    // There is no point to align on the isometric grid when resizing.\n    // Use half cells to give a bit more of freedom than for positioning.\n    return roundPosition(\n      pos,\n      gridWidth / 2,\n      gridHeight / 2,\n      gridOffsetX,\n      gridOffsetY,\n      'rectangular'\n    );\n  }\n  return roundPosition(\n    pos,\n    gridWidth,\n    gridHeight,\n    gridOffsetX,\n    gridOffsetY,\n    gridType\n  );\n};\n","// @flow\nimport { rgbToHexNumber } from '../Utils/ColorTransformer';\n\nexport type InstancesEditorSettings = {|\n  /** Is grid shown? */\n  grid: boolean,\n  gridType: 'isometric' | 'rectangular',\n  gridWidth: number,\n  gridHeight: number,\n  gridOffsetX: number,\n  gridOffsetY: number,\n  gridColor: number,\n  gridAlpha: number,\n\n  /** Is snap to grid activated? */\n  snap: boolean,\n\n  /** The zoom of the editor, 1 by default. */\n  zoomFactor: number,\n\n  /** Is the window mask shown? */\n  windowMask: boolean,\n|};\n\nexport const prepareInstancesEditorSettings = (\n  object: any\n): InstancesEditorSettings => {\n  return {\n    grid: object.grid || false,\n    gridType: object.gridType || 'rectangular',\n    gridWidth: object.gridWidth || 32,\n    gridHeight: object.gridHeight || 32,\n    gridOffsetX: object.gridOffsetX || 0,\n    gridOffsetY: object.gridOffsetY || 0,\n    gridColor:\n      object.gridColor !== undefined\n        ? object.gridColor\n        : rgbToHexNumber(158, 180, 255),\n    gridAlpha: object.gridAlpha !== undefined ? object.gridAlpha : 0.8,\n    snap: object.snap || false,\n    zoomFactor: Math.max(object.zoomFactor || 1, 0.0001),\n    windowMask: object.windowMask || false,\n  };\n};\n\nexport const cloneInstancesEditorSettings = (\n  instancesEditorSettings: InstancesEditorSettings\n) => {\n  return { ...instancesEditorSettings };\n};\n","// @flow\nimport * as React from 'react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport { t } from '@lingui/macro';\n\nconst gd: libGDevelop = global.gd;\n\n// These are all the kind of resources that can be found in\n// Core/GDCore/Project/ResourcesManager.h\nexport type ResourceKind =\n  | 'image'\n  | 'audio'\n  | 'font'\n  | 'video'\n  | 'json'\n  | 'bitmapFont';\n\nexport const allResourceKindsAndMetadata = [\n  {\n    kind: 'audio',\n    displayName: t`Audio`,\n    fileExtensions: ['aac', 'wav', 'mp3', 'ogg'],\n    createNewResource: () => new gd.AudioResource(),\n  },\n  {\n    kind: 'image',\n    displayName: t`Image`,\n    fileExtensions: ['png', 'jpg'],\n    createNewResource: () => new gd.ImageResource(),\n  },\n  {\n    kind: 'font',\n    displayName: t`Font`,\n    fileExtensions: ['ttf', 'otf'],\n    createNewResource: () => new gd.FontResource(),\n  },\n  {\n    kind: 'video',\n    displayName: t`Video`,\n    fileExtensions: ['mp4'],\n    createNewResource: () => new gd.VideoResource(),\n  },\n  {\n    kind: 'json',\n    displayName: t`Json`,\n    fileExtensions: ['json'],\n    createNewResource: () => new gd.JsonResource(),\n  },\n  {\n    kind: 'bitmapFont',\n    displayName: t`Bitmap Font`,\n    fileExtensions: ['fnt', 'xml'],\n    createNewResource: () => new gd.BitmapFontResource(),\n  },\n];\n\nexport type ChooseResourceOptions = {|\n  initialSourceName: string,\n  multiSelection: boolean,\n  resourceKind: ResourceKind,\n|};\n\nexport type ChooseResourceProps = {|\n  i18n: I18nType,\n  project: gdProject,\n  getLastUsedPath: (project: gdProject, kind: ResourceKind) => string,\n  setLastUsedPath: (\n    project: gdProject,\n    kind: ResourceKind,\n    path: string\n  ) => void,\n  options: ChooseResourceOptions,\n|};\n\nexport type ResourceSourceComponentProps = {|\n  ...ChooseResourceProps,\n  onChooseResources: (Array<gdResource>) => void,\n|};\n\nexport type ResourceSource = {\n  name: string,\n  displayName: MessageDescriptor,\n  displayTab: 'standalone' | 'import',\n  kind: ResourceKind,\n  selectResourcesHeadless?: ?(\n    ChooseResourceProps\n  ) => Promise<Array<gdResource>>,\n  renderComponent: ResourceSourceComponentProps => React.Node,\n};\n\nexport type ChooseResourceFunction = (\n  options: ChooseResourceOptions\n) => Promise<Array<gdResource>>;\n","// @flow\n\nexport const makeTimestampedId = () =>\n  '' + Date.now() + '-' + Math.floor(Math.random() * 1000000);\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport './MainFrame.css';\nimport Drawer from '@material-ui/core/Drawer';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Toolbar from './Toolbar';\nimport ProjectTitlebar from './ProjectTitlebar';\nimport PreferencesDialog from './Preferences/PreferencesDialog';\nimport AboutDialog from './AboutDialog';\nimport ProjectManager from '../ProjectManager';\nimport PlatformSpecificAssetsDialog from '../PlatformSpecificAssetsEditor/PlatformSpecificAssetsDialog';\nimport LoaderModal from '../UI/LoaderModal';\nimport DrawerTopBar from '../UI/DrawerTopBar';\nimport CloseConfirmDialog from '../UI/CloseConfirmDialog';\nimport ProfileDialog from '../Profile/ProfileDialog';\nimport Window from '../Utils/Window';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport {\n  ClosableTabs,\n  ClosableTab,\n  TabContentContainer,\n} from '../UI/ClosableTabs';\nimport {\n  getEditorTabsInitialState,\n  openEditorTab,\n  closeEditorTab,\n  closeOtherEditorTabs,\n  closeAllEditorTabs,\n  changeCurrentTab,\n  getEditors,\n  getCurrentTabIndex,\n  getCurrentTab,\n  closeProjectTabs,\n  closeLayoutTabs,\n  closeExternalLayoutTabs,\n  closeExternalEventsTabs,\n  closeEventsFunctionsExtensionTabs,\n  saveUiSettings,\n  type EditorTabsState,\n  type EditorTab,\n  getEventsFunctionsExtensionEditor,\n  notifyPreviewWillStart,\n} from './EditorTabsHandler';\nimport { timePromise } from '../Utils/TimeFunction';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport HelpFinder from '../HelpFinder';\nimport { renderDebuggerEditorContainer } from './EditorContainers/DebuggerEditorContainer';\nimport { renderEventsEditorContainer } from './EditorContainers/EventsEditorContainer';\nimport { renderExternalEventsEditorContainer } from './EditorContainers/ExternalEventsEditorContainer';\nimport { renderSceneEditorContainer } from './EditorContainers/SceneEditorContainer';\nimport { renderExternalLayoutEditorContainer } from './EditorContainers/ExternalLayoutEditorContainer';\nimport { renderEventsFunctionsExtensionEditorContainer } from './EditorContainers/EventsFunctionsExtensionEditorContainer';\nimport { renderStartPageContainer } from './EditorContainers/StartPage';\nimport { renderResourcesEditorContainer } from './EditorContainers/ResourcesEditorContainer';\nimport ErrorBoundary from '../UI/ErrorBoundary';\nimport SubscriptionDialog from '../Profile/SubscriptionDialog';\nimport ResourcesLoader from '../ResourcesLoader/index';\nimport {\n  type PreviewLauncherInterface,\n  type PreviewLauncherProps,\n  type PreviewLauncherComponent,\n} from '../Export/PreviewLauncher.flow';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n  type ChooseResourceOptions,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type JsExtensionsLoader } from '../JsExtensionsLoader';\nimport EventsFunctionsExtensionsContext from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport {\n  getUpdateNotificationTitle,\n  getUpdateNotificationBody,\n  type UpdateStatus,\n} from './UpdaterTools';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport ChangelogDialogContainer from './Changelog/ChangelogDialogContainer';\nimport { getNotNullTranslationFunction } from '../Utils/i18n/getTranslationFunction';\nimport { type I18n } from '@lingui/core';\nimport { t } from '@lingui/macro';\nimport LanguageDialog from './Preferences/LanguageDialog';\nimport PreferencesContext from './Preferences/PreferencesContext';\nimport { getFunctionNameFromType } from '../EventsFunctionsExtensionsLoader';\nimport { type ExportDialogWithoutExportsProps } from '../Export/ExportDialog';\nimport { type CreateProjectDialogWithComponentsProps } from '../ProjectCreation/CreateProjectDialog';\nimport { getStartupTimesSummary } from '../Utils/StartupTimes';\nimport {\n  type StorageProvider,\n  type StorageProviderOperations,\n  type FileMetadata,\n  type FileMetadataAndStorageProviderName,\n} from '../ProjectsStorage';\nimport OpenFromStorageProviderDialog from '../ProjectsStorage/OpenFromStorageProviderDialog';\nimport SaveToStorageProviderDialog from '../ProjectsStorage/SaveToStorageProviderDialog';\nimport { useOpenConfirmDialog } from '../ProjectsStorage/OpenConfirmDialog';\nimport verifyProjectContent from '../ProjectsStorage/ProjectContentChecker';\nimport UnsavedChangesContext from './UnsavedChangesContext';\nimport { type MainMenuProps } from './MainMenu.flow';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport useStateWithCallback from '../Utils/UseSetStateWithCallback';\nimport { useKeyboardShortcuts } from '../KeyboardShortcuts';\nimport useMainFrameCommands from './MainFrameCommands';\nimport CommandPalette, {\n  type CommandPaletteInterface,\n} from '../CommandPalette/CommandPalette';\nimport CommandsContextScopedProvider from '../CommandPalette/CommandsScopedContext';\nimport { isExtensionNameTaken } from '../ProjectManager/EventFunctionExtensionNameVerifier';\nimport {\n  type PreviewState,\n  usePreviewDebuggerServerWatcher,\n} from './PreviewState';\nimport { type HotReloadPreviewButtonProps } from '../HotReload/HotReloadPreviewButton';\nimport HotReloadLogsDialog from '../HotReload/HotReloadLogsDialog';\nimport { useDiscordRichPresence } from '../Utils/UpdateDiscordRichPresence';\nimport { useResourceFetcher } from '../ProjectsStorage/ResourceFetcher';\nimport { delay } from '../Utils/Delay';\nimport { type ExtensionShortHeader } from '../Utils/GDevelopServices/Extension';\nimport { findAndLogProjectPreviewErrors } from '../Utils/ProjectErrorsChecker';\nimport { renameResourcesInProject } from '../ResourcesList/ResourceUtils';\nimport { NewResourceDialog } from '../ResourcesList/NewResourceDialog';\nimport {\n  ACHIEVEMENT_FEATURE_FLAG,\n  addCreateBadgePreHookIfNotClaimed,\n  TRIVIAL_FIRST_DEBUG,\n  TRIVIAL_FIRST_PREVIEW,\n} from '../Utils/GDevelopServices/Badge';\nimport AuthenticatedUserContext from '../Profile/AuthenticatedUserContext';\n\nconst GD_STARTUP_TIMES = global.GD_STARTUP_TIMES || [];\n\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  drawerContent: {\n    width: 320,\n    overflowX: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n};\n\nconst findStorageProviderFor = (\n  i18n: I18n,\n  storageProviders: Array<StorageProvider>,\n  fileMetadataAndStorageProviderName: FileMetadataAndStorageProviderName\n): ?StorageProvider => {\n  const { storageProviderName } = fileMetadataAndStorageProviderName;\n  const storageProvider = storageProviders.filter(\n    storageProvider => storageProvider.internalName === storageProviderName\n  )[0];\n\n  if (!storageProvider) {\n    const { storageProviderName } = fileMetadataAndStorageProviderName;\n    showErrorBox({\n      message: i18n._(\n        t`Unable to open the project because this provider is unknown: ${storageProviderName}. Try to open the project again from another location.`\n      ),\n      rawError: new Error(\n        `Can't find storage provider called \"${storageProviderName}\"`\n      ),\n      errorId: 'unknown-storage-provider',\n    });\n    return;\n  }\n\n  return storageProvider;\n};\n\nexport type State = {|\n  createDialogOpen: boolean,\n  currentProject: ?gdProject,\n  currentFileMetadata: ?FileMetadata,\n  editorTabs: EditorTabsState,\n  snackMessage: string,\n  snackMessageOpen: boolean,\n  updateStatus: UpdateStatus,\n  openFromStorageProviderDialogOpen: boolean,\n  saveToStorageProviderDialogOpen: boolean,\n  eventsFunctionsExtensionsError: ?Error,\n  gdjsDevelopmentWatcherEnabled: boolean,\n|};\n\nconst initialPreviewState: PreviewState = {\n  previewLayoutName: null,\n  previewExternalLayoutName: null,\n  isPreviewOverriden: false,\n  overridenPreviewLayoutName: null,\n  overridenPreviewExternalLayoutName: null,\n};\n\ntype LaunchPreviewOptions = {\n  networkPreview?: boolean,\n  hotReload?: boolean,\n  projectDataOnlyExport?: boolean,\n  fullLoadingScreen?: boolean,\n};\n\nexport type Props = {\n  integratedEditor?: boolean,\n  introDialog?: React.Element<*>,\n  renderMainMenu?: MainMenuProps => React.Node,\n  renderPreviewLauncher?: (\n    props: PreviewLauncherProps,\n    ref: (previewLauncher: ?PreviewLauncherInterface) => void\n  ) => React.Element<PreviewLauncherComponent>,\n  onEditObject?: gdObject => void,\n  storageProviders: Array<StorageProvider>,\n  getStorageProviderOperations: (\n    ?StorageProvider\n  ) => Promise<StorageProviderOperations>,\n  getStorageProvider: () => StorageProvider,\n  resourceSources: Array<ResourceSource>,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  requestUpdate?: () => void,\n  renderExportDialog?: ExportDialogWithoutExportsProps => React.Node,\n  renderCreateDialog?: CreateProjectDialogWithComponentsProps => React.Node,\n  renderGDJSDevelopmentWatcher?: ?() => React.Node,\n  extensionsLoader?: JsExtensionsLoader,\n  initialFileMetadataToOpen: ?FileMetadata,\n  i18n: I18n,\n};\n\nconst MainFrame = (props: Props) => {\n  const [state, setState]: [\n    State,\n    ((State => State) | State) => Promise<State>,\n  ] = useStateWithCallback(\n    ({\n      createDialogOpen: false,\n      currentProject: null,\n      currentFileMetadata: null,\n      editorTabs: getEditorTabsInitialState(),\n      snackMessage: '',\n      snackMessageOpen: false,\n      updateStatus: { message: '', status: 'unknown' },\n      openFromStorageProviderDialogOpen: false,\n      saveToStorageProviderDialogOpen: false,\n      eventsFunctionsExtensionsError: null,\n      gdjsDevelopmentWatcherEnabled: false,\n    }: State)\n  );\n  const toolbar = React.useRef<?Toolbar>(null);\n  const authenticatedUser = React.useContext(AuthenticatedUserContext);\n\n  const [\n    chooseResourceOptions,\n    setChooseResourceOptions,\n  ] = React.useState<?ChooseResourceOptions>(null);\n  const [onResourceChosen, setOnResourceChosen] = React.useState<?(\n    Array<gdResource>\n  ) => void>(null);\n  const _previewLauncher = React.useRef((null: ?PreviewLauncherInterface));\n  const forceUpdate = useForceUpdate();\n  const [isLoadingProject, setIsLoadingProject] = React.useState<boolean>(\n    false\n  );\n  const [isSavingProject, setIsSavingProject] = React.useState<boolean>(false);\n  const [projectManagerOpen, openProjectManager] = React.useState<boolean>(\n    false\n  );\n  const [introDialogOpen, openIntroDialog] = React.useState<boolean>(false);\n  const [languageDialogOpen, openLanguageDialog] = React.useState<boolean>(\n    false\n  );\n  const [helpFinderDialogOpen, openHelpFinderDialog] = React.useState<boolean>(\n    false\n  );\n  const [\n    platformSpecificAssetsDialogOpen,\n    openPlatformSpecificAssetsDialog,\n  ] = React.useState<boolean>(false);\n  const [aboutDialogOpen, openAboutDialog] = React.useState<boolean>(false);\n  const [profileDialogInitialTab, setProfileDialogInitialTab] = React.useState<\n    'profile' | 'games-dashboard'\n  >('profile');\n  const [profileDialogOpen, openProfileDialog] = React.useState<boolean>(false);\n  const [\n    preferencesDialogOpen,\n    openPreferencesDialog,\n  ] = React.useState<boolean>(false);\n  const [\n    subscriptionDialogOpen,\n    openSubscriptionDialog,\n  ] = React.useState<boolean>(false);\n  const [exportDialogOpen, openExportDialog] = React.useState<boolean>(false);\n  const preferences = React.useContext(PreferencesContext);\n  const [previewLoading, setPreviewLoading] = React.useState<boolean>(false);\n  const [previewState, setPreviewState] = React.useState(initialPreviewState);\n  const commandPaletteRef = React.useRef((null: ?CommandPaletteInterface));\n  const eventsFunctionsExtensionsContext = React.useContext(\n    EventsFunctionsExtensionsContext\n  );\n  const previewDebuggerServer =\n    _previewLauncher.current &&\n    _previewLauncher.current.getPreviewDebuggerServer();\n  const {\n    previewDebuggerIds,\n    hotReloadLogs,\n    clearHotReloadLogs,\n  } = usePreviewDebuggerServerWatcher(previewDebuggerServer);\n  const hasPreviewsRunning = !!previewDebuggerIds.length;\n  const {\n    ensureInteractionHappened,\n    renderOpenConfirmDialog,\n  } = useOpenConfirmDialog();\n  const {\n    ensureResourcesAreFetched,\n    renderResourceFetcherDialog,\n  } = useResourceFetcher();\n  const eventsFunctionsExtensionsState = React.useContext(\n    EventsFunctionsExtensionsContext\n  );\n  const unsavedChanges = React.useContext(UnsavedChangesContext);\n  const [createDialogInitialTab, setCreateDialogInitialTab] = React.useState<\n    'starters' | 'tutorials' | 'games-showcase'\n  >('starters');\n\n  // This is just for testing, to check if we're getting the right state\n  // and gives us an idea about the number of re-renders.\n  // React.useEffect(() => {\n  //   console.log(state);\n  // });\n\n  const {\n    currentProject,\n    currentFileMetadata,\n    updateStatus,\n    eventsFunctionsExtensionsError,\n  } = state;\n  const {\n    renderExportDialog,\n    renderCreateDialog,\n    resourceSources,\n    renderPreviewLauncher,\n    resourceExternalEditors,\n    getStorageProviderOperations,\n    getStorageProvider,\n    integratedEditor,\n    initialFileMetadataToOpen,\n    introDialog,\n    i18n,\n    renderGDJSDevelopmentWatcher,\n    renderMainMenu,\n  } = props;\n\n  React.useEffect(\n    () => {\n      if (!integratedEditor) openStartPage();\n      GD_STARTUP_TIMES.push(['MainFrameComponentDidMount', performance.now()]);\n      _loadExtensions()\n        .then(() =>\n          // Enable the GDJS development watcher *after* the extensions are loaded,\n          // to avoid the watcher interfering with the extension loading (by updating GDJS,\n          // which could lead in the extension loading failing for some extensions as file\n          // are removed/copied).\n          setState(state => ({\n            ...state,\n            gdjsDevelopmentWatcherEnabled: true,\n          }))\n        )\n        .then(async state => {\n          GD_STARTUP_TIMES.push([\n            'MainFrameComponentDidMountFinished',\n            performance.now(),\n          ]);\n\n          console.info('Startup times:', getStartupTimesSummary());\n\n          const {\n            getAutoOpenMostRecentProject,\n            getRecentProjectFiles,\n            hadProjectOpenedDuringLastSession,\n          } = preferences;\n\n          if (initialFileMetadataToOpen) {\n            // Open the initial file metadata (i.e: the file that was passed\n            // as argument and recognized by a storage provider). Note that the storage\n            // provider is assumed to be already set to the proper one.\n            const storageProviderOperations = await getStorageProviderOperations();\n            const proceed = await ensureInteractionHappened(\n              storageProviderOperations\n            );\n            if (proceed) openInitialFileMetadata();\n          } else if (\n            getAutoOpenMostRecentProject() &&\n            hadProjectOpenedDuringLastSession() &&\n            getRecentProjectFiles()[0]\n          ) {\n            // Re-open the last opened project, if any and if asked to.\n            const fileMetadataAndStorageProviderName = getRecentProjectFiles()[0];\n            const storageProvider = findStorageProviderFor(\n              i18n,\n              props.storageProviders,\n              fileMetadataAndStorageProviderName\n            );\n            if (!storageProvider) return;\n\n            const storageProviderOperations = await getStorageProviderOperations(\n              storageProvider\n            );\n            const proceed = await ensureInteractionHappened(\n              storageProviderOperations\n            );\n            if (proceed)\n              openFromFileMetadataWithStorageProvider(\n                fileMetadataAndStorageProviderName\n              );\n          } else {\n            // Open the intro dialog if not opening any project.\n            if (introDialog && !Window.isDev()) openIntroDialog(true);\n          }\n        })\n        .catch(() => {\n          /* Ignore errors */\n        });\n    },\n    // eslint-disable-next-line\n    []\n  );\n\n  const openProfileDialogWithTab = (\n    profileDialogInitialTab: 'profile' | 'games-dashboard'\n  ) => {\n    setProfileDialogInitialTab(profileDialogInitialTab);\n    openProfileDialog(true);\n  };\n\n  const _showSnackMessage = React.useCallback(\n    (snackMessage: string) => {\n      setState(state => ({\n        ...state,\n        snackMessage,\n        snackMessageOpen: true,\n      }));\n    },\n    [setState]\n  );\n  const _closeSnackMessage = React.useCallback(\n    () => {\n      setState(state => ({\n        ...state,\n        snackMessageOpen: false,\n      }));\n    },\n    [setState]\n  );\n\n  const openInitialFileMetadata = async () => {\n    if (!initialFileMetadataToOpen) return;\n\n    // We use the current storage provider, as it's supposed to be able to open\n    // the initial file metadata. Indeed, it's the responsibility of the `ProjectStorageProviders`\n    // to set the initial storage provider if an initial file metadata is set.\n    const state = await openFromFileMetadata(initialFileMetadataToOpen);\n    if (state)\n      openSceneOrProjectManager({\n        currentProject: state.currentProject,\n        editorTabs: state.editorTabs,\n      });\n  };\n\n  const updateToolbar = React.useCallback(\n    (newEditorTabs = state.editorTabs) => {\n      const editorTab = getCurrentTab(newEditorTabs);\n      if (!editorTab || !editorTab.editorRef) {\n        setEditorToolbar(null);\n        return;\n      }\n\n      editorTab.editorRef.updateToolbar();\n    },\n    [state.editorTabs]\n  );\n\n  React.useEffect(\n    () => {\n      updateToolbar();\n    },\n    [updateToolbar]\n  );\n\n  const _languageDidChange = () => {\n    // A change in the language will automatically be applied\n    // on all React components, as it's handled by GDI18nProvider.\n    // We still have this method that will be called when the language\n    // dialog is closed after a language change. We then reload GDevelop\n    // extensions so that they declare all objects/actions/condition/etc...\n    // using the new language.\n    gd.JsPlatform.get().reloadBuiltinExtensions();\n    _loadExtensions().catch(() => {});\n  };\n\n  const _loadExtensions = (): Promise<void> => {\n    const { extensionsLoader, i18n } = props;\n    if (!extensionsLoader) {\n      console.info(\n        'No extensions loader specified, skipping extensions loading.'\n      );\n      return Promise.reject(new Error('No extension loader specified.'));\n    }\n\n    return extensionsLoader\n      .loadAllExtensions(getNotNullTranslationFunction(i18n))\n      .then(loadingResults => {\n        const successLoadingResults = loadingResults.filter(\n          loadingResult => !loadingResult.result.error\n        );\n        const failLoadingResults = loadingResults.filter(\n          loadingResult =>\n            loadingResult.result.error && !loadingResult.result.dangerous\n        );\n        const dangerousLoadingResults = loadingResults.filter(\n          loadingResult =>\n            loadingResult.result.error && loadingResult.result.dangerous\n        );\n        console.info(`Loaded ${successLoadingResults.length} JS extensions.`);\n        if (failLoadingResults.length) {\n          console.error(\n            `⚠️ Unable to load ${\n              failLoadingResults.length\n            } JS extensions. Please check these errors:`,\n            failLoadingResults\n          );\n        }\n        if (dangerousLoadingResults.length) {\n          console.error(\n            `💣 Dangerous exceptions while loading ${\n              dangerousLoadingResults.length\n            } JS extensions. 🔥 Please check these errors as they will CRASH GDevelop:`,\n            dangerousLoadingResults\n          );\n        }\n      });\n  };\n\n  useDiscordRichPresence(currentProject);\n\n  const closeProject = React.useCallback(\n    (): Promise<void> => {\n      preferences.setHasProjectOpened(false);\n      setPreviewState(initialPreviewState);\n      return setState(state => {\n        if (!currentProject) {\n          // It's important to return a new object to ensure that the promise\n          // will be fired.\n          return { ...state };\n        }\n\n        if (currentProject) {\n          eventsFunctionsExtensionsState.unloadProjectEventsFunctionsExtensions(\n            currentProject\n          );\n          currentProject.delete();\n        }\n\n        return {\n          ...state,\n          currentProject: null,\n          currentFileMetadata: null,\n          editorTabs: closeProjectTabs(state.editorTabs, currentProject),\n        };\n      }).then(() => {});\n    },\n    [currentProject, eventsFunctionsExtensionsState, preferences, setState]\n  );\n\n  const loadFromProject = React.useCallback(\n    async (project: gdProject, fileMetadata: ?FileMetadata): Promise<State> => {\n      if (fileMetadata)\n        preferences.insertRecentProjectFile({\n          fileMetadata,\n          storageProviderName: getStorageProvider().internalName,\n        });\n\n      await closeProject();\n\n      // Make sure that the ResourcesLoader cache is emptied, so that\n      // the URL to a resource with a name in the old project is not re-used\n      // for another resource with the same name in the new project.\n      ResourcesLoader.burstAllUrlsCache();\n      // TODO: Pixi cache should also be burst\n\n      preferences.setHasProjectOpened(true);\n\n      const state = await setState(state => ({\n        ...state,\n        currentProject: project,\n        currentFileMetadata: fileMetadata,\n        createDialogOpen: false,\n      }));\n\n      // Load all the EventsFunctionsExtension when the game is loaded. If they are modified,\n      // their editor will take care of reloading them.\n      eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n        project\n      );\n\n      if (fileMetadata) {\n        project.setProjectFile(fileMetadata.fileIdentifier);\n      }\n\n      // Fetch the resources if needed, for example if opening on the desktop app\n      // a project made on the web-app.\n      const { someResourcesWereFetched } = await ensureResourcesAreFetched(\n        project\n      );\n      if (someResourcesWereFetched) {\n        if (unsavedChanges) unsavedChanges.triggerUnsavedChanges();\n      }\n\n      return state;\n    },\n    [\n      unsavedChanges,\n      setState,\n      closeProject,\n      preferences,\n      eventsFunctionsExtensionsState,\n      getStorageProvider,\n      ensureResourcesAreFetched,\n    ]\n  );\n\n  const loadFromSerializedProject = React.useCallback(\n    (\n      serializedProject: gdSerializerElement,\n      fileMetadata: ?FileMetadata\n    ): Promise<State> => {\n      return timePromise(\n        () => {\n          const newProject = gd.ProjectHelper.createNewGDJSProject();\n          newProject.unserializeFrom(serializedProject);\n\n          return loadFromProject(newProject, fileMetadata);\n        },\n        time => console.info(`Unserialization took ${time} ms`)\n      );\n    },\n    [loadFromProject]\n  );\n\n  const openFromFileMetadata = React.useCallback(\n    (fileMetadata: FileMetadata): Promise<?State> => {\n      return getStorageProviderOperations().then(storageProviderOperations => {\n        const {\n          hasAutoSave,\n          onGetAutoSave,\n          onOpen,\n          getOpenErrorMessage,\n        } = storageProviderOperations;\n\n        if (!onOpen) {\n          console.error(\n            'Tried to open a file for a storage without onOpen support:',\n            fileMetadata,\n            storageProviderOperations\n          );\n          return Promise.resolve();\n        }\n\n        const checkForAutosave = (): Promise<FileMetadata> => {\n          if (!hasAutoSave || !onGetAutoSave) {\n            return Promise.resolve(fileMetadata);\n          }\n\n          return hasAutoSave(fileMetadata, true).then(canOpenAutosave => {\n            if (!canOpenAutosave) return fileMetadata;\n\n            const answer = Window.showConfirmDialog(\n              i18n._(\n                t`An autosave file (backup made automatically by GDevelop) that is newer than the project file exists. Would you like to load it instead?`\n              )\n            );\n            if (!answer) return fileMetadata;\n\n            return onGetAutoSave(fileMetadata);\n          });\n        };\n\n        const checkForAutosaveAfterFailure = (): Promise<?FileMetadata> => {\n          if (!hasAutoSave || !onGetAutoSave) {\n            return Promise.resolve(null);\n          }\n\n          return hasAutoSave(fileMetadata, false).then(canOpenAutosave => {\n            if (!canOpenAutosave) return null;\n\n            const answer = Window.showConfirmDialog(\n              i18n._(\n                t`The project file appears to be malformed, but an autosave file exists (backup made automatically by GDevelop). Would you like to try to load it instead?`\n              )\n            );\n            if (!answer) return null;\n\n            return onGetAutoSave(fileMetadata);\n          });\n        };\n\n        setIsLoadingProject(true);\n\n        // Try to find an autosave (and ask user if found)\n        return delay(150)\n          .then(() => checkForAutosave())\n          .then(fileMetadata => onOpen(fileMetadata))\n          .catch(err => {\n            // onOpen failed, tried to find again an autosave\n            return checkForAutosaveAfterFailure().then(fileMetadata => {\n              if (fileMetadata) {\n                return onOpen(fileMetadata);\n              }\n\n              throw err;\n            });\n          })\n          .then(({ content }) => {\n            if (!verifyProjectContent(i18n, content)) {\n              // The content is not recognized and the user was warned. Abort the opening.\n              setIsLoadingProject(false);\n              return;\n            }\n\n            const serializedProject = gd.Serializer.fromJSObject(content);\n            return loadFromSerializedProject(\n              serializedProject,\n              // Note that fileMetadata is the original, unchanged one, even if we're loading\n              // an autosave. If we're for some reason loading an autosave, we still consider\n              // that we're opening the file that was originally requested by the user.\n              fileMetadata\n            ).then(\n              state => {\n                serializedProject.delete();\n                return Promise.resolve(state);\n              },\n              err => {\n                serializedProject.delete();\n                throw err;\n              }\n            );\n          })\n          .catch(error => {\n            const errorMessage = getOpenErrorMessage\n              ? getOpenErrorMessage(error)\n              : t`Check that the path/URL is correct, that you selected a file that is a game file created with GDevelop and that is was not removed.`;\n            showErrorBox({\n              message: [\n                i18n._(t`Unable to open the project.`),\n                i18n._(errorMessage),\n              ].join('\\n'),\n              errorId: 'project-open-error',\n              rawError: error,\n            });\n            setIsLoadingProject(false);\n            return Promise.reject(error);\n          });\n      });\n    },\n    [i18n, getStorageProviderOperations, loadFromSerializedProject]\n  );\n\n  const closeApp = React.useCallback((): void => {\n    return Window.quit();\n  }, []);\n\n  const toggleProjectManager = React.useCallback(\n    () => {\n      if (toolbar.current)\n        openProjectManager(projectManagerOpen => !projectManagerOpen);\n    },\n    [openProjectManager]\n  );\n\n  const setEditorToolbar = (editorToolbar: any, isCurrentTab = true) => {\n    if (!toolbar.current || !isCurrentTab) return;\n\n    toolbar.current.setEditorToolbar(editorToolbar);\n  };\n\n  const addLayout = () => {\n    const { currentProject } = state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('New scene', name =>\n      currentProject.hasLayoutNamed(name)\n    );\n    const newLayout = currentProject.insertNewLayout(\n      name,\n      currentProject.getLayoutsCount()\n    );\n    newLayout.updateBehaviorsSharedData(currentProject);\n    _onProjectItemModified();\n  };\n\n  const addExternalLayout = () => {\n    const { currentProject } = state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('NewExternalLayout', name =>\n      currentProject.hasExternalLayoutNamed(name)\n    );\n    currentProject.insertNewExternalLayout(\n      name,\n      currentProject.getExternalLayoutsCount()\n    );\n    _onProjectItemModified();\n  };\n\n  const addExternalEvents = () => {\n    const { currentProject } = state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('NewExternalEvents', name =>\n      currentProject.hasExternalEventsNamed(name)\n    );\n    currentProject.insertNewExternalEvents(\n      name,\n      currentProject.getExternalEventsCount()\n    );\n    _onProjectItemModified();\n  };\n\n  const addEventsFunctionsExtension = () => {\n    const { currentProject } = state;\n    if (!currentProject) return;\n\n    const name = newNameGenerator('NewExtension', name =>\n      currentProject.hasEventsFunctionsExtensionNamed(name)\n    );\n    currentProject.insertNewEventsFunctionsExtension(\n      name,\n      currentProject.getEventsFunctionsExtensionsCount()\n    );\n    _onProjectItemModified();\n  };\n\n  const onInstallExtension = (extensionShortHeader: ExtensionShortHeader) => {\n    const { currentProject } = state;\n    if (!currentProject) return;\n\n    // Close the extension tab before updating/reinstalling the extension.\n    const eventsFunctionsExtensionName = extensionShortHeader.name;\n\n    if (\n      currentProject.hasEventsFunctionsExtensionNamed(\n        eventsFunctionsExtensionName\n      )\n    ) {\n      const eventsFunctionsExtension = currentProject.getEventsFunctionsExtension(\n        eventsFunctionsExtensionName\n      );\n\n      setState(state => ({\n        ...state,\n        editorTabs: closeEventsFunctionsExtensionTabs(\n          state.editorTabs,\n          eventsFunctionsExtension\n        ),\n      }));\n    }\n  };\n\n  const deleteLayout = (layout: gdLayout) => {\n    const { i18n } = props;\n    if (!state.currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove this scene? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    setState(state => ({\n      ...state,\n      editorTabs: closeLayoutTabs(state.editorTabs, layout),\n    })).then(state => {\n      if (state.currentProject)\n        state.currentProject.removeLayout(layout.getName());\n      _onProjectItemModified();\n    });\n  };\n\n  const deleteExternalLayout = (externalLayout: gdExternalLayout) => {\n    const { currentProject } = state;\n    const { i18n } = props;\n    if (!currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove this external layout? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    setState(state => ({\n      ...state,\n      editorTabs: closeExternalLayoutTabs(state.editorTabs, externalLayout),\n    })).then(state => {\n      if (state.currentProject)\n        state.currentProject.removeExternalLayout(externalLayout.getName());\n      _onProjectItemModified();\n    });\n  };\n\n  const deleteExternalEvents = (externalEvents: gdExternalEvents) => {\n    const { i18n } = props;\n    if (!state.currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove these external events? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    setState(state => ({\n      ...state,\n      editorTabs: closeExternalEventsTabs(state.editorTabs, externalEvents),\n    })).then(state => {\n      if (state.currentProject)\n        state.currentProject.removeExternalEvents(externalEvents.getName());\n      _onProjectItemModified();\n    });\n  };\n\n  const deleteEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension\n  ) => {\n    const { currentProject } = state;\n    const { i18n } = props;\n    if (!currentProject) return;\n\n    const answer = Window.showConfirmDialog(\n      i18n._(\n        t`Are you sure you want to remove this extension? This can't be undone.`\n      )\n    );\n    if (!answer) return;\n\n    setState(state => ({\n      ...state,\n      editorTabs: closeEventsFunctionsExtensionTabs(\n        state.editorTabs,\n        eventsFunctionsExtension\n      ),\n    })).then(state => {\n      // Unload the Platform extension that was generated from the events\n      // functions extension.\n      const extensionName = eventsFunctionsExtension.getName();\n      eventsFunctionsExtensionsState.unloadProjectEventsFunctionsExtension(\n        currentProject,\n        extensionName\n      );\n\n      currentProject.removeEventsFunctionsExtension(extensionName);\n      _onProjectItemModified();\n\n      // Reload extensions to make sure any extension that would have been relying\n      // on the unloaded extension is updated.\n      eventsFunctionsExtensionsState.reloadProjectEventsFunctionsExtensions(\n        currentProject\n      );\n    });\n  };\n\n  const renameLayout = (oldName: string, newName: string) => {\n    const { currentProject } = state;\n    const { i18n } = props;\n    if (!currentProject) return;\n\n    if (!currentProject.hasLayoutNamed(oldName) || newName === oldName) return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    if (currentProject.hasLayoutNamed(newName)) {\n      showWarningBox(i18n._(t`Another scene with this name already exists.`), {\n        delayToNextTick: true,\n      });\n      return;\n    }\n\n    const layout = currentProject.getLayout(oldName);\n    setState(state => ({\n      ...state,\n      editorTabs: closeLayoutTabs(state.editorTabs, layout),\n    })).then(state => {\n      layout.setName(newName);\n      _onProjectItemModified();\n    });\n  };\n\n  const renameExternalLayout = (oldName: string, newName: string) => {\n    const { currentProject } = state;\n    const { i18n } = props;\n    if (!currentProject) return;\n\n    if (!currentProject.hasExternalLayoutNamed(oldName) || newName === oldName)\n      return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    if (currentProject.hasExternalLayoutNamed(newName)) {\n      showWarningBox(\n        i18n._(t`Another external layout with this name already exists.`),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    const externalLayout = currentProject.getExternalLayout(oldName);\n    setState(state => ({\n      ...state,\n      editorTabs: closeExternalLayoutTabs(state.editorTabs, externalLayout),\n    })).then(state => {\n      externalLayout.setName(newName);\n      _onProjectItemModified();\n    });\n  };\n\n  const renameExternalEvents = (oldName: string, newName: string) => {\n    const { currentProject } = state;\n    const { i18n } = props;\n    if (!currentProject) return;\n\n    if (!currentProject.hasExternalEventsNamed(oldName) || newName === oldName)\n      return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    if (currentProject.hasExternalEventsNamed(newName)) {\n      showWarningBox(\n        i18n._(t`Other external events with this name already exist.`),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    const externalEvents = currentProject.getExternalEvents(oldName);\n    setState(state => ({\n      ...state,\n      editorTabs: closeExternalEventsTabs(state.editorTabs, externalEvents),\n    })).then(state => {\n      externalEvents.setName(newName);\n      _onProjectItemModified();\n    });\n  };\n\n  const renameEventsFunctionsExtension = (oldName: string, newName: string) => {\n    const { currentProject } = state;\n    const { i18n } = props;\n    if (!currentProject) return;\n\n    if (\n      !currentProject.hasEventsFunctionsExtensionNamed(oldName) ||\n      newName === oldName\n    )\n      return;\n\n    if (newName === '') {\n      showWarningBox(\n        i18n._(t`This name cannot be empty, please enter a new name.`),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    if (isExtensionNameTaken(newName, currentProject)) {\n      showWarningBox(\n        i18n._(\n          t`Another extension with this name already exists (or you used a reserved extension name). Please choose another name.`\n        ),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        ),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    const eventsFunctionsExtension = currentProject.getEventsFunctionsExtension(\n      oldName\n    );\n    setState(state => ({\n      ...state,\n      editorTabs: closeEventsFunctionsExtensionTabs(\n        state.editorTabs,\n        eventsFunctionsExtension\n      ),\n    })).then(state => {\n      // Refactor the project to update the instructions (and later expressions)\n      // of this extension:\n      gd.WholeProjectRefactorer.renameEventsFunctionsExtension(\n        currentProject,\n        eventsFunctionsExtension,\n        oldName,\n        newName\n      );\n      eventsFunctionsExtension.setName(newName);\n      eventsFunctionsExtensionsState.reloadProjectEventsFunctionsExtensions(\n        currentProject\n      );\n      _onProjectItemModified();\n    });\n  };\n\n  const setPreviewedLayout = (\n    previewLayoutName: ?string,\n    previewExternalLayoutName?: ?string\n  ) => {\n    setPreviewState(\n      previewState =>\n        ({\n          ...previewState,\n          previewLayoutName,\n          previewExternalLayoutName,\n        }: PreviewState)\n    );\n  };\n\n  const setPreviewOverride = ({\n    isPreviewOverriden,\n    overridenPreviewLayoutName,\n    overridenPreviewExternalLayoutName,\n  }) => {\n    setPreviewState(previewState => ({\n      ...previewState,\n      isPreviewOverriden,\n      overridenPreviewLayoutName,\n      overridenPreviewExternalLayoutName,\n    }));\n  };\n\n  const autosaveProjectIfNeeded = React.useCallback(\n    async () => {\n      if (!currentProject) return;\n\n      const storageProviderOperations = await getStorageProviderOperations();\n      if (\n        preferences.values.autosaveOnPreview &&\n        storageProviderOperations.onAutoSaveProject &&\n        currentFileMetadata\n      ) {\n        try {\n          await storageProviderOperations.onAutoSaveProject(\n            currentProject,\n            currentFileMetadata\n          );\n        } catch (err) {\n          console.error('Error while auto-saving the project: ', err);\n          _showSnackMessage(\n            i18n._(\n              t`There was an error while making an auto-save of the project. Verify that you have permissions to write in the project folder.`\n            )\n          );\n        }\n      }\n    },\n    [\n      i18n,\n      _showSnackMessage,\n      currentProject,\n      currentFileMetadata,\n      getStorageProviderOperations,\n      preferences.values.autosaveOnPreview,\n    ]\n  );\n\n  const _launchPreview = React.useCallback(\n    ({\n      networkPreview,\n      hotReload,\n      projectDataOnlyExport,\n      fullLoadingScreen,\n    }: LaunchPreviewOptions) => {\n      if (!currentProject) return;\n      if (currentProject.getLayoutsCount() === 0) return;\n\n      const previewLauncher = _previewLauncher.current;\n      if (!previewLauncher) return;\n\n      setPreviewLoading(true);\n      notifyPreviewWillStart(state.editorTabs);\n\n      const layoutName = previewState.isPreviewOverriden\n        ? previewState.overridenPreviewLayoutName\n        : previewState.previewLayoutName;\n      const externalLayoutName = previewState.isPreviewOverriden\n        ? previewState.overridenPreviewExternalLayoutName\n        : previewState.previewExternalLayoutName;\n\n      const layout =\n        layoutName && currentProject.hasLayoutNamed(layoutName)\n          ? currentProject.getLayout(layoutName)\n          : currentProject.getLayoutAt(0);\n      const externalLayout =\n        externalLayoutName &&\n        currentProject.hasExternalLayoutNamed(externalLayoutName)\n          ? currentProject.getExternalLayout(externalLayoutName)\n          : null;\n\n      autosaveProjectIfNeeded();\n\n      // Note that in the future, this kind of checks could be done\n      // and stored in a \"diagnostic report\", rather than hiding errors\n      // from the user.\n      findAndLogProjectPreviewErrors(currentProject);\n\n      eventsFunctionsExtensionsState\n        .ensureLoadFinished()\n        .then(() =>\n          previewLauncher.launchPreview({\n            project: currentProject,\n            layout,\n            externalLayout,\n            networkPreview: !!networkPreview,\n            hotReload: !!hotReload,\n            projectDataOnlyExport: !!projectDataOnlyExport,\n            fullLoadingScreen: !!fullLoadingScreen,\n            getIsMenuBarHiddenInPreview:\n              preferences.getIsMenuBarHiddenInPreview,\n            getIsAlwaysOnTopInPreview: preferences.getIsAlwaysOnTopInPreview,\n          })\n        )\n        .catch(error => {\n          console.error(\n            'Error caught while launching preview, this should never happen.',\n            error\n          );\n        })\n        .then(() => {\n          setPreviewLoading(false);\n        });\n    },\n    [\n      autosaveProjectIfNeeded,\n      currentProject,\n      eventsFunctionsExtensionsState,\n      previewState,\n      state.editorTabs,\n      preferences.getIsMenuBarHiddenInPreview,\n      preferences.getIsAlwaysOnTopInPreview,\n    ]\n  );\n\n  const launchPreview = ACHIEVEMENT_FEATURE_FLAG\n    ? addCreateBadgePreHookIfNotClaimed(\n        authenticatedUser,\n        TRIVIAL_FIRST_PREVIEW,\n        _launchPreview\n      )\n    : _launchPreview;\n\n  const launchNewPreview = React.useCallback(\n    () => launchPreview({ networkPreview: false }),\n    [launchPreview]\n  );\n\n  const launchHotReloadPreview = React.useCallback(\n    () => launchPreview({ networkPreview: false, hotReload: true }),\n    [launchPreview]\n  );\n\n  const launchNetworkPreview = React.useCallback(\n    () => launchPreview({ networkPreview: true, hotReload: false }),\n    [launchPreview]\n  );\n\n  const hotReloadPreviewButtonProps: HotReloadPreviewButtonProps = React.useMemo(\n    () => ({\n      hasPreviewsRunning,\n      launchProjectWithLoadingScreenPreview: () =>\n        launchPreview({ fullLoadingScreen: true }),\n      launchProjectDataOnlyPreview: () =>\n        launchPreview({ hotReload: true, projectDataOnlyExport: true }),\n    }),\n    [hasPreviewsRunning, launchPreview]\n  );\n\n  const openLayout = React.useCallback(\n    (\n      name: string,\n      {\n        openEventsEditor = true,\n        openSceneEditor = true,\n      }: { openEventsEditor: boolean, openSceneEditor: boolean } = {},\n      editorTabs = state.editorTabs\n    ) => {\n      const sceneEditorOptions = {\n        label: name,\n        projectItemName: name,\n        renderEditorContainer: renderSceneEditorContainer,\n        key: 'layout ' + name,\n      };\n      const eventsEditorOptions = {\n        label: name + ' ' + i18n._(t`(Events)`),\n        projectItemName: name,\n        renderEditorContainer: renderEventsEditorContainer,\n        key: 'layout events ' + name,\n        dontFocusTab: openSceneEditor,\n      };\n\n      const tabsWithSceneEditor = openSceneEditor\n        ? openEditorTab(editorTabs, sceneEditorOptions)\n        : editorTabs;\n      const tabsWithSceneAndEventsEditors = openEventsEditor\n        ? openEditorTab(tabsWithSceneEditor, eventsEditorOptions)\n        : tabsWithSceneEditor;\n\n      setState(state => ({\n        ...state,\n        editorTabs: tabsWithSceneAndEventsEditors,\n      }));\n      setIsLoadingProject(false);\n      openProjectManager(false);\n    },\n    [i18n, setState, state.editorTabs]\n  );\n\n  const openExternalEvents = React.useCallback(\n    (name: string) => {\n      setState(state => ({\n        ...state,\n        editorTabs: openEditorTab(state.editorTabs, {\n          label: name,\n          projectItemName: name,\n          renderEditorContainer: renderExternalEventsEditorContainer,\n          key: 'external events ' + name,\n        }),\n      }));\n      openProjectManager(false);\n    },\n    [setState]\n  );\n\n  const openExternalLayout = React.useCallback(\n    (name: string) => {\n      setState(state => ({\n        ...state,\n        editorTabs: openEditorTab(state.editorTabs, {\n          label: name,\n          projectItemName: name,\n          renderEditorContainer: renderExternalLayoutEditorContainer,\n          key: 'external layout ' + name,\n        }),\n      }));\n      openProjectManager(false);\n    },\n    [setState, openProjectManager]\n  );\n\n  const openEventsFunctionsExtension = React.useCallback(\n    (\n      name: string,\n      initiallyFocusedFunctionName?: string,\n      initiallyFocusedBehaviorName?: ?string\n    ) => {\n      setState(state => ({\n        ...state,\n        editorTabs: openEditorTab(state.editorTabs, {\n          label: name + ' ' + i18n._(t`(Extension)`),\n          projectItemName: name,\n          extraEditorProps: {\n            initiallyFocusedFunctionName,\n            initiallyFocusedBehaviorName,\n          },\n          renderEditorContainer: renderEventsFunctionsExtensionEditorContainer,\n          key: 'events functions extension ' + name,\n        }),\n      }));\n      openProjectManager(false);\n    },\n    [setState, openProjectManager, i18n]\n  );\n\n  const openResources = () => {\n    const { i18n } = props;\n    setState(state => ({\n      ...state,\n      editorTabs: openEditorTab(state.editorTabs, {\n        label: i18n._(t`Resources`),\n        projectItemName: null,\n        renderEditorContainer: renderResourcesEditorContainer,\n        key: 'resources',\n      }),\n    }));\n  };\n\n  const openStartPage = React.useCallback(\n    () => {\n      setState(state => ({\n        ...state,\n        editorTabs: openEditorTab(state.editorTabs, {\n          label: i18n._(t`Start Page`),\n          projectItemName: null,\n          renderEditorContainer: renderStartPageContainer,\n          key: 'start page',\n          closable: false,\n        }),\n      }));\n    },\n    [i18n, setState]\n  );\n\n  const _openDebugger = React.useCallback(\n    () => {\n      setState(state => ({\n        ...state,\n        editorTabs: openEditorTab(state.editorTabs, {\n          label: i18n._(t`Debugger`),\n          projectItemName: null,\n          renderEditorContainer: renderDebuggerEditorContainer,\n          key: 'debugger',\n        }),\n      }));\n    },\n    [i18n, setState]\n  );\n\n  const openDebugger = ACHIEVEMENT_FEATURE_FLAG\n    ? addCreateBadgePreHookIfNotClaimed(\n        authenticatedUser,\n        TRIVIAL_FIRST_DEBUG,\n        _openDebugger\n      )\n    : _openDebugger;\n\n  const launchDebuggerAndPreview = React.useCallback(\n    () => {\n      openDebugger();\n      launchHotReloadPreview();\n    },\n    [openDebugger, launchHotReloadPreview]\n  );\n\n  const openInstructionOrExpression = (\n    extension: gdPlatformExtension,\n    type: string\n  ) => {\n    const { currentProject, editorTabs } = state;\n    if (!currentProject) return;\n\n    const extensionName = extension.getName();\n    if (currentProject.hasEventsFunctionsExtensionNamed(extensionName)) {\n      // It's an events functions extension, open the editor for it.\n      const eventsFunctionsExtension = currentProject.getEventsFunctionsExtension(\n        extensionName\n      );\n      const functionName = getFunctionNameFromType(type);\n\n      const foundTab = getEventsFunctionsExtensionEditor(\n        editorTabs,\n        eventsFunctionsExtension\n      );\n      if (foundTab) {\n        // Open the given function and focus the tab\n        foundTab.editor.selectEventsFunctionByName(\n          functionName.name,\n          functionName.behaviorName\n        );\n        setState(state => ({\n          ...state,\n          editorTabs: changeCurrentTab(editorTabs, foundTab.tabIndex),\n        }));\n      } else {\n        // Open a new editor for the extension and the given function\n        openEventsFunctionsExtension(\n          extensionName,\n          functionName.name,\n          functionName.behaviorName\n        );\n      }\n    } else {\n      // It's not an events functions extension, we should not be here.\n      console.warn(\n        `Extension with name=${extensionName} can not be opened (no editor for this)`\n      );\n    }\n  };\n\n  const _onProjectItemModified = () => {\n    if (unsavedChanges) unsavedChanges.triggerUnsavedChanges();\n    forceUpdate();\n  };\n\n  const onCreateEventsFunction = (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => {\n    const { currentProject } = state;\n    if (!currentProject) return;\n\n    // Names are assumed to be already validated\n    const createNewExtension = !currentProject.hasEventsFunctionsExtensionNamed(\n      extensionName\n    );\n    const extension = createNewExtension\n      ? currentProject.insertNewEventsFunctionsExtension(extensionName, 0)\n      : currentProject.getEventsFunctionsExtension(extensionName);\n\n    if (createNewExtension) {\n      extension.setFullName(extensionName);\n      extension.setDescription(\n        'Originally automatically extracted from events of the project'\n      );\n    }\n\n    extension.insertEventsFunction(eventsFunction, 0);\n    eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n      currentProject\n    );\n  };\n\n  const openCreateDialog = React.useCallback(\n    (open: boolean = true) => {\n      setCreateDialogInitialTab('starters');\n      setState(state => ({ ...state, createDialogOpen: open }));\n    },\n    [setState]\n  );\n\n  const onOpenTutorials = React.useCallback(\n    (open: boolean = true) => {\n      setCreateDialogInitialTab('tutorials');\n      setState(state => ({ ...state, createDialogOpen: open }));\n    },\n    [setState]\n  );\n\n  const onOpenGamesShowcase = React.useCallback(\n    (open: boolean = true) => {\n      setCreateDialogInitialTab('games-showcase');\n      setState(state => ({ ...state, createDialogOpen: open }));\n    },\n    [setState]\n  );\n\n  const openOpenFromStorageProviderDialog = React.useCallback(\n    (open: boolean = true) => {\n      setState(state => ({\n        ...state,\n        openFromStorageProviderDialogOpen: open,\n      }));\n    },\n    [setState]\n  );\n\n  const openSceneOrProjectManager = React.useCallback(\n    (newState: {|\n      currentProject: ?gdProject,\n      editorTabs: EditorTabsState,\n    |}) => {\n      const { currentProject, editorTabs } = newState;\n      if (!currentProject) return;\n\n      if (currentProject.getLayoutsCount() === 1) {\n        openLayout(\n          currentProject.getLayoutAt(0).getName(),\n          {\n            openSceneEditor: true,\n            openEventsEditor: true,\n          },\n          editorTabs\n        );\n      } else {\n        setState(state => ({\n          ...state,\n          currentProject,\n          editorTabs,\n        })).then(() => {\n          setIsLoadingProject(false);\n          openProjectManager(true);\n        });\n      }\n    },\n    [openLayout, setState]\n  );\n\n  const chooseProjectWithStorageProviderPicker = React.useCallback(\n    () => {\n      getStorageProviderOperations().then(storageProviderOperations => {\n        if (!storageProviderOperations.onOpenWithPicker) return;\n\n        return storageProviderOperations\n          .onOpenWithPicker()\n          .then(fileMetadata => {\n            if (!fileMetadata) return;\n\n            return openFromFileMetadata(fileMetadata).then(state => {\n              if (state)\n                openSceneOrProjectManager({\n                  currentProject: state.currentProject,\n                  editorTabs: state.editorTabs,\n                });\n              //addRecentFile(fileMetadata);\n            });\n          })\n          .catch(error => {\n            const errorMessage = storageProviderOperations.getOpenErrorMessage\n              ? storageProviderOperations.getOpenErrorMessage(error)\n              : t`Verify that you have the authorizations for reading the file you're trying to access.`;\n            showErrorBox({\n              message: [\n                i18n._(t`Unable to open the project.`),\n                i18n._(errorMessage),\n              ].join('\\n'),\n              errorId: 'project-open-with-picker-error',\n              rawError: error,\n            });\n          });\n      });\n    },\n    [\n      i18n,\n      getStorageProviderOperations,\n      openFromFileMetadata,\n      openSceneOrProjectManager,\n    ]\n  );\n\n  const chooseProject = React.useCallback(\n    () => {\n      if (\n        props.storageProviders.filter(\n          ({ hiddenInOpenDialog }) => !hiddenInOpenDialog\n        ).length > 1\n      ) {\n        openOpenFromStorageProviderDialog();\n      } else {\n        chooseProjectWithStorageProviderPicker();\n      }\n    },\n    [\n      props.storageProviders,\n      openOpenFromStorageProviderDialog,\n      chooseProjectWithStorageProviderPicker,\n    ]\n  );\n\n  const openFromFileMetadataWithStorageProvider = React.useCallback(\n    (\n      fileMetadataAndStorageProviderName: FileMetadataAndStorageProviderName\n    ) => {\n      const { fileMetadata } = fileMetadataAndStorageProviderName;\n      const storageProvider = findStorageProviderFor(\n        i18n,\n        props.storageProviders,\n        fileMetadataAndStorageProviderName\n      );\n\n      if (!storageProvider) return;\n\n      getStorageProviderOperations(storageProvider).then(() => {\n        openFromFileMetadata(fileMetadata)\n          .then(state => {\n            if (state)\n              openSceneOrProjectManager({\n                currentProject: state.currentProject,\n                editorTabs: state.editorTabs,\n              });\n          })\n          .catch(error => {\n            /* Ignore error, it was already surfaced to the user. */\n          });\n      });\n    },\n    [\n      i18n,\n      openFromFileMetadata,\n      openSceneOrProjectManager,\n      props.storageProviders,\n      getStorageProviderOperations,\n    ]\n  );\n\n  const openSaveToStorageProviderDialog = React.useCallback(\n    (open: boolean = true) => {\n      if (open) {\n        // Ensure the project manager is closed as Google Drive storage provider\n        // display a picker that does not play nice with material-ui's overlays.\n        openProjectManager(false);\n      }\n      setState(state => ({ ...state, saveToStorageProviderDialogOpen: open }));\n    },\n    [setState]\n  );\n\n  const saveProjectAsWithStorageProvider = React.useCallback(\n    () => {\n      if (!currentProject) return;\n\n      saveUiSettings(state.editorTabs);\n\n      getStorageProviderOperations().then(storageProviderOperations => {\n        const { onSaveProjectAs } = storageProviderOperations;\n        if (!onSaveProjectAs) {\n          return;\n        }\n\n        // Protect against concurrent saves, which can trigger issues with the\n        // file system.\n        if (isSavingProject) {\n          console.info('Project is already being saved, not triggering save.');\n          return;\n        }\n        setIsSavingProject(true);\n\n        onSaveProjectAs(currentProject, currentFileMetadata)\n          .then(\n            ({ wasSaved, fileMetadata }) => {\n              if (wasSaved) {\n                if (unsavedChanges) unsavedChanges.sealUnsavedChanges();\n                _showSnackMessage(i18n._(t`Project properly saved`));\n\n                if (fileMetadata) {\n                  preferences.insertRecentProjectFile({\n                    fileMetadata,\n                    storageProviderName: getStorageProvider().internalName,\n                  });\n\n                  setState(state => ({\n                    ...state,\n                    currentFileMetadata: fileMetadata,\n                  }));\n                }\n              }\n            },\n            rawError => {\n              showErrorBox({\n                message: i18n._(\n                  t`Unable to save as the project! Please try again by choosing another location.`\n                ),\n                rawError,\n                errorId: 'project-save-as-error',\n              });\n            }\n          )\n          .catch(() => {})\n          .then(() => setIsSavingProject(false));\n      });\n    },\n    [\n      i18n,\n      isSavingProject,\n      currentProject,\n      currentFileMetadata,\n      getStorageProviderOperations,\n      unsavedChanges,\n      setState,\n      state.editorTabs,\n      _showSnackMessage,\n      getStorageProvider,\n      preferences,\n    ]\n  );\n\n  const saveProjectAs = React.useCallback(\n    () => {\n      if (!currentProject) return;\n\n      getStorageProviderOperations().then(storageProviderOperations => {\n        if (\n          props.storageProviders.filter(\n            ({ hiddenInSaveDialog }) => !hiddenInSaveDialog\n          ).length > 1 ||\n          !storageProviderOperations.onSaveProjectAs\n        ) {\n          openSaveToStorageProviderDialog();\n        } else {\n          saveProjectAsWithStorageProvider();\n        }\n      });\n    },\n    [\n      currentProject,\n      getStorageProviderOperations,\n      openSaveToStorageProviderDialog,\n      props.storageProviders,\n      saveProjectAsWithStorageProvider,\n    ]\n  );\n\n  const saveProject = React.useCallback(\n    async () => {\n      if (!currentProject) return;\n      if (!currentFileMetadata) {\n        return saveProjectAs();\n      }\n\n      const storageProviderOperations = await getStorageProviderOperations();\n      const { onSaveProject } = storageProviderOperations;\n      if (!onSaveProject) {\n        return saveProjectAs();\n      }\n\n      saveUiSettings(state.editorTabs);\n      _showSnackMessage(i18n._(t`Saving...`));\n\n      // Protect against concurrent saves, which can trigger issues with the\n      // file system.\n      if (isSavingProject) {\n        console.info('Project is already being saved, not triggering save.');\n        return;\n      }\n      setIsSavingProject(true);\n\n      try {\n        const saveStartTime = performance.now();\n        const { wasSaved } = await onSaveProject(\n          currentProject,\n          currentFileMetadata\n        );\n\n        if (wasSaved) {\n          console.info(\n            `Project saved in ${performance.now() - saveStartTime}ms.`\n          );\n          if (unsavedChanges) unsavedChanges.sealUnsavedChanges();\n          _showSnackMessage(i18n._(t`Project properly saved`));\n        }\n      } catch (rawError) {\n        showErrorBox({\n          message: i18n._(\n            t`Unable to save as the project! Please try again by choosing another location.`\n          ),\n          rawError,\n          errorId: 'project-save-error',\n        });\n      }\n\n      setIsSavingProject(false);\n    },\n    [\n      isSavingProject,\n      currentProject,\n      currentFileMetadata,\n      getStorageProviderOperations,\n      _showSnackMessage,\n      i18n,\n      unsavedChanges,\n      saveProjectAs,\n      state.editorTabs,\n    ]\n  );\n\n  const askToCloseProject = React.useCallback(\n    (): Promise<void> => {\n      if (unsavedChanges && unsavedChanges.hasUnsavedChanges) {\n        if (!currentProject) return Promise.resolve();\n\n        const answer = Window.showConfirmDialog(\n          i18n._(\n            t`Close the project? Any changes that have not been saved will be lost.`\n          )\n        );\n        if (!answer) return Promise.resolve();\n      }\n      return closeProject();\n    },\n    [currentProject, unsavedChanges, i18n, closeProject]\n  );\n\n  const _onChangeEditorTab = (value: number) => {\n    setState(state => ({\n      ...state,\n      editorTabs: changeCurrentTab(state.editorTabs, value),\n    })).then(state =>\n      _onEditorTabActive(getCurrentTab(state.editorTabs), state)\n    );\n  };\n\n  const _onEditorTabActive = (\n    editorTab: EditorTab,\n    newState: State = state\n  ) => {\n    updateToolbar(newState.editorTabs);\n    // Ensure the editors shown on the screen are updated. This is for\n    // example useful if global objects have been updated in another editor.\n    if (editorTab.editorRef) {\n      editorTab.editorRef.forceUpdateEditor();\n    }\n  };\n\n  const _onCloseEditorTab = (editorTab: EditorTab) => {\n    saveUiSettings(state.editorTabs);\n    setState(state => ({\n      ...state,\n      editorTabs: closeEditorTab(state.editorTabs, editorTab),\n    }));\n  };\n\n  const _onCloseOtherEditorTabs = (editorTab: EditorTab) => {\n    saveUiSettings(state.editorTabs);\n    setState(state => ({\n      ...state,\n      editorTabs: closeOtherEditorTabs(state.editorTabs, editorTab),\n    }));\n  };\n\n  const _onCloseAllEditorTabs = () => {\n    saveUiSettings(state.editorTabs);\n    setState(state => ({\n      ...state,\n      editorTabs: closeAllEditorTabs(state.editorTabs),\n    }));\n  };\n\n  const onChooseResource: ChooseResourceFunction = (\n    options: ChooseResourceOptions\n  ) => {\n    return new Promise(resolve => {\n      setChooseResourceOptions(options);\n      const onResourceChosenSetter: () => (\n        Promise<Array<gdResource>> | Array<gdResource>\n      ) => void = () => resolve;\n      setOnResourceChosen(onResourceChosenSetter);\n    });\n  };\n\n  const setUpdateStatus = (updateStatus: UpdateStatus) => {\n    setState(state => ({ ...state, updateStatus }));\n\n    const notificationTitle = getUpdateNotificationTitle(updateStatus);\n    const notificationBody = getUpdateNotificationBody(updateStatus);\n    if (notificationTitle) {\n      const notification = new window.Notification(notificationTitle, {\n        body: notificationBody,\n      });\n      notification.onclick = () => openAboutDialog(true);\n    }\n  };\n\n  const simulateUpdateDownloaded = () =>\n    setUpdateStatus({\n      status: 'update-downloaded',\n      message: 'update-downloaded',\n      info: {\n        releaseName: 'Fake update',\n      },\n    });\n\n  const simulateUpdateAvailable = () =>\n    setUpdateStatus({\n      status: 'update-available',\n      message: 'Update available',\n    });\n\n  useKeyboardShortcuts(\n    commandPaletteRef.current\n      ? commandPaletteRef.current.launchCommand\n      : () => {}\n  );\n\n  useMainFrameCommands({\n    i18n,\n    project: state.currentProject,\n    previewEnabled:\n      !!state.currentProject && state.currentProject.getLayoutsCount() > 0,\n    onOpenProjectManager: toggleProjectManager,\n    hasPreviewsRunning,\n    allowNetworkPreview:\n      !!_previewLauncher.current &&\n      _previewLauncher.current.canDoNetworkPreview(),\n    onLaunchPreview: launchNewPreview,\n    onHotReloadPreview: launchHotReloadPreview,\n    onLaunchDebugPreview: launchDebuggerAndPreview,\n    onLaunchNetworkPreview: launchNetworkPreview,\n    onOpenStartPage: openStartPage,\n    onCreateProject: openCreateDialog,\n    onOpenProject: chooseProject,\n    onSaveProject: saveProject,\n    onSaveProjectAs: saveProjectAs,\n    onCloseApp: closeApp,\n    onCloseProject: askToCloseProject,\n    onExportGame: React.useCallback(() => openExportDialog(true), []),\n    onOpenLayout: openLayout,\n    onOpenExternalEvents: openExternalEvents,\n    onOpenExternalLayout: openExternalLayout,\n    onOpenEventsFunctionsExtension: openEventsFunctionsExtension,\n    onOpenCommandPalette: commandPaletteRef.current\n      ? commandPaletteRef.current.open\n      : () => {},\n    onOpenProfile: React.useCallback(\n      () => openProfileDialogWithTab('profile'),\n      []\n    ),\n    onOpenGamesDashboard: React.useCallback(\n      () => openProfileDialogWithTab('games-dashboard'),\n      []\n    ),\n  });\n\n  const showLoader = isLoadingProject || previewLoading;\n\n  return (\n    <div className=\"main-frame\">\n      {!!renderMainMenu &&\n        renderMainMenu({\n          i18n: i18n,\n          project: state.currentProject,\n          onChooseProject: chooseProject,\n          onOpenRecentFile: openFromFileMetadataWithStorageProvider,\n          onSaveProject: saveProject,\n          onSaveProjectAs: saveProjectAs,\n          onCloseProject: askToCloseProject,\n          onCloseApp: closeApp,\n          onExportProject: () => openExportDialog(true),\n          onCreateProject: openCreateDialog,\n          onOpenProjectManager: () => openProjectManager(true),\n          onOpenStartPage: openStartPage,\n          onOpenDebugger: openDebugger,\n          onOpenAbout: () => openAboutDialog(true),\n          onOpenPreferences: () => openPreferencesDialog(true),\n          onOpenLanguage: () => openLanguageDialog(true),\n          onOpenProfile: () => openProfileDialogWithTab('profile'),\n          onOpenGamesDashboard: () =>\n            openProfileDialogWithTab('games-dashboard'),\n          setUpdateStatus: setUpdateStatus,\n          recentProjectFiles: preferences.getRecentProjectFiles(),\n        })}\n      <ProjectTitlebar fileMetadata={currentFileMetadata} />\n      <Drawer\n        open={projectManagerOpen}\n        PaperProps={{\n          style: styles.drawerContent,\n          className: 'safe-area-aware-left-container',\n        }}\n        ModalProps={{\n          keepMounted: true,\n        }}\n        onClose={toggleProjectManager}\n      >\n        <DrawerTopBar\n          title={\n            state.currentProject ? state.currentProject.getName() : 'No project'\n          }\n          displayRightCloseButton\n          onClose={toggleProjectManager}\n        />\n        {currentProject && (\n          <ProjectManager\n            project={currentProject}\n            onOpenExternalEvents={openExternalEvents}\n            onOpenLayout={openLayout}\n            onOpenExternalLayout={openExternalLayout}\n            onOpenEventsFunctionsExtension={openEventsFunctionsExtension}\n            onAddLayout={addLayout}\n            onAddExternalLayout={addExternalLayout}\n            onAddEventsFunctionsExtension={addEventsFunctionsExtension}\n            onAddExternalEvents={addExternalEvents}\n            onInstallExtension={onInstallExtension}\n            onDeleteLayout={deleteLayout}\n            onDeleteExternalLayout={deleteExternalLayout}\n            onDeleteEventsFunctionsExtension={deleteEventsFunctionsExtension}\n            onDeleteExternalEvents={deleteExternalEvents}\n            onRenameLayout={renameLayout}\n            onRenameExternalLayout={renameExternalLayout}\n            onRenameEventsFunctionsExtension={renameEventsFunctionsExtension}\n            onRenameExternalEvents={renameExternalEvents}\n            onSaveProject={saveProject}\n            onSaveProjectAs={saveProjectAs}\n            onCloseProject={() => {\n              askToCloseProject();\n            }}\n            onExportProject={() => openExportDialog(true)}\n            onOpenPreferences={() => openPreferencesDialog(true)}\n            onOpenProfile={() => openProfileDialogWithTab('profile')}\n            onOpenGamesDashboard={() =>\n              openProfileDialogWithTab('games-dashboard')\n            }\n            onOpenResources={() => {\n              openResources();\n              openProjectManager(false);\n            }}\n            onOpenPlatformSpecificAssets={() =>\n              openPlatformSpecificAssetsDialog(true)\n            }\n            onChangeSubscription={() => openSubscriptionDialog(true)}\n            eventsFunctionsExtensionsError={eventsFunctionsExtensionsError}\n            onReloadEventsFunctionsExtensions={() => {\n              // Check if load is sufficient\n              eventsFunctionsExtensionsState.reloadProjectEventsFunctionsExtensions(\n                currentProject\n              );\n            }}\n            freezeUpdate={!projectManagerOpen}\n            unsavedChanges={unsavedChanges}\n            hotReloadPreviewButtonProps={hotReloadPreviewButtonProps}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n          />\n        )}\n        {!state.currentProject && (\n          <EmptyMessage>\n            <Trans>To begin, open or create a new project.</Trans>\n          </EmptyMessage>\n        )}\n      </Drawer>\n      <Toolbar\n        ref={toolbar}\n        showProjectIcons={!props.integratedEditor}\n        hasProject={!!currentProject}\n        toggleProjectManager={toggleProjectManager}\n        exportProject={() => openExportDialog(true)}\n        requestUpdate={props.requestUpdate}\n        simulateUpdateDownloaded={simulateUpdateDownloaded}\n        simulateUpdateAvailable={simulateUpdateAvailable}\n        onOpenDebugger={launchDebuggerAndPreview}\n        hasPreviewsRunning={hasPreviewsRunning}\n        onPreviewWithoutHotReload={launchNewPreview}\n        onNetworkPreview={launchNetworkPreview}\n        onHotReloadPreview={launchHotReloadPreview}\n        canDoNetworkPreview={\n          !!_previewLauncher.current &&\n          _previewLauncher.current.canDoNetworkPreview()\n        }\n        setPreviewOverride={setPreviewOverride}\n        isPreviewEnabled={\n          !!currentProject && currentProject.getLayoutsCount() > 0\n        }\n        previewState={previewState}\n      />\n      <ClosableTabs hideLabels={!!props.integratedEditor}>\n        {getEditors(state.editorTabs).map((editorTab, id) => {\n          const isCurrentTab = getCurrentTabIndex(state.editorTabs) === id;\n          return (\n            <ClosableTab\n              label={editorTab.label}\n              key={editorTab.key}\n              active={isCurrentTab}\n              onClick={() => _onChangeEditorTab(id)}\n              onClose={() => _onCloseEditorTab(editorTab)}\n              onCloseOthers={() => _onCloseOtherEditorTabs(editorTab)}\n              onCloseAll={_onCloseAllEditorTabs}\n              onActivated={() => _onEditorTabActive(editorTab)}\n              closable={editorTab.closable}\n            />\n          );\n        })}\n      </ClosableTabs>\n      {getEditors(state.editorTabs).map((editorTab, id) => {\n        const isCurrentTab = getCurrentTabIndex(state.editorTabs) === id;\n        return (\n          <TabContentContainer key={editorTab.key} active={isCurrentTab}>\n            <CommandsContextScopedProvider active={isCurrentTab}>\n              <ErrorBoundary>\n                {editorTab.renderEditorContainer({\n                  isActive: isCurrentTab,\n                  extraEditorProps: editorTab.extraEditorProps,\n                  project: currentProject,\n                  ref: editorRef => (editorTab.editorRef = editorRef),\n                  setToolbar: editorToolbar =>\n                    setEditorToolbar(editorToolbar, isCurrentTab),\n                  onChangeSubscription: () => openSubscriptionDialog(true),\n                  projectItemName: editorTab.projectItemName,\n                  setPreviewedLayout,\n                  onOpenExternalEvents: openExternalEvents,\n                  previewDebuggerServer,\n                  hotReloadPreviewButtonProps,\n                  onOpenLayout: name =>\n                    openLayout(name, {\n                      openEventsEditor: true,\n                      openSceneEditor: false,\n                    }),\n                  resourceSources: props.resourceSources,\n                  onChooseResource,\n                  resourceExternalEditors,\n                  onCreateEventsFunction,\n                  openInstructionOrExpression,\n                  unsavedChanges: unsavedChanges,\n                  canOpen: !!props.storageProviders.filter(\n                    ({ hiddenInOpenDialog }) => !hiddenInOpenDialog\n                  ).length,\n                  onOpen: () => chooseProject(),\n                  onCreate: () => openCreateDialog(),\n                  onOpenProjectManager: () => openProjectManager(true),\n                  onCloseProject: () => askToCloseProject(),\n                  onOpenTutorials: () => onOpenTutorials(),\n                  onOpenGamesShowcase: () => onOpenGamesShowcase(),\n                  onOpenHelpFinder: () => openHelpFinderDialog(true),\n                  onOpenLanguageDialog: () => openLanguageDialog(true),\n                  onLoadEventsFunctionsExtensions: () =>\n                    eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n                      currentProject\n                    ),\n                  onDeleteResource: (\n                    resource: gdResource,\n                    cb: boolean => void\n                  ) => {\n                    // TODO: Project wide refactoring of objects/events using the resource\n                    cb(true);\n                  },\n                  onRenameResource: (\n                    resource: gdResource,\n                    newName: string,\n                    cb: boolean => void\n                  ) => {\n                    if (currentProject)\n                      renameResourcesInProject(currentProject, {\n                        [resource.getName()]: newName,\n                      });\n\n                    cb(true);\n                  },\n                })}\n              </ErrorBoundary>\n            </CommandsContextScopedProvider>\n          </TabContentContainer>\n        );\n      })}\n      <CommandPalette ref={commandPaletteRef} />\n      <LoaderModal show={showLoader} />\n      <HelpFinder\n        open={helpFinderDialogOpen}\n        onClose={() => openHelpFinderDialog(false)}\n      />\n      <Snackbar\n        open={state.snackMessageOpen}\n        autoHideDuration={3000}\n        onClose={_closeSnackMessage}\n        ContentProps={{\n          'aria-describedby': 'snackbar-message',\n        }}\n        message={<span id=\"snackbar-message\">{state.snackMessage}</span>}\n      />\n      {!!renderExportDialog &&\n        exportDialogOpen &&\n        renderExportDialog({\n          onClose: () => openExportDialog(false),\n          onChangeSubscription: () => {\n            openExportDialog(false);\n            openSubscriptionDialog(true);\n          },\n          project: state.currentProject,\n        })}\n      {!!renderCreateDialog &&\n        state.createDialogOpen &&\n        renderCreateDialog({\n          open: state.createDialogOpen,\n          initialTab: createDialogInitialTab,\n          onClose: () => openCreateDialog(false),\n          onOpen: async (storageProvider, fileMetadata) => {\n            await setState(state => ({ ...state, createDialogOpen: false }));\n            await getStorageProviderOperations(storageProvider);\n            const state = await openFromFileMetadata(fileMetadata);\n\n            if (state) {\n              if (state.currentProject) state.currentProject.resetProjectUuid();\n              openSceneOrProjectManager({\n                currentProject: state.currentProject,\n                editorTabs: state.editorTabs,\n              });\n            }\n          },\n          onCreate: async (project, storageProvider, fileMetadata) => {\n            await setState(state => ({ ...state, createDialogOpen: false }));\n            await getStorageProviderOperations(storageProvider);\n            const state = await loadFromProject(project, fileMetadata);\n\n            if (state.currentProject) state.currentProject.resetProjectUuid();\n            openSceneOrProjectManager({\n              currentProject: state.currentProject,\n              editorTabs: state.editorTabs,\n            });\n          },\n        })}\n      {!!introDialog &&\n        introDialogOpen &&\n        React.cloneElement(introDialog, {\n          open: true,\n          onClose: () => openIntroDialog(false),\n        })}\n      {!!currentProject && platformSpecificAssetsDialogOpen && (\n        <PlatformSpecificAssetsDialog\n          project={currentProject}\n          open\n          onApply={() => openPlatformSpecificAssetsDialog(false)}\n          onClose={() => openPlatformSpecificAssetsDialog(false)}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceExternalEditors={resourceExternalEditors}\n        />\n      )}\n      {!!renderPreviewLauncher &&\n        renderPreviewLauncher(\n          {\n            getIncludeFileHashs:\n              eventsFunctionsExtensionsContext.getIncludeFileHashs,\n            onExport: () => openExportDialog(true),\n            onChangeSubscription: () => openSubscriptionDialog(true),\n          },\n          (previewLauncher: ?PreviewLauncherInterface) => {\n            _previewLauncher.current = previewLauncher;\n          }\n        )}\n      {!!currentProject && chooseResourceOptions && onResourceChosen && (\n        <NewResourceDialog\n          project={currentProject}\n          i18n={i18n}\n          resourceSources={resourceSources}\n          onChooseResources={resources => {\n            setOnResourceChosen(null);\n            setChooseResourceOptions(null);\n            onResourceChosen(resources);\n          }}\n          onClose={() => {\n            setOnResourceChosen(null);\n            setChooseResourceOptions(null);\n            onResourceChosen([]);\n          }}\n          options={chooseResourceOptions}\n        />\n      )}\n      {profileDialogOpen && (\n        <ProfileDialog\n          currentProject={currentProject}\n          initialTab={profileDialogInitialTab}\n          open\n          onClose={() => openProfileDialog(false)}\n          onChangeSubscription={() => openSubscriptionDialog(true)}\n        />\n      )}\n      {subscriptionDialogOpen && (\n        <SubscriptionDialog\n          onClose={() => {\n            openSubscriptionDialog(false);\n          }}\n          open\n        />\n      )}\n      {preferencesDialogOpen && (\n        <PreferencesDialog\n          i18n={props.i18n}\n          onClose={() => openPreferencesDialog(false)}\n        />\n      )}\n      {languageDialogOpen && (\n        <LanguageDialog\n          open\n          onClose={languageChanged => {\n            openLanguageDialog(false);\n            if (languageChanged) {\n              _languageDidChange();\n            }\n          }}\n        />\n      )}\n      {aboutDialogOpen && (\n        <AboutDialog\n          open\n          onClose={() => openAboutDialog(false)}\n          updateStatus={updateStatus}\n        />\n      )}\n      {state.openFromStorageProviderDialogOpen && (\n        <OpenFromStorageProviderDialog\n          onClose={() => openOpenFromStorageProviderDialog(false)}\n          storageProviders={props.storageProviders}\n          onChooseProvider={storageProvider => {\n            openOpenFromStorageProviderDialog(false);\n            props.getStorageProviderOperations(storageProvider).then(() => {\n              chooseProjectWithStorageProviderPicker();\n            });\n          }}\n          onCreateNewProject={() => {\n            openOpenFromStorageProviderDialog(false);\n            openCreateDialog(true);\n          }}\n        />\n      )}\n      {state.saveToStorageProviderDialogOpen && (\n        <SaveToStorageProviderDialog\n          onClose={() => openSaveToStorageProviderDialog(false)}\n          storageProviders={props.storageProviders}\n          onChooseProvider={storageProvider => {\n            openSaveToStorageProviderDialog(false);\n            props.getStorageProviderOperations(storageProvider).then(() => {\n              saveProjectAsWithStorageProvider();\n            });\n          }}\n        />\n      )}\n      {renderOpenConfirmDialog()}\n      {renderResourceFetcherDialog()}\n      <CloseConfirmDialog\n        shouldPrompt={!!state.currentProject}\n        i18n={props.i18n}\n        language={props.i18n.language}\n        hasUnsavedChanges={!!unsavedChanges && unsavedChanges.hasUnsavedChanges}\n      />\n      <ChangelogDialogContainer />\n      {state.gdjsDevelopmentWatcherEnabled &&\n        renderGDJSDevelopmentWatcher &&\n        renderGDJSDevelopmentWatcher()}\n      {!!hotReloadLogs.length && (\n        <HotReloadLogsDialog\n          logs={hotReloadLogs}\n          onClose={clearHotReloadLogs}\n          onLaunchNewPreview={() => {\n            clearHotReloadLogs();\n            launchNewPreview();\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default MainFrame;\n","// @flow\n\nexport const tooltipEnterDelay: number = 300;\n","// @flow\n// See ElectronEventsBridge, AboutDialog and electron-app/main.js for handling the updates.\n\nexport type UpdateStatus = {\n  message: string,\n  status:\n    | 'checking-for-update'\n    | 'update-available'\n    | 'update-not-available'\n    | 'error'\n    | 'download-progress'\n    | 'update-downloaded'\n    | 'unknown',\n};\n\nexport const getUpdateNotificationTitle = (updateStatus: UpdateStatus) => {\n  if (updateStatus.status === 'update-available')\n    return 'A new update is available!';\n\n  return '';\n};\n\nexport const getUpdateNotificationBody = (updateStatus: UpdateStatus) => {\n  if (updateStatus.status === 'update-available')\n    return 'It will be downloaded and installed automatically (unless you deactivated this in preferences)';\n\n  return '';\n};\n\nexport const getUpdateStatusLabel = (status: string) => {\n  if (status === 'checking-for-update') return 'Checking for update...';\n  if (status === 'update-available') return 'A new update is available!';\n  if (status === 'update-not-available')\n    return \"No update available. You're using the latest version!\";\n  if (status === 'error') return 'Error while checking update';\n  if (status === 'download-progress')\n    return 'A new update is being downloaded...';\n  if (status === 'update-downloaded')\n    return 'A new update will be installed after you quit and relaunch GDevelop';\n  return '';\n};\n\nexport const getUpdateButtonLabel = (status: string) => {\n  if (status === 'update-available') return 'Update GDevelop to latest version';\n  return 'Check again for new updates';\n};\n\nexport const canDownloadUpdate = (status: string) => {\n  return status === 'update-available';\n};\n","// @flow\nimport React from 'react';\nimport HelpOutline from '@material-ui/icons/HelpOutline';\nimport IconButton from '../IconButton';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport Window from '../../Utils/Window';\n\ntype PropsType = {|\n  helpPagePath: ?string,\n  disabled?: boolean,\n  style?: {|\n    padding?: number,\n    width?: number,\n    height?: number,\n    transform?: string,\n    transition?: string,\n    opacity?: number,\n    margin?: number,\n    marginRight?: number,\n    marginLeft?: number,\n    marginTop?: number,\n    marginBottom?: number,\n  |},\n  size?: 'small',\n|};\n\n/**\n * The icon that can be used in any dialog to open a help page\n */\nexport default (props: PropsType) => {\n  const { helpPagePath } = props;\n  if (!helpPagePath) return null;\n\n  return (\n    <IconButton\n      onClick={() => Window.openExternalURL(getHelpLink(helpPagePath))}\n      disabled={props.disabled}\n      style={props.style}\n      size={props.size}\n    >\n      <HelpOutline />\n    </IconButton>\n  );\n};\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z\" />\n  </SvgIcon>\n));\n","// @flow\nconst gd: libGDevelop = global.gd;\n\nexport const toNewGdMapStringString = (object: {\n  [string]: string,\n}): gdMapStringString => {\n  const map = new gd.MapStringString();\n  for (var key in object) {\n    map.set(key, object[key]);\n  }\n\n  return map;\n};\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport Checkbox from '../../UI/Checkbox';\nimport { CorsAwareImage } from '../../UI/CorsAwareImage';\nimport GDevelopThemeContext from '../../UI/Theme/ThemeContext';\nimport { useLongTouch } from '../../Utils/UseLongTouch';\nimport CheckeredBackground from '../CheckeredBackground';\n\nconst SPRITE_SIZE = 100;\nexport const thumbnailContainerStyle = {\n  position: 'relative',\n  display: 'inline-block',\n  width: SPRITE_SIZE,\n  height: SPRITE_SIZE,\n  justifyContent: 'center',\n  alignItems: 'center',\n  lineHeight: SPRITE_SIZE + 'px',\n  textAlign: 'center',\n};\n\nconst styles = {\n  spriteThumbnail: {\n    ...thumbnailContainerStyle,\n  },\n  spriteThumbnailImage: {\n    position: 'relative',\n    maxWidth: SPRITE_SIZE,\n    maxHeight: SPRITE_SIZE,\n    verticalAlign: 'middle',\n    pointerEvents: 'none',\n  },\n  checkboxContainer: {\n    textAlign: 'initial',\n    position: 'absolute',\n    width: 34, // Used to position the checkbox near the right border with a proper margin\n    height: 64,\n    bottom: 0,\n    right: 0,\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcesLoader: typeof ResourcesLoader,\n  style?: any,\n  selectable?: boolean,\n  selected?: boolean,\n  onSelect?: (checked: boolean) => void,\n  onContextMenu?: (x: number, y: number) => void,\n|};\n\nconst ImageThumbnail = (props: Props) => {\n  const { onContextMenu, resourcesLoader, resourceName, project } = props;\n  const theme = React.useContext(GDevelopThemeContext);\n\n  // Allow a long press to show the context menu\n  const longTouchForContextMenuProps = useLongTouch(\n    React.useCallback(\n      event => {\n        if (onContextMenu) onContextMenu(event.clientX, event.clientY);\n      },\n      [onContextMenu]\n    )\n  );\n\n  const { selectedBorderColor } = theme.imageThumbnail;\n  const normalBorderColor = theme.imagePreview.borderColor;\n  const borderColor = props.selected ? selectedBorderColor : normalBorderColor;\n\n  const containerStyle = {\n    ...styles.spriteThumbnail,\n    border: `1px solid ${borderColor}`,\n    ...props.style,\n  };\n\n  return (\n    <div\n      title={resourceName}\n      style={containerStyle}\n      onContextMenu={e => {\n        e.stopPropagation();\n        if (onContextMenu) onContextMenu(e.clientX, e.clientY);\n      }}\n      {...longTouchForContextMenuProps}\n    >\n      <CheckeredBackground />\n      <CorsAwareImage\n        style={styles.spriteThumbnailImage}\n        alt={resourceName}\n        src={resourcesLoader.getResourceFullUrl(project, resourceName, {})}\n      />\n      {props.selectable && (\n        <div style={styles.checkboxContainer}>\n          <Checkbox\n            checked={!!props.selected}\n            onCheck={(e, check) => props.onSelect && props.onSelect(check)}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ImageThumbnail;\n","// @flow\nimport { useEffect, useRef, useCallback } from 'react';\nimport { useIsMounted } from './UseIsMounted';\nimport debounce from 'lodash/debounce';\n\n// Function taken from https://stackoverflow.com/questions/54666401/how-to-use-throttle-or-debounce-with-react-hook/62017005#62017005\n\n/**\n * Debounces a React callback with a specified delay.\n */\nexport const useDebounce = (cb: any, delay: number) => {\n  const options = {\n    leading: false,\n    trailing: true,\n  };\n  const isMounted = useIsMounted();\n  const inputsRef = useRef({ cb, delay });\n  useEffect(() => {\n    inputsRef.current = { cb, delay };\n  });\n  return useCallback(\n    debounce(\n      (...args: any) => {\n        if (inputsRef.current.delay === delay && isMounted.current)\n          inputsRef.current.cb(...args);\n      },\n      delay,\n      options\n    ),\n    [delay, debounce]\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { type FiltersState, useFilters } from '../../UI/Search/FiltersChooser';\nimport {\n  getExtensionsRegistry,\n  type ExtensionsRegistry,\n  type ExtensionShortHeader,\n} from '../../Utils/GDevelopServices/Extension';\nimport { type Filters } from '../../Utils/GDevelopServices/Filters';\nimport { useSearchItem } from '../../UI/Search/UseSearchItem';\n\nconst defaultSearchText = '';\n\ntype ExtensionStoreState = {|\n  filters: ?Filters,\n  searchResults: ?Array<ExtensionShortHeader>,\n  fetchExtensionsAndFilters: () => void,\n  error: ?Error,\n  searchText: string,\n  setSearchText: string => void,\n  filtersState: FiltersState,\n|};\n\nexport const ExtensionStoreContext = React.createContext<ExtensionStoreState>({\n  filters: null,\n  searchResults: null,\n  fetchExtensionsAndFilters: () => {},\n  error: null,\n  searchText: '',\n  setSearchText: () => {},\n  filtersState: {\n    chosenFilters: new Set(),\n    addFilter: () => {},\n    removeFilter: () => {},\n    chosenCategory: null,\n    setChosenCategory: () => {},\n  },\n});\n\ntype ExtensionStoreStateProviderProps = {|\n  children: React.Node,\n|};\n\nconst getExtensionSearchTerms = (extension: ExtensionShortHeader) => {\n  return (\n    extension.name +\n    '\\n' +\n    extension.shortDescription +\n    '\\n' +\n    extension.tags.join(',')\n  );\n};\n\nexport const ExtensionStoreStateProvider = ({\n  children,\n}: ExtensionStoreStateProviderProps) => {\n  const [\n    extensionShortHeadersByName,\n    setExtensionShortHeadersByName,\n  ] = React.useState<?{\n    [string]: ExtensionShortHeader,\n  }>(null);\n  const [filters, setFilters] = React.useState<?Filters>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const isLoading = React.useRef<boolean>(false);\n\n  const [searchText, setSearchText] = React.useState(defaultSearchText);\n  const filtersState = useFilters();\n\n  const fetchExtensionsAndFilters = React.useCallback(\n    () => {\n      // Don't attempt to load again resources and filters if they\n      // were loaded already.\n      if (extensionShortHeadersByName || isLoading.current) return;\n\n      (async () => {\n        setError(null);\n        isLoading.current = true;\n\n        try {\n          const extensionRegistry: ExtensionsRegistry = await getExtensionsRegistry();\n          const { extensionShortHeaders, allTags } = extensionRegistry;\n\n          const sortedTags = allTags\n            .slice()\n            .sort((tag1, tag2) =>\n              tag1.toLowerCase().localeCompare(tag2.toLowerCase())\n            );\n\n          const extensionShortHeadersByName = {};\n          extensionShortHeaders.forEach(extension => {\n            extensionShortHeadersByName[extension.name] = extension;\n          });\n\n          console.info(\n            `Loaded ${\n              extensionShortHeaders.length\n            } extensions from the extension store.`\n          );\n          setExtensionShortHeadersByName(extensionShortHeadersByName);\n          setFilters({\n            allTags: sortedTags,\n            defaultTags: sortedTags,\n            tagsTree: [],\n          });\n        } catch (error) {\n          console.error(\n            `Unable to load the extensions from the extension store:`,\n            error\n          );\n          setError(error);\n        }\n\n        isLoading.current = false;\n      })();\n    },\n    [extensionShortHeadersByName, isLoading]\n  );\n\n  React.useEffect(\n    () => {\n      // Don't attempt to load again extensions and filters if they\n      // were loaded already.\n      if (extensionShortHeadersByName || isLoading.current) return;\n\n      const timeoutId = setTimeout(() => {\n        console.info('Pre-fetching extensions from extension store...');\n        fetchExtensionsAndFilters();\n      }, 5000);\n      return () => clearTimeout(timeoutId);\n    },\n    [fetchExtensionsAndFilters, extensionShortHeadersByName, isLoading]\n  );\n\n  const { chosenCategory, chosenFilters } = filtersState;\n  const searchResults: ?Array<ExtensionShortHeader> = useSearchItem(\n    extensionShortHeadersByName,\n    getExtensionSearchTerms,\n    searchText,\n    chosenCategory,\n    chosenFilters\n  );\n\n  const extensionStoreState = React.useMemo(\n    () => ({\n      searchResults,\n      fetchExtensionsAndFilters,\n      filters,\n      error,\n      searchText,\n      setSearchText,\n      filtersState,\n    }),\n    [\n      searchResults,\n      error,\n      filters,\n      searchText,\n      filtersState,\n      fetchExtensionsAndFilters,\n    ]\n  );\n\n  return (\n    <ExtensionStoreContext.Provider value={extensionStoreState}>\n      {children}\n    </ExtensionStoreContext.Provider>\n  );\n};\n","// @flow\nimport * as React from 'react';\n\nexport type PublicProfileState = {\n  openUserPublicProfile: string => void,\n};\n\nconst initialPublicProfileState = {\n  openUserPublicProfile: (userId: string) => {},\n};\n\nconst PublicProfileContext = React.createContext<PublicProfileState>(\n  initialPublicProfileState\n);\n\nexport default PublicProfileContext;\n","// @flow\nimport { type I18n as I18nType } from '@lingui/core';\nimport { showErrorBox } from '../../UI/Messages/MessageBox';\nimport {\n  getExtension,\n  type ExtensionShortHeader,\n} from '../../Utils/GDevelopServices/Extension';\nimport { addSerializedExtensionsToProject } from '../InstallAsset';\nimport { type EventsFunctionsExtensionsState } from '../../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport { t } from '@lingui/macro';\nimport Window from '../../Utils/Window';\n\n/**\n * Download and add the extension in the project.\n */\nexport const installExtension = async (\n  i18n: I18nType,\n  project: gdProject,\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  extensionShortHeader: ExtensionShortHeader\n): Promise<boolean> => {\n  try {\n    const serializedExtension = await getExtension(extensionShortHeader);\n    await addSerializedExtensionsToProject(\n      eventsFunctionsExtensionsState,\n      project,\n      [serializedExtension]\n    );\n\n    return true;\n  } catch (rawError) {\n    showErrorBox({\n      message: i18n._(\n        t`Unable to download and install the extension. Verify that your internet connection is working or try again later.`\n      ),\n      rawError,\n      errorId: 'download-extension-error',\n    });\n    return false;\n  }\n};\n\n/**\n * Open a dialog to choose an extension and install it in the project.\n */\nexport const importExtension = async (\n  i18n: I18nType,\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  project: gdProject\n): Promise<boolean> => {\n  const eventsFunctionsExtensionOpener = eventsFunctionsExtensionsState.getEventsFunctionsExtensionOpener();\n  if (!eventsFunctionsExtensionOpener) return false;\n\n  try {\n    const pathOrUrl = await eventsFunctionsExtensionOpener.chooseEventsFunctionExtensionFile();\n    if (!pathOrUrl) return false;\n\n    const serializedExtension = await eventsFunctionsExtensionOpener.readEventsFunctionExtensionFile(\n      pathOrUrl\n    );\n\n    if (project.hasEventsFunctionsExtensionNamed(serializedExtension.name)) {\n      const answer = Window.showConfirmDialog(\n        i18n._(\n          t`An extension with this name already exists in the project. Importing this extension will replace it: are you sure you want to continue?`\n        )\n      );\n      if (!answer) return false;\n    }\n\n    await addSerializedExtensionsToProject(\n      eventsFunctionsExtensionsState,\n      project,\n      [serializedExtension]\n    );\n    return true;\n  } catch (rawError) {\n    showErrorBox({\n      message: i18n._(\n        t`An error happened while loading this extension. Please check that it is a proper extension file and compatible with this version of GDevelop`\n      ),\n      rawError,\n      errorId: 'extension-loading-error',\n    });\n    return false;\n  }\n};\n","// @flow\nimport {\n  type Asset,\n  type AssetShortHeader,\n  getAsset,\n} from '../Utils/GDevelopServices/Asset';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { unserializeFromJSObject } from '../Utils/Serializer';\nimport flatten from 'lodash/flatten';\nimport uniqBy from 'lodash/uniqBy';\nimport uniq from 'lodash/uniq';\nimport {\n  getExtensionsRegistry,\n  getExtension,\n  type SerializedExtension,\n} from '../Utils/GDevelopServices/Extension';\nimport { type EventsFunctionsExtensionsState } from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport { mapVector } from '../Utils/MapFor';\nimport { toNewGdMapStringString } from '../Utils/MapStringString';\nconst gd: libGDevelop = global.gd;\n\nconst toPascalCase = (str: string) => {\n  if (!str) return '';\n  return str\n    .replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g, '$')\n    .replace(/[^A-Za-z0-9]+/g, '$')\n    .replace(/([a-z])([A-Z])/g, function(m, a, b) {\n      return a + '$' + b;\n    })\n    .toLowerCase()\n    .replace(/(\\$)(\\w?)/g, function(m, a, b) {\n      return b.toUpperCase();\n    });\n};\n\nexport const sanitizeObjectName = (objectName: string) => {\n  const trimmedObjectName = objectName.trim();\n  if (!trimmedObjectName) return 'UnnamedObject';\n\n  const pascalCaseName = toPascalCase(trimmedObjectName);\n\n  let prefixedObjectName = pascalCaseName;\n  if (prefixedObjectName[0] >= '0' && prefixedObjectName[0] <= '9') {\n    prefixedObjectName = '_' + prefixedObjectName;\n  }\n\n  return prefixedObjectName;\n};\n\n/**\n * Adds the specified resource to the resources manager, avoiding to duplicate\n * if it was already added.\n */\nexport const installResource = (\n  project: gdProject,\n  serializedResource: any,\n  resourceNewNames: { [string]: string }\n) => {\n  const originalResourceName: string = serializedResource.name;\n\n  if (resourceNewNames[originalResourceName]) {\n    // The resource was already added previously - don't\n    // bother adding it again.\n    return;\n  }\n\n  const resourcesManager: gdResourcesManager = project.getResourcesManager();\n\n  // Check if the resource that must be installed is already present. Use the \"origin\"\n  // of the resource (if present), otherwise for compatibility we use the URL.\n  const resourceFileUrl: string = serializedResource.file;\n  const resourceOriginName: string = serializedResource.origin\n    ? serializedResource.origin.name\n    : '';\n  const resourceOriginIdentifier: string = serializedResource.origin\n    ? serializedResource.origin.identifier\n    : '';\n  const existingResourceNameFromSameOrigin =\n    resourceOriginName && resourceOriginIdentifier\n      ? resourcesManager.getResourceNameWithOrigin(\n          resourceOriginName,\n          resourceOriginIdentifier\n        )\n      : '';\n  const existingResourceNameWithSameFile = resourcesManager.getResourceNameWithFile(\n    resourceFileUrl\n  );\n\n  if (existingResourceNameFromSameOrigin) {\n    // There is a resource with the same origin, use it.\n    resourceNewNames[originalResourceName] = existingResourceNameFromSameOrigin;\n    return;\n  } else if (existingResourceNameWithSameFile) {\n    // For compatibility with resources without origins, also check the file directly.\n    resourceNewNames[originalResourceName] = existingResourceNameWithSameFile;\n    return;\n  }\n\n  // The resource does not exist yet, add it. Note that the \"origin\" will be preserved.\n  let newResource = null;\n  if (serializedResource.kind === 'image') {\n    newResource = new gd.ImageResource();\n  } else {\n    throw new Error(\n      `Resource of kind \"${serializedResource.kind}\" is not supported.`\n    );\n  }\n\n  unserializeFromJSObject(newResource, serializedResource);\n\n  const newName = newNameGenerator(originalResourceName, name =>\n    resourcesManager.hasResource(name)\n  );\n  newResource.setName(newName);\n  newResource.setSmooth(project.getScaleMode() !== 'nearest');\n  newResource.setOrigin(resourceOriginName, resourceOriginIdentifier);\n  resourcesManager.addResource(newResource);\n  newResource.delete();\n\n  resourceNewNames[originalResourceName] = newName;\n};\n\nexport const addAssetToProject = async ({\n  asset,\n  project,\n  events,\n  objectsContainer,\n}: {|\n  asset: Asset,\n  project: gdProject,\n  events: gdEventsList,\n  objectsContainer: gdObjectsContainer,\n|}) => {\n  const objectNewNames = {};\n  const resourceNewNames = {};\n  const createdObjects: Array<gdObject> = [];\n\n  asset.objectAssets.forEach(objectAsset => {\n    objectAsset.resources.forEach(serializedResource => {});\n  });\n\n  // Create objects (and their behaviors)\n  asset.objectAssets.forEach(objectAsset => {\n    const type: ?string = objectAsset.object.type;\n    if (!type) throw new Error('An object has no type specified');\n\n    // Insert the object\n    const originalName = sanitizeObjectName(objectAsset.object.name);\n    const newName = newNameGenerator(originalName, name =>\n      objectsContainer.hasObjectNamed(name)\n    );\n    const object = objectsContainer.insertNewObject(\n      project,\n      type,\n      newName,\n      objectsContainer.getObjectsCount()\n    );\n    objectNewNames[originalName] = newName;\n\n    unserializeFromJSObject(\n      object,\n      objectAsset.object,\n      'unserializeFrom',\n      project\n    );\n\n    // The name was overwritten after unserialization.\n    object.setName(newName);\n\n    // Add resources used by the object\n    objectAsset.resources.forEach(serializedResource => {\n      installResource(project, serializedResource, resourceNewNames);\n    });\n\n    // TODO: Check how multiple objects are handled\n\n    // Resources may have been renamed to be added to the project.\n    // In this case, rename them in the object.\n    const renamedResourcesMap = toNewGdMapStringString(resourceNewNames);\n    const resourcesRenamer = new gd.ResourcesRenamer(renamedResourcesMap);\n    renamedResourcesMap.delete();\n    object.exposeResources(resourcesRenamer);\n    resourcesRenamer.delete();\n\n    objectAsset.customization.forEach(customization => {\n      if (customization.behaviorName) {\n        const { behaviorName, behaviorType } = customization;\n\n        const behaviorMetadata = gd.MetadataProvider.getBehaviorMetadata(\n          gd.JsPlatform.get(),\n          behaviorType\n        );\n        if (gd.MetadataProvider.isBadBehaviorMetadata(behaviorMetadata)) {\n          throw new Error(\n            'Behavior with type ' + behaviorType + ' could not be found.'\n          );\n        }\n\n        const behavior = behaviorMetadata.get();\n        // TODO: When this feature is exposed to users, we might want to use\n        // gd.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors instead.\n        const behaviorContent = object.addNewBehavior(\n          project,\n          behaviorType,\n          behaviorName\n        );\n        customization.properties.forEach(property => {\n          behavior.updateProperty(\n            behaviorContent.getContent(),\n            property.name,\n            property.defaultValue\n          );\n        });\n      }\n    });\n\n    createdObjects.push(object);\n  });\n\n  // Add the events after adding all objects, as we need to potentially\n  // rename the objects in the inserted events.\n  asset.objectAssets.forEach(objectAsset => {\n    const originalName = objectAsset.object.name;\n    const newName = objectNewNames[originalName];\n\n    objectAsset.customization.forEach(customization => {\n      if (customization.events) {\n        const groupEvent = new gd.GroupEvent();\n        groupEvent.setName(newName);\n\n        unserializeFromJSObject(\n          groupEvent.getSubEvents(),\n          customization.events,\n          'unserializeFrom',\n          project\n        );\n\n        // Find/replace the customization parameters in the events.\n        customization.parameters.forEach(parameter => {\n          gd.EventsRefactorer.replaceStringInEvents(\n            project,\n            objectsContainer,\n            groupEvent.getSubEvents(),\n            parameter.name,\n            parameter.defaultValue,\n            true,\n            true,\n            true\n          );\n        });\n\n        // Rename any object that was renamed when inserted.\n        // Do this **after** replacing the customization parameters,\n        // as some expressions can be invalid before customization\n        // parameters replacements.\n        for (const originalName in objectNewNames) {\n          const newName = objectNewNames[originalName];\n          if (originalName !== newName) {\n            gd.EventsRefactorer.renameObjectInEvents(\n              project.getCurrentPlatform(),\n              project,\n              objectsContainer,\n              groupEvent.getSubEvents(),\n              originalName,\n              newName\n            );\n          }\n        }\n\n        events.insertEvent(groupEvent, events.getEventsCount());\n      }\n    });\n  });\n\n  return {\n    createdObjects,\n  };\n};\n\ntype RequiredBehavior = {|\n  extensionName: string,\n  extensionVersion: string,\n  behaviorType: string,\n|};\n\nexport const getRequiredBehaviorsFromAsset = (\n  asset: Asset\n): Array<RequiredBehavior> => {\n  return uniqBy(\n    flatten(\n      asset.objectAssets.map(objectAsset => {\n        return objectAsset.customization\n          .map(customization => {\n            if (customization.behaviorName) {\n              const {\n                behaviorType,\n                extensionName,\n                extensionVersion,\n              } = customization;\n              return { behaviorType, extensionName, extensionVersion };\n            }\n\n            return null;\n          })\n          .filter(Boolean);\n      })\n    ),\n    ({ behaviorType }) => behaviorType // TODO: Verify if we could use the extension name instead?\n  );\n};\n\ntype RequiredExtension = {|\n  extensionName: string,\n  extensionVersion: string,\n|};\n\nexport const filterMissingExtensions = (\n  gd: libGDevelop,\n  requiredExtensions: Array<RequiredExtension>\n): Array<RequiredExtension> => {\n  const loadedExtensionNames = mapVector(\n    gd.asPlatform(gd.JsPlatform.get()).getAllPlatformExtensions(),\n    extension => {\n      return extension.getName();\n    }\n  );\n\n  return requiredExtensions.filter(({ extensionName }) => {\n    return !loadedExtensionNames.includes(extensionName);\n  });\n};\n\nexport const getRequiredExtensionsForEventsFromAsset = (\n  asset: Asset\n): Array<RequiredExtension> => {\n  return uniqBy(\n    flatten(\n      asset.objectAssets.map(objectAsset => {\n        return flatten(\n          objectAsset.customization\n            .map(customization => {\n              if (customization.events) {\n                return customization.extensions;\n              }\n\n              return null;\n            })\n            .filter(Boolean)\n        );\n      })\n    ),\n    ({ extensionName }) => extensionName\n  );\n};\n\nexport const filterMissingBehaviors = (\n  gd: libGDevelop,\n  requiredBehaviors: Array<RequiredBehavior>\n): Array<RequiredBehavior> => {\n  return requiredBehaviors.filter(({ behaviorType }) => {\n    const behaviorMetadata = gd.MetadataProvider.getBehaviorMetadata(\n      gd.JsPlatform.get(),\n      behaviorType\n    );\n    return gd.MetadataProvider.isBadBehaviorMetadata(behaviorMetadata);\n  });\n};\n\nexport const downloadExtensions = async (\n  extensionNames: Array<string>\n): Promise<Array<SerializedExtension>> => {\n  if (!extensionNames.length) return Promise.resolve([]);\n\n  const extensionsRegistry = await getExtensionsRegistry();\n\n  const serializedExtensions = await Promise.all(\n    uniq(extensionNames).map(extensionName => {\n      const extensionShortHeader = extensionsRegistry.extensionShortHeaders.find(\n        extensionShortHeader => {\n          return extensionShortHeader.name === extensionName;\n        }\n      );\n      if (!extensionShortHeader) {\n        throw new Error(\n          'Unable to find extension ' + extensionName + ' in the registry.'\n        );\n      }\n\n      return getExtension(extensionShortHeader);\n    })\n  );\n\n  return serializedExtensions;\n};\n\n/**\n * Add a serialized (JS object) events function extension to the project,\n * triggering reload of extensions.\n */\nexport const addSerializedExtensionsToProject = (\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  project: gdProject,\n  serializedExtensions: Array<SerializedExtension>\n): Promise<void> => {\n  serializedExtensions.forEach(serializedExtension => {\n    const { name } = serializedExtension;\n    if (!name)\n      return Promise.reject(new Error('Malformed extension (missing name).'));\n\n    const newEventsFunctionsExtension = project.hasEventsFunctionsExtensionNamed(\n      name\n    )\n      ? project.getEventsFunctionsExtension(name)\n      : project.insertNewEventsFunctionsExtension(name, 0);\n\n    unserializeFromJSObject(\n      newEventsFunctionsExtension,\n      serializedExtension,\n      'unserializeFrom',\n      project\n    );\n  });\n\n  return eventsFunctionsExtensionsState.loadProjectEventsFunctionsExtensions(\n    project\n  );\n};\n\ntype InstallAssetArgs = {|\n  assetShortHeader: AssetShortHeader,\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  project: gdProject,\n  events: gdEventsList,\n  objectsContainer: gdObjectsContainer,\n|};\n\ntype InstallAssetOutput = {|\n  createdObjects: Array<gdObject>,\n|};\n\nexport const installAsset = async ({\n  assetShortHeader,\n  eventsFunctionsExtensionsState,\n  project,\n  events,\n  objectsContainer,\n}: InstallAssetArgs): Promise<InstallAssetOutput> => {\n  const asset = await getAsset(assetShortHeader);\n  const requiredBehaviors = getRequiredBehaviorsFromAsset(asset);\n  const requiredExtensions = getRequiredExtensionsForEventsFromAsset(asset);\n  const missingBehaviors = filterMissingBehaviors(gd, requiredBehaviors);\n  const missingExtensions = filterMissingExtensions(gd, requiredExtensions);\n  const serializedExtensions = await downloadExtensions([\n    ...missingBehaviors.map(({ extensionName }) => extensionName),\n    ...missingExtensions.map(({ extensionName }) => extensionName),\n  ]);\n  await addSerializedExtensionsToProject(\n    eventsFunctionsExtensionsState,\n    project,\n    serializedExtensions\n  );\n\n  const stillMissingBehaviors = filterMissingBehaviors(gd, requiredBehaviors);\n  if (stillMissingBehaviors.length) {\n    throw new Error(\n      'These behaviors could not be installed: ' +\n        missingBehaviors\n          .map(\n            ({ extensionName, behaviorType }) =>\n              `${behaviorType} (${extensionName})`\n          )\n          .join(', ')\n    );\n  }\n\n  const stillMissingExtensions = filterMissingExtensions(\n    gd,\n    requiredExtensions\n  );\n  if (stillMissingExtensions.length) {\n    throw new Error(\n      'These extensions could not be installed: ' +\n        missingExtensions.map(({ extensionName }) => extensionName).join(', ')\n    );\n  }\n\n  const output = await addAssetToProject({\n    project,\n    asset,\n    events,\n    objectsContainer,\n  });\n  return output;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport TextField from '../UI/TextField';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport ColorField from '../UI/ColorField';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport PropertiesEditor from '../PropertiesEditor';\nimport propertiesMapToSchema from '../PropertiesEditor/PropertiesMapToSchema';\nimport some from 'lodash/some';\nimport Checkbox from '../UI/Checkbox';\nimport { isNullPtr } from '../Utils/IsNullPtr';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport {\n  rgbColorToRGBString,\n  rgbStringAndAlphaToRGBColor,\n  type RGBColor,\n} from '../Utils/ColorTransformer';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  open: boolean,\n  layout: gdLayout,\n  project: gdProject,\n  onApply: () => void,\n  onClose: () => void,\n  onOpenMoreSettings?: ?() => void,\n  onEditVariables: () => void,\n|};\n\ntype State = {|\n  windowTitle: string,\n  shouldStopSoundsOnStartup: boolean,\n  backgroundColor: ?RGBColor,\n|};\n\nexport default class ScenePropertiesDialog extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = this._loadFrom(props.layout);\n  }\n\n  _loadFrom(layout: gdLayout): State {\n    return {\n      windowTitle: layout.getWindowDefaultTitle(),\n      shouldStopSoundsOnStartup: layout.stopSoundsOnStartup(),\n      backgroundColor: {\n        r: layout.getBackgroundColorRed(),\n        g: layout.getBackgroundColorGreen(),\n        b: layout.getBackgroundColorBlue(),\n        a: 1,\n      },\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.layout !== newProps.layout)\n    ) {\n      this.setState(this._loadFrom(newProps.layout));\n    }\n  }\n\n  _onApply = () => {\n    this.props.layout.setWindowDefaultTitle(this.state.windowTitle);\n    this.props.layout.setStopSoundsOnStartup(\n      this.state.shouldStopSoundsOnStartup\n    );\n    this.props.layout.setBackgroundColor(\n      this.state.backgroundColor ? this.state.backgroundColor.r : 0,\n      this.state.backgroundColor ? this.state.backgroundColor.g : 0,\n      this.state.backgroundColor ? this.state.backgroundColor.b : 0\n    );\n    this.props.onApply();\n  };\n\n  render() {\n    const { layout } = this.props;\n    const actions = [\n      // TODO: Add support for cancelling modifications made to BehaviorSharedData\n      // (either by enhancing a function like propertiesMapToSchema or using copies)\n      // and then re-enable cancel button.\n      // <FlatButton\n      //   label={<Trans>Cancel</Trans>}\n      //   primary={false}\n      //   onClick={this.props.onClose}\n      // />,\n      <FlatButton\n        label={<Trans>Ok</Trans>}\n        key=\"ok\"\n        primary={true}\n        keyboardFocused={true}\n        onClick={this._onApply}\n      />,\n    ];\n\n    const allBehaviorSharedDataNames = layout\n      .getAllBehaviorSharedDataNames()\n      .toJSArray();\n\n    const propertiesEditors = allBehaviorSharedDataNames\n      .map(name => {\n        const sharedDataContent = layout.getBehaviorSharedData(name);\n        const type = sharedDataContent.getTypeName();\n\n        const behaviorMetadata = gd.MetadataProvider.getBehaviorMetadata(\n          gd.JsPlatform.get(),\n          type\n        );\n        if (gd.MetadataProvider.isBadBehaviorMetadata(behaviorMetadata))\n          return null;\n\n        const behaviorSharedData = behaviorMetadata.getSharedDataInstance();\n        if (isNullPtr(gd, behaviorSharedData)) return null;\n\n        const properties = behaviorSharedData.getProperties(\n          sharedDataContent.getContent()\n        );\n        const propertiesSchema = propertiesMapToSchema(\n          properties,\n          sharedDataContent =>\n            behaviorSharedData.getProperties(sharedDataContent.getContent()),\n          (sharedDataContent, name, value) => {\n            behaviorSharedData.updateProperty(\n              sharedDataContent.getContent(),\n              name,\n              value\n            );\n          }\n        );\n\n        return (\n          !!propertiesSchema.length && (\n            <PropertiesEditor\n              key={name}\n              schema={propertiesSchema}\n              instances={[sharedDataContent]}\n            />\n          )\n        );\n      })\n      .filter(Boolean);\n\n    return (\n      <Dialog\n        title={<Trans>Scene properties</Trans>}\n        actions={actions}\n        secondaryActions={\n          <RaisedButton\n            label={<Trans>Edit scene variables</Trans>}\n            fullWidth\n            onClick={() => {\n              this.props.onEditVariables();\n              this.props.onClose();\n            }}\n          />\n        }\n        open={this.props.open}\n        cannotBeDismissed={true}\n        onRequestClose={this.props.onClose}\n        maxWidth=\"sm\"\n      >\n        <ColumnStackLayout expand noMargin>\n          <TextField\n            floatingLabelText={<Trans>Window title</Trans>}\n            fullWidth\n            type=\"text\"\n            value={this.state.windowTitle}\n            onChange={(e, value) => this.setState({ windowTitle: value })}\n          />\n          <Checkbox\n            checked={this.state.shouldStopSoundsOnStartup}\n            label={<Trans>Stop music and sounds on startup</Trans>}\n            onCheck={(e, check) =>\n              this.setState({\n                shouldStopSoundsOnStartup: check,\n              })\n            }\n          />\n          <ColorField\n            floatingLabelText={<Trans>Scene background color</Trans>}\n            fullWidth\n            disableAlpha\n            color={rgbColorToRGBString(this.state.backgroundColor)}\n            onChange={color =>\n              this.setState({\n                backgroundColor: rgbStringAndAlphaToRGBColor(color),\n              })\n            }\n          />\n          {!some(propertiesEditors) && (\n            <EmptyMessage>\n              <Trans>\n                Any additional properties will appear here if you add behaviors\n                to objects, like Physics behavior.\n              </Trans>\n            </EmptyMessage>\n          )}\n          {propertiesEditors}\n          {this.props.onOpenMoreSettings && (\n            <RaisedButton\n              label={<Trans>Open advanced settings</Trans>}\n              fullWidth\n              onClick={() => {\n                if (this.props.onOpenMoreSettings)\n                  this.props.onOpenMoreSettings();\n                this.props.onClose();\n              }}\n            />\n          )}\n        </ColumnStackLayout>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\nimport { type HotReloadPreviewButtonProps } from '../HotReload/HotReloadPreviewButton';\nimport EventsRootVariablesFinder from '../Utils/EventsRootVariablesFinder';\n\ntype Props = {|\n  open: boolean,\n  project: gdProject,\n  layout: gdLayout,\n  onApply: () => void,\n  onClose: () => void,\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n|};\n\nexport default (props: Props) => {\n  return (\n    <VariablesEditorDialog\n      open={props.open}\n      variablesContainer={props.layout.getVariables()}\n      onCancel={props.onClose}\n      onApply={props.onApply}\n      title={<Trans>Scene Variables</Trans>}\n      emptyExplanationMessage={\n        <Trans>\n          Scene variables can be used to store any value or text during the\n          game.\n        </Trans>\n      }\n      emptyExplanationSecondMessage={\n        <Trans>\n          For example, you can have a variable called Score representing the\n          current score of the player.\n        </Trans>\n      }\n      helpPagePath={'/all-features/variables/scene-variables'}\n      hotReloadPreviewButtonProps={props.hotReloadPreviewButtonProps}\n      onComputeAllVariableNames={() =>\n        EventsRootVariablesFinder.findAllLayoutVariables(\n          props.project.getCurrentPlatform(),\n          props.project,\n          props.layout\n        )\n      }\n    />\n  );\n};\n","//@flow\nexport function isExtensionNameTaken(\n  name: string,\n  project: gdProject\n): boolean {\n  const allExtensions = project.getCurrentPlatform().getAllPlatformExtensions();\n  for (let i = 0; i < allExtensions.size(); i++) {\n    if (allExtensions.at(i).getName() === name) return true;\n  }\n  return project.hasEventsFunctionsExtensionNamed(name);\n}\n","// @flow\nimport { type CommandName } from './CommandsList';\n\ntype CommandHandler = () => void | Promise<void>;\n\nexport type SimpleCommand = {|\n  handler: CommandHandler,\n|};\n\nexport type CommandOption = {|\n  handler: CommandHandler,\n  text: string,\n  iconSrc?: string,\n|};\n\nexport type CommandWithOptions = {|\n  generateOptions: () => Array<CommandOption>,\n|};\n\nexport type Command = SimpleCommand | CommandWithOptions;\n\nexport type NamedCommand = {|\n  name: CommandName,\n  ...Command,\n|};\n\nexport type NamedCommandWithOptions = {|\n  name: CommandName,\n  ...CommandWithOptions,\n|};\n\nexport interface CommandManagerInterface {\n  registerCommand: (commandName: CommandName, command: Command) => void;\n  deregisterCommand: (commandName: CommandName) => void;\n  getNamedCommand: (commandName: CommandName) => ?NamedCommand;\n  getAllNamedCommands: () => Array<NamedCommand>;\n}\n\nexport default class CommandManager implements CommandManagerInterface {\n  _commands: { [CommandName]: Command };\n\n  constructor() {\n    this._commands = {};\n  }\n\n  registerCommand = (commandName: CommandName, command: Command) => {\n    if (this._commands[commandName])\n      return console.warn(\n        `Tried to register command ${commandName}, but it is already registered.`\n      );\n    this._commands[commandName] = command;\n  };\n\n  deregisterCommand = (commandName: CommandName) => {\n    if (!this._commands[commandName])\n      return console.warn(\n        `Tried to deregister command ${commandName}, but it is not registered.`\n      );\n    delete this._commands[commandName];\n  };\n\n  getNamedCommand = (commandName: CommandName) => {\n    const command = this._commands[commandName];\n    if (command) return { name: commandName, ...(command: Command) };\n    return null;\n  };\n\n  getAllNamedCommands = () => {\n    return Object.keys(this._commands).map<NamedCommand>(commandName => {\n      const command = this._commands[commandName];\n      return { ...(command: Command), name: commandName };\n    });\n  };\n}\n","// @flow\nimport { useRef } from 'react';\n\nconst useRefInit = <T>(init: () => T): T => {\n  const instanceRef = useRef(null);\n\n  let instance = instanceRef.current;\n  if (instance !== null) return instance;\n  // Lazily create the ref object\n  let newInstance = init();\n  instanceRef.current = newInstance;\n  return newInstance;\n};\n\nexport default useRefInit;\n","// @flow\nimport * as React from 'react';\nimport EventsSheet, { type EventsSheetInterface } from '../../EventsSheet';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\n\nexport class EventsEditorContainer extends React.Component<RenderEditorContainerProps> {\n  editor: ?EventsSheetInterface;\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // Prevent any update to the editor if the editor is not active,\n    // and so not visible to the user.\n    return nextProps.isActive;\n  }\n\n  componentDidMount() {\n    if (this.props.isActive) {\n      const layout = this.getLayout();\n      this.props.setPreviewedLayout(layout ? layout.getName() : null);\n    }\n  }\n\n  componentDidUpdate(prevProps: RenderEditorContainerProps) {\n    if (!prevProps.isActive && this.props.isActive) {\n      const layout = this.getLayout();\n      this.props.setPreviewedLayout(layout ? layout.getName() : null);\n    }\n  }\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  getLayout(): ?gdLayout {\n    const { project, projectItemName } = this.props;\n    if (\n      !project ||\n      !projectItemName ||\n      !project.hasLayoutNamed(projectItemName)\n    )\n      return null;\n\n    return project.getLayout(projectItemName);\n  }\n\n  render() {\n    const { project, projectItemName } = this.props;\n    const layout = this.getLayout();\n    if (!layout || !project) {\n      //TODO: Error component\n      return <div>No layout called {projectItemName} found!</div>;\n    }\n\n    return (\n      <EventsSheet\n        ref={editor => (this.editor = editor)}\n        setToolbar={this.props.setToolbar}\n        onOpenLayout={this.props.onOpenLayout}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        openInstructionOrExpression={this.props.openInstructionOrExpression}\n        onCreateEventsFunction={this.props.onCreateEventsFunction}\n        unsavedChanges={this.props.unsavedChanges}\n        project={project}\n        scope={{\n          layout,\n        }}\n        globalObjectsContainer={project}\n        objectsContainer={layout}\n        events={layout.getEvents()}\n        onOpenExternalEvents={this.props.onOpenExternalEvents}\n      />\n    );\n  }\n}\n\nexport const renderEventsEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <EventsEditorContainer {...props} />;\n","// @flow\nimport * as React from 'react';\nimport { dropIndicator, cantDropIndicator } from './ClassNames';\n\n/**\n * A Drop indicator line for the events sheet\n */\nexport default function DropIndicator({ canDrop }: {| canDrop: boolean |}) {\n  return <div className={canDrop ? dropIndicator : cantDropIndicator} />;\n}\n","// @flow\nimport * as React from 'react';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\n\nexport default class DefaultField extends React.Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?any = null;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <SemiControlledTextField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        commitOnBlur\n        value={this.props.value}\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        onChange={(text: string) => this.props.onChange(text)}\n        ref={field => (this._field = field)}\n        fullWidth\n      />\n    );\n  }\n}\n\nexport const renderInlineDefaultField = ({\n  value,\n  parameterMetadata,\n  MissingParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value && !parameterMetadata.isOptional()) {\n    return <MissingParameterValue />;\n  }\n\n  return value;\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { enumerateObjectsAndGroups } from './EnumerateObjects';\nimport SemiControlledAutoComplete, {\n  type DataSource,\n  type SemiControlledAutoCompleteInterface,\n} from '../UI/SemiControlledAutoComplete';\nimport ListIcon from '../UI/ListIcon';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\ntype Props = {|\n  project: ?gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  allowedObjectType?: ?string,\n  noGroups?: boolean,\n\n  onChoose?: string => void,\n  onChange: string => void,\n  onRequestClose?: () => void,\n  onApply?: () => void,\n  value: string,\n  errorTextIfInvalid?: React.Node,\n\n  fullWidth?: boolean,\n  floatingLabelText?: React.Node,\n  helperMarkdownText?: ?string,\n  hintText?: MessageDescriptor | string,\n  openOnFocus?: boolean,\n  margin?: 'none' | 'dense',\n|};\n\nconst iconSize = 24;\n\nconst getObjectsAndGroupsDataSource = ({\n  project,\n  globalObjectsContainer,\n  objectsContainer,\n  noGroups,\n  allowedObjectType,\n}: {|\n  project: ?gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  noGroups: ?boolean,\n  allowedObjectType: ?string,\n|}): DataSource => {\n  const list = enumerateObjectsAndGroups(\n    globalObjectsContainer,\n    objectsContainer,\n    allowedObjectType || undefined\n  );\n  const objects = list.allObjectsList.map(({ object }) => {\n    return {\n      text: object.getName(),\n      value: object.getName(),\n      renderIcon: project\n        ? () => (\n            <ListIcon\n              iconSize={iconSize}\n              src={ObjectsRenderingService.getThumbnail(project, object)}\n            />\n          )\n        : undefined,\n    };\n  });\n  const groups = noGroups\n    ? []\n    : list.allGroupsList.map(({ group }) => {\n        return {\n          text: group.getName(),\n          value: group.getName(),\n        };\n      });\n\n  return [...objects, { type: 'separator' }, ...groups];\n};\n\nexport default class ObjectSelector extends React.Component<Props, {||}> {\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  // Don't add a componentWillUnmount that would call onChange. This can lead to\n  // calling callbacks that would then update a deleted instruction parameters.\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      onChoose,\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      allowedObjectType,\n      noGroups,\n      errorTextIfInvalid,\n      margin,\n      onRequestClose,\n      onApply,\n      ...rest\n    } = this.props;\n\n    const objectAndGroups = getObjectsAndGroupsDataSource({\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      noGroups,\n      allowedObjectType,\n    });\n    const hasValidChoice =\n      objectAndGroups.filter(\n        choice => choice.text !== undefined && value === choice.text\n      ).length !== 0;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={margin}\n        hintText={t`Choose an object`}\n        value={value}\n        onChange={onChange}\n        onChoose={onChoose}\n        onRequestClose={onRequestClose}\n        onApply={onApply}\n        dataSource={objectAndGroups}\n        errorText={hasValidChoice ? undefined : errorTextIfInvalid}\n        ref={field => (this._field = field)}\n        {...rest}\n      />\n    );\n  }\n}\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\n\n/**\n * Create a renderer for an type of object displayed as an icon\n *\n * @extends RenderedInstance\n * @class RenderedIconInstance\n * @constructor\n */\nexport default function makeRenderer(iconPath) {\n  class RenderedIconInstance extends RenderedInstance {\n    constructor(\n      project,\n      layout,\n      instance,\n      associatedObject,\n      pixiContainer,\n      pixiResourcesLoader\n    ) {\n      super(\n        project,\n        layout,\n        instance,\n        associatedObject,\n        pixiContainer,\n        pixiResourcesLoader\n      );\n\n      this._pixiObject = new PIXI.Sprite(PIXI.Texture.from(iconPath));\n      this._pixiContainer.addChild(this._pixiObject);\n    }\n\n    update() {\n      this._pixiObject.position.x = this._instance.getX();\n      this._pixiObject.position.y = this._instance.getY();\n      this._pixiObject.rotation = (this._instance.getAngle() * Math.PI) / 180.0;\n    }\n\n    static getThumbnail(project, resourcesLoader, object) {\n      return iconPath;\n    }\n  }\n\n  return RenderedIconInstance;\n}\n","// @flow\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\n\nexport type ParameterRenderingServiceType = {\n  components: any,\n  getParameterComponent: (type: string) => any,\n  getUserFriendlyTypeName: (rawType: string) => ?MessageDescriptor,\n};\n\ntype CommonProps = {|\n  // The parameter\n  parameterMetadata?: gdParameterMetadata,\n  onChange: string => void,\n  value: string,\n\n  // Context\n  project?: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  isInline?: boolean,\n  onRequestClose?: () => void,\n  onApply?: () => void,\n  resourceSources?: Array<ResourceSource>,\n  onChooseResource?: ChooseResourceFunction,\n  resourceExternalEditors?: Array<ResourceExternalEditor>,\n\n  // Pass the ParameterRenderingService to allow to render nested parameters\n  parameterRenderingService?: ParameterRenderingServiceType,\n|};\n\nexport type ExpressionParameters = {|\n  getParametersCount: () => number,\n  getParameter: (index: number) => string,\n|};\n\nexport type ParameterFieldProps = {|\n  ...CommonProps,\n\n  // Instruction in which the parameter is.\n  instruction?: gdInstruction,\n  // Metadata of the instruction in which the parameter is.\n  instructionMetadata?: gdInstructionMetadata,\n  // Expression in which the parameter is.\n  expression?: ExpressionParameters,\n  // Metadata of the instruction in which the parameter is.\n  expressionMetadata?: gdExpressionMetadata,\n\n  // The index of the parameter in the instruction or expression.\n  parameterIndex?: number,\n|};\n\nexport type ParameterFieldInterface = {|\n  focus: () => void,\n|};\n\nexport const getParameterValueOrDefault = (\n  value: string,\n  parameterMetadata: ?gdParameterMetadata\n) => {\n  if (value) return value;\n\n  const defaultValue =\n    parameterMetadata && parameterMetadata.isOptional()\n      ? parameterMetadata.getDefaultValue()\n      : '';\n  return defaultValue;\n};\n","// @flow\nimport {\n  type EnumeratedExpressionMetadata,\n  type InstructionOrExpressionScope,\n} from './EnumeratedInstructionOrExpressionMetadata.js';\nimport { mapVector } from '../Utils/MapFor';\nimport flatten from 'lodash/flatten';\nconst gd: libGDevelop = global.gd;\n\nconst GROUP_DELIMITER = '/';\n\n// Support enumerate expressions that can be string, number or both (\"number|string\").\n// \"number|string\" has limited support in the codebase, enough to be used in expressions but not\n// in parameters and this is not a generic feature (you can't do \"string|variable\" or this kind of things).\n// This may be improved in the future if really necessary.\nconst isPotentiallyStringType = (type: string) =>\n  type === 'string' || type === 'number|string';\nconst isPotentiallyNumberType = (type: string) =>\n  type === 'number' || type === 'number|string';\n\nconst getExtensionPrefix = (extension: gdPlatformExtension): string => {\n  const allObjectsTypes = extension.getExtensionObjectsTypes();\n  const allBehaviorsTypes = extension.getBehaviorsTypes();\n\n  if (allObjectsTypes.size() > 0 || allBehaviorsTypes.size() > 0) {\n    return (\n      (extension.getName() === 'BuiltinObject'\n        ? 'Common expressions for all objects'\n        : extension.getFullName()) + GROUP_DELIMITER\n    );\n  }\n\n  return '';\n};\n\nconst enumerateExpressionMetadataMap = (\n  prefix: string,\n  expressions: gdMapStringExpressionMetadata,\n  scope: InstructionOrExpressionScope\n): Array<EnumeratedExpressionMetadata> => {\n  return mapVector(expressions.keys(), expressionType => {\n    const exprMetadata = expressions.get(expressionType);\n    if (!exprMetadata.isShown()) {\n      return null; // Skip hidden expressions\n    }\n\n    var parameters = [];\n    for (var i = 0; i < exprMetadata.getParametersCount(); i++) {\n      if (scope.objectMetadata && i === 0) continue;\n      if (scope.behaviorMetadata && i <= 1) continue; //Skip object and behavior parameters\n      if (exprMetadata.getParameter(i).isCodeOnly()) continue;\n\n      parameters.push(exprMetadata.getParameter(i));\n    }\n\n    return {\n      type: expressionType,\n      name: expressionType,\n      displayedName: exprMetadata.getFullName(),\n      fullGroupName: prefix + exprMetadata.getGroup(),\n      iconFilename: exprMetadata.getSmallIconFilename(),\n      metadata: exprMetadata,\n      parameters: parameters,\n      scope,\n      isPrivate: exprMetadata.isPrivate(),\n    };\n  }).filter(Boolean);\n};\n\n/** Enumerate all the free expressions available. */\nexport const enumerateFreeExpressions = (\n  type: string\n): Array<EnumeratedExpressionMetadata> => {\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  const returnNumber = isPotentiallyNumberType(type);\n  const returnString = isPotentiallyStringType(type);\n\n  return flatten(\n    mapVector(allExtensions, extension => {\n      const prefix = getExtensionPrefix(extension);\n      const scope = {\n        extension,\n        objectMetadata: undefined,\n        behaviorMetadata: undefined,\n      };\n\n      return [\n        ...(returnString\n          ? enumerateExpressionMetadataMap(\n              prefix,\n              extension.getAllStrExpressions(),\n              scope\n            )\n          : []),\n        ...(returnNumber\n          ? enumerateExpressionMetadataMap(\n              prefix,\n              extension.getAllExpressions(),\n              scope\n            )\n          : []),\n      ];\n    })\n  );\n};\n\n/** Enumerate the expressions available for the given object type. */\nexport const enumerateObjectExpressions = (\n  type: string,\n  objectType: string\n): Array<EnumeratedExpressionMetadata> => {\n  const extensionAndObjectMetadata = gd.MetadataProvider.getExtensionAndObjectMetadata(\n    gd.JsPlatform.get(),\n    objectType\n  );\n  const extension = extensionAndObjectMetadata.getExtension();\n  const objectMetadata = extensionAndObjectMetadata.getMetadata();\n  const scope = { extension, objectMetadata };\n\n  let objectsExpressions = [\n    ...(isPotentiallyStringType(type)\n      ? enumerateExpressionMetadataMap(\n          '',\n          extension.getAllStrExpressionsForObject(objectType),\n          scope\n        )\n      : []),\n    ...(isPotentiallyNumberType(type)\n      ? enumerateExpressionMetadataMap(\n          '',\n          extension.getAllExpressionsForObject(objectType),\n          scope\n        )\n      : []),\n  ];\n\n  const baseObjectType = ''; /* An empty string means the base object */\n  if (objectType !== baseObjectType) {\n    const extensionAndObjectMetadata = gd.MetadataProvider.getExtensionAndObjectMetadata(\n      gd.JsPlatform.get(),\n      baseObjectType\n    );\n    const extension = extensionAndObjectMetadata.getExtension();\n\n    objectsExpressions = [\n      ...objectsExpressions,\n      ...(isPotentiallyStringType(type)\n        ? enumerateExpressionMetadataMap(\n            '',\n            extension.getAllStrExpressionsForObject(baseObjectType),\n            scope\n          )\n        : []),\n      ...(isPotentiallyNumberType(type)\n        ? enumerateExpressionMetadataMap(\n            '',\n            extension.getAllExpressionsForObject(baseObjectType),\n            scope\n          )\n        : []),\n    ];\n  }\n\n  return objectsExpressions;\n};\n\n/** Enumerate the expressions available for the given behavior type. */\nexport const enumerateBehaviorExpressions = (\n  type: string,\n  behaviorType: string\n): Array<EnumeratedExpressionMetadata> => {\n  const extensionAndBehaviorMetadata = gd.MetadataProvider.getExtensionAndBehaviorMetadata(\n    gd.JsPlatform.get(),\n    behaviorType\n  );\n  const extension = extensionAndBehaviorMetadata.getExtension();\n  const behaviorMetadata = extensionAndBehaviorMetadata.getMetadata();\n  const scope = { extension, behaviorMetadata };\n\n  return [\n    ...(isPotentiallyStringType(type)\n      ? enumerateExpressionMetadataMap(\n          '',\n          extension.getAllStrExpressionsForBehavior(behaviorType),\n          scope\n        )\n      : []),\n    ...(isPotentiallyNumberType(type)\n      ? enumerateExpressionMetadataMap(\n          '',\n          extension.getAllExpressionsForBehavior(behaviorType),\n          scope\n        )\n      : []),\n  ];\n};\n\n/** Enumerate all the expressions available. */\nexport const enumerateAllExpressions = (\n  type: string\n): Array<EnumeratedExpressionMetadata> => {\n  const returnNumber = isPotentiallyNumberType(type);\n  const returnString = isPotentiallyStringType(type);\n\n  const objectsExpressions = [];\n  const behaviorsExpressions = [];\n  const freeExpressions = enumerateFreeExpressions(type);\n\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n  mapVector(allExtensions, extension => {\n    const prefix = getExtensionPrefix(extension);\n\n    //Objects expressions:\n    mapVector(extension.getExtensionObjectsTypes(), objectType => {\n      const objectMetadata = extension.getObjectMetadata(objectType);\n      const scope = { extension, objectMetadata };\n\n      if (returnString)\n        objectsExpressions.push.apply(\n          objectsExpressions,\n          enumerateExpressionMetadataMap(\n            prefix,\n            extension.getAllStrExpressionsForObject(objectType),\n            scope\n          )\n        );\n      if (returnNumber)\n        objectsExpressions.push.apply(\n          objectsExpressions,\n          enumerateExpressionMetadataMap(\n            prefix,\n            extension.getAllExpressionsForObject(objectType),\n            scope\n          )\n        );\n    });\n\n    //Behaviors expressions:\n    mapVector(extension.getBehaviorsTypes(), behaviorType => {\n      const behaviorMetadata = extension.getBehaviorMetadata(behaviorType);\n      const scope = { extension, behaviorMetadata };\n\n      if (returnString)\n        behaviorsExpressions.push.apply(\n          behaviorsExpressions,\n          enumerateExpressionMetadataMap(\n            prefix,\n            extension.getAllStrExpressionsForBehavior(behaviorType),\n            scope\n          )\n        );\n      if (returnNumber)\n        behaviorsExpressions.push.apply(\n          behaviorsExpressions,\n          enumerateExpressionMetadataMap(\n            prefix,\n            extension.getAllExpressionsForBehavior(behaviorType),\n            scope\n          )\n        );\n    });\n  });\n\n  return [...freeExpressions, ...objectsExpressions, ...behaviorsExpressions];\n};\n\nexport const filterExpressions = (\n  list: Array<EnumeratedExpressionMetadata>,\n  searchText: string\n): Array<EnumeratedExpressionMetadata> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  const matchCritera = (enumeratedExpression: EnumeratedExpressionMetadata) => {\n    return (\n      enumeratedExpression.type.toLowerCase().indexOf(lowercaseSearchText) !==\n      -1\n    );\n  };\n\n  const favorExactMatch = (\n    list: Array<EnumeratedExpressionMetadata>\n  ): Array<EnumeratedExpressionMetadata> => {\n    if (!searchText) {\n      return list;\n    }\n\n    for (var i = 0; i < list.length; ++i) {\n      if (list[i].type.toLowerCase() === lowercaseSearchText) {\n        const exactMatch = list[i];\n        list.splice(i, 1);\n        list.unshift(exactMatch);\n      }\n    }\n\n    return list;\n  };\n\n  // See EnumerateInstructions for a similar logic for instructions\n  return favorExactMatch(list.filter(matchCritera));\n};\n","// @flow\nconst fuzzyFilter = (searchText: string, key: string) => {\n  const compareString = key.toLowerCase();\n  searchText = searchText.toLowerCase();\n\n  let searchTextIndex = 0;\n  for (let index = 0; index < key.length; index++) {\n    if (compareString[index] === searchText[searchTextIndex]) {\n      searchTextIndex += 1;\n    }\n  }\n\n  return searchTextIndex === searchText.length;\n};\n\n/**\n * A fuzzy filter that still return true if the key is empty.\n */\nexport const fuzzyOrEmptyFilter = (searchText: string, key: string) => {\n  return !key || fuzzyFilter(searchText, key);\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { getInstructionListItemValue, getInstructionListItemKey } from './Keys';\n\ntype Props = {|\n  instructionOrExpressionMetadata: EnumeratedInstructionOrExpressionMetadata,\n  iconSize: number,\n  onClick: () => void,\n  selectedValue: ?string,\n|};\n\nexport const renderInstructionOrExpressionListItem = ({\n  instructionOrExpressionMetadata,\n  iconSize,\n  onClick,\n  selectedValue,\n}: Props) => {\n  return (\n    <ListItem\n      key={getInstructionListItemKey(instructionOrExpressionMetadata)}\n      selected={\n        selectedValue ===\n        getInstructionListItemValue(instructionOrExpressionMetadata.type)\n      }\n      primaryText={instructionOrExpressionMetadata.displayedName}\n      secondaryText={instructionOrExpressionMetadata.fullGroupName}\n      leftIcon={\n        <ListIcon\n          iconSize={iconSize}\n          src={instructionOrExpressionMetadata.iconFilename}\n        />\n      }\n      onClick={onClick}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem, type ListItemRefType } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport { type InstructionOrExpressionTreeNode } from '../../../InstructionOrExpression/CreateTree';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport Subheader from '../../../UI/Subheader';\nimport flatten from 'lodash/flatten';\nimport { getSubheaderListItemKey, getInstructionListItemValue } from './Keys';\n\ntype Props<T> = {|\n  instructionTreeNode: InstructionOrExpressionTreeNode,\n  onChoose: (type: string, T) => void,\n  iconSize: number,\n  useSubheaders?: boolean,\n  selectedValue: ?string,\n  initiallyOpenedPath?: ?Array<string>,\n\n  // Optional ref that will be filled with the selected ListItem\n  selectedItemRef?: { current: null | ListItemRefType },\n|};\n\nexport const renderInstructionOrExpressionTree = <\n  T: EnumeratedInstructionOrExpressionMetadata\n>({\n  instructionTreeNode,\n  onChoose,\n  iconSize,\n  useSubheaders,\n  selectedValue,\n  selectedItemRef,\n  initiallyOpenedPath,\n}: Props<T>): Array<React$Element<any> | null> => {\n  const [initiallyOpenedKey, ...restOfInitiallyOpenedPath] =\n    initiallyOpenedPath || [];\n\n  return flatten(\n    Object.keys(instructionTreeNode).map(key => {\n      // In theory, we should have a way to distinguish\n      // between instruction (leaf nodes) and group (nodes). We use\n      // the \"type\" properties, but this will fail if a group is called \"type\"\n      // (hence the flow errors, which are valid warnings)\n      // $FlowFixMe\n      const instructionOrGroup = instructionTreeNode[key];\n      if (!instructionOrGroup) return null;\n\n      if (typeof instructionOrGroup.type === 'string') {\n        // $FlowFixMe - see above\n        const instructionInformation: T = instructionOrGroup;\n        const value = getInstructionListItemValue(instructionOrGroup.type);\n        const selected = selectedValue === value;\n        return (\n          <ListItem\n            key={value}\n            primaryText={key}\n            selected={selected}\n            leftIcon={\n              <ListIcon\n                iconSize={iconSize}\n                src={instructionInformation.iconFilename}\n              />\n            }\n            onClick={() => {\n              onChoose(instructionInformation.type, instructionInformation);\n            }}\n            ref={selected ? selectedItemRef : undefined}\n          />\n        );\n      } else {\n        // $FlowFixMe - see above\n        const groupOfInstructionInformation: InstructionOrExpressionTreeNode = instructionOrGroup;\n        if (useSubheaders) {\n          return [\n            <Subheader key={getSubheaderListItemKey(key)}>{key}</Subheader>,\n          ].concat(\n            renderInstructionOrExpressionTree({\n              instructionTreeNode: groupOfInstructionInformation,\n              onChoose,\n              iconSize,\n              useSubheaders: false,\n              selectedValue,\n              selectedItemRef,\n              initiallyOpenedPath: restOfInitiallyOpenedPath,\n            })\n          );\n        } else {\n          const initiallyOpen = initiallyOpenedKey === key;\n          return (\n            <ListItem\n              key={key}\n              primaryText={key}\n              autoGenerateNestedIndicator={true}\n              initiallyOpen={initiallyOpen}\n              renderNestedItems={() =>\n                renderInstructionOrExpressionTree({\n                  instructionTreeNode: groupOfInstructionInformation,\n                  onChoose,\n                  iconSize,\n                  selectedValue,\n                  selectedItemRef,\n                  initiallyOpenedPath: initiallyOpen\n                    ? restOfInitiallyOpenedPath\n                    : undefined,\n                })\n              }\n            />\n          );\n        }\n      }\n    })\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\nimport * as React from 'react';\nimport { mapFor } from '../../../Utils/MapFor';\nimport EmptyMessage from '../../../UI/EmptyMessage';\n\nexport type ParameterValues = Array<string>;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  project?: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  expressionMetadata: gdExpressionMetadata,\n  parameterValues: ParameterValues,\n  onChangeParameter: (index: number, value: string) => void,\n  parameterRenderingService?: {\n    components: any,\n    getParameterComponent: (type: string) => any,\n  },\n|};\ntype State = {||};\n\nexport const hasNonCodeOnlyParameters = (\n  expressionMetadata: gdExpressionMetadata\n) =>\n  mapFor(0, expressionMetadata.getParametersCount(), i => {\n    const parameterMetadata = expressionMetadata.getParameter(i);\n    return !parameterMetadata.isCodeOnly();\n  }).filter(isVisible => isVisible).length !== 0;\n\nexport default class ExpressionParametersEditor extends React.Component<\n  Props,\n  State\n> {\n  render() {\n    const {\n      expressionMetadata,\n      parameterValues,\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n      parameterRenderingService,\n    } = this.props;\n\n    if (!parameterRenderingService) {\n      console.error(\n        'Missing parameterRenderingService for ExpressionParametersEditor'\n      );\n      return null;\n    }\n\n    // Create an object mimicking Instruction interface so that it can be used by\n    // ParameterFields components.\n    const parametersCount = expressionMetadata.getParametersCount();\n    const expression = {\n      getParametersCount: () => parametersCount,\n      getParameter: index => {\n        return parameterValues[index] || '';\n      },\n    };\n\n    return (\n      <div style={styles.container}>\n        {mapFor(0, expressionMetadata.getParametersCount(), i => {\n          const parameterMetadata = expressionMetadata.getParameter(i);\n          const ParameterComponent = parameterRenderingService.getParameterComponent(\n            parameterMetadata.getType()\n          );\n\n          if (parameterMetadata.isCodeOnly()) return null;\n          return (\n            <ParameterComponent\n              expressionMetadata={expressionMetadata}\n              expression={expression}\n              parameterMetadata={parameterMetadata}\n              parameterIndex={i}\n              value={parameterValues[i]}\n              onChange={value => this.props.onChangeParameter(i, value)}\n              project={project}\n              scope={scope}\n              globalObjectsContainer={globalObjectsContainer}\n              objectsContainer={objectsContainer}\n              key={i}\n              parameterRenderingService={parameterRenderingService}\n            />\n          );\n        })}\n        {!hasNonCodeOnlyParameters(expressionMetadata) && (\n          <EmptyMessage>\n            <Trans>There is nothing to configure.</Trans>\n          </EmptyMessage>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport flatten from 'lodash/flatten';\nimport { mapFor } from '../../Utils/MapFor';\nimport flatMap from 'lodash/flatMap';\nconst gd: libGDevelop = global.gd;\n\n// Note that in theory we could have this function inside gd.ExpressionParser2,\n// to be sure it's following perfectly the grammar of the expression parser. In\n// practice, the disallowed characters are not changing often, so it's fine to have\n// them here.\nconst isValidIdentifier = (variableName: string) => {\n  const identifierDisallowedCharacters = ',.\"()[]{}()[],+-<>?^=:!+-/* \\'';\n\n  for (let i = 0; i < variableName.length; ++i) {\n    if (identifierDisallowedCharacters.indexOf(variableName[i]) !== -1)\n      return false;\n  }\n\n  return true;\n};\n\nconst convertToStringLiteral = (variableName: string) => {\n  return '\"' + variableName.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"') + '\"';\n};\n\ntype EnumeratedVariable = {|\n  name: string,\n  isValidName: boolean,\n|};\n\nexport const enumerateVariables = (\n  variablesContainer: ?gdVariablesContainer\n): Array<EnumeratedVariable> => {\n  if (!variablesContainer) {\n    return [];\n  }\n\n  const enumerateVariableAndChildrenNames = (\n    fullName: string,\n    variable: gdVariable,\n    isTopLevel: boolean,\n    isFullNameValid: boolean\n  ): Array<EnumeratedVariable> => {\n    // When a variable is top level, it should in theory not contain\n    // any special character making it unusable in an expression.\n    const isValidName = isTopLevel\n      ? isValidIdentifier(fullName)\n      : isFullNameValid;\n    const enumeratedVariable = { name: fullName, isValidName };\n\n    if (variable.getType() === gd.Variable.Structure) {\n      return [\n        enumeratedVariable,\n        ...flatMap(variable.getAllChildrenNames().toJSArray(), childName =>\n          enumerateVariableAndChildrenNames(\n            isValidIdentifier(childName)\n              ? `${fullName}.${childName}`\n              : `${fullName}[${convertToStringLiteral(childName)}]`,\n            variable.getChild(childName),\n            false,\n            isValidName\n          )\n        ),\n      ];\n    } else if (variable.getType() === gd.Variable.Array) {\n      return [\n        enumeratedVariable,\n        ...flatMap(\n          new Array(variable.getChildrenCount()).fill(''),\n          (_, index) =>\n            enumerateVariableAndChildrenNames(\n              `${fullName}[${index}]`,\n              variable.getAtIndex(index),\n              false,\n              isValidName\n            )\n        ),\n      ];\n    } else {\n      // Variable of primitive type\n      return [enumeratedVariable];\n    }\n  };\n\n  return flatten(\n    mapFor(0, variablesContainer.count(), i => {\n      return enumerateVariableAndChildrenNames(\n        variablesContainer.getNameAt(i),\n        variablesContainer.getAt(i),\n        true,\n        true\n      );\n    })\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport VariableField, { renderVariableWithIcon } from './VariableField';\nimport VariablesEditorDialog from '../../VariablesList/VariablesEditorDialog';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport EventsRootVariablesFinder from '../../Utils/EventsRootVariablesFinder';\n\ntype State = {|\n  editorOpen: boolean,\n|};\n\nexport default class SceneVariableField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  _field: ?VariableField;\n  state = {\n    editorOpen: false,\n  };\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { project, scope } = this.props;\n    const { layout } = scope;\n\n    const onComputeAllVariableNames = () =>\n      project && layout\n        ? EventsRootVariablesFinder.findAllLayoutVariables(\n            project.getCurrentPlatform(),\n            project,\n            layout\n          )\n        : [];\n\n    return (\n      <React.Fragment>\n        <VariableField\n          variablesContainer={layout ? layout.getVariables() : null}\n          onComputeAllVariableNames={onComputeAllVariableNames}\n          parameterMetadata={this.props.parameterMetadata}\n          value={this.props.value}\n          onChange={this.props.onChange}\n          isInline={this.props.isInline}\n          onRequestClose={this.props.onRequestClose}\n          onApply={this.props.onApply}\n          ref={field => (this._field = field)}\n          onOpenDialog={() => this.setState({ editorOpen: true })}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          scope={scope}\n        />\n        {this.state.editorOpen && layout && (\n          <VariablesEditorDialog\n            title={<Trans>Scene Variables</Trans>}\n            open\n            variablesContainer={layout.getVariables()}\n            onCancel={() => this.setState({ editorOpen: false })}\n            onApply={() => {\n              this.setState({ editorOpen: false });\n              if (this._field) this._field.updateAutocompletions();\n            }}\n            emptyExplanationMessage={\n              <Trans>\n                Scene variables can be used to store any value or text during\n                the game.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called Score representing\n                the current score of the player.\n              </Trans>\n            }\n            helpPagePath={'/all-features/variables/scene-variables'}\n            onComputeAllVariableNames={onComputeAllVariableNames}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderInlineSceneVariable = (\n  props: ParameterInlineRendererProps\n) => {\n  return renderVariableWithIcon(\n    props,\n    'res/types/scenevar.png',\n    'scene variable'\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  DragSource,\n  type DragSourceMonitor,\n  type DragSourceConnector,\n  type ConnectDragSource,\n  DropTarget,\n  type DropTargetMonitor,\n  type DropTargetConnector,\n  type ConnectDropTarget,\n} from 'react-dnd';\n\ntype Props<DraggedItemType> = {|\n  children: ({\n    connectDragSource: ConnectDragSource,\n    connectDropTarget: ConnectDropTarget,\n    isOver: boolean,\n    canDrop: boolean,\n  }) => ?React.Node,\n  beginDrag: () => DraggedItemType,\n  canDrag?: (item: DraggedItemType) => boolean,\n  canDrop: (item: DraggedItemType) => boolean,\n  drop: () => void,\n|};\n\ntype DragSourceProps = {|\n  connectDragSource: ConnectDragSource,\n|};\n\ntype DropTargetProps = {|\n  connectDropTarget: ConnectDropTarget,\n  isOver: boolean,\n  canDrop: boolean,\n|};\n\ntype InnerDragSourceAndDropTargetProps<DraggedItemType> = {|\n  ...Props<DraggedItemType>,\n  ...DragSourceProps,\n  ...DropTargetProps,\n|};\n\nexport const makeDragSourceAndDropTarget = <DraggedItemType>(\n  reactDndType: string\n): ((Props<DraggedItemType>) => React.Node) => {\n  const sourceSpec = {\n    canDrag(props: Props<DraggedItemType>, monitor: DragSourceMonitor) {\n      const item = monitor.getItem();\n      const canDrag = props.canDrag || null;\n      if (canDrag) return canDrag(item);\n      return true;\n    },\n    beginDrag(props: InnerDragSourceAndDropTargetProps<DraggedItemType>) {\n      return props.beginDrag();\n    },\n  };\n\n  function sourceCollect(\n    connect: DragSourceConnector,\n    monitor: DragSourceMonitor\n  ): DragSourceProps {\n    return {\n      connectDragSource: connect.dragSource(),\n    };\n  }\n\n  const targetSpec = {\n    canDrop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      const item = monitor.getItem();\n      return item && props.canDrop(item);\n    },\n    drop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      if (monitor.didDrop()) {\n        return; // Drop already handled by another target\n      }\n      props.drop();\n    },\n  };\n\n  function targetCollect(\n    connect: DropTargetConnector,\n    monitor: DropTargetMonitor\n  ): DropTargetProps {\n    return {\n      connectDropTarget: connect.dropTarget(),\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    };\n  }\n\n  const InnerDragSourceAndDropTarget = DragSource(\n    reactDndType,\n    sourceSpec,\n    sourceCollect\n  )(\n    DropTarget(reactDndType, targetSpec, targetCollect)(\n      ({ children, connectDragSource, connectDropTarget, isOver, canDrop }) => {\n        return children({\n          connectDragSource,\n          connectDropTarget,\n          isOver,\n          canDrop,\n        });\n      }\n    )\n  );\n\n  return (props: Props<DraggedItemType>) => (\n    <InnerDragSourceAndDropTarget {...props} />\n  );\n};\n","// @flow\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport {\n  type SelectionState,\n  getSelectedEvents,\n  hasEventSelected,\n  getSelectedEventContexts,\n  hasInstructionSelected,\n  hasInstructionsListSelected,\n  getSelectedInstructionsContexts,\n  getSelectedInstructionsListsContexts,\n  type InstructionsListContext,\n} from './SelectionHandler';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nconst gd: libGDevelop = global.gd;\n\nexport const CLIPBOARD_KIND = 'EventsAndInstructions';\n\nexport const hasClipboardEvents = () => {\n  if (!Clipboard.has(CLIPBOARD_KIND)) return false;\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const eventsCount = SafeExtractor.extractNumberProperty(\n    clipboardContent,\n    'eventsCount'\n  );\n  if (eventsCount === null) return false;\n\n  return eventsCount > 0;\n};\n\nexport const hasClipboardConditions = () => {\n  if (!Clipboard.has(CLIPBOARD_KIND)) return false;\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const conditionsCount = SafeExtractor.extractNumberProperty(\n    clipboardContent,\n    'conditionsCount'\n  );\n  if (conditionsCount === null) return false;\n\n  return conditionsCount > 0;\n};\n\nexport const hasClipboardActions = () => {\n  if (!Clipboard.has(CLIPBOARD_KIND)) return false;\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const actionsCount = SafeExtractor.extractNumberProperty(\n    clipboardContent,\n    'actionsCount'\n  );\n  if (actionsCount === null) return false;\n\n  return actionsCount > 0;\n};\n\nexport const copySelectionToClipboard = (selection: SelectionState) => {\n  const eventsList = new gd.EventsList();\n  const actionsList = new gd.InstructionsList();\n  const conditionsList = new gd.InstructionsList();\n\n  getSelectedEvents(selection).forEach(event =>\n    eventsList.insertEvent(event, eventsList.getEventsCount())\n  );\n  getSelectedInstructionsContexts(selection).forEach(instructionContext => {\n    if (instructionContext.isCondition) {\n      conditionsList.insert(\n        instructionContext.instruction,\n        conditionsList.size()\n      );\n    } else {\n      actionsList.insert(instructionContext.instruction, actionsList.size());\n    }\n  });\n\n  Clipboard.set(CLIPBOARD_KIND, {\n    eventsList: serializeToJSObject(eventsList),\n    eventsCount: eventsList.getEventsCount(),\n    actionsList: serializeToJSObject(actionsList),\n    actionsCount: actionsList.size(),\n    conditionsList: serializeToJSObject(conditionsList),\n    conditionsCount: conditionsList.size(),\n  });\n\n  eventsList.delete();\n  actionsList.delete();\n  conditionsList.delete();\n};\n\nexport const pasteEventsFromClipboardInSelection = (\n  project: gdProject,\n  selection: SelectionState\n): boolean => {\n  if (!hasEventSelected(selection) || !hasClipboardEvents()) return false;\n\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const eventsListContent = SafeExtractor.extractArrayProperty(\n    clipboardContent,\n    'eventsList'\n  );\n  if (!eventsListContent) return false;\n\n  const eventsList = new gd.EventsList();\n  unserializeFromJSObject(\n    eventsList,\n    eventsListContent,\n    'unserializeFrom',\n    project\n  );\n  getSelectedEventContexts(selection).forEach(eventContext => {\n    eventContext.eventsList.insertEvents(\n      eventsList,\n      0,\n      eventsList.getEventsCount(),\n      eventContext.indexInList\n    );\n  });\n  eventsList.delete();\n\n  return true;\n};\n\nexport const pasteInstructionsFromClipboardInSelection = (\n  project: gdProject,\n  selection: SelectionState\n): boolean => {\n  if (\n    (!hasInstructionSelected(selection) &&\n      !hasInstructionsListSelected(selection)) ||\n    (!hasClipboardConditions() && !hasClipboardActions())\n  )\n    return false;\n\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const actionsListContent = SafeExtractor.extractArrayProperty(\n    clipboardContent,\n    'actionsList'\n  );\n  const conditionsListContent = SafeExtractor.extractArrayProperty(\n    clipboardContent,\n    'conditionsList'\n  );\n  if (!actionsListContent || !conditionsListContent) return false;\n\n  const actionsList = new gd.InstructionsList();\n  const conditionsList = new gd.InstructionsList();\n  unserializeFromJSObject(\n    actionsList,\n    actionsListContent,\n    'unserializeFrom',\n    project\n  );\n  unserializeFromJSObject(\n    conditionsList,\n    conditionsListContent,\n    'unserializeFrom',\n    project\n  );\n  getSelectedInstructionsContexts(selection).forEach(instructionContext => {\n    if (instructionContext.isCondition) {\n      instructionContext.instrsList.insertInstructions(\n        conditionsList,\n        0,\n        conditionsList.size(),\n        instructionContext.indexInList\n      );\n    } else {\n      instructionContext.instrsList.insertInstructions(\n        actionsList,\n        0,\n        actionsList.size(),\n        instructionContext.indexInList\n      );\n    }\n  });\n  getSelectedInstructionsListsContexts(selection).forEach(\n    instructionsListContext => {\n      if (instructionsListContext.isCondition) {\n        instructionsListContext.instrsList.insertInstructions(\n          conditionsList,\n          0,\n          conditionsList.size(),\n          instructionsListContext.instrsList.size()\n        );\n      } else {\n        instructionsListContext.instrsList.insertInstructions(\n          actionsList,\n          0,\n          actionsList.size(),\n          instructionsListContext.instrsList.size()\n        );\n      }\n    }\n  );\n  conditionsList.delete();\n  actionsList.delete();\n\n  return true;\n};\n\nexport const pasteInstructionsFromClipboardInInstructionsList = (\n  project: gdProject,\n  instructionsListContext: InstructionsListContext\n) => {\n  if (!hasClipboardConditions() && !hasClipboardActions()) return false;\n\n  const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n  const actionsListContent = SafeExtractor.extractArrayProperty(\n    clipboardContent,\n    'actionsList'\n  );\n  const conditionsListContent = SafeExtractor.extractArrayProperty(\n    clipboardContent,\n    'conditionsList'\n  );\n  if (!actionsListContent || !conditionsListContent) return;\n\n  const actionsList = new gd.InstructionsList();\n  const conditionsList = new gd.InstructionsList();\n  unserializeFromJSObject(\n    actionsList,\n    actionsListContent,\n    'unserializeFrom',\n    project\n  );\n  unserializeFromJSObject(\n    conditionsList,\n    conditionsListContent,\n    'unserializeFrom',\n    project\n  );\n\n  if (instructionsListContext.isCondition) {\n    instructionsListContext.instrsList.insertInstructions(\n      conditionsList,\n      0,\n      conditionsList.size(),\n      instructionsListContext.instrsList.size()\n    );\n  } else {\n    instructionsListContext.instrsList.insertInstructions(\n      actionsList,\n      0,\n      actionsList.size(),\n      instructionsListContext.instrsList.size()\n    );\n  }\n  conditionsList.delete();\n  actionsList.delete();\n\n  return true;\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  DropTarget,\n  type DropTargetMonitor,\n  type DropTargetConnector,\n  type ConnectDropTarget,\n} from 'react-dnd';\n\ntype Props<DraggedItemType> = {|\n  children: ({\n    connectDropTarget: ConnectDropTarget,\n    isOver: boolean,\n    canDrop: boolean,\n  }) => ?React.Node,\n  canDrop: (item: DraggedItemType) => boolean,\n  hover?: (monitor: DropTargetMonitor) => void,\n  drop: (monitor: DropTargetMonitor) => void,\n|};\n\ntype DropTargetProps = {|\n  connectDropTarget: ConnectDropTarget,\n  isOver: boolean,\n  canDrop: boolean,\n|};\n\nexport const makeDropTarget = <DraggedItemType>(\n  reactDndType: string\n): ((Props<DraggedItemType>) => React.Node) => {\n  const targetSpec = {\n    canDrop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      const item = monitor.getItem();\n      return item && props.canDrop(item);\n    },\n    hover(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      if (props.hover) props.hover(monitor);\n    },\n    drop(props: Props<DraggedItemType>, monitor: DropTargetMonitor) {\n      if (monitor.didDrop()) {\n        return; // Drop already handled by another target\n      }\n      props.drop(monitor);\n    },\n  };\n\n  function targetCollect(\n    connect: DropTargetConnector,\n    monitor: DropTargetMonitor\n  ): DropTargetProps {\n    return {\n      connectDropTarget: connect.dropTarget(),\n      isOver: monitor.isOver({ shallow: true }),\n      canDrop: monitor.canDrop(),\n    };\n  }\n\n  const InnerDropTarget = DropTarget(reactDndType, targetSpec, targetCollect)(\n    ({ children, connectDropTarget, isOver, canDrop }) => {\n      return children({\n        connectDropTarget,\n        isOver,\n        canDrop,\n      });\n    }\n  );\n\n  return (props: Props<DraggedItemType>) => <InnerDropTarget {...props} />;\n};\n","// @flow\n\nimport flatten from 'lodash/flatten';\nimport { mapFor } from '../Utils/MapFor';\nconst gd: libGDevelop = global.gd;\n\nexport type EventMetadata = {|\n  type: string,\n  fullName: string,\n  description: string,\n|};\n\nexport const enumerateEventsMetadata = (): Array<EventMetadata> => {\n  const allExtensions = gd\n    .asPlatform(gd.JsPlatform.get())\n    .getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, allExtensions.size(), i => {\n      const extension = allExtensions.at(i);\n      const extensionEvents = extension.getAllEvents();\n\n      return extensionEvents\n        .keys()\n        .toJSArray()\n        .map(type => {\n          const metadata = extensionEvents.get(type);\n          return {\n            type,\n            fullName: metadata.getFullName(),\n            description: metadata.getDescription(),\n          };\n        });\n    })\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport Toggle from '../../UI/Toggle';\nimport { mapFor } from '../../Utils/MapFor';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport ParameterRenderingService from '../ParameterRenderingService';\nimport HelpButton from '../../UI/HelpButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport AlertMessage from '../../UI/AlertMessage';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\nimport Window from '../../Utils/Window';\nimport { getExtraInstructionInformation } from '../../Hints';\nimport DismissableTutorialMessage from '../../Hints/DismissableTutorialMessage';\nimport { isAnEventFunctionMetadata } from '../../EventsFunctionsExtensionsLoader';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport IconButton from '../../UI/IconButton';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { getObjectParameterIndex } from '../../InstructionOrExpression/EnumerateInstructions';\nimport Text from '../../UI/Text';\nimport { getInstructionMetadata } from './NewInstructionEditor';\nimport { ColumnStackLayout } from '../../UI/Layout';\nimport { setupInstructionParameters } from '../../InstructionOrExpression/SetupInstructionParameters';\nimport ScrollView from '../../UI/ScrollView';\nimport { getInstructionTutorialIds } from '../../Utils/GDevelopServices/Tutorial';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  // When displaying the empty message, center the message:\n  emptyContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  parametersContainer: {\n    flex: 1,\n  },\n  icon: {\n    width: 24,\n    height: 24,\n    marginRight: 8,\n    paddingTop: 12,\n    flexShrink: 0,\n  },\n  invertToggle: {\n    marginTop: 8,\n  },\n  description: {\n    whiteSpace: 'pre-wrap',\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  objectName?: ?string,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  focusOnMount?: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  noHelpButton?: boolean,\n|};\ntype State = {|\n  isDirty: boolean,\n|};\n\nconst isParameterVisible = (\n  parameterMetadata: gdParameterMetadata,\n  parameterIndex: number,\n  objectParameterIndex: ?number\n) => {\n  // Hide parameters that are used only for code generation\n  if (parameterMetadata.isCodeOnly()) return false;\n\n  // For objects, hide the first object parameter, which is by convention the object name.\n  if (parameterIndex === objectParameterIndex) return false;\n\n  return true;\n};\n\nexport default class InstructionParametersEditor extends React.Component<\n  Props,\n  State\n> {\n  _firstVisibleField: ?any = {};\n  state = {\n    isDirty: false,\n  };\n\n  componentDidMount() {\n    if (this.props.focusOnMount) {\n      setTimeout(() => {\n        this.focus();\n      }, 300); // Let the time to the dialog that is potentially containing the InstructionParametersEditor to finish its transition.\n    }\n  }\n\n  focus() {\n    const { instruction, isCondition, project } = this.props;\n\n    // Verify that there is a field to focus.\n    if (\n      this._getVisibleParametersCount(\n        getInstructionMetadata({\n          instructionType: instruction.getType(),\n          isCondition,\n          project,\n        }),\n        this.props.objectName\n      ) !== 0\n    ) {\n      if (this._firstVisibleField && this._firstVisibleField.focus) {\n        this._firstVisibleField.focus();\n      }\n    }\n  }\n\n  _getVisibleParametersCount(\n    instructionMetadata: ?gdInstructionMetadata,\n    objectName: ?string\n  ) {\n    if (!instructionMetadata) return 0;\n\n    const objectParameterIndex = objectName\n      ? getObjectParameterIndex(instructionMetadata)\n      : -1;\n\n    return mapFor(0, instructionMetadata.getParametersCount(), i => {\n      if (!instructionMetadata) return false;\n      const parameterMetadata = instructionMetadata.getParameter(i);\n\n      return isParameterVisible(parameterMetadata, i, objectParameterIndex);\n    }).filter(isVisible => isVisible).length;\n  }\n\n  _openExtension = (i18n: I18nType) => {\n    if (this.state.isDirty) {\n      const answer = Window.showConfirmDialog(\n        i18n._(\n          t`You've made some changes here. Are you sure you want to discard them and open the function?`\n        )\n      );\n      if (!answer) return;\n    }\n\n    const { instruction, isCondition, project } = this.props;\n    const instructionType = instruction.getType();\n    if (!instructionType) return null;\n\n    const extension = isCondition\n      ? gd.MetadataProvider.getExtensionAndConditionMetadata(\n          project.getCurrentPlatform(),\n          instructionType\n        ).getExtension()\n      : gd.MetadataProvider.getExtensionAndActionMetadata(\n          project.getCurrentPlatform(),\n          instructionType\n        ).getExtension();\n\n    this.props.openInstructionOrExpression(extension, instructionType);\n  };\n\n  _renderEmpty() {\n    return (\n      <div style={{ ...styles.emptyContainer, ...this.props.style }}>\n        <EmptyMessage>\n          {this.props.isCondition ? (\n            <Trans>\n              Choose a condition (or an object then a condition) on the left\n            </Trans>\n          ) : (\n            <Trans>\n              Choose an action (or an object then an action) on the left\n            </Trans>\n          )}\n        </EmptyMessage>\n      </div>\n    );\n  }\n\n  render() {\n    const {\n      instruction,\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      noHelpButton,\n      objectName,\n      isCondition,\n      scope,\n    } = this.props;\n\n    const instructionType = instruction.getType();\n    const instructionMetadata = getInstructionMetadata({\n      instructionType,\n      isCondition,\n      project,\n    });\n    if (!instructionMetadata) return this._renderEmpty();\n\n    const helpPage = instructionMetadata.getHelpPath();\n    const instructionExtraInformation = getExtraInstructionInformation(\n      instructionType\n    );\n    const tutorialIds = getInstructionTutorialIds(instructionType);\n    const objectParameterIndex = objectName\n      ? getObjectParameterIndex(instructionMetadata)\n      : -1;\n\n    setupInstructionParameters(\n      globalObjectsContainer,\n      objectsContainer,\n      instruction,\n      instructionMetadata,\n      objectName\n    );\n\n    let parameterFieldIndex = 0;\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <ScrollView autoHideScrollbar>\n            <Column expand>\n              <Line alignItems=\"flex-start\">\n                <img\n                  src={instructionMetadata.getIconFilename()}\n                  alt=\"\"\n                  style={styles.icon}\n                />\n                <Text style={styles.description}>\n                  {instructionMetadata.getDescription()}\n                </Text>\n                {isAnEventFunctionMetadata(instructionMetadata) && (\n                  <IconButton\n                    onClick={() => {\n                      this._openExtension(i18n);\n                    }}\n                  >\n                    <OpenInNew />\n                  </IconButton>\n                )}\n              </Line>\n              {instructionExtraInformation && (\n                <Line>\n                  {instructionExtraInformation.identifier === undefined ? (\n                    <AlertMessage kind={instructionExtraInformation.kind}>\n                      {i18n._(instructionExtraInformation.message)}\n                    </AlertMessage>\n                  ) : (\n                    <DismissableAlertMessage\n                      kind={instructionExtraInformation.kind}\n                      identifier={instructionExtraInformation.identifier}\n                    >\n                      {i18n._(instructionExtraInformation.message)}\n                    </DismissableAlertMessage>\n                  )}\n                </Line>\n              )}\n              {tutorialIds.length ? (\n                <Line>\n                  <ColumnStackLayout expand>\n                    {tutorialIds.map(tutorialId => (\n                      <DismissableTutorialMessage\n                        key={tutorialId}\n                        tutorialId={tutorialId}\n                      />\n                    ))}\n                  </ColumnStackLayout>\n                </Line>\n              ) : null}\n              <Spacer />\n              <div key={instructionType} style={styles.parametersContainer}>\n                <ColumnStackLayout noMargin>\n                  {mapFor(0, instructionMetadata.getParametersCount(), i => {\n                    const parameterMetadata = instructionMetadata.getParameter(\n                      i\n                    );\n                    if (\n                      !isParameterVisible(\n                        parameterMetadata,\n                        i,\n                        objectParameterIndex\n                      )\n                    )\n                      return null;\n\n                    const parameterMetadataType = parameterMetadata.getType();\n                    const ParameterComponent = ParameterRenderingService.getParameterComponent(\n                      parameterMetadataType\n                    );\n\n                    // Track the field count on screen, to affect the ref to the\n                    // first visible field.\n                    const isFirstVisibleParameterField =\n                      parameterFieldIndex === 0;\n                    parameterFieldIndex++;\n\n                    return (\n                      <ParameterComponent\n                        instructionMetadata={instructionMetadata}\n                        instruction={instruction}\n                        parameterMetadata={parameterMetadata}\n                        parameterIndex={i}\n                        value={instruction.getParameter(i)}\n                        onChange={value => {\n                          if (instruction.getParameter(i) !== value) {\n                            instruction.setParameter(i, value);\n                            this.setState({\n                              isDirty: true,\n                            });\n                          }\n                        }}\n                        project={project}\n                        scope={scope}\n                        globalObjectsContainer={globalObjectsContainer}\n                        objectsContainer={objectsContainer}\n                        key={i}\n                        parameterRenderingService={ParameterRenderingService}\n                        resourceSources={this.props.resourceSources}\n                        onChooseResource={this.props.onChooseResource}\n                        resourceExternalEditors={\n                          this.props.resourceExternalEditors\n                        }\n                        ref={field => {\n                          if (isFirstVisibleParameterField) {\n                            this._firstVisibleField = field;\n                          }\n                        }}\n                      />\n                    );\n                  })}\n                </ColumnStackLayout>\n                {this._getVisibleParametersCount(\n                  instructionMetadata,\n                  objectName\n                ) === 0 && (\n                  <EmptyMessage>\n                    <Trans>There is nothing to configure.</Trans>\n                  </EmptyMessage>\n                )}\n                {this.props.isCondition && (\n                  <Toggle\n                    label={<Trans>Invert condition</Trans>}\n                    labelPosition=\"right\"\n                    toggled={instruction.isInverted()}\n                    style={styles.invertToggle}\n                    onToggle={(e, enabled) => {\n                      instruction.setInverted(enabled);\n                      this.forceUpdate();\n                    }}\n                  />\n                )}\n              </div>\n              <Line>\n                {!noHelpButton && helpPage && (\n                  <HelpButton\n                    helpPagePath={instructionMetadata.getHelpPath()}\n                    label={\n                      this.props.isCondition ? (\n                        <Trans>Help for this condition</Trans>\n                      ) : (\n                        <Trans>Help for this action</Trans>\n                      )\n                    }\n                  />\n                )}\n              </Line>\n            </Column>\n          </ScrollView>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Line } from '../Grid';\n\ntype Props<TColumnName> = {|\n  columnsRenderer: { [TColumnName]: () => React.Node },\n  getColumns: () => Array<TColumnName>,\n|};\n\nexport const SelectColumns = (props: Props<string>) => {\n  const columns = props.getColumns();\n  return (\n    <Line noMargin expand>\n      {columns.map(columnName =>\n        props.columnsRenderer[columnName]\n          ? props.columnsRenderer[columnName]()\n          : null\n      )}\n    </Line>\n  );\n};\n","// @flow\nimport { serializeToJSObject, unserializeFromJSObject } from './Serializer';\n\n// Tools function to keep track of the history of changes made\n// on a serializable object from libGD.js\n\nexport type HistoryState = {|\n  undoHistory: Array<Object>,\n  current: Object,\n  redoHistory: Array<Object>,\n  maxSize: number,\n|};\n\n/**\n * Return the initial state of the history\n * @param {*} serializableObject\n */\nexport const getHistoryInitialState = (\n  serializableObject: gdSerializable,\n  { historyMaxSize }: { historyMaxSize: number }\n): HistoryState => {\n  return {\n    undoHistory: [],\n    current: serializeToJSObject(serializableObject),\n    redoHistory: [],\n    maxSize: historyMaxSize,\n  };\n};\n\n/**\n * Return true if redo can be applied for the given history\n * @param {*} history\n */\nexport const canRedo = (history: HistoryState): boolean => {\n  return !!history.redoHistory.length;\n};\n\n/**\n * Return true if undo can be applied for the given history\n * @param {*} history\n */\nexport const canUndo = (history: HistoryState): boolean => {\n  return !!history.undoHistory.length;\n};\n\n/**\n * Save a new state of the given serializableObject to the history\n * @param {*} history\n * @param {*} serializableObject\n */\nexport const saveToHistory = (\n  history: HistoryState,\n  serializableObject: gdSerializable\n): HistoryState => {\n  const newUndoHistory = [...history.undoHistory, history.current];\n  if (newUndoHistory.length > history.maxSize) {\n    newUndoHistory.splice(0, newUndoHistory.length - history.maxSize);\n  }\n\n  return {\n    undoHistory: newUndoHistory,\n    current: serializeToJSObject(serializableObject),\n    redoHistory: [],\n    maxSize: history.maxSize,\n  };\n};\n\n/**\n * Update the serializableObject to undo the last changes.\n * /!\\ This mutates the serializableObject and there could be objects owned by it\n * deleted or becoming invalid. Be sure to drop/refresh any reference to them.\n *\n * @param {*} history\n * @param {*} serializableObject\n */\nexport const undo = (\n  history: HistoryState,\n  serializableObject: gdSerializable,\n  project: ?gdProject = undefined\n): HistoryState => {\n  if (!history.undoHistory.length) {\n    return history;\n  }\n\n  const newCurrent = history.undoHistory[history.undoHistory.length - 1];\n  unserializeFromJSObject(\n    serializableObject,\n    newCurrent,\n    'unserializeFrom',\n    project\n  );\n\n  return {\n    undoHistory: history.undoHistory.slice(0, -1),\n    current: newCurrent,\n    redoHistory: [...history.redoHistory, history.current],\n    maxSize: history.maxSize,\n  };\n};\n\n/**\n * Update the serializableObject to undo the last changes.\n * /!\\ This mutates the serializableObject and there could be objects owned by it\n * deleted or becoming invalid. Be sure to drop/refresh any reference to them.\n *\n * @param {*} history\n * @param {*} serializableObject\n */\nexport const redo = (\n  history: HistoryState,\n  serializableObject: gdSerializable,\n  project: ?gdProject = undefined\n): HistoryState => {\n  if (!history.redoHistory.length) {\n    return history;\n  }\n\n  const newCurrent = history.redoHistory[history.redoHistory.length - 1];\n  unserializeFromJSObject(\n    serializableObject,\n    newCurrent,\n    'unserializeFrom',\n    project\n  );\n\n  return {\n    undoHistory: [...history.undoHistory, history.current],\n    current: newCurrent,\n    redoHistory: history.redoHistory.slice(0, -1),\n    maxSize: history.maxSize,\n  };\n};\n","// @flow\nimport { unserializeFromJSObject } from '../../Utils/Serializer';\nimport { mapVector } from '../../Utils/MapFor';\nimport { getFreeEventsFunctionType } from '../../EventsFunctionsExtensionsLoader';\nimport getObjectGroupByName from '../../Utils/GetObjectGroupByName';\nconst gd: libGDevelop = global.gd;\n\n/**\n * Set up an events function with the given serialized events,\n * so that the function contains these events, expecting the objects\n * as parameters.\n */\nexport const setupFunctionFromEvents = ({\n  globalObjectsContainer,\n  objectsContainer,\n  serializedEvents,\n  project,\n  eventsFunction,\n}: {\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  serializedEvents: Object,\n  eventsFunction: gdEventsFunction,\n}) => {\n  // Set up the function\n  eventsFunction.setName('MyFunction');\n  eventsFunction.setFunctionType(gd.EventsFunction.Action);\n  unserializeFromJSObject(\n    eventsFunction.getEvents(),\n    serializedEvents,\n    'unserializeFrom',\n    project\n  );\n\n  // Analyze events...\n  const eventsContextAnalyzer = new gd.EventsContextAnalyzer(\n    gd.JsPlatform.get(),\n    globalObjectsContainer,\n    objectsContainer\n  );\n  eventsContextAnalyzer.launch(eventsFunction.getEvents());\n  const eventsContext = eventsContextAnalyzer.getEventsContext();\n\n  // ...to extract objects and groups\n  const objectOrGroupNames: Array<string> = eventsContext\n    .getReferencedObjectOrGroupNames()\n    .toNewVectorString()\n    .toJSArray();\n  const objectNames: Array<string> = eventsContext\n    .getObjectNames()\n    .toNewVectorString()\n    .toJSArray();\n  const groups: Array<gdObjectGroup> = objectOrGroupNames\n    // Filter to only keep groups\n    .filter(\n      (objectOrGroupName: string) =>\n        objectNames.indexOf(objectOrGroupName) === -1\n    )\n    .map(groupName =>\n      getObjectGroupByName(globalObjectsContainer, objectsContainer, groupName)\n    )\n    .filter(Boolean);\n\n  // Compute what the parameters should be:\n  // 1) The groups, but only the ones that have no object directly referenced.\n  const parameterGroups: Array<gdObjectGroup> = groups.filter(group => {\n    return !objectOrGroupNames.some(referencedObjectOrGroupName =>\n      group.find(referencedObjectOrGroupName)\n    );\n  });\n  const parameterGroupNames: Array<string> = parameterGroups.map(group =>\n    group.getName()\n  );\n\n  // 2) The objects, but only the ones that are already in the groups in parameters\n  const parameterObjectNames: Array<string> = objectNames.filter(objectName => {\n    return !parameterGroups.some(group => group.find(objectName));\n  });\n\n  // Create parameters for these objects (or these groups without any object directly referenced)\n  const parameters = eventsFunction.getParameters();\n  parameters.clear();\n  [...parameterGroupNames, ...parameterObjectNames].forEach(objectName => {\n    const newParameter = new gd.ParameterMetadata();\n    newParameter.setType('objectList');\n    newParameter.setName(objectName);\n    newParameter.setExtraInfo(\n      gd.getTypeOfObject(\n        globalObjectsContainer,\n        objectsContainer,\n        objectName,\n        true\n      )\n    );\n    parameters.push_back(newParameter);\n\n    const behaviorNames: Array<string> = eventsContext\n      .getBehaviorNamesOfObjectOrGroup(objectName)\n      .toNewVectorString()\n      .toJSArray();\n\n    behaviorNames.forEach(behaviorName => {\n      const newParameter = new gd.ParameterMetadata();\n      newParameter.setType('behavior');\n      newParameter.setName(behaviorName);\n      newParameter.setExtraInfo(\n        gd.getTypeOfBehavior(\n          globalObjectsContainer,\n          objectsContainer,\n          behaviorName,\n          false\n        )\n      );\n      parameters.push_back(newParameter);\n    });\n  });\n\n  // Import groups that are used in events, but are not in parameters,\n  // inside the events function groups.\n  groups\n    .filter(group => !parameterGroupNames.includes(group.getName()))\n    .forEach(group => {\n      if (group) {\n        eventsFunction.getObjectGroups().insert(group, 0);\n      }\n    });\n\n  eventsContextAnalyzer.delete();\n};\n\n/**\n * Create an instruction to call the given events function\n */\nexport const createNewInstructionForEventsFunction = (\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n): gdInstruction => {\n  const action = new gd.Instruction(); //Add a simple action\n  const runtimeSceneParameterCount = 1; // By convention, first parameter is always the Runtime Scene.\n  const contextParameterCount = 1; // By convention, latest parameter is always the eventsFunctionContext of the calling function (if any).\n\n  action.setType(getFreeEventsFunctionType(extensionName, eventsFunction));\n  action.setParametersCount(\n    eventsFunction.getParameters().size() +\n      runtimeSceneParameterCount +\n      contextParameterCount\n  );\n\n  mapVector(eventsFunction.getParameters(), (parameterMetadata, index) => {\n    action.setParameter(\n      runtimeSceneParameterCount + index,\n      parameterMetadata.getName()\n    );\n  });\n\n  return action;\n};\n\n/**\n * Validate that a function name is valid.\n */\nexport const validateEventsFunctionName = (functionName: string) => {\n  return gd.Project.validateName(functionName);\n};\n\n/**\n * Validate that an events functions extension name is valid.\n */\nexport const validateExtensionName = (extensionName: string) => {\n  return gd.Project.validateName(extensionName);\n};\n\n/**\n * Validate that an events functions extension name is unique in a project.\n */\nexport const validateExtensionNameUniqueness = (\n  project: gdProject,\n  extensionName: string\n) => {\n  return !project.hasEventsFunctionsExtensionNamed(extensionName);\n};\n\n/**\n * Validate that an events function name is unique in a project extension.\n */\nexport const validateEventsFunctionNameUniqueness = (\n  project: gdProject,\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n) => {\n  if (project.hasEventsFunctionsExtensionNamed(extensionName)) {\n    const eventsFunctionsExtension = project.getEventsFunctionsExtension(\n      extensionName\n    );\n\n    return !eventsFunctionsExtension.hasEventsFunctionNamed(\n      eventsFunction.getName()\n    );\n  }\n\n  return true;\n};\n\n/**\n * Return true if the events function can be added to the given extension\n * without any conflict/invalid name.\n */\nexport const canCreateEventsFunction = (\n  project: gdProject,\n  extensionName: string,\n  eventsFunction: gdEventsFunction\n) => {\n  return (\n    extensionName !== '' &&\n    validateExtensionName(extensionName) &&\n    eventsFunction.getName() !== '' &&\n    validateEventsFunctionName(eventsFunction.getName()) &&\n    validateEventsFunctionNameUniqueness(\n      project,\n      extensionName,\n      eventsFunction\n    ) &&\n    eventsFunction.getFullName() !== '' &&\n    eventsFunction.getSentence() !== ''\n  );\n};\n\n/**\n * Return true if the function is considered to have more parameters than usual.\n */\nexport const functionHasLotsOfParameters = (\n  eventsFunction: gdEventsFunction\n) => {\n  return eventsFunction.getParameters().size() > 7;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport { mapVector } from '../../Utils/MapFor';\nimport RaisedButton from '../../UI/RaisedButton';\nimport IconButton from '../../UI/IconButton';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport ElementWithMenu from '../../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport HelpButton from '../../UI/HelpButton';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport MiniToolbar, { MiniToolbarText } from '../../UI/MiniToolbar';\nimport { showWarningBox } from '../../UI/Messages/MessageBox';\nimport ObjectTypeSelector from '../../ObjectTypeSelector';\nimport BehaviorTypeSelector from '../../BehaviorTypeSelector';\nimport {\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n} from '../../EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers';\nimport { getParametersIndexOffset } from '../../EventsFunctionsExtensionsLoader';\nimport Add from '@material-ui/icons/Add';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\nimport { ColumnStackLayout, ResponsiveLineStackLayout } from '../../UI/Layout';\nimport { getLastObjectParameterObjectType } from '../../EventsSheet/ParameterFields/ParameterMetadataTools';\nimport StringArrayEditor from '../../StringArrayEditor';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  eventsFunction: gdEventsFunction,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  onParametersUpdated: () => void,\n  helpPagePath?: string,\n  freezeParameters?: boolean,\n  onMoveFreeEventsParameter?: (\n    eventsFunction: gdEventsFunction,\n    oldIndex: number,\n    newIndex: number,\n    done: () => void\n  ) => void,\n  onMoveBehaviorEventsParameter?: (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction,\n    oldIndex: number,\n    newIndex: number,\n    done: (boolean) => void\n  ) => void,\n|};\n\ntype State = {|\n  longDescriptionShownIndexes: { [number]: boolean },\n|};\n\nconst styles = {\n  parametersContainer: {\n    flex: 1,\n  },\n};\n\nconst validateParameterName = (i18n: I18nType, newName: string) => {\n  if (!newName) {\n    showWarningBox(\n      i18n._(\n        t`The name of a parameter can not be empty. Enter a name for the parameter or you won't be able to use it.`\n      ),\n      { delayToNextTick: true }\n    );\n    return false;\n  }\n\n  if (!gd.Project.validateName(newName)) {\n    showWarningBox(\n      i18n._(\n        t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n      ),\n      { delayToNextTick: true }\n    );\n    return false;\n  }\n\n  return true;\n};\n\nconst getExtraInfoArray = (parameter: gdParameterMetadata) => {\n  const extraInfoJson = parameter.getExtraInfo();\n  let array = [];\n  try {\n    if (extraInfoJson !== '') array = JSON.parse(extraInfoJson);\n    if (!Array.isArray(array)) array = [];\n  } catch (e) {\n    console.error('Cannot parse parameter extraInfo: ', e);\n  }\n\n  return array;\n};\n\nexport default class EventsFunctionParametersEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    longDescriptionShownIndexes: {},\n  };\n\n  _addParameter = () => {\n    const { eventsFunction } = this.props;\n    const parameters = eventsFunction.getParameters();\n\n    const newParameter = new gd.ParameterMetadata();\n    newParameter.setType('objectList');\n    parameters.push_back(newParameter);\n    newParameter.delete();\n    this.forceUpdate();\n    this.props.onParametersUpdated();\n  };\n\n  _removeParameter = (index: number) => {\n    const { eventsFunction } = this.props;\n    const parameters = eventsFunction.getParameters();\n\n    gd.removeFromVectorParameterMetadata(parameters, index);\n    this.forceUpdate();\n    this.props.onParametersUpdated();\n  };\n\n  _addLongDescription = (index: number) => {\n    // Show the long description field\n    this.setState(state => ({\n      longDescriptionShownIndexes: {\n        ...state.longDescriptionShownIndexes,\n        [index]: true,\n      },\n    }));\n  };\n\n  _removeLongDescription = (index: number) => {\n    const { eventsFunction } = this.props;\n    const parameters = eventsFunction.getParameters();\n    const parameter = parameters.at(index);\n\n    // Reset the long description and hide the field\n    parameter.setLongDescription('');\n    this.setState(state => ({\n      longDescriptionShownIndexes: {\n        ...state.longDescriptionShownIndexes,\n        [index]: false,\n      },\n    }));\n  };\n\n  _moveParameters = (oldIndex: number, newIndex: number) => {\n    const { eventsFunction, eventsBasedBehavior } = this.props;\n    const parameters = eventsFunction.getParameters();\n\n    if (eventsBasedBehavior) {\n      if (this.props.onMoveBehaviorEventsParameter)\n        this.props.onMoveBehaviorEventsParameter(\n          eventsBasedBehavior,\n          eventsFunction,\n          oldIndex,\n          newIndex,\n          isDone => {\n            if (!isDone) return;\n            gd.swapInVectorParameterMetadata(parameters, oldIndex, newIndex);\n            this.forceUpdate();\n            this.props.onParametersUpdated();\n          }\n        );\n    } else {\n      if (this.props.onMoveFreeEventsParameter)\n        this.props.onMoveFreeEventsParameter(\n          eventsFunction,\n          oldIndex,\n          newIndex,\n          isDone => {\n            if (!isDone) return;\n            gd.swapInVectorParameterMetadata(parameters, oldIndex, newIndex);\n            this.forceUpdate();\n            this.props.onParametersUpdated();\n          }\n        );\n    }\n  };\n\n  _setStringSelectorExtraInfo = (parameter: gdParameterMetadata) => {\n    return (newExtraInfo: Array<string>) => {\n      parameter.setExtraInfo(JSON.stringify(newExtraInfo));\n      this.forceUpdate();\n    };\n  };\n\n  render() {\n    const {\n      project,\n      eventsFunction,\n      eventsBasedBehavior,\n      freezeParameters,\n      helpPagePath,\n    } = this.props;\n\n    const parameters = eventsFunction.getParameters();\n    const isABehaviorLifecycleEventsFunction =\n      !!eventsBasedBehavior &&\n      isBehaviorLifecycleEventsFunction(eventsFunction.getName());\n    if (isABehaviorLifecycleEventsFunction) {\n      return (\n        <EmptyMessage>\n          <Trans>\n            This is a \"lifecycle method\". It will be called automatically by the\n            game engine and has two parameters: \"Object\" (the object the\n            behavior is acting on) and \"Behavior\" (the behavior itself).\n          </Trans>\n        </EmptyMessage>\n      );\n    }\n    const isAnExtensionLifecycleEventsFunction =\n      !eventsBasedBehavior &&\n      isExtensionLifecycleEventsFunction(eventsFunction.getName());\n    if (isAnExtensionLifecycleEventsFunction) {\n      return (\n        <Column>\n          <DismissableAlertMessage\n            kind=\"info\"\n            identifier=\"lifecycle-events-function-included-only-if-extension-used\"\n          >\n            <Trans>\n              For the lifecycle functions to be executed, you need the extension\n              to be used in the game, either by having at least one action,\n              condition or expression used, or a behavior of the extension added\n              to an object. Otherwise, the extension won't be included in the\n              game.\n            </Trans>\n          </DismissableAlertMessage>\n          <EmptyMessage>\n            <Trans>\n              This is a \"lifecycle function\". It will be called automatically by\n              the game engine. It has no parameters. Only global objects can be\n              used as the events will be run for all scenes in your game.\n            </Trans>\n          </EmptyMessage>\n        </Column>\n      );\n    }\n\n    const isParameterDisabled = index => {\n      return !!freezeParameters || (!!eventsBasedBehavior && index < 2);\n    };\n    const isParameterDescriptionAndTypeShown = index => {\n      // The first two parameters of a behavior method should not be changed at all,\n      // so we even hide their description and type to avoid cluttering the interface.\n      return !eventsBasedBehavior || index >= 2;\n    };\n    const isParameterLongDescriptionShown = (parameter, index): boolean => {\n      if (!isParameterDescriptionAndTypeShown(index)) return false;\n\n      return (\n        !!parameter.getLongDescription() ||\n        !!this.state.longDescriptionShownIndexes[index]\n      );\n    };\n    const parametersIndexOffset = getParametersIndexOffset(\n      !!eventsBasedBehavior\n    );\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Column noMargin expand>\n            <Line noMargin>\n              <div style={styles.parametersContainer}>\n                {mapVector(\n                  parameters,\n                  (parameter: gdParameterMetadata, i: number) => (\n                    <React.Fragment key={i}>\n                      <MiniToolbar>\n                        <MiniToolbarText firstChild>\n                          <Trans>Parameter #{i + parametersIndexOffset}:</Trans>\n                        </MiniToolbarText>\n                        <Column expand noMargin>\n                          <SemiControlledTextField\n                            commitOnBlur\n                            margin=\"none\"\n                            hintText={t`Enter the parameter name (mandatory)`}\n                            value={parameter.getName()}\n                            onChange={text => {\n                              if (!validateParameterName(i18n, text)) return;\n\n                              parameter.setName(text);\n                              this.forceUpdate();\n                              this.props.onParametersUpdated();\n                            }}\n                            disabled={isParameterDisabled(i)}\n                            fullWidth\n                          />\n                        </Column>\n                        <ElementWithMenu\n                          element={\n                            <IconButton>\n                              <MoreVert />\n                            </IconButton>\n                          }\n                          buildMenuTemplate={(i18n: I18nType) => [\n                            {\n                              label: i18n._(t`Delete`),\n                              enabled: !isParameterDisabled(i),\n                              click: () => this._removeParameter(i),\n                            },\n                            { type: 'separator' },\n                            {\n                              label: i18n._(t`Add a Long Description`),\n                              enabled: !isParameterDisabled(i),\n                              visible: !isParameterLongDescriptionShown(\n                                parameter,\n                                i\n                              ),\n                              click: () => this._addLongDescription(i),\n                            },\n                            {\n                              label: i18n._(t`Remove the Long Description`),\n                              enabled: !isParameterDisabled(i),\n                              visible: isParameterLongDescriptionShown(\n                                parameter,\n                                i\n                              ),\n                              click: () => this._removeLongDescription(i),\n                            },\n                            {\n                              label: i18n._(t`Move up`),\n                              click: () => this._moveParameters(i, i - 1),\n                              enabled:\n                                !isParameterDisabled(i) &&\n                                i - 1 >= 0 &&\n                                !isParameterDisabled(i - 1),\n                            },\n                            {\n                              label: i18n._(t`Move down`),\n                              click: () => this._moveParameters(i, i + 1),\n                              enabled:\n                                !isParameterDisabled(i) &&\n                                i + 1 < parameters.size() &&\n                                !isParameterDisabled(i + 1),\n                            },\n                          ]}\n                        />\n                      </MiniToolbar>\n                      <Line>\n                        <ColumnStackLayout expand>\n                          <ResponsiveLineStackLayout noMargin>\n                            {isParameterDescriptionAndTypeShown(i) && (\n                              <SelectField\n                                floatingLabelText={<Trans>Type</Trans>}\n                                value={parameter.getType()}\n                                onChange={(e, i, value: string) => {\n                                  parameter.setType(value);\n                                  this.forceUpdate();\n                                  this.props.onParametersUpdated();\n                                }}\n                                disabled={isParameterDisabled(i)}\n                                fullWidth\n                              >\n                                <SelectOption\n                                  value=\"objectList\"\n                                  primaryText={t`Objects`}\n                                />\n                                <SelectOption\n                                  value=\"behavior\"\n                                  primaryText={t`Behavior (for the previous object)`}\n                                />\n                                <SelectOption\n                                  value=\"expression\"\n                                  primaryText={t`Number`}\n                                />\n                                <SelectOption\n                                  value=\"string\"\n                                  primaryText={t`String (text)`}\n                                />\n                                <SelectOption\n                                  value=\"stringWithSelector\"\n                                  primaryText={t`String from a list of options (text)`}\n                                />\n                                <SelectOption\n                                  value=\"key\"\n                                  primaryText={t`Keyboard Key (text)`}\n                                />\n                                <SelectOption\n                                  value=\"mouse\"\n                                  primaryText={t`Mouse button (text)`}\n                                />\n                                <SelectOption\n                                  value=\"color\"\n                                  primaryText={t`Color (text)`}\n                                />\n                                <SelectOption\n                                  value=\"layer\"\n                                  primaryText={t`Layer (text)`}\n                                />\n                                <SelectOption\n                                  value=\"sceneName\"\n                                  primaryText={t`Scene name (text)`}\n                                />\n                                <SelectOption\n                                  value=\"yesorno\"\n                                  primaryText={t`Yes or No (boolean)`}\n                                />\n                                <SelectOption\n                                  value=\"trueorfalse\"\n                                  primaryText={t`True or False (boolean)`}\n                                />\n                                <SelectOption\n                                  value=\"objectPointName\"\n                                  primaryText={t`Object point (text)`}\n                                />\n                                <SelectOption\n                                  value=\"objectAnimationName\"\n                                  primaryText={t`Object animation (text)`}\n                                />\n                              </SelectField>\n                            )}\n                            {gd.ParameterMetadata.isObject(\n                              parameter.getType()\n                            ) && (\n                              <ObjectTypeSelector\n                                project={project}\n                                value={parameter.getExtraInfo()}\n                                onChange={(value: string) => {\n                                  parameter.setExtraInfo(value);\n                                  this.forceUpdate();\n                                  this.props.onParametersUpdated();\n                                }}\n                                disabled={isParameterDisabled(i)}\n                              />\n                            )}\n                            {parameter.getType() === 'behavior' && (\n                              <BehaviorTypeSelector\n                                project={project}\n                                objectType={getLastObjectParameterObjectType(\n                                  parameters,\n                                  i\n                                )}\n                                value={parameter.getExtraInfo()}\n                                onChange={(value: string) => {\n                                  parameter.setExtraInfo(value);\n                                  this.forceUpdate();\n                                  this.props.onParametersUpdated();\n                                }}\n                                disabled={isParameterDisabled(i)}\n                              />\n                            )}\n                          </ResponsiveLineStackLayout>\n                          {parameter.getType() === 'stringWithSelector' && (\n                            <StringArrayEditor\n                              extraInfo={getExtraInfoArray(parameter)}\n                              setExtraInfo={this._setStringSelectorExtraInfo(\n                                parameter\n                              )}\n                            />\n                          )}\n                          {isParameterDescriptionAndTypeShown(i) && (\n                            <SemiControlledTextField\n                              commitOnBlur\n                              floatingLabelText={<Trans>Label</Trans>}\n                              floatingLabelFixed\n                              value={parameter.getDescription()}\n                              onChange={text => {\n                                parameter.setDescription(text);\n                                this.forceUpdate();\n                              }}\n                              fullWidth\n                              disabled={\n                                false /* Label, if shown, can always be changed */\n                              }\n                            />\n                          )}\n                          {isParameterLongDescriptionShown(parameter, i) && (\n                            <SemiControlledTextField\n                              commitOnBlur\n                              floatingLabelText={\n                                <Trans>Long description</Trans>\n                              }\n                              floatingLabelFixed\n                              value={parameter.getLongDescription()}\n                              onChange={text => {\n                                parameter.setLongDescription(text);\n                                this.forceUpdate();\n                              }}\n                              multiline\n                              fullWidth\n                              disabled={\n                                false /* Long description, if shown, can always be changed */\n                              }\n                            />\n                          )}\n                        </ColumnStackLayout>\n                      </Line>\n                    </React.Fragment>\n                  )\n                )}\n                {parameters.size() === 0 ? (\n                  <EmptyMessage>\n                    <Trans>No parameters for this function.</Trans>\n                  </EmptyMessage>\n                ) : null}\n                <Column>\n                  <Line justifyContent=\"flex-end\" expand>\n                    {!freezeParameters && (\n                      <RaisedButton\n                        primary\n                        label={<Trans>Add a parameter</Trans>}\n                        onClick={this._addParameter}\n                        icon={<Add />}\n                      />\n                    )}\n                  </Line>\n                </Column>\n              </div>\n            </Line>\n            {helpPagePath ? (\n              <Line>\n                <HelpButton helpPagePath={helpPagePath} />\n              </Line>\n            ) : (\n              <Spacer />\n            )}\n          </Column>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport {\n  enumerateObjectTypes,\n  type EnumeratedObjectMetadata,\n} from '../ObjectsList/EnumerateObjects';\n\ntype Props = {|\n  project: gdProject,\n  floatingLabelText?: React.Node,\n  value: string,\n  onChange: string => void,\n  disabled?: boolean,\n  allowedObjectTypes?: ?Array<string>,\n|};\ntype State = {|\n  objectMetadata: Array<EnumeratedObjectMetadata>,\n|};\n\nexport default class ObjectTypeSelector extends React.Component<Props, State> {\n  state = {\n    objectMetadata: enumerateObjectTypes(this.props.project),\n  };\n\n  render() {\n    const {\n      disabled,\n      value,\n      onChange,\n      floatingLabelText,\n      allowedObjectTypes,\n    } = this.props;\n    const { objectMetadata } = this.state;\n\n    const isDisabled = (type: string) => {\n      if (!allowedObjectTypes) return false;\n\n      return allowedObjectTypes.indexOf(type) === -1;\n    };\n\n    return (\n      <SelectField\n        floatingLabelText={floatingLabelText || <Trans>Object type</Trans>}\n        value={value}\n        onChange={(e, i, value: string) => {\n          onChange(value);\n        }}\n        disabled={disabled}\n        fullWidth\n      >\n        <SelectOption\n          value=\"\"\n          primaryText={t`Any object`}\n          disabled={isDisabled('')}\n        />\n        {objectMetadata.map((metadata: EnumeratedObjectMetadata) => {\n          if (metadata.name === '') {\n            // Base object is an \"abstract\" object\n            return null;\n          }\n\n          return (\n            <SelectOption\n              key={metadata.name}\n              value={metadata.name}\n              primaryText={metadata.fullName}\n              disabled={isDisabled(metadata.name)}\n            />\n          );\n        })}\n      </SelectField>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport {\n  type EnumeratedBehaviorMetadata,\n  enumerateBehaviorsMetadata,\n} from '../BehaviorsEditor/EnumerateBehaviorsMetadata';\n\ntype Props = {|\n  project: gdProject,\n  objectType: string,\n  value: string,\n  onChange: string => void,\n  disabled?: boolean,\n|};\ntype State = {|\n  behaviorMetadata: Array<EnumeratedBehaviorMetadata>,\n|};\n\nexport default class BehaviorTypeSelector extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    behaviorMetadata: enumerateBehaviorsMetadata(\n      this.props.project.getCurrentPlatform(),\n      this.props.project\n    ),\n  };\n\n  render() {\n    const { disabled, objectType, value, onChange } = this.props;\n    const { behaviorMetadata } = this.state;\n\n    // If the behavior type is not in the list, we'll still\n    // add a menu item for it so that the value is displayed\n    // on screen.\n    const valueIsListed = !!behaviorMetadata.find(({ type }) => type === value);\n\n    return (\n      <SelectField\n        floatingLabelText={<Trans>Behavior type</Trans>}\n        value={value}\n        onChange={(e, i, value: string) => {\n          onChange(value);\n        }}\n        disabled={disabled}\n        fullWidth\n      >\n        {behaviorMetadata.map((metadata: EnumeratedBehaviorMetadata) => (\n          <SelectOption\n            key={metadata.type}\n            value={metadata.type}\n            primaryText={metadata.fullName}\n            disabled={\n              metadata.objectType !== '' && metadata.objectType !== objectType\n            }\n          />\n        ))}\n        {!valueIsListed && value && (\n          <SelectOption value={value} primaryText={value} />\n        )}\n      </SelectField>\n    );\n  }\n}\n","// @flow\nimport { mapFor } from '../Utils/MapFor';\nimport flatten from 'lodash/flatten';\n\nexport type EnumeratedBehaviorMetadata = {|\n  extension: gdPlatformExtension,\n  behaviorMetadata: gdBehaviorMetadata,\n  type: string,\n  objectType: string,\n  defaultName: string,\n  fullName: string,\n  description: string,\n  iconFilename: string,\n|};\n\nexport const enumerateBehaviorsMetadata = (\n  platform: gdPlatform,\n  project: gdProject\n): Array<EnumeratedBehaviorMetadata> => {\n  const extensionsList = platform.getAllPlatformExtensions();\n\n  return flatten(\n    mapFor(0, extensionsList.size(), i => {\n      const extension = extensionsList.at(i);\n\n      return extension\n        .getBehaviorsTypes()\n        .toJSArray()\n        .map(behaviorType => ({\n          behaviorType,\n          behaviorMetadata: extension.getBehaviorMetadata(behaviorType),\n        }))\n        .map(({ behaviorType, behaviorMetadata }) => ({\n          extension,\n          behaviorMetadata,\n          type: behaviorType,\n          defaultName: behaviorMetadata.getDefaultName(),\n          fullName: behaviorMetadata.getFullName(),\n          description: behaviorMetadata.getDescription(),\n          iconFilename: behaviorMetadata.getIconFilename(),\n          objectType: behaviorMetadata.getObjectType(),\n        }));\n    })\n  );\n};\n\nexport const filterEnumeratedBehaviorMetadata = (\n  list: Array<EnumeratedBehaviorMetadata>,\n  searchText: string\n): Array<EnumeratedBehaviorMetadata> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(enumerateBehaviorsMetadata => {\n    return (\n      enumerateBehaviorsMetadata.fullName\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1 ||\n      enumerateBehaviorsMetadata.description\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n    );\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { ResponsiveLineStackLayout } from '../UI/Layout';\nimport { Line, Column } from '../UI/Grid';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport { IconButton } from '@material-ui/core';\nimport Delete from '@material-ui/icons/Delete';\nimport RaisedButton from '../UI/RaisedButton';\nimport Add from '@material-ui/icons/Add';\n\ntype StringArrayEditorProps = {|\n  extraInfo: Array<string>,\n  setExtraInfo: (Array<string>) => void,\n|};\n\nconst StringArrayEditor = ({\n  extraInfo,\n  setExtraInfo,\n}: StringArrayEditorProps) => {\n  const updateExtraInfo = () => setExtraInfo(extraInfo);\n\n  return (\n    <ResponsiveLineStackLayout>\n      <Column justifyContent=\"flex-end\" expand>\n        {extraInfo.map((item, index) => (\n          <Line key={index} justifyContent=\"flex-end\" expand>\n            <SemiControlledTextField\n              commitOnBlur\n              value={item}\n              onChange={text => {\n                extraInfo[index] = text;\n                updateExtraInfo();\n              }}\n              fullWidth\n            />\n            <IconButton\n              tooltip={t`Delete option`}\n              onClick={() => {\n                extraInfo.splice(index, 1);\n                updateExtraInfo();\n              }}\n            >\n              <Delete />\n            </IconButton>\n          </Line>\n        ))}\n\n        <Line justifyContent=\"flex-end\" expand>\n          <RaisedButton\n            primary\n            onClick={() => {\n              extraInfo.push('New Option');\n              updateExtraInfo();\n            }}\n            label={<Trans>Add a new option</Trans>}\n            icon={<Add />}\n          />\n        </Line>\n      </Column>\n    </ResponsiveLineStackLayout>\n  );\n};\n\nexport default StringArrayEditor;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport { mapVector } from '../../Utils/MapFor';\nimport HelpButton from '../../UI/HelpButton';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport {\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n} from '../../EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { getParametersIndexOffset } from '../../EventsFunctionsExtensionsLoader';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../../UI/Layout';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  eventsFunction: gdEventsFunction,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  helpPagePath?: string,\n  onConfigurationUpdated?: () => void,\n  renderConfigurationHeader?: () => React.Node,\n  freezeEventsFunctionType?: boolean,\n|};\n\ntype State = {||};\n\nconst styles = {\n  icon: {\n    height: 32,\n    marginRight: 8,\n    flexSrink: 0,\n  },\n};\n\nconst getSentenceErrorText = (\n  i18n: I18nType,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  eventsFunction: gdEventsFunction\n) => {\n  const sentence = eventsFunction.getSentence();\n  if (!sentence)\n    return i18n._(\n      t`Enter the sentence that will be displayed in the events sheet`\n    );\n\n  const parametersIndexOffset = getParametersIndexOffset(!!eventsBasedBehavior);\n\n  const missingParameters = mapVector(\n    eventsFunction.getParameters(),\n    (parameter, index) => {\n      if (gd.ParameterMetadata.isBehavior(parameter.getType())) {\n        return null; // Behaviors are usually not shown in sentences.\n      }\n\n      const expectedString = `_PARAM${index + parametersIndexOffset}_`;\n      if (sentence.indexOf(expectedString) === -1) return expectedString;\n\n      return null;\n    }\n  ).filter(Boolean);\n\n  if (missingParameters.length) {\n    return (\n      i18n._(t`The sentence is probably missing this/these parameter(s):`) +\n      missingParameters.join(', ')\n    );\n  }\n\n  return undefined;\n};\n\nconst getFullNameHintText = (type: any): MessageDescriptor => {\n  if (type === gd.EventsFunction.Condition) {\n    return t`Example: Is flashing?`;\n  } else if (type === gd.EventsFunction.Expression) {\n    return t`Example: Life remaining`;\n  } else if (type === gd.EventsFunction.StringExpression) {\n    return t`Example: Equipped shield name`;\n  }\n\n  return t`Example: Flash the object`;\n};\n\nconst getDescriptionHintText = (type: any): MessageDescriptor => {\n  if (type === gd.EventsFunction.Condition) {\n    return t`Example: Check if the object is flashing.`;\n  } else if (type === gd.EventsFunction.Expression) {\n    return t`Example: Life remaining for the player.`;\n  } else if (type === gd.EventsFunction.StringExpression) {\n    return t`Example: Name of the shield equipped by the player.`;\n  }\n\n  return t`Example: Make the object flash for 5 seconds.`;\n};\n\nexport default class EventsFunctionPropertiesEditor extends React.Component<\n  Props,\n  State\n> {\n  render() {\n    const {\n      eventsFunction,\n      freezeEventsFunctionType,\n      onConfigurationUpdated,\n      helpPagePath,\n      renderConfigurationHeader,\n      eventsBasedBehavior,\n    } = this.props;\n\n    const type = eventsFunction.getFunctionType();\n    const isABehaviorLifecycleEventsFunction =\n      !!eventsBasedBehavior &&\n      isBehaviorLifecycleEventsFunction(eventsFunction.getName());\n    if (isABehaviorLifecycleEventsFunction) {\n      return (\n        <EmptyMessage>\n          <Trans>\n            This is a \"lifecycle method\". It will be called automatically by the\n            game engine for each instance living on the scene having the\n            behavior.\n          </Trans>\n        </EmptyMessage>\n      );\n    }\n\n    const isAnExtensionLifecycleEventsFunction =\n      !eventsBasedBehavior &&\n      isExtensionLifecycleEventsFunction(eventsFunction.getName());\n    if (isAnExtensionLifecycleEventsFunction) {\n      return (\n        <Column>\n          <DismissableAlertMessage\n            kind=\"info\"\n            identifier=\"lifecycle-events-function-included-only-if-extension-used\"\n          >\n            <Trans>\n              For the lifecycle functions to be executed, you need the extension\n              to be used in the game, either by having at least one action,\n              condition or expression used, or a behavior of the extension added\n              to an object. Otherwise, the extension won't be included in the\n              game.\n            </Trans>\n          </DismissableAlertMessage>\n          <EmptyMessage>\n            <Trans>\n              This is a \"lifecycle function\". It will be called automatically by\n              the game engine. It has no parameters. Only global objects can be\n              used as the events will be run for all scenes in your game.\n            </Trans>\n          </EmptyMessage>\n        </Column>\n      );\n    }\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <ColumnStackLayout expand>\n            {renderConfigurationHeader ? renderConfigurationHeader() : null}\n            <ResponsiveLineStackLayout alignItems=\"center\" noMargin>\n              <Line alignItems=\"center\" noMargin>\n                <img src=\"res/function32.png\" alt=\"\" style={styles.icon} />\n                <SelectField\n                  value={type}\n                  floatingLabelText={<Trans>Function type</Trans>}\n                  fullWidth\n                  disabled={!!freezeEventsFunctionType}\n                  onChange={(e, i, value: string) => {\n                    // $FlowFixMe\n                    eventsFunction.setFunctionType(value);\n                    if (onConfigurationUpdated) onConfigurationUpdated();\n                    this.forceUpdate();\n                  }}\n                >\n                  <SelectOption\n                    value={gd.EventsFunction.Action}\n                    primaryText={t`Action`}\n                  />\n                  <SelectOption\n                    value={gd.EventsFunction.Condition}\n                    primaryText={t`Condition`}\n                  />\n                  <SelectOption\n                    value={gd.EventsFunction.Expression}\n                    primaryText={t`Expression`}\n                  />\n                  <SelectOption\n                    value={gd.EventsFunction.StringExpression}\n                    primaryText={t`String Expression`}\n                  />\n                </SelectField>\n              </Line>\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={<Trans>Full name displayed in editor</Trans>}\n                hintText={getFullNameHintText(type)}\n                value={eventsFunction.getFullName()}\n                onChange={text => {\n                  eventsFunction.setFullName(text);\n                  if (onConfigurationUpdated) onConfigurationUpdated();\n                  this.forceUpdate();\n                }}\n                fullWidth\n              />\n            </ResponsiveLineStackLayout>\n            <Line noMargin>\n              <SemiControlledTextField\n                commitOnBlur\n                floatingLabelText={\n                  <Trans>Description, displayed in editor</Trans>\n                }\n                hintText={getDescriptionHintText(type)}\n                fullWidth\n                multiline\n                value={eventsFunction.getDescription()}\n                onChange={text => {\n                  eventsFunction.setDescription(text);\n                  if (onConfigurationUpdated) onConfigurationUpdated();\n                  this.forceUpdate();\n                }}\n              />\n            </Line>\n            <Line noMargin>\n              {type === gd.EventsFunction.Action ||\n              type === gd.EventsFunction.Condition ? (\n                <SemiControlledTextField\n                  commitOnBlur\n                  floatingLabelText={<Trans>Sentence in Events Sheet</Trans>}\n                  hintText={t`Note: write _PARAMx_ for parameters, e.g: Flash _PARAM1_ for 5 seconds`}\n                  fullWidth\n                  value={eventsFunction.getSentence()}\n                  onChange={text => {\n                    eventsFunction.setSentence(text);\n                    if (onConfigurationUpdated) onConfigurationUpdated();\n                    this.forceUpdate();\n                  }}\n                  errorText={getSentenceErrorText(\n                    i18n,\n                    eventsBasedBehavior,\n                    eventsFunction\n                  )}\n                />\n              ) : null}\n            </Line>\n            {helpPagePath ? (\n              <Line noMargin>\n                <HelpButton helpPagePath={helpPagePath} />\n              </Line>\n            ) : (\n              <Spacer />\n            )}\n          </ColumnStackLayout>\n        )}\n      </I18n>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport IconButton from '../IconButton';\nimport Close from '@material-ui/icons/Close';\nimport { MosaicWindowContext, MosaicContext } from 'react-mosaic-component';\n\nconst styles = {\n  container: {\n    padding: 0,\n    width: 32,\n    height: 32,\n  },\n  icon: {\n    width: 16,\n    height: 16,\n  },\n};\n\nexport default class CloseButton extends Component {\n  render() {\n    return (\n      <MosaicContext.Consumer>\n        {({ mosaicActions }) => (\n          <MosaicWindowContext.Consumer>\n            {({ mosaicWindowActions }) => (\n              <IconButton\n                onClick={() => {\n                  mosaicActions.remove(mosaicWindowActions.getPath());\n                }}\n                style={styles.container}\n              >\n                <Close htmlColor=\"white\" style={styles.icon} />\n              </IconButton>\n            )}\n          </MosaicWindowContext.Consumer>\n        )}\n      </MosaicContext.Consumer>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport EventsFunctionsExtensionEditor from '../../EventsFunctionsExtensionEditor';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n};\n\nexport class EventsFunctionsExtensionEditorContainer extends React.Component<RenderEditorContainerProps> {\n  editor: ?EventsFunctionsExtensionEditor;\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  getLayout(): ?gdLayout {\n    return null;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // This optimization is a bit more cautious than the traditional one,\n    // to still be notified when isActive goes from true to false.\n    if (!this.props.isActive && !nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  componentDidUpdate(prevProps: *) {\n    // Ensure that the editor will trigger the\n    // reload/regeneration of extensions when the user\n    // is focusing another editor\n    if (prevProps.isActive && !this.props.isActive) {\n      this.props.onLoadEventsFunctionsExtensions();\n    }\n  }\n\n  componentWillUnmount() {\n    // Ensure that a closed editor will still trigger the\n    // reload/regeneration of extensions, as changes can have\n    // been made inside before it's closed.\n    if (this.props.isActive) {\n      this.props.onLoadEventsFunctionsExtensions();\n    }\n  }\n\n  _onBehaviorEdited = async () => {\n    // Immediately trigger the reload/regeneration of extensions\n    // as a change in the properties of a behavior can create changes\n    // in actions/conditions/expressions to manipulate these properties.\n    try {\n      await this.props.onLoadEventsFunctionsExtensions();\n    } catch (error) {\n      console.warn(\n        'Error while loading events functions extensions - ignoring this in the context of the EventsFunctionsExtensionEditorContainer.',\n        error\n      );\n    }\n  };\n\n  previewWillStart = () => {\n    // Immediately trigger the reload/regeneration of extensions\n    // if a preview is about to start, as changes chan have been made\n    // inside. The preview is responsible for waiting for extensions\n    // to be loaded before starting.\n    if (this.props.isActive) {\n      this.props.onLoadEventsFunctionsExtensions();\n    }\n  };\n\n  getEventsFunctionsExtension(): ?gdEventsFunctionsExtension {\n    const { project, projectItemName } = this.props;\n    if (!project || !projectItemName) return null;\n\n    if (!project.hasEventsFunctionsExtensionNamed(projectItemName)) {\n      return null;\n    }\n    return project.getEventsFunctionsExtension(projectItemName);\n  }\n\n  selectEventsFunctionByName(\n    eventsFunctionName: string,\n    behaviorName: ?string\n  ) {\n    if (this.editor)\n      this.editor.selectEventsFunctionByName(eventsFunctionName, behaviorName);\n  }\n\n  render() {\n    const { project, projectItemName } = this.props;\n    const eventsFunctionsExtension = this.getEventsFunctionsExtension();\n\n    if (!eventsFunctionsExtension || !project) {\n      //TODO: Error component\n      return <div>No extension called {projectItemName} found!</div>;\n    }\n\n    const { initiallyFocusedFunctionName, initiallyFocusedBehaviorName } =\n      this.props.extraEditorProps || {};\n\n    return (\n      <div style={styles.container}>\n        <EventsFunctionsExtensionEditor\n          key={eventsFunctionsExtension.ptr}\n          project={project}\n          eventsFunctionsExtension={eventsFunctionsExtension}\n          setToolbar={this.props.setToolbar}\n          resourceSources={this.props.resourceSources}\n          onChooseResource={this.props.onChooseResource}\n          resourceExternalEditors={this.props.resourceExternalEditors}\n          openInstructionOrExpression={this.props.openInstructionOrExpression}\n          onCreateEventsFunction={this.props.onCreateEventsFunction}\n          initiallyFocusedFunctionName={initiallyFocusedFunctionName}\n          initiallyFocusedBehaviorName={initiallyFocusedBehaviorName}\n          onBehaviorEdited={this._onBehaviorEdited}\n          ref={editor => (this.editor = editor)}\n          unsavedChanges={this.props.unsavedChanges}\n        />\n      </div>\n    );\n  }\n}\n\nexport const renderEventsFunctionsExtensionEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <EventsFunctionsExtensionEditorContainer {...props} />;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport ObjectGroupEditor from '.';\nimport Dialog from '../UI/Dialog';\nimport { useSerializableObjectCancelableEditor } from '../Utils/SerializableObjectCancelableEditor';\nimport useForceUpdate from '../Utils/UseForceUpdate';\n\ntype Props = {|\n  project: gdProject,\n  group: gdObjectGroup,\n  onApply: () => void,\n  onCancel: () => void,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n|};\n\nconst ObjectGroupEditorDialog = ({\n  project,\n  group,\n  onApply,\n  onCancel,\n  globalObjectsContainer,\n  objectsContainer,\n}: Props) => {\n  const forceUpdate = useForceUpdate();\n  const onCancelChanges = useSerializableObjectCancelableEditor({\n    serializableObject: group,\n    onCancel,\n  });\n\n  return (\n    <Dialog\n      onApply={onApply}\n      key={group.ptr}\n      actions={[\n        <FlatButton\n          key=\"cancel\"\n          label={<Trans>Cancel</Trans>}\n          keyboardFocused\n          onClick={onCancelChanges}\n        />,\n        <FlatButton\n          key=\"apply\"\n          label={<Trans>Apply</Trans>}\n          primary\n          keyboardFocused\n          onClick={onApply}\n        />,\n      ]}\n      noMargin\n      cannotBeDismissed={true}\n      onRequestClose={onCancelChanges}\n      open\n      title={`Edit ${group.getName()} group`}\n    >\n      <ObjectGroupEditor\n        project={project}\n        group={group}\n        globalObjectsContainer={globalObjectsContainer}\n        objectsContainer={objectsContainer}\n        onSizeUpdated={\n          forceUpdate /*Force update to ensure dialog is properly positionned*/\n        }\n      />\n    </Dialog>\n  );\n};\n\nexport default ObjectGroupEditorDialog;\n","// @flow\nimport * as React from 'react';\nimport { type FiltersState, useFilters } from '../../UI/Search/FiltersChooser';\nimport {\n  type Resource,\n  type Author,\n  type License,\n  listAllAuthors,\n  listAllLicenses,\n  listAllResources,\n} from '../../Utils/GDevelopServices/Asset';\nimport { type Filters } from '../../Utils/GDevelopServices/Filters';\nimport { useSearchItem } from '../../UI/Search/UseSearchItem';\n\nconst defaultSearchText = '';\n\ntype ResourceStoreState = {|\n  filters: ?Filters,\n  authors: ?Array<Author>,\n  licenses: ?Array<License>,\n  searchResults: ?Array<Resource>,\n  fetchResourcesAndFilters: () => void,\n  error: ?Error,\n  searchText: string,\n  setSearchText: string => void,\n  filtersState: FiltersState,\n|};\n\nexport const ResourceStoreContext = React.createContext<ResourceStoreState>({\n  filters: null,\n  authors: null,\n  licenses: null,\n  searchResults: null,\n  fetchResourcesAndFilters: () => {},\n  error: null,\n  searchText: '',\n  setSearchText: () => {},\n  filtersState: {\n    chosenFilters: new Set(),\n    addFilter: () => {},\n    removeFilter: () => {},\n    chosenCategory: null,\n    setChosenCategory: () => {},\n  },\n});\n\ntype ResourceStoreStateProviderProps = {|\n  children: React.Node,\n|};\n\nconst getResourceSearchTerms = (resource: Resource) => {\n  return resource.name + '\\n' + resource.tags.join(', ');\n};\n\nexport const ResourceStoreStateProvider = ({\n  children,\n}: ResourceStoreStateProviderProps) => {\n  const [resourcesByUrl, setResourcesByUrl] = React.useState<?{\n    [string]: Resource,\n  }>(null);\n  const [filters, setFilters] = React.useState<?Filters>(null);\n  const [authors, setAuthors] = React.useState<?Array<Author>>(null);\n  const [licenses, setLicenses] = React.useState<?Array<License>>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const isLoading = React.useRef<boolean>(false);\n\n  const [searchText, setSearchText] = React.useState(defaultSearchText);\n  const filtersState = useFilters();\n\n  const fetchResourcesAndFilters = React.useCallback(\n    () => {\n      // Don't attempt to load again resources and filters if they\n      // were loaded already.\n      if (resourcesByUrl || isLoading.current) return;\n\n      (async () => {\n        setError(null);\n        isLoading.current = true;\n\n        try {\n          const { resources, filters } = await listAllResources();\n          const authors = await listAllAuthors();\n          const licenses = await listAllLicenses();\n\n          const resourcesByUrl = {};\n          resources.forEach(resource => {\n            resourcesByUrl[resource.url] = resource;\n          });\n\n          console.info(\n            `Loaded ${resources.length} resources from the asset store.`\n          );\n          setResourcesByUrl(resourcesByUrl);\n          setFilters(filters);\n          setAuthors(authors);\n          setLicenses(licenses);\n        } catch (error) {\n          console.error(\n            `Unable to load the assets from the asset store:`,\n            error\n          );\n          setError(error);\n        }\n\n        isLoading.current = false;\n      })();\n    },\n    [resourcesByUrl, isLoading]\n  );\n\n  const { chosenCategory, chosenFilters } = filtersState;\n  const searchResults: ?Array<Resource> = useSearchItem(\n    resourcesByUrl,\n    getResourceSearchTerms,\n    searchText,\n    chosenCategory,\n    chosenFilters\n  );\n\n  const resourceStoreState = React.useMemo(\n    () => ({\n      searchResults,\n      fetchResourcesAndFilters,\n      filters,\n      authors,\n      licenses,\n      error,\n      searchText,\n      setSearchText,\n      filtersState,\n    }),\n    [\n      searchResults,\n      error,\n      filters,\n      authors,\n      licenses,\n      searchText,\n      filtersState,\n      fetchResourcesAndFilters,\n    ]\n  );\n\n  return (\n    <ResourceStoreContext.Provider value={resourceStoreState}>\n      {children}\n    </ResourceStoreContext.Provider>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport PlaceholderLoader from '../PlaceholderLoader';\nimport PlaceholderError from '../PlaceholderError';\nimport ErrorBoundary from '../ErrorBoundary';\nimport { AutoSizer, Grid } from 'react-virtualized';\nimport EmptyMessage from '../EmptyMessage';\n\ntype Props<SearchItem> = {|\n  searchItems: ?Array<SearchItem>,\n  renderSearchItem: (item: SearchItem, size: number) => React.Node,\n  error: ?Error,\n  onRetry: () => void,\n  baseSize: number,\n|};\n\nconst styles = {\n  container: { flex: 1 },\n  grid: { overflowX: 'hidden' },\n};\n\nexport const BoxSearchResults = <SearchItem>({\n  searchItems,\n  renderSearchItem,\n  error,\n  onRetry,\n  baseSize,\n}: Props<SearchItem>) => {\n  if (!searchItems) {\n    if (!error) return <PlaceholderLoader />;\n    else {\n      return (\n        <PlaceholderError onRetry={onRetry}>\n          <Trans>\n            Can't load the results. Verify your internet connection or retry\n            later.\n          </Trans>\n        </PlaceholderError>\n      );\n    }\n  } else if (searchItems.length === 0) {\n    return (\n      <EmptyMessage>\n        <Trans>\n          No results returned for your search. Try something else, browse the\n          categories or create your object from scratch!\n        </Trans>\n      </EmptyMessage>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div style={styles.container}>\n        <AutoSizer>\n          {({ width, height }) => {\n            if (!width || !height) return null;\n\n            const columnCount = Math.max(Math.floor((width - 5) / baseSize), 1);\n            const columnWidth = Math.max(Math.floor(width / columnCount), 30);\n            const rowCount = Math.max(\n              1,\n              Math.ceil(searchItems.length / columnCount)\n            );\n\n            function cellRenderer({ columnIndex, key, rowIndex, style }) {\n              const indexInList = rowIndex * columnCount + columnIndex;\n              const searchItem =\n                indexInList < searchItems.length\n                  ? searchItems[indexInList]\n                  : null;\n\n              return (\n                <div key={key} style={style}>\n                  {searchItem\n                    ? renderSearchItem(searchItem, columnWidth)\n                    : null}\n                </div>\n              );\n            }\n\n            return (\n              <Grid\n                width={width}\n                height={height}\n                columnCount={columnCount}\n                columnWidth={columnWidth}\n                rowHeight={columnWidth}\n                rowCount={rowCount}\n                cellRenderer={cellRenderer}\n                style={styles.grid}\n              />\n            );\n          }}\n        </AutoSizer>\n      </div>\n    </ErrorBoundary>\n  );\n};\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -3 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Create\" fillRule=\"nonzero\">\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"24 8 18 2 18 6 14 6 14 10 18 10 18 14\"\n        />\n        <g id=\"Group-2\" fill=\"#27AAE1\">\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(2.999518, 3.574897) rotate(-45.000000) translate(-2.999518, -3.574897) \"\n            x=\"1.58553176\"\n            y=\"0.746924118\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(10.999518, 11.574897) rotate(-45.000000) translate(-10.999518, -11.574897) \"\n            x=\"9.58553176\"\n            y=\"8.74692412\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(2.999518, 11.574897) rotate(-135.000000) translate(-2.999518, -11.574897) \"\n            x=\"1.58553176\"\n            y=\"8.74692412\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            transform=\"translate(10.999518, 3.574897) rotate(-135.000000) translate(-10.999518, -3.574897) \"\n            x=\"9.58553176\"\n            y=\"0.746924118\"\n            width=\"2.82797288\"\n            height=\"5.65594576\"\n          />\n        </g>\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -6 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Step\" fillRule=\"nonzero\">\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"7.5 4.5 3 0 3 3 0 3 0 6 3 6 3 9\"\n        />\n        <circle id=\"Oval\" fill=\"#27AAE1\" cx=\"12\" cy=\"4.5\" r=\"3\" />\n        <circle id=\"Oval\" fill=\"#FFFFFF\" cx=\"12\" cy=\"4.5\" r=\"1.5\" />\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"24 4.5 19.5 0 19.5 3 16.5 3 16.5 6 19.5 6 19.5 9\"\n        />\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -3 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g\n        id=\"Destroy\"\n        transform=\"translate(0.000000, -1.000000)\"\n        fillRule=\"nonzero\"\n      >\n        <g id=\"Group\" transform=\"translate(0.000000, 1.000000)\">\n          <polygon\n            id=\"Shape\"\n            fill=\"#2B3990\"\n            points=\"9.92307692 7.07692308 4.38461538 1.53846154 4.38461538 5.23076923 0.692307692 5.23076923 0.692307692 8.92307692 4.38461538 8.92307692 4.38461538 12.6153846\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(10.845138, 3.385446) rotate(-45.000000) translate(-10.845138, -3.385446) \"\n            x=\"9.53992021\"\n            y=\"0.77500965\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(18.229754, 10.770062) rotate(-45.000000) translate(-18.229754, -10.770062) \"\n            x=\"16.9245356\"\n            y=\"8.15962503\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(10.846985, 10.770246) rotate(-135.000000) translate(-10.846985, -10.770246) \"\n            x=\"9.54176636\"\n            y=\"8.15980965\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#27AAE1\"\n            transform=\"translate(18.231600, 3.385631) rotate(-135.000000) translate(-18.231600, -3.385631) \"\n            x=\"16.9263817\"\n            y=\"0.775194265\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n        </g>\n        <g id=\"Group\" opacity=\"0.1\" transform=\"translate(2.538462, 0.692308)\">\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#000000\"\n            transform=\"translate(7.616400, 11.768538) rotate(135.000000) translate(-7.616400, -11.768538) \"\n            x=\"5.98441565\"\n            y=\"10.4633202\"\n            width=\"3.2639687\"\n            height=\"2.6104365\"\n          />\n          <polygon\n            id=\"Shape\"\n            fill=\"#FFFFFF\"\n            points=\"7.38461538 7.38461538 1.83645766 1.87268753 1.83645766 3.7132995 6.46153846 8.30769231\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(8.308523, 3.693323) rotate(-135.000000) translate(-8.308523, -3.693323) \"\n            x=\"5.69808657\"\n            y=\"2.38810482\"\n            width=\"5.22087301\"\n            height=\"2.6104365\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(15.693138, 11.077938) rotate(-135.000000) translate(-15.693138, -11.077938) \"\n            x=\"13.082702\"\n            y=\"9.77272021\"\n            width=\"5.22087301\"\n            height=\"2.6104365\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(9.460009, 9.922714) rotate(45.000000) translate(-9.460009, -9.922714) \"\n            x=\"8.15479058\"\n            y=\"8.94333902\"\n            width=\"2.6104365\"\n            height=\"1.95875045\"\n          />\n          <rect\n            id=\"Rectangle-path\"\n            fill=\"#FFFFFF\"\n            transform=\"translate(15.693138, 3.693323) rotate(-135.000000) translate(-15.693138, -3.693323) \"\n            x=\"14.3879202\"\n            y=\"1.08288657\"\n            width=\"2.6104365\"\n            height=\"5.22087301\"\n          />\n        </g>\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props}>\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Function\" fillRule=\"nonzero\">\n        <path\n          d=\"M24,14.5714286 L24,9.42857143 L21.948,9.42857143 C21.7045714,8.48742857 21.336,7.59942857 20.8525714,6.78342857 L22.3028571,5.33314286 L18.6668571,1.69542857 L17.2165714,3.14571429 C16.4005714,2.664 15.5125714,2.29371429 14.5714286,2.05028571 L14.5714286,0 L9.42857143,0 L9.42857143,2.052 C8.48742857,2.29542857 7.59942857,2.664 6.78342857,3.14742857 L5.33314286,1.69714286 L1.69714286,5.33314286 L3.14742857,6.78342857 C2.66571429,7.59942857 2.29542857,8.48742857 2.052,9.42857143 L0,9.42857143 L0,14.5714286 L2.052,14.5714286 C2.29542857,15.5125714 2.664,16.4005714 3.14742857,17.2165714 L1.69714286,18.6668571 L5.33314286,22.3045714 L6.78342857,20.8542857 C7.59942857,21.336 8.48742857,21.7062857 9.42857143,21.9497143 L9.42857143,24 L14.5714286,24 L14.5714286,21.948 C15.5125714,21.7045714 16.4005714,21.336 17.2165714,20.8525714 L18.6668571,22.3028571 L22.3028571,18.6651429 L20.8525714,17.2148571 C21.3342857,16.3988571 21.7045714,15.5108571 21.948,14.5697143 L24,14.5697143 L24,14.5714286 Z\"\n          id=\"Shape\"\n          fill=\"#27AAE1\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#2B3990\"\n          points=\"17.1428571 7.71428571 10.2857143 11.1428571 10.2857143 12 12 12.8571429 15.4285714 11.1428571 15.4285714 13.7142857 12 15.456 8.57142857 13.7142857 8.57142857 10.2857143 12 8.57142857 15.4285714 6.85714286 12 5.14285714 5.14285714 8.57142857 5.14285714 15.4285714 12 18.8571429 17.5714286 16.0714286 18.8571429 15.4285714 18.8571429 15 18.8571429 8.57142857\"\n        />\n        <g id=\"Group\" opacity=\"0.1\">\n          <path\n            d=\"M3.14571429,6.78342857 C2.664,7.59942857 2.29371429,8.48742857 2.05028571,9.42857143 L0,9.42857143 L0,14.5714286 L2.052,14.5714286 C2.29542857,15.5125714 2.664,16.4005714 3.14742857,17.2165714 L1.69714286,18.6668571 L5.33314286,22.3045714 L6.78342857,20.8542857 C7.59942857,21.336 8.48742857,21.7062857 9.42857143,21.9497143 L9.42857143,24 L14.5714286,24 L14.5714286,21.948 C15.5125714,21.7045714 16.4005714,21.336 17.2165714,20.8525714 L18.6668571,22.3028571 L20.4857143,20.484 L3.51428571,3.51428571 L1.69714286,5.33314286 L3.14571429,6.78342857 Z\"\n            id=\"Shape\"\n            fill=\"#000000\"\n          />\n          <path\n            d=\"M22.3028571,18.6668571 L20.8525714,17.2165714 C21.3342857,16.4005714 21.7045714,15.5125714 21.948,14.5714286 L24,14.5714286 L24,9.42857143 L21.948,9.42857143 C21.7045714,8.48742857 21.336,7.59942857 20.8525714,6.78342857 L22.3028571,5.33314286 L18.6668571,1.69542857 L17.2165714,3.14571429 C16.4005714,2.664 15.5125714,2.29371429 14.5714286,2.05028571 L14.5714286,0 L9.42857143,0 L9.42857143,2.052 C8.48742857,2.29542857 7.59942857,2.664 6.78342857,3.14742857 L5.33314286,1.69714286 L3.51428571,3.51428571 L20.484,20.484 L22.3028571,18.6668571 Z\"\n            id=\"Shape\"\n            fill=\"#FFFFFF\"\n          />\n        </g>\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -6 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Activate\" fillRule=\"nonzero\">\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#27AAE1\"\n          x=\"0\"\n          y=\"0\"\n          width=\"24\"\n          height=\"10.2857143\"\n        />\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#2B3990\"\n          x=\"1.71428571\"\n          y=\"1.71428571\"\n          width=\"10.2857143\"\n          height=\"6.85714286\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#FFFFFF\"\n          points=\"20.5710245 1.71428571 18.8571429 3.42897546 17.1432612 5.14285714 15.4285714 6.85673883 17.1432612 8.57142857 18.8571429 6.85673883 20.5710245 5.14285714 22.2857143 3.42897546\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#FFFFFF\"\n          points=\"18.8567388 3.42857143 17.1428571 5.14326117 15.4289755 3.42857143 13.7142857 5.14326117 15.4289755 6.85714286 18.8567388 6.85714286 20.5714286 5.14326117\"\n        />\n      </g>\n    </g>\n  </SvgIcon>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default props => (\n  <SvgIcon {...props} viewBox=\"0 -6 24 24\">\n    <g id=\"Page-1\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n      <g id=\"Deactivate\" fillRule=\"nonzero\">\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#2B3990\"\n          x=\"0\"\n          y=\"0\"\n          width=\"24\"\n          height=\"10.2857143\"\n        />\n        <polygon\n          id=\"Shape\"\n          fill=\"#FFFFFF\"\n          points=\"6.85673883 1.71428571 5.14285714 3.42897546 3.42897546 1.71428571 1.71428571 3.42897546 3.42897546 5.14285714 1.71428571 6.85673883 3.42897546 8.57142857 5.14285714 6.85673883 6.85673883 8.57142857 8.57142857 6.85673883 6.85673883 5.14285714 8.57142857 3.42897546\"\n        />\n        <rect\n          id=\"Rectangle-path\"\n          fill=\"#27AAE1\"\n          x=\"12\"\n          y=\"1.71428571\"\n          width=\"10.2857143\"\n          height=\"6.85714286\"\n        />\n      </g>\n    </g>\n  </SvgIcon>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport EventsSheet, { type EventsSheetInterface } from '../../EventsSheet';\nimport RaisedButton from '../../UI/RaisedButton';\nimport PlaceholderMessage from '../../UI/PlaceholderMessage';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\nimport ExternalPropertiesDialog, {\n  type ExternalProperties,\n} from './ExternalPropertiesDialog';\nimport Text from '../../UI/Text';\nimport { Line } from '../../UI/Grid';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n};\n\ntype State = {|\n  externalPropertiesDialogOpen: boolean,\n|};\n\nexport class ExternalEventsEditorContainer extends React.Component<\n  RenderEditorContainerProps,\n  State\n> {\n  editor: ?EventsSheetInterface;\n\n  state = {\n    externalPropertiesDialogOpen: false,\n  };\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // Prevent any update to the editor if the editor is not active,\n    // and so not visible to the user.\n    return nextProps.isActive;\n  }\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  getExternalEvents(): ?gdExternalEvents {\n    const { project, projectItemName } = this.props;\n    if (!project || !projectItemName) return null;\n\n    if (!project.hasExternalEventsNamed(projectItemName)) {\n      return null;\n    }\n    return project.getExternalEvents(projectItemName);\n  }\n\n  getLayout(): ?gdLayout {\n    const { project } = this.props;\n    if (!project) return null;\n\n    const layoutName = this.getAssociatedLayoutName();\n    if (!layoutName) return null;\n\n    return project.getLayout(layoutName);\n  }\n\n  getAssociatedLayoutName(): ?string {\n    const { project } = this.props;\n    if (!project) return null;\n\n    const externalEvents = this.getExternalEvents();\n    if (!externalEvents) return null;\n\n    const layoutName = externalEvents.getAssociatedLayout();\n    if (!project.hasLayoutNamed(layoutName)) {\n      return null;\n    }\n\n    return layoutName;\n  }\n\n  saveExternalProperties = (externalProps: ExternalProperties) => {\n    const externalEvents = this.getExternalEvents();\n    if (!externalEvents) return;\n\n    externalEvents.setAssociatedLayout(externalProps.layoutName);\n    this.setState(\n      {\n        externalPropertiesDialogOpen: false,\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openExternalPropertiesDialog = () => {\n    this.setState({\n      externalPropertiesDialogOpen: true,\n    });\n  };\n\n  render() {\n    const { project, projectItemName } = this.props;\n    const externalEvents = this.getExternalEvents();\n    const layout = this.getLayout();\n\n    if (!externalEvents || !project) {\n      //TODO: Error component\n      return <div>No external events called {projectItemName} found!</div>;\n    }\n\n    return (\n      <div style={styles.container}>\n        {layout && (\n          <EventsSheet\n            ref={editor => (this.editor = editor)}\n            setToolbar={this.props.setToolbar}\n            onOpenLayout={this.props.onOpenLayout}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            openInstructionOrExpression={this.props.openInstructionOrExpression}\n            onCreateEventsFunction={this.props.onCreateEventsFunction}\n            unsavedChanges={this.props.unsavedChanges}\n            project={project}\n            scope={{\n              layout,\n              externalEvents,\n            }}\n            globalObjectsContainer={project}\n            objectsContainer={layout}\n            events={externalEvents.getEvents()}\n            onOpenSettings={this.openExternalPropertiesDialog}\n            onOpenExternalEvents={this.props.onOpenExternalEvents}\n          />\n        )}\n        {!layout && (\n          <PlaceholderMessage>\n            <Text>\n              <Trans>\n                To edit the external events, choose the scene in which it will\n                be included:\n              </Trans>\n            </Text>\n            <Line justifyContent=\"center\">\n              <RaisedButton\n                label={<Trans>Choose the scene</Trans>}\n                primary\n                onClick={this.openExternalPropertiesDialog}\n              />\n            </Line>\n          </PlaceholderMessage>\n        )}\n        <ExternalPropertiesDialog\n          title={<Trans>Configure the external events</Trans>}\n          helpTexts={[\n            <Trans>\n              In order to use these external events, you still need to add a\n              \"Link\" event in the events sheet of the corresponding scene\n            </Trans>,\n          ]}\n          open={this.state.externalPropertiesDialogOpen}\n          project={project}\n          onChoose={this.saveExternalProperties}\n          layoutName={this.getAssociatedLayoutName()}\n          onClose={() => this.setState({ externalPropertiesDialogOpen: false })}\n        />\n      </div>\n    );\n  }\n}\n\nexport const renderExternalEventsEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <ExternalEventsEditorContainer {...props} />;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../../UI/FlatButton';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Dialog from '../../UI/Dialog';\nimport { mapFor } from '../../Utils/MapFor';\nimport Text from '../../UI/Text';\nimport BackgroundText from '../../UI/BackgroundText';\nimport { Line, Column } from '../../UI/Grid';\n\nexport type ExternalProperties = {|\n  layoutName: string,\n|};\n\ntype Props = {|\n  open: boolean,\n  onChoose: ExternalProperties => void,\n  layoutName?: ?string,\n  onClose: () => void,\n  project: gdProject,\n  title?: React.Node,\n  helpTexts?: Array<React.Node>,\n|};\n\nexport default function ExternalPropertiesDialog({\n  open,\n  onChoose,\n  layoutName,\n  onClose,\n  project,\n  title,\n  helpTexts,\n}: Props) {\n  const initialLayoutName = layoutName || '';\n  const [selectedLayoutName, setSelectedLayoutName] = React.useState<string>(\n    initialLayoutName\n  );\n  const onClick = React.useCallback(\n    () => {\n      const externalProperties: ExternalProperties = {\n        layoutName: selectedLayoutName,\n      };\n      onChoose(externalProperties);\n    },\n    [onChoose, selectedLayoutName]\n  );\n\n  const actions = [\n    <FlatButton\n      key=\"cancel\"\n      label={<Trans>Cancel</Trans>}\n      primary={false}\n      onClick={onClose}\n    />,\n    <FlatButton\n      key=\"choose\"\n      label={<Trans>Choose</Trans>}\n      primary\n      keyboardFocused\n      onClick={onClick}\n      disabled={!selectedLayoutName}\n    />,\n  ];\n\n  const layoutNames = mapFor(0, project.getLayoutsCount(), i => {\n    return project.getLayoutAt(i).getName();\n  });\n\n  return (\n    <Dialog\n      actions={actions}\n      open={open}\n      title={title}\n      onRequestClose={onClose}\n      cannotBeDismissed={false}\n      maxWidth=\"sm\"\n    >\n      <Column>\n        {helpTexts &&\n          helpTexts.map(helpText => (\n            <Line>\n              <BackgroundText>{helpText}</BackgroundText>\n            </Line>\n          ))}\n        <Line>\n          <Text>\n            <Trans>Choose the associated scene:</Trans>\n          </Text>\n        </Line>\n        <RadioGroup\n          aria-label=\"Associated scene\"\n          name=\"associated-layout\"\n          value={selectedLayoutName}\n          onChange={event => setSelectedLayoutName(event.target.value)}\n        >\n          {layoutNames.map(name => (\n            <FormControlLabel\n              key={name}\n              value={name}\n              control={<Radio color=\"primary\" />}\n              label={name}\n            />\n          ))}\n        </RadioGroup>\n      </Column>\n    </Dialog>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport SceneEditor from '../../SceneEditor';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../../Utils/Serializer';\nimport PlaceholderMessage from '../../UI/PlaceholderMessage';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\nimport ExternalPropertiesDialog, {\n  type ExternalProperties,\n} from './ExternalPropertiesDialog';\nimport { Line } from '../../UI/Grid';\nimport Text from '../../UI/Text';\nimport { prepareInstancesEditorSettings } from '../../InstancesEditor/InstancesEditorSettings';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n};\n\ntype State = {|\n  externalPropertiesDialogOpen: boolean,\n|};\n\nexport class ExternalLayoutEditorContainer extends React.Component<\n  RenderEditorContainerProps,\n  State\n> {\n  editor: ?SceneEditor;\n  state = {\n    externalPropertiesDialogOpen: false,\n  };\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // This optimization is a bit more cautious than the traditional one, to still allow\n    // children, and in particular SceneEditor and InstancesEditor, to be notified when isActive\n    // goes from true to false (in which case PIXI rendering is halted). If isActive was false\n    // and remains false, it's safe to stop update here (PIXI rendering is already halted).\n    if (!this.props.isActive && !nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  componentDidMount() {\n    if (this.props.isActive) {\n      const { projectItemName } = this.props;\n      const layout = this.getLayout();\n      this.props.setPreviewedLayout(\n        layout ? layout.getName() : null,\n        projectItemName\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps: RenderEditorContainerProps) {\n    if (!prevProps.isActive && this.props.isActive) {\n      const { projectItemName } = this.props;\n      const layout = this.getLayout();\n      this.props.setPreviewedLayout(\n        layout ? layout.getName() : null,\n        projectItemName\n      );\n    }\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  getExternalLayout(): ?gdExternalLayout {\n    const { project, projectItemName } = this.props;\n    if (!project || !projectItemName) return null;\n\n    if (!project.hasExternalLayoutNamed(projectItemName)) {\n      return null;\n    }\n    return project.getExternalLayout(projectItemName);\n  }\n\n  getLayout(): ?gdLayout {\n    const { project } = this.props;\n    if (!project) return null;\n\n    const layoutName = this.getAssociatedLayoutName();\n    if (!layoutName) return;\n\n    return project.getLayout(layoutName);\n  }\n\n  getAssociatedLayoutName(): ?string {\n    const { project } = this.props;\n    if (!project) return null;\n\n    const externalLayout = this.getExternalLayout();\n    if (!externalLayout) return null;\n\n    const layoutName = externalLayout.getAssociatedLayout();\n    if (!project.hasLayoutNamed(layoutName)) {\n      return null;\n    }\n\n    return layoutName;\n  }\n\n  saveExternalProperties = (externalProps: ExternalProperties) => {\n    const externalLayout = this.getExternalLayout();\n    if (!externalLayout) return;\n\n    externalLayout.setAssociatedLayout(externalProps.layoutName);\n    this.setState(\n      {\n        externalPropertiesDialogOpen: false,\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  openExternalPropertiesDialog = () => {\n    this.setState({\n      externalPropertiesDialogOpen: true,\n    });\n  };\n\n  saveUiSettings = () => {\n    const layout = this.getExternalLayout();\n    const editor = this.editor;\n\n    if (editor && layout) {\n      unserializeFromJSObject(\n        layout.getAssociatedEditorSettings(),\n        editor.getInstancesEditorSettings()\n      );\n    }\n  };\n\n  render() {\n    const { project, projectItemName, isActive } = this.props;\n    const externalLayout = this.getExternalLayout();\n    const layout = this.getLayout();\n\n    if (!externalLayout || !project) {\n      //TODO: Error component\n      return <div>No external layout called {projectItemName} found!</div>;\n    }\n\n    return (\n      <div style={styles.container}>\n        {layout && (\n          <SceneEditor\n            setToolbar={this.props.setToolbar}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            unsavedChanges={this.props.unsavedChanges}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n            ref={editor => (this.editor = editor)}\n            project={project}\n            layout={layout}\n            initialInstances={externalLayout.getInitialInstances()}\n            getInitialInstancesEditorSettings={() =>\n              prepareInstancesEditorSettings(\n                serializeToJSObject(\n                  externalLayout.getAssociatedEditorSettings()\n                )\n              )\n            }\n            onOpenMoreSettings={this.openExternalPropertiesDialog}\n            isActive={isActive}\n          />\n        )}\n        {!layout && (\n          <PlaceholderMessage>\n            <Text>\n              <Trans>\n                To edit the external layout, choose the scene in which it will\n                be included:\n              </Trans>\n            </Text>\n            <Line justifyContent=\"center\">\n              <RaisedButton\n                label={<Trans>Choose the scene</Trans>}\n                primary\n                onClick={this.openExternalPropertiesDialog}\n              />\n            </Line>\n          </PlaceholderMessage>\n        )}\n        <ExternalPropertiesDialog\n          title={<Trans>Configure the external layout</Trans>}\n          helpTexts={[\n            <Trans>\n              In order to see your objects in the scene, you need to add an\n              action \"Create objects from external layout\" in your events sheet.\n            </Trans>,\n            <Trans>\n              You can also launch a preview from this external layout, but\n              remember that it will still create objects from the scene, as well\n              as trigger its events. Make sure to disable any action loading the\n              external layout before doing so to avoid having duplicate objects!\n            </Trans>,\n          ]}\n          open={this.state.externalPropertiesDialogOpen}\n          project={project}\n          layoutName={this.getAssociatedLayoutName()}\n          onChoose={this.saveExternalProperties}\n          onClose={() => this.setState({ externalPropertiesDialogOpen: false })}\n        />\n      </div>\n    );\n  }\n}\n\nexport const renderExternalLayoutEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <ExternalLayoutEditorContainer {...props} />;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport uniq from 'lodash/uniq';\nimport ObjectsList from '../ObjectsList';\nimport ObjectGroupsList from '../ObjectGroupsList';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\nimport InstancesEditor from '../InstancesEditor';\nimport InstancePropertiesEditor from '../InstancesEditor/InstancePropertiesEditor';\nimport InstancesList from '../InstancesEditor/InstancesList';\nimport LayersList from '../LayersList';\nimport LayerRemoveDialog from '../LayersList/LayerRemoveDialog';\nimport LayerEditorDialog from '../LayersList/LayerEditorDialog';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\nimport ObjectEditorDialog from '../ObjectEditor/ObjectEditorDialog';\nimport ObjectGroupEditorDialog from '../ObjectGroupEditor/ObjectGroupEditorDialog';\nimport InstancesSelection from '../InstancesEditor/InstancesSelection';\nimport SetupGridDialog from './SetupGridDialog';\nimport ScenePropertiesDialog from './ScenePropertiesDialog';\nimport Toolbar from './Toolbar';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport FullSizeInstancesEditorWithScrollbars from '../InstancesEditor/FullSizeInstancesEditorWithScrollbars';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport ContextMenu from '../UI/Menu/ContextMenu';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { shortenString } from '../Utils/StringHelpers';\nimport getObjectByName from '../Utils/GetObjectByName';\nimport UseSceneEditorCommands from './UseSceneEditorCommands';\nimport { type InstancesEditorSettings } from '../InstancesEditor/InstancesEditorSettings';\n\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  type HistoryState,\n  undo,\n  redo,\n  canUndo,\n  canRedo,\n  getHistoryInitialState,\n  saveToHistory,\n} from '../Utils/History';\nimport PixiResourcesLoader from '../ObjectsRendering/PixiResourcesLoader';\nimport {\n  type ObjectWithContext,\n  type GroupWithContext,\n  enumerateObjects,\n} from '../ObjectsList/EnumerateObjects';\nimport TagsButton from '../UI/EditorMosaic/TagsButton';\nimport CloseButton from '../UI/EditorMosaic/CloseButton';\nimport {\n  type SelectedTags,\n  buildTagsMenuTemplate,\n  getTagsFromString,\n} from '../Utils/TagsHelper';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport SceneVariablesDialog from './SceneVariablesDialog';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport { onObjectAdded, onInstanceAdded } from '../Hints/ObjectsAdditionalWork';\nimport { type InfoBarDetails } from '../Hints/ObjectsAdditionalWork';\nimport { type HotReloadPreviewButtonProps } from '../HotReload/HotReloadPreviewButton';\nimport EventsRootVariablesFinder from '../Utils/EventsRootVariablesFinder';\n\nconst gd: libGDevelop = global.gd;\n\nconst INSTANCES_CLIPBOARD_KIND = 'Instances';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n};\n\nconst initialMosaicEditorNodes = {\n  direction: 'row',\n  first: 'properties',\n  splitPercentage: 23,\n  second: {\n    direction: 'row',\n    first: 'instances-editor',\n    second: 'objects-list',\n    splitPercentage: 77,\n  },\n};\n\nconst initialMosaicEditorNodesSmallWindow = {\n  direction: 'row',\n  first: 'instances-editor',\n  second: 'objects-list',\n  splitPercentage: 70,\n};\n\ntype Props = {|\n  initialInstances: gdInitialInstancesContainer,\n  getInitialInstancesEditorSettings: () => InstancesEditorSettings,\n  layout: gdLayout,\n  onEditObject?: ?(object: gdObject) => void,\n  onOpenMoreSettings?: ?() => void,\n  project: gdProject,\n  setToolbar: (?React.Node) => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  isActive: boolean,\n  unsavedChanges?: ?UnsavedChanges,\n\n  // Preview:\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n|};\n\ntype State = {|\n  setupGridOpen: boolean,\n  scenePropertiesDialogOpen: boolean,\n  layersListOpen: boolean,\n  layerRemoveDialogOpen: boolean,\n  onCloseLayerRemoveDialog: ?(doRemove: boolean, newLayer: string) => void,\n  layerRemoved: ?string,\n  editedLayer: ?gdLayer,\n  editedLayerInitialTab: 'properties' | 'effects',\n  editedObjectWithContext: ?ObjectWithContext,\n  editedObjectInitialTab: ?string,\n  variablesEditedInstance: ?gdInitialInstance,\n  selectedObjectNames: Array<string>,\n  newObjectInstanceSceneCoordinates: ?[number, number],\n\n  editedGroup: ?gdObjectGroup,\n\n  instancesEditorSettings: Object,\n  history: HistoryState,\n\n  showObjectsListInfoBar: boolean,\n  layoutVariablesDialogOpen: boolean,\n  showPropertiesInfoBar: boolean,\n  showLayersInfoBar: boolean,\n  showInstancesInfoBar: boolean,\n  showAdditionalWorkInfoBar: boolean,\n  additionalWorkInfoBar: InfoBarDetails,\n\n  // State for tags of objects:\n  selectedObjectTags: SelectedTags,\n|};\n\ntype CopyCutPasteOptions = { useLastCursorPosition?: boolean };\n\nexport default class SceneEditor extends React.Component<Props, State> {\n  static defaultProps = {\n    setToolbar: () => {},\n  };\n\n  instancesSelection: InstancesSelection;\n  editor: ?InstancesEditor;\n  contextMenu: ?ContextMenu;\n  editorMosaic: ?EditorMosaic;\n  _objectsList: ?ObjectsList;\n  _layersList: ?LayersList;\n  _propertiesEditor: ?InstancePropertiesEditor;\n  _instancesList: ?InstancesList;\n\n  constructor(props: Props) {\n    super(props);\n\n    this.instancesSelection = new InstancesSelection();\n    this.state = {\n      setupGridOpen: false,\n      scenePropertiesDialogOpen: false,\n      layersListOpen: false,\n      layerRemoveDialogOpen: false,\n      onCloseLayerRemoveDialog: null,\n      layerRemoved: null,\n      editedLayer: null,\n      editedLayerInitialTab: 'properties',\n      editedObjectWithContext: null,\n      editedObjectInitialTab: 'properties',\n      variablesEditedInstance: null,\n      selectedObjectNames: [],\n      newObjectInstanceSceneCoordinates: null,\n      editedGroup: null,\n\n      instancesEditorSettings: props.getInitialInstancesEditorSettings(),\n      history: getHistoryInitialState(props.initialInstances, {\n        historyMaxSize: 50,\n      }),\n\n      showObjectsListInfoBar: false,\n      layoutVariablesDialogOpen: false,\n      showPropertiesInfoBar: false,\n      showLayersInfoBar: false,\n      showInstancesInfoBar: false,\n\n      showAdditionalWorkInfoBar: false,\n      additionalWorkInfoBar: {\n        identifier: 'default-additional-work',\n        message: '',\n        touchScreenMessage: '',\n      },\n\n      selectedObjectTags: [],\n    };\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (this.state.history !== prevState.history)\n      if (this.props.unsavedChanges)\n        this.props.unsavedChanges.triggerUnsavedChanges();\n  }\n\n  getInstancesEditorSettings() {\n    return this.state.instancesEditorSettings;\n  }\n\n  updateToolbar() {\n    this.props.setToolbar(\n      <Toolbar\n        instancesSelection={this.instancesSelection}\n        openObjectsList={this.openObjectsList}\n        openObjectGroupsList={this.openObjectGroupsList}\n        openProperties={this.openProperties}\n        deleteSelection={this.deleteSelection}\n        toggleInstancesList={this.toggleInstancesList}\n        toggleLayersList={this.toggleLayersList}\n        toggleWindowMask={this.toggleWindowMask}\n        toggleGrid={this.toggleGrid}\n        isGridShown={() => !!this.state.instancesEditorSettings.grid}\n        isWindowMaskShown={() =>\n          !!this.state.instancesEditorSettings.windowMask\n        }\n        openSetupGrid={this.openSetupGrid}\n        setZoomFactor={this.setZoomFactor}\n        centerView={this.centerView}\n        canUndo={canUndo(this.state.history)}\n        canRedo={canRedo(this.state.history)}\n        undo={this.undo}\n        redo={this.redo}\n        zoomIn={this.zoomIn}\n        zoomOut={this.zoomOut}\n        onOpenSettings={this.openSceneProperties}\n      />\n    );\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (\n      this.props.layout !== nextProps.layout ||\n      this.props.initialInstances !== nextProps.initialInstances ||\n      this.props.project !== nextProps.project\n    ) {\n      this.instancesSelection.clearSelection();\n      this.openSetupGrid(false);\n      this.editInstanceVariables(null);\n      this.openSceneProperties(false);\n    }\n  }\n\n  openObjectsList = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('objects-list', 'end', 75, 'column')) {\n      this.setState({\n        showObjectsListInfoBar: true,\n      });\n    }\n  };\n\n  openProperties = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('properties', 'start', 25, 'column')) {\n      this.setState({\n        showPropertiesInfoBar: true,\n      });\n    }\n  };\n\n  openObjectGroupsList = () => {\n    if (!this.editorMosaic) return;\n    this.editorMosaic.openEditor('object-groups-list', 'end', 75, 'column');\n  };\n\n  toggleInstancesList = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('instances-list', 'end', 75, 'row')) {\n      this.setState({\n        showInstancesInfoBar: true,\n      });\n    }\n  };\n\n  toggleLayersList = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('layers-list', 'end', 75, 'row')) {\n      this.setState({\n        showLayersInfoBar: true,\n      });\n    }\n  };\n\n  toggleWindowMask = () => {\n    this.setState({\n      instancesEditorSettings: {\n        ...this.state.instancesEditorSettings,\n        windowMask: !this.state.instancesEditorSettings.windowMask,\n      },\n    });\n  };\n\n  toggleGrid = () => {\n    this.setState({\n      instancesEditorSettings: {\n        ...this.state.instancesEditorSettings,\n        grid: !this.state.instancesEditorSettings.grid,\n        snap: !this.state.instancesEditorSettings.grid,\n      },\n    });\n  };\n\n  openSetupGrid = (open: boolean = true) => {\n    this.setState({ setupGridOpen: open });\n  };\n\n  openSceneProperties = (open: boolean = true) => {\n    this.setState({ scenePropertiesDialogOpen: open });\n  };\n\n  openObjectEditor = () => {\n    if (!this.instancesSelection.hasSelectedInstances()) {\n      return;\n    }\n    const selectedInstanceObjectName = this.instancesSelection\n      .getSelectedInstances()[0]\n      .getObjectName();\n    this.editObjectByName(selectedInstanceObjectName);\n  };\n\n  editLayerEffects = (layer: ?gdLayer) => {\n    this.setState({ editedLayer: layer, editedLayerInitialTab: 'effects' });\n  };\n\n  editLayer = (layer: ?gdLayer) => {\n    this.setState({ editedLayer: layer, editedLayerInitialTab: 'properties' });\n  };\n\n  editInstanceVariables = (instance: ?gdInitialInstance) => {\n    this.setState({ variablesEditedInstance: instance });\n  };\n\n  editLayoutVariables = (open: boolean = true) => {\n    this.setState({ layoutVariablesDialogOpen: open });\n  };\n\n  editObject = (editedObject: ?gdObject, initialTab: ?string) => {\n    const { project } = this.props;\n    if (editedObject) {\n      this.setState({\n        editedObjectWithContext: {\n          object: editedObject,\n          global: project.hasObjectNamed(editedObject.getName()),\n        },\n        editedObjectInitialTab: initialTab || 'properties',\n      });\n    } else {\n      this.setState({\n        editedObjectWithContext: null,\n        editedObjectInitialTab: 'properties',\n      });\n    }\n  };\n\n  editObjectByName = (objectName: string) => {\n    const { project, layout } = this.props;\n    if (layout.hasObjectNamed(objectName))\n      this.editObject(layout.getObject(objectName));\n    else if (project.hasObjectNamed(objectName))\n      this.editObject(project.getObject(objectName));\n  };\n\n  editGroup = (group: ?gdObjectGroup) => {\n    this.setState({ editedGroup: group });\n  };\n\n  setInstancesEditorSettings = (\n    instancesEditorSettings: InstancesEditorSettings\n  ) => {\n    this.setState({\n      instancesEditorSettings,\n    });\n  };\n\n  undo = () => {\n    this.instancesSelection.clearSelection();\n    this.setState(\n      {\n        history: undo(this.state.history, this.props.initialInstances),\n      },\n      () => {\n        // /!\\ Force the instances editor to destroy and mount again the\n        // renderers to avoid keeping any references to existing instances\n        if (this.editor) this.editor.forceRemount();\n        this.updateToolbar();\n      }\n    );\n  };\n\n  redo = () => {\n    this.instancesSelection.clearSelection();\n    this.setState(\n      {\n        history: redo(this.state.history, this.props.initialInstances),\n      },\n      () => {\n        // /!\\ Force the instances editor to destroy and mount again the\n        // renderers to avoid keeping any references to existing instances\n        if (this.editor) this.editor.forceRemount();\n        this.updateToolbar();\n      }\n    );\n  };\n\n  _onObjectSelected = (selectedObjectName: string) => {\n    if (!selectedObjectName) {\n      this.setState({\n        selectedObjectNames: [],\n      });\n    } else {\n      this.setState({\n        selectedObjectNames: [selectedObjectName],\n      });\n    }\n  };\n\n  _createNewObjectAndInstanceUnderCursor = () => {\n    if (!this.editor) {\n      return;\n    }\n\n    // Remember where to create the instance, when the object will be created\n    this.setState({\n      newObjectInstanceSceneCoordinates: this.editor.getLastCursorSceneCoordinates(),\n    });\n\n    if (this._objectsList)\n      this._objectsList.setState({ newObjectDialogOpen: true });\n  };\n\n  _onAddInstanceUnderCursor = () => {\n    if (!this.state.selectedObjectNames.length || !this.editor) {\n      return;\n    }\n\n    const objectSelected = this.state.selectedObjectNames[0];\n    const cursorPosition = this.editor.getLastCursorSceneCoordinates();\n    this._addInstance(cursorPosition, objectSelected);\n    this.setState({\n      selectedObjectNames: [objectSelected],\n    });\n  };\n\n  _addInstance = (pos: [number, number], objectName: string) => {\n    if (!objectName || !this.editor) return;\n\n    const instances = this.editor.addInstances(pos, [objectName]);\n    this._onInstancesAdded(instances);\n  };\n\n  _onInstancesAdded = (instances: Array<gdInitialInstance>) => {\n    instances.forEach(instance => {\n      const infoBarDetails = onInstanceAdded(\n        instance,\n        this.props.layout,\n        this.props.project\n      );\n      if (infoBarDetails) {\n        this.setState({\n          additionalWorkInfoBar: infoBarDetails,\n          showAdditionalWorkInfoBar: true,\n        });\n      }\n    });\n\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.updateToolbar()\n    );\n  };\n\n  _onInstancesSelected = (instances: Array<gdInitialInstance>) => {\n    this.setState({\n      selectedObjectNames: uniq(\n        instances.map(instance => instance.getObjectName())\n      ),\n    });\n    this.forceUpdatePropertiesEditor();\n    this.updateToolbar();\n  };\n\n  _onInstanceDoubleClicked = (instance: gdInitialInstance) => {\n    this.editObjectByName(instance.getObjectName());\n  };\n\n  _onInstancesMoved = (instances: Array<gdInitialInstance>) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.forceUpdatePropertiesEditor()\n    );\n  };\n\n  _onInstancesResized = (instances: Array<gdInitialInstance>) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.forceUpdatePropertiesEditor()\n    );\n  };\n\n  _onInstancesRotated = (instances: Array<gdInitialInstance>) => {\n    this.setState(\n      {\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => this.forceUpdatePropertiesEditor()\n    );\n  };\n\n  _onInstancesModified = (instances: Array<gdInitialInstance>) => {\n    this.forceUpdate();\n    //TODO: Save for redo with debounce (and cancel on unmount)\n  };\n\n  _onSelectInstances = (\n    instances: Array<gdInitialInstance>,\n    centerView: boolean = true\n  ) => {\n    this.instancesSelection.selectInstances(instances, false);\n\n    if (centerView) {\n      if (this.editor) this.editor.centerViewOn(instances);\n    }\n    this.forceUpdatePropertiesEditor();\n    this.updateToolbar();\n  };\n\n  /**\n   * Create an instance of the given object, at the position\n   * previously chosen (see `newObjectInstanceSceneCoordinates`).\n   */\n  _addInstanceForNewObject = (newObjectName: string) => {\n    const { newObjectInstanceSceneCoordinates } = this.state;\n    if (!newObjectInstanceSceneCoordinates) {\n      return;\n    }\n\n    this._addInstance(newObjectInstanceSceneCoordinates, newObjectName);\n    this.setState({ newObjectInstanceSceneCoordinates: null });\n  };\n\n  _onObjectCreated = (object: gdObject) => {\n    const infoBarDetails = onObjectAdded(\n      object,\n      this.props.layout,\n      this.props.project\n    );\n    if (infoBarDetails) {\n      this.setState({\n        additionalWorkInfoBar: infoBarDetails,\n        showAdditionalWorkInfoBar: true,\n      });\n    }\n\n    this._addInstanceForNewObject(object.getName());\n  };\n\n  _onRemoveLayer = (layerName: string, done: boolean => void) => {\n    this.setState({\n      layerRemoveDialogOpen: true,\n      layerRemoved: layerName,\n      onCloseLayerRemoveDialog: (doRemove, newLayer) => {\n        this.setState(\n          {\n            layerRemoveDialogOpen: false,\n          },\n          () => {\n            if (doRemove) {\n              if (newLayer === null) {\n                this.instancesSelection.unselectInstancesOnLayer(layerName);\n                this.props.initialInstances.removeAllInstancesOnLayer(\n                  layerName\n                );\n              } else {\n                // Instances are not invalidated, so we can keep the selection.\n                this.props.initialInstances.moveInstancesToLayer(\n                  layerName,\n                  newLayer\n                );\n              }\n            }\n\n            done(doRemove);\n            // /!\\ Force the instances editor to destroy and mount again the\n            // renderers to avoid keeping any references to existing instances\n            if (this.editor) this.editor.forceRemount();\n\n            this.forceUpdateLayersList();\n\n            // We may have modified the selection, so force an update of editors dealing with it.\n            this.forceUpdatePropertiesEditor();\n            this.updateToolbar();\n          }\n        );\n      },\n    });\n  };\n\n  _onRenameLayer = (\n    oldName: string,\n    newName: string,\n    done: boolean => void\n  ) => {\n    this.props.initialInstances.moveInstancesToLayer(oldName, newName);\n    done(true);\n  };\n\n  _onDeleteObject = (\n    objectWithContext: ObjectWithContext,\n    done: boolean => void\n  ) => {\n    const { object, global } = objectWithContext;\n    const { project, layout } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      'Do you want to remove all references to this object in groups and events (actions and conditions using the object)?'\n    );\n\n    // Unselect instances of the deleted object because these instances\n    // will be deleted by gd.WholeProjectRefactorer (and after that, they will\n    // be invalid references, as pointing to deleted objects).\n    this.instancesSelection.unselectInstancesOfObject(object.getName());\n\n    if (global) {\n      gd.WholeProjectRefactorer.globalObjectOrGroupRemoved(\n        project,\n        object.getName(),\n        /* isObjectGroup=*/ false,\n        !!answer\n      );\n    } else {\n      gd.WholeProjectRefactorer.objectOrGroupRemovedInLayout(\n        project,\n        layout,\n        object.getName(),\n        /* isObjectGroup=*/ false,\n        !!answer\n      );\n    }\n\n    done(true);\n\n    // We modified the selection, so force an update of editors dealing with it.\n    this.forceUpdatePropertiesEditor();\n    this.updateToolbar();\n  };\n\n  _canObjectOrGroupUseNewName = (newName: string) => {\n    const { project, layout } = this.props;\n\n    if (\n      layout.hasObjectNamed(newName) ||\n      project.hasObjectNamed(newName) ||\n      layout.getObjectGroups().has(newName) ||\n      project.getObjectGroups().has(newName)\n    ) {\n      showWarningBox('Another object or group with this name already exists.', {\n        delayToNextTick: true,\n      });\n      return false;\n    } else if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        'This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.',\n        { delayToNextTick: true }\n      );\n      return false;\n    }\n\n    return true;\n  };\n\n  _onRenameEditedObject = (newName: string) => {\n    const { editedObjectWithContext } = this.state;\n\n    if (editedObjectWithContext) {\n      this._onRenameObject(editedObjectWithContext, newName, () => {});\n    }\n  };\n\n  _onRenameObject = (\n    objectWithContext: ObjectWithContext,\n    newName: string,\n    done: boolean => void\n  ) => {\n    const { object, global } = objectWithContext;\n    const { project, layout } = this.props;\n\n    // newName is supposed to have been already validated\n\n    // Avoid triggering renaming refactoring if name has not really changed\n    if (object.getName() !== newName) {\n      if (global) {\n        gd.WholeProjectRefactorer.globalObjectOrGroupRenamed(\n          project,\n          object.getName(),\n          newName,\n          /* isObjectGroup=*/ false\n        );\n      } else {\n        gd.WholeProjectRefactorer.objectOrGroupRenamedInLayout(\n          project,\n          layout,\n          object.getName(),\n          newName,\n          /* isObjectGroup=*/ false\n        );\n      }\n    }\n\n    object.setName(newName);\n    done(true);\n  };\n\n  _onDeleteGroup = (\n    groupWithContext: GroupWithContext,\n    done: boolean => void\n  ) => {\n    const { group, global } = groupWithContext;\n    const { project, layout } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      'Do you want to remove all references to this group in events (actions and conditions using the group)?'\n    );\n\n    if (global) {\n      gd.WholeProjectRefactorer.globalObjectOrGroupRemoved(\n        project,\n        group.getName(),\n        /* isObjectGroup=*/ true,\n        !!answer\n      );\n    } else {\n      gd.WholeProjectRefactorer.objectOrGroupRemovedInLayout(\n        project,\n        layout,\n        group.getName(),\n        /* isObjectGroup=*/ true,\n        !!answer\n      );\n    }\n\n    done(true);\n  };\n\n  _onRenameGroup = (\n    groupWithContext: GroupWithContext,\n    newName: string,\n    done: boolean => void\n  ) => {\n    const { group, global } = groupWithContext;\n    const { project, layout } = this.props;\n\n    // newName is supposed to have been already validated\n\n    // Avoid triggering renaming refactoring if name has not really changed\n    if (group.getName() !== newName) {\n      if (global) {\n        gd.WholeProjectRefactorer.globalObjectOrGroupRenamed(\n          project,\n          group.getName(),\n          newName,\n          /* isObjectGroup=*/ true\n        );\n      } else {\n        gd.WholeProjectRefactorer.objectOrGroupRenamedInLayout(\n          project,\n          layout,\n          group.getName(),\n          newName,\n          /* isObjectGroup=*/ true\n        );\n      }\n    }\n\n    done(true);\n  };\n\n  deleteSelection = () => {\n    const selectedInstances = this.instancesSelection.getSelectedInstances();\n    selectedInstances.forEach(instance => {\n      if (instance.isLocked()) return;\n      this.props.initialInstances.removeInstance(instance);\n    });\n\n    this.instancesSelection.clearSelection();\n    if (this.editor) this.editor.clearHighlightedInstance();\n\n    this.setState(\n      {\n        selectedObjectNames: [],\n        history: saveToHistory(this.state.history, this.props.initialInstances),\n      },\n      () => {\n        this.updateToolbar();\n        this.forceUpdatePropertiesEditor();\n      }\n    );\n  };\n\n  centerView = () => {\n    if (this.editor) this.editor.centerView();\n  };\n\n  setZoomFactor = (zoomFactor: number) => {\n    if (this.editor) this.editor.setZoomFactor(zoomFactor);\n  };\n\n  zoomIn = () => {\n    if (this.editor) this.editor.zoomBy(0.1);\n  };\n\n  zoomOut = () => {\n    if (this.editor) this.editor.zoomBy(-0.1);\n  };\n\n  _onContextMenu = (x: number, y: number) => {\n    if (this.contextMenu) this.contextMenu.open(x, y);\n  };\n\n  copySelection = ({ useLastCursorPosition }: CopyCutPasteOptions = {}) => {\n    const serializedSelection = this.instancesSelection\n      .getSelectedInstances()\n      .map(instance => serializeToJSObject(instance));\n\n    if (this.editor) {\n      const position = useLastCursorPosition\n        ? this.editor.getLastCursorSceneCoordinates()\n        : this.editor.getLastContextMenuSceneCoordinates();\n      Clipboard.set(INSTANCES_CLIPBOARD_KIND, {\n        x: position[0],\n        y: position[1],\n        instances: serializedSelection,\n      });\n    }\n  };\n\n  cutSelection = (options: CopyCutPasteOptions = {}) => {\n    this.copySelection(options);\n    this.deleteSelection();\n  };\n\n  paste = ({ useLastCursorPosition }: CopyCutPasteOptions = {}) => {\n    if (!this.editor) return;\n\n    const position = useLastCursorPosition\n      ? this.editor.getLastCursorSceneCoordinates()\n      : this.editor.getLastContextMenuSceneCoordinates();\n\n    const clipboardContent = Clipboard.get(INSTANCES_CLIPBOARD_KIND);\n    const instancesContent = SafeExtractor.extractArrayProperty(\n      clipboardContent,\n      'instances'\n    );\n    const x = SafeExtractor.extractNumberProperty(clipboardContent, 'x');\n    const y = SafeExtractor.extractNumberProperty(clipboardContent, 'y');\n    if (x === null || y === null || instancesContent === null) return;\n\n    instancesContent\n      .map(serializedInstance => {\n        const instance = new gd.InitialInstance();\n        unserializeFromJSObject(instance, serializedInstance);\n        return instance;\n      })\n      .forEach(instance => {\n        instance.setX(instance.getX() - x + position[0]);\n        instance.setY(instance.getY() - y + position[1]);\n        this.props.initialInstances\n          .insertInitialInstance(instance)\n          .resetPersistentUuid();\n        instance.delete();\n      });\n  };\n\n  updateBehaviorsSharedData = () => {\n    const { layout, project } = this.props;\n    layout.updateBehaviorsSharedData(project);\n  };\n\n  forceUpdateObjectsList = () => {\n    if (this._objectsList) this._objectsList.forceUpdateList();\n  };\n\n  forceUpdateLayersList = () => {\n    if (this._layersList) this._layersList.forceUpdate();\n  };\n\n  forceUpdateInstancesList = () => {\n    if (this._instancesList) this._instancesList.forceUpdate();\n  };\n\n  forceUpdatePropertiesEditor = () => {\n    if (this._propertiesEditor) this._propertiesEditor.forceUpdate();\n  };\n\n  reloadResourcesFor = (object: gdObject) => {\n    const { project } = this.props;\n\n    const resourcesInUse = new gd.ResourcesInUseHelper();\n    object.exposeResources(resourcesInUse);\n    const objectResourceNames = resourcesInUse\n      .getAllImages()\n      .toNewVectorString()\n      .toJSArray();\n    resourcesInUse.delete();\n\n    PixiResourcesLoader.loadTextures(\n      project,\n      objectResourceNames,\n      () => {},\n      () => {\n        if (this.editor)\n          this.editor.resetInstanceRenderersFor(object.getName());\n      }\n    );\n  };\n\n  _getAllObjectTags = (): Array<string> => {\n    const { project, layout } = this.props;\n\n    const tagsSet: Set<string> = new Set();\n    enumerateObjects(project, layout).allObjectsList.forEach(({ object }) => {\n      getTagsFromString(object.getTags()).forEach(tag => tagsSet.add(tag));\n    });\n\n    return Array.from(tagsSet);\n  };\n\n  _buildObjectTagsMenuTemplate = (i18n: I18nType): Array<any> => {\n    const { selectedObjectTags } = this.state;\n\n    return buildTagsMenuTemplate({\n      noTagLabel: i18n._(t`No tags - add a tag to an object first`),\n      getAllTags: this._getAllObjectTags,\n      selectedTags: selectedObjectTags,\n      onChange: selectedObjectTags => {\n        this.setState({ selectedObjectTags });\n      },\n    });\n  };\n\n  render() {\n    const {\n      project,\n      layout,\n      initialInstances,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n      isActive,\n    } = this.props;\n    const selectedInstances = this.instancesSelection.getSelectedInstances();\n\n    const editors = {\n      properties: {\n        type: 'secondary',\n        title: t`Properties`,\n        renderEditor: () => (\n          <I18n>\n            {({ i18n }) => (\n              <InstancePropertiesEditor\n                i18n={i18n}\n                project={project}\n                layout={layout}\n                instances={selectedInstances}\n                editInstanceVariables={this.editInstanceVariables}\n                onEditObjectByName={this.editObjectByName}\n                onInstancesModified={instances =>\n                  this.forceUpdateInstancesList()\n                }\n                ref={propertiesEditor =>\n                  (this._propertiesEditor = propertiesEditor)\n                }\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            )}\n          </I18n>\n        ),\n      },\n      'layers-list': {\n        type: 'secondary',\n        title: t`Layers`,\n        renderEditor: () => (\n          <LayersList\n            project={project}\n            resourceSources={resourceSources}\n            resourceExternalEditors={resourceExternalEditors}\n            onChooseResource={onChooseResource}\n            onEditLayerEffects={this.editLayerEffects}\n            onEditLayer={this.editLayer}\n            onRemoveLayer={this._onRemoveLayer}\n            onRenameLayer={this._onRenameLayer}\n            layersContainer={layout}\n            unsavedChanges={this.props.unsavedChanges}\n            ref={layersList => (this._layersList = layersList)}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n          />\n        ),\n      },\n      'instances-list': {\n        type: 'secondary',\n        title: t`Instances list`,\n        renderEditor: () => (\n          <InstancesList\n            instances={initialInstances}\n            selectedInstances={selectedInstances}\n            onSelectInstances={this._onSelectInstances}\n            ref={instancesList => (this._instancesList = instancesList)}\n          />\n        ),\n      },\n      'instances-editor': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <FullSizeInstancesEditorWithScrollbars\n            project={project}\n            layout={layout}\n            initialInstances={initialInstances}\n            instancesEditorSettings={this.state.instancesEditorSettings}\n            onChangeInstancesEditorSettings={this.setInstancesEditorSettings}\n            instancesSelection={this.instancesSelection}\n            onDeleteSelection={this.deleteSelection}\n            onInstancesAdded={this._onInstancesAdded}\n            onInstancesSelected={this._onInstancesSelected}\n            onInstanceDoubleClicked={this._onInstanceDoubleClicked}\n            onInstancesMoved={this._onInstancesMoved}\n            onInstancesResized={this._onInstancesResized}\n            onInstancesRotated={this._onInstancesRotated}\n            selectedObjectNames={this.state.selectedObjectNames}\n            onContextMenu={this._onContextMenu}\n            onCopy={() => this.copySelection({ useLastCursorPosition: true })}\n            onCut={() => this.cutSelection({ useLastCursorPosition: true })}\n            onPaste={() => this.paste({ useLastCursorPosition: true })}\n            onUndo={this.undo}\n            onRedo={this.redo}\n            onZoomOut={this.zoomOut}\n            onZoomIn={this.zoomIn}\n            wrappedEditorRef={editor => {\n              this.editor = editor;\n            }}\n            pauseRendering={!isActive}\n          />\n        ),\n      },\n      'objects-list': {\n        type: 'secondary',\n        title: t`Objects`,\n        toolbarControls: [\n          <I18n key=\"tags\">\n            {({ i18n }) => (\n              <TagsButton\n                buildMenuTemplate={(i18n: I18nType) =>\n                  this._buildObjectTagsMenuTemplate(i18n)\n                }\n              />\n            )}\n          </I18n>,\n          <CloseButton key=\"close\" />,\n        ],\n        renderEditor: () => (\n          <ObjectsList\n            getThumbnail={ObjectsRenderingService.getThumbnail.bind(\n              ObjectsRenderingService\n            )}\n            project={project}\n            objectsContainer={layout}\n            layout={layout}\n            events={layout.getEvents()}\n            resourceSources={resourceSources}\n            resourceExternalEditors={resourceExternalEditors}\n            onChooseResource={onChooseResource}\n            selectedObjectNames={this.state.selectedObjectNames}\n            onEditObject={this.props.onEditObject || this.editObject}\n            onDeleteObject={this._onDeleteObject}\n            canRenameObject={this._canObjectOrGroupUseNewName}\n            onObjectCreated={this._onObjectCreated}\n            onObjectSelected={this._onObjectSelected}\n            onRenameObject={this._onRenameObject}\n            onObjectPasted={() => this.updateBehaviorsSharedData()}\n            selectedObjectTags={this.state.selectedObjectTags}\n            onChangeSelectedObjectTags={selectedObjectTags =>\n              this.setState({\n                selectedObjectTags,\n              })\n            }\n            getAllObjectTags={this._getAllObjectTags}\n            ref={objectsList => (this._objectsList = objectsList)}\n            unsavedChanges={this.props.unsavedChanges}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n          />\n        ),\n      },\n      'object-groups-list': {\n        type: 'secondary',\n        title: t`Object Groups`,\n        renderEditor: () => (\n          <ObjectGroupsList\n            globalObjectGroups={project.getObjectGroups()}\n            objectGroups={layout.getObjectGroups()}\n            onEditGroup={this.editGroup}\n            onDeleteGroup={this._onDeleteGroup}\n            onRenameGroup={this._onRenameGroup}\n            canRenameGroup={this._canObjectOrGroupUseNewName}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ),\n      },\n    };\n    return (\n      <div style={styles.container}>\n        <UseSceneEditorCommands\n          project={project}\n          layout={layout}\n          onEditObject={this.props.onEditObject || this.editObject}\n          onEditObjectVariables={object => {\n            this.editObject(object, 'variables');\n          }}\n          onOpenSceneProperties={this.openSceneProperties}\n          onOpenSceneVariables={this.editLayoutVariables}\n          onEditObjectGroup={this.editGroup}\n          onEditLayerEffects={this.editLayerEffects}\n          onEditLayer={this.editLayer}\n        />\n        <ResponsiveWindowMeasurer>\n          {windowWidth => (\n            <PreferencesContext.Consumer>\n              {({ getDefaultEditorMosaicNode, setDefaultEditorMosaicNode }) => (\n                <EditorMosaic\n                  editors={editors}\n                  limitToOneSecondaryEditor={windowWidth === 'small'}\n                  initialNodes={\n                    windowWidth === 'small'\n                      ? getDefaultEditorMosaicNode('scene-editor-small') ||\n                        initialMosaicEditorNodesSmallWindow\n                      : getDefaultEditorMosaicNode('scene-editor') ||\n                        initialMosaicEditorNodes\n                  }\n                  onPersistNodes={node =>\n                    setDefaultEditorMosaicNode(\n                      windowWidth === 'small'\n                        ? 'scene-editor-small'\n                        : 'scene-editor',\n                      node\n                    )\n                  }\n                  ref={editorMosaic => (this.editorMosaic = editorMosaic)}\n                />\n              )}\n            </PreferencesContext.Consumer>\n          )}\n        </ResponsiveWindowMeasurer>\n        {this.state.editedObjectWithContext && (\n          <ObjectEditorDialog\n            open\n            object={this.state.editedObjectWithContext.object}\n            initialTab={this.state.editedObjectInitialTab}\n            project={project}\n            resourceSources={resourceSources}\n            resourceExternalEditors={resourceExternalEditors}\n            onChooseResource={onChooseResource}\n            onComputeAllVariableNames={() => {\n              const { editedObjectWithContext } = this.state;\n              if (!editedObjectWithContext) return [];\n\n              return EventsRootVariablesFinder.findAllObjectVariables(\n                project.getCurrentPlatform(),\n                project,\n                layout,\n                editedObjectWithContext.object\n              );\n            }}\n            onCancel={() => {\n              if (this.state.editedObjectWithContext) {\n                this.reloadResourcesFor(\n                  this.state.editedObjectWithContext.object\n                );\n              }\n              this.editObject(null);\n            }}\n            canRenameObject={this._canObjectOrGroupUseNewName}\n            onRename={newName => {\n              this._onRenameEditedObject(newName);\n            }}\n            onApply={() => {\n              if (this.state.editedObjectWithContext) {\n                this.reloadResourcesFor(\n                  this.state.editedObjectWithContext.object\n                );\n              }\n              this.editObject(null);\n              this.updateBehaviorsSharedData();\n              this.forceUpdateObjectsList();\n\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n            }}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n            onUpdateBehaviorsSharedData={() => this.updateBehaviorsSharedData()}\n          />\n        )}\n        {!!this.state.editedGroup && (\n          <ObjectGroupEditorDialog\n            project={project}\n            group={this.state.editedGroup}\n            objectsContainer={layout}\n            globalObjectsContainer={project}\n            onCancel={() => this.editGroup(null)}\n            onApply={() => this.editGroup(null)}\n          />\n        )}\n        <InfoBar\n          identifier=\"instance-drag-n-drop-explanation\"\n          message={\n            <Trans>\n              Drag and Drop the object to the scene or use the right click menu\n              to add an instance of it.\n            </Trans>\n          }\n          touchScreenMessage={\n            <Trans>\n              Drag and Drop the object icon to the scene or long press to show\n              options to edit the object.\n            </Trans>\n          }\n          show={!!this.state.selectedObjectNames.length}\n        />\n        <InfoBar\n          identifier=\"objects-panel-explanation\"\n          message={\n            <Trans>\n              Objects panel is already opened: use it to add and edit objects.\n            </Trans>\n          }\n          show={!!this.state.showObjectsListInfoBar}\n        />\n        <InfoBar\n          identifier=\"instance-properties-panel-explanation\"\n          message={\n            <Trans>\n              Properties panel is already opened. After selecting an instance on\n              the scene, inspect and change its properties from this panel.\n            </Trans>\n          }\n          show={!!this.state.showPropertiesInfoBar}\n        />\n        <InfoBar\n          identifier=\"layers-panel-explanation\"\n          message={\n            <Trans>\n              Layers panel is already opened. You can add new layers and apply\n              effects on them from this panel.\n            </Trans>\n          }\n          show={!!this.state.showLayersInfoBar}\n        />\n        <InfoBar\n          identifier=\"instances-panel-explanation\"\n          message={\n            <Trans>\n              Instances panel is already opened. You can search instances in the\n              scene and click one to move the view to it.\n            </Trans>\n          }\n          show={!!this.state.showInstancesInfoBar}\n        />\n        {this.state.setupGridOpen && (\n          <SetupGridDialog\n            instancesEditorSettings={this.state.instancesEditorSettings}\n            onChangeInstancesEditorSettings={this.setInstancesEditorSettings}\n            onCancel={() => this.openSetupGrid(false)}\n            onApply={() => this.openSetupGrid(false)}\n          />\n        )}\n        {!!this.state.variablesEditedInstance && (\n          <VariablesEditorDialog\n            open\n            variablesContainer={\n              this.state.variablesEditedInstance &&\n              this.state.variablesEditedInstance.getVariables()\n            }\n            onCancel={() => this.editInstanceVariables(null)}\n            onApply={() => this.editInstanceVariables(null)}\n            emptyExplanationMessage={\n              <Trans>\n                Instance variables will overwrite the default values of the\n                variables of the object.\n              </Trans>\n            }\n            helpPagePath={'/all-features/variables/instance-variables'}\n            title={<Trans>Instance Variables</Trans>}\n            onEditObjectVariables={() => {\n              if (!this.instancesSelection.hasSelectedInstances()) {\n                return;\n              }\n              const associatedObjectName = this.instancesSelection\n                .getSelectedInstances()[0]\n                .getObjectName();\n              const object = getObjectByName(\n                project,\n                layout,\n                associatedObjectName\n              );\n              if (object) {\n                this.editObject(object, 'variables');\n                this.editInstanceVariables(null);\n              }\n            }}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n            onComputeAllVariableNames={() => {\n              const variablesEditedInstance = this.state\n                .variablesEditedInstance;\n              if (!variablesEditedInstance) {\n                return [];\n              }\n              const variablesEditedObject = getObjectByName(\n                project,\n                layout,\n                variablesEditedInstance.getObjectName()\n              );\n              return variablesEditedObject\n                ? EventsRootVariablesFinder.findAllObjectVariables(\n                    project.getCurrentPlatform(),\n                    project,\n                    layout,\n                    variablesEditedObject\n                  )\n                : [];\n            }}\n          />\n        )}\n        {!!this.state.layerRemoveDialogOpen && (\n          <LayerRemoveDialog\n            open\n            layersContainer={layout}\n            layerRemoved={this.state.layerRemoved}\n            onClose={this.state.onCloseLayerRemoveDialog}\n          />\n        )}\n        {!!this.state.editedLayer && (\n          <LayerEditorDialog\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n            layer={this.state.editedLayer}\n            initialInstances={initialInstances}\n            initialTab={this.state.editedLayerInitialTab}\n            onClose={() =>\n              this.setState({\n                editedLayer: null,\n              })\n            }\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n          />\n        )}\n        {this.state.scenePropertiesDialogOpen && (\n          <ScenePropertiesDialog\n            open\n            project={project}\n            layout={layout}\n            onClose={() => this.openSceneProperties(false)}\n            onApply={() => this.openSceneProperties(false)}\n            onEditVariables={() => this.editLayoutVariables(true)}\n            onOpenMoreSettings={this.props.onOpenMoreSettings}\n          />\n        )}\n        {!!this.state.layoutVariablesDialogOpen && (\n          <SceneVariablesDialog\n            open\n            project={project}\n            layout={layout}\n            onApply={() => this.editLayoutVariables(false)}\n            onClose={() => this.editLayoutVariables(false)}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n          />\n        )}\n        <I18n>\n          {({ i18n }) => (\n            <React.Fragment>\n              <InfoBar\n                show={this.state.showAdditionalWorkInfoBar}\n                identifier={this.state.additionalWorkInfoBar.identifier}\n                message={i18n._(this.state.additionalWorkInfoBar.message)}\n                touchScreenMessage={i18n._(\n                  this.state.additionalWorkInfoBar.touchScreenMessage\n                )}\n              />\n              <ContextMenu\n                ref={contextMenu => (this.contextMenu = contextMenu)}\n                buildMenuTemplate={(i18n: I18nType) => [\n                  {\n                    label: this.state.selectedObjectNames.length\n                      ? i18n._(\n                          t`Add an Instance of ${shortenString(\n                            this.state.selectedObjectNames[0],\n                            7\n                          )}`\n                        )\n                      : '',\n                    click: () => this._onAddInstanceUnderCursor(),\n                    visible: this.state.selectedObjectNames.length > 0,\n                  },\n                  {\n                    label: i18n._(t`Insert a New Object`),\n                    click: () => this._createNewObjectAndInstanceUnderCursor(),\n                    visible: this.state.selectedObjectNames.length === 0,\n                  },\n                  {\n                    label: this.state.selectedObjectNames.length\n                      ? i18n._(\n                          t`Edit Object ${shortenString(\n                            this.state.selectedObjectNames[0],\n                            14\n                          )}`\n                        )\n                      : '',\n                    click: () =>\n                      this.editObjectByName(this.state.selectedObjectNames[0]),\n                    visible: this.state.selectedObjectNames.length > 0,\n                  },\n                  {\n                    label: i18n._(t`Scene properties`),\n                    click: () => this.openSceneProperties(true),\n                  },\n                  { type: 'separator' },\n                  {\n                    label: i18n._(t`Copy`),\n                    click: () => this.copySelection(),\n                    enabled: this.instancesSelection.hasSelectedInstances(),\n                    accelerator: 'CmdOrCtrl+C',\n                  },\n                  {\n                    label: i18n._(t`Cut`),\n                    click: () => this.cutSelection(),\n                    enabled: this.instancesSelection.hasSelectedInstances(),\n                    accelerator: 'CmdOrCtrl+X',\n                  },\n                  {\n                    label: i18n._(t`Paste`),\n                    click: () => this.paste(),\n                    enabled: Clipboard.has(INSTANCES_CLIPBOARD_KIND),\n                    accelerator: 'CmdOrCtrl+V',\n                  },\n                  { type: 'separator' },\n                  {\n                    label: i18n._(t`Undo`),\n                    click: this.undo,\n                    enabled: canUndo(this.state.history),\n                    accelerator: 'CmdOrCtrl+Z',\n                  },\n                  {\n                    label: i18n._(t`Redo`),\n                    click: this.redo,\n                    enabled: canRedo(this.state.history),\n                    accelerator: 'CmdOrCtrl+Shift+Z',\n                  },\n                  {\n                    label: i18n._(t`Delete`),\n                    click: () => this.deleteSelection(),\n                    enabled: this.instancesSelection.hasSelectedInstances(),\n                  },\n                ]}\n              />\n            </React.Fragment>\n          )}\n        </I18n>\n      </div>\n    );\n  }\n}\n","// @flow\nimport ViewPosition from './ViewPosition';\n\nexport const shouldBeHandledByPinch = (event: ?TouchEvent) => {\n  if (!event) return false;\n\n  const { targetTouches } = event;\n  return targetTouches && targetTouches.length >= 2;\n};\n\ntype PinchDetectorArgs = {|\n  canvas: HTMLCanvasElement,\n  onPinchStart: () => void,\n  onPinchMove: (x: number, y: number, scale: number) => void,\n  onPinchEnd: () => void,\n|};\n\n/**\n * Attach events to the canvas that will notify of a pinch at some position\n * and scaling associated with it.\n * Returns a function that can be called to remove these events.\n */\nconst registerCanvasPinchDetector = ({\n  canvas,\n  onPinchStart,\n  onPinchMove,\n  onPinchEnd,\n}: PinchDetectorArgs) => {\n  let lastPinch = null;\n\n  function start() {\n    canvas.addEventListener('touchmove', move);\n  }\n\n  function move(e: TouchEvent) {\n    if (!shouldBeHandledByPinch(e)) {\n      return;\n    }\n    var t = e.targetTouches;\n\n    var dx = t[0].clientX - t[1].clientX;\n    var dy = t[0].clientY - t[1].clientY;\n    var distance = Math.sqrt(dx * dx + dy * dy);\n    if (!lastPinch) {\n      lastPinch = {\n        p: {\n          distance: distance,\n          date: new Date(),\n        },\n      };\n      onPinchStart();\n      return;\n    }\n    var now = new Date();\n    var interval = now - lastPinch.p.date;\n    if (interval < 12) {\n      return;\n    }\n    const newCenter = {\n      x: (t[0].clientX + t[1].clientX) / 2,\n      y: (t[0].clientY + t[1].clientY) / 2,\n    };\n    const scaleChange = distance / lastPinch.p.distance;\n\n    onPinchMove(newCenter.x, newCenter.y, scaleChange);\n    lastPinch.p = {\n      distance: distance,\n      date: now,\n    };\n  }\n\n  function end(e: TouchEvent) {\n    canvas.removeEventListener('touchmove', move);\n    if (!lastPinch) {\n      return;\n    }\n\n    onPinchEnd();\n    lastPinch = null;\n  }\n\n  canvas.addEventListener('touchstart', start);\n  canvas.addEventListener('touchend', end);\n\n  function unregisterCanvasPinchDetector() {\n    canvas.removeEventListener('touchstart', start);\n    canvas.removeEventListener('touchmove', move);\n    canvas.removeEventListener('touchend', end);\n  }\n\n  return unregisterCanvasPinchDetector;\n};\n\ntype Props = {|\n  canvas: HTMLCanvasElement,\n  setZoomFactor: number => void,\n  getZoomFactor: () => number,\n  viewPosition: ViewPosition,\n|};\n\n/**\n * Handle pinch to zoom/move on the canvas, changing the zoom factor or view\n * position accordingly.\n */\nexport default class PinchHandler {\n  _lastPinchCenterX: number | null = null;\n  _lastPinchCenterY: number | null = null;\n  _setZoomFactor: number => void;\n  _getZoomFactor: () => number;\n  _viewPosition: ViewPosition;\n  _unregisterCanvasPinchDetector: () => void;\n\n  constructor({ canvas, setZoomFactor, getZoomFactor, viewPosition }: Props) {\n    this._setZoomFactor = setZoomFactor;\n    this._getZoomFactor = getZoomFactor;\n    this._viewPosition = viewPosition;\n    this._unregisterCanvasPinchDetector = registerCanvasPinchDetector({\n      canvas,\n      onPinchStart: this._startPinch,\n      onPinchMove: this._onPinchMove,\n      onPinchEnd: this._endPinch,\n    });\n  }\n\n  _startPinch = () => {\n    // Nothing to do\n  };\n\n  _onPinchMove = (centerX: number, centerY: number, scale: number) => {\n    if (this._lastPinchCenterX === null || this._lastPinchCenterY === null) {\n      this._lastPinchCenterX = centerX;\n      this._lastPinchCenterY = centerY;\n      return;\n    }\n\n    const deltaX = centerX - this._lastPinchCenterX;\n    const deltaY = centerY - this._lastPinchCenterY;\n    const sceneDeltaX = deltaX / this._getZoomFactor();\n    const sceneDeltaY = deltaY / this._getZoomFactor();\n    this._viewPosition.scrollBy(-sceneDeltaX, -sceneDeltaY);\n    this._lastPinchCenterX = centerX;\n    this._lastPinchCenterY = centerY;\n\n    this._setZoomFactor(this._getZoomFactor() * scale);\n  };\n\n  _endPinch = () => {\n    this._lastPinchCenterX = null;\n    this._lastPinchCenterY = null;\n  };\n\n  unmount = () => {\n    this._unregisterCanvasPinchDetector();\n  };\n}\n","import { mapFor } from '../Utils/MapFor';\n\nexport default layersContainer =>\n  mapFor(0, layersContainer.getLayersCount(), i => {\n    return {\n      value: layersContainer.getLayerAt(i).getName(),\n      label: layersContainer.getLayerAt(i).getName() || 'Base layer',\n    };\n  });\n","// @flow\nimport * as React from 'react';\nimport Measure from 'react-measure';\n\nconst styles = {\n  flexContainer: { display: 'flex', flex: 1, position: 'relative' },\n};\n\ntype Props = {|\n  children: ({| width: number, height: number |}) => React.Node,\n|};\n\n/**\n * Take a component and pass the maximum size that the component can take\n * as width and height props.\n */\nexport const FullSizeMeasurer = ({ children }: Props) => (\n  <Measure bounds>\n    {({ contentRect, measureRef }) => (\n      <div style={styles.flexContainer} ref={measureRef}>\n        {!!contentRect &&\n          !!contentRect.bounds &&\n          children({\n            width: contentRect.bounds.width,\n            height: contentRect.bounds.height,\n          })}\n      </div>\n    )}\n  </Measure>\n);\n","//TODO: Factor with styles.js from LayersList.\nexport default {\n  handleColumn: {\n    width: 24,\n    paddingLeft: 8,\n    paddingRight: 0,\n  },\n  coordinateColumn: {\n    width: 48,\n  },\n  toolColumn: {\n    width: 48,\n    height: 32,\n  },\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SelectField from '../../../../UI/SelectField';\nimport SelectOption from '../../../../UI/SelectOption';\n\nimport Toggle from '../../../../UI/Toggle';\nimport { mapFor } from '../../../../Utils/MapFor';\nimport { getCurrentElements } from './SpriteObjectHelper';\nimport { ResponsiveLineStackLayout } from '../../../../UI/Layout';\n\ntype Props = {|\n  spriteObject: gdSpriteObject,\n\n  animationIndex: number,\n  directionIndex: number,\n  spriteIndex: number,\n\n  chooseAnimation: number => void,\n  chooseDirection: number => void,\n  chooseSprite: number => void,\n\n  sameForAllAnimations: boolean,\n  sameForAllSprites: boolean,\n\n  setSameForAllAnimations: boolean => void,\n  setSameForAllSprites: boolean => void,\n\n  setSameForAllAnimationsLabel: string | React.Node,\n  setSameForAllSpritesLabel: string | React.Node,\n|};\n\n/**\n * A component that displays selector to browse the animations/directions/sprite\n * of a Sprite object. Also have toggles so that the user can choose if the edited property\n * (typically, the points or the collision masks of the sprite) should be shared between\n * all sprites of an animation, or between all sprites of all animations of the object.\n */\nexport default class SpriteSelector extends React.Component<Props, void> {\n  render() {\n    const {\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex,\n      sameForAllAnimations,\n      sameForAllSprites,\n      chooseAnimation,\n      chooseDirection,\n      chooseSprite,\n      setSameForAllAnimations,\n      setSameForAllSprites,\n      setSameForAllAnimationsLabel,\n      setSameForAllSpritesLabel,\n    } = this.props;\n\n    const {\n      hasValidAnimation,\n      animation,\n      hasValidDirection,\n      direction,\n    } = getCurrentElements(\n      spriteObject,\n      animationIndex,\n      directionIndex,\n      spriteIndex\n    );\n\n    return (\n      <React.Fragment>\n        <ResponsiveLineStackLayout>\n          <SelectField\n            fullWidth\n            floatingLabelText={<Trans>Animation</Trans>}\n            value={this.props.animationIndex}\n            onChange={(e, i, value: string) =>\n              chooseAnimation(parseInt(value, 10) || 0)\n            }\n          >\n            {mapFor(0, spriteObject.getAnimationsCount(), i => {\n              const animation = spriteObject.getAnimation(i);\n              return (\n                <SelectOption\n                  key={i}\n                  value={i}\n                  primaryText={t`Animation #${i} ${animation.getName()}`}\n                />\n              );\n            })}\n          </SelectField>\n          {hasValidAnimation && animation.getDirectionsCount() > 1 && (\n            <SelectField\n              fullWidth\n              floatingLabelText={<Trans>Direction</Trans>}\n              value={this.props.directionIndex}\n              onChange={(e, i, value: string) =>\n                chooseDirection(parseInt(value, 10) || 0)\n              }\n            >\n              {mapFor(0, animation.getDirectionsCount(), i => {\n                return (\n                  <SelectOption\n                    value={i}\n                    key={i}\n                    primaryText={t`Direction #${i}`}\n                  />\n                );\n              })}\n            </SelectField>\n          )}\n          {hasValidDirection && (\n            <SelectField\n              fullWidth\n              floatingLabelText={<Trans>Frame</Trans>}\n              value={this.props.spriteIndex}\n              onChange={(e, i, value: string) =>\n                chooseSprite(parseInt(value, 10) || 0)\n              }\n            >\n              {mapFor(0, direction.getSpritesCount(), i => {\n                return (\n                  <SelectOption\n                    value={i}\n                    key={i}\n                    primaryText={t`Frame #${i}`}\n                  />\n                );\n              })}\n            </SelectField>\n          )}\n        </ResponsiveLineStackLayout>\n        <Toggle\n          label={setSameForAllAnimationsLabel}\n          labelPosition=\"right\"\n          toggled={sameForAllAnimations}\n          onToggle={(e, checked) => setSameForAllAnimations(checked)}\n        />\n        <Toggle\n          label={setSameForAllSpritesLabel}\n          labelPosition=\"right\"\n          toggled={sameForAllSprites}\n          onToggle={(e, checked) => setSameForAllSprites(checked)}\n        />\n      </React.Fragment>\n    );\n  }\n}\n","export default {\n  coordinateColumn: {\n    width: 96,\n  },\n  toolColumn: {\n    width: 48,\n  },\n};\n","// @flow\nimport React from 'react';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\nimport ResourcesEditor from '../../ResourcesEditor';\n\nexport class ResourcesEditorContainer extends React.Component<RenderEditorContainerProps> {\n  editor: ?ResourcesEditor;\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // Prevent any update to the editor if the editor is not active,\n    // and so not visible to the user.\n    return nextProps.isActive;\n  }\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  getLayout(): ?gdLayout {\n    return null;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  render() {\n    const { project } = this.props;\n    if (!project) return null;\n\n    return (\n      <ResourcesEditor\n        setToolbar={this.props.setToolbar}\n        onDeleteResource={this.props.onDeleteResource}\n        onRenameResource={this.props.onRenameResource}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        ref={editor => (this.editor = editor)}\n        project={project}\n      />\n    );\n  }\n}\n\nexport const renderResourcesEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <ResourcesEditorContainer {...props} />;\n","// @flow\nimport * as React from 'react';\nimport { prepareInstancesEditorSettings } from '../../InstancesEditor/InstancesEditorSettings';\nimport SceneEditor from '../../SceneEditor';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../../Utils/Serializer';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\n\nexport class SceneEditorContainer extends React.Component<RenderEditorContainerProps> {\n  editor: ?SceneEditor;\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // This optimization is a bit more cautious than the traditional one, to still allow\n    // children, and in particular SceneEditor and InstancesEditor, to be notified when isActive\n    // goes from true to false (in which case PIXI rendering is halted). If isActive was false\n    // and remains false, it's safe to stop update here (PIXI rendering is already halted).\n    if (!this.props.isActive && !nextProps.isActive) {\n      return false;\n    }\n\n    return true;\n  }\n\n  componentDidMount() {\n    if (this.props.isActive) {\n      const { projectItemName } = this.props;\n      this.props.setPreviewedLayout(projectItemName);\n    }\n  }\n\n  componentDidUpdate(prevProps: RenderEditorContainerProps) {\n    if (!prevProps.isActive && this.props.isActive) {\n      const { projectItemName } = this.props;\n      this.props.setPreviewedLayout(projectItemName);\n    }\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    if (this.editor) this.editor.forceUpdateObjectsList();\n  }\n\n  getLayout(): ?gdLayout {\n    const { project, projectItemName } = this.props;\n    if (\n      !project ||\n      !projectItemName ||\n      !project.hasLayoutNamed(projectItemName)\n    )\n      return null;\n\n    return project.getLayout(projectItemName);\n  }\n\n  saveUiSettings = () => {\n    const layout = this.getLayout();\n    const editor = this.editor;\n\n    if (editor && layout) {\n      unserializeFromJSObject(\n        layout.getAssociatedEditorSettings(),\n        editor.getInstancesEditorSettings()\n      );\n    }\n  };\n\n  render() {\n    const { project, projectItemName, isActive } = this.props;\n    const layout = this.getLayout();\n    if (!layout || !project) {\n      //TODO: Error component\n      return <div>No layout called {projectItemName} found!</div>;\n    }\n\n    return (\n      <SceneEditor\n        setToolbar={this.props.setToolbar}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        unsavedChanges={this.props.unsavedChanges}\n        ref={editor => (this.editor = editor)}\n        project={project}\n        layout={layout}\n        initialInstances={layout.getInitialInstances()}\n        getInitialInstancesEditorSettings={() =>\n          prepareInstancesEditorSettings(\n            serializeToJSObject(layout.getAssociatedEditorSettings())\n          )\n        }\n        isActive={isActive}\n        hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n      />\n    );\n  }\n}\n\nexport const renderSceneEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <SceneEditorContainer {...props} />;\n","// @flow\n\nexport const timeFunction = (fn: Function, onResult: number => void) => {\n  var t0 = performance.now();\n  fn();\n  var t1 = performance.now();\n  onResult(t1 - t0);\n};\n\nexport const timePromise = <T>(\n  promiseFn: () => Promise<T>,\n  onResult: number => void\n): Promise<T> => {\n  const t0 = performance.now();\n  return promiseFn().then(result => {\n    const t1 = performance.now();\n    onResult(t1 - t0);\n\n    return result;\n  });\n};\n","// @flow\nimport { useEffect, useRef } from 'react';\n\n/**\n * Creates an interval effect for a callback, with a specified delay.\n */\nexport const useInterval = (callback: () => void, delay: number | null) => {\n  const savedCallback = useRef();\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n\n  useEffect(\n    () => {\n      function tick() {\n        if (savedCallback.current) savedCallback.current();\n      }\n\n      if (delay !== null) {\n        const id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    },\n    [delay]\n  );\n};\n","// @flow\nimport { type I18n } from '@lingui/core';\n\ntype TranslationFunction = (string => string) | null;\ntype NotNullTranslationFunction = string => string;\n\n/**\n * Given the i18n object, return the function that can be used\n * to translate strings. Useful for wiring i18n to extensions\n * and libGD.js, where translations is done with a simple string\n * to string function.\n */\nexport const getTranslationFunction = (i18n: ?I18n): TranslationFunction => {\n  const i18nModule = i18n; // Make flow happy, ensure i18nModule is const.\n  if (i18nModule) {\n    return (str: string) => i18nModule._(str);\n  }\n\n  return null;\n};\n\n/**\n * Given the i18n object, return the function that can be used\n * to translate strings. Useful for wiring i18n to extensions\n * and libGD.js, where translations is done with a simple string\n * to string function.\n */\nexport const getNotNullTranslationFunction = (\n  i18n: ?I18n\n): NotNullTranslationFunction => {\n  const i18nModule = i18n; // Make flow happy, ensure i18nModule is const.\n  if (i18nModule) {\n    return (str: string) => i18nModule._(str);\n  }\n\n  return (str: string) => str;\n};\n","//@flow\nexport const delay = (ms: number): Promise<void> =>\n  new Promise(res => setTimeout(res, ms));\n","// @flow\nimport * as React from 'react';\nimport { type FiltersState, useFilters } from '../UI/Search/FiltersChooser';\nimport { type Filters } from '../Utils/GDevelopServices/Filters';\nimport {\n  listAllShowcasedGames,\n  type AllShowcasedGames,\n  type ShowcasedGame,\n} from '../Utils/GDevelopServices/Game';\nimport { useSearchItem } from '../UI/Search/UseSearchItem';\n\nconst defaultSearchText = '';\n\ntype GamesShowcaseState = {|\n  filters: ?Filters,\n  searchResults: ?Array<ShowcasedGame>,\n  fetchShowcasedGamesAndFilters: () => void,\n  error: ?Error,\n  searchText: string,\n  setSearchText: string => void,\n  filtersState: FiltersState,\n|};\n\nexport const GamesShowcaseContext = React.createContext<GamesShowcaseState>({\n  filters: null,\n  searchResults: null,\n  fetchShowcasedGamesAndFilters: () => {},\n  error: null,\n  searchText: '',\n  setSearchText: () => {},\n  filtersState: {\n    chosenFilters: new Set(),\n    addFilter: () => {},\n    removeFilter: () => {},\n    chosenCategory: null,\n    setChosenCategory: () => {},\n  },\n});\n\ntype GamesShowcaseStateProviderProps = {|\n  children: React.Node,\n|};\n\nconst getShowcasedGameSearchTerms = (showcasedGame: ShowcasedGame) => {\n  return (\n    showcasedGame.title +\n    '\\n' +\n    showcasedGame.author +\n    '\\n' +\n    showcasedGame.description +\n    '\\n' +\n    showcasedGame.tags.join(',')\n  );\n};\n\nexport const GamesShowcaseStateProvider = ({\n  children,\n}: GamesShowcaseStateProviderProps) => {\n  const [showcasedGamesByName, setShowcasedGamesByName] = React.useState<?{\n    [string]: ShowcasedGame,\n  }>(null);\n  const [filters, setFilters] = React.useState<?Filters>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const isLoading = React.useRef<boolean>(false);\n\n  const [searchText, setSearchText] = React.useState(defaultSearchText);\n  const filtersState = useFilters();\n\n  const fetchShowcasedGamesAndFilters = React.useCallback(\n    () => {\n      // Don't attempt to load again games and filters if they\n      // were loaded already.\n      if (showcasedGamesByName || isLoading.current) return;\n\n      (async () => {\n        setError(null);\n        isLoading.current = true;\n\n        try {\n          const allShowcasedGames: AllShowcasedGames = await listAllShowcasedGames();\n          const { showcasedGames, filters } = allShowcasedGames;\n\n          const showcasedGamesByName = {};\n          showcasedGames.forEach(showcasedGame => {\n            showcasedGamesByName[showcasedGame.title] = showcasedGame;\n          });\n\n          console.info(\n            `Loaded ${showcasedGames.length} games from the games showcase.`\n          );\n          setShowcasedGamesByName(showcasedGamesByName);\n          setFilters(filters);\n        } catch (error) {\n          console.error(\n            `Unable to load the games from the games showcase:`,\n            error\n          );\n          setError(error);\n        }\n\n        isLoading.current = false;\n      })();\n    },\n    [showcasedGamesByName, isLoading]\n  );\n\n  const { chosenCategory, chosenFilters } = filtersState;\n  const searchResults: ?Array<ShowcasedGame> = useSearchItem(\n    showcasedGamesByName,\n    getShowcasedGameSearchTerms,\n    searchText,\n    chosenCategory,\n    chosenFilters\n  );\n\n  const gamesShowcaseState = React.useMemo(\n    () => ({\n      searchResults,\n      fetchShowcasedGamesAndFilters,\n      filters,\n      error,\n      searchText,\n      setSearchText,\n      filtersState,\n    }),\n    [\n      searchResults,\n      error,\n      filters,\n      searchText,\n      filtersState,\n      fetchShowcasedGamesAndFilters,\n    ]\n  );\n\n  return (\n    <GamesShowcaseContext.Provider value={gamesShowcaseState}>\n      {children}\n    </GamesShowcaseContext.Provider>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { type FiltersState, useFilters } from '../../UI/Search/FiltersChooser';\nimport {\n  type ExampleShortHeader,\n  type AllExamples,\n  listAllExamples,\n} from '../../Utils/GDevelopServices/Example';\nimport { type Filters } from '../../Utils/GDevelopServices/Filters';\nimport { useSearchItem } from '../../UI/Search/UseSearchItem';\n\nconst defaultSearchText = '';\n\ntype ExampleStoreState = {|\n  filters: ?Filters,\n  searchResults: ?Array<ExampleShortHeader>,\n  fetchExamplesAndFilters: () => void,\n  error: ?Error,\n  searchText: string,\n  setSearchText: string => void,\n  filtersState: FiltersState,\n|};\n\nexport const ExampleStoreContext = React.createContext<ExampleStoreState>({\n  filters: null,\n  searchResults: null,\n  fetchExamplesAndFilters: () => {},\n  error: null,\n  searchText: '',\n  setSearchText: () => {},\n  filtersState: {\n    chosenFilters: new Set(),\n    addFilter: () => {},\n    removeFilter: () => {},\n    chosenCategory: null,\n    setChosenCategory: () => {},\n  },\n});\n\ntype ExampleStoreStateProviderProps = {|\n  children: React.Node,\n|};\n\nconst getExampleSearchTerms = (example: ExampleShortHeader) => {\n  return (\n    example.name +\n    '\\n' +\n    example.shortDescription +\n    '\\n' +\n    example.tags.join(',')\n  );\n};\n\nexport const ExampleStoreStateProvider = ({\n  children,\n}: ExampleStoreStateProviderProps) => {\n  const [\n    exampleShortHeadersById,\n    setExampleShortHeadersById,\n  ] = React.useState<?{\n    [string]: ExampleShortHeader,\n  }>(null);\n  const [filters, setFilters] = React.useState<?Filters>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const isLoading = React.useRef<boolean>(false);\n\n  const [searchText, setSearchText] = React.useState(defaultSearchText);\n  const filtersState = useFilters();\n\n  const fetchExamplesAndFilters = React.useCallback(\n    () => {\n      // Don't attempt to load again resources and filters if they\n      // were loaded already.\n      if (exampleShortHeadersById || isLoading.current) return;\n\n      (async () => {\n        setError(null);\n        isLoading.current = true;\n\n        try {\n          const allExamples: AllExamples = await listAllExamples();\n          const { exampleShortHeaders, filters } = allExamples;\n\n          const exampleShortHeadersById = {};\n          exampleShortHeaders.forEach(exampleShortHeader => {\n            exampleShortHeadersById[exampleShortHeader.id] = exampleShortHeader;\n          });\n\n          console.info(\n            `Loaded ${\n              exampleShortHeaders.length\n            } examples from the example store.`\n          );\n          setExampleShortHeadersById(exampleShortHeadersById);\n          setFilters(filters);\n        } catch (error) {\n          console.error(\n            `Unable to load the examples from the example store:`,\n            error\n          );\n          setError(error);\n        }\n\n        isLoading.current = false;\n      })();\n    },\n    [exampleShortHeadersById, isLoading]\n  );\n\n  React.useEffect(\n    () => {\n      // Don't attempt to load again extensions and filters if they\n      // were loaded already.\n      if (exampleShortHeadersById || isLoading.current) return;\n\n      const timeoutId = setTimeout(() => {\n        console.info('Pre-fetching examples from the example store...');\n        fetchExamplesAndFilters();\n      }, 5000);\n      return () => clearTimeout(timeoutId);\n    },\n    [fetchExamplesAndFilters, exampleShortHeadersById, isLoading]\n  );\n\n  const { chosenCategory, chosenFilters } = filtersState;\n  const searchResults: ?Array<ExampleShortHeader> = useSearchItem(\n    exampleShortHeadersById,\n    getExampleSearchTerms,\n    searchText,\n    chosenCategory,\n    chosenFilters\n  );\n\n  const extensionStoreState = React.useMemo(\n    () => ({\n      searchResults,\n      fetchExamplesAndFilters,\n      filters,\n      error,\n      searchText,\n      setSearchText,\n      filtersState,\n    }),\n    [\n      searchResults,\n      error,\n      filters,\n      searchText,\n      filtersState,\n      fetchExamplesAndFilters,\n    ]\n  );\n\n  return (\n    <ExampleStoreContext.Provider value={extensionStoreState}>\n      {children}\n    </ExampleStoreContext.Provider>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      This will export your game as a Cordova project. Cordova is a technology\n      that enables HTML5 games to be packaged for iOS and Android.\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        You can now compile the game by yourself using Cordova command-line tool\n        to iOS (XCode is required) or Android (Android SDK is required).\n      </Trans>\n    </Text>\n    <Line justifyContent=\"center\">{renderGameButton()}</Line>\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      This will export your game so that you can package it for Windows, macOS\n      or Linux. You will need to install third-party tools (Node.js, Electron\n      Builder) to package your game.\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        The game was properly exported. You can now use Electron Builder (you\n        need Node.js installed and to use the command-line on your computer to\n        run it) to create an executable.\n      </Trans>\n    </Text>\n    <Line justifyContent=\"center\">{renderGameButton()}</Line>\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport Window from '../../Utils/Window';\nimport FlatButton from '../../UI/FlatButton';\nimport { Column, Spacer } from '../../UI/Grid';\nimport AlertMessage from '../../UI/AlertMessage';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>This will export your game to a folder.</Trans>\n    <Trans>\n      You can then upload it on a website/game hosting service and share it on\n      marketplaces and gaming portals like CrazyGames, Poki, Game Jolt, itch.io,\n      Newsground...\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => (\n  <Column noMargin>\n    <Text>\n      <Trans>\n        You can now upload the game to a web hosting to play to the game.\n      </Trans>\n    </Text>\n    <AlertMessage kind=\"warning\">\n      <Trans>\n        Your game won't work if you open index.html on your computer. You must\n        upload it to a web hosting (Kongregate, Itch.io, etc...) or a web server\n        to run it.\n      </Trans>\n    </AlertMessage>\n    <Spacer />\n    {renderGameButton()}\n    <Spacer />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL(\n          getHelpLink('/publishing/publishing-to-gamejolt-store')\n        )\n      }\n      label={<Trans>Publish your game on Game Jolt</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL('https://gdevelop-app.com/crazy-games')\n      }\n      label={<Trans>Publish your game on CrazyGames.com</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL(\n          getHelpLink('/publishing/publishing-to-kongregate-store')\n        )\n      }\n      label={<Trans>Publish your game on Kongregate</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() =>\n        Window.openExternalURL(getHelpLink('/publishing/publishing-to-itch-io'))\n      }\n      label={<Trans>Publish your game on Itch.io</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      primary\n      onClick={() => Window.openExternalURL('https://gdevelop-app.com/poki')}\n      label={<Trans>Publish your game on Poki.com</Trans>}\n    />\n    <FlatButton\n      fullWidth\n      onClick={() => Window.openExternalURL(getHelpLink('/publishing'))}\n      label={<Trans>Learn more about publishing</Trans>}\n    />\n  </Column>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\nimport FlatButton from '../../UI/FlatButton';\nimport { getHelpLink } from '../../Utils/HelpLink';\nimport Window from '../../Utils/Window';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      Prepare your game for Facebook Instant Games so that it can be play on\n      Facebook Messenger. GDevelop will create a compressed file that you can\n      upload on your Facebook Developer account.\n    </Trans>\n  </Text>\n);\n\nexport const DoneFooter = ({\n  renderGameButton,\n}: {|\n  renderGameButton: () => React.Node,\n|}) => {\n  const openLearnMore = () => {\n    Window.openExternalURL(\n      getHelpLink('/publishing/publishing-to-facebook-instant-games')\n    );\n  };\n\n  return (\n    <Column noMargin>\n      <Text>\n        <Trans>\n          You can now create a game on Facebook Instant Games, if not already\n          done, and upload the generated archive.\n        </Trans>\n      </Text>\n      <Line justifyContent=\"center\">\n        {renderGameButton()}\n        <FlatButton\n          label={<Trans>Learn more about Instant Games publication</Trans>}\n          primary\n          onClick={openLearnMore}\n        />\n      </Line>\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport { Column, Line } from '../../UI/Grid';\nimport { type TargetName } from '../../Utils/GDevelopServices/Build';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Radio from '@material-ui/core/Radio';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport HelpButton from '../../UI/HelpButton';\n\nexport type ExportState = {|\n  targets: Array<TargetName>,\n  keystore: 'old' | 'new',\n  signingDialogOpen: boolean,\n|};\n\ntype HeaderProps = {|\n  project: gdProject,\n  exportState: ExportState,\n  updateExportState: (\n    updater: (prevExportState: ExportState) => ExportState\n  ) => void,\n|};\n\nexport const SetupExportHeader = ({\n  exportState,\n  updateExportState,\n}: HeaderProps) => {\n  return (\n    <Column noMargin>\n      <Line>\n        <Text>\n          <Trans>\n            Packaging your game for Android will create an APK file that can be\n            installed on Android phones or an Android App Bundle that can be\n            published to Google Play.\n          </Trans>\n        </Text>\n      </Line>\n      <RadioGroup\n        value={exportState.targets[0] || 'androidApk'}\n        onChange={event => {\n          const targetName = event.target.value;\n          updateExportState(prevExportState => ({\n            ...prevExportState,\n            targets: [targetName],\n          }));\n        }}\n      >\n        <FormControlLabel\n          value={'androidApk'}\n          control={<Radio color=\"primary\" />}\n          label={\n            <Trans>\n              APK (for testing on device or sharing outside Google Play)\n            </Trans>\n          }\n        />\n        <FormControlLabel\n          value={'androidAppBundle'}\n          control={<Radio color=\"primary\" />}\n          label={\n            <Trans>Android App Bundle (for publishing on Google Play)</Trans>\n          }\n        />\n      </RadioGroup>\n      <Line noMargin justifyContent=\"flex-end\">\n        <FlatButton\n          label={<Trans>Signing options</Trans>}\n          onClick={() => {\n            updateExportState(prevExportState => ({\n              ...prevExportState,\n              signingDialogOpen: true,\n            }));\n          }}\n          disabled={exportState.targets[0] !== 'androidAppBundle'}\n        />\n      </Line>\n      {exportState.signingDialogOpen && (\n        <Dialog\n          actions={[\n            <FlatButton\n              key=\"close\"\n              label={<Trans>Close</Trans>}\n              primary\n              keyboardFocused\n              onClick={() => {\n                updateExportState(prevExportState => ({\n                  ...prevExportState,\n                  signingDialogOpen: false,\n                }));\n              }}\n            />,\n          ]}\n          secondaryActions={[\n            <HelpButton\n              helpPagePath=\"/publishing/android_and_ios/play-store/upgrading-from-apk-to-aab\"\n              key=\"help\"\n            />,\n          ]}\n          open\n          title={<Trans>Signing options</Trans>}\n          onRequestClose={() => {\n            updateExportState(prevExportState => ({\n              ...prevExportState,\n              signingDialogOpen: false,\n            }));\n          }}\n          maxWidth=\"sm\"\n        >\n          <Text>\n            <Trans>\n              Choose the upload key to use to identify your Android App Bundle.\n              In most cases you don't need to change this. Use the \"Old upload\n              key\" if you used to publish your game as an APK and you activated\n              Play App Signing before switching to Android App Bundle.\n            </Trans>\n          </Text>\n          <RadioGroup\n            name=\"signing-keystore\"\n            value={exportState.keystore}\n            onChange={event => {\n              const keystore = event.target.value;\n              updateExportState(prevExportState => ({\n                ...prevExportState,\n                keystore,\n              }));\n            }}\n          >\n            <FormControlLabel\n              value={'new'}\n              control={<Radio color=\"primary\" />}\n              label={<Trans>New upload key (recommended)</Trans>}\n            />\n            <FormControlLabel\n              value={'old'}\n              control={<Radio color=\"primary\" />}\n              label={\n                <Trans>\n                  Old upload key (only if you used to publish your game as an\n                  APK and already activated Play App Signing)\n                </Trans>\n              }\n            />\n            <FormControlLabel\n              value={'custom'}\n              control={<Radio color=\"primary\" />}\n              label={<Trans>Custom upload key (not available yet)</Trans>}\n              disabled\n            />\n          </RadioGroup>\n        </Dialog>\n      )}\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\nimport Checkbox from '../../UI/Checkbox';\nimport { Column, Line } from '../../UI/Grid';\nimport { type TargetName } from '../../Utils/GDevelopServices/Build';\n\nexport type ExportState = {|\n  targets: Array<TargetName>,\n|};\n\ntype HeaderProps = {|\n  project: gdProject,\n  exportState: ExportState,\n  updateExportState: (\n    updater: (prevExportState: ExportState) => ExportState\n  ) => void,\n|};\n\nexport const SetupExportHeader = ({\n  exportState,\n  updateExportState,\n}: HeaderProps) => {\n  const setTarget = (targetName: TargetName, enable: boolean) => {\n    updateExportState(prevExportState => {\n      if (enable && prevExportState.targets.indexOf(targetName) === -1) {\n        return {\n          ...prevExportState,\n          targets: [...prevExportState.targets, targetName],\n        };\n      } else if (\n        !enable &&\n        prevExportState.targets.indexOf(targetName) !== -1\n      ) {\n        return {\n          ...prevExportState,\n          targets: prevExportState.targets.filter(name => name !== targetName),\n        };\n      }\n\n      return prevExportState;\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <Column noMargin>\n        <Line>\n          <Text>\n            <Trans>\n              Your game will be exported and packaged online as a stand-alone\n              game for Windows, Linux and/or macOS.\n            </Trans>\n          </Text>\n        </Line>\n        <Checkbox\n          label={<Trans>Windows (zip file)</Trans>}\n          checked={exportState.targets.indexOf('winZip') !== -1}\n          onCheck={(e, checked) => setTarget('winZip', checked)}\n        />\n        <Checkbox\n          label={<Trans>Windows (auto-installer file)</Trans>}\n          checked={exportState.targets.indexOf('winExe') !== -1}\n          onCheck={(e, checked) => setTarget('winExe', checked)}\n        />\n        <Checkbox\n          label={<Trans>macOS (zip file)</Trans>}\n          checked={exportState.targets.indexOf('macZip') !== -1}\n          onCheck={(e, checked) => setTarget('macZip', checked)}\n        />\n        <Checkbox\n          label={<Trans>Linux (AppImage)</Trans>}\n          checked={exportState.targets.indexOf('linuxAppImage') !== -1}\n          onCheck={(e, checked) => setTarget('linuxAppImage', checked)}\n        />\n      </Column>\n    </React.Fragment>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Text from '../../UI/Text';\n\nexport const ExplanationHeader = () => (\n  <Text>\n    <Trans>\n      This will export your game and upload it on GDevelop games hosting. The\n      game will be freely accessible from the link, available for a few days and\n      playable from any computer browser or mobile phone (iOS, Android 5+).\n    </Trans>\n  </Text>\n);\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M18,5H15.5A3.5,3.5 0 0,0 12,8.5V11H10V14H12V21H15V14H18V11H15V9A1,1 0 0,1 16,8H18V5Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M20.18,21.55H16.94L17.17,18.82H15.58L15.35,21.55H8.65L8.42,18.82H6.83L7.06,21.55H3.82L2,9.73L6.55,2.45H17.45L22,9.73L20.18,21.55M16.55,6.09H13.62L13.82,7.45H10.18L10.38,6.09H7.45L5.64,9.73L6.55,17H17.45L18.36,9.73L16.55,6.09M14.95,14.59C14.7,14.59 14.5,13.83 14.5,12.9C14.5,11.96 14.7,11.2 14.95,11.2C15.21,11.2 15.41,11.96 15.41,12.9C15.41,13.83 15.21,14.59 14.95,14.59M9.22,14.73C8.96,14.73 8.76,13.97 8.76,13.04C8.76,12.1 8.96,11.35 9.22,11.35C9.47,11.35 9.67,12.1 9.67,13.04C9.67,13.97 9.47,14.73 9.22,14.73Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M12,20L15.46,14H15.45C15.79,13.4 16,12.73 16,12C16,10.8 15.46,9.73 14.62,9H19.41C19.79,9.93 20,10.94 20,12A8,8 0 0,1 12,20M4,12C4,10.54 4.39,9.18 5.07,8L8.54,14H8.55C9.24,15.19 10.5,16 12,16C12.45,16 12.88,15.91 13.29,15.77L10.89,19.91C7,19.37 4,16.04 4,12M15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12M12,4C14.96,4 17.54,5.61 18.92,8H12C10.06,8 8.45,9.38 8.08,11.21L5.7,7.08C7.16,5.21 9.44,4 12,4M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z\" />\n  </SvgIcon>\n));\n","// @flow\n// Note: this file does not use export/imports and use Flow comments to allow its usage from Node.js\n\nconst some = require('lodash/some');\n/*flow-include\nexport type TranslationFunction = (string) => string;\n\nexport type JsExtensionModule = {\n  createExtension(_: TranslationFunction, gd: any): gdPlatformExtension,\n  runExtensionSanityTests(gd: any, extension: gdPlatformExtension): Array<string>,\n};\n\nexport type ExtensionLoadingResult = {\n  error: boolean,\n  message: string,\n  dangerous?: boolean,\n  rawError?: any,\n};\n\nexport interface JsExtensionsLoader {\n  loadAllExtensions(_: TranslationFunction): Promise<\n    Array<{ extensionModulePath: string, result: ExtensionLoadingResult }>\n  >,\n}\n*/\n\n/**\n * Run extensions tests and check for any non-empty results.\n */\nconst runExtensionSanityTests = (\n  gd /*: any */,\n  extension /*: gdPlatformExtension*/,\n  jsExtensionModule /*: JsExtensionModule*/\n) /*: ExtensionLoadingResult*/ => {\n  if (!jsExtensionModule.runExtensionSanityTests) {\n    return {\n      error: true,\n      message:\n        'Missing runExtensionSanityTests in the extension module exports',\n    };\n  }\n\n  const testResults = jsExtensionModule.runExtensionSanityTests(gd, extension);\n  if (some(testResults)) {\n    return {\n      error: true,\n      message: 'One or more tests are failing for the extension (see rawError)',\n      rawError: testResults,\n    };\n  }\n\n  return {\n    error: false,\n    message: 'Tests passed successfully',\n  };\n};\n\n/**\n * Load an extension from the specified JavaScript module, which is supposed\n * to contain a \"createExtension\" function returning a gd.PlatformExtension.\n */\nconst loadExtension = (\n  _ /*: TranslationFunction */,\n  gd /*: any */,\n  platform /*: gdJsPlatform*/,\n  jsExtensionModule /*: JsExtensionModule*/\n) /*: ExtensionLoadingResult*/ => {\n  if (!jsExtensionModule.createExtension) {\n    return {\n      message:\n        'Extension module found, but no createExtension method is exported',\n      error: true,\n    };\n  }\n\n  let extension = null;\n  try {\n    extension = jsExtensionModule.createExtension(_, gd);\n    if (!extension) {\n      return {\n        message: `createExtension did not return any extension. Did you forget to return the extension created?`,\n        error: true,\n      };\n    }\n  } catch (ex) {\n    return {\n      message: `🚨 Exception caught while running createExtension. 💣 Please fix this error as this will make GDevelop crash at some point.`,\n      error: true,\n      dangerous: true,\n      rawError: ex,\n    };\n  }\n\n  try {\n    const testsResult = runExtensionSanityTests(\n      gd,\n      extension,\n      jsExtensionModule\n    );\n    if (testsResult.error) {\n      extension.delete();\n      return testsResult;\n    }\n  } catch (ex) {\n    return {\n      message: `🚨 Exception caught while running runExtensionSanityTests. 💣 Please fix this error as this will make GDevelop crash at some point.`,\n      error: true,\n      dangerous: true,\n      rawError: ex,\n    };\n  }\n\n  platform.addNewExtension(extension);\n  extension.delete(); // Release the extension as it was copied inside gd.JsPlatform\n\n  return {\n    message: '✅ Successfully loaded the extension.',\n    error: false,\n  };\n};\n\nmodule.exports = {\n  runExtensionSanityTests,\n  loadExtension,\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  type StorageProvider,\n  type StorageProviderOperations,\n  type FileMetadata,\n} from '.';\nimport { type AppArguments } from '../Utils/Window';\n\n/**\n * An empty StorageProvider doing nothing.\n */\nconst emptyStorageProvider: StorageProvider = {\n  internalName: 'Empty',\n  name: 'No storage',\n  createOperations: () => ({\n    onOpenWithPicker: () => Promise.reject('No storage provider set up'),\n    onOpen: () => Promise.reject('No storage provider set up'),\n    hasAutoSave: () => Promise.resolve(false),\n    onSaveProject: (project: gdProject) =>\n      Promise.reject('No storage provider set up'),\n    onSaveProjectAs: (project: gdProject) =>\n      Promise.reject('No storage provider set up'),\n    onAutoSaveProject: (project: gdProject) => Promise.resolve(),\n  }),\n};\n\ntype Props = {|\n  appArguments: AppArguments,\n  storageProviders: Array<StorageProvider>,\n  defaultStorageProvider?: StorageProvider,\n  children: ({\n    storageProviders: Array<StorageProvider>,\n    getStorageProviderOperations: (\n      newStorageProvider: ?StorageProvider\n    ) => Promise<StorageProviderOperations>,\n    initialFileMetadataToOpen: ?FileMetadata,\n    getStorageProvider: () => StorageProvider,\n  }) => React.Node,\n|};\n\ntype InitialStorageProviderAndFileMetadata = {|\n  currentStorageProvider: ?StorageProvider,\n  initialFileMetadataToOpen: ?FileMetadata,\n|};\n\ntype State = {|\n  ...InitialStorageProviderAndFileMetadata,\n  storageProviderOperations: ?StorageProviderOperations,\n  renderDialog: ?() => React.Node,\n|};\n\nconst computeInitialFileMetadataToOpen = (\n  defaultStorageProvider: ?StorageProvider,\n  storageProviders: Array<StorageProvider>,\n  appArguments: AppArguments\n): InitialStorageProviderAndFileMetadata => {\n  const candidates = storageProviders\n    .map(currentStorageProvider => {\n      return {\n        currentStorageProvider,\n        initialFileMetadataToOpen: currentStorageProvider.getFileMetadataFromAppArguments\n          ? currentStorageProvider.getFileMetadataFromAppArguments(appArguments)\n          : null,\n      };\n    })\n    .filter(({ initialFileMetadataToOpen }) => !!initialFileMetadataToOpen);\n\n  if (candidates.length === 0)\n    return {\n      currentStorageProvider: defaultStorageProvider,\n      initialFileMetadataToOpen: null,\n    };\n\n  if (candidates.length > 1) {\n    console.warn(\n      'More than one storage provider can understand the app arguments. Selecting the first one.'\n    );\n  }\n\n  return candidates[0];\n};\n\nexport default class ProjectStorageProviders extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    ...computeInitialFileMetadataToOpen(\n      this.props.defaultStorageProvider,\n      this.props.storageProviders,\n      this.props.appArguments\n    ),\n    storageProviderOperations: null,\n    renderDialog: null,\n  };\n\n  _setDialog = (renderDialog: () => React.Node) => {\n    this.setState({\n      renderDialog,\n    });\n  };\n\n  _closeDialog = () => {\n    this.setState({\n      renderDialog: null,\n    });\n  };\n\n  _getStorageProviderOperations = (\n    storageProvider: ?StorageProvider\n  ): Promise<StorageProviderOperations> => {\n    // Avoid creating a new storageProviderOperations\n    // if we're not changing the storage provider.\n    if (\n      !storageProvider ||\n      storageProvider === this.state.currentStorageProvider\n    ) {\n      if (this.state.storageProviderOperations) {\n        return Promise.resolve(this.state.storageProviderOperations);\n      }\n    }\n\n    const newStorageProvider: StorageProvider =\n      storageProvider ||\n      this.state.currentStorageProvider ||\n      emptyStorageProvider;\n    const storageProviderOperations = newStorageProvider.createOperations({\n      setDialog: this._setDialog,\n      closeDialog: this._closeDialog,\n    });\n\n    return new Promise(resolve => {\n      this.setState(\n        {\n          currentStorageProvider: newStorageProvider,\n          storageProviderOperations,\n        },\n        () => {\n          resolve(storageProviderOperations);\n        }\n      );\n    });\n  };\n\n  _getStorageProvider = () => {\n    return this.state.currentStorageProvider || emptyStorageProvider;\n  };\n\n  render() {\n    const { children, storageProviders } = this.props;\n    const { renderDialog, initialFileMetadataToOpen } = this.state;\n\n    return (\n      <React.Fragment>\n        {children({\n          storageProviders,\n          getStorageProviderOperations: this._getStorageProviderOperations,\n          initialFileMetadataToOpen,\n          getStorageProvider: this._getStorageProvider,\n        })}\n        {renderDialog && renderDialog()}\n      </React.Fragment>\n    );\n  }\n}\n","import { isMacLike } from '../../Utils/Platform';\n\nconst CTRL_KEY = 17;\nconst SHIFT_KEY = 16;\nconst LEFT_KEY = 37;\nconst UP_KEY = 38;\nconst RIGHT_KEY = 39;\nconst DOWN_KEY = 40;\nconst BACKSPACE_KEY = 8;\nconst SPACE_KEY = 32;\nconst DELETE_KEY = 46;\nconst EQUAL_KEY = 187;\nconst MINUS_KEY = 189;\nconst NUMPAD_ADD = 107;\nconst NUMPAD_SUBTRACT = 109;\nconst C_KEY = 67;\nconst F_KEY = 70;\nconst V_KEY = 86;\nconst X_KEY = 88;\nconst Y_KEY = 89;\nconst Z_KEY = 90;\nconst MID_MOUSE_BUTTON = 1;\n\n/**\n * Deprecated class to handle shortcut. Don't use this anymore, prefer the non\n * deprecated version that does not add listener on the document (risking catching events\n * when the components are not focused).\n *\n * TODO: Replace InstancesEditor shortcuts by the new `KeyboardShortcuts`.\n */\nexport default class DeprecatedKeyboardShortcuts {\n  constructor({\n    onDelete,\n    onMove,\n    onCopy,\n    onCut,\n    onPaste,\n    onUndo,\n    onRedo,\n    onSearch,\n    onZoomOut,\n    onZoomIn,\n  }) {\n    this.onDelete = onDelete || this._noop;\n    this.onMove = onMove || this._noop;\n    this.onCopy = onCopy || this._noop;\n    this.onCut = onCut || this._noop;\n    this.onPaste = onPaste || this._noop;\n    this.onUndo = onUndo || this._noop;\n    this.onRedo = onRedo || this._noop;\n    this.onZoomOut = onZoomOut || this._noop;\n    this.onZoomIn = onZoomIn || this._noop;\n    this.onSearch = onSearch || this._noop;\n    this.isFocused = false;\n    this.shiftPressed = false;\n    this.rawCtrlPressed = false;\n    this.metaPressed = false;\n    this.spacePressed = false;\n    this.mouseMidButtonPressed = false;\n    this.mount();\n  }\n\n  shouldCloneInstances() {\n    return this._isControlPressed();\n  }\n\n  shouldMultiSelect() {\n    return this.shiftPressed;\n  }\n\n  shouldFollowAxis() {\n    return this.shiftPressed;\n  }\n\n  shouldNotSnapToGrid() {\n    return this.altPressed;\n  }\n\n  shouldResizeProportionally() {\n    return this.shiftPressed;\n  }\n\n  shouldScrollHorizontally() {\n    return this.altPressed;\n  }\n\n  shouldZoom() {\n    if (isMacLike()) {\n      return this._isControlPressed();\n    } else {\n      if (!this._isControlPressed() && !this.altPressed && !this.shiftPressed) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }\n\n  shouldMoveView() {\n    return this.spacePressed || this.mouseMidButtonPressed;\n  }\n\n  _isControlPressed = () => {\n    // On macOS, meta key (Apple/Command key) acts as Control key on Windows/Linux.\n    return this.metaPressed || this.rawCtrlPressed;\n  };\n\n  _onKeyDown = evt => {\n    if (!this.isFocused) return;\n\n    let preventDefault = false;\n\n    if (evt.metaKey) this.metaPressed = true;\n    if (evt.altKey) this.altPressed = true;\n    if (evt.which === CTRL_KEY) this.rawCtrlPressed = true;\n    if (evt.which === SHIFT_KEY) this.shiftPressed = true;\n    if (evt.which === SPACE_KEY) this.spacePressed = true;\n\n    const textEditorSelectors = 'textarea, input, [contenteditable=\"true\"]';\n    if (evt.target && evt.target.closest(textEditorSelectors)) {\n      return; // Something else is currently being edited.\n    }\n\n    if (this.onMove) {\n      if (evt.which === UP_KEY) {\n        this.shiftPressed ? this.onMove(0, -5) : this.onMove(0, -1);\n      } else if (evt.which === DOWN_KEY) {\n        this.shiftPressed ? this.onMove(0, 5) : this.onMove(0, 1);\n      } else if (evt.which === LEFT_KEY) {\n        this.shiftPressed ? this.onMove(-5, 0) : this.onMove(-1, 0);\n      } else if (evt.which === RIGHT_KEY) {\n        this.shiftPressed ? this.onMove(5, 0) : this.onMove(1, 0);\n      }\n    }\n    if (evt.which === BACKSPACE_KEY || evt.which === DELETE_KEY) {\n      this.onDelete();\n      preventDefault = true;\n    }\n    if (this._isControlPressed() && evt.which === C_KEY) {\n      this.onCopy();\n    }\n    if (this._isControlPressed() && evt.which === X_KEY) {\n      this.onCut();\n    }\n    if (this._isControlPressed() && evt.which === V_KEY) {\n      this.onPaste();\n    }\n    if (this._isControlPressed() && evt.which === Z_KEY) {\n      this.onUndo();\n    }\n    if (this._isControlPressed() && this.shiftPressed && evt.which === Z_KEY) {\n      this.onRedo();\n    }\n    if (this._isControlPressed() && evt.which === Y_KEY) {\n      this.onRedo();\n    }\n    if (this._isControlPressed() && evt.which === F_KEY) {\n      this.onSearch();\n    }\n\n    if (this._isControlPressed() && evt.which === MINUS_KEY) {\n      this.onZoomOut();\n    }\n    if (evt.which === NUMPAD_SUBTRACT) {\n      this.onZoomOut();\n    }\n\n    if (this._isControlPressed() && evt.which === EQUAL_KEY) {\n      this.onZoomIn();\n    }\n    if (evt.which === NUMPAD_ADD) {\n      this.onZoomIn();\n    }\n\n    if (preventDefault) {\n      if (evt.preventDefault) evt.preventDefault();\n      return false;\n    }\n  };\n\n  _onKeyUp = evt => {\n    // Always handle key up event, even if we don't have the focus,\n    // for modifier keys to ensure we don't lose track of their pressed/unpressed status.\n\n    if (!evt.metaKey) this.metaPressed = false;\n    if (!evt.altKey) this.altPressed = false;\n    if (evt.which === CTRL_KEY) this.rawCtrlPressed = false;\n    if (evt.which === SHIFT_KEY) this.shiftPressed = false;\n    if (evt.which === SPACE_KEY) this.spacePressed = false;\n\n    let preventDefault = false;\n\n    if (evt.which === BACKSPACE_KEY || evt.which === DELETE_KEY) {\n      preventDefault = true;\n    }\n\n    if (preventDefault) {\n      if (evt.preventDefault) evt.preventDefault();\n      return false;\n    }\n  };\n\n  _onMouseDown = evt => {\n    if (!this.isFocused) return;\n\n    if (!isMacLike()) {\n      if (evt.button === MID_MOUSE_BUTTON) {\n        this.mouseMidButtonPressed = true;\n      } else {\n        this.mouseMidButtonPressed = false;\n      }\n    }\n  };\n\n  _onMouseUp = evt => {\n    if (!this.isFocused) return;\n\n    if (!isMacLike() && evt.button === MID_MOUSE_BUTTON) {\n      this.mouseMidButtonPressed = false;\n    }\n  };\n\n  _onKeyPress = evt => {};\n\n  _noop = () => {};\n\n  focus() {\n    this.isFocused = true;\n  }\n\n  blur() {\n    this.isFocused = false;\n\n    // Clear these keys on blur to handle the case where app switching via\n    // Cmd+Tab, Win+Tab, or Alt+Tab prevents us from capturing the \"keyup\" event.\n    this.metaPressed = false;\n    this.altPressed = false;\n  }\n\n  mount() {\n    if (typeof document === 'undefined') return;\n\n    document.addEventListener('keydown', this._onKeyDown, true);\n    document.addEventListener('keyup', this._onKeyUp, true);\n    document.addEventListener('keypress', this._onKeyPress, true);\n    document.addEventListener('mousedown', this._onMouseDown, true);\n    document.addEventListener('mouseup', this._onMouseUp, true);\n  }\n\n  unmount() {\n    if (typeof document === 'undefined') return;\n\n    document.removeEventListener('keydown', this._onKeyDown, true);\n    document.removeEventListener('keyup', this._onKeyUp, true);\n    document.removeEventListener('keypress', this._onKeyPress, true);\n    document.removeEventListener('mousedown', this._onMouseDown, true);\n    document.removeEventListener('mouseup', this._onMouseUp, true);\n  }\n}\n","// @flow\nimport LayerRenderer from './LayerRenderer';\nimport ViewPosition from '../ViewPosition';\nimport * as PIXI from 'pixi.js-legacy';\nimport Rectangle from '../../Utils/Rectangle';\n\nexport default class InstancesRenderer {\n  project: gdProject;\n  instances: gdInitialInstancesContainer;\n  layout: gdLayout;\n  viewPosition: ViewPosition;\n  onInstanceClicked: gdInitialInstance => void;\n  onInstanceDoubleClicked: gdInitialInstance => void;\n  onOverInstance: gdInitialInstance => void;\n  onOutInstance: gdInitialInstance => void;\n  onMoveInstance: (gdInitialInstance, number, number) => void;\n  onMoveInstanceEnd: void => void;\n  onDownInstance: (gdInitialInstance, number, number) => void;\n\n  layersRenderers: { [string]: LayerRenderer };\n\n  pixiContainer: PIXI.Container;\n\n  temporaryRectangle: Rectangle;\n  instanceMeasurer: any;\n\n  constructor({\n    project,\n    layout,\n    instances,\n    viewPosition,\n    onInstanceClicked,\n    onInstanceDoubleClicked,\n    onOverInstance,\n    onOutInstance,\n    onMoveInstance,\n    onMoveInstanceEnd,\n    onDownInstance,\n  }: {\n    project: gdProject,\n    instances: gdInitialInstancesContainer,\n    layout: gdLayout,\n    viewPosition: ViewPosition,\n    onInstanceClicked: gdInitialInstance => void,\n    onInstanceDoubleClicked: gdInitialInstance => void,\n    onOverInstance: gdInitialInstance => void,\n    onOutInstance: gdInitialInstance => void,\n    onMoveInstance: (gdInitialInstance, number, number) => void,\n    onMoveInstanceEnd: void => void,\n    onDownInstance: (gdInitialInstance, number, number) => void,\n  }) {\n    this.project = project;\n    this.instances = instances;\n    this.layout = layout;\n    this.viewPosition = viewPosition;\n    this.onInstanceClicked = onInstanceClicked;\n    this.onInstanceDoubleClicked = onInstanceDoubleClicked;\n    this.onOverInstance = onOverInstance;\n    this.onOutInstance = onOutInstance;\n    this.onMoveInstance = onMoveInstance;\n    this.onMoveInstanceEnd = onMoveInstanceEnd;\n    this.onDownInstance = onDownInstance;\n\n    this.layersRenderers = {};\n\n    this.pixiContainer = new PIXI.Container();\n\n    this.temporaryRectangle = new Rectangle();\n    //TODO extract this to a class to have type checking (maybe rethink it)\n    this.instanceMeasurer = {\n      getInstanceAABB: (instance, bounds) => {\n        const layerName = instance.getLayer();\n        const layerRenderer = this.layersRenderers[layerName];\n        if (!layerRenderer) {\n          bounds.left = instance.getX();\n          bounds.top = instance.getY();\n          bounds.right = instance.getX();\n          bounds.bottom = instance.getY();\n          return bounds;\n        }\n\n        return layerRenderer.getInstanceAABB(instance, bounds);\n      },\n      getUnrotatedInstanceAABB: (instance, bounds) => {\n        const layerName = instance.getLayer();\n        const layerRenderer = this.layersRenderers[layerName];\n        if (!layerRenderer) {\n          bounds.left = instance.getX();\n          bounds.top = instance.getY();\n          bounds.right = instance.getX();\n          bounds.bottom = instance.getY();\n          return bounds;\n        }\n\n        return layerRenderer.getUnrotatedInstanceAABB(instance, bounds);\n      },\n      //TODO Replace by getInstanceAABB (make TransformRect uses Rectangle)\n      getInstanceRect: instance => {\n        const aabb = this.instanceMeasurer.getInstanceAABB(\n          instance,\n          this.temporaryRectangle\n        );\n        return {\n          x: aabb.left,\n          y: aabb.top,\n          width: aabb.width(),\n          height: aabb.height(),\n        };\n      },\n    };\n  }\n\n  getPixiContainer() {\n    return this.pixiContainer;\n  }\n\n  getInstanceMeasurer() {\n    return this.instanceMeasurer;\n  }\n\n  render() {\n    for (let i = 0; i < this.layout.getLayersCount(); i++) {\n      const layer = this.layout.getLayerAt(i);\n      const layerName = layer.getName();\n\n      let layerRenderer = this.layersRenderers[layerName];\n      if (!layerRenderer) {\n        this.layersRenderers[layerName] = layerRenderer = new LayerRenderer({\n          project: this.project,\n          layout: this.layout,\n          instances: this.instances,\n          viewPosition: this.viewPosition,\n          layer: layer,\n          onInstanceClicked: this.onInstanceClicked,\n          onInstanceDoubleClicked: this.onInstanceDoubleClicked,\n          onOverInstance: this.onOverInstance,\n          onOutInstance: this.onOutInstance,\n          onMoveInstance: this.onMoveInstance,\n          onMoveInstanceEnd: this.onMoveInstanceEnd,\n          onDownInstance: this.onDownInstance,\n        });\n        this.pixiContainer.addChild(layerRenderer.getPixiContainer());\n      }\n\n      // /!\\ Objects representing layers can be deleted at any moment and replaced\n      // by new one, for example when two layers are swapped.\n      // We update the layer object of the renderer so that the renderer always has\n      // a valid layer object that can be used.\n      layerRenderer.layer = layer;\n      layerRenderer.wasUsed = true;\n      layerRenderer.getPixiContainer().zOrder = i;\n      layerRenderer.render();\n    }\n\n    this._updatePixiObjectsZOrder();\n    this._cleanUnusedLayerRenderers();\n  }\n\n  _updatePixiObjectsZOrder() {\n    this.pixiContainer.children.sort((a, b) => {\n      a.zOrder = a.zOrder || 0;\n      b.zOrder = b.zOrder || 0;\n      return a.zOrder - b.zOrder;\n    });\n  }\n\n  /**\n   * Delete instance renderers of the specified objects, which will then be recreated during\n   * the next render.\n   * @param {string} objectName The name of the object for which instance must be re-rendered.\n   */\n  resetInstanceRenderersFor(objectName: string) {\n    for (let i in this.layersRenderers) {\n      if (this.layersRenderers.hasOwnProperty(i)) {\n        const layerRenderer = this.layersRenderers[i];\n        layerRenderer.resetInstanceRenderersFor(objectName);\n      }\n    }\n  }\n\n  /**\n   * Clean up rendered layers that are not existing anymore\n   */\n  _cleanUnusedLayerRenderers() {\n    for (let i in this.layersRenderers) {\n      if (this.layersRenderers.hasOwnProperty(i)) {\n        const layerRenderer = this.layersRenderers[i];\n        if (!layerRenderer.wasUsed) {\n          this.pixiContainer.removeChild(layerRenderer.getPixiContainer());\n          layerRenderer.delete();\n          delete this.layersRenderers[i];\n        } else layerRenderer.wasUsed = false;\n      }\n    }\n  }\n\n  delete() {\n    // Destroy the layers first.\n    for (let i in this.layersRenderers) {\n      if (this.layersRenderers.hasOwnProperty(i)) {\n        this.layersRenderers[i].delete();\n      }\n    }\n\n    // Finish by the pixi container.\n    this.pixiContainer.destroy();\n  }\n}\n","export default function transformRect(transformPoint, { x, y, width, height }) {\n  const startPos = transformPoint(x, y);\n  const endPos = transformPoint(x + width, y + height);\n  return {\n    x: startPos[0],\n    y: startPos[1],\n    width: endPos[0] - startPos[0],\n    height: endPos[1] - startPos[1],\n  };\n}\n","// @flow\nimport Rectangle from '../Utils/Rectangle';\nimport { roundPositionForResizing } from '../Utils/GridHelpers';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\n\nexport type ResizeGrabbingLocation =\n  | 'TopLeft'\n  | 'BottomLeft'\n  | 'BottomRight'\n  | 'TopRight'\n  | 'Top'\n  | 'Left'\n  | 'Bottom'\n  | 'Right';\n\nexport const resizeGrabbingLocationValues = [\n  'TopLeft',\n  'BottomLeft',\n  'BottomRight',\n  'TopRight',\n  'Top',\n  'Left',\n  'Bottom',\n  'Right',\n];\n\nexport const resizeGrabbingRelativePositions = {\n  TopLeft: [0, 0],\n  BottomLeft: [0, 1],\n  BottomRight: [1, 1],\n  TopRight: [1, 0],\n  Top: [0.5, 0],\n  Left: [0, 0.5],\n  Bottom: [0.5, 1],\n  Right: [1, 0.5],\n};\n\nexport const canMoveOnX = (location: ResizeGrabbingLocation) =>\n  location !== 'Top' && location !== 'Bottom';\n\nexport const canMoveOnY = (location: ResizeGrabbingLocation) =>\n  location !== 'Left' && location !== 'Right';\n\nconst areAnyInstancesNotStraight = (instances: gdInitialInstance[]) => {\n  for (let i = 0; i < instances.length; i++) {\n    if (instances[i].getAngle() % 90 !== 0) return true;\n  }\n  return false;\n};\n\nexport default class InstancesResizer {\n  instanceMeasurer: any;\n  instancesEditorSettings: InstancesEditorSettings;\n\n  // The initial state of instances before a resize:\n  _initialSelectionAABB: ?Rectangle = null;\n  _unrotatedInstanceAABBs: { [number]: Rectangle } = {};\n  _instanceAABBs: { [number]: Rectangle } = {};\n  _instancePositions: { [number]: { x: number, y: number } } = {};\n\n  // The coordinates of the vector of the resize being done:\n  totalDeltaX: number = 0;\n  totalDeltaY: number = 0;\n\n  /**\n   * Used when rounding on the grid\n   */\n  _temporaryGrabbingPosition: [number, number] = [0, 0];\n\n  constructor({\n    instanceMeasurer,\n    instancesEditorSettings,\n  }: {\n    instanceMeasurer: any,\n    instancesEditorSettings: InstancesEditorSettings,\n  }) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.instancesEditorSettings = instancesEditorSettings;\n  }\n\n  setInstancesEditorSettings(instancesEditorSettings: InstancesEditorSettings) {\n    this.instancesEditorSettings = instancesEditorSettings;\n  }\n\n  _getOrCreateInstanceAABB(instance: gdInitialInstance) {\n    const initialInstanceAABB = this._instanceAABBs[instance.ptr];\n    if (initialInstanceAABB) return initialInstanceAABB;\n\n    return (this._instanceAABBs[\n      instance.ptr\n    ] = this.instanceMeasurer.getInstanceAABB(instance, new Rectangle()));\n  }\n\n  _getOrCreateUnrotatedInstanceAABB(instance: gdInitialInstance) {\n    const initialUnrotatedInstanceAABB = this._unrotatedInstanceAABBs[\n      instance.ptr\n    ];\n    if (initialUnrotatedInstanceAABB) return initialUnrotatedInstanceAABB;\n\n    return (this._unrotatedInstanceAABBs[\n      instance.ptr\n    ] = this.instanceMeasurer.getUnrotatedInstanceAABB(\n      instance,\n      new Rectangle()\n    ));\n  }\n\n  _getOrCreateInstanceOriginPosition(instance: gdInitialInstance) {\n    const initialPosition = this._instancePositions[instance.ptr];\n    if (initialPosition) return initialPosition;\n\n    return (this._instancePositions[instance.ptr] = {\n      x: instance.getX(),\n      y: instance.getY(),\n    });\n  }\n\n  _getOrCreateSelectionAABB(instances: gdInitialInstance[]): ?Rectangle {\n    let initialSelectionAABB = this._initialSelectionAABB;\n    if (initialSelectionAABB) {\n      return initialSelectionAABB;\n    }\n    if (!instances.length) return null;\n    initialSelectionAABB = new Rectangle();\n    initialSelectionAABB.setRectangle(\n      this._getOrCreateInstanceAABB(instances[0])\n    );\n    for (let i = 1; i < instances.length; i++) {\n      initialSelectionAABB.union(this._getOrCreateInstanceAABB(instances[i]));\n    }\n    this._initialSelectionAABB = initialSelectionAABB;\n    return initialSelectionAABB;\n  }\n\n  resizeBy(\n    instances: gdInitialInstance[],\n    deltaX: number,\n    deltaY: number,\n    grabbingLocation: ResizeGrabbingLocation,\n    proportional: boolean\n  ) {\n    this.totalDeltaX += deltaX;\n    this.totalDeltaY += deltaY;\n\n    const nonLockedInstances = instances.filter(\n      instance => !instance.isLocked()\n    );\n\n    const initialSelectionAABB = this._getOrCreateSelectionAABB(\n      nonLockedInstances\n    );\n    if (!initialSelectionAABB) return;\n\n    // Round the grabbed handle position on the grid.\n    const grabbingRelativePosition =\n      resizeGrabbingRelativePositions[grabbingLocation];\n    const initialGrabbingX =\n      initialSelectionAABB.left +\n      initialSelectionAABB.width() * grabbingRelativePosition[0];\n    const initialGrabbingY =\n      initialSelectionAABB.top +\n      initialSelectionAABB.height() * grabbingRelativePosition[1];\n    const grabbingPosition = this._temporaryGrabbingPosition;\n    grabbingPosition[0] = initialGrabbingX + this.totalDeltaX;\n    grabbingPosition[1] = initialGrabbingY + this.totalDeltaY;\n    if (\n      this.instancesEditorSettings.snap &&\n      this.instancesEditorSettings.grid\n    ) {\n      roundPositionForResizing(\n        grabbingPosition,\n        this.instancesEditorSettings.gridWidth,\n        this.instancesEditorSettings.gridHeight,\n        this.instancesEditorSettings.gridOffsetX,\n        this.instancesEditorSettings.gridOffsetY,\n        this.instancesEditorSettings.gridType\n      );\n    } else {\n      // Without a grid, the position is still rounded to the nearest pixel.\n      grabbingPosition[0] = Math.round(grabbingPosition[0]);\n      grabbingPosition[1] = Math.round(grabbingPosition[1]);\n    }\n    let roundedTotalDeltaX = grabbingPosition[0] - initialGrabbingX;\n    let roundedTotalDeltaY = grabbingPosition[1] - initialGrabbingY;\n\n    if (!canMoveOnX(grabbingLocation)) {\n      roundedTotalDeltaX = 0;\n    }\n    if (!canMoveOnY(grabbingLocation)) {\n      roundedTotalDeltaY = 0;\n    }\n\n    const isLeft =\n      grabbingLocation === 'TopLeft' ||\n      grabbingLocation === 'BottomLeft' ||\n      grabbingLocation === 'Left';\n    const isTop =\n      grabbingLocation === 'TopLeft' ||\n      grabbingLocation === 'TopRight' ||\n      grabbingLocation === 'Top';\n\n    // Flip the deltas to end up in the nominal case of a bottom-right grabbed node.\n    // Because a negative deltaX on the left grabbing handle will make the width greater\n    // as a positive deltaX on the right grabbing handle would do.\n    const flippedTotalDeltaX = isLeft\n      ? -roundedTotalDeltaX\n      : roundedTotalDeltaX;\n    const flippedTotalDeltaY = isTop ? -roundedTotalDeltaY : roundedTotalDeltaY;\n\n    let scaleX =\n      initialSelectionAABB.width() !== 0\n        ? (initialSelectionAABB.width() + flippedTotalDeltaX) /\n          initialSelectionAABB.width()\n        : flippedTotalDeltaX;\n    let scaleY =\n      initialSelectionAABB.height() !== 0\n        ? (initialSelectionAABB.height() + flippedTotalDeltaY) /\n          initialSelectionAABB.height()\n        : flippedTotalDeltaY;\n\n    const hasRotatedInstance = areAnyInstancesNotStraight(nonLockedInstances);\n\n    // Applying a rotation then a scaling can result to\n    // an affine transformation with a shear transformation - which we don't want.\n    // If any instance is rotated, we keep the aspect ratio (i.e: force proportional resizing)\n    // to ensure a transformation without any shear.\n    if (proportional || hasRotatedInstance) {\n      // Choose the axis where the selection is the biggest.\n      // That way the cursor is always on one edge.\n      if (\n        !canMoveOnY(grabbingLocation) ||\n        (canMoveOnX(grabbingLocation) &&\n          flippedTotalDeltaX * initialSelectionAABB.height() >\n            flippedTotalDeltaY * initialSelectionAABB.width())\n      ) {\n        scaleY = scaleX;\n      } else {\n        scaleX = scaleY;\n      }\n    }\n\n    // No negative scale because instances can't be mirrored.\n    // Make the minimal selection size to 1 to avoid absorption.\n    // If size is already 0, use a minimum scale to avoid negative scales.\n    scaleX = Math.max(\n      initialSelectionAABB.width() !== 0\n        ? 1 / initialSelectionAABB.width()\n        : 0.00001,\n      scaleX\n    );\n    scaleY = Math.max(\n      initialSelectionAABB.height() !== 0\n        ? 1 / initialSelectionAABB.height()\n        : 0.00001,\n      scaleY\n    );\n\n    const fixedPointX =\n      initialSelectionAABB.right -\n      resizeGrabbingRelativePositions[grabbingLocation][0] *\n        initialSelectionAABB.width();\n    const fixedPointY =\n      initialSelectionAABB.bottom -\n      resizeGrabbingRelativePositions[grabbingLocation][1] *\n        initialSelectionAABB.height();\n\n    for (let i = 0; i < nonLockedInstances.length; i++) {\n      const selectedInstance = nonLockedInstances[i];\n\n      let initialUnrotatedInstanceAABB = this._getOrCreateUnrotatedInstanceAABB(\n        selectedInstance\n      );\n      let initialInstanceOriginPosition = this._getOrCreateInstanceOriginPosition(\n        selectedInstance\n      );\n\n      // Assume a size of 1 pixel to start the resizing\n      // if the instance had a size of 0.\n      const initialWidth =\n        initialUnrotatedInstanceAABB.width() !== 0\n          ? initialUnrotatedInstanceAABB.width()\n          : 1;\n      const initialHeight =\n        initialUnrotatedInstanceAABB.height() !== 0\n          ? initialUnrotatedInstanceAABB.height()\n          : 1;\n\n      // The position and size of an instance describe the shape\n      // before the rotation is applied.\n      // The calculus is like a 90° or 270° rotation of the basis around the scaling.\n      // The AABB dimensions are the same in both cases and the AABB center\n      // is stable by instance rotation. This allows to use the same formula\n      // for both 90° or 270°.\n      const angle = ((selectedInstance.getAngle() % 360) + 360) % 360;\n      if (\n        !proportional &&\n        !hasRotatedInstance &&\n        (angle === 90 || angle === 270)\n      ) {\n        selectedInstance.setCustomWidth(scaleY * initialWidth);\n        selectedInstance.setCustomHeight(scaleX * initialHeight);\n        selectedInstance.setHasCustomSize(true);\n\n        // These 4 variables are the positions and vector after the scaling.\n        // It's easier to scale the instance center\n        // because it's not affected by the instance rotation.\n        const centerX =\n          (initialUnrotatedInstanceAABB.centerX() - fixedPointX) * scaleX +\n          fixedPointX;\n        const centerY =\n          (initialUnrotatedInstanceAABB.centerY() - fixedPointY) * scaleY +\n          fixedPointY;\n        // and then add the vector from the center to the origin.\n        // It's the vector on the unrotated instance\n        // and the scale was applied on the rotated one so it's switched.\n        const centerToOriginX =\n          scaleY *\n          (initialInstanceOriginPosition.x -\n            initialUnrotatedInstanceAABB.centerX());\n        const centerToOriginY =\n          scaleX *\n          (initialInstanceOriginPosition.y -\n            initialUnrotatedInstanceAABB.centerY());\n        selectedInstance.setX(centerX + centerToOriginX);\n        selectedInstance.setY(centerY + centerToOriginY);\n      } else {\n        selectedInstance.setCustomWidth(scaleX * initialWidth);\n        selectedInstance.setCustomHeight(scaleY * initialHeight);\n        selectedInstance.setHasCustomSize(true);\n\n        selectedInstance.setX(\n          (initialInstanceOriginPosition.x - fixedPointX) * scaleX + fixedPointX\n        );\n        selectedInstance.setY(\n          (initialInstanceOriginPosition.y - fixedPointY) * scaleY + fixedPointY\n        );\n      }\n    }\n  }\n\n  endResize() {\n    this._initialSelectionAABB = null;\n    this._unrotatedInstanceAABBs = {};\n    this._instanceAABBs = {};\n    this._instancePositions = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n}\n","// @flow\nimport gesture from 'pixi-simple-gesture';\nimport transformRect from '../Utils/TransformRect';\nimport * as PIXI from 'pixi.js-legacy';\nimport { type ScreenType } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport InstancesSelection from './InstancesSelection';\nimport {\n  type ResizeGrabbingLocation,\n  resizeGrabbingLocationValues,\n  resizeGrabbingRelativePositions,\n  canMoveOnX,\n  canMoveOnY,\n} from './InstancesResizer';\n\ntype Props = {|\n  instancesSelection: InstancesSelection,\n  instanceMeasurer: Object, // To be typed in InstancesRenderer\n  onResize: (\n    deltaX: number,\n    deltaY: number,\n    grabbingLocation: ResizeGrabbingLocation\n  ) => void,\n  onResizeEnd: () => void,\n  onRotate: (number, number) => void,\n  onRotateEnd: () => void,\n  toCanvasCoordinates: (x: number, y: number) => [number, number],\n  screenType: ScreenType,\n|};\n\nconst getButtonSizes = (screenType: ScreenType) => {\n  if (screenType === 'touch') {\n    return {\n      bigButtonSize: 14,\n      smallButtonSize: 12,\n      buttonPadding: 5,\n      hitAreaPadding: 12,\n    };\n  }\n\n  return {\n    bigButtonSize: 10,\n    smallButtonSize: 8,\n    buttonPadding: 5,\n    hitAreaPadding: 5,\n  };\n};\n\nconst RECTANGLE_BUTTON_SHAPE = 0;\nconst CIRCLE_BUTTON_SHAPE = 1;\n\nconst resizeGrabbingIconNames = {\n  TopLeft: 'nwse-resize',\n  BottomLeft: 'nesw-resize',\n  BottomRight: 'nwse-resize',\n  TopRight: 'nesw-resize',\n  Top: 'ns-resize',\n  Left: 'ew-resize',\n  Bottom: 'ns-resize',\n  Right: 'ew-resize',\n};\n\n/**\n * Render selection rectangle for selected instances.\n */\nexport default class SelectedInstances {\n  instancesSelection: InstancesSelection;\n  instanceMeasurer: Object; // To be typed in InstancesRenderer\n  onResize: (\n    deltaX: number,\n    deltaY: number,\n    grabbingLocation: ResizeGrabbingLocation\n  ) => void;\n  onResizeEnd: () => void;\n  onRotate: (number, number) => void;\n  onRotateEnd: () => void;\n  toCanvasCoordinates: (x: number, y: number) => [number, number];\n  _screenType: ScreenType;\n\n  pixiContainer = new PIXI.Container();\n  rectanglesContainer = new PIXI.Container();\n  selectedRectangles = [];\n  resizeButtons: { [ResizeGrabbingLocation]: PIXI.Graphics } = {};\n  rotateButton = new PIXI.Graphics();\n\n  constructor({\n    instancesSelection,\n    instanceMeasurer,\n    onResize,\n    onResizeEnd,\n    onRotate,\n    onRotateEnd,\n    toCanvasCoordinates,\n    screenType,\n  }: Props) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.onResize = onResize;\n    this.onResizeEnd = onResizeEnd;\n    this.onRotate = onRotate;\n    this.onRotateEnd = onRotateEnd;\n    this.toCanvasCoordinates = toCanvasCoordinates;\n    this.instancesSelection = instancesSelection;\n    this._screenType = screenType;\n\n    this.pixiContainer.addChild(this.rectanglesContainer);\n\n    for (const resizeGrabbingLocation of resizeGrabbingLocationValues) {\n      const resizeButton = new PIXI.Graphics();\n      this.resizeButtons[resizeGrabbingLocation] = resizeButton;\n      this._makeButton(\n        resizeButton,\n        event => {\n          this.onResize(event.deltaX, event.deltaY, resizeGrabbingLocation);\n        },\n        () => {\n          this.onResizeEnd();\n        },\n        resizeGrabbingIconNames[resizeGrabbingLocation]\n      );\n    }\n    this._makeButton(\n      this.rotateButton,\n      event => {\n        this.onRotate(event.deltaX, event.deltaY);\n      },\n      () => {\n        this.onRotateEnd();\n      },\n      'url(\"res/actions/rotate24.png\"),auto'\n    );\n  }\n\n  setScreenType(screenType: ScreenType) {\n    this._screenType = screenType;\n  }\n\n  _makeButton(\n    objectButton: PIXI.Graphics,\n    onMove: (event: any) => void,\n    onEnd: () => void,\n    cursor: string\n  ) {\n    objectButton.interactive = true;\n    objectButton.buttonMode = true;\n    objectButton.cursor = cursor;\n    gesture.panable(objectButton);\n    objectButton.on('panmove', onMove);\n    objectButton.on('panend', onEnd);\n    this.pixiContainer.addChild(objectButton);\n  }\n\n  getPixiContainer() {\n    return this.pixiContainer;\n  }\n\n  _renderButton(\n    show: boolean,\n    buttonObject: PIXI.Graphics,\n    canvasPosition: [number, number],\n    size: number,\n    shape: 0 | 1,\n    hitAreaPadding: number\n  ) {\n    buttonObject.clear();\n    if (!show) {\n      buttonObject.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n      return;\n    }\n\n    buttonObject.beginFill(0xffffff);\n    buttonObject.lineStyle(1, 0x6868e8, 1);\n    buttonObject.fill.alpha = 0.9;\n    if (shape === RECTANGLE_BUTTON_SHAPE) {\n      buttonObject.drawRect(canvasPosition[0], canvasPosition[1], size, size);\n    } else if (shape === CIRCLE_BUTTON_SHAPE) {\n      buttonObject.drawCircle(\n        canvasPosition[0] + size / 2,\n        canvasPosition[1] + size / 2,\n        size / 2\n      );\n    }\n\n    buttonObject.endFill();\n    buttonObject.hitArea = new PIXI.Rectangle(\n      canvasPosition[0] - hitAreaPadding,\n      canvasPosition[1] - hitAreaPadding,\n      size + hitAreaPadding * 2,\n      size + hitAreaPadding * 2\n    );\n  }\n\n  render() {\n    const {\n      bigButtonSize,\n      smallButtonSize,\n      buttonPadding,\n      hitAreaPadding,\n    } = getButtonSizes(this._screenType);\n    const selection = this.instancesSelection.getSelectedInstances();\n    let x1 = 0;\n    let y1 = 0;\n    let x2 = 0;\n    let y2 = 0;\n    let initialised = false;\n\n    // Update the selection rectangle of each instance.\n    for (var i = 0; i < selection.length; i++) {\n      if (this.selectedRectangles.length === i) {\n        const newRectangle = new PIXI.Graphics();\n        newRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n        this.selectedRectangles.push(newRectangle);\n        this.rectanglesContainer.addChild(newRectangle);\n      }\n\n      const instance = selection[i];\n      const instanceRect = this.instanceMeasurer.getInstanceRect(instance);\n      const selectionRectangle = transformRect(\n        this.toCanvasCoordinates,\n        instanceRect\n      );\n\n      this.selectedRectangles[i].clear();\n      const selectionRectangleColor = instance.isLocked() ? 0xbc5753 : 0x6868e8;\n      this.selectedRectangles[i].beginFill(selectionRectangleColor);\n      this.selectedRectangles[i].lineStyle(1, selectionRectangleColor, 1);\n      this.selectedRectangles[i].fill.alpha = 0.3;\n      this.selectedRectangles[i].alpha = 0.8;\n      this.selectedRectangles[i].drawRect(\n        selectionRectangle.x,\n        selectionRectangle.y,\n        selectionRectangle.width,\n        selectionRectangle.height\n      );\n      this.selectedRectangles[i].endFill();\n\n      if (instance.isLocked()) {\n        continue;\n      }\n      if (!initialised) {\n        x1 = instanceRect.x;\n        y1 = instanceRect.y;\n        x2 = instanceRect.x + instanceRect.width;\n        y2 = instanceRect.y + instanceRect.height;\n        initialised = true;\n      } else {\n        if (instanceRect.x < x1) x1 = instanceRect.x;\n        if (instanceRect.y < y1) y1 = instanceRect.y;\n        if (instanceRect.x + instanceRect.width > x2)\n          x2 = instanceRect.x + instanceRect.width;\n        if (instanceRect.y + instanceRect.height > y2)\n          y2 = instanceRect.y + instanceRect.height;\n      }\n    }\n\n    while (this.selectedRectangles.length > selection.length) {\n      this.rectanglesContainer.removeChild(this.selectedRectangles.pop());\n    }\n\n    // If there are no unlocked instances, hide the resize buttons.\n    const show =\n      selection.filter(instance => !instance.isLocked()).length !== 0;\n\n    // Position the resize buttons.\n    for (const grabbingLocation of resizeGrabbingLocationValues) {\n      const resizeButton = this.resizeButtons[grabbingLocation];\n      const relativePositions =\n        resizeGrabbingRelativePositions[grabbingLocation];\n\n      const useBigButton =\n        canMoveOnX(grabbingLocation) && canMoveOnY(grabbingLocation);\n      const buttonSize = useBigButton ? bigButtonSize : smallButtonSize;\n      const padding = buttonPadding + buttonSize / 2;\n      const resizeButtonPos = this.toCanvasCoordinates(\n        x1 - padding + relativePositions[0] * (x2 - x1 + 2 * padding),\n        y1 - padding + relativePositions[1] * (y2 - y1 + 2 * padding)\n      );\n      resizeButtonPos[0] -= buttonSize / 2;\n      resizeButtonPos[1] -= buttonSize / 2;\n\n      this._renderButton(\n        show,\n        resizeButton,\n        resizeButtonPos,\n        buttonSize,\n        RECTANGLE_BUTTON_SHAPE,\n        hitAreaPadding\n      );\n    }\n\n    const rotateButtonPos = this.toCanvasCoordinates(x1 + (x2 - x1) / 2, y1);\n    rotateButtonPos[0] -= smallButtonSize / 2;\n    rotateButtonPos[1] -= buttonPadding * 8;\n\n    this._renderButton(\n      show,\n      this.rotateButton,\n      rotateButtonPos,\n      smallButtonSize,\n      CIRCLE_BUTTON_SHAPE,\n      hitAreaPadding\n    );\n  }\n}\n","import transformRect from '../Utils/TransformRect';\nimport * as PIXI from 'pixi.js-legacy';\n\nexport default class InstancesSelection {\n  constructor({ instanceMeasurer, toCanvasCoordinates }) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.toCanvasCoordinates = toCanvasCoordinates;\n\n    this.highlightedInstance = null;\n    this.highlightRectangle = new PIXI.Graphics();\n    this.highlightRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n\n    this.tooltipBackground = new PIXI.Graphics();\n    this.tooltipText = new PIXI.Text('', {\n      fontSize: 15,\n      fill: 0xffffff,\n      align: 'center',\n    });\n    this.highlightRectangle.addChild(this.tooltipBackground);\n    this.highlightRectangle.addChild(this.tooltipText);\n  }\n\n  setInstance(instance) {\n    this.highlightedInstance = instance;\n  }\n\n  getInstance() {\n    return this.highlightedInstance;\n  }\n\n  getPixiObject(instance) {\n    return this.highlightRectangle;\n  }\n\n  render() {\n    if (this.highlightedInstance === null) {\n      this.highlightRectangle.visible = false;\n      return;\n    }\n\n    const highlightRectangle = transformRect(\n      this.toCanvasCoordinates,\n      this.instanceMeasurer.getInstanceRect(this.highlightedInstance)\n    );\n\n    this.highlightRectangle.visible = true;\n    this.highlightRectangle.clear();\n    this.highlightRectangle.beginFill(0xeeeeff);\n    this.highlightRectangle.fill.alpha = 0.1;\n    this.highlightRectangle.alpha = 0.8;\n    this.highlightRectangle.lineStyle(1, 0x000000, 1);\n    this.highlightRectangle.drawRect(\n      highlightRectangle.x,\n      highlightRectangle.y,\n      highlightRectangle.width,\n      highlightRectangle.height\n    );\n    this.highlightRectangle.endFill();\n\n    const tooltipInfo =\n      this.highlightedInstance.getObjectName() +\n      '\\n' +\n      'X: ' +\n      parseInt(this.highlightedInstance.getX()) +\n      '  Y: ' +\n      parseInt(this.highlightedInstance.getY()) +\n      '\\n' +\n      'Layer: ' +\n      this.highlightedInstance.getLayer() +\n      '  Z: ' +\n      this.highlightedInstance.getZOrder() +\n      '\\n';\n    this.tooltipText.text = tooltipInfo;\n\n    this.tooltipText.x = Math.round(\n      highlightRectangle.x -\n        this.tooltipText.width / 2 +\n        highlightRectangle.width / 2\n    );\n    this.tooltipText.y = Math.round(\n      highlightRectangle.y - this.tooltipText.height\n    );\n\n    const padding = 5;\n    this.tooltipBackground.clear();\n    this.tooltipBackground.beginFill(0x000000, 0.8);\n    this.tooltipBackground.drawRoundedRect(\n      this.tooltipText.x - padding,\n      this.tooltipText.y - padding,\n      this.tooltipText.width + padding * 2,\n      this.tooltipText.height - padding,\n      4\n    );\n    this.tooltipBackground.endFill();\n  }\n}\n","// @flow\nimport Rectangle from '../Utils/Rectangle';\n\nexport default class InstancesRotator {\n  _instanceMeasurer: any;\n\n  // Initial state of the instances\n  // from which the rotation is calculated.\n  _instanceAngles: { [number]: number } = {};\n  _instancePositions: { [number]: {| x: number, y: number |} } = {};\n  _instanceAABBs: { [number]: Rectangle } = {};\n\n  totalDeltaX: number = 0;\n  totalDeltaY: number = 0;\n\n  /**\n   * The fixed point is invalidated when the rotation end.\n   */\n  _fixedPointIsUpToDate: boolean = false;\n\n  // TODO: the fixed point could be made draggable.\n  /**\n   * The fixed point is the center of the selection\n   */\n  _fixedPoint: [number, number] = [0, 0];\n\n  constructor(instanceMeasurer: any) {\n    this._instanceMeasurer = instanceMeasurer;\n  }\n\n  _getNewAngle(proportional: boolean, initialAngle: number) {\n    // The grabbable handle for rotation is on top.\n    // Initially, totalDelta = (0 , selectionAABB.height() / 2)\n    // (see the affectation of totalDeltaY in the rotateBy method).\n    // So the initial angle given by atan2 is -90.\n    // 90 is added to start with a angle delta of 0.\n    const angle =\n      (Math.atan2(this.totalDeltaY, this.totalDeltaX) * 180) / Math.PI +\n      90 +\n      initialAngle;\n    return proportional ? Math.round(angle / 15) * 15 : angle;\n  }\n\n  _getOrCreateInstanceAABB(instance: gdInitialInstance) {\n    const initialAABB = this._instanceAABBs[instance.ptr];\n    if (initialAABB) return initialAABB;\n\n    return (this._instanceAABBs[\n      instance.ptr\n    ] = this._instanceMeasurer.getInstanceAABB(instance, new Rectangle()));\n  }\n\n  _getOrCreateInstanceOriginPosition(instance: gdInitialInstance) {\n    const initialPosition = this._instancePositions[instance.ptr];\n    if (initialPosition) return initialPosition;\n\n    return (this._instancePositions[instance.ptr] = {\n      x: instance.getX(),\n      y: instance.getY(),\n    });\n  }\n\n  _getOrCreateInstanceAngle(instance: gdInitialInstance) {\n    const initialAngle = this._instanceAngles[instance.ptr];\n    if (initialAngle !== undefined) return initialAngle;\n\n    return (this._instanceAngles[instance.ptr] = instance.getAngle());\n  }\n\n  rotateBy(\n    instances: gdInitialInstance[],\n    deltaX: number,\n    deltaY: number,\n    proportional: boolean\n  ) {\n    const nonLockedInstances = instances.filter(\n      instance => !instance.isLocked()\n    );\n\n    if (!this._fixedPointIsUpToDate) {\n      this._fixedPointIsUpToDate = true;\n      let selectionAABB = new Rectangle();\n      selectionAABB.setRectangle(\n        this._getOrCreateInstanceAABB(nonLockedInstances[0])\n      );\n      for (let i = 1; i < nonLockedInstances.length; i++) {\n        selectionAABB.union(\n          this._getOrCreateInstanceAABB(nonLockedInstances[i])\n        );\n      }\n      this._fixedPoint[0] = selectionAABB.centerX();\n      this._fixedPoint[1] = selectionAABB.centerY();\n\n      // Because the button is on top, consider the initial rotation vector to\n      // be directed to the top.\n      this.totalDeltaY -= selectionAABB.height() / 2;\n    }\n\n    this.totalDeltaX += deltaX;\n    this.totalDeltaY += deltaY;\n\n    for (let i = 0; i < nonLockedInstances.length; i++) {\n      const selectedInstance = nonLockedInstances[i];\n\n      const initialAABB = this._getOrCreateInstanceAABB(selectedInstance);\n      const initialAngle = this._getOrCreateInstanceAngle(selectedInstance);\n      const initialInstanceOriginPosition = this._getOrCreateInstanceOriginPosition(\n        selectedInstance\n      );\n\n      const degreeAngle = this._getNewAngle(proportional, initialAngle);\n      selectedInstance.setAngle(((degreeAngle % 360) + 360) % 360);\n\n      const rotationAngle = ((degreeAngle - initialAngle) * Math.PI) / 180;\n      const cosa = Math.cos(-rotationAngle);\n      const sina = Math.sin(-rotationAngle);\n      const deltaX = initialAABB.centerX() - this._fixedPoint[0];\n      const deltaY = initialAABB.centerY() - this._fixedPoint[1];\n      selectedInstance.setX(\n        this._fixedPoint[0] +\n          (initialInstanceOriginPosition.x - initialAABB.centerX()) +\n          cosa * deltaX +\n          sina * deltaY\n      );\n      selectedInstance.setY(\n        this._fixedPoint[1] +\n          (initialInstanceOriginPosition.y - initialAABB.centerY()) -\n          sina * deltaX +\n          cosa * deltaY\n      );\n    }\n  }\n\n  endRotate() {\n    this._instanceAngles = {};\n    this._instancePositions = {};\n    this._instanceAABBs = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n    this._fixedPointIsUpToDate = false;\n  }\n}\n","// @flow\nimport { roundPosition } from '../Utils/GridHelpers';\nimport Rectangle from '../Utils/Rectangle';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\n\nexport default class InstancesMover {\n  instanceMeasurer: any;\n  instancesEditorSettings: InstancesEditorSettings;\n  instancePositions: { [number]: { x: number, y: number } };\n  totalDeltaX: number;\n  totalDeltaY: number;\n  _temporaryPoint: [number, number];\n  _initialSelectionAABB: ?Rectangle = null;\n  _startX: number = 0;\n  _startY: number = 0;\n\n  constructor({\n    instanceMeasurer,\n    instancesEditorSettings,\n  }: {\n    instanceMeasurer: any,\n    instancesEditorSettings: InstancesEditorSettings,\n  }) {\n    this.instanceMeasurer = instanceMeasurer;\n    this.instancesEditorSettings = instancesEditorSettings;\n    this.instancePositions = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n    this._temporaryPoint = [0, 0];\n  }\n\n  setInstancesEditorSettings(instancesEditorSettings: InstancesEditorSettings) {\n    this.instancesEditorSettings = instancesEditorSettings;\n  }\n\n  _getMoveDeltaX(\n    totalDeltaX: number,\n    totalDeltaY: number,\n    followAxis: boolean\n  ) {\n    if (followAxis && Math.abs(totalDeltaX) < Math.abs(totalDeltaY)) return 0;\n\n    return totalDeltaX;\n  }\n\n  _getMoveDeltaY(\n    totalDeltaX: number,\n    totalDeltaY: number,\n    followAxis: boolean\n  ) {\n    if (followAxis && Math.abs(totalDeltaY) < Math.abs(totalDeltaX)) return 0;\n\n    return totalDeltaY;\n  }\n\n  _getOrCreateSelectionAABB(instances: gdInitialInstance[]): ?Rectangle {\n    if (this._initialSelectionAABB) {\n      return this._initialSelectionAABB;\n    }\n    if (!instances.length) return null;\n    let initialSelectionAABB = new Rectangle();\n    this.instanceMeasurer.getInstanceAABB(instances[0], initialSelectionAABB);\n    const initialInstanceAABB = new Rectangle();\n    for (let i = 1; i < instances.length; i++) {\n      this.instanceMeasurer.getInstanceAABB(instances[i], initialInstanceAABB);\n      initialSelectionAABB.union(initialInstanceAABB);\n    }\n    this._initialSelectionAABB = initialSelectionAABB;\n    return initialSelectionAABB;\n  }\n\n  startMove(startX: number, startY: number) {\n    this._startX = startX;\n    this._startY = startY;\n  }\n\n  moveBy(\n    instances: gdInitialInstance[],\n    deltaX: number,\n    deltaY: number,\n    followAxis: boolean,\n    noGridSnap: boolean\n  ) {\n    this.totalDeltaX += deltaX;\n    this.totalDeltaY += deltaY;\n\n    const nonLockedInstances = instances.filter(\n      instance => !instance.isLocked()\n    );\n\n    // It will magnet the corner nearest to the grabbing position\n    const initialSelectionAABB = this._getOrCreateSelectionAABB(\n      nonLockedInstances\n    );\n    if (!initialSelectionAABB) return;\n    const magnetLeft = this._startX < initialSelectionAABB.centerX();\n    const magnetTop = this._startY < initialSelectionAABB.centerY();\n\n    const initialMagnetX = magnetLeft\n      ? initialSelectionAABB.left\n      : initialSelectionAABB.right;\n    const initialMagnetY = magnetTop\n      ? initialSelectionAABB.top\n      : initialSelectionAABB.bottom;\n    const magnetPosition = this._temporaryPoint;\n    magnetPosition[0] = initialMagnetX + this.totalDeltaX;\n    magnetPosition[1] = initialMagnetY + this.totalDeltaY;\n    if (\n      this.instancesEditorSettings.snap &&\n      this.instancesEditorSettings.grid &&\n      !noGridSnap\n    ) {\n      roundPosition(\n        magnetPosition,\n        this.instancesEditorSettings.gridWidth,\n        this.instancesEditorSettings.gridHeight,\n        this.instancesEditorSettings.gridOffsetX,\n        this.instancesEditorSettings.gridOffsetY,\n        this.instancesEditorSettings.gridType\n      );\n    } else {\n      // Without a grid, the position is still rounded to the nearest pixel.\n      // The size of the instance (or selection of instances) might not be round,\n      // so the magnet corner is still relevant.\n      magnetPosition[0] = Math.round(magnetPosition[0]);\n      magnetPosition[1] = Math.round(magnetPosition[1]);\n    }\n    const roundedTotalDeltaX = magnetPosition[0] - initialMagnetX;\n    const roundedTotalDeltaY = magnetPosition[1] - initialMagnetY;\n\n    for (var i = 0; i < nonLockedInstances.length; i++) {\n      const selectedInstance = nonLockedInstances[i];\n\n      let initialPosition = this.instancePositions[selectedInstance.ptr];\n      if (!initialPosition) {\n        initialPosition = this.instancePositions[selectedInstance.ptr] = {\n          x: selectedInstance.getX(),\n          y: selectedInstance.getY(),\n        };\n      }\n      selectedInstance.setX(\n        initialPosition.x +\n          this._getMoveDeltaX(\n            roundedTotalDeltaX,\n            roundedTotalDeltaY,\n            followAxis\n          )\n      );\n      selectedInstance.setY(\n        initialPosition.y +\n          this._getMoveDeltaY(\n            roundedTotalDeltaX,\n            roundedTotalDeltaY,\n            followAxis\n          )\n      );\n    }\n  }\n\n  endMove() {\n    this._initialSelectionAABB = null;\n    this.instancePositions = {};\n    this.totalDeltaX = 0;\n    this.totalDeltaY = 0;\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport ViewPosition from './ViewPosition';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\n\ntype Props = {|\n  viewPosition: ViewPosition,\n  instancesEditorSettings: InstancesEditorSettings,\n|};\n\nexport default class Grid {\n  pixiGrid = new PIXI.Graphics();\n  instancesEditorSettings: InstancesEditorSettings;\n  viewPosition: ViewPosition;\n\n  constructor({ viewPosition, instancesEditorSettings }: Props) {\n    this.viewPosition = viewPosition;\n    this.instancesEditorSettings = instancesEditorSettings;\n\n    this.pixiGrid.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n  }\n\n  setInstancesEditorSettings(instancesEditorSettings: InstancesEditorSettings) {\n    this.instancesEditorSettings = instancesEditorSettings;\n  }\n\n  getPixiObject() {\n    return this.pixiGrid;\n  }\n\n  render() {\n    const instancesEditorSettings = this.instancesEditorSettings;\n\n    if (!instancesEditorSettings.grid) {\n      this.pixiGrid.visible = false;\n      return;\n    }\n\n    const gridColor = instancesEditorSettings.gridColor;\n    const gridAlpha = instancesEditorSettings.gridAlpha;\n\n    this.pixiGrid.visible = true;\n    this.pixiGrid.clear();\n    this.pixiGrid.beginFill(gridColor);\n    this.pixiGrid.lineStyle(1, gridColor, 1);\n    this.pixiGrid.alpha = gridAlpha;\n\n    const sceneStartPoint = this.viewPosition.toSceneCoordinates(0, 0);\n    const sceneEndPoint = this.viewPosition.toSceneCoordinates(\n      this.viewPosition.getWidth(),\n      this.viewPosition.getHeight()\n    );\n\n    const offsetX =\n      ((instancesEditorSettings.gridOffsetX %\n        instancesEditorSettings.gridWidth) +\n        instancesEditorSettings.gridWidth) %\n      instancesEditorSettings.gridWidth;\n    const offsetY =\n      ((instancesEditorSettings.gridOffsetY %\n        instancesEditorSettings.gridHeight) +\n        instancesEditorSettings.gridHeight) %\n      instancesEditorSettings.gridHeight;\n\n    const startX =\n      Math.floor(\n        (sceneStartPoint[0] - offsetX) / instancesEditorSettings.gridWidth\n      ) *\n        instancesEditorSettings.gridWidth +\n      offsetX;\n    const startY =\n      Math.floor(\n        (sceneStartPoint[1] - offsetY) / instancesEditorSettings.gridHeight\n      ) *\n        instancesEditorSettings.gridHeight +\n      offsetY;\n\n    const endX =\n      Math.ceil(\n        (sceneEndPoint[0] - offsetX) / instancesEditorSettings.gridWidth\n      ) *\n        instancesEditorSettings.gridWidth +\n      offsetX;\n    const endY =\n      Math.ceil(\n        (sceneEndPoint[1] - offsetY) / instancesEditorSettings.gridHeight\n      ) *\n        instancesEditorSettings.gridHeight +\n      offsetY;\n\n    if (instancesEditorSettings.gridType === 'isometric') {\n      const countX = Math.round(\n        (endX - startX) / instancesEditorSettings.gridWidth\n      );\n      const countY = Math.round(\n        (endY - startY) / instancesEditorSettings.gridHeight\n      );\n      const lineCount = countX + countY;\n      for (let i = 0; i < lineCount; ++i) {\n        let lineStartX;\n        let lineStartY;\n        if (i < countX) {\n          // top\n          lineStartX =\n            startX +\n            instancesEditorSettings.gridWidth / 2 +\n            i * instancesEditorSettings.gridWidth;\n          lineStartY = startY;\n        } else {\n          // right\n          lineStartX = endX;\n          lineStartY =\n            startY +\n            instancesEditorSettings.gridHeight / 2 +\n            (i - countX) * instancesEditorSettings.gridHeight;\n        }\n        let lineEndX;\n        let lineEndY;\n        if (i < countY) {\n          // left\n          lineEndX = startX;\n          lineEndY =\n            startY +\n            instancesEditorSettings.gridHeight / 2 +\n            i * instancesEditorSettings.gridHeight;\n        } else {\n          // bottom\n          lineEndX =\n            startX +\n            instancesEditorSettings.gridWidth / 2 +\n            (i - countY) * instancesEditorSettings.gridWidth;\n          lineEndY = endY;\n        }\n        const start = this.viewPosition.toCanvasCoordinates(\n          lineStartX,\n          lineStartY\n        );\n        const end = this.viewPosition.toCanvasCoordinates(lineEndX, lineEndY);\n        this.pixiGrid.moveTo(start[0], start[1]);\n        this.pixiGrid.lineTo(end[0], end[1]);\n      }\n      for (let i = 0; i < lineCount; ++i) {\n        let lineStartX;\n        let lineStartY;\n        if (i < countY) {\n          // reverse left\n          lineStartX = startX;\n          lineStartY =\n            startY +\n            instancesEditorSettings.gridHeight / 2 +\n            (countY - 1 - i) * instancesEditorSettings.gridHeight;\n        } else {\n          // top\n          lineStartX =\n            startX +\n            instancesEditorSettings.gridWidth / 2 +\n            (i - countY) * instancesEditorSettings.gridWidth;\n          lineStartY = startY;\n        }\n        let lineEndX;\n        let lineEndY;\n        if (i < countX) {\n          // bottom\n          lineEndX =\n            startX +\n            instancesEditorSettings.gridWidth / 2 +\n            i * instancesEditorSettings.gridWidth;\n          lineEndY = endY;\n        } else {\n          // reverse right\n          lineEndX = endX;\n          lineEndY =\n            startY +\n            instancesEditorSettings.gridHeight / 2 +\n            (lineCount - 1 - i) * instancesEditorSettings.gridHeight;\n        }\n        const start = this.viewPosition.toCanvasCoordinates(\n          lineStartX,\n          lineStartY\n        );\n        const end = this.viewPosition.toCanvasCoordinates(lineEndX, lineEndY);\n        this.pixiGrid.moveTo(start[0], start[1]);\n        this.pixiGrid.lineTo(end[0], end[1]);\n      }\n    } else {\n      for (let x = startX; x < endX; x += instancesEditorSettings.gridWidth) {\n        const start = this.viewPosition.toCanvasCoordinates(x, startY);\n        const end = this.viewPosition.toCanvasCoordinates(x, endY);\n\n        this.pixiGrid.moveTo(start[0], start[1]);\n        this.pixiGrid.lineTo(end[0], end[1]);\n      }\n\n      for (let y = startY; y < endY; y += instancesEditorSettings.gridHeight) {\n        const start = this.viewPosition.toCanvasCoordinates(startX, y);\n        const end = this.viewPosition.toCanvasCoordinates(endX, y);\n\n        this.pixiGrid.moveTo(start[0], start[1]);\n        this.pixiGrid.lineTo(end[0], end[1]);\n      }\n    }\n\n    this.pixiGrid.endFill();\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport transformRect from '../Utils/TransformRect';\nimport { rgbToHexNumber } from '../Utils/ColorTransformer';\n\ntype Props = {|\n  project: gdProject,\n  layout: gdLayout,\n  toCanvasCoordinates: (x: number, y: number) => [number, number],\n|};\n\nexport default class WindowBorder {\n  project: gdProject;\n  layout: gdLayout;\n  toCanvasCoordinates: (x: number, y: number) => [number, number];\n  pixiRectangle = new PIXI.Graphics();\n  windowRectangle: { x: number, y: number, width: number, height: number };\n\n  constructor({ project, layout, toCanvasCoordinates }: Props) {\n    this.project = project;\n    this.layout = layout;\n    this.toCanvasCoordinates = toCanvasCoordinates;\n\n    this.pixiRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this.windowRectangle = {\n      x: 0,\n      y: 0,\n      width: this.project.getGameResolutionWidth(),\n      height: this.project.getGameResolutionHeight(),\n    };\n  }\n\n  getPixiObject() {\n    return this.pixiRectangle;\n  }\n\n  render() {\n    this.windowRectangle.width = this.project.getGameResolutionWidth();\n    this.windowRectangle.height = this.project.getGameResolutionHeight();\n\n    const displayedRectangle = transformRect(\n      this.toCanvasCoordinates,\n      this.windowRectangle\n    );\n\n    this.pixiRectangle.clear();\n    this.pixiRectangle.beginFill(0x000000);\n    this.pixiRectangle.lineStyle(\n      1,\n      rgbToHexNumber(\n        128 + (this.layout.getBackgroundColorRed() % 256),\n        128 + (this.layout.getBackgroundColorBlue() % 256),\n        128 + (this.layout.getBackgroundColorGreen() % 256)\n      ),\n      1\n    );\n    this.pixiRectangle.alpha = 1;\n    this.pixiRectangle.fill.alpha = 0;\n    this.pixiRectangle.drawRect(\n      displayedRectangle.x,\n      displayedRectangle.y,\n      displayedRectangle.width,\n      displayedRectangle.height\n    );\n    this.pixiRectangle.endFill();\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport transformRect from '../Utils/TransformRect';\nimport ViewPosition from './ViewPosition';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\n\ntype Props = {|\n  project: gdProject,\n  instancesEditorSettings: InstancesEditorSettings,\n  viewPosition: ViewPosition,\n|};\n\nexport default class WindowMask {\n  project: gdProject;\n  instancesEditorSettings: InstancesEditorSettings;\n  viewPosition: ViewPosition;\n  pixiRectangle = new PIXI.Graphics();\n  windowRectangle = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0,\n  };\n\n  constructor({ project, viewPosition, instancesEditorSettings }: Props) {\n    this.project = project;\n    this.viewPosition = viewPosition;\n    this.instancesEditorSettings = instancesEditorSettings;\n\n    this.pixiRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n  }\n\n  setInstancesEditorSettings(instancesEditorSettings: InstancesEditorSettings) {\n    this.instancesEditorSettings = instancesEditorSettings;\n  }\n\n  getPixiObject() {\n    return this.pixiRectangle;\n  }\n\n  render() {\n    if (!this.instancesEditorSettings.windowMask) {\n      this.pixiRectangle.visible = false;\n      return;\n    }\n\n    const width = this.project.getGameResolutionWidth();\n    const height = this.project.getGameResolutionHeight();\n    this.windowRectangle.x = this.viewPosition.getViewX() - width / 2;\n    this.windowRectangle.y = this.viewPosition.getViewY() - height / 2;\n    this.windowRectangle.width = width;\n    this.windowRectangle.height = height;\n\n    const displayedRectangle = transformRect(\n      this.viewPosition.toCanvasCoordinates,\n      this.windowRectangle\n    );\n\n    this.pixiRectangle.visible = true;\n    this.pixiRectangle.clear();\n    this.pixiRectangle.beginFill(0x000000);\n    this.pixiRectangle.lineStyle(1, 0x000000, 1);\n    this.pixiRectangle.alpha = 1;\n    this.pixiRectangle.fill.alpha = 0;\n    this.pixiRectangle.drawRect(\n      displayedRectangle.x,\n      displayedRectangle.y,\n      displayedRectangle.width,\n      displayedRectangle.height\n    );\n    this.pixiRectangle.endFill();\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport { rgbToHex } from '../Utils/ColorTransformer';\n\ntype Props = {|\n  layout: gdLayout,\n  pixiRenderer: PIXI.Renderer,\n|};\n\nexport default class BackgroundColor {\n  layout: gdLayout;\n  pixiRenderer: PIXI.Renderer;\n\n  constructor({ layout, pixiRenderer }: Props) {\n    this.layout = layout;\n    this.pixiRenderer = pixiRenderer;\n  }\n\n  render() {\n    this.pixiRenderer.backgroundColor = parseInt(\n      parseInt(\n        rgbToHex(\n          this.layout.getBackgroundColorRed(),\n          this.layout.getBackgroundColorGreen(),\n          this.layout.getBackgroundColorBlue()\n        ),\n        16\n      ),\n      10\n    );\n  }\n}\n","// @flow\n\n/**\n * Provide a method shouldUpdate that can be called in a game loop or in\n * a method used in renderAnimationFrame, and which indicate if the rendering/update\n * of the scene should be done according to the desired framerate.\n */\nexport default class FpsLimiter {\n  _lastFrameTime: number;\n  _interval: number;\n  _forceUpdate: boolean;\n\n  constructor(maxFps: number) {\n    this._lastFrameTime = Date.now();\n    this._interval = 1000 / maxFps;\n    this._forceUpdate = false;\n  }\n\n  shouldUpdate() {\n    const now = Date.now();\n    const delta = now - this._lastFrameTime;\n\n    if (delta > this._interval || this._forceUpdate) {\n      this._lastFrameTime = now - (delta % this._interval);\n      this._forceUpdate = false;\n      return true;\n    }\n\n    return false;\n  }\n\n  forceNextUpdate() {\n    this._forceUpdate = true;\n  }\n}\n","import * as PIXI from 'pixi.js-legacy';\n\n// PIXI has a ticker that is used by PIXI InteractionManager, and which\n// frequently check if interaction happened. We may want to disable it\n// when it's useless to do these interaction checks to save CPU usage.\n\n/**\n *  Stop the PIXI Ticker used to monitor interactions\n */\nexport const stopPIXITicker = () => {\n  const ticker = PIXI.Ticker && PIXI.Ticker.shared;\n  if (ticker) ticker.stop();\n  // TODO: same for the PIXI.Ticker.system\n};\n\n/**\n * Start the PIXI Ticker used to monitor interactions\n */\nexport const startPIXITicker = () => {\n  // Timeout ensure that the ticker is started even if other components\n  // call stopPIXITicker during the same tick (for example, when switching\n  // between SceneEditor tabs).\n  setTimeout(() => {\n    const ticker = PIXI.Ticker && PIXI.Ticker.shared;\n    if (ticker) ticker.start();\n    // TODO: same for the PIXI.Ticker.system\n  }, 50);\n};\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\n\ntype Props = {\n  getLastCursorSceneCoordinates: () => [number, number],\n  width: number,\n  height: number,\n};\n\nexport default class StatusBar {\n  _width: number;\n  _height: number;\n  _getLastCursorSceneCoordinates: () => [number, number];\n  _statusBarContainer: PIXI.Container;\n  _statusBarBackground: PIXI.Graphics;\n  _statusBarText: PIXI.Text;\n\n  constructor({ getLastCursorSceneCoordinates, width, height }: Props) {\n    this._getLastCursorSceneCoordinates = getLastCursorSceneCoordinates;\n    this._statusBarContainer = new PIXI.Container();\n    this._statusBarContainer.alpha = 0.8;\n    this._statusBarContainer.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this._statusBarBackground = new PIXI.Graphics();\n    this._statusBarText = new PIXI.Text('', {\n      fontSize: 15,\n      fill: 0xffffff,\n      align: 'left',\n    });\n    this._statusBarContainer.addChild(this._statusBarBackground);\n    this._statusBarContainer.addChild(this._statusBarText);\n    this.resize(width, height);\n  }\n\n  resize(width: number, height: number) {\n    this._width = width;\n    this._height = height;\n  }\n\n  getPixiObject(): PIXI.Container {\n    return this._statusBarContainer;\n  }\n\n  render() {\n    const padding = 5;\n    const borderRadius = 4;\n    const [x, y] = this._getLastCursorSceneCoordinates();\n    this._statusBarText.text = `${x.toFixed(0)};${y.toFixed(0)}`;\n    this._statusBarText.position.x = 0 + padding;\n    this._statusBarText.position.y = Math.round(\n      this._height - padding - this._statusBarText.height\n    );\n\n    this._statusBarBackground.clear();\n    this._statusBarBackground.beginFill(0x000000, 0.8);\n    this._statusBarBackground.drawRoundedRect(\n      0 - borderRadius,\n      this._height - padding * 2 - this._statusBarText.height,\n      this._statusBarText.width + padding * 2 + borderRadius,\n      this._statusBarText.height + padding * 2 + borderRadius,\n      borderRadius\n    );\n    this._statusBarBackground.endFill();\n  }\n}\n","// @flow\n\ntype Props = {|\n  canvas: HTMLDivElement,\n  shouldMoveView: () => boolean,\n|};\n\n/**\n * Change the cursor displayed when hovering the canvas.\n *\n * Some elements on the canvas (for example, resize buttons)\n * can also set their own cursor - this class is only for the canvas.\n */\nexport default class CanvasCursor {\n  canvas: HTMLDivElement;\n  shouldMoveView: () => boolean;\n\n  constructor({ canvas, shouldMoveView }: Props) {\n    this.canvas = canvas;\n    this.shouldMoveView = shouldMoveView;\n  }\n\n  render() {\n    if (this.shouldMoveView()) {\n      this.canvas.style.cursor = 'grab';\n      if (this.canvas.style.cursor !== 'grab') {\n        this.canvas.style.cursor = '-webkit-grab';\n      }\n      return;\n    }\n\n    this.canvas.style.cursor = 'default';\n  }\n}\n","// @flow\n\ntype CallbackEvent = {|\n  /* The X position, relative to the viewport, not including scroll offset, of the long touch */\n  clientX: number,\n  /* The Y position, relative to the viewport, not including scroll offset, of the long touch */\n  clientY: number,\n|};\n\ntype Props = {|\n  canvas: HTMLCanvasElement,\n  onLongTouch: (event: CallbackEvent) => void,\n|};\n\nconst delay = 600; // ms\nconst moveTolerance = 10; // px\n\n/**\n * Listen for a long touch on a canvas. Useful for platforms (Safari on iOS)\n * not supporting \"contextmenu\" event.\n *\n * A long press is characterized by starting a touch and staying pressed, without\n * moving too far from the initial position (to avoid being confused with a drag/scroll).\n */\nexport default class LongTouchHandler {\n  _lastTouchX: number = 0;\n  _lastTouchY: number = 0;\n  _longTouchTimeoutID: TimeoutID;\n  _canvas: HTMLCanvasElement;\n  _onLongTouch: ?(event: CallbackEvent) => void;\n\n  constructor({ canvas, onLongTouch }: Props) {\n    this._canvas = canvas;\n    this._onLongTouch = onLongTouch;\n\n    canvas.addEventListener('touchstart', this._onTouchStart);\n    canvas.addEventListener('touchmove', this._onTouchMove);\n    canvas.addEventListener('touchend', this._clear);\n  }\n\n  _onTouchStart = (event: TouchEvent) => {\n    // If more than one touch,\n    // it's not a long press.\n    if (event.touches.length !== 1) return;\n\n    const touch = event.touches[0];\n    this._lastTouchX = touch.clientX;\n    this._lastTouchY = touch.clientY;\n\n    // Ensure we're tracking a single long press, as sometimes\n    // the 'touchstart' event is called more than once.\n    this._clear();\n    this._longTouchTimeoutID = setTimeout(() => {\n      if (this._onLongTouch)\n        this._onLongTouch({\n          clientX: this._lastTouchX,\n          clientY: this._lastTouchY,\n        });\n    }, delay);\n  };\n\n  _onTouchMove = (event: TouchEvent) => {\n    // If more than one touch,\n    // it's not a long press anymore.\n    if (event.touches.length !== 1) {\n      this._clear();\n      return;\n    }\n\n    // If touch moved too far from the initial touch position,\n    // it's not a long press anymore.\n    const touch = event.touches[0];\n    if (\n      Math.abs(touch.clientX - this._lastTouchX) > moveTolerance ||\n      Math.abs(touch.clientY - this._lastTouchY) > moveTolerance\n    ) {\n      this._clear();\n      return;\n    }\n  };\n\n  _clear = () => {\n    clearTimeout(this._longTouchTimeoutID);\n  };\n\n  unmount = () => {\n    this._canvas.removeEventListener('touchstart', this._onTouchStart);\n    this._canvas.removeEventListener('touchmove', this._onTouchMove);\n    this._canvas.removeEventListener('touchend', this._clear);\n  };\n}\n","// @flow\nimport React, { Component } from 'react';\nimport gesture from 'pixi-simple-gesture';\nimport DeprecatedKeyboardShortcuts from '../UI/KeyboardShortcuts/DeprecatedKeyboardShortcuts';\nimport InstancesRenderer from './InstancesRenderer';\nimport ViewPosition from './ViewPosition';\nimport SelectedInstances from './SelectedInstances';\nimport HighlightedInstance from './HighlightedInstance';\nimport SelectionRectangle from './SelectionRectangle';\nimport InstancesResizer, {\n  type ResizeGrabbingLocation,\n  canMoveOnX,\n  canMoveOnY,\n} from './InstancesResizer';\nimport InstancesRotator from './InstancesRotator';\nimport InstancesMover from './InstancesMover';\nimport Grid from './Grid';\nimport WindowBorder from './WindowBorder';\nimport WindowMask from './WindowMask';\nimport BackgroundColor from './BackgroundColor';\nimport * as PIXI from 'pixi.js-legacy';\nimport FpsLimiter from './FpsLimiter';\nimport { startPIXITicker, stopPIXITicker } from '../Utils/PIXITicker';\nimport StatusBar from './StatusBar';\nimport CanvasCursor from './CanvasCursor';\nimport InstancesAdder from './InstancesAdder';\nimport { makeDropTarget } from '../UI/DragAndDrop/DropTarget';\nimport { objectWithContextReactDndType } from '../ObjectsList';\nimport PinchHandler, { shouldBeHandledByPinch } from './PinchHandler';\nimport { type ScreenType } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport InstancesSelection from './InstancesSelection';\nimport LongTouchHandler from './LongTouchHandler';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\n\nconst styles = {\n  canvasArea: { flex: 1, position: 'absolute', overflow: 'hidden' },\n  dropCursor: { cursor: 'copy' },\n};\n\nconst DropTarget = makeDropTarget<{||}>(objectWithContextReactDndType);\n\nexport type InstancesEditorPropsWithoutSizeAndScroll = {|\n  project: gdProject,\n  layout: gdLayout,\n  initialInstances: gdInitialInstancesContainer,\n  instancesEditorSettings: InstancesEditorSettings,\n  onChangeInstancesEditorSettings: (\n    instancesEditorSettings: InstancesEditorSettings\n  ) => void,\n  instancesSelection: InstancesSelection,\n  onDeleteSelection: () => void,\n  onInstancesAdded: (instances: Array<gdInitialInstance>) => void,\n  onInstancesSelected: (instances: Array<gdInitialInstance>) => void,\n  onInstanceDoubleClicked: (instance: gdInitialInstance) => void,\n  onInstancesMoved: (instances: Array<gdInitialInstance>) => void,\n  onInstancesResized: (instances: Array<gdInitialInstance>) => void,\n  onInstancesRotated: (instances: Array<gdInitialInstance>) => void,\n  selectedObjectNames: Array<string>,\n  onContextMenu: (x: number, y: number) => void,\n  onCopy: () => void,\n  onCut: () => void,\n  onPaste: () => void,\n  onUndo: () => void,\n  onRedo: () => void,\n  onZoomOut: () => void,\n  onZoomIn: () => void,\n  pauseRendering: boolean,\n|};\n\ntype Props = {|\n  ...InstancesEditorPropsWithoutSizeAndScroll,\n  width: number,\n  height: number,\n  onViewPositionChanged: ViewPosition => void,\n  screenType: ScreenType,\n|};\n\nexport default class InstancesEditor extends Component<Props> {\n  lastContextMenuX = 0;\n  lastContextMenuY = 0;\n  lastCursorX = 0;\n  lastCursorY = 0;\n  fpsLimiter = new FpsLimiter(28);\n  canvasArea: ?HTMLDivElement;\n  pixiRenderer: any;\n  keyboardShortcuts: DeprecatedKeyboardShortcuts;\n  pinchHandler: PinchHandler;\n  canvasCursor: CanvasCursor;\n  _instancesAdder: InstancesAdder;\n  selectionRectangle: SelectionRectangle;\n  selectedInstances: SelectedInstances;\n  highlightedInstance: HighlightedInstance;\n  instancesResizer: InstancesResizer;\n  instancesRotator: InstancesRotator;\n  instancesMover: InstancesMover;\n  windowBorder: WindowBorder;\n  windowMask: WindowMask;\n  statusBar: StatusBar;\n  pixiContainer: PIXI.Container;\n  backgroundArea: PIXI.Container;\n  backgroundColor: BackgroundColor;\n  instancesRenderer: InstancesRenderer;\n  viewPosition: ViewPosition;\n  longTouchHandler: LongTouchHandler;\n  grid: Grid;\n  _unmounted = false;\n  _renderingPaused = false;\n  nextFrame: AnimationFrameID;\n  contextMenuLongTouchTimeoutID: TimeoutID;\n\n  componentDidMount() {\n    // Initialize the PIXI renderer, if possible\n    if (this.canvasArea && !this.pixiRenderer) {\n      this._initializeCanvasAndRenderer();\n    }\n  }\n\n  componentDidUpdate() {\n    // Initialize the PIXI renderer, if not already done.\n    // This can happen if canvasArea was not rendered\n    // just after the mount (depends on react-dnd versions?).\n    if (this.canvasArea && !this.pixiRenderer) {\n      this._initializeCanvasAndRenderer();\n    }\n  }\n\n  _initializeCanvasAndRenderer() {\n    const { canvasArea } = this;\n    if (!canvasArea) return;\n\n    // project can be used here for initializing stuff, but don't keep references to it.\n    // Instead, create editors in _mountEditorComponents (as they will be destroyed/recreated\n    // if the project changes).\n    const { project } = this.props;\n\n    //Create the renderer and setup the rendering area for scene editor.\n    //\"preserveDrawingBuffer: true\" is needed to avoid flickering and background issues on some mobile phones (see #585 #572 #566 #463)\n    this.pixiRenderer = PIXI.autoDetectRenderer(\n      {\n        width: this.props.width,\n        height: this.props.height,\n        preserveDrawingBuffer: true,\n        antialias: false,\n      }\n      // Disable anti-aliasing(default) to avoid rendering issue (1px width line of extra pixels) when rendering pixel perfect tiled sprites.\n    );\n    canvasArea.appendChild(this.pixiRenderer.view);\n\n    this.longTouchHandler = new LongTouchHandler({\n      canvas: this.pixiRenderer.view,\n      onLongTouch: event =>\n        this.props.onContextMenu(event.clientX, event.clientY),\n    });\n\n    this.pixiRenderer.view.addEventListener('contextmenu', e => {\n      e.preventDefault();\n\n      this.lastContextMenuX = e.offsetX;\n      this.lastContextMenuY = e.offsetY;\n      if (this.props.onContextMenu)\n        this.props.onContextMenu(e.clientX, e.clientY);\n\n      return false;\n    });\n\n    this.pixiRenderer.view.onwheel = (event: any) => {\n      const zoomFactor = this.getZoomFactor();\n      if (this.keyboardShortcuts.shouldZoom()) {\n        this.zoomOnCursorBy(-event.deltaY / 5000);\n      } else if (this.keyboardShortcuts.shouldScrollHorizontally()) {\n        const deltaX = event.deltaY / (5 * zoomFactor);\n        this.viewPosition.scrollBy(-deltaX, 0);\n      } else {\n        const deltaX = event.deltaX / (5 * zoomFactor);\n        const deltaY = event.deltaY / (5 * zoomFactor);\n        this.viewPosition.scrollBy(deltaX, deltaY);\n      }\n\n      if (this.props.onViewPositionChanged) {\n        this.props.onViewPositionChanged(this.viewPosition);\n      }\n      event.preventDefault();\n    };\n    this.pixiRenderer.view.setAttribute('tabIndex', -1);\n    this.pixiRenderer.view.addEventListener('focus', e => {\n      this.keyboardShortcuts.focus();\n    });\n    this.pixiRenderer.view.addEventListener('blur', e => {\n      this.keyboardShortcuts.blur();\n    });\n    this.pixiRenderer.view.addEventListener('mouseover', e => {\n      this.keyboardShortcuts.focus();\n    });\n    this.pixiRenderer.view.addEventListener('mouseout', e => {\n      this.keyboardShortcuts.blur();\n    });\n\n    this.pixiContainer = new PIXI.Container();\n\n    this.backgroundArea = new PIXI.Container();\n    this.backgroundArea.hitArea = new PIXI.Rectangle(\n      0,\n      0,\n      this.props.width,\n      this.props.height\n    );\n    gesture.panable(this.backgroundArea);\n    this.backgroundArea.on('mousedown', event =>\n      this._onBackgroundClicked(event.data.global.x, event.data.global.y)\n    );\n    this.backgroundArea.on('touchstart', event => {\n      if (shouldBeHandledByPinch(event.data && event.data.originalEvent)) {\n        return;\n      }\n\n      this._onBackgroundClicked(event.data.global.x, event.data.global.y);\n    });\n    this.backgroundArea.on('mousemove', event => {\n      const cursorX = event.data.global.x || 0;\n      const cursorY = event.data.global.y || 0;\n      this._onMouseMove(cursorX, cursorY);\n    });\n    this.backgroundArea.on('panmove', event =>\n      this._onPanMove(\n        event.deltaX,\n        event.deltaY,\n        event.data.global.x,\n        event.data.global.y\n      )\n    );\n    this.backgroundArea.on('panend', event => this._onPanEnd());\n    this.pixiContainer.addChild(this.backgroundArea);\n\n    this.viewPosition = new ViewPosition({\n      initialViewX: project ? project.getGameResolutionWidth() / 2 : 0,\n      initialViewY: project ? project.getGameResolutionHeight() / 2 : 0,\n      width: this.props.width,\n      height: this.props.height,\n      instancesEditorSettings: this.props.instancesEditorSettings,\n    });\n    this.pixiContainer.addChild(this.viewPosition.getPixiContainer());\n\n    this.grid = new Grid({\n      viewPosition: this.viewPosition,\n      instancesEditorSettings: this.props.instancesEditorSettings,\n    });\n    this.pixiContainer.addChild(this.grid.getPixiObject());\n\n    this.keyboardShortcuts = new DeprecatedKeyboardShortcuts({\n      onDelete: this.props.onDeleteSelection,\n      onMove: this.moveSelection,\n      onCopy: this.props.onCopy,\n      onCut: this.props.onCut,\n      onPaste: this.props.onPaste,\n      onUndo: this.props.onUndo,\n      onRedo: this.props.onRedo,\n      onZoomOut: this.props.onZoomOut,\n      onZoomIn: this.props.onZoomIn,\n    });\n\n    this.pinchHandler = new PinchHandler({\n      canvas: this.pixiRenderer.view,\n      setZoomFactor: this.setZoomFactor,\n      getZoomFactor: this.getZoomFactor,\n      viewPosition: this.viewPosition,\n    });\n\n    this.canvasCursor = new CanvasCursor({\n      canvas: canvasArea,\n      shouldMoveView: () => this.keyboardShortcuts.shouldMoveView(),\n    });\n\n    this._instancesAdder = new InstancesAdder({\n      instances: this.props.initialInstances,\n      instancesEditorSettings: this.props.instancesEditorSettings,\n    });\n\n    this._mountEditorComponents(this.props);\n    this._renderScene();\n  }\n\n  /**\n   * Force the internal InstancesRenderer to be destroyed and recreated\n   * (as well as other components holding references to instances). Call\n   * this when the initial instances were recreated to ensure that there\n   * is not mismatch between renderers and the instances that were updated.\n   */\n  forceRemount() {\n    this._mountEditorComponents(this.props);\n  }\n\n  _mountEditorComponents(props: Props) {\n    //Remove and delete any existing editor component\n    if (this.highlightedInstance) {\n      this.pixiContainer.removeChild(this.highlightedInstance.getPixiObject());\n    }\n    if (this.selectedInstances) {\n      this.pixiContainer.removeChild(this.selectedInstances.getPixiContainer());\n    }\n    if (this.instancesRenderer) {\n      this.viewPosition\n        .getPixiContainer()\n        .removeChild(this.instancesRenderer.getPixiContainer());\n      this.instancesRenderer.delete();\n    }\n    if (this.selectionRectangle) {\n      this.pixiContainer.removeChild(this.selectionRectangle.getPixiObject());\n      this.selectionRectangle.delete();\n    }\n    if (this.windowBorder) {\n      this.pixiContainer.removeChild(this.windowBorder.getPixiObject());\n    }\n    if (this.windowMask) {\n      this.pixiContainer.removeChild(this.windowMask.getPixiObject());\n    }\n    if (this.statusBar) {\n      this.pixiContainer.removeChild(this.statusBar.getPixiObject());\n    }\n\n    this.backgroundColor = new BackgroundColor({\n      layout: props.layout,\n      pixiRenderer: this.pixiRenderer,\n    });\n    this.instancesRenderer = new InstancesRenderer({\n      project: props.project,\n      layout: props.layout,\n      instances: props.initialInstances,\n      viewPosition: this.viewPosition,\n      onOverInstance: this._onOverInstance,\n      onMoveInstance: this._onMoveInstance,\n      onMoveInstanceEnd: this._onMoveInstanceEnd,\n      onDownInstance: this._onDownInstance,\n      onOutInstance: this._onOutInstance,\n      onInstanceClicked: this._onInstanceClicked,\n      onInstanceDoubleClicked: this._onInstanceDoubleClicked,\n    });\n    this.selectionRectangle = new SelectionRectangle({\n      instances: props.initialInstances,\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      toSceneCoordinates: this.viewPosition.toSceneCoordinates,\n    });\n    this.selectedInstances = new SelectedInstances({\n      instancesSelection: this.props.instancesSelection,\n      onResize: this._onResize,\n      onResizeEnd: this._onResizeEnd,\n      onRotate: this._onRotate,\n      onRotateEnd: this._onRotateEnd,\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      toCanvasCoordinates: this.viewPosition.toCanvasCoordinates,\n      screenType: this.props.screenType,\n    });\n    this.highlightedInstance = new HighlightedInstance({\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      toCanvasCoordinates: this.viewPosition.toCanvasCoordinates,\n    });\n    this.instancesResizer = new InstancesResizer({\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      instancesEditorSettings: this.props.instancesEditorSettings,\n    });\n    this.instancesRotator = new InstancesRotator(\n      this.instancesRenderer.getInstanceMeasurer()\n    );\n    this.instancesMover = new InstancesMover({\n      instanceMeasurer: this.instancesRenderer.getInstanceMeasurer(),\n      instancesEditorSettings: this.props.instancesEditorSettings,\n    });\n    this.windowBorder = new WindowBorder({\n      project: props.project,\n      layout: props.layout,\n      toCanvasCoordinates: this.viewPosition.toCanvasCoordinates,\n    });\n    this.windowMask = new WindowMask({\n      project: props.project,\n      viewPosition: this.viewPosition,\n      instancesEditorSettings: this.props.instancesEditorSettings,\n    });\n    this.statusBar = new StatusBar({\n      width: this.props.width,\n      height: this.props.height,\n      getLastCursorSceneCoordinates: this.getLastCursorSceneCoordinates,\n    });\n\n    this.pixiContainer.addChild(this.selectionRectangle.getPixiObject());\n    this.viewPosition\n      .getPixiContainer()\n      .addChild(this.instancesRenderer.getPixiContainer());\n    this.pixiContainer.addChild(this.windowBorder.getPixiObject());\n    this.pixiContainer.addChild(this.windowMask.getPixiObject());\n    this.pixiContainer.addChild(this.selectedInstances.getPixiContainer());\n    this.pixiContainer.addChild(this.highlightedInstance.getPixiObject());\n    this.pixiContainer.addChild(this.statusBar.getPixiObject());\n  }\n\n  componentWillUnmount() {\n    // This is an antipattern and is theorically not needed, but help\n    // to protect against renders after the component is unmounted.\n    this._unmounted = true;\n\n    this.keyboardShortcuts.unmount();\n    this.selectionRectangle.delete();\n    this.instancesRenderer.delete();\n    this._instancesAdder.unmount();\n    this.pinchHandler.unmount();\n    this.longTouchHandler.unmount();\n    if (this.nextFrame) cancelAnimationFrame(this.nextFrame);\n    stopPIXITicker();\n    this.pixiRenderer.destroy();\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (\n      nextProps.width !== this.props.width ||\n      nextProps.height !== this.props.height\n    ) {\n      this.pixiRenderer.resize(nextProps.width, nextProps.height);\n      this.viewPosition.resize(nextProps.width, nextProps.height);\n      this.statusBar.resize(nextProps.width, nextProps.height);\n      this.backgroundArea.hitArea = new PIXI.Rectangle(\n        0,\n        0,\n        nextProps.width,\n        nextProps.height\n      );\n\n      // Avoid flickering that could happen while waiting for next animation frame.\n      this.fpsLimiter.forceNextUpdate();\n      this._renderScene();\n    }\n\n    if (\n      nextProps.instancesEditorSettings !== this.props.instancesEditorSettings\n    ) {\n      this.grid.setInstancesEditorSettings(nextProps.instancesEditorSettings);\n      this.instancesMover.setInstancesEditorSettings(\n        nextProps.instancesEditorSettings\n      );\n      this.instancesResizer.setInstancesEditorSettings(\n        nextProps.instancesEditorSettings\n      );\n      this.windowMask.setInstancesEditorSettings(\n        nextProps.instancesEditorSettings\n      );\n      this.viewPosition.setInstancesEditorSettings(\n        nextProps.instancesEditorSettings\n      );\n      this._instancesAdder.setInstancesEditorSettings(\n        nextProps.instancesEditorSettings\n      );\n    }\n\n    if (nextProps.screenType !== this.props.screenType) {\n      this.selectedInstances.setScreenType(this.props.screenType);\n    }\n\n    if (\n      this.props.layout !== nextProps.layout ||\n      this.props.initialInstances !== nextProps.initialInstances ||\n      this.props.project !== nextProps.project\n    ) {\n      this._mountEditorComponents(nextProps);\n    }\n\n    // For avoiding useless renderings, which is costly for CPU/GPU, when the editor\n    // is not displayed, `pauseRendering` prop can be set to true.\n    if (nextProps.pauseRendering && !this.props.pauseRendering)\n      this.pauseSceneRendering();\n\n    if (!nextProps.pauseRendering && this.props.pauseRendering)\n      this.restartSceneRendering();\n  }\n\n  /**\n   * Delete instance renderers of the specified objects, which will then be recreated during\n   * the next render. Call this when an object resources may have changed (for example, a modified image),\n   * and you want the instances of objects to reflect the changes.\n   * See also ResourcesLoader and PixiResourcesLoader.\n   * @param {string} objectName The name of the object for which instance must be re-rendered.\n   */\n  resetInstanceRenderersFor(objectName: string) {\n    if (this.instancesRenderer)\n      this.instancesRenderer.resetInstanceRenderersFor(objectName);\n  }\n\n  zoomBy(value: number) {\n    this.setZoomFactor(this.getZoomFactor() + value);\n  }\n\n  /**\n   * Zoom and scroll so that the cursor stays on the same position scene-wise.\n   */\n  zoomOnCursorBy(value: number) {\n    const beforeZoomCursorPosition = this.getLastCursorSceneCoordinates();\n    this.setZoomFactor(this.getZoomFactor() + value);\n    const afterZoomCursorPosition = this.getLastCursorSceneCoordinates();\n    // Compensate for the cursor change in position\n    this.viewPosition.scrollBy(\n      beforeZoomCursorPosition[0] - afterZoomCursorPosition[0],\n      beforeZoomCursorPosition[1] - afterZoomCursorPosition[1]\n    );\n    if (this.props.onViewPositionChanged) {\n      this.props.onViewPositionChanged(this.viewPosition);\n    }\n  }\n\n  getZoomFactor = () => {\n    return this.props.instancesEditorSettings.zoomFactor;\n  };\n\n  setZoomFactor = (zoomFactor: number) => {\n    this.props.onChangeInstancesEditorSettings({\n      ...this.props.instancesEditorSettings,\n      zoomFactor: Math.max(Math.min(zoomFactor, 10), 0.01),\n    });\n  };\n\n  /**\n   * Immediately add instances for the specified objects at the given\n   * position (in scene coordinates).\n   */\n  addInstances = (\n    pos /*: [number, number] */,\n    objectNames /*: Array<string> */\n  ): Array<gdInitialInstance> => {\n    return this._instancesAdder.addInstances(pos, objectNames);\n  };\n\n  _onMouseMove = (x: number, y: number) => {\n    this.lastCursorX = x;\n    this.lastCursorY = y;\n  };\n\n  _onBackgroundClicked = (x: number, y: number) => {\n    this.lastCursorX = x;\n    this.lastCursorY = y;\n    this.pixiRenderer.view.focus();\n\n    // Selection rectangle is only drawn in _onPanMove,\n    // which can happen a few milliseconds after a background\n    // click/touch - enough to have the selection rectangle being\n    // offset from the first click - which looks laggy. Set\n    // the start position now.\n    if (!this.keyboardShortcuts.shouldMoveView()) {\n      this.selectionRectangle.startSelectionRectangle(x, y);\n    }\n\n    if (\n      !this.keyboardShortcuts.shouldMultiSelect() &&\n      !this.keyboardShortcuts.shouldMoveView()\n    ) {\n      this.props.instancesSelection.clearSelection();\n      this.props.onInstancesSelected([]);\n    }\n  };\n\n  _onPanMove = (deltaX: number, deltaY: number, x: number, y: number) => {\n    if (this.keyboardShortcuts.shouldMoveView()) {\n      const sceneDeltaX = deltaX / this.getZoomFactor();\n      const sceneDeltaY = deltaY / this.getZoomFactor();\n\n      this.viewPosition.scrollBy(-sceneDeltaX, -sceneDeltaY);\n\n      if (this.props.onViewPositionChanged) {\n        this.props.onViewPositionChanged(this.viewPosition);\n      }\n    } else {\n      this.selectionRectangle.updateSelectionRectangle(x, y);\n    }\n  };\n\n  _getLayersVisibility = () => {\n    const { layout } = this.props;\n    const layersVisibility = {};\n    for (let i = 0; i < layout.getLayersCount(); i++) {\n      layersVisibility[layout.getLayerAt(i).getName()] = layout\n        .getLayerAt(i)\n        .getVisibility();\n    }\n    return layersVisibility;\n  };\n\n  _onPanEnd = () => {\n    // When a pan is ended, this can be that either the user was making\n    // a selection, or that the user was moving the view.\n    if (this.selectionRectangle.hasStartedSelectionRectangle()) {\n      let instancesSelected = this.selectionRectangle.endSelectionRectangle();\n\n      this.props.instancesSelection.selectInstances(\n        instancesSelected,\n        this.keyboardShortcuts.shouldMultiSelect(),\n        this._getLayersVisibility()\n      );\n      instancesSelected = this.props.instancesSelection.getSelectedInstances();\n      this.props.onInstancesSelected(instancesSelected);\n    }\n  };\n\n  _onInstanceClicked = (instance: gdInitialInstance) => {\n    this.pixiRenderer.view.focus();\n  };\n\n  _onInstanceDoubleClicked = (instance: gdInitialInstance) => {\n    this.props.onInstanceDoubleClicked(instance);\n  };\n\n  _onOverInstance = (instance: gdInitialInstance) => {\n    this.highlightedInstance.setInstance(instance);\n  };\n\n  _onDownInstance = (\n    instance: gdInitialInstance,\n    sceneX: number,\n    sceneY: number\n  ) => {\n    if (this.keyboardShortcuts.shouldMoveView()) {\n      // If the user wants to move the view, discard the click on an instance:\n      // it's just the beginning of the user panning the view.\n      return;\n    }\n\n    if (this.keyboardShortcuts.shouldCloneInstances()) {\n      const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n      for (var i = 0; i < selectedInstances.length; i++) {\n        const instance = selectedInstances[i];\n        this.props.initialInstances\n          .insertInitialInstance(instance)\n          .resetPersistentUuid();\n      }\n    } else {\n      this.props.instancesSelection.selectInstance(\n        instance,\n        this.keyboardShortcuts.shouldMultiSelect(),\n        this._getLayersVisibility()\n      );\n\n      if (this.props.onInstancesSelected) {\n        this.props.onInstancesSelected(\n          this.props.instancesSelection.getSelectedInstances()\n        );\n      }\n    }\n\n    this.instancesMover.startMove(sceneX, sceneY);\n  };\n\n  _onOutInstance = (instance: gdInitialInstance) => {\n    if (instance === this.highlightedInstance.getInstance())\n      this.highlightedInstance.setInstance(null);\n  };\n\n  _onMoveInstance = (\n    instance: gdInitialInstance,\n    deltaX: number,\n    deltaY: number\n  ) => {\n    const sceneDeltaX = deltaX / this.getZoomFactor();\n    const sceneDeltaY = deltaY / this.getZoomFactor();\n\n    // It is possible for the user to start moving an instance, then press the button\n    // to move the view, move it, then unpress it and continue to move the instance.\n    // This means that while we're in \"_onMoveInstance\", we must handle view moving.\n    if (this.keyboardShortcuts.shouldMoveView()) {\n      this.viewPosition.scrollBy(-sceneDeltaX, -sceneDeltaY);\n\n      if (this.props.onViewPositionChanged) {\n        this.props.onViewPositionChanged(this.viewPosition);\n      }\n      return;\n    }\n\n    if (!this.props.instancesSelection.isInstanceSelected(instance)) {\n      this._onInstanceClicked(instance);\n    }\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.instancesMover.moveBy(\n      selectedInstances,\n      sceneDeltaX,\n      sceneDeltaY,\n      this.keyboardShortcuts.shouldFollowAxis(),\n      this.keyboardShortcuts.shouldNotSnapToGrid()\n    );\n  };\n\n  _onMoveInstanceEnd = () => {\n    this.instancesMover.endMove();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.props.onInstancesMoved(selectedInstances);\n  };\n\n  _onResize = (\n    deltaX: number,\n    deltaY: number,\n    grabbingLocation: ResizeGrabbingLocation\n  ) => {\n    const sceneDeltaX = deltaX / this.getZoomFactor();\n    const sceneDeltaY = deltaY / this.getZoomFactor();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    const forceProportional =\n      this.props.screenType === 'touch' &&\n      canMoveOnX(grabbingLocation) &&\n      canMoveOnY(grabbingLocation);\n    const proportional =\n      forceProportional || this.keyboardShortcuts.shouldResizeProportionally();\n    this.instancesResizer.resizeBy(\n      selectedInstances,\n      sceneDeltaX,\n      sceneDeltaY,\n      grabbingLocation,\n      proportional\n    );\n  };\n\n  _onResizeEnd = () => {\n    this.instancesResizer.endResize();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.props.onInstancesResized(selectedInstances);\n  };\n\n  _onRotate = (deltaX: number, deltaY: number) => {\n    const sceneDeltaX = deltaX / this.getZoomFactor();\n    const sceneDeltaY = deltaY / this.getZoomFactor();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.instancesRotator.rotateBy(\n      selectedInstances,\n      sceneDeltaX,\n      sceneDeltaY,\n      this.keyboardShortcuts.shouldResizeProportionally()\n    );\n  };\n\n  _onRotateEnd = () => {\n    this.instancesRotator.endRotate();\n\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    this.props.onInstancesRotated(selectedInstances);\n  };\n\n  clearHighlightedInstance = () => {\n    this.highlightedInstance.setInstance(null);\n  };\n\n  moveSelection = (x: number, y: number) => {\n    const selectedInstances = this.props.instancesSelection.getSelectedInstances();\n    selectedInstances.forEach(instance => {\n      instance.setX(instance.getX() + x);\n      instance.setY(instance.getY() + y);\n    });\n    this.props.onInstancesMoved(selectedInstances);\n  };\n\n  scrollTo(x: number, y: number) {\n    this.viewPosition.scrollTo(x, y);\n  }\n\n  centerView() {\n    const x = this.props.project.getGameResolutionWidth() / 2;\n    const y = this.props.project.getGameResolutionHeight() / 2;\n    this.viewPosition.scrollTo(x, y);\n  }\n\n  centerViewOn(instances: Array<gdInitialInstance>) {\n    if (!instances.length) return;\n\n    this.viewPosition.scrollToInstance(instances[instances.length - 1]);\n    if (this.props.onViewPositionChanged) {\n      this.props.onViewPositionChanged(this.viewPosition);\n    }\n  }\n\n  getLastContextMenuSceneCoordinates = () => {\n    return this.viewPosition.toSceneCoordinates(\n      this.lastContextMenuX,\n      this.lastContextMenuY\n    );\n  };\n\n  getLastCursorSceneCoordinates = () => {\n    return this.viewPosition.toSceneCoordinates(\n      this.lastCursorX,\n      this.lastCursorY\n    );\n  };\n\n  getViewPosition = () /*: ?ViewPosition */ => {\n    return this.viewPosition;\n  };\n\n  _renderScene = () => {\n    // Protect against rendering scheduled after the component is unmounted.\n    if (this._unmounted) return;\n    if (this._renderingPaused) return;\n\n    // Avoid killing the CPU by limiting the rendering calls.\n    if (this.fpsLimiter.shouldUpdate()) {\n      this.backgroundColor.render();\n      this.viewPosition.render();\n      this.canvasCursor.render();\n      this.grid.render();\n      this.instancesRenderer.render();\n      this.highlightedInstance.render();\n      this.selectedInstances.render();\n      this.selectionRectangle.render();\n      this.windowBorder.render();\n      this.windowMask.render();\n      this.statusBar.render();\n      this.pixiRenderer.render(this.pixiContainer);\n    }\n    this.nextFrame = requestAnimationFrame(this._renderScene);\n  };\n\n  pauseSceneRendering = () => {\n    if (this.nextFrame) cancelAnimationFrame(this.nextFrame);\n    this._renderingPaused = true;\n\n    stopPIXITicker();\n  };\n\n  restartSceneRendering = () => {\n    this._renderingPaused = false;\n    this._renderScene();\n\n    startPIXITicker();\n  };\n\n  render() {\n    if (!this.props.project) return null;\n\n    return (\n      <DropTarget\n        canDrop={() => true}\n        hover={monitor => {\n          const { _instancesAdder, viewPosition, canvasArea } = this;\n          if (!_instancesAdder || !canvasArea || !viewPosition) return;\n\n          const { x, y } = monitor.getClientOffset();\n          const canvasRect = canvasArea.getBoundingClientRect();\n          const pos = viewPosition.toSceneCoordinates(\n            x - canvasRect.left,\n            y - canvasRect.top\n          );\n          _instancesAdder.createOrUpdateTemporaryInstancesFromObjectNames(\n            pos,\n            this.props.selectedObjectNames\n          );\n        }}\n        drop={monitor => {\n          const { _instancesAdder, viewPosition, canvasArea } = this;\n          if (!_instancesAdder || !canvasArea || !viewPosition) return;\n\n          if (monitor.didDrop()) {\n            // Drop was done somewhere else (in a child of the canvas:\n            // should not happen, but still handling this case).\n            _instancesAdder.deleteTemporaryInstances();\n            return;\n          }\n\n          const { x, y } = monitor.getClientOffset();\n          const canvasRect = canvasArea.getBoundingClientRect();\n          const pos = viewPosition.toSceneCoordinates(\n            x - canvasRect.left,\n            y - canvasRect.top\n          );\n          const instances = _instancesAdder.updateTemporaryInstancePositions(\n            pos\n          );\n          _instancesAdder.commitTemporaryInstances();\n          this.props.onInstancesAdded(instances);\n        }}\n      >\n        {({ connectDropTarget, isOver }) => {\n          // The children are re-rendered when isOver change:\n          // take this opportunity to delete any temporary instances\n          // if the dragging is not done anymore over the canvas.\n          if (this._instancesAdder && !isOver) {\n            this._instancesAdder.deleteTemporaryInstances();\n          }\n\n          return connectDropTarget(\n            <div\n              ref={canvasArea => (this.canvasArea = canvasArea)}\n              style={styles.canvasArea}\n            />\n          );\n        }}\n      </DropTarget>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type Tutorial } from '../Utils/GDevelopServices/Tutorial';\nimport { Card } from '@material-ui/core';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Text from '../UI/Text';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport { CorsAwareImage } from '../UI/CorsAwareImage';\nimport { ResponsiveLineStackLayout } from '../UI/Layout';\nimport { useResponsiveWindowWidth } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { sendTutorialOpened } from '../Utils/Analytics/EventSender';\nimport Window from '../Utils/Window';\n\nconst styles = {\n  thumbnailImageWithDescription: {\n    objectFit: 'contain',\n    verticalAlign: 'middle',\n    backgroundColor: 'black',\n    width: 200,\n  },\n  smallScreenThumbnailImage: {\n    objectFit: 'contain',\n    verticalAlign: 'middle',\n    backgroundColor: 'black',\n    maxHeight: 150,\n  },\n  card: {\n    flex: 1,\n  },\n  container: {\n    display: 'flex',\n    textAlign: 'left',\n    overflow: 'hidden',\n    padding: 8,\n  },\n};\n\ntype Props = {|\n  tutorial: Tutorial,\n  onHeightComputed: number => void,\n|};\n\nexport const TutorialListItem = ({ tutorial, onHeightComputed }: Props) => {\n  // Report the height of the item once it's known.\n  const [isLoaded, setIsLoaded] = React.useState(false);\n  const containerRef = React.useRef<?HTMLDivElement>(null);\n  const isImageLoadingRef = React.useRef(true);\n  const notifyHeightChanged = React.useCallback(\n    () => {\n      if (!isLoaded && !isImageLoadingRef.current) {\n        setIsLoaded(true);\n      }\n\n      // But don't report the height while the image is loading, as it could\n      // make some \"jumps\" in the scroll when scrolling up.\n      if (containerRef.current && !isImageLoadingRef.current)\n        onHeightComputed(containerRef.current.getBoundingClientRect().height);\n    },\n    [onHeightComputed, isLoaded]\n  );\n  React.useLayoutEffect(notifyHeightChanged);\n\n  const windowWidth = useResponsiveWindowWidth();\n\n  return (\n    <ButtonBase\n      onClick={() => {\n        sendTutorialOpened(tutorial.id);\n        Window.openExternalURL(tutorial.link);\n      }}\n      focusRipple\n    >\n      <div\n        style={{\n          ...styles.container,\n          visibility: isLoaded ? undefined : 'hidden',\n          animation: isLoaded ? 'fadein 0.5s' : undefined,\n        }}\n        ref={containerRef}\n      >\n        <Card style={styles.card}>\n          <ResponsiveLineStackLayout noMargin>\n            <CorsAwareImage\n              style={\n                windowWidth === 'small'\n                  ? styles.smallScreenThumbnailImage\n                  : styles.thumbnailImageWithDescription\n              }\n              src={tutorial.thumbnailUrl}\n              alt={tutorial.title}\n              onError={() => {\n                isImageLoadingRef.current = false;\n                notifyHeightChanged();\n              }}\n              onLoad={() => {\n                isImageLoadingRef.current = false;\n                notifyHeightChanged();\n              }}\n            />\n            <Line expand>\n              <Column expand>\n                <ResponsiveLineStackLayout\n                  noMargin\n                  alignItems=\"baseline\"\n                  expand\n                >\n                  <Text noMargin displayInlineAsSpan>\n                    {tutorial.title}\n                  </Text>\n                </ResponsiveLineStackLayout>\n                <Text size=\"body2\" displayInlineAsSpan>\n                  <MarkdownText source={tutorial.description} allowParagraphs />\n                </Text>\n                <Spacer />\n              </Column>\n            </Line>\n          </ResponsiveLineStackLayout>\n        </Card>\n      </div>\n    </ButtonBase>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport { ListSearchResults } from '../UI/Search/ListSearchResults';\nimport { TutorialContext } from './TutorialContext';\nimport { TutorialListItem } from './TutorialListItem';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\n\ntype Props = {};\n\nexport const TutorialsList = (props: Props) => {\n  const { tutorials, error, fetchTutorials } = React.useContext(\n    TutorialContext\n  );\n\n  React.useEffect(\n    () => {\n      fetchTutorials();\n    },\n    [fetchTutorials]\n  );\n\n  return (\n    <ResponsiveWindowMeasurer>\n      {windowWidth => (\n        <Column expand noMargin useFullHeight>\n          <Line\n            expand\n            overflow={\n              'hidden' /* Somehow required on Chrome/Firefox to avoid children growing (but not on Safari) */\n            }\n          >\n            <ListSearchResults\n              onRetry={fetchTutorials}\n              error={error}\n              searchItems={tutorials}\n              getSearchItemUniqueId={tutorial => tutorial.id}\n              renderSearchItem={(tutorial, onHeightComputed) => (\n                <TutorialListItem\n                  onHeightComputed={onHeightComputed}\n                  tutorial={tutorial}\n                />\n              )}\n            />\n          </Line>\n        </Column>\n      )}\n    </ResponsiveWindowMeasurer>\n  );\n};\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C7.4,22 3.55,18.92 2.36,14.73L6.19,16.31C6.45,17.6 7.6,18.58 8.97,18.58C10.53,18.58 11.8,17.31 11.8,15.75V15.62L15.2,13.19H15.28C17.36,13.19 19.05,11.5 19.05,9.42C19.05,7.34 17.36,5.65 15.28,5.65C13.2,5.65 11.5,7.34 11.5,9.42V9.47L9.13,12.93L8.97,12.92C8.38,12.92 7.83,13.1 7.38,13.41L2,11.2C2.43,6.05 6.73,2 12,2M8.28,17.17C9.08,17.5 10,17.13 10.33,16.33C10.66,15.53 10.28,14.62 9.5,14.29L8.22,13.76C8.71,13.58 9.26,13.57 9.78,13.79C10.31,14 10.72,14.41 10.93,14.94C11.15,15.46 11.15,16.04 10.93,16.56C10.5,17.64 9.23,18.16 8.15,17.71C7.65,17.5 7.27,17.12 7.06,16.67L8.28,17.17M17.8,9.42C17.8,10.81 16.67,11.94 15.28,11.94C13.9,11.94 12.77,10.81 12.77,9.42A2.5,2.5 0 0,1 15.28,6.91C16.67,6.91 17.8,8.04 17.8,9.42M13.4,9.42C13.4,10.46 14.24,11.31 15.29,11.31C16.33,11.31 17.17,10.46 17.17,9.42C17.17,8.38 16.33,7.53 15.29,7.53C14.24,7.53 13.4,8.38 13.4,9.42Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M22.46,6C21.69,6.35 20.86,6.58 20,6.69C20.88,6.16 21.56,5.32 21.88,4.31C21.05,4.81 20.13,5.16 19.16,5.36C18.37,4.5 17.26,4 16,4C13.65,4 11.73,5.92 11.73,8.29C11.73,8.63 11.77,8.96 11.84,9.27C8.28,9.09 5.11,7.38 3,4.79C2.63,5.42 2.42,6.16 2.42,6.94C2.42,8.43 3.17,9.75 4.33,10.5C3.62,10.5 2.96,10.3 2.38,10C2.38,10 2.38,10 2.38,10.03C2.38,12.11 3.86,13.85 5.82,14.24C5.46,14.34 5.08,14.39 4.69,14.39C4.42,14.39 4.15,14.36 3.89,14.31C4.43,16 6,17.26 7.89,17.29C6.43,18.45 4.58,19.13 2.56,19.13C2.22,19.13 1.88,19.11 1.54,19.07C3.44,20.29 5.7,21 8.12,21C16,21 20.33,14.46 20.33,8.79C20.33,8.6 20.33,8.42 20.32,8.23C21.16,7.63 21.88,6.87 22.46,6Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M11.64 5.93H13.07V10.21H11.64M15.57 5.93H17V10.21H15.57M7 2L3.43 5.57V18.43H7.71V22L11.29 18.43H14.14L20.57 12V2M19.14 11.29L16.29 14.14H13.43L10.93 16.64V14.14H7.71V3.43H19.14Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M5.06 3C4.63 3 4.22 3.14 3.84 3.42C3.46 3.7 3.24 4.06 3.14 4.5L2.11 8.91C1.86 10 2.06 10.92 2.69 11.73C2.81 11.85 2.93 11.97 3.04 12.07C3.63 12.64 4.28 13 5.22 13C6.16 13 6.91 12.59 7.47 12.05C8.1 12.67 8.86 13 9.8 13C10.64 13 11.44 12.63 12 12.07C12.68 12.7 13.45 13 14.3 13C15.17 13 15.91 12.67 16.54 12.05C17.11 12.62 17.86 13 18.81 13C19.76 13 20.43 12.65 21 12.06C21.09 11.97 21.18 11.87 21.28 11.77C21.94 10.95 22.14 10 21.89 8.91L20.86 4.5C20.73 4.06 20.5 3.7 20.13 3.42C19.77 3.14 19.38 3 18.94 3M18.89 4.97L19.97 9.38C20.06 9.81 19.97 10.2 19.69 10.55C19.44 10.86 19.13 11 18.75 11C18.44 11 18.17 10.9 17.95 10.66C17.73 10.43 17.61 10.16 17.58 9.84L16.97 5M5.06 5H7.03L6.42 9.84C6.3 10.63 5.91 11 5.25 11C4.84 11 4.53 10.86 4.31 10.55C4.03 10.2 3.94 9.81 4.03 9.38M9.05 5H11V9.7C11 10.05 10.89 10.35 10.64 10.62C10.39 10.88 10.08 11 9.7 11C9.36 11 9.07 10.88 8.84 10.59C8.61 10.3 8.5 10 8.5 9.66V9.5M13 5H14.95L15.5 9.5C15.58 9.92 15.5 10.27 15.21 10.57C14.95 10.87 14.61 11 14.2 11C13.89 11 13.61 10.88 13.36 10.62C13.11 10.35 13 10.05 13 9.7M3 14.03V19C3 20.11 3.89 21 5 21C9.67 21 14.33 21 19 21C20.1 21 21 20.11 21 19V14.05C20.45 14.63 19.75 14.96 19 15C18 15.03 17.25 14.74 16.54 14.05C15.94 14.65 15.14 15 14.3 15C13.4 15 12.6 14.64 12 14.07C11.43 14.64 10.65 15 9.78 15C8.87 15 8.07 14.65 7.47 14.05C6.89 14.64 6.1 15 5.23 15C4.33 15 3.66 14.65 3 14.03Z\" />\n  </SvgIcon>\n));\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M2,3H11V12H2V3M11,22H2V13H11V22M21,3V12H12V3H21M21,22H12V13H21V22Z\" />\n  </SvgIcon>\n));\n","// @flow\nimport * as React from 'react';\nimport {\n  type ShowcasedGame,\n  type ShowcasedGameLink,\n} from '../Utils/GDevelopServices/Game';\nimport { Card } from '@material-ui/core';\nimport Text from '../UI/Text';\nimport { Trans } from '@lingui/macro';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport { CorsAwareImage } from '../UI/CorsAwareImage';\nimport RaisedButton from '../UI/RaisedButton';\nimport TagChips from '../UI/TagChips';\nimport Apple from '../UI/CustomSvgIcons/Apple';\nimport Window from '../Utils/Window';\nimport { sendShowcaseGameLinkOpened } from '../Utils/Analytics/EventSender';\nimport GooglePlay from '../UI/CustomSvgIcons/GooglePlay';\nimport Steam from '../UI/CustomSvgIcons/Steam';\nimport Twitter from '../UI/CustomSvgIcons/Twitter';\nimport Instagram from '../UI/CustomSvgIcons/Instagram';\nimport Twitch from '../UI/CustomSvgIcons/Twitch';\nimport ItchIo from '../UI/CustomSvgIcons/ItchIo';\nimport Microsoft from '../UI/CustomSvgIcons/Microsoft';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport YouTubeIcon from '@material-ui/icons/YouTube';\nimport FlashOnIcon from '@material-ui/icons/FlashOn';\nimport { ResponsiveLineStackLayout } from '../UI/Layout';\nimport { useResponsiveWindowWidth } from '../UI/Reponsive/ResponsiveWindowMeasurer';\n\nconst styles = {\n  thumbnailImageWithDescription: {\n    objectFit: 'contain',\n    verticalAlign: 'middle',\n    backgroundColor: 'black',\n    width: 200,\n  },\n  thumbnailImageWithoutDescription: {\n    objectFit: 'cover',\n    verticalAlign: 'middle',\n    backgroundColor: 'black',\n    width: 200,\n    maxHeight: 120,\n  },\n  smallScreenThumbnailImage: {\n    objectFit: 'contain',\n    verticalAlign: 'middle',\n    backgroundColor: 'black',\n    maxHeight: 150,\n  },\n  card: {\n    flex: 1,\n  },\n  container: {\n    display: 'flex',\n    textAlign: 'left',\n    overflow: 'hidden',\n    padding: 8,\n  },\n};\n\ntype Props = {|\n  showcasedGame: ShowcasedGame,\n  onHeightComputed: number => void,\n|};\n\nconst getFullUrl = url =>\n  url.startsWith('/') ? 'https://gdevelop-app.com' + url : url;\n\nconst getLinkIconAndLabel = (url: string, type: string) => {\n  // Supported links:\n  if (type === '') {\n    return { icon: <PlayArrowIcon />, label: <Trans>Play or download</Trans> };\n  } else if (type === 'learn-more') {\n    return { icon: null, label: <Trans>Learn more</Trans> };\n  } else if (type === 'download' || type === 'download-win-mac-linux') {\n    return { icon: <GetAppIcon />, label: <Trans>Download</Trans> };\n  } else if (type === 'play') {\n    return { icon: <PlayArrowIcon />, label: <Trans>Play</Trans> };\n  }\n  // Officially supported stores/websites/social medias:\n  else if (type === 'App Store') {\n    return { icon: <Apple />, label: 'iOS' };\n  } else if (type === 'Play Store') {\n    return { icon: <GooglePlay />, label: 'Android' };\n  } else if (type === 'Steam') {\n    return { icon: <Steam />, label: 'Steam' };\n  } else if (type === 'Trailer') {\n    return { icon: <YouTubeIcon />, label: <Trans>Trailer</Trans> };\n  } else if (type === 'itch.io') {\n    return { icon: <ItchIo />, label: 'itch.io' };\n  } else if (type === 'Game Jolt') {\n    return { icon: <FlashOnIcon />, label: 'Game Jolt' };\n  } else if (type === 'Twitter') {\n    return { icon: <Twitter />, label: 'Twitter' };\n  } else if (type === 'Microsoft Store') {\n    return { icon: <Microsoft />, label: 'Microsoft Store' };\n  } else if (type === 'Instagram') {\n    return { icon: <Instagram />, label: 'Instagram' };\n  } else if (type === 'Twitch') {\n    return { icon: <Twitch />, label: 'Twitch' };\n  }\n\n  return { icon: null, label: type };\n};\n\nconst LinkButton = ({\n  link,\n  showcasedGame,\n}: {|\n  link: ShowcasedGameLink,\n  showcasedGame: ShowcasedGame,\n|}) => {\n  const { url, type } = link;\n  return (\n    <RaisedButton\n      key={type + '-' + url}\n      primary\n      {...getLinkIconAndLabel(url, type)}\n      onClick={() => {\n        sendShowcaseGameLinkOpened(showcasedGame.title, type);\n        Window.openExternalURL(getFullUrl(url));\n      }}\n    />\n  );\n};\n\nexport const ShowcasedGameListItem = ({\n  showcasedGame,\n  onHeightComputed,\n}: Props) => {\n  // Report the height of the item once it's known.\n  const [isLoaded, setIsLoaded] = React.useState(false);\n  const containerRef = React.useRef<?HTMLDivElement>(null);\n  const isImageLoadingRef = React.useRef(true);\n  const notifyHeightChanged = React.useCallback(\n    () => {\n      if (!isLoaded && !isImageLoadingRef.current) {\n        setIsLoaded(true);\n      }\n\n      // But don't report the height while the image is loading, as it could\n      // make some \"jumps\" in the scroll when scrolling up.\n      if (containerRef.current && !isImageLoadingRef.current)\n        onHeightComputed(containerRef.current.getBoundingClientRect().height);\n    },\n    [onHeightComputed, isLoaded]\n  );\n  React.useLayoutEffect(notifyHeightChanged);\n\n  const windowWidth = useResponsiveWindowWidth();\n  const hasDescription = !!showcasedGame.description;\n\n  const firstLinks = showcasedGame.links.slice(0, 3);\n  const otherLinks = showcasedGame.links.slice(3);\n\n  return (\n    <div\n      style={{\n        ...styles.container,\n        visibility: isLoaded ? undefined : 'hidden',\n        animation: isLoaded ? 'fadein 0.5s' : undefined,\n      }}\n      ref={containerRef}\n    >\n      <Card style={styles.card}>\n        <ResponsiveLineStackLayout noMargin>\n          <CorsAwareImage\n            style={\n              windowWidth === 'small'\n                ? styles.smallScreenThumbnailImage\n                : hasDescription\n                ? styles.thumbnailImageWithDescription\n                : styles.thumbnailImageWithoutDescription\n            }\n            src={showcasedGame.thumbnailUrl}\n            alt={showcasedGame.title}\n            onError={() => {\n              isImageLoadingRef.current = false;\n              notifyHeightChanged();\n            }}\n            onLoad={() => {\n              isImageLoadingRef.current = false;\n              notifyHeightChanged();\n            }}\n          />\n          <Line expand>\n            <Column expand>\n              <ResponsiveLineStackLayout noMargin alignItems=\"baseline\" expand>\n                <Text noMargin displayInlineAsSpan>\n                  {showcasedGame.title}\n                </Text>\n                <Text noMargin size=\"body2\" displayInlineAsSpan>\n                  <Trans>by {showcasedGame.author}</Trans>\n                </Text>\n              </ResponsiveLineStackLayout>\n              {showcasedGame.genres.length ? (\n                <TagChips tags={showcasedGame.genres} />\n              ) : null}\n              <Text size=\"body2\" displayInlineAsSpan>\n                <MarkdownText\n                  source={showcasedGame.description}\n                  allowParagraphs\n                />\n              </Text>\n              <Spacer />\n              <ResponsiveLineStackLayout\n                justifyContent=\"flex-end\"\n                noColumnMargin\n              >\n                {firstLinks.map((link, index) => (\n                  <LinkButton\n                    key={index}\n                    link={link}\n                    showcasedGame={showcasedGame}\n                  />\n                ))}\n              </ResponsiveLineStackLayout>\n              <ResponsiveLineStackLayout\n                justifyContent=\"flex-end\"\n                noColumnMargin\n              >\n                {otherLinks.map((link, index) => (\n                  <LinkButton\n                    key={index}\n                    link={link}\n                    showcasedGame={showcasedGame}\n                  />\n                ))}\n              </ResponsiveLineStackLayout>\n            </Column>\n          </Line>\n        </ResponsiveLineStackLayout>\n      </Card>\n    </div>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport SearchBar from '../UI/SearchBar';\nimport { Column, Line } from '../UI/Grid';\nimport Background from '../UI/Background';\nimport ScrollView from '../UI/ScrollView';\nimport { type ShowcasedGame } from '../Utils/GDevelopServices/Game';\nimport { ListSearchResults } from '../UI/Search/ListSearchResults';\nimport { GamesShowcaseContext } from './GamesShowcaseContext';\nimport { ShowcasedGameListItem } from './ShowcasedGameListItem';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport { Trans } from '@lingui/macro';\nimport Subheader from '../UI/Subheader';\nimport { CategoryChooser } from '../UI/Search/CategoryChooser';\n\nconst styles = {\n  searchBar: {\n    // TODO: Can we put this in the search bar by default?\n    flexShrink: 0,\n  },\n};\n\nconst getShowcasedGameTitle = (showcasedGame: ShowcasedGame) =>\n  showcasedGame.title;\n\ntype Props = {};\n\nexport const GamesShowcase = (props: Props) => {\n  const {\n    filters,\n    searchResults,\n    error,\n    fetchShowcasedGamesAndFilters,\n    filtersState,\n    searchText,\n    setSearchText,\n  } = React.useContext(GamesShowcaseContext);\n\n  React.useEffect(\n    () => {\n      fetchShowcasedGamesAndFilters();\n    },\n    [fetchShowcasedGamesAndFilters]\n  );\n\n  return (\n    <ResponsiveWindowMeasurer>\n      {windowWidth => (\n        <Column expand noMargin useFullHeight>\n          <SearchBar\n            value={searchText}\n            onChange={setSearchText}\n            onRequestSearch={() => {}}\n            style={styles.searchBar}\n          />\n          <Line\n            expand\n            overflow={\n              'hidden' /* Somehow required on Chrome/Firefox to avoid children growing (but not on Safari) */\n            }\n          >\n            <Background\n              noFullHeight\n              noExpand\n              width={windowWidth === 'small' ? 150 : 250}\n            >\n              <ScrollView>\n                <Subheader>\n                  <Trans>Categories</Trans>\n                </Subheader>\n                <CategoryChooser\n                  allItemsLabel={<Trans>All games</Trans>}\n                  allFilters={filters}\n                  filtersState={filtersState}\n                  error={error}\n                />\n              </ScrollView>\n            </Background>\n            <ListSearchResults\n              onRetry={fetchShowcasedGamesAndFilters}\n              error={error}\n              searchItems={searchResults}\n              getSearchItemUniqueId={getShowcasedGameTitle}\n              renderSearchItem={(showcasedGame, onHeightComputed) => (\n                <ShowcasedGameListItem\n                  onHeightComputed={onHeightComputed}\n                  showcasedGame={showcasedGame}\n                />\n              )}\n            />\n          </Line>\n        </Column>\n      )}\n    </ResponsiveWindowMeasurer>\n  );\n};\n","import generateName from '../Utils/NewNameGenerator';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst path = optionalRequire('path');\nvar fs = optionalRequire('fs-extra');\n\nexport const findEmptyPath = basePath => {\n  if (!path) return basePath;\n\n  const folderName = generateName('My project', name => {\n    try {\n      fs.accessSync(path.join(basePath, name));\n    } catch (ex) {\n      return false;\n    }\n    return true;\n  });\n\n  return path.join(basePath, folderName);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport ScrollView from '../UI/ScrollView';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { TutorialsList } from '../Tutorial';\nimport { Column } from '../UI/Grid';\nimport { type StorageProvider, type FileMetadata } from '../ProjectsStorage';\nimport { GamesShowcase } from '../GamesShowcase';\nimport Window from '../Utils/Window';\nimport PublishIcon from '@material-ui/icons/Publish';\nimport { findEmptyPath } from './LocalPathFinder';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nconst path = optionalRequire('path');\nconst electron = optionalRequire('electron');\nconst app = electron ? electron.remote.app : null;\n\ntype State = {|\n  currentTab: 'starters' | 'examples' | 'tutorials' | 'games-showcase',\n  outputPath: string,\n|};\n\nexport type CreateProjectDialogWithComponentsProps = {|\n  open: boolean,\n  onClose: () => void,\n  onOpen: (\n    storageProvider: StorageProvider,\n    fileMetadata: FileMetadata\n  ) => Promise<void>,\n  onCreate: (\n    gdProject,\n    storageProvider: ?StorageProvider,\n    fileMetadata: ?FileMetadata\n  ) => Promise<void>,\n  initialTab: 'starters' | 'tutorials' | 'games-showcase',\n|};\n\ntype Props = {|\n  ...CreateProjectDialogWithComponentsProps,\n  startersComponent: any,\n  examplesComponent: any,\n|};\n\nexport default class CreateProjectDialog extends React.Component<Props, State> {\n  state = {\n    currentTab: this.props.initialTab,\n    outputPath: app\n      ? findEmptyPath(path.join(app.getPath('documents'), 'GDevelop projects'))\n      : '',\n  };\n\n  _onChangeTab = (\n    newTab: 'starters' | 'examples' | 'tutorials' | 'games-showcase'\n  ) => {\n    this.setState({\n      currentTab: newTab,\n    });\n  };\n\n  _showExamples = () => this._onChangeTab('examples');\n\n  render() {\n    const { open, onClose, onOpen, onCreate } = this.props;\n    if (!open) return null;\n\n    const ExamplesComponent = this.props.examplesComponent;\n    const StartersComponent = this.props.startersComponent;\n\n    return (\n      <Dialog\n        title={<Trans>Create a new project</Trans>}\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Close</Trans>}\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        secondaryActions={[\n          this.state.currentTab === 'games-showcase' ? (\n            <FlatButton\n              key=\"submit-game-showcase\"\n              onClick={() => {\n                Window.openExternalURL(\n                  'https://docs.google.com/forms/d/e/1FAIpQLSfjiOnkbODuPifSGuzxYY61vB5kyMWdTZSSqkJsv3H6ePRTQA/viewform?usp=sf_link'\n                );\n              }}\n              primary\n              icon={<PublishIcon />}\n              label={<Trans>Submit your game to the showcase</Trans>}\n            />\n          ) : null,\n          this.state.currentTab === 'examples' ? (\n            <FlatButton\n              key=\"submit-example\"\n              onClick={() => {\n                Window.openExternalURL(\n                  'https://github.com/GDevelopApp/GDevelop-examples/issues/new/choose'\n                );\n              }}\n              primary\n              icon={<PublishIcon />}\n              label={<Trans>Submit your project as an example</Trans>}\n            />\n          ) : null,\n        ]}\n        cannotBeDismissed={false}\n        onRequestClose={onClose}\n        open={open}\n        noMargin\n        fullHeight\n        flexBody\n      >\n        <Column expand noMargin>\n          <Tabs value={this.state.currentTab} onChange={this._onChangeTab}>\n            <Tab label={<Trans>Starters</Trans>} value=\"starters\" />\n            <Tab label={<Trans>Examples</Trans>} value=\"examples\" />\n            <Tab label={<Trans>Tutorials</Trans>} value=\"tutorials\" />\n            <Tab label={<Trans>Games showcase</Trans>} value=\"games-showcase\" />\n          </Tabs>\n          {this.state.currentTab === 'starters' && (\n            <ScrollView>\n              <StartersComponent\n                onOpen={onOpen}\n                onCreate={onCreate}\n                onChangeOutputPath={outputPath => this.setState({ outputPath })}\n                onShowExamples={this._showExamples}\n                outputPath={this.state.outputPath}\n              />\n            </ScrollView>\n          )}\n          {this.state.currentTab === 'examples' && (\n            <ExamplesComponent\n              onOpen={onOpen}\n              onChangeOutputPath={outputPath => this.setState({ outputPath })}\n              outputPath={this.state.outputPath}\n            />\n          )}\n          {this.state.currentTab === 'tutorials' && <TutorialsList />}\n          {this.state.currentTab === 'games-showcase' && <GamesShowcase />}\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","import { Component } from 'react';\nimport MultiBackend from 'react-dnd-multi-backend';\nimport HTML5toTouch from 'react-dnd-multi-backend/lib/HTML5toTouch';\nimport { DragDropContext } from 'react-dnd';\n\nclass DragAndDropContextProvider extends Component {\n  render() {\n    return this.props.children;\n  }\n}\n\n/**\n * A react-dnd provider that automatically switch to react-dnd-touch-backend\n * when a touch event is recognized (react-dnd-html5-backend won't work on\n * touch devices like phones).\n *\n * When doing the switch from HTML5 backend to Touch backend, the existing events\n * are passed to the new backend. Unsure if this is necessary in GDevelop case.\n */\nexport default DragDropContext(MultiBackend(HTML5toTouch))(\n  DragAndDropContextProvider\n);\n","// @flow\nimport * as React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = {\n  progress: { marginLeft: 8, verticalAlign: 'middle' },\n};\n\nexport default ({\n  children,\n  isLoading,\n}: {\n  children: React.Node,\n  isLoading: ?boolean,\n}) => (\n  <span>\n    {children}\n    {isLoading && <CircularProgress size={20} style={styles.progress} />}\n  </span>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport TextField from '../UI/TextField';\n\ntype Props = {|\n  value: string,\n  onChange: Function,\n  errorText?: ?string,\n  allowEmpty?: boolean,\n|};\n\nexport const isUsernameValid = (username: string, allowEmpty: ?boolean) => {\n  if (allowEmpty && username === '') return true;\n  return username && /^[\\w|-]+$/.test(username) && username.length < 31;\n};\n\nexport const usernameFormatError =\n  'Please pick a short username with only alphanumeric characters as well as _ and -';\n\nexport const UsernameField = ({\n  value,\n  onChange,\n  errorText,\n  allowEmpty,\n}: Props) => {\n  const getUsernameErrorText = () =>\n    isUsernameValid(value, allowEmpty) ? undefined : usernameFormatError;\n\n  return (\n    <TextField\n      autoFocus\n      value={value}\n      floatingLabelText={<Trans>Username</Trans>}\n      fullWidth\n      onChange={onChange}\n      errorText={getUsernameErrorText() || errorText}\n    />\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport TextField from '../UI/TextField';\nimport {\n  type RegisterForm,\n  type AuthError,\n} from '../Utils/GDevelopServices/Authentication';\nimport LeftLoader from '../UI/LeftLoader';\nimport BackgroundText from '../UI/BackgroundText';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport { UsernameField, isUsernameValid } from './UsernameField';\n\ntype Props = {|\n  onClose: () => void,\n  onGoToLogin: () => void,\n  onCreateAccount: (form: RegisterForm) => Promise<void>,\n  createAccountInProgress: boolean,\n  error: ?AuthError,\n|};\n\ntype State = {|\n  form: RegisterForm,\n|};\n\nexport const getEmailErrorText = (error: ?AuthError) => {\n  if (!error) return undefined;\n\n  if (error.code === 'auth/invalid-email') return 'This email is invalid';\n  if (error.code === 'auth/user-disabled') return 'The user was disabled';\n  if (error.code === 'auth/user-not-found')\n    return 'This user was not found: have you created your account?';\n  if (error.code === 'auth/email-already-in-use')\n    return 'This email was already used for another account';\n  if (error.code === 'auth/operation-not-allowed')\n    return 'Service seems to be unavailable, please try again later';\n  if (error.code === 'auth/requires-recent-login')\n    return 'Please log out and log in again to verify your identify, then change your email';\n  return undefined;\n};\n\nexport const getPasswordErrorText = (error: ?AuthError) => {\n  if (!error) return undefined;\n\n  if (error.code === 'auth/wrong-password') return 'The password is invalid';\n  if (error.code === 'auth/weak-password')\n    return 'This password is too weak: please use more letters and digits';\n  return undefined;\n};\n\nexport default class CreateAccountDialog extends Component<Props, State> {\n  state = {\n    form: {\n      email: '',\n      password: '',\n      username: '',\n    },\n  };\n\n  _onCreateAccount = () => {\n    const { form } = this.state;\n    this.props.onCreateAccount(form);\n  };\n\n  render() {\n    const { onClose, createAccountInProgress, onGoToLogin, error } = this.props;\n\n    return (\n      <Dialog\n        title={<Trans>Create a new GDevelop account</Trans>}\n        actions={[\n          <FlatButton\n            label={<Trans>Back</Trans>}\n            disabled={createAccountInProgress}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />,\n          <LeftLoader isLoading={createAccountInProgress} key=\"create-account\">\n            <RaisedButton\n              label={<Trans>Create my account</Trans>}\n              primary\n              disabled={\n                createAccountInProgress ||\n                !isUsernameValid(this.state.form.username, true)\n              }\n              onClick={this._onCreateAccount}\n            />\n          </LeftLoader>,\n        ]}\n        secondaryActions={[\n          <FlatButton\n            label={<Trans>Already have an account?</Trans>}\n            primary={false}\n            key=\"already-have-account\"\n            onClick={onGoToLogin}\n          />,\n        ]}\n        onRequestClose={() => {\n          if (!createAccountInProgress) onClose();\n        }}\n        maxWidth=\"sm\"\n        cannotBeDismissed={true}\n        open\n      >\n        <ColumnStackLayout noMargin>\n          <BackgroundText>\n            <MarkdownText\n              translatableSource={t`By creating an account and using GDevelop, you agree to the [Terms and Conditions](https://gdevelop-app.com/legal/terms-and-conditions). Having an account allows you to export your game on Android or as a Desktop app and it unlocks other services for your project!`}\n            />\n          </BackgroundText>\n          <UsernameField\n            value={this.state.form.username}\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  username: value,\n                },\n              });\n            }}\n            allowEmpty\n          />\n          <TextField\n            value={this.state.form.email}\n            floatingLabelText={<Trans>Email</Trans>}\n            errorText={getEmailErrorText(error)}\n            fullWidth\n            required\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  email: value,\n                },\n              });\n            }}\n          />\n          <TextField\n            value={this.state.form.password}\n            floatingLabelText={<Trans>Password</Trans>}\n            errorText={getPasswordErrorText(error)}\n            type=\"password\"\n            fullWidth\n            required\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  password: value,\n                },\n              });\n            }}\n          />\n        </ColumnStackLayout>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { Column } from '../UI/Grid';\nimport TextField from '../UI/TextField';\nimport {\n  type LoginForm,\n  type AuthError,\n} from '../Utils/GDevelopServices/Authentication';\nimport RightLoader from '../UI/RightLoader';\nimport LeftLoader from '../UI/LeftLoader';\nimport Text from '../UI/Text';\nimport { getEmailErrorText, getPasswordErrorText } from './CreateAccountDialog';\nimport AlertMessage from '../UI/AlertMessage';\nimport { ColumnStackLayout } from '../UI/Layout';\n\ntype Props = {|\n  onClose: () => void,\n  onGoToCreateAccount: () => void,\n  onLogin: (form: LoginForm) => Promise<void>,\n  onForgotPassword: (form: LoginForm) => Promise<void>,\n  loginInProgress: boolean,\n  error: ?AuthError,\n  resetPasswordDialogOpen: boolean,\n  onCloseResetPasswordDialog: () => void,\n  forgotPasswordInProgress: boolean,\n|};\n\ntype State = {|\n  form: LoginForm,\n|};\n\nexport default class LoginDialog extends Component<Props, State> {\n  state = {\n    form: {\n      email: '',\n      password: '',\n    },\n  };\n\n  _onLogin = () => {\n    const { form } = this.state;\n    this.props.onLogin(form);\n  };\n\n  _onForgotPassword = () => {\n    const { form } = this.state;\n    this.props.onForgotPassword(form);\n  };\n\n  render() {\n    const {\n      onClose,\n      onGoToCreateAccount,\n      loginInProgress,\n      error,\n      resetPasswordDialogOpen,\n      onCloseResetPasswordDialog,\n      forgotPasswordInProgress,\n    } = this.props;\n    const actions = [\n      <FlatButton\n        label={<Trans>Back</Trans>}\n        disabled={loginInProgress || forgotPasswordInProgress}\n        key=\"back\"\n        primary={false}\n        onClick={onClose}\n      />,\n      <LeftLoader isLoading={loginInProgress} key=\"login\">\n        <RaisedButton\n          label={<Trans>Login</Trans>}\n          primary\n          onClick={this._onLogin}\n          disabled={loginInProgress || forgotPasswordInProgress}\n        />\n      </LeftLoader>,\n    ];\n\n    return (\n      <Dialog\n        title={<Trans>Login to your GDevelop account</Trans>}\n        actions={actions}\n        secondaryActions={[\n          <RightLoader\n            isLoading={forgotPasswordInProgress}\n            key=\"forgot-password\"\n          >\n            <FlatButton\n              label={<Trans>I forgot my password</Trans>}\n              primary={false}\n              disabled={loginInProgress || forgotPasswordInProgress}\n              onClick={this._onForgotPassword}\n            />\n          </RightLoader>,\n        ]}\n        onRequestClose={() => {\n          if (!loginInProgress && !forgotPasswordInProgress) onClose();\n        }}\n        maxWidth=\"sm\"\n        cannotBeDismissed={true}\n        open\n      >\n        <ColumnStackLayout noMargin>\n          <AlertMessage\n            kind=\"info\"\n            renderRightButton={() => (\n              <FlatButton\n                label={<Trans>Create my account</Trans>}\n                disabled={loginInProgress || forgotPasswordInProgress}\n                primary\n                onClick={onGoToCreateAccount}\n              />\n            )}\n          >\n            <Trans>Don't have an account yet?</Trans>\n          </AlertMessage>\n          <TextField\n            autoFocus\n            value={this.state.form.email}\n            floatingLabelText={<Trans>Email</Trans>}\n            errorText={getEmailErrorText(error)}\n            fullWidth\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  email: value,\n                },\n              });\n            }}\n          />\n          <TextField\n            value={this.state.form.password}\n            floatingLabelText={<Trans>Password</Trans>}\n            errorText={getPasswordErrorText(error)}\n            type=\"password\"\n            fullWidth\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  password: value,\n                },\n              });\n            }}\n          />\n        </ColumnStackLayout>\n        <Dialog\n          cannotBeDismissed={true}\n          open={resetPasswordDialogOpen}\n          title={<Trans>Reset your password</Trans>}\n          actions={[\n            <FlatButton\n              label={<Trans>Close</Trans>}\n              key=\"close\"\n              onClick={onCloseResetPasswordDialog}\n            />,\n          ]}\n        >\n          <Column noMargin>\n            <Text>\n              <Trans>\n                You should have received an email containing instructions to\n                reset and set a new password. Once it's done, you can use your\n                new password in GDevelop.\n              </Trans>\n            </Text>\n          </Column>\n        </Dialog>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans, t } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport {\n  type EditForm,\n  type AuthError,\n  type Profile,\n} from '../Utils/GDevelopServices/Authentication';\nimport LeftLoader from '../UI/LeftLoader';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport {\n  isUsernameValid,\n  UsernameField,\n  usernameFormatError,\n} from './UsernameField';\nimport TextField from '../UI/TextField';\nimport Checkbox from '../UI/Checkbox';\n\ntype Props = {|\n  profile: Profile,\n  onClose: () => void,\n  onEdit: (form: EditForm) => Promise<void>,\n  editInProgress: boolean,\n  error: ?AuthError,\n|};\n\ntype State = {|\n  form: EditForm,\n|};\n\nexport const getUsernameErrorText = (error: ?AuthError) => {\n  if (!error) return undefined;\n\n  if (error.code === 'auth/username-used')\n    return 'This username is already used, please pick another one.';\n  if (error.code === 'auth/malformed-username') return usernameFormatError;\n  return undefined;\n};\n\nexport default class EditDialog extends Component<Props, State> {\n  state = {\n    form: {\n      username: this.props.profile.username || '',\n      description: this.props.profile.description || '',\n      getGameStatsEmail: !!this.props.profile.getGameStatsEmail,\n    },\n  };\n\n  _onEdit = () => {\n    const { form } = this.state;\n    this.props.onEdit(form);\n  };\n\n  render() {\n    const { onClose, editInProgress, error } = this.props;\n    const actions = [\n      <FlatButton\n        label={<Trans>Back</Trans>}\n        disabled={editInProgress}\n        key=\"back\"\n        primary={false}\n        onClick={onClose}\n      />,\n      <LeftLoader isLoading={editInProgress} key=\"edit\">\n        <RaisedButton\n          label={<Trans>Save</Trans>}\n          primary\n          onClick={this._onEdit}\n          disabled={\n            editInProgress || !isUsernameValid(this.state.form.username)\n          }\n        />\n      </LeftLoader>,\n    ];\n\n    return (\n      <Dialog\n        title={<Trans>Edit your GDevelop profile</Trans>}\n        actions={actions}\n        onRequestClose={() => {\n          if (!editInProgress) onClose();\n        }}\n        maxWidth=\"sm\"\n        cannotBeDismissed={true}\n        open\n      >\n        <ColumnStackLayout noMargin>\n          <UsernameField\n            value={this.state.form.username}\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  username: value,\n                },\n              });\n            }}\n            errorText={getUsernameErrorText(error)}\n          />\n          <TextField\n            value={this.state.form.description}\n            floatingLabelText={<Trans>Bio</Trans>}\n            fullWidth\n            multiline\n            rows={3}\n            rowsMax={5}\n            hintText={t`What are you using GDevelop for?`}\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  description: value,\n                },\n              });\n            }}\n          />\n          <Checkbox\n            label={<Trans>I want to receive weekly stats about my games</Trans>}\n            checked={this.state.form.getGameStatsEmail}\n            onCheck={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  getGameStatsEmail: value,\n                },\n              });\n            }}\n          />\n        </ColumnStackLayout>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { User as FirebaseUser } from 'firebase/auth';\nimport {\n  type ChangeEmailForm,\n  type AuthError,\n} from '../Utils/GDevelopServices/Authentication';\nimport LeftLoader from '../UI/LeftLoader';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport TextField from '../UI/TextField';\nimport { getEmailErrorText } from './CreateAccountDialog';\n\ntype Props = {|\n  firebaseUser: FirebaseUser,\n  onClose: () => void,\n  onChangeEmail: (form: ChangeEmailForm) => Promise<void>,\n  changeEmailInProgress: boolean,\n  error: ?AuthError,\n|};\n\ntype State = {|\n  form: ChangeEmailForm,\n|};\n\nexport default class ChangeEmailDialog extends Component<Props, State> {\n  state = {\n    form: {\n      email: this.props.firebaseUser.email,\n    },\n  };\n\n  _onChangeEmail = () => {\n    const { form } = this.state;\n    this.props.onChangeEmail(form);\n  };\n\n  render() {\n    const { onClose, changeEmailInProgress, error } = this.props;\n    const actions = [\n      <FlatButton\n        label={<Trans>Back</Trans>}\n        disabled={changeEmailInProgress}\n        key=\"back\"\n        primary={false}\n        onClick={onClose}\n      />,\n      <LeftLoader isLoading={changeEmailInProgress} key=\"change-email\">\n        <RaisedButton\n          label={<Trans>Save</Trans>}\n          primary\n          onClick={this._onChangeEmail}\n          disabled={changeEmailInProgress}\n        />\n      </LeftLoader>,\n    ];\n\n    return (\n      <Dialog\n        title={<Trans>Change your email</Trans>}\n        actions={actions}\n        onRequestClose={() => {\n          if (!changeEmailInProgress) onClose();\n        }}\n        maxWidth=\"sm\"\n        cannotBeDismissed={true}\n        open\n      >\n        <ColumnStackLayout noMargin>\n          <TextField\n            value={this.state.form.email}\n            floatingLabelText={<Trans>Email</Trans>}\n            errorText={getEmailErrorText(error)}\n            fullWidth\n            required\n            onChange={(e, value) => {\n              this.setState({\n                form: {\n                  ...this.state.form,\n                  email: value,\n                },\n              });\n            }}\n          />\n        </ColumnStackLayout>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { type AuthenticatedUser } from './AuthenticatedUserContext';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BackgroundText from '../UI/BackgroundText';\nimport VerifiedUser from '@material-ui/icons/VerifiedUser';\nimport Text from '../UI/Text';\nimport { useInterval } from '../Utils/UseInterval';\n\ntype Props = {|\n  onClose: () => void,\n  authenticatedUser: AuthenticatedUser,\n|};\n\nexport default function EmailVerificationPendingDialog({\n  onClose,\n  authenticatedUser,\n}: Props) {\n  const isVerified =\n    !!authenticatedUser &&\n    !!authenticatedUser.firebaseUser &&\n    !!authenticatedUser.firebaseUser.emailVerified;\n  useInterval(\n    () => {\n      authenticatedUser.onRefreshFirebaseProfile().catch(() => {\n        // Ignore any error, will be retried anyway.\n      });\n    },\n    isVerified ? null : 3900\n  );\n\n  return (\n    <Dialog\n      actions={[\n        isVerified ? (\n          <RaisedButton\n            label={<Trans>Done!</Trans>}\n            key=\"close\"\n            primary\n            onClick={onClose}\n          />\n        ) : (\n          <FlatButton\n            label={<Trans>Cancel and close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />\n        ),\n      ]}\n      maxWidth=\"sm\"\n      cannotBeDismissed={true}\n      open\n      noMargin\n    >\n      {!isVerified ? (\n        <Column>\n          <Line justifyContent=\"center\" alignItems=\"center\">\n            <CircularProgress size={20} />\n            <Spacer />\n            <Text>Waiting for the email verification...</Text>\n          </Line>\n          <Spacer />\n          <Line justifyContent=\"center\">\n            <BackgroundText>\n              <Trans>\n                Check your inbox and click the link to verify your email address\n                - and come back here when it's done.\n              </Trans>\n            </BackgroundText>\n          </Line>\n        </Column>\n      ) : (\n        <Column>\n          <Line justifyContent=\"center\" alignItems=\"center\">\n            <VerifiedUser />\n            <Spacer />\n            <Text>\n              <Trans>Your email is now verified!</Trans>\n            </Text>\n          </Line>\n        </Column>\n      )}\n    </Dialog>\n  );\n}\n","// @flow\n\nimport * as React from 'react';\nimport {\n  getUserUsages,\n  getUserSubscription,\n  getUserLimits,\n} from '../Utils/GDevelopServices/Usage';\nimport { getUserBadges } from '../Utils/GDevelopServices/User';\nimport Authentication, {\n  type LoginForm,\n  type RegisterForm,\n  type EditForm,\n  type ChangeEmailForm,\n  type AuthError,\n} from '../Utils/GDevelopServices/Authentication';\nimport { User as FirebaseUser } from 'firebase/auth';\nimport LoginDialog from './LoginDialog';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { sendSignupDone } from '../Utils/Analytics/EventSender';\nimport AuthenticatedUserContext, {\n  initialAuthenticatedUser,\n  type AuthenticatedUser,\n} from './AuthenticatedUserContext';\nimport CreateAccountDialog from './CreateAccountDialog';\nimport EditProfileDialog from './EditProfileDialog';\nimport ChangeEmailDialog from './ChangeEmailDialog';\nimport EmailVerificationPendingDialog from './EmailVerificationPendingDialog';\n\ntype Props = {|\n  authentication: Authentication,\n  children: React.Node,\n|};\n\ntype State = {|\n  authenticatedUser: AuthenticatedUser,\n  loginDialogOpen: boolean,\n  createAccountDialogOpen: boolean,\n  loginInProgress: boolean,\n  createAccountInProgress: boolean,\n  editProfileDialogOpen: boolean,\n  editInProgress: boolean,\n  authError: ?AuthError,\n  resetPasswordDialogOpen: boolean,\n  emailVerificationPendingDialogOpen: boolean,\n  forgotPasswordInProgress: boolean,\n  changeEmailDialogOpen: boolean,\n  changeEmailInProgress: boolean,\n|};\n\nexport default class AuthenticatedUserProvider extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    authenticatedUser: initialAuthenticatedUser,\n    loginDialogOpen: false,\n    createAccountDialogOpen: false,\n    loginInProgress: false,\n    createAccountInProgress: false,\n    editProfileDialogOpen: false,\n    editInProgress: false,\n    authError: null,\n    resetPasswordDialogOpen: false,\n    emailVerificationPendingDialogOpen: false,\n    forgotPasswordInProgress: false,\n    changeEmailDialogOpen: false,\n    changeEmailInProgress: false,\n  };\n  _automaticallyUpdateUserProfile = true;\n\n  componentDidMount() {\n    this._resetAuthenticatedUser();\n\n    // Listen to when the user log out so that we reset the user profile.\n    this.props.authentication.setOnUserLogoutCallback(\n      this._fetchUserProfileWithoutThrowingErrors\n    );\n\n    // When the authenticated user changes, we need to react accordingly\n    // This can happen:\n    // - at the startup, because the authenticated Firebase user was not ready yet\n    //   when this component mounted. So we'll fetch the user profile.\n    // - at the login, signup, profile edit. These methods are taking care of\n    //   fetching the user profile by themselves, so they will disable the automatic\n    //   refresh.\n    // - at any other moment (Firebase user was updated), in which case it's probably\n    //   not a problem to fetch again the user profile.\n    this.props.authentication.setOnUserUpdateCallback(() => {\n      if (this._automaticallyUpdateUserProfile) {\n        console.info(\n          'Fetching user profile as the authenticated user changed...'\n        );\n        this._fetchUserProfileWithoutThrowingErrors();\n      } else {\n        console.info(\n          'The authenticated user changed, but not fetching the user profile again (deactivated).'\n        );\n      }\n    });\n\n    if (this.props.authentication.getFirebaseUserSync()) {\n      // The user is logged already: fetch its user profile (because the \"user update\"\n      // won't trigger, as registered too late).\n      console.info(\n        'Fetching user profile as authenticated user found at startup...'\n      );\n      this._automaticallyUpdateUserProfile = false;\n      this._fetchUserProfileWithoutThrowingErrors();\n      this._automaticallyUpdateUserProfile = true;\n    } else {\n      // Don't do anything. Either no user is logged (nothing to do)\n      // or is being logged (the \"user udpate\" callback will trigger later).\n    }\n  }\n\n  _resetAuthenticatedUser() {\n    this.setState(({ authenticatedUser }) => ({\n      authenticatedUser: {\n        ...initialAuthenticatedUser,\n        onLogout: this._doLogout,\n        onBadgesChanged: this._fetchUserBadges,\n        onLogin: () => this.openLoginDialog(true),\n        onEdit: () => this.openEditProfileDialog(true),\n        onChangeEmail: () => this.openChangeEmailDialog(true),\n        onCreateAccount: () => this.openCreateAccountDialog(true),\n        onRefreshUserProfile: this._fetchUserProfile,\n        onRefreshFirebaseProfile: async () => {\n          await this._reloadFirebaseProfile();\n        },\n        onSendEmailVerification: this._doSendEmailVerification,\n        onAcceptGameStatsEmail: this._doAcceptGameStatsEmail,\n        getAuthorizationHeader: () =>\n          this.props.authentication.getAuthorizationHeader(),\n      },\n    }));\n  }\n\n  _reloadFirebaseProfile = async (): Promise<?FirebaseUser> => {\n    const { authentication } = this.props;\n\n    try {\n      const firebaseUser = await authentication.getFirebaseUser();\n      if (!firebaseUser) {\n        this.setState(({ authenticatedUser }) => ({\n          authenticatedUser: {\n            ...authenticatedUser,\n            authenticated: false,\n            profile: null,\n            usages: null,\n            limits: null,\n            subscription: null,\n          },\n        }));\n        return null;\n      }\n\n      this.setState(({ authenticatedUser }) => ({\n        authenticatedUser: {\n          ...authenticatedUser,\n          authenticated: true,\n          firebaseUser,\n        },\n      }));\n      return firebaseUser;\n    } catch (error) {\n      console.error('Unable to fetch the authenticated Firebase user:', error);\n      throw error;\n    }\n  };\n\n  _fetchUserProfileWithoutThrowingErrors = async () => {\n    try {\n      await this._fetchUserProfile();\n    } catch (error) {\n      console.error(\n        'Error while fetching the user profile - but ignoring it.',\n        error\n      );\n    }\n  };\n\n  _fetchUserProfile = async () => {\n    const { authentication } = this.props;\n\n    // First ensure the Firebase authenticated user is up to date\n    // (and let the error propagate if any).\n    const firebaseUser = await this._reloadFirebaseProfile();\n    if (!firebaseUser) return;\n\n    // Fetching user profile related information, but independently from\n    // the user profile itself, to not block in case one of these calls\n    // fails.\n    getUserUsages(authentication.getAuthorizationHeader, firebaseUser.uid).then(\n      usages =>\n        this.setState(({ authenticatedUser }) => ({\n          authenticatedUser: {\n            ...authenticatedUser,\n            usages,\n          },\n        })),\n      error => {\n        console.error('Error while loading user usages:', error);\n      }\n    );\n    getUserSubscription(\n      authentication.getAuthorizationHeader,\n      firebaseUser.uid\n    ).then(\n      subscription =>\n        this.setState(({ authenticatedUser }) => ({\n          authenticatedUser: {\n            ...authenticatedUser,\n            subscription,\n          },\n        })),\n      error => {\n        console.error('Error while loading user subscriptions:', error);\n      }\n    );\n    getUserLimits(authentication.getAuthorizationHeader, firebaseUser.uid).then(\n      limits =>\n        this.setState(({ authenticatedUser }) => ({\n          authenticatedUser: {\n            ...authenticatedUser,\n            limits,\n          },\n        })),\n      error => {\n        console.error('Error while loading user limits:', error);\n      }\n    );\n    this._fetchUserBadges();\n\n    // Load and wait for the user profile to be fetched.\n    // (and let the error propagate if any).\n    const userProfile = await authentication.getUserProfile(\n      authentication.getAuthorizationHeader\n    );\n\n    this.setState(({ authenticatedUser }) => ({\n      authenticatedUser: {\n        ...authenticatedUser,\n        profile: userProfile,\n      },\n    }));\n  };\n\n  _fetchUserBadges = async () => {\n    const { firebaseUser } = this.state.authenticatedUser;\n    if (!firebaseUser) return;\n    try {\n      const badges = await getUserBadges(firebaseUser.uid);\n      this.setState(({ authenticatedUser }) => ({\n        authenticatedUser: {\n          ...authenticatedUser,\n          badges,\n        },\n      }));\n    } catch (error) {\n      console.error('Error while loading user badges:', error);\n    }\n  };\n\n  _doLogout = () => {\n    if (this.props.authentication) this.props.authentication.logout();\n    this._resetAuthenticatedUser();\n  };\n\n  _doLogin = async (form: LoginForm) => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    this.setState({\n      loginInProgress: true,\n    });\n    this._automaticallyUpdateUserProfile = false;\n    try {\n      await authentication.login(form);\n      await this._fetchUserProfileWithoutThrowingErrors();\n      this.openLoginDialog(false);\n    } catch (authError) {\n      this.setState({ authError });\n    }\n    this.setState({\n      loginInProgress: false,\n    });\n    this._automaticallyUpdateUserProfile = true;\n  };\n\n  _doEdit = async (form: EditForm) => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    this.setState({\n      editInProgress: true,\n    });\n    this._automaticallyUpdateUserProfile = false;\n    try {\n      await authentication.editUserProfile(\n        authentication.getAuthorizationHeader,\n        form\n      );\n      await this._fetchUserProfileWithoutThrowingErrors();\n      this.openEditProfileDialog(false);\n    } catch (authError) {\n      this.setState({ authError });\n    }\n    this.setState({\n      editInProgress: false,\n    });\n    this._automaticallyUpdateUserProfile = true;\n  };\n\n  _doCreateAccount = async (form: RegisterForm) => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    this.setState({\n      createAccountInProgress: true,\n    });\n    this._automaticallyUpdateUserProfile = false;\n    try {\n      await authentication.createFirebaseAccount(form);\n\n      try {\n        await authentication.createUser(\n          authentication.getAuthorizationHeader,\n          form\n        );\n      } catch (error) {\n        // Ignore this error - this is a best effort call\n        // and the user profile will be created on demand later\n        // by the API when fetched.\n      }\n\n      await this._fetchUserProfileWithoutThrowingErrors();\n      this.openLoginDialog(false);\n      sendSignupDone(form.email);\n    } catch (authError) {\n      this.setState({ authError });\n    }\n    this.setState({\n      createAccountInProgress: false,\n    });\n    this._automaticallyUpdateUserProfile = true;\n  };\n\n  _doForgotPassword = async (form: LoginForm) => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    this.setState({\n      forgotPasswordInProgress: true,\n    });\n    try {\n      await authentication.forgotPassword(form);\n      this.openResetPassword(true);\n    } catch (authError) {\n      this.setState({ authError });\n      showWarningBox(\n        \"Unable to send you an email to reset your password. Please double-check that the email address that you've entered is valid.\"\n      );\n    }\n    this.setState({\n      forgotPasswordInProgress: false,\n    });\n  };\n\n  _doSendEmailVerification = async () => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    await authentication.sendFirebaseEmailVerification();\n    this.openEmailVerificationPendingDialog(true);\n  };\n\n  _doAcceptGameStatsEmail = async () => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    this.setState({\n      editInProgress: true,\n    });\n    this._automaticallyUpdateUserProfile = false;\n    try {\n      await authentication.acceptGameStatsEmail(\n        authentication.getAuthorizationHeader\n      );\n      await this._fetchUserProfileWithoutThrowingErrors();\n    } catch (authError) {\n      this.setState({ authError });\n    }\n    this.setState({\n      editInProgress: false,\n    });\n    this._automaticallyUpdateUserProfile = true;\n  };\n\n  _doChangeEmail = async (form: ChangeEmailForm) => {\n    const { authentication } = this.props;\n    if (!authentication) return;\n\n    this.setState({\n      changeEmailInProgress: true,\n    });\n    this._automaticallyUpdateUserProfile = false;\n    try {\n      await authentication.changeEmail(\n        authentication.getAuthorizationHeader,\n        form\n      );\n      await this._fetchUserProfileWithoutThrowingErrors();\n      this.openChangeEmailDialog(false);\n    } catch (authError) {\n      this.setState({ authError });\n    }\n    this.setState({\n      changeEmailInProgress: false,\n    });\n    this._automaticallyUpdateUserProfile = true;\n  };\n\n  openEmailVerificationPendingDialog = (open: boolean = true) => {\n    this.setState({\n      emailVerificationPendingDialogOpen: open,\n    });\n  };\n\n  openResetPassword = (open: boolean = true) => {\n    this.setState({\n      resetPasswordDialogOpen: open,\n      authError: null,\n    });\n  };\n\n  openLoginDialog = (open: boolean = true) => {\n    this.setState({\n      loginDialogOpen: open,\n      createAccountDialogOpen: false,\n      authError: null,\n    });\n  };\n\n  openEditProfileDialog = (open: boolean = true) => {\n    this.setState({\n      editProfileDialogOpen: open,\n      authError: null,\n    });\n  };\n\n  openCreateAccountDialog = (open: boolean = true) => {\n    this.setState({\n      loginDialogOpen: false,\n      createAccountDialogOpen: open,\n      authError: null,\n    });\n  };\n\n  openChangeEmailDialog = (open: boolean = true) => {\n    this.setState({\n      changeEmailDialogOpen: open,\n      authError: null,\n    });\n  };\n\n  render() {\n    return (\n      <React.Fragment>\n        <AuthenticatedUserContext.Provider value={this.state.authenticatedUser}>\n          {this.props.children}\n        </AuthenticatedUserContext.Provider>\n        {this.state.loginDialogOpen && (\n          <LoginDialog\n            onClose={() => this.openLoginDialog(false)}\n            onGoToCreateAccount={() => this.openCreateAccountDialog(true)}\n            onLogin={this._doLogin}\n            loginInProgress={this.state.loginInProgress}\n            error={this.state.authError}\n            onForgotPassword={this._doForgotPassword}\n            resetPasswordDialogOpen={this.state.resetPasswordDialogOpen}\n            onCloseResetPasswordDialog={() => this.openResetPassword(false)}\n            forgotPasswordInProgress={this.state.forgotPasswordInProgress}\n          />\n        )}\n        {this.state.authenticatedUser.profile &&\n          this.state.editProfileDialogOpen && (\n            <EditProfileDialog\n              profile={this.state.authenticatedUser.profile}\n              onClose={() => this.openEditProfileDialog(false)}\n              onEdit={this._doEdit}\n              editInProgress={this.state.editInProgress}\n              error={this.state.authError}\n            />\n          )}\n        {this.state.authenticatedUser.firebaseUser &&\n          this.state.changeEmailDialogOpen && (\n            <ChangeEmailDialog\n              firebaseUser={this.state.authenticatedUser.firebaseUser}\n              onClose={() => this.openChangeEmailDialog(false)}\n              onChangeEmail={this._doChangeEmail}\n              changeEmailInProgress={this.state.changeEmailInProgress}\n              error={this.state.authError}\n            />\n          )}\n        {this.state.createAccountDialogOpen && (\n          <CreateAccountDialog\n            onClose={() => this.openCreateAccountDialog(false)}\n            onGoToLogin={() => this.openLoginDialog(true)}\n            onCreateAccount={this._doCreateAccount}\n            createAccountInProgress={this.state.createAccountInProgress}\n            error={this.state.authError}\n          />\n        )}\n        {this.state.emailVerificationPendingDialogOpen && (\n          <EmailVerificationPendingDialog\n            authenticatedUser={this.state.authenticatedUser}\n            onClose={() => {\n              this.openEmailVerificationPendingDialog(false);\n              this.state.authenticatedUser\n                .onRefreshFirebaseProfile()\n                .catch(() => {\n                  // Ignore any error, we can't do much.\n                });\n            }}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\n\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport {\n  getUserPublicProfile,\n  getUserBadges,\n  type UserPublicProfile,\n} from '../Utils/GDevelopServices/User';\nimport { type Badge } from '../Utils/GDevelopServices/Badge';\nimport ProfileDetails from './ProfileDetails';\n\ntype Props = {|\n  userId: string,\n  onClose: () => void,\n|};\n\nconst PublicProfileDialog = ({ userId, onClose }: Props) => {\n  const [profile, setProfile] = React.useState<?UserPublicProfile>(null);\n  const [badges, setBadges] = React.useState<?(Badge[])>(null);\n  const [error, setError] = React.useState<?Error>(null);\n\n  const fetchProfile = React.useCallback(\n    async () => {\n      if (!userId) return;\n      setProfile(null);\n      try {\n        const profile = await getUserPublicProfile(userId);\n        setProfile(profile);\n      } catch (error) {\n        setError(error);\n      }\n    },\n    [userId]\n  );\n\n  const fetchUserBadges = React.useCallback(\n    async () => {\n      if (!userId) return;\n      setBadges(null);\n      try {\n        const badges = await getUserBadges(userId);\n        setBadges(badges);\n      } catch (error) {\n        setError(error);\n      }\n    },\n    [userId]\n  );\n\n  React.useEffect(\n    () => {\n      fetchProfile();\n      fetchUserBadges();\n    },\n    [userId, fetchProfile, fetchUserBadges]\n  );\n\n  const onRetry = () => {\n    setError(null);\n    fetchProfile();\n    fetchUserBadges();\n  };\n\n  return (\n    <Dialog\n      open={true}\n      maxWidth=\"sm\"\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary={false}\n          onClick={onClose}\n        />,\n      ]}\n    >\n      <ProfileDetails\n        profile={profile}\n        error={error}\n        onRetry={onRetry}\n        badges={badges}\n      />\n    </Dialog>\n  );\n};\n\nexport default PublicProfileDialog;\n","// @flow\n\nimport * as React from 'react';\n\nimport PublicProfileDialog from './PublicProfileDialog';\nimport PublicProfileContext, {\n  type PublicProfileState,\n} from './PublicProfileContext';\n\ntype Props = {|\n  children: React.Node,\n|};\n\nexport default ({ children }: Props) => {\n  const [\n    visitedPublicProfileUserId,\n    setVisitedPublicProfileUserId,\n  ] = React.useState<?string>(null);\n\n  const openUserPublicProfile = React.useCallback(\n    (userId: string): void => {\n      setVisitedPublicProfileUserId(userId);\n    },\n    [setVisitedPublicProfileUserId]\n  );\n\n  const closeUserPublicProfile = React.useCallback(\n    (): void => {\n      setVisitedPublicProfileUserId(null);\n    },\n    [setVisitedPublicProfileUserId]\n  );\n\n  const publicProfileState: PublicProfileState = React.useMemo(\n    () => ({\n      openUserPublicProfile: openUserPublicProfile,\n    }),\n    [openUserPublicProfile]\n  );\n\n  return (\n    <React.Fragment>\n      <PublicProfileContext.Provider value={publicProfileState}>\n        {children}\n      </PublicProfileContext.Provider>\n      {visitedPublicProfileUserId && (\n        <PublicProfileDialog\n          userId={visitedPublicProfileUserId}\n          onClose={closeUserPublicProfile}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n","// @flow\n\nimport * as React from 'react';\nimport PreferencesContext, {\n  initialPreferences,\n  type Preferences,\n  type AlertMessageIdentifier,\n} from './PreferencesContext';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { getIDEVersion } from '../../Version';\nimport {\n  type PreferencesValues,\n  type EditorMosaicName,\n} from './PreferencesContext';\nimport type { ResourceKind } from '../../ResourcesList/ResourceSource';\nimport { type EditorMosaicNode } from '../../UI/EditorMosaic';\nimport { type FileMetadataAndStorageProviderName } from '../../ProjectsStorage';\nimport defaultShortcuts from '../../KeyboardShortcuts/DefaultShortcuts';\nimport { type CommandName } from '../../CommandPalette/CommandsList';\nconst electron = optionalRequire('electron');\nconst ipcRenderer = electron ? electron.ipcRenderer : null;\n\ntype Props = {|\n  children: React.Node,\n  disableCheckForUpdates: boolean,\n|};\n\ntype State = Preferences;\n\nconst LocalStorageItem = 'gd-preferences';\nconst MAX_RECENT_FILES_COUNT = 20;\n\nexport default class PreferencesProvider extends React.Component<Props, State> {\n  state = {\n    values: this._loadValuesFromLocalStorage() || initialPreferences.values,\n    setLanguage: this._setLanguage.bind(this),\n    setThemeName: this._setThemeName.bind(this),\n    setCodeEditorThemeName: this._setCodeEditorThemeName.bind(this),\n    setAutoDownloadUpdates: this._setAutoDownloadUpdates.bind(this),\n    checkUpdates: this._checkUpdates.bind(this),\n    setAutoDisplayChangelog: this._setAutoDisplayChangelog.bind(this),\n    showAlertMessage: this._showAlertMessage.bind(this),\n    showAllAlertMessages: this._showAllAlertMessages.bind(this),\n    showTutorialHint: this._showTutorialHint.bind(this),\n    showAllTutorialHints: this._showAllTutorialHints.bind(this),\n    verifyIfIsNewVersion: this._verifyIfIsNewVersion.bind(this),\n    setEventsSheetShowObjectThumbnails: this._setEventsSheetShowObjectThumbnails.bind(\n      this\n    ),\n    setAutosaveOnPreview: this._setAutosaveOnPreview.bind(this),\n    setUseNewInstructionEditorDialog: this._setUseNewInstructionEditorDialog.bind(\n      this\n    ),\n    setUseUndefinedVariablesInAutocompletion: this._setUseUndefinedVariablesInAutocompletion.bind(\n      this\n    ),\n    setUseGDJSDevelopmentWatcher: this._setUseGDJSDevelopmentWatcher.bind(this),\n    setEventsSheetUseAssignmentOperators: this._setEventsSheetUseAssignmentOperators.bind(\n      this\n    ),\n    setEventsSheetZoomLevel: this._setEventsSheetZoomLevel.bind(this),\n    setShowEffectParameterNames: this._setShowEffectParameterNames.bind(this),\n    getLastUsedPath: this._getLastUsedPath.bind(this),\n    setLastUsedPath: this._setLastUsedPath.bind(this),\n    getDefaultEditorMosaicNode: this._getDefaultEditorMosaicNode.bind(this),\n    setDefaultEditorMosaicNode: this._setDefaultEditorMosaicNode.bind(this),\n    getRecentProjectFiles: this._getRecentProjectFiles.bind(this),\n    insertRecentProjectFile: this._insertRecentProjectFile.bind(this),\n    removeRecentProjectFile: this._removeRecentProjectFile.bind(this),\n    getAutoOpenMostRecentProject: this._getAutoOpenMostRecentProject.bind(this),\n    setAutoOpenMostRecentProject: this._setAutoOpenMostRecentProject.bind(this),\n    hadProjectOpenedDuringLastSession: this._hadProjectOpenedDuringLastSession.bind(\n      this\n    ),\n    setHasProjectOpened: this._setHasProjectOpened.bind(this),\n    setShortcutForCommand: this._setShortcutForCommand.bind(this),\n    resetShortcutsToDefault: this._resetShortcutsToDefault.bind(this),\n    getNewObjectDialogDefaultTab: this._getNewObjectDialogDefaultTab.bind(this),\n    setNewObjectDialogDefaultTab: this._setNewObjectDialogDefaultTab.bind(this),\n    getIsMenuBarHiddenInPreview: this._getIsMenuBarHiddenInPreview.bind(this),\n    setIsMenuBarHiddenInPreview: this._setIsMenuBarHiddenInPreview.bind(this),\n    setBackdropClickBehavior: this._setBackdropClickBehavior.bind(this),\n    getIsAlwaysOnTopInPreview: this._getIsAlwaysOnTopInPreview.bind(this),\n    setIsAlwaysOnTopInPreview: this._setIsAlwaysOnTopInPreview.bind(this),\n    setEventsSheetCancelInlineParameter: this._setEventsSheetCancelInlineParameter.bind(\n      this\n    ),\n  };\n\n  componentDidMount() {\n    setTimeout(() => this._checkUpdates(), 10000);\n  }\n\n  _setLanguage(language: string) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          language,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setEventsSheetShowObjectThumbnails(\n    eventsSheetShowObjectThumbnails: boolean\n  ) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          eventsSheetShowObjectThumbnails,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setAutosaveOnPreview(autosaveOnPreview: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autosaveOnPreview,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setUseNewInstructionEditorDialog(useNewInstructionEditorDialog: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          useNewInstructionEditorDialog,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setUseUndefinedVariablesInAutocompletion(\n    useUndefinedVariablesInAutocompletion: boolean\n  ) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          useUndefinedVariablesInAutocompletion,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setUseGDJSDevelopmentWatcher(useGDJSDevelopmentWatcher: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          useGDJSDevelopmentWatcher,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setEventsSheetUseAssignmentOperators(\n    eventsSheetUseAssignmentOperators: boolean\n  ) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          eventsSheetUseAssignmentOperators,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setEventsSheetZoomLevel(eventsSheetZoomLevel: number) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          eventsSheetZoomLevel,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setShowEffectParameterNames(showEffectParameterNames: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          showEffectParameterNames,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setThemeName(themeName: string) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          themeName,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setCodeEditorThemeName(codeEditorThemeName: string) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          codeEditorThemeName,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setAutoDownloadUpdates(autoDownloadUpdates: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autoDownloadUpdates,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setAutoDisplayChangelog(autoDisplayChangelog: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autoDisplayChangelog,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setEventsSheetCancelInlineParameter(\n    eventsSheetCancelInlineParameter: 'apply' | 'cancel'\n  ) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          eventsSheetCancelInlineParameter,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _checkUpdates(forceDownload?: boolean) {\n    // Checking for updates is only done on Electron.\n    // Note: This could be abstracted away later if other updates mechanisms\n    // should be supported.\n    const { disableCheckForUpdates } = this.props;\n    if (!ipcRenderer || disableCheckForUpdates) return;\n\n    if (!!forceDownload || this.state.values.autoDownloadUpdates) {\n      ipcRenderer.send('updates-check-and-download');\n    } else {\n      ipcRenderer.send('updates-check');\n    }\n  }\n\n  _verifyIfIsNewVersion() {\n    const currentVersion = getIDEVersion();\n    const { lastLaunchedVersion } = this.state.values;\n    if (lastLaunchedVersion === currentVersion) {\n      // This is not a new version\n      return false;\n    }\n\n    // This is a new version: store the version number\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          lastLaunchedVersion: currentVersion,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n\n    if (lastLaunchedVersion === undefined) {\n      // This is the first time GDevelop is launched, don't\n      // warn about this version being new.\n      return false;\n    }\n\n    return true;\n  }\n\n  _showAlertMessage(identifier: AlertMessageIdentifier, show: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          hiddenAlertMessages: {\n            ...state.values.hiddenAlertMessages,\n            // $FlowFixMe - Flow won't typecheck this because of https://medium.com/flow-type/spreads-common-errors-fixes-9701012e9d58\n            [identifier]: !show,\n          },\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _showAllAlertMessages() {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          hiddenAlertMessages: {},\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _showTutorialHint(identifier: string, show: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          hiddenTutorialHints: {\n            ...state.values.hiddenTutorialHints,\n            [identifier]: !show,\n          },\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _showAllTutorialHints() {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          hiddenTutorialHints: {},\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _loadValuesFromLocalStorage(): ?PreferencesValues {\n    try {\n      const persistedState = localStorage.getItem(LocalStorageItem);\n      if (!persistedState) return null;\n\n      const values = JSON.parse(persistedState);\n\n      // \"Migrate\" non existing properties to their default values\n      // (useful when upgrading the preferences to a new version where\n      // a new preference was added).\n      for (const key in initialPreferences.values) {\n        if (\n          initialPreferences.values.hasOwnProperty(key) &&\n          typeof values[key] === 'undefined'\n        ) {\n          values[key] = initialPreferences.values[key];\n        }\n      }\n\n      return values;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  _persistValuesToLocalStorage(preferences: Preferences) {\n    try {\n      localStorage.setItem(\n        LocalStorageItem,\n        JSON.stringify(preferences.values)\n      );\n    } catch (e) {\n      console.warn('Unable to persist preferences', e);\n    }\n\n    return preferences;\n  }\n\n  _getLastUsedPath(project: gdProject, kind: ResourceKind) {\n    const projectPath = project.getProjectFile();\n    const { values } = this.state;\n    const projectPaths = values.projectLastUsedPaths[projectPath];\n    if (projectPaths && projectPaths[kind]) {\n      return projectPaths[kind];\n    }\n    if (!projectPath) return null;\n  }\n\n  _setLastUsedPath(project: gdProject, kind: ResourceKind, latestPath: string) {\n    const projectPath = project.getProjectFile();\n\n    const { values } = this.state;\n    const newProjectLastUsedPaths =\n      values.projectLastUsedPaths[projectPath] || {};\n    newProjectLastUsedPaths[kind] = latestPath;\n\n    this.setState(\n      {\n        values: {\n          ...values,\n          projectLastUsedPaths: {\n            ...values.projectLastUsedPaths,\n            [projectPath]: newProjectLastUsedPaths,\n          },\n        },\n      },\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _getDefaultEditorMosaicNode(name: EditorMosaicName) {\n    return this.state.values.defaultEditorMosaicNodes[name] || null;\n  }\n\n  _setDefaultEditorMosaicNode(name: EditorMosaicName, node: ?EditorMosaicNode) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          defaultEditorMosaicNodes: {\n            ...state.values.defaultEditorMosaicNodes,\n            // $FlowFixMe - Flow errors on unions in computed properties\n            [name]: node,\n          },\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _getRecentProjectFiles() {\n    return this.state.values.recentProjectFiles;\n  }\n\n  _setRecentProjectFiles(recents: Array<FileMetadataAndStorageProviderName>) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          recentProjectFiles: recents,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _insertRecentProjectFile(newRecentFile: FileMetadataAndStorageProviderName) {\n    let recentProjectFiles = this._getRecentProjectFiles();\n    const isNotNewRecentFile = recentFile =>\n      JSON.stringify(recentFile) !== JSON.stringify(newRecentFile);\n    this._setRecentProjectFiles(\n      [newRecentFile, ...recentProjectFiles.filter(isNotNewRecentFile)].slice(\n        0,\n        MAX_RECENT_FILES_COUNT\n      )\n    );\n  }\n\n  _removeRecentProjectFile(recentFile: FileMetadataAndStorageProviderName) {\n    const isNotSadPathRecentFile = recentFileItem =>\n      JSON.stringify(recentFileItem) !== JSON.stringify(recentFile);\n    this._setRecentProjectFiles(\n      [...this._getRecentProjectFiles().filter(isNotSadPathRecentFile)].slice(\n        0,\n        MAX_RECENT_FILES_COUNT\n      )\n    );\n  }\n\n  _getAutoOpenMostRecentProject() {\n    return this.state.values.autoOpenMostRecentProject;\n  }\n\n  _setAutoOpenMostRecentProject(enabled: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          autoOpenMostRecentProject: enabled,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _hadProjectOpenedDuringLastSession() {\n    return this.state.values.hasProjectOpened;\n  }\n\n  _setHasProjectOpened(enabled: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          hasProjectOpened: enabled,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _resetShortcutsToDefault() {\n    this.setState(\n      state => ({\n        values: { ...state.values, userShortcutMap: {} },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setShortcutForCommand(commandName: CommandName, shortcutString: string) {\n    const defaultShortcut = defaultShortcuts[commandName] || '';\n    const setToDefault = defaultShortcut === shortcutString;\n\n    const updatedShortcutMap = { ...this.state.values.userShortcutMap };\n    if (setToDefault) delete updatedShortcutMap[commandName];\n    else updatedShortcutMap[commandName] = shortcutString;\n\n    this.setState(\n      state => ({\n        values: { ...state.values, userShortcutMap: updatedShortcutMap },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _getNewObjectDialogDefaultTab() {\n    return this.state.values.newObjectDialogDefaultTab;\n  }\n\n  _setNewObjectDialogDefaultTab(\n    newObjectDialogDefaultTab: 'asset-store' | 'new-object'\n  ) {\n    this.setState(\n      state => ({\n        values: { ...state.values, newObjectDialogDefaultTab },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _getIsMenuBarHiddenInPreview() {\n    return this.state.values.isMenuBarHiddenInPreview;\n  }\n\n  _setIsMenuBarHiddenInPreview(enabled: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          isMenuBarHiddenInPreview: enabled,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _setBackdropClickBehavior(\n    backdropClickBehavior: 'nothing' | 'apply' | 'cancel'\n  ) {\n    this.setState(\n      state => ({\n        values: { ...state.values, backdropClickBehavior },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  _getIsAlwaysOnTopInPreview() {\n    return this.state.values.isAlwaysOnTopInPreview;\n  }\n\n  _setIsAlwaysOnTopInPreview(enabled: boolean) {\n    this.setState(\n      state => ({\n        values: {\n          ...state.values,\n          isAlwaysOnTopInPreview: enabled,\n        },\n      }),\n      () => this._persistValuesToLocalStorage(this.state)\n    );\n  }\n\n  render() {\n    return (\n      <PreferencesContext.Provider value={this.state}>\n        {this.props.children}\n      </PreferencesContext.Provider>\n    );\n  }\n}\n","// @flow\n\nimport * as React from 'react';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from './EventsFunctionsExtensionsContext';\nimport {\n  loadProjectEventsFunctionsExtensions,\n  type IncludeFileContent,\n  type EventsFunctionCodeWriterCallbacks,\n  type EventsFunctionCodeWriter,\n  unloadProjectEventsFunctionsExtensions,\n  unloadProjectEventsFunctionsExtension,\n} from '.';\nimport {\n  type EventsFunctionsExtensionWriter,\n  type EventsFunctionsExtensionOpener,\n} from './Storage';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport xxhashjs from 'xxhashjs';\n\ntype Props = {|\n  children: React.Node,\n  i18n: I18nType,\n  makeEventsFunctionCodeWriter: EventsFunctionCodeWriterCallbacks => ?EventsFunctionCodeWriter,\n  eventsFunctionsExtensionWriter: ?EventsFunctionsExtensionWriter,\n  eventsFunctionsExtensionOpener: ?EventsFunctionsExtensionOpener,\n|};\n\ntype State = EventsFunctionsExtensionsState;\n\n/**\n * Allow children components to request the loading (or unloading) of\n * the events functions extensions of the project.\n * Useful when dealing with events functions extensions (new extension created,\n * removed, pasted, installed, etc...).\n */\nexport default class EventsFunctionsExtensionsProvider extends React.Component<\n  Props,\n  State\n> {\n  _eventsFunctionCodeWriter: ?EventsFunctionCodeWriter = this.props.makeEventsFunctionCodeWriter(\n    {\n      onWriteFile: this._onWriteFile.bind(this),\n    }\n  );\n  _includeFileHashs: { [string]: number } = {};\n  _lastLoadPromise: ?Promise<void> = null;\n  state = {\n    eventsFunctionsExtensionsError: null,\n    loadProjectEventsFunctionsExtensions: this._loadProjectEventsFunctionsExtensions.bind(\n      this\n    ),\n    unloadProjectEventsFunctionsExtensions: this._unloadProjectEventsFunctionsExtensions.bind(\n      this\n    ),\n    unloadProjectEventsFunctionsExtension: this._unloadProjectEventsFunctionsExtension.bind(\n      this\n    ),\n    reloadProjectEventsFunctionsExtensions: this._reloadProjectEventsFunctionsExtensions.bind(\n      this\n    ),\n    ensureLoadFinished: this._ensureLoadFinished.bind(this),\n    getEventsFunctionsExtensionWriter: () =>\n      this.props.eventsFunctionsExtensionWriter,\n    getEventsFunctionsExtensionOpener: () =>\n      this.props.eventsFunctionsExtensionOpener,\n    getIncludeFileHashs: () => this._includeFileHashs,\n  };\n\n  _onWriteFile({ includeFile, content }: IncludeFileContent) {\n    this._includeFileHashs[includeFile] = xxhashjs\n      .h32(content, 0xabcd)\n      .toNumber();\n  }\n\n  _ensureLoadFinished(): Promise<void> {\n    if (this._lastLoadPromise) {\n      console.info(\n        'Waiting on the events functions extensions to finish loading...'\n      );\n    } else {\n      console.info('Events functions extensions are ready.');\n    }\n\n    return this._lastLoadPromise\n      ? this._lastLoadPromise.then(() => {\n          console.info('Events functions extensions finished loading.');\n        })\n      : Promise.resolve();\n  }\n\n  _loadProjectEventsFunctionsExtensions(project: ?gdProject): Promise<void> {\n    const { i18n } = this.props;\n    const eventsFunctionCodeWriter = this._eventsFunctionCodeWriter;\n    if (!project || !eventsFunctionCodeWriter) return Promise.resolve();\n\n    const lastLoadPromise = this._lastLoadPromise || Promise.resolve();\n\n    this._lastLoadPromise = lastLoadPromise\n      .then(() =>\n        loadProjectEventsFunctionsExtensions(\n          project,\n          eventsFunctionCodeWriter,\n          i18n\n        )\n      )\n      .then(() =>\n        this.setState({\n          eventsFunctionsExtensionsError: null,\n        })\n      )\n      .catch((eventsFunctionsExtensionsError: Error) => {\n        this.setState({\n          eventsFunctionsExtensionsError,\n        });\n        showErrorBox({\n          message: i18n._(\n            t`An error has occured during functions generation. If GDevelop is installed, verify that nothing is preventing GDevelop from writing on disk. If you're running GDevelop online, verify your internet connection and refresh functions from the Project Manager.`\n          ),\n          rawError: eventsFunctionsExtensionsError,\n          errorId: 'events-functions-extensions-load-error',\n        });\n      })\n      .then(() => {\n        this._lastLoadPromise = null;\n      });\n\n    return this._lastLoadPromise;\n  }\n\n  _unloadProjectEventsFunctionsExtensions(project: gdProject) {\n    unloadProjectEventsFunctionsExtensions(project);\n  }\n\n  _unloadProjectEventsFunctionsExtension(\n    project: gdProject,\n    extensionName: string\n  ) {\n    unloadProjectEventsFunctionsExtension(project, extensionName);\n  }\n\n  _reloadProjectEventsFunctionsExtensions(project: ?gdProject): Promise<void> {\n    if (project) {\n      this._unloadProjectEventsFunctionsExtensions(project);\n    }\n    return this._loadProjectEventsFunctionsExtensions(project);\n  }\n\n  render() {\n    return (\n      <EventsFunctionsExtensionsContext.Provider value={this.state}>\n        {this.props.children}\n      </EventsFunctionsExtensionsContext.Provider>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport DragAndDropContextProvider from '../UI/DragAndDrop/DragAndDropContextProvider';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { StylesProvider, jssPreset } from '@material-ui/core/styles';\nimport { getTheme } from '../UI/Theme';\nimport AuthenticatedUserProvider from '../Profile/AuthenticatedUserProvider';\nimport PublicProfileProvider from '../Profile/PublicProfileProvider';\nimport Authentication from '../Utils/GDevelopServices/Authentication';\nimport PreferencesProvider from './Preferences/PreferencesProvider';\nimport PreferencesContext from './Preferences/PreferencesContext';\nimport GDI18nProvider from '../Utils/i18n/GDI18nProvider';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport EventsFunctionsExtensionsProvider from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsProvider';\nimport {\n  type EventsFunctionCodeWriter,\n  type EventsFunctionCodeWriterCallbacks,\n} from '../EventsFunctionsExtensionsLoader';\nimport {\n  type EventsFunctionsExtensionWriter,\n  type EventsFunctionsExtensionOpener,\n} from '../EventsFunctionsExtensionsLoader/Storage';\nimport GDevelopThemeContext from '../UI/Theme/ThemeContext';\nimport { UnsavedChangesContextProvider } from './UnsavedChangesContext';\nimport { CommandsContextProvider } from '../CommandPalette/CommandsContext';\nimport { create } from 'jss';\nimport rtl from 'jss-rtl';\nimport { AssetStoreStateProvider } from '../AssetStore/AssetStoreContext';\nimport { ResourceStoreStateProvider } from '../AssetStore/ResourceStore/ResourceStoreContext';\nimport { ExampleStoreStateProvider } from '../AssetStore/ExampleStore/ExampleStoreContext';\nimport { ExtensionStoreStateProvider } from '../AssetStore/ExtensionStore/ExtensionStoreContext';\nimport {\n  type ResourceFetcher,\n  ResourceFetcherContext,\n} from '../ProjectsStorage/ResourceFetcher';\nimport { GamesShowcaseStateProvider } from '../GamesShowcase/GamesShowcaseContext';\nimport { TutorialStateProvider } from '../Tutorial/TutorialContext';\n\n// Add the rtl plugin to the JSS instance to support RTL languages in material-ui components.\nconst jss = create({\n  plugins: [...jssPreset().plugins, rtl()],\n});\n\ntype Props = {|\n  authentication: Authentication,\n  disableCheckForUpdates: boolean,\n  makeEventsFunctionCodeWriter: EventsFunctionCodeWriterCallbacks => ?EventsFunctionCodeWriter,\n  eventsFunctionsExtensionWriter: ?EventsFunctionsExtensionWriter,\n  eventsFunctionsExtensionOpener: ?EventsFunctionsExtensionOpener,\n  resourceFetcher: ResourceFetcher,\n  children: ({|\n    i18n: I18nType,\n  |}) => React.Node,\n|};\n\n/**\n * Wrap the children with Drag and Drop, Material UI theme and i18n React providers,\n * so that these modules can be used in the children.\n */\nexport default class Providers extends React.Component<Props, {||}> {\n  render() {\n    const {\n      disableCheckForUpdates,\n      authentication,\n      children,\n      makeEventsFunctionCodeWriter,\n      eventsFunctionsExtensionWriter,\n      eventsFunctionsExtensionOpener,\n      resourceFetcher,\n    } = this.props;\n    return (\n      <DragAndDropContextProvider>\n        <UnsavedChangesContextProvider>\n          <PreferencesProvider disableCheckForUpdates={disableCheckForUpdates}>\n            <PreferencesContext.Consumer>\n              {({ values }) => {\n                const theme = getTheme({\n                  themeName: values.themeName,\n                  language: values.language,\n                });\n                return (\n                  <GDI18nProvider language={values.language.replace('_', '-')}>\n                    <GDevelopThemeContext.Provider value={theme.gdevelopTheme}>\n                      <StylesProvider jss={jss}>\n                        <ThemeProvider theme={theme.muiTheme}>\n                          <AuthenticatedUserProvider\n                            authentication={authentication}\n                          >\n                            <PublicProfileProvider>\n                              <I18n update>\n                                {({ i18n }) => (\n                                  <EventsFunctionsExtensionsProvider\n                                    i18n={i18n}\n                                    makeEventsFunctionCodeWriter={\n                                      makeEventsFunctionCodeWriter\n                                    }\n                                    eventsFunctionsExtensionWriter={\n                                      eventsFunctionsExtensionWriter\n                                    }\n                                    eventsFunctionsExtensionOpener={\n                                      eventsFunctionsExtensionOpener\n                                    }\n                                  >\n                                    <CommandsContextProvider>\n                                      <AssetStoreStateProvider>\n                                        <ResourceStoreStateProvider>\n                                          <ExampleStoreStateProvider>\n                                            <ExtensionStoreStateProvider>\n                                              <GamesShowcaseStateProvider>\n                                                <TutorialStateProvider>\n                                                  <ResourceFetcherContext.Provider\n                                                    value={resourceFetcher}\n                                                  >\n                                                    {children({ i18n })}\n                                                  </ResourceFetcherContext.Provider>\n                                                </TutorialStateProvider>\n                                              </GamesShowcaseStateProvider>\n                                            </ExtensionStoreStateProvider>\n                                          </ExampleStoreStateProvider>\n                                        </ResourceStoreStateProvider>\n                                      </AssetStoreStateProvider>\n                                    </CommandsContextProvider>\n                                  </EventsFunctionsExtensionsProvider>\n                                )}\n                              </I18n>\n                            </PublicProfileProvider>\n                          </AuthenticatedUserProvider>\n                        </ThemeProvider>\n                      </StylesProvider>\n                    </GDevelopThemeContext.Provider>\n                  </GDI18nProvider>\n                );\n              }}\n            </PreferencesContext.Consumer>\n          </PreferencesProvider>\n        </UnsavedChangesContextProvider>\n      </DragAndDropContextProvider>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\n\ntype Props = {|\n  onPlay: () => void,\n  canPlay: boolean,\n  onPause: () => void,\n  canPause: boolean,\n  onOpenProfiler: () => void,\n  canOpenProfiler: boolean,\n  onOpenConsole: () => void,\n  canOpenConsole: boolean,\n|};\n\nexport class Toolbar extends React.PureComponent<Props> {\n  render() {\n    const {\n      onPlay,\n      onPause,\n      canPlay,\n      canPause,\n      onOpenProfiler,\n      canOpenProfiler,\n      onOpenConsole,\n      canOpenConsole,\n    } = this.props;\n\n    return (\n      <ToolbarGroup lastChild>\n        <ToolbarIcon\n          onClick={onPlay}\n          src=\"res/ribbon_default/preview64.png\"\n          disabled={!canPlay}\n          tooltip={t`Play the game`}\n        />\n        <ToolbarIcon\n          onClick={onPause}\n          src=\"res/ribbon_default/pause64.png\"\n          disabled={!canPause}\n          tooltip={t`Pause the game`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={onOpenProfiler}\n          src=\"res/ribbon_default/profiler32.png\"\n          disabled={!canOpenProfiler}\n          tooltip={t`Open the performance profiler`}\n        />\n        <ToolbarIcon\n          onClick={onOpenConsole}\n          src=\"res/ribbon_default/source_cpp32.png\"\n          disabled={!canOpenConsole}\n          tooltip={t`Open the console`}\n        />\n      </ToolbarGroup>\n    );\n  }\n}\n\nexport default Toolbar;\n","// @flow\nimport * as React from 'react';\nimport { List, ListItem } from '../UI/List';\nimport get from 'lodash/get';\nimport {\n  type InspectorDescription,\n  type InspectorDescriptionsGetter,\n  type GameData,\n} from './GDJSInspectorDescriptions';\n\ntype Props = {|\n  gameData: GameData,\n  getInspectorDescriptions: InspectorDescriptionsGetter,\n  onChooseInspector: (\n    InspectorDescription,\n    fullInspectorPath: Array<string>\n  ) => void,\n|};\n\nconst styles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n  },\n  list: {\n    overflowY: 'scroll',\n    flex: 1,\n  },\n};\n\n/**\n * Generate a visual list of inspectors, using gameData and getInspectorDescriptions\n */\nexport default class InspectorsList extends React.Component<Props, void> {\n  _renderInspectorList(\n    gameData: GameData,\n    getInspectorDescriptions: InspectorDescriptionsGetter,\n    path: Array<string>\n  ): Array<React$Element<any> | null> {\n    return getInspectorDescriptions(gameData).map(inspectorDescription => {\n      if (!inspectorDescription) return null;\n      const fullInspectorPath = path.concat(inspectorDescription.key);\n\n      const getSubInspectors = inspectorDescription.getSubInspectors;\n\n      return (\n        <ListItem\n          key={fullInspectorPath.join('.')}\n          primaryText={inspectorDescription.label}\n          initiallyOpen={!!inspectorDescription.initiallyOpen}\n          onClick={() =>\n            this.props.onChooseInspector(\n              inspectorDescription,\n              fullInspectorPath\n            )\n          }\n          renderNestedItems={\n            getSubInspectors\n              ? () =>\n                  this._renderInspectorList(\n                    get(gameData, inspectorDescription.key, null),\n                    getSubInspectors,\n                    fullInspectorPath\n                  )\n              : undefined\n          }\n        />\n      );\n    });\n  }\n\n  render() {\n    return this.props.gameData ? (\n      <List style={styles.list}>\n        {this._renderInspectorList(\n          this.props.gameData,\n          this.props.getInspectorDescriptions,\n          []\n        )}\n      </List>\n    ) : null;\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  type EditFunction,\n  type CallFunction,\n} from '../GDJSInspectorDescriptions';\nimport mapValues from 'lodash/mapValues';\n\n// This mirrors the internals of gdjs.Variable.\ntype Variable = {|\n  _type: 'string' | 'number' | 'boolean' | 'structure' | 'array',\n  _str: string,\n  _value: number,\n  _bool: boolean,\n  _children: { [string]: Variable },\n  _childrenArray: Array<Variable>,\n|};\n\n// This mirrors the internals of gdjs.VariablesContainer.\ntype VariablesContainer = {|\n  _variables: { items: { [string]: Variable } },\n|};\n\nconst transformVariable = (variable: Variable) => {\n  if (!variable) return null;\n\n  const transformedVariable: any = {\n    type: variable._type,\n    value: null,\n  };\n\n  if (variable._type === 'string') transformedVariable.value = variable._str;\n  else if (variable._type === 'number')\n    transformedVariable.value = variable._value;\n  else if (variable._type === 'boolean')\n    transformedVariable.value = variable._bool;\n  else if (variable._type === 'structure')\n    transformedVariable.value = mapValues(\n      variable._children,\n      transformVariable\n    );\n  else if (variable._type === 'array')\n    transformedVariable.value = variable._childrenArray.map(transformVariable);\n\n  return transformedVariable;\n};\n\nconst transform = (variablesContainer: VariablesContainer) => {\n  if (\n    !variablesContainer ||\n    !variablesContainer._variables ||\n    !variablesContainer._variables.items\n  )\n    return null;\n\n  return mapValues(variablesContainer._variables.items, transformVariable);\n};\n\n/**\n * Returns the list of properties to access the variable at the specified path in the specified variables container.\n * Also returns the variable already living there.\n */\nconst constructPathToVariable = (\n  editPath: Array<string>,\n  variablesContainer: VariablesContainer\n): {| path: ?Array<string>, variable: ?Variable |} => {\n  const variableInContainerName = editPath.shift();\n  const path = ['_variables', 'items', variableInContainerName];\n  let variable = variablesContainer._variables.items[variableInContainerName];\n  let skip = false;\n\n  for (const variableName of editPath) {\n    // Skip every second key as it is the \"value\"\n    // key which is displayed only for better user\n    // experience but doesn't really exists\n    skip = !skip;\n    if (skip) continue;\n\n    // Walk down in the children of the collection.\n    if (variable._type === 'structure') {\n      path.push('_children', variableName);\n      variable = variable._children[variableName];\n    } else if (variable._type === 'array') {\n      path.push('_childrenArray', variableName);\n      variable = variable._childrenArray[parseInt(variableName, 10)];\n    }\n    // Bad path: abort.\n    else return { path: null, variable: null };\n  }\n\n  return { path, variable };\n};\n\nconst handleEdit = (edit, { onCall, onEdit, variablesContainer }: Props) => {\n  if (!variablesContainer) return;\n\n  // Reconstruct the variable to edit from the path\n  const { path, variable } = constructPathToVariable(\n    edit.namespace,\n    variablesContainer\n  );\n  if (!path) {\n    console.error('Invalid path passed to the debugger: ', edit);\n    return false;\n  }\n  if (!variable) {\n    console.error(\"Variable doesn't exist: \", edit);\n    return false;\n  }\n\n  if (edit.name === 'type') {\n    path.push('castTo');\n    if (\n      edit.new_value === 'string' ||\n      edit.new_value === 'number' ||\n      edit.new_value === 'boolean' ||\n      edit.new_value === 'structure' ||\n      edit.new_value === 'array'\n    ) {\n      if (edit.new_value !== variable._type) onCall(path, [edit.new_value]);\n    } else {\n      console.error('Invalid type name: ' + edit.new_value);\n      return false;\n    }\n  } else if (edit.name === 'value') {\n    // Validate data type\n    if (variable._type === 'string' && typeof edit.new_value !== 'string')\n      edit.new_value = '' + edit.new_value;\n    else if (\n      variable._type === 'number' &&\n      typeof edit.new_value !== 'number'\n    ) {\n      edit.new_value = parseFloat(edit.new_value);\n      if (isNaN(edit.new_value)) {\n        console.error(`Cannot set variable of type number to NaN!`);\n        return false;\n      }\n    } else if (\n      variable._type === 'boolean' &&\n      typeof edit.new_value !== 'boolean'\n    )\n      edit.new_value =\n        typeof edit.new_value === 'string'\n          ? edit.new_value.toLowerCase() !== 'false' && edit.new_value !== '0'\n          : !!edit.new_value;\n    else if (variable._type === 'structure' || variable._type === 'array') {\n      console.error('Cannot set the value of a collection.');\n      return false;\n    }\n\n    path.push('setValue');\n    onCall(path, [edit.new_value]);\n  }\n\n  return true;\n};\n\ntype Props = {|\n  variablesContainer: ?VariablesContainer,\n  onCall: CallFunction,\n  onEdit: EditFunction,\n|};\n\nexport default (props: Props) => (\n  <ReactJsonView\n    collapsed={false}\n    name={false}\n    src={props.variablesContainer ? transform(props.variablesContainer) : null}\n    enableClipboard={false}\n    displayDataTypes={false}\n    displayObjectSize={false}\n    onEdit={edit => handleEdit(edit, props)}\n    groupArraysAfterLength={50}\n    theme=\"monokai\"\n    validationMessage=\"Invalid value\"\n  />\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  type GameData,\n  type EditFunction,\n  type CallFunction,\n} from '../GDJSInspectorDescriptions';\nimport VariablesContainerInspector from './VariablesContainerInspector';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  runtimeObject: GameData,\n  onCall: CallFunction,\n  onEdit: EditFunction,\n|};\n\nconst transform = runtimeObject => {\n  if (!runtimeObject) return null;\n  return {\n    'X position': runtimeObject.x,\n    'Y position': runtimeObject.y,\n    Angle: runtimeObject.angle,\n    Layer: runtimeObject.layer,\n    'Z order': runtimeObject.zOrder,\n    'Is hidden?': runtimeObject.hidden,\n  };\n};\n\nconst handleEdit = (edit, { onCall, onEdit }: Props) => {\n  if (edit.name === 'X position') {\n    onCall(['setX'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Y position') {\n    onCall(['setY'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Angle') {\n    onCall(['setAngle'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Layer') {\n    onCall(['setLayer'], [edit.new_value]);\n  } else if (edit.name === 'Z order') {\n    onCall(['setZOrder'], [parseFloat(edit.new_value)]);\n  } else if (edit.name === 'Is hidden?') {\n    onCall(['hide'], [!!edit.new_value]);\n  } else return false;\n\n  return true;\n};\n\nexport default (props: Props) => (\n  <React.Fragment>\n    <Text>\n      <Trans>General:</Trans>\n    </Text>\n    <ReactJsonView\n      collapsed={false}\n      name={false}\n      src={transform(props.runtimeObject)}\n      enableClipboard={false}\n      displayDataTypes={false}\n      displayObjectSize={false}\n      onEdit={edit => handleEdit(edit, props)}\n      groupArraysAfterLength={50}\n      theme=\"monokai\"\n    />\n    <Text>\n      <Trans>Instance variables:</Trans>\n    </Text>\n    <VariablesContainerInspector\n      variablesContainer={\n        props.runtimeObject ? props.runtimeObject._variables : null\n      }\n      // TODO: onEdit and onCall could benefit from a \"forward\" utility function\n      // (can also be applied in DebuggerContent.js)\n      onEdit={(path, newValue) =>\n        props.onEdit(['_variables'].concat(path), newValue)\n      }\n      onCall={(path, args) => props.onCall(['_variables'].concat(path), args)}\n    />\n  </React.Fragment>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport {\n  type GameData,\n  type EditFunction,\n  type CallFunction,\n} from '../GDJSInspectorDescriptions';\nimport { TextFieldWithButtonLayout } from '../../UI/Layout';\nimport mapValues from 'lodash/mapValues';\nimport RaisedButton from '../../UI/RaisedButton';\nimport SemiControlledAutoComplete from '../../UI/SemiControlledAutoComplete';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  runtimeScene: GameData,\n  onCall: CallFunction,\n  onEdit: EditFunction,\n|};\n\ntype State = {|\n  newObjectName: string,\n|};\n\nconst transformLayer = layer => {\n  if (!layer) return null;\n  return {\n    'Camera rotation (in deg)': layer._cameraRotation,\n    'Camera zoom': layer._zoomFactor,\n    'Layer is hidden': !!layer._hidden,\n    'Camera X position': layer._cameraX,\n    'Camera Y position': layer._cameraY,\n    'Time scale': layer._timeScale,\n  };\n};\n\nconst transform = runtimeScene => {\n  if (!runtimeScene) return null;\n\n  return {\n    'Time scale': runtimeScene._timeManager\n      ? runtimeScene._timeManager._timeScale\n      : null,\n    Layers:\n      runtimeScene._layers && runtimeScene._layers.items\n        ? mapValues(runtimeScene._layers.items, transformLayer)\n        : null,\n  };\n};\n\nconst handleEdit = (edit, { onCall, onEdit }: Props) => {\n  if (edit.namespace.length === 0 && edit.name === 'Time scale') {\n    onCall(['_timeManager', 'setTimeScale'], [parseFloat(edit.new_value)]);\n  } else if (edit.namespace.length >= 2) {\n    if (edit.namespace[0] === 'Layers') {\n      if (edit.name === 'Camera rotation (in deg)') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraRotation'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Camera zoom') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraZoom'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Layer is hidden') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'show'],\n          [!edit.new_value]\n        );\n      } else if (edit.name === 'Camera X position') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraX'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Camera Y position') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setCameraY'],\n          [parseFloat(edit.new_value)]\n        );\n      } else if (edit.name === 'Time scale') {\n        onCall(\n          ['_layers', 'items', edit.namespace[1], 'setTimeScale'],\n          [parseFloat(edit.new_value)]\n        );\n      }\n    }\n  } else return false;\n\n  return true;\n};\n\nexport default class RuntimeSceneInspector extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    newObjectName: '',\n  };\n\n  render() {\n    const { runtimeScene, onCall } = this.props;\n    if (!runtimeScene) return null;\n\n    return (\n      <React.Fragment>\n        <Text>\n          <Trans>Layers:</Trans>\n        </Text>\n        <ReactJsonView\n          collapsed={false}\n          name={false}\n          src={transform(runtimeScene)}\n          enableClipboard={false}\n          displayDataTypes={false}\n          displayObjectSize={false}\n          onEdit={edit => handleEdit(edit, this.props)}\n          groupArraysAfterLength={50}\n          theme=\"monokai\"\n        />\n        <Text>\n          <Trans>\n            Create a new instance on the scene (will be at position 0;0):\n          </Trans>\n        </Text>\n        {runtimeScene._objects && runtimeScene._objects.items && (\n          <TextFieldWithButtonLayout\n            noFloatingLabelText\n            renderTextField={() => (\n              <SemiControlledAutoComplete\n                hintText={t`Enter the name of the object`}\n                value={this.state.newObjectName}\n                onChange={value => {\n                  this.setState({\n                    newObjectName: value,\n                  });\n                }}\n                dataSource={Object.keys(runtimeScene._objects.items).map(\n                  objectName => ({\n                    text: objectName,\n                    value: objectName,\n                  })\n                )}\n                openOnFocus\n                fullWidth\n              />\n            )}\n            renderButton={style => (\n              <RaisedButton\n                style={style}\n                label={<Trans>Create</Trans>}\n                primary\n                onClick={() => {\n                  onCall(['createObject'], [this.state.newObjectName]);\n                }}\n              />\n            )}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport RuntimeObjectInspector from './Inspectors/RuntimeObjectInspector';\nimport VariablesContainerInspector from './Inspectors/VariablesContainerInspector';\nimport RuntimeSceneInspector from './Inspectors/RuntimeSceneInspector';\n\nexport type GameData = any;\nexport type EditFunction = (path: Array<string>, newValue: any) => boolean;\nexport type CallFunction = (path: Array<string>, args: Array<any>) => boolean;\n\nexport type InspectorDescriptionsGetter = (\n  gameData: GameData\n) => Array<InspectorDescription>; //eslint-disable-line\n\nexport type InspectorDescription = {|\n  label: string,\n  key: string | Array<string>,\n  renderInspector: (\n    gameData: GameData,\n    {\n      onCall: CallFunction,\n      onEdit: EditFunction,\n    }\n  ) => React.Node,\n  getSubInspectors?: InspectorDescriptionsGetter,\n  initiallyOpen?: boolean,\n|};\n\n/**\n * Returns the list of inspectors, given the data coming from a GDJS RuntimeGame.\n * @param {*} gdjsRuntimeGame\n */\nexport const getInspectorDescriptions = (\n  gdjsRuntimeGame: GameData\n): Array<InspectorDescription> => {\n  return [\n    {\n      label: 'Global variables',\n      key: '_variables',\n      renderInspector: (gameData, { onCall, onEdit }) => (\n        <VariablesContainerInspector\n          variablesContainer={gameData}\n          onCall={onCall}\n          onEdit={onEdit}\n        />\n      ),\n    },\n    {\n      label: 'Scenes',\n      key: ['_sceneStack', '_stack'],\n      renderInspector: () => null,\n      initiallyOpen: true,\n      getSubInspectors: gdjsStack => {\n        if (!gdjsStack) return [];\n\n        return gdjsStack.map((runtimeScene, index) => ({\n          label: runtimeScene._name,\n          key: index,\n          renderInspector: (gameData, { onCall, onEdit }) => (\n            <RuntimeSceneInspector\n              runtimeScene={gameData}\n              onCall={onCall}\n              onEdit={onEdit}\n            />\n          ),\n          initiallyOpen: true,\n          getSubInspectors: runtimeScene => [\n            {\n              label: 'Scene variables',\n              key: `_variables`,\n              renderInspector: (gameData, { onCall, onEdit }) => (\n                <VariablesContainerInspector\n                  variablesContainer={gameData}\n                  onCall={onCall}\n                  onEdit={onEdit}\n                />\n              ),\n            },\n            {\n              label: 'Instances',\n              key: `_instances`,\n              renderInspector: () => null,\n              initiallyOpen: true,\n              getSubInspectors: instances => {\n                if (!instances || !instances.items) return [];\n\n                return Object.keys(instances.items).map(objectName => {\n                  if (\n                    !instances.items[objectName] ||\n                    typeof instances.items[objectName].length === undefined\n                  )\n                    return null;\n\n                  return {\n                    label: `${objectName} (${\n                      instances.items[objectName].length\n                    })`,\n                    key: ['items', objectName],\n                    renderInspector: () => null,\n                    getSubInspectors: instancesList =>\n                      instancesList\n                        ? instancesList\n                            .filter(runtimeObject => !!runtimeObject)\n                            .map((runtimeObject, index) => {\n                              return {\n                                label: `#${runtimeObject.id}`,\n                                key: index,\n                                renderInspector: (\n                                  gameData,\n                                  { onCall, onEdit }\n                                ) => (\n                                  <RuntimeObjectInspector\n                                    runtimeObject={gameData}\n                                    onCall={onCall}\n                                    onEdit={onEdit}\n                                  />\n                                ),\n                              };\n                            })\n                        : [],\n                  };\n                });\n              },\n            },\n          ],\n        }));\n      },\n    },\n  ];\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ReactJsonView from 'react-json-view';\nimport { type GameData } from '../GDJSInspectorDescriptions';\nimport EmptyMessage from '../../UI/EmptyMessage';\n\ntype Props = {|\n  gameData: GameData,\n  onEdit: (path: Array<string>, newValue: any) => boolean,\n|};\n\n/**\n * A very simple inspector that display the raw information given by the gameData\n * object.\n */\nexport default ({ gameData, onEdit }: Props) => (\n  <React.Fragment>\n    <EmptyMessage>\n      <Trans>\n        You are in raw mode. You can edit the fields, but be aware that this can\n        lead to unexpected results or even crash the debugged game!\n      </Trans>\n    </EmptyMessage>\n    <ReactJsonView\n      collapsed={1}\n      name={false}\n      src={gameData}\n      onEdit={edit => {\n        return onEdit(edit.namespace.concat(edit.name), edit.new_value);\n      }}\n      groupArraysAfterLength={50}\n      theme=\"monokai\"\n    />\n  </React.Fragment>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer, Table, Column } from 'react-virtualized';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport flatMap from 'lodash/flatMap';\nimport { type ProfilerMeasuresSection } from '..';\nimport IconButton from '../../UI/IconButton';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\n\nconst styles = {\n  indent: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n};\n\ntype Props = {|\n  profilerMeasures: ?ProfilerMeasuresSection,\n|};\n\ntype ProfilerRowData = {|\n  name: string,\n  time: string,\n  parentPercent: string,\n  totalPercent: string,\n  depth: number,\n  hasSubsections: boolean,\n  path: string,\n  isCollapsed: boolean,\n|};\n\ntype State = {|\n  collapsedPaths: { [string]: boolean },\n|};\n\nexport default class MeasuresTable extends React.Component<Props, State> {\n  state = {\n    collapsedPaths: {},\n  };\n\n  _convertToDataRows = (\n    name: string,\n    parentSection: ?ProfilerMeasuresSection,\n    section: ProfilerMeasuresSection,\n    depth: number = 0,\n    path: string = ''\n  ): Array<ProfilerRowData> => {\n    const { profilerMeasures } = this.props;\n\n    const parentPercent =\n      parentSection && section.time && parentSection.time !== 0\n        ? (section.time / parentSection.time) * 100\n        : 100;\n    const totalPercent =\n      profilerMeasures && section.time && profilerMeasures.time !== 0\n        ? (section.time / profilerMeasures.time) * 100\n        : 100;\n    const isCollapsed = this._isSectionCollapsed(path);\n\n    return [\n      {\n        name,\n        time: section.time ? `${section.time.toFixed(2)}ms` : '?',\n        parentPercent: `${parentPercent.toFixed(2)}%`,\n        totalPercent: `${totalPercent.toFixed(2)}%`,\n        depth,\n        hasSubsections: !!Object.keys(section.subsections).length,\n        path,\n        isCollapsed,\n      },\n      ...(isCollapsed\n        ? []\n        : flatMap(section.subsections, (subsection, subsectionName) =>\n            this._convertToDataRows(\n              subsectionName,\n              section,\n              subsection,\n              depth + 1,\n              `${path}>${depth}.${subsectionName}`\n            )\n          )),\n    ];\n  };\n\n  _isSectionCollapsed = (path: string) => {\n    return this.state.collapsedPaths[path];\n  };\n\n  _toggleSection = (path: string) => {\n    this.setState(state => ({\n      collapsedPaths: {\n        ...state.collapsedPaths,\n        [path]: !state.collapsedPaths[path],\n      },\n    }));\n  };\n\n  _rowClassName = ({ index }: { index: number }) => {\n    if (index < 0) {\n      return 'tableHeaderRow';\n    } else {\n      return index % 2 === 0 ? 'tableEvenRow' : 'tableOddRow';\n    }\n  };\n\n  _renderSectionNameCell = ({ rowData }: { rowData: ProfilerRowData }) => {\n    return (\n      <div style={styles.indent}>\n        <div style={{ width: rowData.depth * 8 }} />\n        {rowData.hasSubsections ? (\n          <IconButton onClick={() => this._toggleSection(rowData.path)}>\n            {rowData.isCollapsed ? <ChevronRight /> : <ExpandMore />}\n          </IconButton>\n        ) : (\n          <div style={{ width: 24 }} />\n        )}\n        {rowData.name}\n      </div>\n    );\n  };\n\n  render() {\n    const { profilerMeasures } = this.props;\n    if (!profilerMeasures) return null;\n\n    const dataRows = this._convertToDataRows('All', null, profilerMeasures);\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <AutoSizer>\n            {({ height, width }) => (\n              <Table\n                headerHeight={30}\n                height={height}\n                className={`gd-table ${muiTheme.tableRootClassName}`}\n                headerClassName={'tableHeaderColumn'}\n                rowCount={dataRows.length}\n                rowGetter={({ index }) => dataRows[index]}\n                rowHeight={35}\n                onRowClick={() => {}}\n                rowClassName={this._rowClassName}\n                width={width}\n              >\n                <Column\n                  label={<Trans>Section name</Trans>}\n                  dataKey=\"name\"\n                  width={width * 0.4}\n                  className={'tableColumn'}\n                  cellRenderer={this._renderSectionNameCell}\n                />\n                <Column\n                  label={<Trans>Time (ms)</Trans>}\n                  dataKey=\"time\"\n                  width={width * 0.2}\n                  className={'tableColumn'}\n                />\n                <Column\n                  label={<Trans>% of parent</Trans>}\n                  dataKey=\"parentPercent\"\n                  width={width * 0.2}\n                  className={'tableColumn'}\n                />\n                <Column\n                  label={<Trans>% of total</Trans>}\n                  dataKey=\"totalPercent\"\n                  width={width * 0.2}\n                  className={'tableColumn'}\n                />\n              </Table>\n            )}\n          </AutoSizer>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport MeasuresTable from './MeasuresTable';\nimport { type ProfilerOutput } from '..';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { Line } from '../../UI/Grid';\nimport Background from '../../UI/Background';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Text from '../../UI/Text';\n\nconst styles = {\n  tableContainer: {\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  onStart: () => void,\n  onStop: () => void,\n  profilerOutput: ?ProfilerOutput,\n  profilingInProgress: boolean,\n|};\n\nexport default class Profiler extends React.Component<Props, void> {\n  render() {\n    const { onStart, onStop, profilerOutput, profilingInProgress } = this.props;\n\n    return (\n      <Background>\n        <Line alignItems=\"center\" justifyContent=\"center\">\n          {!profilingInProgress && profilerOutput && (\n            <Text>\n              <Trans>\n                Last run collected on {profilerOutput.stats.framesCount} frames.\n              </Trans>\n            </Text>\n          )}\n          {!profilingInProgress && profilerOutput && (\n            <RaisedButton label={<Trans>Restart</Trans>} onClick={onStart} />\n          )}\n          {!profilingInProgress && !profilerOutput && (\n            <RaisedButton\n              label={<Trans>Start profiling</Trans>}\n              onClick={onStart}\n            />\n          )}\n          {profilingInProgress && (\n            <RaisedButton\n              label={<Trans>Stop profiling</Trans>}\n              onClick={onStop}\n            />\n          )}\n        </Line>\n        {profilingInProgress && (\n          <Line alignItems=\"center\">\n            <LinearProgress style={{ flex: 1 }} variant={'indeterminate'} />\n          </Line>\n        )}\n        <div style={styles.tableContainer}>\n          {profilerOutput && (\n            <MeasuresTable\n              profilerMeasures={profilerOutput.framesAverageMeasures}\n            />\n          )}\n          {!profilerOutput && (\n            <EmptyMessage>\n              <Trans>\n                Start profiling and then stop it after a few seconds to see the\n                results.\n              </Trans>\n            </EmptyMessage>\n          )}\n        </div>\n      </Background>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Trans, t } from '@lingui/macro';\n\nimport {\n  List,\n  CellMeasurer,\n  CellMeasurerCache,\n  AutoSizer,\n} from 'react-virtualized';\nimport useForceUpdate from '../Utils/UseForceUpdate';\n\nimport Chip from '@material-ui/core/Chip';\n\nimport { Line, Column, Spacer } from '../UI/Grid';\nimport Dialog from '../UI/Dialog';\nimport MiniToolbar from '../UI/MiniToolbar';\nimport IconButton from '../UI/IconButton';\nimport FlatButton from '../UI/FlatButton';\nimport Checkbox from '../UI/Checkbox';\n\nimport InfoIcon from '@material-ui/icons/Info';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport MinimizeIcon from '@material-ui/icons/PhotoSizeSelectSmall';\nimport ExpandIcon from '@material-ui/icons/AspectRatio';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\nimport FilterIcon from '@material-ui/icons/FilterList';\nimport TimerIcon from '@material-ui/icons/Timer';\nimport FolderIcon from '@material-ui/icons/Folder';\n\nexport type Log = {\n  message: string,\n  type: 'info' | 'warning' | 'error',\n  group: string,\n  internal?: boolean,\n  timestamp: number,\n};\n\n/**\n * Store logs and groups that are received, batch the logs and allow to register callbacks called when a batch of log is received.\n * This helps avoiding too much re-render on React side when a lot of logs are received.\n */\nexport class LogsManager {\n  logs: Array<Log> = [];\n  groups: Set<string> = new Set();\n  _onNewLog: Set<() => void> = new Set();\n  _onNewGroup: Set<() => void> = new Set();\n  _pendingLogs: Array<Log> = [];\n  _pendingCommit: boolean = false;\n\n  _commitLogs() {\n    this.logs.unshift(...this._pendingLogs);\n    this._pendingLogs.length = 0;\n    this._pendingCommit = false;\n    this._onNewLog.forEach(f => f());\n  }\n\n  addLog(log: Log) {\n    this._pendingLogs.unshift(log);\n    if (!this.groups.has(log.group)) {\n      this.groups.add(log.group);\n      this._onNewGroup.forEach(f => f());\n    }\n    if (!this._pendingCommit) {\n      setTimeout(this._commitLogs.bind(this), 200);\n      this._pendingCommit = true;\n    }\n  }\n\n  on(event: 'group' | 'log', handler: () => void) {\n    if (event === 'group') this._onNewGroup.add(handler);\n    if (event === 'log') this._onNewLog.add(handler);\n  }\n\n  off(event: 'group' | 'log', handler: () => void) {\n    if (event === 'group') this._onNewGroup.delete(handler);\n    if (event === 'log') this._onNewLog.delete(handler);\n  }\n}\n\nconst selectableTextStyle = {\n  userSelect: 'text',\n  cursor: 'text',\n  wordBreak: 'break-word',\n};\n\nconst styles = {\n  list: {\n    // While in theory it should not happen, be sure there is never a horizontal scrollbar:\n    overflowX: 'hidden',\n    // Always show the vertical scrollbar to avoid rendering issues:\n    overflowY: 'scroll',\n  },\n  tag: { marginRight: 2 },\n  consoleTextArea: {\n    ...selectableTextStyle,\n    width: '100%',\n    backgroundColor: '#292929',\n    borderRadius: '4px',\n    border: '1px solid slategray',\n    color: 'white',\n    fontFamily: \"'Courier New', monospace\",\n    fontSize: 11,\n    padding: 3,\n  },\n};\n\nconst Tag = ({ icon, label }: {| icon: React.Node, label: React.Node |}) => (\n  <Chip\n    icon={icon}\n    style={styles.tag}\n    size=\"small\"\n    label={<span style={selectableTextStyle}>{label}</span>}\n  />\n);\n\nconst iconMap = {\n  info: <InfoIcon color=\"primary\" fontSize=\"small\" />,\n  warning: <WarningIcon color=\"secondary\" fontSize=\"small\" />,\n  error: <ErrorIcon color=\"error\" fontSize=\"small\" />,\n};\n\nexport const DebuggerConsole = ({\n  logsManager,\n}: {\n  logsManager: LogsManager,\n}) => {\n  const forceUpdate = useForceUpdate();\n\n  const { logs, groups } = logsManager;\n  React.useEffect(\n    () => {\n      // Rerender when the logs are updated\n      const onUpdate = () => {\n        forceUpdate();\n      };\n      logsManager.on('log', onUpdate);\n      return () => {\n        logsManager.off('log', onUpdate);\n      };\n    },\n    [forceUpdate, logsManager]\n  );\n\n  const cachedHeightsForWidth = React.useRef(0);\n  const cellMeasurerCache = React.useMemo(\n    () =>\n      new CellMeasurerCache({\n        defaultHeight: 45,\n        minHeight: 25,\n        fixedWidth: true,\n        // Inverse index so that each log always\n        // get assigned the same ID despite all indices\n        // shifting when a log is added.\n        keyMapper: index => logs.length - index,\n      }),\n    [logs]\n  );\n\n  const [hideInternal, setHideInternal] = React.useState(false);\n  const [showDetails, _setShowDetails] = React.useState(true);\n  const setShowDetails = (show: boolean) => {\n    _setShowDetails(show);\n    // As the size of the cells have changed, clear the measurer cache to allow remeasuring them.\n    cellMeasurerCache.clearAll();\n  };\n\n  const [editingHiddenGroups, setEditingHiddenGroups] = React.useState(false);\n  const hiddenGroups = React.useRef(new Set()).current;\n  React.useEffect(\n    () => {\n      // Do not register for group updates to avoid rerendering when the groups are not displayed.\n      if (!editingHiddenGroups) return;\n\n      // Rerender when the groups are updated\n      const onUpdate = () => forceUpdate();\n      logsManager.on('group', onUpdate);\n      return () => {\n        logsManager.off('group', onUpdate);\n      };\n    },\n    [editingHiddenGroups, forceUpdate, logsManager]\n  );\n\n  const filteredLogs = logs\n    .filter(({ internal }) => !(hideInternal && internal))\n    .filter(({ group }) => !hiddenGroups.has(group));\n\n  return (\n    <Column noMargin noOverflowParent expand>\n      <Line noMargin expand>\n        <AutoSizer>\n          {({ width, height }) => {\n            if (!width || !height) return null;\n\n            // Reset the cached heights in case the width changed.\n            if (cachedHeightsForWidth.current !== width) {\n              cellMeasurerCache.clearAll();\n              cachedHeightsForWidth.current = width;\n            }\n\n            return (\n              <List\n                deferredMeasurementCache={cellMeasurerCache}\n                height={height}\n                width={width}\n                style={styles.list}\n                rowCount={filteredLogs.length}\n                rowHeight={cellMeasurerCache.rowHeight}\n                rowRenderer={({ index, key, parent, style }) => (\n                  <CellMeasurer\n                    cache={cellMeasurerCache}\n                    columnIndex={0}\n                    key={key}\n                    parent={parent}\n                    rowIndex={index}\n                  >\n                    {({ registerChild }) => (\n                      <div\n                        key={key}\n                        style={{\n                          ...style,\n                          padding: 2,\n                          display: 'flex',\n                          alignItems: 'flex-start',\n                        }}\n                        ref={registerChild}\n                      >\n                        <Column noMargin>\n                          {iconMap[filteredLogs[index].type] || iconMap['info']}\n                        </Column>\n                        <Spacer />\n                        <Column noMargin expand>\n                          <Line noMargin>\n                            <div style={styles.consoleTextArea}>\n                              {filteredLogs[index].message}\n                            </div>\n                          </Line>\n                          {showDetails && (\n                            <>\n                              <Spacer />\n                              <Line noMargin>\n                                {filteredLogs[index].group ? (\n                                  <Tag\n                                    icon={<FolderIcon />}\n                                    label={\n                                      <Trans>\n                                        Group: {filteredLogs[index].group}\n                                      </Trans>\n                                    }\n                                  />\n                                ) : null}\n                                <Tag\n                                  icon={<TimerIcon />}\n                                  label={\n                                    <Trans>\n                                      Timestamp:{' '}\n                                      {Math.round(\n                                        filteredLogs[index].timestamp * 1000\n                                      ) /\n                                        1000000 +\n                                        's'}\n                                    </Trans>\n                                  }\n                                />\n                              </Line>\n                            </>\n                          )}\n                        </Column>\n                      </div>\n                    )}\n                  </CellMeasurer>\n                )}\n              />\n            );\n          }}\n        </AutoSizer>\n      </Line>\n      <MiniToolbar>\n        <Line justifyContent=\"space-between\" alignItems=\"center\" noMargin>\n          <Checkbox\n            label={\n              showDetails ? (\n                <Trans>Hide details</Trans>\n              ) : (\n                <Trans>Show details</Trans>\n              )\n            }\n            checkedIcon={<MinimizeIcon />}\n            uncheckedIcon={<ExpandIcon />}\n            checked={showDetails}\n            onCheck={(_, enabled) => setShowDetails(enabled)}\n          />\n          <Checkbox\n            label={<Trans>Show internal</Trans>}\n            checkedIcon={<VisibilityIcon />}\n            uncheckedIcon={<VisibilityOffIcon />}\n            checked={!hideInternal}\n            onCheck={(_, value) => setHideInternal(!value)}\n          />\n          <IconButton\n            tooltip={t`Filter the logs by group`}\n            onClick={() => setEditingHiddenGroups(true)}\n            edge=\"start\"\n            size=\"small\"\n          >\n            <FilterIcon />\n          </IconButton>\n        </Line>\n      </MiniToolbar>\n\n      {editingHiddenGroups && (\n        <Dialog\n          open\n          title={<Trans>Select log groups to display</Trans>}\n          onRequestClose={() => setEditingHiddenGroups(false)}\n          actions={[\n            <FlatButton\n              key=\"close\"\n              label={<Trans>Close</Trans>}\n              primary={false}\n              onClick={() => setEditingHiddenGroups(false)}\n            />,\n          ]}\n        >\n          <Column>\n            {(() => {\n              const list = [];\n              for (const group of groups.values())\n                list.push(\n                  <Line key={group}>\n                    <Checkbox\n                      label={group}\n                      checked={!hiddenGroups.has(group)}\n                      onCheck={(_, checked) => {\n                        if (checked) hiddenGroups.delete(group);\n                        else hiddenGroups.add(group);\n                        // Since hiddenGroups is a ref, not a state, we need to manually update.\n                        forceUpdate();\n                      }}\n                    />\n                  </Line>\n                );\n              return list;\n            })()}\n          </Column>\n        </Dialog>\n      )}\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport Background from '../UI/Background';\nimport get from 'lodash/get';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line } from '../UI/Grid';\nimport InspectorsList from './InspectorsList';\nimport {\n  getInspectorDescriptions,\n  type InspectorDescription,\n  type EditFunction,\n  type CallFunction,\n} from './GDJSInspectorDescriptions';\nimport RawContentInspector from './Inspectors/RawContentInspector';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport Checkbox from '../UI/Checkbox';\nimport Flash from '@material-ui/icons/FlashOn';\nimport FlashOff from '@material-ui/icons/FlashOff';\nimport HelpButton from '../UI/HelpButton';\nimport Profiler from './Profiler';\nimport { DebuggerConsole, type LogsManager } from './DebuggerConsole';\nimport { type ProfilerOutput } from '.';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport MiniToolbar from '../UI/MiniToolbar';\nimport ScrollView from '../UI/ScrollView';\n\ntype Props = {|\n  gameData: ?any,\n  onEdit: EditFunction,\n  onCall: CallFunction,\n  onPlay: () => void,\n  onPause: () => void,\n  onRefresh: () => void,\n  onStartProfiler: () => void,\n  onStopProfiler: () => void,\n  profilerOutput: ?ProfilerOutput,\n  profilingInProgress: boolean,\n  logsManager: LogsManager,\n|};\n\ntype State = {|\n  selectedInspector: ?InspectorDescription,\n  selectedInspectorFullPath: Array<string>,\n  rawMode: boolean,\n|};\n\nconst initialMosaicEditorNodes = {\n  direction: 'column',\n  first: {\n    direction: 'row',\n    first: 'inspectors',\n    second: 'selected-inspector',\n    splitPercentage: 25,\n  },\n  second: {\n    direction: 'row',\n    first: 'profiler',\n    second: 'console',\n    splitPercentage: 25,\n  },\n  splitPercentage: 65,\n};\n\n/**\n * The debugger interface: show the list of inspectors for a game, along with the\n * currently selected inspector.\n */\nexport default class DebuggerContent extends React.Component<Props, State> {\n  state = {\n    selectedInspector: null,\n    selectedInspectorFullPath: [],\n    rawMode: false,\n  };\n\n  _editors: ?EditorMosaic = null;\n\n  openProfiler = () => {\n    if (this._editors) this._editors.openEditor('profiler', 'end', 75, 'row');\n  };\n\n  openConsole = () => {\n    if (this._editors) this._editors.openEditor('console', 'start', 40, 'row');\n  };\n\n  render() {\n    const {\n      gameData,\n      onRefresh,\n      onCall,\n      onEdit,\n      onStartProfiler,\n      onStopProfiler,\n      profilerOutput,\n      profilingInProgress,\n      logsManager,\n    } = this.props;\n    const {\n      selectedInspector,\n      selectedInspectorFullPath,\n      rawMode,\n    } = this.state;\n\n    const editors = {\n      inspectors: {\n        type: 'primary',\n        title: t`Inspectors`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <Background>\n            <Column expand noMargin useFullHeight>\n              <Line justifyContent=\"center\">\n                <RaisedButton\n                  label={<Trans>Refresh</Trans>}\n                  onClick={onRefresh}\n                  primary\n                />\n              </Line>\n              <InspectorsList\n                gameData={gameData}\n                getInspectorDescriptions={getInspectorDescriptions}\n                onChooseInspector={(\n                  selectedInspector,\n                  selectedInspectorFullPath\n                ) =>\n                  this.setState({\n                    selectedInspector,\n                    selectedInspectorFullPath,\n                  })\n                }\n              />\n            </Column>\n          </Background>\n        ),\n      },\n      'selected-inspector': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <Background>\n            <ScrollView>\n              <Column>\n                {selectedInspector ? (\n                  rawMode ? (\n                    <RawContentInspector\n                      gameData={get(gameData, selectedInspectorFullPath, null)}\n                      onEdit={(path, newValue) =>\n                        onEdit(selectedInspectorFullPath.concat(path), newValue)\n                      }\n                    />\n                  ) : (\n                    selectedInspector.renderInspector(\n                      get(gameData, selectedInspectorFullPath, null),\n                      {\n                        onCall: (path, args) =>\n                          onCall(selectedInspectorFullPath.concat(path), args),\n                        onEdit: (path, newValue) =>\n                          onEdit(\n                            selectedInspectorFullPath.concat(path),\n                            newValue\n                          ),\n                      }\n                    ) || (\n                      <EmptyMessage>\n                        <Trans>\n                          No inspector, choose another element in the list or\n                          toggle the raw data view.\n                        </Trans>\n                      </EmptyMessage>\n                    )\n                  )\n                ) : (\n                  <EmptyMessage>\n                    {gameData ? (\n                      <Trans>Choose an element to inspect in the list</Trans>\n                    ) : (\n                      <Trans>\n                        Pause the game (from the toolbar) or hit refresh (on the\n                        left) to inspect the game\n                      </Trans>\n                    )}\n                  </EmptyMessage>\n                )}\n              </Column>\n            </ScrollView>\n            <MiniToolbar>\n              <Line justifyContent=\"space-between\" alignItems=\"center\" noMargin>\n                <HelpButton helpPagePath=\"/interface/debugger\" />\n                <div>\n                  <Checkbox\n                    checkedIcon={<Flash />}\n                    uncheckedIcon={<FlashOff />}\n                    checked={rawMode}\n                    onCheck={(e, enabled) =>\n                      this.setState({\n                        rawMode: enabled,\n                      })\n                    }\n                  />\n                </div>\n              </Line>\n            </MiniToolbar>\n          </Background>\n        ),\n      },\n      profiler: {\n        type: 'secondary',\n        title: t`Profiler`,\n        renderEditor: () => (\n          <Profiler\n            onStart={onStartProfiler}\n            onStop={onStopProfiler}\n            profilerOutput={profilerOutput}\n            profilingInProgress={profilingInProgress}\n          />\n        ),\n      },\n      console: {\n        type: 'secondary',\n        title: t`Console`,\n        renderEditor: () => (\n          <Background>\n            <DebuggerConsole logsManager={logsManager || []} />\n          </Background>\n        ),\n      },\n    };\n\n    return (\n      <PreferencesContext.Consumer>\n        {({ getDefaultEditorMosaicNode, setDefaultEditorMosaicNode }) => (\n          <EditorMosaic\n            ref={editors => (this._editors = editors)}\n            editors={editors}\n            initialNodes={\n              getDefaultEditorMosaicNode('debugger') || initialMosaicEditorNodes\n            }\n            onPersistNodes={node =>\n              setDefaultEditorMosaicNode('debugger', node)\n            }\n          />\n        )}\n      </PreferencesContext.Consumer>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { type DebuggerId } from '../Export/PreviewLauncher.flow';\n\ntype Props = {|\n  selectedId: DebuggerId,\n  debuggerIds: Array<DebuggerId>,\n  onChooseDebugger: DebuggerId => void,\n|};\n\nexport default class DebuggerSelector extends React.Component<Props, void> {\n  render() {\n    const hasDebuggers = !!this.props.debuggerIds.length;\n    return (\n      <SelectField\n        fullWidth\n        value={hasDebuggers ? this.props.selectedId : 0}\n        onChange={(e, i, value) =>\n          this.props.onChooseDebugger(parseInt(value, 10) || 0)\n        }\n        disabled={!hasDebuggers}\n      >\n        {this.props.debuggerIds.map(id => (\n          <SelectOption\n            value={id}\n            key={id}\n            primaryText={t`Game preview #${id}`}\n          />\n        ))}\n        {!hasDebuggers && (\n          <SelectOption\n            value={0}\n            primaryText={t`No preview running. Run a preview and you will be able to inspect it with the debugger`}\n          />\n        )}\n      </SelectField>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Toolbar from './Toolbar';\nimport DebuggerContent from './DebuggerContent';\nimport DebuggerSelector from './DebuggerSelector';\nimport { Column } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport PlaceholderMessage from '../UI/PlaceholderMessage';\nimport Background from '../UI/Background';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport {\n  type PreviewDebuggerServer,\n  type DebuggerId,\n} from '../Export/PreviewLauncher.flow';\nimport { type Log, LogsManager } from './DebuggerConsole';\n\nexport type ProfilerMeasuresSection = {|\n  time: number,\n  subsections: { [string]: ProfilerMeasuresSection },\n|};\n\nexport type ProfilerOutput = {|\n  framesAverageMeasures: ProfilerMeasuresSection,\n  stats: {\n    framesCount: number,\n  },\n|};\n\n/**\n * Returns true if a log is a warning or debug log from a library out of our control that we do not want to bother users with.\n * This is used in Debugger#_handleMessage below to filter out those kinds of messages.\n */\nconst isUnavoidableLibraryWarning = ({ group, message }: Log): boolean =>\n  group === 'JavaScript' &&\n  (message.includes('Electron Security Warning') ||\n    message.includes('Warning: This is a browser-targeted Firebase bundle'));\n\ntype Props = {|\n  project: gdProject,\n  setToolbar: React.Node => void,\n  previewDebuggerServer: PreviewDebuggerServer,\n|};\n\ntype State = {|\n  debuggerServerState: 'started' | 'stopped',\n  debuggerServerError: ?any,\n  debuggerIds: Array<DebuggerId>,\n  unregisterDebuggerServerCallbacks: ?() => void,\n\n  debuggerGameData: { [DebuggerId]: any },\n  profilerOutputs: { [DebuggerId]: ProfilerOutput },\n  profilingInProgress: { [DebuggerId]: boolean },\n  selectedId: DebuggerId,\n  logs: { [DebuggerId]: Array<Log> },\n|};\n\n/**\n * Start the debugger server, listen to commands received and issue commands to it.\n * This is only supported on Electron runtime for now.\n */\nexport default class Debugger extends React.Component<Props, State> {\n  state = {\n    debuggerServerState: this.props.previewDebuggerServer.getServerState(),\n    debuggerServerError: null,\n    debuggerIds: this.props.previewDebuggerServer.getExistingDebuggerIds(),\n    unregisterDebuggerServerCallbacks: null,\n    debuggerGameData: {},\n    profilerOutputs: {},\n    profilingInProgress: {},\n    selectedId: 0,\n    logs: {},\n  };\n\n  _debuggerContents: { [DebuggerId]: ?DebuggerContent } = {};\n  _debuggerLogs: Map<number, LogsManager> = new Map();\n\n  updateToolbar() {\n    this.props.setToolbar(\n      <Toolbar\n        onPlay={() => this._play(this.state.selectedId)}\n        onPause={() => this._pause(this.state.selectedId)}\n        canPlay={this._hasSelectedDebugger()}\n        canPause={this._hasSelectedDebugger()}\n        canOpenProfiler={this._hasSelectedDebugger()}\n        onOpenProfiler={() => {\n          if (this._debuggerContents[this.state.selectedId])\n            this._debuggerContents[this.state.selectedId].openProfiler();\n        }}\n        canOpenConsole={this._hasSelectedDebugger()}\n        onOpenConsole={() => {\n          if (this._debuggerContents[this.state.selectedId])\n            this._debuggerContents[this.state.selectedId].openConsole();\n        }}\n      />\n    );\n  }\n\n  componentDidMount() {\n    this._registerServerCallbacks();\n  }\n\n  componentWillUnmount() {\n    if (this.state.unregisterDebuggerServerCallbacks) {\n      this.state.unregisterDebuggerServerCallbacks();\n    }\n  }\n\n  _getLogsManager(id: number): LogsManager {\n    let result = this._debuggerLogs.get(id);\n    if (!result) {\n      result = new LogsManager();\n      this._debuggerLogs.set(id, result);\n    }\n    return result;\n  }\n\n  _registerServerCallbacks = () => {\n    const { previewDebuggerServer } = this.props;\n    const { unregisterDebuggerServerCallbacks } = this.state;\n    if (\n      unregisterDebuggerServerCallbacks &&\n      previewDebuggerServer.getServerState() === 'started'\n    )\n      return; // Server already started and callbacks registered\n\n    if (unregisterDebuggerServerCallbacks) unregisterDebuggerServerCallbacks(); // Unregister old callbacks, if any\n\n    // Register new callbacks\n    const unregisterCallbacks = previewDebuggerServer.registerCallbacks({\n      onErrorReceived: err => {\n        this.setState(\n          {\n            debuggerServerError: err,\n          },\n          () => this.updateToolbar()\n        );\n      },\n      onConnectionClosed: ({ id, debuggerIds }) => {\n        this._debuggerLogs.delete(id);\n        this.setState(\n          ({\n            selectedId,\n            debuggerGameData,\n            profilerOutputs,\n            profilingInProgress,\n          }) => {\n            // Remove any data bound to the instance that might have been stored.\n            // Otherwise this would be a memory leak.\n            if (debuggerGameData[id]) delete debuggerGameData[id];\n            if (profilerOutputs[id]) delete profilerOutputs[id];\n            if (profilingInProgress[id]) delete profilingInProgress[id];\n\n            return {\n              debuggerIds,\n              selectedId:\n                selectedId !== id\n                  ? selectedId\n                  : debuggerIds.length\n                  ? debuggerIds[debuggerIds.length - 1]\n                  : selectedId,\n              debuggerGameData,\n              profilerOutputs,\n              profilingInProgress,\n            };\n          },\n          () => this.updateToolbar()\n        );\n      },\n      onConnectionOpened: ({ id, debuggerIds }) => {\n        this.setState(\n          {\n            debuggerIds,\n            selectedId: id,\n          },\n          () => this.updateToolbar()\n        );\n      },\n      onServerStateChanged: () => {\n        this.setState(\n          {\n            debuggerServerState: previewDebuggerServer.getServerState(),\n          },\n          () => this.updateToolbar()\n        );\n      },\n      onHandleParsedMessage: ({ id, parsedMessage }) => {\n        this._handleMessage(id, parsedMessage);\n      },\n    });\n    this.setState({\n      unregisterDebuggerServerCallbacks: unregisterCallbacks,\n    });\n  };\n\n  _handleMessage = (id: DebuggerId, data: any) => {\n    if (data.command === 'dump') {\n      this.setState({\n        debuggerGameData: {\n          ...this.state.debuggerGameData,\n          [id]: data.payload,\n        },\n      });\n    } else if (data.command === 'profiler.output') {\n      this.setState({\n        profilerOutputs: {\n          ...this.state.profilerOutputs,\n          [id]: data.payload,\n        },\n      });\n    } else if (data.command === 'profiler.started') {\n      this.setState(state => ({\n        profilingInProgress: { ...state.profilingInProgress, [id]: true },\n      }));\n    } else if (data.command === 'profiler.stopped') {\n      this.setState(state => ({\n        profilingInProgress: { ...state.profilingInProgress, [id]: false },\n      }));\n    } else if (data.command === 'hotReloader.logs') {\n      // Nothing to do.\n    } else if (data.command === 'console.log') {\n      // Filter out unavoidable warnings that do not concern non-engine devs.\n      if (isUnavoidableLibraryWarning(data.payload)) return;\n      this._getLogsManager(id).addLog(data.payload);\n    } else {\n      console.warn(\n        'Unknown command received from debugger client:',\n        data.command\n      );\n    }\n  };\n\n  _play = (id: DebuggerId) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, { command: 'play' });\n  };\n\n  _pause = (id: DebuggerId) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, { command: 'pause' });\n  };\n\n  _refresh = (id: DebuggerId) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, { command: 'refresh' });\n  };\n\n  _edit = (id: DebuggerId, path: Array<string>, newValue: any) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, {\n      command: 'set',\n      path,\n      newValue,\n    });\n\n    setTimeout(() => this._refresh(id), 100);\n    return true;\n  };\n\n  _call = (id: DebuggerId, path: Array<string>, args: Array<any>) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, {\n      command: 'call',\n      path,\n      args,\n    });\n\n    setTimeout(() => this._refresh(id), 100);\n    return true;\n  };\n\n  _startProfiler = (id: DebuggerId) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, { command: 'profiler.start' });\n  };\n\n  _stopProfiler = (id: DebuggerId) => {\n    const { previewDebuggerServer } = this.props;\n    previewDebuggerServer.sendMessage(id, { command: 'profiler.stop' });\n  };\n\n  _hasSelectedDebugger = () => {\n    const { selectedId, debuggerIds } = this.state;\n    return debuggerIds.indexOf(selectedId) !== -1;\n  };\n\n  render() {\n    const {\n      debuggerServerError,\n      debuggerServerState,\n      selectedId,\n      debuggerIds,\n      debuggerGameData,\n      profilerOutputs,\n      profilingInProgress,\n    } = this.state;\n\n    return (\n      <Background>\n        {debuggerServerState === 'stopped' && !debuggerServerError && (\n          <PlaceholderMessage>\n            <PlaceholderLoader />\n            <Text>\n              <Trans>Debugger is starting...</Trans>\n            </Text>\n          </PlaceholderMessage>\n        )}\n        {debuggerServerState === 'stopped' && debuggerServerError && (\n          <PlaceholderMessage>\n            <Text>\n              <Trans>\n                Unable to start the debugger server! Make sure that you are\n                authorized to run servers on this computer.\n              </Trans>\n            </Text>\n          </PlaceholderMessage>\n        )}\n        {debuggerServerState === 'started' && (\n          <Column expand noMargin>\n            <DebuggerSelector\n              selectedId={selectedId}\n              debuggerIds={debuggerIds}\n              onChooseDebugger={id =>\n                this.setState(\n                  {\n                    selectedId: id,\n                  },\n                  () => this.updateToolbar()\n                )\n              }\n            />\n            {this._hasSelectedDebugger() && (\n              <DebuggerContent\n                ref={debuggerContent =>\n                  (this._debuggerContents[selectedId] = debuggerContent)\n                }\n                gameData={debuggerGameData[selectedId]}\n                onPlay={() => this._play(selectedId)}\n                onPause={() => this._pause(selectedId)}\n                onRefresh={() => this._refresh(selectedId)}\n                onEdit={(path, args) => this._edit(selectedId, path, args)}\n                onCall={(path, args) => this._call(selectedId, path, args)}\n                onStartProfiler={() => this._startProfiler(selectedId)}\n                onStopProfiler={() => this._stopProfiler(selectedId)}\n                profilerOutput={profilerOutputs[selectedId]}\n                profilingInProgress={profilingInProgress[selectedId]}\n                logsManager={this._getLogsManager(selectedId)}\n              />\n            )}\n            {!this._hasSelectedDebugger() && (\n              <EmptyMessage>\n                <Trans>\n                  Run a preview and you will be able to inspect it with the\n                  debugger.\n                </Trans>\n              </EmptyMessage>\n            )}\n          </Column>\n        )}\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Debugger from '../../Debugger';\nimport {\n  type RenderEditorContainerProps,\n  type RenderEditorContainerPropsWithRef,\n} from './BaseEditor';\nimport SubscriptionChecker from '../../Profile/SubscriptionChecker';\n\ntype State = {|\n  subscriptionChecked: boolean,\n|};\n\nexport class DebuggerEditorContainer extends React.Component<\n  RenderEditorContainerProps,\n  State\n> {\n  editor: ?Debugger;\n  _subscriptionChecker: ?SubscriptionChecker;\n  state = {\n    subscriptionChecked: false,\n  };\n\n  shouldComponentUpdate(nextProps: RenderEditorContainerProps) {\n    // We stop updates when the component is inactive.\n    // If it's active, was active or becoming active again we let update propagate.\n    // Especially important to note that when becoming inactive, a \"last\" update is allowed.\n    return this.props.isActive || nextProps.isActive;\n  }\n\n  getProject(): ?gdProject {\n    return this.props.project;\n  }\n\n  getLayout(): ?gdLayout {\n    return null;\n  }\n\n  updateToolbar() {\n    if (this.editor) this.editor.updateToolbar();\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done.\n  }\n\n  componentWillReceiveProps() {\n    this._checkHasSubscription();\n  }\n\n  componentDidMount() {\n    this._checkHasSubscription();\n  }\n\n  _checkHasSubscription() {\n    if (\n      this._subscriptionChecker &&\n      this.props.isActive &&\n      !this.state.subscriptionChecked\n    ) {\n      this._subscriptionChecker.checkHasSubscription();\n      this.setState({\n        subscriptionChecked: true,\n      });\n    }\n  }\n\n  render() {\n    const { project, previewDebuggerServer } = this.props;\n    if (!project || !previewDebuggerServer) return null;\n\n    return (\n      <React.Fragment>\n        <Debugger\n          project={project}\n          setToolbar={this.props.setToolbar}\n          previewDebuggerServer={previewDebuggerServer}\n          ref={editor => (this.editor = editor)}\n        />\n        <SubscriptionChecker\n          ref={subscriptionChecker =>\n            (this._subscriptionChecker = subscriptionChecker)\n          }\n          onChangeSubscription={() => {\n            if (this.props.onChangeSubscription)\n              this.props.onChangeSubscription();\n          }}\n          id=\"Debugger\"\n          title={<Trans>Debugger</Trans>}\n          mode=\"try\"\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderDebuggerEditorContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => <DebuggerEditorContainer {...props} />;\n","// @flow\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport FlatButton from '../../UI/FlatButton';\nimport { Spacer, Line } from '../../UI/Grid';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport differenceInSeconds from 'date-fns/differenceInSeconds';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Text from '../../UI/Text';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n} from '../../Utils/GDevelopServices/Build';\n\nconst buildTypesConfig = {\n  'cordova-build': {\n    estimatedTimeInSeconds: (build: Build) => 300,\n    completeDescription:\n      'You can download it on your Android phone and install it.',\n  },\n  'electron-build': {\n    estimatedTimeInSeconds: (build: Build) =>\n      90 + 130 * (build.targets ? build.targets.length : 0),\n    completeDescription: '',\n  },\n  'web-build': {\n    estimatedTimeInSeconds: (build: Build) => 5,\n    completeDescription: '',\n  },\n};\n\nconst buttons = [\n  {\n    displayName: t`Download (APK)`,\n    key: 'apkKey',\n  },\n  {\n    displayName: t`Download (Android App Bundle)`,\n    key: 'aabKey',\n  },\n  {\n    displayName: t`Windows (zip)`,\n    key: 'windowsZipKey',\n  },\n  {\n    displayName: t`Windows (exe)`,\n    key: 'windowsExeKey',\n  },\n  {\n    displayName: t`macOS (zip)`,\n    key: 'macosZipKey',\n  },\n  {\n    displayName: t`Linux (AppImage)`,\n    key: 'linuxAppImageKey',\n  },\n  {\n    displayName: t`Open`,\n    key: 's3Key',\n  },\n];\n\ntype Props = {|\n  build: Build,\n  onDownload: (key: BuildArtifactKeyName) => void,\n|};\n\n/**\n * Show an estimate of the progress of a build or the button\n * to download the artifacts.\n */\nexport default ({ build, onDownload }: Props) => {\n  const config = buildTypesConfig[build.type];\n  const secondsSinceLastUpdate = Math.abs(\n    differenceInSeconds(build.updatedAt, Date.now())\n  );\n  const estimatedRemainingTime = Math.max(\n    config ? config.estimatedTimeInSeconds(build) - secondsSinceLastUpdate : 0,\n    0\n  );\n\n  return (\n    <I18n>\n      {({ i18n }) =>\n        build.status === 'error' ? (\n          <React.Fragment>\n            <Line alignItems=\"center\">\n              <Text>\n                <Trans>Something wrong happened :(</Trans>\n              </Text>\n              <Spacer />\n              <RaisedButton\n                label={<Trans>See logs</Trans>}\n                onClick={() => onDownload('logsKey')}\n              />\n            </Line>\n            <Line alignItems=\"center\">\n              <EmptyMessage>\n                <Trans>\n                  Check the logs to see if there is an explanation about what\n                  went wrong, or try again later.\n                </Trans>\n              </EmptyMessage>\n            </Line>\n          </React.Fragment>\n        ) : build.status === 'pending' ? (\n          <Line alignItems=\"center\" expand>\n            <LinearProgress\n              style={{ flex: 1 }}\n              value={\n                config.estimatedTimeInSeconds(build) > 0\n                  ? ((config.estimatedTimeInSeconds(build) -\n                      estimatedRemainingTime) /\n                      config.estimatedTimeInSeconds(build)) *\n                    100\n                  : 0\n              }\n              variant={\n                estimatedRemainingTime > 0 ? 'determinate' : 'indeterminate'\n              }\n            />\n            <Spacer />\n            {estimatedRemainingTime > 0 ? (\n              <Text>\n                <Trans>\n                  ~{Math.round(estimatedRemainingTime / 60)} minutes.\n                </Trans>\n              </Text>\n            ) : (\n              <Text>\n                <Trans>Should finish soon.</Trans>\n              </Text>\n            )}\n          </Line>\n        ) : build.status === 'complete' ? (\n          <React.Fragment>\n            <Line expand>\n              {buttons\n                .filter(button => !!build[button.key])\n                .map((button, index) => (\n                  <React.Fragment key={button.key}>\n                    {index !== 0 && <Spacer />}\n                    <RaisedButton\n                      label={i18n._(button.displayName)}\n                      primary\n                      onClick={() => onDownload(button.key)}\n                    />\n                  </React.Fragment>\n                ))}\n              <FlatButton\n                label={<Trans>See logs</Trans>}\n                onClick={() => onDownload('logsKey')}\n              />\n            </Line>\n            <Line expand>\n              {config && <Text>{config.completeDescription}</Text>}\n            </Line>\n          </React.Fragment>\n        ) : (\n          <Line>\n            <Trans>Unknown status</Trans>\n          </Line>\n        )\n      }\n    </I18n>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n} from '../../Utils/GDevelopServices/Build';\nimport { Column, Line } from '../../UI/Grid';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport BuildProgress from './BuildProgress';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport format from 'date-fns/format';\nimport differenceInCalendarDays from 'date-fns/differenceInCalendarDays';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  builds: ?Array<Build>,\n  authenticatedUser: AuthenticatedUser,\n  onDownload: (build: Build, key: BuildArtifactKeyName) => void,\n|};\n\nconst styles = {\n  buildContainer: {\n    padding: 10,\n  },\n};\n\nconst formatBuildText = (\n  buildType: 'cordova-build' | 'electron-build' | 'web-build'\n) => {\n  switch (buildType) {\n    case 'cordova-build':\n      return <Trans>Android Build</Trans>;\n    case 'electron-build':\n      return <Trans>Windows/macOS/Linux Build</Trans>;\n    case 'web-build':\n      return <Trans>Web (upload online) Build</Trans>;\n    default:\n      return buildType;\n  }\n};\n\nexport default ({ builds, authenticatedUser, onDownload }: Props) => {\n  return (\n    <Column noMargin expand>\n      <Line>\n        <Column>\n          <EmptyMessage>\n            <Trans>\n              This is the list of builds that you've done. Note that you can\n              download games generated during the last 7 days, after which they\n              are removed.\n            </Trans>\n          </EmptyMessage>\n        </Column>\n      </Line>\n      <Line>\n        {!authenticatedUser.authenticated ? (\n          <EmptyMessage>\n            <Trans>You need to login first to see your builds.</Trans>\n          </EmptyMessage>\n        ) : !builds ? (\n          <PlaceholderLoader />\n        ) : builds.length === 0 ? (\n          <EmptyMessage>\n            <Trans>\n              You don't have any builds on the online services for now.\n            </Trans>\n          </EmptyMessage>\n        ) : (\n          <Column noMargin expand>\n            {builds.map((build: Build) => {\n              const isOld =\n                build &&\n                differenceInCalendarDays(Date.now(), build.updatedAt) > 6;\n\n              return (\n                <Paper style={styles.buildContainer} key={build.id}>\n                  <Text>\n                    {formatBuildText(build.type)} -{' '}\n                    <Trans>Last updated on</Trans>{' '}\n                    {format(build.updatedAt, 'yyyy-MM-dd HH:mm:ss')}\n                  </Text>\n                  {!isOld && (\n                    <BuildProgress\n                      build={build}\n                      onDownload={key => onDownload(build, key)}\n                    />\n                  )}\n                  {isOld && (\n                    <EmptyMessage>\n                      <Trans>\n                        This build is old and the generated games can't be\n                        downloaded anymore.\n                      </Trans>\n                    </EmptyMessage>\n                  )}\n                </Paper>\n              );\n            })}\n          </Column>\n        )}\n      </Line>\n    </Column>\n  );\n};\n","// @flow\nimport { type Build, getBuild } from '../../Utils/GDevelopServices/Build';\nimport { delay } from '../../Utils/Delay';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\n\nconst waitTime = 1500;\nconst bulkWaitTime = 5000;\nconst maxTimeBeforeIgnoring = 12 * 60 * 60 * 1000; // 12 hours in milliseconds\n\nexport default class BuildsWatcher {\n  runningWatchers: { [string]: boolean } = {};\n  nextWatcherId = 0;\n  onBuildUpdated: ?(build: Build) => void;\n  authenticatedUser: ?AuthenticatedUser;\n\n  start({\n    authenticatedUser,\n    builds,\n    onBuildUpdated,\n  }: {\n    authenticatedUser: AuthenticatedUser,\n    builds: Array<Build>,\n    onBuildUpdated: (build: Build) => void,\n  }) {\n    this.stop();\n    this.authenticatedUser = authenticatedUser;\n    this.onBuildUpdated = onBuildUpdated;\n\n    builds.forEach(build => {\n      if (build.status === 'pending') {\n        if (\n          (!build.createdAt ||\n            build.createdAt < Date.now() - maxTimeBeforeIgnoring) &&\n          (!build.updatedAt ||\n            build.updatedAt < Date.now() - maxTimeBeforeIgnoring)\n        ) {\n          console.info(\n            \"Ignoring a build for polling as it's too old and still pending\",\n            build\n          );\n        } else {\n          this._pollBuild(\n            build.id,\n            builds.length > 1 ? bulkWaitTime : waitTime\n          );\n        }\n      }\n    });\n  }\n\n  stop() {\n    this.runningWatchers = {};\n  }\n\n  _pollBuild = async (buildId: string, waitTime: number) => {\n    const watcherId = this.nextWatcherId.toString();\n    this.nextWatcherId++;\n\n    this.runningWatchers[watcherId] = true;\n\n    let build = null;\n    do {\n      if (!this.authenticatedUser) return;\n\n      const { getAuthorizationHeader, firebaseUser } = this.authenticatedUser;\n      if (!firebaseUser) return;\n\n      try {\n        console.info(`Checking progress of build ${buildId}...`);\n        build = await getBuild(\n          getAuthorizationHeader,\n          firebaseUser.uid,\n          buildId\n        );\n        if (this.onBuildUpdated) this.onBuildUpdated(build);\n      } catch (e) {\n        console.warn('Error while watching build progress:', e);\n      }\n\n      await delay(waitTime);\n      if (!this.runningWatchers[watcherId]) {\n        console.info(`Stopping watch of build ${buildId}.`);\n        return;\n      }\n    } while (build && build.status === 'pending');\n\n    console.info(`Watch of build ${buildId} finished.`);\n  };\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport BuildsList from './BuildsList';\nimport {\n  getBuilds,\n  type Build,\n  type BuildArtifactKeyName,\n  getBuildArtifactUrl,\n} from '../../Utils/GDevelopServices/Build';\nimport Window from '../../Utils/Window';\nimport BuildsWatcher from './BuildsWatcher';\n\ntype Props = {|\n  onBuildsUpdated: ?() => void,\n  authenticatedUser: AuthenticatedUser,\n|};\ntype State = {|\n  builds: ?Array<Build>,\n|};\n\nexport default class Builds extends Component<Props, State> {\n  state = {\n    builds: null,\n  };\n  buildsWatcher = new BuildsWatcher();\n\n  componentDidMount() {\n    this._refreshBuilds();\n  }\n\n  componentWillUnmount() {\n    this.buildsWatcher.stop();\n  }\n\n  _startBuildsWatcher = () => {\n    if (!this.state.builds) return;\n\n    this.buildsWatcher.start({\n      authenticatedUser: this.props.authenticatedUser,\n      builds: this.state.builds,\n      onBuildUpdated: (newBuild: Build) => {\n        if (!this.state.builds) return;\n\n        this.setState({\n          builds: this.state.builds.map((oldBuild: Build) => {\n            if (newBuild.id === oldBuild.id) return newBuild;\n\n            return oldBuild;\n          }),\n        });\n      },\n    });\n  };\n\n  _refreshBuilds = () => {\n    const {\n      getAuthorizationHeader,\n      firebaseUser,\n    } = this.props.authenticatedUser;\n    if (!firebaseUser) return;\n\n    getBuilds(getAuthorizationHeader, firebaseUser.uid).then(\n      builds => {\n        this.setState(\n          {\n            builds,\n          },\n          () => {\n            this._startBuildsWatcher();\n            if (this.props.onBuildsUpdated) this.props.onBuildsUpdated();\n          }\n        );\n      },\n      () => {\n        //TODO: Handle error\n      }\n    );\n  };\n\n  _download = (build: Build, key: BuildArtifactKeyName) => {\n    const url = getBuildArtifactUrl(build, key);\n    if (url) Window.openExternalURL(url);\n  };\n\n  render() {\n    return (\n      <BuildsList\n        builds={this.state.builds}\n        authenticatedUser={this.props.authenticatedUser}\n        onDownload={this._download}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport Dialog from '../../UI/Dialog';\nimport HelpButton from '../../UI/HelpButton';\nimport FlatButton from '../../UI/FlatButton';\nimport Builds from '.';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\n\ntype Props = {|\n  authenticatedUser: AuthenticatedUser,\n  open: boolean,\n  onClose: () => void,\n|};\ntype State = {||};\n\nexport default class BuildsDialog extends Component<Props, State> {\n  _onBuildsUpdated = () => {\n    // Force the Dialog repositioning\n    this.forceUpdate();\n  };\n\n  render() {\n    const { open, onClose, authenticatedUser } = this.props;\n    if (!open) return null;\n\n    return (\n      <Dialog\n        title={<Trans>All your builds</Trans>}\n        onRequestClose={onClose}\n        actions={[\n          <FlatButton\n            label={<Trans>Close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        secondaryActions={[\n          <HelpButton key=\"help\" helpPagePath={'/publishing'} />,\n        ]}\n        cannotBeDismissed={false}\n        open={open}\n        noMargin\n      >\n        <Builds\n          onBuildsUpdated={this._onBuildsUpdated}\n          authenticatedUser={authenticatedUser}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Column, Line } from '../UI/Grid';\nimport { type Limit, type Subscription } from '../Utils/GDevelopServices/Usage';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport Text from '../UI/Text';\n\ntype Props = {|\n  subscription: ?Subscription,\n  limit: ?Limit,\n  onChangeSubscription: Function,\n|};\n\nexport default ({ subscription, limit, onChangeSubscription }: Props) => {\n  if (!limit) return <PlaceholderLoader />;\n  const hasSubscription = subscription && !!subscription.planId;\n  const noSubscription = subscription && !subscription.planId;\n\n  return (\n    <Column noMargin>\n      <Text>\n        <Trans>\n          You have {Math.max(limit.max - limit.current, 0)} remaining builds for\n          today (out of {limit.max}).\n        </Trans>\n      </Text>\n      {hasSubscription && limit.limitReached && (\n        <Text>\n          <Trans>\n            Need more power? You can upgrade to a new plan to increase the\n            limit!\n          </Trans>\n        </Text>\n      )}\n      {hasSubscription && limit.limitReached && (\n        <Line justifyContent=\"center\" alignItems=\"center\">\n          <RaisedButton\n            label={<Trans>Upgrade my account</Trans>}\n            onClick={onChangeSubscription}\n            primary\n          />\n        </Line>\n      )}\n      {noSubscription && (\n        <Text>\n          <Trans>\n            You don't have a subscription. Get one to increase the limits!\n          </Trans>\n        </Text>\n      )}\n      {noSubscription && (\n        <Line justifyContent=\"center\" alignItems=\"center\">\n          <RaisedButton\n            label={<Trans>Get a subscription</Trans>}\n            onClick={onChangeSubscription}\n            primary\n          />\n        </Line>\n      )}\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepLabel from '@material-ui/core/StepLabel';\nimport StepContent from '@material-ui/core/StepContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { Line, Spacer, Column } from '../../UI/Grid';\nimport BuildProgress from './BuildProgress';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n} from '../../Utils/GDevelopServices/Build';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport Text from '../../UI/Text';\nimport AlertMessage from '../../UI/AlertMessage';\n\nconst styles = {\n  stepper: { flex: 1 },\n  linearProgress: { flex: 1 },\n};\n\nexport type BuildStep =\n  | ''\n  | 'export'\n  | 'resources-download'\n  | 'compress'\n  | 'upload'\n  | 'waiting-for-build'\n  | 'build'\n  | 'done';\n\ntype Props = {|\n  exportStep: BuildStep,\n  onDownload: (key: BuildArtifactKeyName) => void,\n  build: ?Build,\n  stepMaxProgress: number,\n  stepCurrentProgress: number,\n  errored: boolean,\n  showSeeAllMyBuildsExplanation?: boolean,\n  hasBuildStep: boolean,\n|};\n\n/**\n * Can be used in an exporter to show the overall progress of a build\n * (including local archiving/upload steps and remote build progress)\n */\nexport default ({\n  exportStep,\n  onDownload,\n  build,\n  stepMaxProgress,\n  stepCurrentProgress,\n  errored,\n  hasBuildStep,\n  showSeeAllMyBuildsExplanation,\n}: Props) => (\n  <Stepper\n    activeStep={\n      exportStep === 'export' || exportStep === 'resources-download'\n        ? 0\n        : exportStep === 'compress' || exportStep === 'upload'\n        ? 1\n        : exportStep === 'waiting-for-build' || exportStep === 'build'\n        ? 2\n        : exportStep === 'done'\n        ? hasBuildStep\n          ? 2\n          : 1\n        : -1\n    }\n    orientation=\"vertical\"\n    style={styles.stepper}\n  >\n    <Step>\n      <StepLabel>\n        <Trans>Game export</Trans>\n      </StepLabel>\n      <StepContent>\n        {errored ? (\n          <AlertMessage kind=\"error\">\n            <Trans>Can't properly export the game.</Trans>{' '}\n            <Trans>\n              Please check your internet connection or try again later.\n            </Trans>\n          </AlertMessage>\n        ) : exportStep === 'resources-download' ? (\n          <Column expand noMargin>\n            <Text>\n              <Trans>Downloading game resources...</Trans>\n            </Text>\n            <Line expand>\n              <LinearProgress\n                style={styles.linearProgress}\n                value={\n                  stepMaxProgress > 0\n                    ? (stepCurrentProgress / stepMaxProgress) * 100\n                    : 0\n                }\n                variant=\"determinate\"\n              />\n            </Line>\n          </Column>\n        ) : (\n          <Column expand noMargin>\n            <Text>\n              <Trans>Export in progress...</Trans>\n            </Text>\n            <Line expand>\n              <LinearProgress style={styles.linearProgress} />\n            </Line>\n          </Column>\n        )}\n      </StepContent>\n    </Step>\n    {hasBuildStep && (\n      <Step>\n        <StepLabel>\n          <Trans>Upload to build service</Trans>\n        </StepLabel>\n        <StepContent>\n          {errored ? (\n            <AlertMessage kind=\"error\">\n              <Trans>Can't upload your game to the build service.</Trans>{' '}\n              <Trans>\n                Please check your internet connection or try again later.\n              </Trans>\n            </AlertMessage>\n          ) : exportStep === 'compress' ? (\n            <Line alignItems=\"center\">\n              <CircularProgress size={20} />\n              <Spacer />\n              <Text>\n                <Trans>Compressing before upload...</Trans>\n              </Text>\n            </Line>\n          ) : (\n            <Line alignItems=\"center\" expand>\n              <LinearProgress\n                style={styles.linearProgress}\n                value={\n                  stepMaxProgress > 0\n                    ? (stepCurrentProgress / stepMaxProgress) * 100\n                    : 0\n                }\n                variant=\"determinate\"\n              />\n            </Line>\n          )}\n        </StepContent>\n      </Step>\n    )}\n    {hasBuildStep && (\n      <Step>\n        <StepLabel>\n          <Trans>Build and download</Trans>\n        </StepLabel>\n        <StepContent>\n          {errored && (\n            <AlertMessage kind=\"error\">\n              <Trans>\n                Build could not start or errored. Please check your internet\n                connection or try again later.\n              </Trans>\n            </AlertMessage>\n          )}\n          {!build && !errored && (\n            <Text>\n              <Trans>Build is starting...</Trans>\n            </Text>\n          )}\n          {build && <BuildProgress build={build} onDownload={onDownload} />}\n          {showSeeAllMyBuildsExplanation && (\n            <EmptyMessage>\n              <Trans>\n                If you close this window while the build is being done, you can\n                see its progress and download the game later by clicking on See\n                All My Builds below.\n              </Trans>\n            </EmptyMessage>\n          )}\n        </StepContent>\n      </Step>\n    )}\n    {!hasBuildStep && (\n      <Step>\n        <StepLabel>\n          <Trans>Done</Trans>\n        </StepLabel>\n        <StepContent />\n      </Step>\n    )}\n  </Stepper>\n);\n","// @flow\n\nimport React, { Component } from 'react';\nimport { I18n } from '@lingui/react';\nimport { t } from '@lingui/macro';\nimport RaisedButton from '../UI/RaisedButton';\nimport { sendExportLaunched } from '../Utils/Analytics/EventSender';\nimport {\n  type Build,\n  type BuildArtifactKeyName,\n  getBuildArtifactUrl,\n} from '../Utils/GDevelopServices/Build';\nimport { type AuthenticatedUser } from '../Profile/AuthenticatedUserContext';\nimport { Column, Line } from '../UI/Grid';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport Window from '../Utils/Window';\nimport CreateProfile from '../Profile/CreateProfile';\nimport LimitDisplayer from '../Profile/LimitDisplayer';\nimport {\n  displayProjectErrorsBox,\n  getProjectPropertiesErrors,\n} from '../Utils/ProjectErrorsChecker';\nimport { type Limit } from '../Utils/GDevelopServices/Usage';\nimport BuildsWatcher from './Builds/BuildsWatcher';\nimport BuildStepsProgress, {\n  type BuildStep,\n} from './Builds/BuildStepsProgress';\nimport {\n  registerGame,\n  getGame,\n  updateGame,\n} from '../Utils/GDevelopServices/Game';\nimport { type ExportPipeline } from './ExportPipeline.flow';\nimport { GameRegistration } from '../GameDashboard/GameRegistration';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport {\n  ACHIEVEMENT_FEATURE_FLAG,\n  addCreateBadgePreHookIfNotClaimed,\n  TRIVIAL_FIRST_WEB_EXPORT,\n} from '../Utils/GDevelopServices/Badge';\n\ntype State = {|\n  exportStep: BuildStep,\n  compressionOutput: any,\n  build: ?Build,\n  stepCurrentProgress: number,\n  stepMaxProgress: number,\n  errored: boolean,\n  exportState: any,\n  doneFooterOpen: boolean,\n|};\n\ntype Props = {|\n  project: gdProject,\n  onChangeSubscription: () => void,\n  authenticatedUser: AuthenticatedUser,\n  exportPipeline: ExportPipeline<any, any, any, any, any>,\n|};\n\n/**\n * A generic UI to launch, monitor the progres and get the result\n * of an export.\n */\nexport default class ExportLauncher extends Component<Props, State> {\n  state = {\n    exportStep: '',\n    build: null,\n    compressionOutput: null,\n    stepCurrentProgress: 0,\n    stepMaxProgress: 0,\n    doneFooterOpen: false,\n    errored: false,\n    exportState: this.props.exportPipeline.getInitialExportState(\n      this.props.project\n    ),\n  };\n  buildsWatcher = new BuildsWatcher();\n  launchWholeExport: () => Promise<void>;\n\n  componentWillUnmount() {\n    this.buildsWatcher.stop();\n  }\n\n  constructor(props: Props) {\n    super(props);\n    this._setupAchievementHook();\n  }\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    this._setupAchievementHook();\n  }\n\n  _setupAchievementHook = () => {\n    if (\n      ACHIEVEMENT_FEATURE_FLAG &&\n      this.props.exportPipeline.name.includes('web')\n    ) {\n      this.launchWholeExport = addCreateBadgePreHookIfNotClaimed(\n        this.props.authenticatedUser,\n        TRIVIAL_FIRST_WEB_EXPORT,\n        this._launchWholeExport\n      );\n    } else {\n      this.launchWholeExport = this._launchWholeExport;\n    }\n  };\n\n  _updateStepProgress = (\n    stepCurrentProgress: number,\n    stepMaxProgress: number\n  ) =>\n    this.setState({\n      stepCurrentProgress,\n      stepMaxProgress,\n    });\n\n  _startBuildWatch = (authenticatedUser: AuthenticatedUser) => {\n    if (!this.state.build) return;\n\n    this.buildsWatcher.start({\n      authenticatedUser,\n      builds: [this.state.build],\n      onBuildUpdated: (build: Build) => {\n        this.setState({ build });\n        authenticatedUser.onRefreshUserProfile();\n      },\n    });\n  };\n\n  registerAndUpdateGame = async () => {\n    const profile = this.props.authenticatedUser.profile;\n    const getAuthorizationHeader = this.props.authenticatedUser\n      .getAuthorizationHeader;\n    const gameId = this.props.project.getProjectUuid();\n    const authorName = this.props.project.getAuthor() || 'Unspecified author';\n    const gameName = this.props.project.getName() || 'Untitled game';\n    if (profile) {\n      const userId = profile.id;\n      try {\n        await getGame(getAuthorizationHeader, userId, gameId);\n        // Update the game details to ensure that it is up to date in GDevelop services.\n        await updateGame(getAuthorizationHeader, userId, {\n          gameId,\n          authorName,\n          gameName,\n        });\n      } catch (err) {\n        if (err.response.status === 404) {\n          // If the game is not registered, register it before launching the export.\n          await registerGame(getAuthorizationHeader, userId, {\n            gameId,\n            authorName,\n            gameName,\n          });\n        }\n      }\n    }\n  };\n\n  _launchWholeExport = async () => {\n    const t = str => str; //TODO;\n    const { project, exportPipeline, authenticatedUser } = this.props;\n    sendExportLaunched(exportPipeline.name);\n\n    if (!displayProjectErrorsBox(t, getProjectPropertiesErrors(t, project)))\n      return;\n\n    const getErrorMessage = () => {\n      switch (this.state.exportStep) {\n        case 'export':\n          return t('Error while preparing the exporter.');\n        case 'resources-download':\n          return t('Error while exporting the game.');\n        case 'compress':\n          return t(\n            'Error while downloading the game resources. Check your internet connection and that all resources of the game are valid in the Resources editor.'\n          );\n        case 'upload':\n          return t('Error while compressing the game.');\n        case 'waiting-for-build':\n          return t(\n            'Error while uploading the game. Check your internet connection or try again later.'\n          );\n        case 'build':\n          return t('Error while lauching the build of the game.');\n        default:\n          return t(\n            'Error while building the game. Try again later. Your internet connection may be slow or one of your resources may be corrupted.'\n          );\n      }\n    };\n\n    const handleError = (err: Error) => {\n      if (!this.state.errored) {\n        this.setState({\n          errored: true,\n        });\n        showErrorBox({\n          message:\n            getErrorMessage() +\n            (err.message ? `\\n\\nDetails of the error: ${err.message}` : ''),\n          rawError: {\n            exportStep: this.state.exportStep,\n            rawError: err,\n          },\n          errorId: 'export-error',\n        });\n      }\n    };\n\n    const setStep = (step: BuildStep) => this.setState({ exportStep: step });\n\n    try {\n      // We do not await for this call, allowing to start building the game in parallel.\n      this.registerAndUpdateGame();\n    } catch {\n      // Best effort call, we don't prevent building the game.\n      console.warn('Error while registering the game - ignoring it.');\n    }\n\n    try {\n      const exportPipelineContext = {\n        project,\n        updateStepProgress: this._updateStepProgress,\n        exportState: this.state.exportState,\n      };\n      setStep('export');\n      this.setState({\n        stepCurrentProgress: 0,\n        stepMaxProgress: 0,\n        errored: false,\n        build: null,\n      });\n      const preparedExporter = await exportPipeline.prepareExporter(\n        exportPipelineContext\n      );\n      const exportOutput = await exportPipeline.launchExport(\n        exportPipelineContext,\n        preparedExporter\n      );\n      setStep('resources-download');\n      const resourcesDownloadOutput = await exportPipeline.launchResourcesDownload(\n        exportPipelineContext,\n        exportOutput\n      );\n      setStep('compress');\n      const compressionOutput = await exportPipeline.launchCompression(\n        exportPipelineContext,\n        resourcesDownloadOutput\n      );\n      const { launchUpload, launchOnlineBuild } = exportPipeline;\n      if (!!launchUpload && !!launchOnlineBuild) {\n        setStep('upload');\n        const uploadBucketKey = await launchUpload(\n          exportPipelineContext,\n          compressionOutput\n        );\n        setStep('waiting-for-build');\n        const build = await launchOnlineBuild(\n          this.state.exportState,\n          authenticatedUser,\n          uploadBucketKey\n        );\n        setStep('build');\n        this.setState({ build }, () => {\n          this._startBuildWatch(authenticatedUser);\n        });\n      }\n      setStep('done');\n      this.setState({\n        compressionOutput,\n        doneFooterOpen: true,\n      });\n    } catch (error) {\n      console.error('An error happened during export:', error);\n      handleError(error);\n    }\n  };\n\n  _downloadBuild = (key: BuildArtifactKeyName) => {\n    const url = getBuildArtifactUrl(this.state.build, key);\n    if (url) Window.openExternalURL(url);\n  };\n\n  _closeDoneFooter = () =>\n    this.setState({\n      doneFooterOpen: false,\n    });\n\n  _updateExportState = (updater: any => any) => {\n    this.setState(prevState => ({\n      ...prevState,\n      exportState: updater(prevState.exportState),\n    }));\n  };\n\n  render() {\n    const {\n      exportStep,\n      compressionOutput,\n      build,\n      stepMaxProgress,\n      stepCurrentProgress,\n      errored,\n      doneFooterOpen,\n      exportState,\n    } = this.state;\n    const { project, authenticatedUser, exportPipeline } = this.props;\n    if (!project) return null;\n\n    const getBuildLimit = (authenticatedUser: AuthenticatedUser): ?Limit =>\n      authenticatedUser.limits && exportPipeline.onlineBuildType\n        ? authenticatedUser.limits[exportPipeline.onlineBuildType]\n        : null;\n    const canLaunchBuild = (authenticatedUser: AuthenticatedUser) => {\n      if (!errored && exportStep !== '' && exportStep !== 'done') return false;\n\n      const limit: ?Limit = getBuildLimit(authenticatedUser);\n      if (limit && limit.limitReached) return false;\n\n      return exportPipeline.canLaunchBuild(exportState);\n    };\n\n    return (\n      <Column noMargin>\n        {!!exportPipeline.packageNameWarningType &&\n          project.getPackageName().indexOf('com.example') !== -1 && (\n            <Line>\n              <DismissableAlertMessage\n                identifier=\"project-should-have-unique-package-name\"\n                kind=\"warning\"\n              >\n                <I18n>\n                  {({ i18n }) =>\n                    i18n._(\n                      exportPipeline.packageNameWarningType === 'mobile'\n                        ? t`The package name begins with com.example, make sure you replace it with an unique one to be able to publish your game on app stores.`\n                        : t`The package name begins with com.example, make sure you replace it with an unique one, else installing your game might overwrite other games.`\n                    )\n                  }\n                </I18n>\n              </DismissableAlertMessage>\n            </Line>\n          )}\n        <Line>\n          {exportPipeline.renderHeader({\n            project,\n            exportState,\n            updateExportState: this._updateExportState,\n          })}\n        </Line>\n        {(!exportPipeline.onlineBuildType ||\n          authenticatedUser.authenticated) && (\n          <Line justifyContent=\"center\">\n            <RaisedButton\n              label={exportPipeline.renderLaunchButtonLabel()}\n              primary\n              onClick={this.launchWholeExport}\n              disabled={!canLaunchBuild(authenticatedUser)}\n            />\n          </Line>\n        )}\n        {!!exportPipeline.onlineBuildType &&\n          authenticatedUser.authenticated && (\n            <LimitDisplayer\n              subscription={authenticatedUser.subscription}\n              limit={getBuildLimit(authenticatedUser)}\n              onChangeSubscription={this.props.onChangeSubscription}\n            />\n          )}\n        {!!exportPipeline.onlineBuildType &&\n          !authenticatedUser.authenticated && (\n            <CreateProfile\n              onLogin={authenticatedUser.onLogin}\n              onCreateAccount={authenticatedUser.onCreateAccount}\n            />\n          )}\n        <Line expand>\n          <BuildStepsProgress\n            exportStep={exportStep}\n            hasBuildStep={!!exportPipeline.onlineBuildType}\n            build={build}\n            onDownload={this._downloadBuild}\n            stepMaxProgress={stepMaxProgress}\n            stepCurrentProgress={stepCurrentProgress}\n            errored={errored}\n          />\n        </Line>\n        {doneFooterOpen &&\n          exportPipeline.renderDoneFooter &&\n          exportPipeline.renderDoneFooter({\n            compressionOutput,\n            exportState,\n            onClose: this._closeDoneFooter,\n          })}\n        {doneFooterOpen && (\n          <Line>\n            <GameRegistration project={project} />\n          </Line>\n        )}\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nfunction getOnlineStatus() {\n  return typeof navigator !== 'undefined' &&\n    typeof navigator.onLine === 'boolean'\n    ? navigator.onLine\n    : true;\n}\n\n/**\n * React Hook listening to the navigator online status.\n */\nexport const useOnlineStatus = () => {\n  const [onlineStatus, setOnlineStatus] = React.useState(getOnlineStatus());\n\n  const goOnline = () => setOnlineStatus(true);\n\n  const goOffline = () => setOnlineStatus(false);\n\n  React.useEffect(() => {\n    window.addEventListener('online', goOnline);\n    window.addEventListener('offline', goOffline);\n\n    return () => {\n      window.removeEventListener('online', goOnline);\n      window.removeEventListener('offline', goOffline);\n    };\n  }, []);\n\n  return onlineStatus;\n};\n\ntype Props = {|\n  children: (onlineStatus: boolean) => React.Node,\n|};\n\n/**\n * Component listening to the navigator online status, passing\n * it down to children.\n */\nexport const OnlineStatus = ({ children }: Props) => {\n  const onlineStatus = useOnlineStatus();\n  return children(onlineStatus);\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport BuildsDialog from './Builds/BuildsDialog';\nimport { Line } from '../UI/Grid';\nimport AuthenticatedUserContext, {\n  type AuthenticatedUser,\n} from '../Profile/AuthenticatedUserContext';\nimport ExportLauncher from './ExportLauncher';\nimport { type ExportPipeline } from './ExportPipeline.flow';\nimport { OnlineStatus } from '../Utils/OnlineStatus';\nimport AlertMessage from '../UI/AlertMessage';\n\nconst styles = {\n  icon: { width: 40, height: 40 },\n  disabledItem: { opacity: 0.6 },\n  content: { padding: 8 },\n};\n\nexport type Exporter = {|\n  name: React.Node,\n  renderIcon: (props: {|\n    style: {| width: number, height: number |},\n  |}) => React.Node,\n  helpPage: string,\n  description: React.Node,\n  disabled?: boolean,\n  advanced?: boolean,\n  experimental?: boolean,\n  key: string,\n  exportPipeline: ExportPipeline<any, any, any, any, any>,\n|};\n\nexport type ExportDialogWithoutExportsProps = {|\n  project: ?gdProject,\n  onClose: () => void,\n  onChangeSubscription: () => void,\n|};\n\ntype Props = {|\n  ...ExportDialogWithoutExportsProps,\n  exporters: Array<Exporter>,\n  allExportersRequireOnline?: boolean,\n|};\n\ntype State = {|\n  chosenExporterKey: string,\n  showExperimental: boolean,\n  buildsDialogOpen: boolean,\n|};\n\ntype ExperimentalExportButtonProps = {|\n  showExperimental: boolean,\n  onClick: (value: boolean) => void,\n  disabled: boolean,\n|};\n\nconst ExperimentalExportButton = (props: ExperimentalExportButtonProps) => {\n  const { showExperimental, onClick, disabled } = props;\n  return (\n    <>\n      {!disabled && !showExperimental && (\n        <FlatButton\n          key=\"toggle-experimental\"\n          icon={<Visibility />}\n          primary={false}\n          onClick={() => onClick(true)}\n          label={<Trans>Show experimental exports</Trans>}\n        />\n      )}\n      {!disabled && showExperimental && (\n        <FlatButton\n          key=\"toggle-experimental\"\n          icon={<VisibilityOff />}\n          primary={false}\n          onClick={() => onClick(false)}\n          label={<Trans>Hide experimental exports</Trans>}\n        />\n      )}\n    </>\n  );\n};\n\nexport default class ExportDialog extends React.Component<Props, State> {\n  state = {\n    chosenExporterKey: '',\n    showExperimental: false,\n    buildsDialogOpen: false,\n  };\n\n  chooseExporter = (key: string) => {\n    this.setState({\n      chosenExporterKey: key,\n    });\n  };\n\n  _showExperimental = (show: boolean = true) => {\n    this.setState({\n      showExperimental: show,\n    });\n  };\n\n  _openBuildsDialog = (open: boolean = true) => {\n    this.setState({\n      buildsDialogOpen: open,\n    });\n  };\n\n  _renderExporterListItem = (\n    exporter: Exporter,\n    index: number,\n    forceDisable: boolean\n  ) => {\n    return (\n      <ListItem\n        key={exporter.key}\n        disabled={forceDisable || exporter.disabled}\n        style={\n          forceDisable || exporter.disabled ? styles.disabledItem : undefined\n        }\n        leftIcon={exporter.renderIcon({ style: styles.icon })}\n        primaryText={exporter.name}\n        secondaryText={exporter.description}\n        secondaryTextLines={2}\n        onClick={() => this.chooseExporter(exporter.key)}\n      />\n    );\n  };\n\n  render() {\n    const {\n      project,\n      onClose,\n      allExportersRequireOnline,\n      onChangeSubscription,\n      exporters,\n    } = this.props;\n    const { showExperimental, chosenExporterKey } = this.state;\n    if (!project) return null;\n\n    const exporter = exporters.find(\n      exporter => exporter.key === chosenExporterKey\n    );\n\n    return (\n      <AuthenticatedUserContext.Consumer>\n        {(authenticatedUser: AuthenticatedUser) => (\n          <OnlineStatus>\n            {onlineStatus => {\n              const cantExportBecauseOffline =\n                !!allExportersRequireOnline && !onlineStatus;\n              return (\n                <Dialog\n                  title={<Trans>Export project to a standalone game</Trans>}\n                  onRequestClose={onClose}\n                  cannotBeDismissed={false}\n                  actions={[\n                    chosenExporterKey && (\n                      <FlatButton\n                        label={<Trans>Back</Trans>}\n                        key=\"back\"\n                        primary={false}\n                        onClick={() => this.chooseExporter('')}\n                      />\n                    ),\n                    <FlatButton\n                      label={<Trans>Close</Trans>}\n                      key=\"close\"\n                      primary={false}\n                      onClick={onClose}\n                    />,\n                  ]}\n                  secondaryActions={[\n                    <HelpButton\n                      key=\"help\"\n                      helpPagePath={\n                        (exporter && exporter.helpPage) || '/publishing'\n                      }\n                    />,\n                    <FlatButton\n                      key=\"builds\"\n                      label={<Trans>See all my builds</Trans>}\n                      onClick={() => this._openBuildsDialog(true)}\n                    />,\n                  ]}\n                  open\n                  noMargin\n                >\n                  {cantExportBecauseOffline && (\n                    <AlertMessage kind=\"error\">\n                      <Trans>\n                        You must be online and have a proper internet connection\n                        to export your game.\n                      </Trans>\n                    </AlertMessage>\n                  )}\n                  {!exporter && (\n                    <React.Fragment>\n                      <List>\n                        {exporters\n                          .filter(\n                            exporter =>\n                              !exporter.advanced && !exporter.experimental\n                          )\n                          .map((exporter, index) =>\n                            this._renderExporterListItem(\n                              exporter,\n                              index,\n                              cantExportBecauseOffline\n                            )\n                          )}\n\n                        <Subheader>Advanced</Subheader>\n                        {exporters\n                          .filter(exporter => exporter.advanced)\n                          .map((exporter, index) =>\n                            this._renderExporterListItem(\n                              exporter,\n                              index,\n                              cantExportBecauseOffline\n                            )\n                          )}\n\n                        {showExperimental && (\n                          <Subheader>Experimental</Subheader>\n                        )}\n                        {showExperimental &&\n                          exporters\n                            .filter(exporter => exporter.experimental)\n                            .map((exporter, index) =>\n                              this._renderExporterListItem(\n                                exporter,\n                                index,\n                                cantExportBecauseOffline\n                              )\n                            )}\n                      </List>\n                      <Line justifyContent=\"center\" alignItems=\"center\">\n                        <ExperimentalExportButton\n                          showExperimental={showExperimental}\n                          onClick={value => this._showExperimental(value)}\n                          disabled\n                        />\n                      </Line>\n                    </React.Fragment>\n                  )}\n                  {exporter && exporter.exportPipeline && (\n                    <div style={styles.content}>\n                      <ExportLauncher\n                        exportPipeline={exporter.exportPipeline}\n                        project={project}\n                        onChangeSubscription={onChangeSubscription}\n                        authenticatedUser={authenticatedUser}\n                      />\n                    </div>\n                  )}\n                  <BuildsDialog\n                    open={this.state.buildsDialogOpen}\n                    onClose={() => this._openBuildsDialog(false)}\n                    authenticatedUser={authenticatedUser}\n                  />\n                </Dialog>\n              );\n            }}\n          </OnlineStatus>\n        )}\n      </AuthenticatedUserContext.Consumer>\n    );\n  }\n}\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '969896',\n      token: 'comment',\n    },\n    {\n      foreground: 'ced1cf',\n      token: 'keyword.operator.class',\n    },\n    {\n      foreground: 'ced1cf',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'ced1cf',\n      token: 'source.php.embedded.line',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'variable',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'support.other.variable',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'string.other.link',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'meta.tag',\n    },\n    {\n      foreground: 'cc6666',\n      token: 'declaration.tag',\n    },\n    {\n      foreground: 'de935f',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'de935f',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'de935f',\n      token: 'support.constant',\n    },\n    {\n      foreground: 'de935f',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'de935f',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'de935f',\n      token: 'punctuation.section.embedded',\n    },\n    {\n      foreground: 'de935f',\n      token: 'keyword.other.unit',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'support.type',\n    },\n    {\n      foreground: 'f0c674',\n      token: 'support.class',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'string',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'constant.other.symbol',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'b5bd68',\n      token: 'markup.heading',\n    },\n    {\n      foreground: '8abeb7',\n      token: 'keyword.operator',\n    },\n    {\n      foreground: '8abeb7',\n      token: 'constant.other.color',\n    },\n    {\n      foreground: '81a2be',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '81a2be',\n      token: 'meta.function-call',\n    },\n    {\n      foreground: '81a2be',\n      token: 'support.function',\n    },\n    {\n      foreground: '81a2be',\n      token: 'keyword.other.special-method',\n    },\n    {\n      foreground: '81a2be',\n      token: 'meta.block-level',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'keyword',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'storage',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'storage.type',\n    },\n    {\n      foreground: 'b294bb',\n      token: 'entity.name.tag.css',\n    },\n    {\n      foreground: 'ced2cf',\n      background: 'df5f5f',\n      token: 'invalid',\n    },\n    {\n      foreground: 'ced2cf',\n      background: '82a3bf',\n      token: 'meta.separator',\n    },\n    {\n      foreground: 'ced2cf',\n      background: 'b798bf',\n      token: 'invalid.deprecated',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#C5C8C6',\n    'editor.background': '#1D1F21',\n    'editor.selectionBackground': '#373B41',\n    'editor.lineHighlightBackground': '#282A2E',\n    'editorCursor.foreground': '#AEAFAD',\n    'editorWhitespace.foreground': '#4B4E55',\n  },\n};\n\nexport default {\n  name: 'Tomorrow-Night',\n  themeName: 'tomorrow-night',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '75715e',\n      token: 'comment',\n    },\n    {\n      foreground: 'e6db74',\n      token: 'string',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'f92672',\n      token: 'keyword',\n    },\n    {\n      foreground: 'f92672',\n      token: 'storage',\n    },\n    {\n      foreground: '66d9ef',\n      fontStyle: 'italic',\n      token: 'storage.type',\n    },\n    {\n      foreground: 'a6e22e',\n      fontStyle: 'underline',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'a6e22e',\n      fontStyle: 'italic underline',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'a6e22e',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: 'fd971f',\n      fontStyle: 'italic',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'f92672',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'a6e22e',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '66d9ef',\n      token: 'support.function',\n    },\n    {\n      foreground: '66d9ef',\n      token: 'support.constant',\n    },\n    {\n      foreground: '66d9ef',\n      fontStyle: 'italic',\n      token: 'support.type',\n    },\n    {\n      foreground: '66d9ef',\n      fontStyle: 'italic',\n      token: 'support.class',\n    },\n    {\n      foreground: 'f8f8f0',\n      background: 'f92672',\n      token: 'invalid',\n    },\n    {\n      foreground: 'f8f8f0',\n      background: 'ae81ff',\n      token: 'invalid.deprecated',\n    },\n    {\n      foreground: 'cfcfc2',\n      token: 'meta.structure.dictionary.json string.quoted.double.json',\n    },\n    {\n      foreground: '75715e',\n      token: 'meta.diff',\n    },\n    {\n      foreground: '75715e',\n      token: 'meta.diff.header',\n    },\n    {\n      foreground: 'f92672',\n      token: 'markup.deleted',\n    },\n    {\n      foreground: 'a6e22e',\n      token: 'markup.inserted',\n    },\n    {\n      foreground: 'e6db74',\n      token: 'markup.changed',\n    },\n    {\n      foreground: 'ae81ff',\n      token: 'constant.numeric.line-number.find-in-files - match',\n    },\n    {\n      foreground: 'e6db74',\n      token: 'entity.name.filename.find-in-files',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#F8F8F2',\n    'editor.background': '#272822',\n    'editor.selectionBackground': '#49483E',\n    'editor.lineHighlightBackground': '#3E3D32',\n    'editorCursor.foreground': '#F8F8F0',\n    'editorWhitespace.foreground': '#3B3A32',\n    'editorIndentGuide.activeBackground': '#9D550F',\n    'editor.selectionHighlightBorder': '#222218',\n  },\n};\n\nexport default {\n  name: 'Monokai',\n  themeName: 'monokai',\n  themeData,\n};\n","const themeData = {\n  base: 'vs',\n  inherit: true,\n  rules: [\n    {\n      foreground: '8e908c',\n      token: 'comment',\n    },\n    {\n      foreground: '666969',\n      token: 'keyword.operator.class',\n    },\n    {\n      foreground: '666969',\n      token: 'constant.other',\n    },\n    {\n      foreground: '666969',\n      token: 'source.php.embedded.line',\n    },\n    {\n      foreground: 'c82829',\n      token: 'variable',\n    },\n    {\n      foreground: 'c82829',\n      token: 'support.other.variable',\n    },\n    {\n      foreground: 'c82829',\n      token: 'string.other.link',\n    },\n    {\n      foreground: 'c82829',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'c82829',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'c82829',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'c82829',\n      token: 'meta.tag',\n    },\n    {\n      foreground: 'c82829',\n      token: 'declaration.tag',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'support.constant',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'punctuation.section.embedded',\n    },\n    {\n      foreground: 'f5871f',\n      token: 'keyword.other.unit',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'support.type',\n    },\n    {\n      foreground: 'c99e00',\n      token: 'support.class',\n    },\n    {\n      foreground: '718c00',\n      token: 'string',\n    },\n    {\n      foreground: '718c00',\n      token: 'constant.other.symbol',\n    },\n    {\n      foreground: '718c00',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '718c00',\n      token: 'markup.heading',\n    },\n    {\n      foreground: '3e999f',\n      token: 'keyword.operator',\n    },\n    {\n      foreground: '3e999f',\n      token: 'constant.other.color',\n    },\n    {\n      foreground: '4271ae',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '4271ae',\n      token: 'meta.function-call',\n    },\n    {\n      foreground: '4271ae',\n      token: 'support.function',\n    },\n    {\n      foreground: '4271ae',\n      token: 'keyword.other.special-method',\n    },\n    {\n      foreground: '4271ae',\n      token: 'meta.block-level',\n    },\n    {\n      foreground: '8959a8',\n      token: 'keyword',\n    },\n    {\n      foreground: '8959a8',\n      token: 'storage',\n    },\n    {\n      foreground: '8959a8',\n      token: 'storage.type',\n    },\n    {\n      foreground: 'ffffff',\n      background: 'c82829',\n      token: 'invalid',\n    },\n    {\n      foreground: 'ffffff',\n      background: '4271ae',\n      token: 'meta.separator',\n    },\n    {\n      foreground: 'ffffff',\n      background: '8959a8',\n      token: 'invalid.deprecated',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#4D4D4C',\n    'editor.background': '#FFFFFF',\n    'editor.selectionBackground': '#D6D6D6',\n    'editor.lineHighlightBackground': '#EFEFEF',\n    'editorCursor.foreground': '#AEAFAD',\n    'editorWhitespace.foreground': '#D1D1D1',\n  },\n};\n\nexport default {\n  name: 'Tomorrow',\n  themeName: 'tomorrow',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '657b83',\n      fontStyle: 'italic',\n      token: 'comment',\n    },\n    {\n      foreground: '2aa198',\n      token: 'string',\n    },\n    {\n      foreground: 'd30102',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'd33682',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.language',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.other',\n    },\n    {\n      foreground: '859900',\n      token: 'keyword',\n    },\n    {\n      foreground: '93a1a1',\n      fontStyle: 'bold',\n      token: 'storage',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '859900',\n      token: 'punctuation.definition.variable',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.begin',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.end',\n    },\n    {\n      foreground: 'b58900',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'b58900',\n      token: 'meta.preprocessor',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'support.function.construct',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'keyword.other.new',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.other',\n    },\n    {\n      foreground: '6c71c4',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '268bd2',\n      fontStyle: 'bold',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: '657b83',\n      token: 'punctuation.definition.tag',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '268bd2',\n      token: 'support.function',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.separator.continuation',\n    },\n    {\n      foreground: '859900',\n      token: 'support.type',\n    },\n    {\n      foreground: '859900',\n      token: 'support.class',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'support.type.exception',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#93A1A1',\n    'editor.background': '#002B36',\n    'editor.selectionBackground': '#073642',\n    'editor.lineHighlightBackground': '#073642',\n    'editorCursor.foreground': '#D30102',\n    'editorWhitespace.foreground': '#93A1A1',\n  },\n};\n\nexport default {\n  name: 'Solarized-Dark',\n  themeName: 'solarized-dark',\n  themeData,\n};\n","const themeData = {\n  base: 'vs',\n  inherit: true,\n  rules: [\n    {\n      foreground: '93a1a1',\n      token: 'comment',\n    },\n    {\n      foreground: '2aa198',\n      token: 'string',\n    },\n    {\n      foreground: 'd30102',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'd33682',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.language',\n    },\n    {\n      foreground: '268bd2',\n      token: 'variable.other',\n    },\n    {\n      foreground: '859900',\n      token: 'keyword',\n    },\n    {\n      foreground: '073642',\n      fontStyle: 'bold',\n      token: 'storage',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: '268bd2',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '859900',\n      token: 'punctuation.definition.variable',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.begin',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.section.embedded.end',\n    },\n    {\n      foreground: 'b58900',\n      token: 'constant.language',\n    },\n    {\n      foreground: 'b58900',\n      token: 'meta.preprocessor',\n    },\n    {\n      foreground: 'd30102',\n      token: 'support.function.construct',\n    },\n    {\n      foreground: 'd30102',\n      token: 'keyword.other.new',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'constant.other',\n    },\n    {\n      foreground: '268bd2',\n      fontStyle: 'bold',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'punctuation.definition.tag.begin',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'punctuation.definition.tag.end',\n    },\n    {\n      foreground: '93a1a1',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '268bd2',\n      token: 'support.function',\n    },\n    {\n      foreground: 'd30102',\n      token: 'punctuation.separator.continuation',\n    },\n    {\n      foreground: '859900',\n      token: 'support.type',\n    },\n    {\n      foreground: '859900',\n      token: 'support.class',\n    },\n    {\n      foreground: 'cb4b16',\n      token: 'support.type.exception',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#586E75',\n    'editor.background': '#FDF6E3',\n    'editor.selectionBackground': '#073642',\n    'editor.lineHighlightBackground': '#EEE8D5',\n    'editorCursor.foreground': '#000000',\n    'editorWhitespace.foreground': '#93A1A1',\n  },\n};\n\nexport default {\n  name: 'Solarized-Light',\n  themeName: 'solarized-light',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: 'ffffff',\n      background: '0f0f0f',\n      token: 'text',\n    },\n    {\n      background: '000000',\n      token: 'source.ruby.rails.embedded.html',\n    },\n    {\n      foreground: 'ffffff',\n      background: '101010',\n      token: 'text.html.ruby',\n    },\n    {\n      foreground: 'ccff33',\n      background: '000000',\n      token: 'invalid',\n    },\n    {\n      foreground: 'ccff33',\n      background: '000000',\n      token: 'invalid.deprecated',\n    },\n    {\n      foreground: '99cc99',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'ffffff',\n      background: '000000',\n      token: 'source',\n    },\n    {\n      foreground: '9933cc',\n      token: 'comment',\n    },\n    {\n      foreground: '339999',\n      token: 'constant',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'keyword',\n    },\n    {\n      foreground: 'edf8f9',\n      token: 'keyword.preprocessor',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'keyword.preprocessor directive',\n    },\n    {\n      foreground: 'ffcc00',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: 'ffcc00',\n      token: 'storage.type.function.js',\n    },\n    {\n      fontStyle: 'italic',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: '772cb7',\n      background: '070707',\n      token: 'source comment.block',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'variable.other',\n    },\n    {\n      foreground: 'ffcc00',\n      token: 'support.function',\n    },\n    {\n      foreground: '66ff00',\n      token: 'string',\n    },\n    {\n      foreground: 'aaaaaa',\n      token: 'string constant.character.escape',\n    },\n    {\n      foreground: '000000',\n      background: 'cccc33',\n      token: 'string.interpolated',\n    },\n    {\n      foreground: '44b4cc',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'cccc33',\n      token: 'string.literal',\n    },\n    {\n      foreground: '555555',\n      token: 'string.interpolated constant.character.escape',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'entity.name.class',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'support.class.js',\n    },\n    {\n      fontStyle: 'italic underline',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'meta.tag.inline.any.html',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'meta.tag.block.any.html',\n    },\n    {\n      foreground: '99cc99',\n      fontStyle: 'italic',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'dde93d',\n      token: 'keyword.other',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'meta.selector.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.other.attribute-name.pseudo-class.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.name.tag.wildcard.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.other.attribute-name.id.css',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'entity.other.attribute-name.class.css',\n    },\n    {\n      foreground: '999966',\n      token: 'support.type.property-name.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'keyword.other.unit.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'constant.other.rgb-value.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'constant.numeric.css',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'support.function.event-handler.js',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'keyword.operator.js',\n    },\n    {\n      foreground: 'cccc66',\n      token: 'keyword.control.js',\n    },\n    {\n      foreground: 'ffffff',\n      token: 'support.class.prototype.js',\n    },\n    {\n      foreground: 'ff6600',\n      token: 'object.property.function.prototype.js',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#FFFFFF',\n    'editor.background': '#0F0F0F',\n    'editor.selectionBackground': '#6699CC',\n    'editor.lineHighlightBackground': '#333333',\n    'editorCursor.foreground': '#FFFFFF',\n    'editorWhitespace.foreground': '#404040',\n  },\n};\n\nexport default {\n  name: 'Vibrant Ink',\n  themeName: 'vibrant-ink',\n  themeData,\n};\n","const themeData = {\n  base: 'vs',\n  inherit: true,\n  rules: [\n    {\n      foreground: '999988',\n      fontStyle: 'italic',\n      token: 'comment',\n    },\n    {\n      foreground: '999999',\n      fontStyle: 'bold',\n      token: 'comment.block.preprocessor',\n    },\n    {\n      foreground: '999999',\n      fontStyle: 'bold italic',\n      token: 'comment.documentation',\n    },\n    {\n      foreground: '999999',\n      fontStyle: 'bold italic',\n      token: 'comment.block.documentation',\n    },\n    {\n      foreground: 'a61717',\n      background: 'e3d2d2',\n      token: 'invalid.illegal',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'keyword',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'storage',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'keyword.operator',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'constant.language',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'support.constant',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'storage.type',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'support.type',\n    },\n    {\n      foreground: '008080',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: '0086b3',\n      token: 'variable.other',\n    },\n    {\n      foreground: '999999',\n      token: 'variable.language',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'entity.name.type',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '445588',\n      fontStyle: 'bold',\n      token: 'support.class',\n    },\n    {\n      foreground: '008080',\n      token: 'variable.other.constant',\n    },\n    {\n      foreground: '800080',\n      token: 'constant.character.entity',\n    },\n    {\n      foreground: '990000',\n      token: 'entity.name.exception',\n    },\n    {\n      foreground: '990000',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '990000',\n      token: 'support.function',\n    },\n    {\n      foreground: '990000',\n      token: 'keyword.other.name-of-parameter',\n    },\n    {\n      foreground: '555555',\n      token: 'entity.name.section',\n    },\n    {\n      foreground: '000080',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: '008080',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: '008080',\n      token: 'support.variable',\n    },\n    {\n      foreground: '009999',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: '009999',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'dd1144',\n      token: 'string - string source',\n    },\n    {\n      foreground: 'dd1144',\n      token: 'constant.character',\n    },\n    {\n      foreground: '009926',\n      token: 'string.regexp',\n    },\n    {\n      foreground: '990073',\n      token: 'constant.other.symbol',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'punctuation',\n    },\n    {\n      foreground: '000000',\n      background: 'ffdddd',\n      token: 'markup.deleted',\n    },\n    {\n      fontStyle: 'italic',\n      token: 'markup.italic',\n    },\n    {\n      foreground: 'aa0000',\n      token: 'markup.error',\n    },\n    {\n      foreground: '999999',\n      token: 'markup.heading.1',\n    },\n    {\n      foreground: '000000',\n      background: 'ddffdd',\n      token: 'markup.inserted',\n    },\n    {\n      foreground: '888888',\n      token: 'markup.output',\n    },\n    {\n      foreground: '888888',\n      token: 'markup.raw',\n    },\n    {\n      foreground: '555555',\n      token: 'markup.prompt',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'markup.bold',\n    },\n    {\n      foreground: 'aaaaaa',\n      token: 'markup.heading',\n    },\n    {\n      foreground: 'aa0000',\n      token: 'markup.traceback',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'markup.underline',\n    },\n    {\n      foreground: '999999',\n      background: 'eaf2f5',\n      token: 'meta.diff.range',\n    },\n    {\n      foreground: '999999',\n      background: 'eaf2f5',\n      token: 'meta.diff.index',\n    },\n    {\n      foreground: '999999',\n      background: 'eaf2f5',\n      token: 'meta.separator',\n    },\n    {\n      foreground: '999999',\n      background: 'ffdddd',\n      token: 'meta.diff.header.from-file',\n    },\n    {\n      foreground: '999999',\n      background: 'ddffdd',\n      token: 'meta.diff.header.to-file',\n    },\n    {\n      foreground: '4183c4',\n      token: 'meta.link',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#000000',\n    'editor.background': '#F8F8FF',\n    'editor.selectionBackground': '#B4D5FE',\n    'editor.lineHighlightBackground': '#FFFEEB',\n    'editorCursor.foreground': '#666666',\n    'editorWhitespace.foreground': '#BBBBBB',\n  },\n};\n\nexport default {\n  name: 'GitHub',\n  themeName: 'github',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: '616e88',\n      token: 'comment',\n    },\n    {\n      foreground: '616e88',\n      fontStyle: 'bold',\n      token: 'comment.block.preprocessor',\n    },\n    {\n      foreground: '81a1c1',\n      token: 'comment.block.documentation',\n    },\n    {\n      foreground: 'd8dee9',\n      background: 'bf616a',\n      token: 'invalid.illegal',\n    },\n    {\n      foreground: '81a1c1',\n      token: 'keyword',\n    },\n    {\n      foreground: '81a1c1',\n      token: 'storage',\n    },\n    {\n      foreground: '81a1c1',\n      token: 'keyword.operator',\n    },\n    {\n      foreground: '81a1c1',\n      token: 'constant.language',\n    },\n    {\n      foreground: '81a1c1',\n      token: 'support.constant',\n    },\n    {\n      foreground: '8fbcbb',\n      token: 'storage.type',\n    },\n    {\n      foreground: '8fBcbb',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'd8dee9',\n      token: 'variable.other',\n    },\n    {\n      foreground: 'd8dee9',\n      token: 'variable.language',\n    },\n    {\n      foreground: '8fbcbb',\n      token: 'entity.name.type',\n    },\n    {\n      foreground: '8fbcbb',\n      fontStyle: 'bold',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: '8fbcbb',\n      token: 'support.class',\n    },\n    {\n      foreground: '8fbcbb',\n      token: 'variable.other.constant',\n    },\n    {\n      foreground: '88c0d0',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '88c0d0',\n      token: 'support.function',\n    },\n    {\n      foreground: '88c0d0',\n      token: 'entity.name.section',\n    },\n    {\n      foreground: '5e81ac',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'd8dee9',\n      token: 'variable.parameter',\n    },\n    {\n      foreground: 'd8dee9',\n      token: 'support.variable',\n    },\n    {\n      foreground: 'b48ead',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'b48ead',\n      token: 'constant.other',\n    },\n    {\n      foreground: 'a3be8c',\n      token: 'string - string source',\n    },\n    {\n      foreground: 'ebcb8b',\n      token: 'constant.character',\n    },\n    {\n      foreground: 'ebcb8b',\n      token: 'string.regexp',\n    },\n    {\n      foreground: 'd8dee9',\n      fontStyle: 'bold',\n      token: 'constant.other.symbol',\n    },\n    {\n      fontground: 'eceff4',\n      token: 'punctuation',\n    },\n    {\n      foreground: 'bf616a',\n      token: 'markup.deleted',\n    },\n    {\n      fontStyle: 'italic',\n      token: 'markup.italic',\n    },\n    {\n      foreground: '88c0d0',\n      token: 'markup.heading',\n    },\n    {\n      foreground: 'a3be8c',\n      token: 'markup.inserted',\n    },\n    {\n      fontStyle: 'bold',\n      token: 'markup.bold',\n    },\n    {\n      fontStyle: 'underline',\n      token: 'markup.underline',\n    },\n    {\n      foreground: '8fbcbb',\n      token: 'meta.diff.range',\n    },\n    {\n      foreground: '8fbcbb',\n      token: 'meta.diff.header.from-file',\n    },\n  ],\n  colors: {\n    'editorActiveLineNumber.foreground': '#d8dee9',\n    'editorCursor.foreground': '#d8dee9',\n    'editorHint.border': '#ebcb8b',\n    'editorHint.foreground': '#ebcb8b',\n    'editorIndentGuide.background': '#434c5e',\n    'editorIndentGuide.activeBackground': '#4c566a',\n    'editorLineNumber.foreground': '#4c566a',\n    'editorLineNumber.activeForeground': '#d8dee9',\n    'editorWhitespace.foreground': '#4c566a',\n    'editorWidget.background': '#2e3440',\n    'editorWidget.border': '#3b4252',\n    'editor.background': '#2e3440',\n    'editor.foreground': '#d8dee9',\n    'editor.hoverHighlightBackground': '#3b4252',\n    'editor.findMatchBackground': '#88c0d0',\n    'editor.findMatchHighlightBackground': '#88c0d0',\n    'editor.findRangeHighlightBackground': '#88c0d0',\n    'editor.lineHighlightBackground': '#3b4252',\n    'editor.lineHighlightBorder': '#3b4252',\n    'editor.inactiveSelectionBackground': '#434c5e',\n    'editor.selectionBackground': '#434c5e',\n    'editor.selectionHighlightBackground': '#434c5e',\n    'editor.rangeHighlightBackground': '#434c5e',\n    'editor.wordHighlightBackground': '#81a1c1',\n    'editor.wordHighlightStrongBackground': '#81a1c1',\n    'editorError.foreground': '#bf616a',\n    'editorError.border': '#bf616a',\n    'editorWarning.foreground': '#ebcb8b',\n    'editorWarning.border': '#ebcb8b',\n    'editorBracketMatch.background': '#2e3440',\n    'editorBracketMatch.border': '#88c0d0',\n    'editorCodeLens.foreground': '#4c566a',\n    'editorGroup.background': '#2e3440',\n    'editorGroup.border': '#3b4252',\n    'editorGroup.dropBackground': '#3b4252',\n    'editorGroupHeader.noTabsBackground': '#2e3440',\n    'editorGroupHeader.tabsBackground': '#2e3440',\n    'editorGroupHeader.tabsBorder': '#3b4252',\n    'editorGutter.background': '#2e3440',\n    'editorGutter.modifiedBackground': '#ebcb8b',\n    'editorGutter.addedBackground': '#a3be8c',\n    'editorGutter.deletedBackground': '#bf616a',\n    'editorHoverWidget.background': '#3b4252',\n    'editorHoverWidget.border': '#3b4252',\n    'editorLink.activeForeground': '#88c0d0',\n    'editorMarkerNavigation.background': '#5e81ac',\n    'editorMarkerNavigationError.background': '#bf616a',\n    'editorMarkerNavigationWarning.background': '#ebcb8b',\n    'editorOverviewRuler.border': '#3b4252',\n    'editorOverviewRuler.currentContentForeground': '#3b4252',\n    'editorOverviewRuler.incomingContentForeground': '#3b4252',\n    'editorOverviewRuler.findMatchForeground': '#88c0d0',\n    'editorOverviewRuler.rangeHighlightForeground': '#88c0d0',\n    'editorOverviewRuler.selectionHighlightForeground': '#88c0d0',\n    'editorOverviewRuler.wordHighlightForeground': '#88c0d0',\n    'editorOverviewRuler.wordHighlightStrongForeground': '#88c0d0',\n    'editorOverviewRuler.modifiedForeground': '#ebcb8b',\n    'editorOverviewRuler.addedForeground': '#a3be8c',\n    'editorOverviewRuler.deletedForeground': '#bf616a',\n    'editorOverviewRuler.errorForeground': '#bf616a',\n    'editorOverviewRuler.warningForeground': '#ebcb8b',\n    'editorOverviewRuler.infoForeground': '#81a1c1',\n    'editorRuler.foreground': '#434c5e',\n    'editorSuggestWidget.background': '#2e3440',\n    'editorSuggestWidget.border': '#3b4252',\n    'editorSuggestWidget.foreground': '#d8dee9',\n    'editorSuggestWidget.highlightForeground': '#88c0d0',\n    'editorSuggestWidget.selectedBackground': '#434c5e',\n  },\n};\n\nexport default {\n  name: 'Nord-Dark',\n  themeName: 'nord-dark',\n  themeData,\n};\n","const themeData = {\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      foreground: 'abb2bf',\n      token: 'text',\n    },\n    {\n      foreground: 'abb2bf',\n      token: 'source',\n    },\n    {\n      foreground: 'adb7c9',\n      token: 'variable.parameter.function',\n    },\n    {\n      foreground: '5f697a',\n      fontStyle: ' italic',\n      token: 'comment',\n    },\n    {\n      foreground: '5f697a',\n      fontStyle: ' italic',\n      token: 'punctuation.definition.comment',\n    },\n    {\n      foreground: 'adb7c9',\n      token: 'none',\n    },\n    {\n      foreground: 'adb7c9',\n      token: 'keyword.operator',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'keyword',\n    },\n    {\n      foreground: 'eb6772',\n      token: 'variable',\n    },\n    {\n      foreground: '5cb3fa',\n      token: 'entity.name.function',\n    },\n    {\n      foreground: '5cb3fa',\n      token: 'meta.require',\n    },\n    {\n      foreground: '5cb3fa',\n      token: 'support.function.any-method',\n    },\n    {\n      foreground: 'f0c678',\n      token: 'support.class',\n    },\n    {\n      foreground: 'f0c678',\n      token: 'entity.name.class',\n    },\n    {\n      foreground: 'f0c678',\n      token: 'entity.name.type.class',\n    },\n    {\n      foreground: 'adb7c9',\n      token: 'meta.class',\n    },\n    {\n      foreground: '5cb3fa',\n      token: 'keyword.other.special-method',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'storage',\n    },\n    {\n      foreground: '5ebfcc',\n      token: 'support.function',\n    },\n    {\n      foreground: '9acc76',\n      token: 'string',\n    },\n    {\n      foreground: '9acc76',\n      token: 'constant.other.symbol',\n    },\n    {\n      foreground: '9acc76',\n      token: 'entity.other.inherited-class',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'constant.numeric',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'none',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'none',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'constant',\n    },\n    {\n      foreground: 'eb6772',\n      token: 'entity.name.tag',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'entity.other.attribute-name',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'entity.other.attribute-name.id',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'punctuation.definition.entity',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'meta.selector',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'none',\n    },\n    {\n      foreground: '5cb3fa',\n      token: 'markup.heading punctuation.definition.heading',\n    },\n    {\n      foreground: '5cb3fa',\n      token: 'entity.name.section',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'keyword.other.unit',\n    },\n    {\n      foreground: 'f0c678',\n      token: 'markup.bold',\n    },\n    {\n      foreground: 'f0c678',\n      token: 'punctuation.definition.bold',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'markup.italic',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'punctuation.definition.italic',\n    },\n    {\n      foreground: '9acc76',\n      token: 'markup.raw.inline',\n    },\n    {\n      foreground: 'eb6772',\n      token: 'string.other.link',\n    },\n    {\n      foreground: 'eb6772',\n      token: 'punctuation.definition.string.end.markdown',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'meta.link',\n    },\n    {\n      foreground: 'eb6772',\n      token: 'markup.list',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'markup.quote',\n    },\n    {\n      foreground: 'adb7c9',\n      background: '515151',\n      token: 'meta.separator',\n    },\n    {\n      foreground: '9acc76',\n      token: 'markup.inserted',\n    },\n    {\n      foreground: 'eb6772',\n      token: 'markup.deleted',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'markup.changed',\n    },\n    {\n      foreground: '5ebfcc',\n      token: 'constant.other.color',\n    },\n    {\n      foreground: '5ebfcc',\n      token: 'string.regexp',\n    },\n    {\n      foreground: '5ebfcc',\n      token: 'constant.character.escape',\n    },\n    {\n      foreground: 'c94e42',\n      token: 'punctuation.section.embedded',\n    },\n    {\n      foreground: 'c94e42',\n      token: 'variable.interpolation',\n    },\n    {\n      foreground: 'ffffff',\n      background: 'e05252',\n      token: 'invalid.illegal',\n    },\n    {\n      foreground: '2d2d2d',\n      background: 'f99157',\n      token: 'invalid.broken',\n    },\n    {\n      foreground: '2c323d',\n      background: 'd27b53',\n      token: 'invalid.deprecated',\n    },\n    {\n      foreground: '2c323d',\n      background: '747369',\n      token: 'invalid.unimplemented',\n    },\n    {\n      foreground: 'eb6772',\n      token:\n        'source.json meta.structure.dictionary.json string.quoted.double.json',\n    },\n    {\n      foreground: '9acc76',\n      token:\n        'source.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json',\n    },\n    {\n      foreground: 'eb6772',\n      token:\n        'source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json string.quoted.double.json',\n    },\n    {\n      foreground: '9acc76',\n      token:\n        'source.json meta.structure.dictionary.json meta.structure.dictionary.value.json meta.structure.dictionary.json meta.structure.dictionary.value.json string.quoted.double.json',\n    },\n    {\n      foreground: 'cd74e8',\n      token:\n        'text.html.laravel-blade source.php.embedded.line.html entity.name.tag.laravel-blade',\n    },\n    {\n      foreground: 'cd74e8',\n      token:\n        'text.html.laravel-blade source.php.embedded.line.html support.constant.laravel-blade',\n    },\n    {\n      foreground: 'db9d63',\n      token:\n        'source.python meta.function.python meta.function.parameters.python variable.parameter.function.python',\n    },\n    {\n      foreground: '5ebfcc',\n      token: 'source.python meta.function-call.python support.type.python',\n    },\n    {\n      foreground: 'cd74e8',\n      token: 'source.python keyword.operator.logical.python',\n    },\n    {\n      foreground: 'f0c678',\n      token:\n        'source.python meta.class.python punctuation.definition.inheritance.begin.python',\n    },\n    {\n      foreground: 'f0c678',\n      token:\n        'source.python meta.class.python punctuation.definition.inheritance.end.python',\n    },\n    {\n      foreground: 'db9d63',\n      token:\n        'source.python meta.function-call.python meta.function-call.arguments.python variable.parameter.function.python',\n    },\n    {\n      foreground: 'db9d63',\n      token:\n        'text.html.basic source.php.embedded.block.html support.constant.std.php',\n    },\n    {\n      foreground: 'f0c678',\n      token:\n        'text.html.basic source.php.embedded.block.html meta.namespace.php entity.name.type.namespace.php',\n    },\n    {\n      foreground: 'db9d63',\n      token: 'source.js meta.function.js support.constant.js',\n    },\n    {\n      foreground: 'cd74e8',\n      token:\n        'text.html.basic` source.php.embedded.block.html constant.other.php',\n    },\n    {\n      foreground: 'db9d63',\n      token:\n        'text.html.basic source.php.embedded.block.html support.other.namespace.php',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'text.tex.latex meta.function.environment.math.latex string.other.math.block.environment.latex meta.definition.label.latex variable.parameter.definition.label.latex',\n    },\n    {\n      foreground: 'cd74e8',\n      fontStyle: ' italic',\n      token: 'text.tex.latex meta.function.emph.latex markup.italic.emph.latex',\n    },\n    {\n      foreground: 'adb7c9',\n      token: 'source.js variable.other.readwrite.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.function-call.with-arguments.js variable.function.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.without-arguments.js variable.function.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.group.braces.round meta.group.braces.curly variable.other.object.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js string.unquoted.label.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.group.braces.round meta.group.braces.curly constant.other.object.key.js punctuation.separator.key-value.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.group.braces.round meta.group.braces.curly meta.function-call.method.with-arguments.js variable.function.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.function-call.method.with-arguments.js variable.function.js',\n    },\n    {\n      foreground: 'adb7c9',\n      token:\n        'source.js meta.function-call.method.without-arguments.js variable.function.js',\n    },\n  ],\n  colors: {\n    'editor.foreground': '#6c7079',\n    'editor.background': '#2B303B',\n    'editor.selectionBackground': '#bbccf51b',\n    'editor.inactiveSelectionBackground': '#bbccf51b',\n    'editor.lineHighlightBackground': '#8cc2fc0b',\n    'editorCursor.foreground': '#528bff',\n    'editorWhitespace.foreground': '#747369',\n    'editorIndentGuide.background': '#464c55',\n    'editorIndentGuide.activeBackground': '#464c55',\n    'editor.selectionHighlightBorder': '#bbccf51b',\n  },\n};\n\nexport default {\n  name: 'One-Dark',\n  themeName: 'one-dark',\n  themeData,\n};\n","// @flow\nimport TomorrowNight from './TomorrowNight';\nimport Monokai from './Monokai';\nimport Tomorrow from './Tomorrow';\nimport SolarizedDark from './SolarizedDark';\nimport SolarizedLight from './SolarizedLight';\nimport VibrantInk from './VibrantInk';\nimport GitHub from './GitHub';\nimport NordDark from './NordDark';\nimport OneDark from './OneDark';\n\ntype CodeEditorTheme = {|\n  name: string,\n  themeName: string,\n  themeData?: any,\n|};\n\n// Want to add a new theme? Grab a theme made for Visual Studio Code (Monaco Editor)\n// (for example on https://bitwiser.in/monaco-themes/). Copy an existing file (like Monokai.js),\n// replace themeData, update the name, and finally add it to this list\n// (+import it at the top of the file):\nconst themes: Array<CodeEditorTheme> = [\n  // Built-in Monaco editor themes\n  {\n    name: 'Visual Studio',\n    themeName: 'vs',\n  },\n  {\n    name: 'Visual Studio Dark',\n    themeName: 'vs-dark',\n  },\n  // Third parties themes\n  GitHub,\n  Monokai,\n  SolarizedDark,\n  SolarizedLight,\n  Tomorrow,\n  TomorrowNight,\n  VibrantInk,\n  NordDark,\n  OneDark,\n];\n\nexport const getAllThemes = () => themes;\n","// @flow\n\nconst rtlLanguages = new Set([\n  // Hebrew scripts:\n  'he_IL' /* Hebrew */,\n\n  // Arabic scripts:\n  'ar_SA' /* Arabic */,\n  'az_AZ' /* Azerbaijani */,\n  'ms_MY' /* Malay */,\n  'fa_IR' /* Persian */,\n  'ur_PK' /* Urdu */,\n]);\n\nexport function isLtr(name: string): boolean {\n  return !rtlLanguages.has(name);\n}\n\n// TODO: Implement full support of RTL languages by adding dir=\"ltr\"\n// to the `body` element. Doing so will revert most layouts in the app,\n// which is fine. There are a few things to take care of:\n// - ImagePreview (already fixed),\n// - TextFieldWithButtonLayout (margins on the button),\n// - ColorField (margins/positioning off the button),\n// - EditorMosaic (i.e: react-mosaic) has issues with the positioning of the resize handles,\n// - and anything else using absolute positioning.\n","// @flow\n\nexport default function<Input, Output>(func: Input => Output): Input => Output {\n  const primitives = new Map<Input, Output>();\n  // $FlowFixMe - WeakMap is only used when Input is an object.\n  const objects = new WeakMap<Input, Output>();\n\n  function cacheFor(input: Input) {\n    const isObject = typeof input === 'object';\n    return isObject ? objects : primitives;\n  }\n\n  return (input: Input): Output => {\n    const cache = cacheFor(input);\n    const cachedValue = cache.get(input);\n    if (cachedValue) return cachedValue;\n\n    const value = func(input);\n    cache.set(input, value);\n    return value;\n  };\n}\n","import { createGdevelopTheme } from '../CreateTheme';\n\nimport darkStyles from './DarkThemeVariables.json';\nimport './DarkThemeVariables.css';\n\nexport default createGdevelopTheme(darkStyles, 'DarkTheme', 'dark');\n","import { createGdevelopTheme } from '../CreateTheme';\n\nimport darkStyles from './NordThemeVariables.json';\nimport './NordThemeVariables.css';\n\nexport default createGdevelopTheme(\n  darkStyles,\n  'NordTheme',\n  'dark',\n  'hue-rotate(-15deg) saturate(57%) brightness(120%)'\n);\n","import { createGdevelopTheme } from '../CreateTheme';\n\nimport darkStyles from './SolarizedDarkThemeVariables';\nimport './SolarizedDarkThemeVariables.css';\n\nexport default createGdevelopTheme(\n  darkStyles,\n  'SolarizedDarkTheme',\n  'dark',\n  'hue-rotate(-15deg) saturate(70%) brightness(90%)'\n);\n","import { createGdevelopTheme } from '../CreateTheme';\n\nimport styles from './OneDarkThemeVariables.json';\nimport './OneDarkThemeVariables.css';\n\nexport default createGdevelopTheme(\n  styles,\n  'OneDarkTheme',\n  'dark',\n  'hue-rotate(-10deg) saturate(50%)'\n);\n","// This file is generated by create-new-theme.js script\nimport DefaultTheme from './DefaultTheme';\nimport DarkTheme from './DarkTheme';\nimport NordTheme from './NordTheme';\nimport SolarizedDarkTheme from './SolarizedDarkTheme';\nimport OneDarkTheme from './OneDarkTheme';\n\n/*eslint no-useless-computed-key: \"off\"*/\nexport const themes = {\n  ['GDevelop default']: DefaultTheme,\n  ['Dark']: DarkTheme,\n  ['Nord']: NordTheme,\n  ['Solarized Dark']: SolarizedDarkTheme,\n  ['One Dark']: OneDarkTheme,\n};\n","// @flow\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { isLtr } from '../../Utils/i18n/RtlLanguages';\nimport memoize from '../../Utils/Memoize';\n\nimport DefaultTheme from './DefaultTheme';\nimport { themes as themeList } from './ThemeRegistry';\n\nimport 'react-virtualized/styles.css';\n// Styles\nimport './Global/Animation.css';\nimport './Global/EventsSheet.css';\nimport './Global/Markdown.css';\nimport './Global/Scrollbar.css';\nimport './Global/Mosaic.css';\nimport './Global/Table.css';\n\nexport type Theme = $Exact<typeof DefaultTheme>;\nexport const themes = themeList;\n\nexport type GDevelopTheme = $PropertyType<Theme, 'gdevelopTheme'>;\ntype ActualTheme = {| gdevelopTheme: GDevelopTheme, muiTheme: Object |};\ntype MuiThemeOptions = $PropertyType<Theme, 'muiThemeOptions'>;\nconst defaultThemeName = 'GDevelop default';\n\nexport function getTheme({\n  themeName,\n  language,\n}: {|\n  themeName: string,\n  language: string,\n|}): ActualTheme {\n  let theme: Theme = themes[themeName];\n\n  if (!theme) {\n    console.warn(\n      `Theme '${themeName}' is unavailable; '${defaultThemeName}' is used`\n    );\n    theme = themes[defaultThemeName];\n  }\n\n  const ltr = isLtr(language);\n  const { gdevelopTheme, muiThemeOptions } = theme;\n  return {\n    gdevelopTheme,\n    muiTheme: ltr\n      ? createLtrTheme(muiThemeOptions)\n      : createRtlTheme(muiThemeOptions),\n  };\n}\n\nconst createLtrTheme = memoize(\n  (muiThemeOptions: MuiThemeOptions): Object => {\n    return createMuiTheme(muiThemeOptions);\n  }\n);\n\nconst createRtlTheme = memoize(\n  (muiThemeOptions: MuiThemeOptions): Object => {\n    return createMuiTheme(muiThemeOptions, { overrides: rtlOverrides });\n  }\n);\n\nconst rtlDirection = { direction: 'rtl' };\nconst rtlOrder = { order: 100 };\nconst rtlOverrides = {\n  MuiTypography: {\n    root: rtlDirection,\n  },\n  MuiInput: {\n    root: rtlDirection,\n  },\n  MuiTab: {\n    root: rtlDirection,\n  },\n  MuiButton: {\n    label: rtlDirection,\n  },\n  MuiSvgIcon: {\n    root: rtlOrder,\n  },\n  MuiFormControlLabel: {\n    root: rtlDirection,\n  },\n  MuiTextField: {\n    root: rtlDirection,\n  },\n};\n\nexport const defaultTheme: ActualTheme = {\n  ...DefaultTheme,\n  muiThemeOptions: createLtrTheme(DefaultTheme.muiThemeOptions),\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  type AssetShortHeader,\n  isPixelArt,\n} from '../Utils/GDevelopServices/Asset';\nimport { getPixelatedImageRendering } from '../Utils/CssHelpers';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Text from '../UI/Text';\nimport { CorsAwareImage } from '../UI/CorsAwareImage';\nimport CheckeredBackground from '../ResourcesList/CheckeredBackground';\n\nconst paddingSize = 10;\nconst styles = {\n  previewContainer: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  previewImage: {\n    position: 'relative',\n    objectFit: 'contain',\n    verticalAlign: 'middle',\n    pointerEvents: 'none',\n  },\n  previewImagePixelated: {\n    width: '100%',\n    imageRendering: getPixelatedImageRendering(),\n    padding: 15,\n  },\n  icon: {\n    color: '#fff',\n  },\n  cardContainer: {\n    overflow: 'hidden',\n    position: 'relative',\n  },\n  titleContainer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: 48,\n    color: '#fff',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    backgroundColor: 'rgb(0,0,0,0.5)',\n  },\n  title: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n};\n\ntype Props = {|\n  size: number,\n  assetShortHeader: AssetShortHeader,\n  onOpenDetails: () => void,\n|};\n\nexport const AssetCard = ({ assetShortHeader, onOpenDetails, size }: Props) => {\n  return (\n    <ButtonBase onClick={onOpenDetails} focusRipple>\n      <div style={{ ...styles.cardContainer, width: size, height: size }}>\n        <div style={{ ...styles.previewContainer, width: size, height: size }}>\n          <CheckeredBackground />\n          <CorsAwareImage\n            key={assetShortHeader.previewImageUrls[0]}\n            style={{\n              maxWidth: 128 - 2 * paddingSize,\n              maxHeight: 128 - 2 * paddingSize,\n              ...styles.previewImage,\n              ...(isPixelArt(assetShortHeader)\n                ? styles.previewImagePixelated\n                : undefined),\n            }}\n            src={assetShortHeader.previewImageUrls[0]}\n            alt={assetShortHeader.name}\n          />\n        </div>\n        <div style={styles.titleContainer}>\n          <Text noMargin style={styles.title}>\n            {assetShortHeader.name}\n          </Text>\n          <Text noMargin style={styles.title} size=\"body2\">\n            {assetShortHeader.shortDescription}\n          </Text>\n        </div>\n      </div>\n    </ButtonBase>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport SearchBar from '../UI/SearchBar';\nimport { Column, Line } from '../UI/Grid';\nimport Background from '../UI/Background';\nimport ScrollView from '../UI/ScrollView';\nimport { type AssetShortHeader } from '../Utils/GDevelopServices/Asset';\nimport { BoxSearchResults } from '../UI/Search/BoxSearchResults';\nimport { FiltersChooser } from '../UI/Search/FiltersChooser';\nimport { AssetStoreContext } from './AssetStoreContext';\nimport { AssetCard } from './AssetCard';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport Subheader from '../UI/Subheader';\nimport { CategoryChooser } from '../UI/Search/CategoryChooser';\n\nconst styles = {\n  searchBar: {\n    // TODO: Can we put this in the search bar by default?\n    flexShrink: 0,\n  },\n};\n\ntype Props = {\n  project: gdProject,\n  objectsContainer: gdObjectsContainer,\n  events: gdEventsList,\n  onOpenDetails: AssetShortHeader => void,\n};\n\nexport const AssetStore = ({\n  project,\n  objectsContainer,\n  events,\n  onOpenDetails,\n}: Props) => {\n  const {\n    filters,\n    searchResults,\n    error,\n    fetchAssetsAndFilters,\n    filtersState,\n    searchText,\n    setSearchText,\n  } = React.useContext(AssetStoreContext);\n\n  React.useEffect(\n    () => {\n      fetchAssetsAndFilters();\n    },\n    [fetchAssetsAndFilters]\n  );\n\n  return (\n    <ResponsiveWindowMeasurer>\n      {windowWidth => (\n        <Column expand noMargin useFullHeight>\n          <SearchBar\n            value={searchText}\n            onChange={setSearchText}\n            onRequestSearch={() => {}}\n            style={styles.searchBar}\n          />\n          <Line\n            expand\n            overflow={\n              'hidden' /* Somehow required on Chrome/Firefox to avoid children growing (but not on Safari) */\n            }\n          >\n            <Background\n              noFullHeight\n              noExpand\n              width={windowWidth === 'small' ? 150 : 250}\n            >\n              <ScrollView>\n                <Subheader>\n                  <Trans>Categories</Trans>\n                </Subheader>\n                <CategoryChooser\n                  allItemsLabel={<Trans>All assets</Trans>}\n                  allFilters={filters}\n                  filtersState={filtersState}\n                  error={error}\n                />\n                <Subheader>\n                  <Trans>Filters</Trans>\n                </Subheader>\n                <FiltersChooser\n                  allFilters={filters}\n                  filtersState={filtersState}\n                  error={error}\n                />\n              </ScrollView>\n            </Background>\n            <BoxSearchResults\n              baseSize={128}\n              onRetry={fetchAssetsAndFilters}\n              error={error}\n              searchItems={searchResults}\n              renderSearchItem={(assetShortHeader, size) => (\n                <AssetCard\n                  size={size}\n                  onOpenDetails={() => onOpenDetails(assetShortHeader)}\n                  assetShortHeader={assetShortHeader}\n                />\n              )}\n            />\n          </Line>\n        </Column>\n      )}\n    </ResponsiveWindowMeasurer>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Column } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport Chip from '@material-ui/core/Chip';\nimport RaisedButton from '../UI/RaisedButton';\nimport {\n  type AssetShortHeader,\n  type Asset,\n  type Author,\n  getAsset,\n  isPixelArt,\n} from '../Utils/GDevelopServices/Asset';\nimport { getPixelatedImageRendering } from '../Utils/CssHelpers';\nimport LeftLoader from '../UI/LeftLoader';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport Add from '@material-ui/icons/Add';\nimport { ResponsiveLineStackLayout } from '../UI/Layout';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { CorsAwareImage } from '../UI/CorsAwareImage';\nimport { AssetStoreContext } from './AssetStoreContext';\nimport Link from '@material-ui/core/Link';\nimport Window from '../Utils/Window';\nimport CheckeredBackground from '../ResourcesList/CheckeredBackground';\n\nconst styles = {\n  previewImagePixelated: {\n    width: '100%',\n    imageRendering: getPixelatedImageRendering(),\n    padding: 15,\n  },\n  previewBackground: {\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 10,\n  },\n  verticalPreviewBackground: {\n    width: 250,\n  },\n  horizontalPreviewBackground: {\n    height: 170,\n  },\n  chip: {\n    marginBottom: 2,\n    marginRight: 2,\n  },\n  previewImage: {\n    position: 'relative',\n    maxWidth: '100%',\n    maxHeight: '100%',\n    verticalAlign: 'middle',\n    pointerEvents: 'none',\n    objectFit: 'contain',\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  layout: ?gdLayout,\n  objectsContainer: gdObjectsContainer,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n\n  assetShortHeader: AssetShortHeader,\n  onAdd: () => void,\n  onClose: () => void,\n  canInstall: boolean,\n  isBeingInstalled: boolean,\n|};\n\nexport const AssetDetails = ({\n  project,\n  layout,\n  objectsContainer,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  assetShortHeader,\n  onAdd,\n  onClose,\n  canInstall,\n  isBeingInstalled,\n}: Props) => {\n  const { authors, licenses } = React.useContext(AssetStoreContext);\n  const [asset, setAsset] = React.useState<?Asset>(null);\n  const [error, setError] = React.useState<?Error>(null);\n  const loadAsset = React.useCallback(\n    () => {\n      (async () => {\n        try {\n          const loadedAsset = await getAsset(assetShortHeader);\n          setAsset(loadedAsset);\n        } catch (error) {\n          console.log('Error while loading asset:', error);\n          setError(error);\n        }\n      })();\n    },\n    [assetShortHeader]\n  );\n\n  React.useEffect(\n    () => {\n      loadAsset();\n    },\n    [loadAsset]\n  );\n\n  const assetAuthors: ?Array<Author> =\n    asset && authors\n      ? asset.authors\n          .map(authorName => {\n            return authors.find(({ name }) => name === authorName);\n          })\n          .filter(Boolean)\n      : [];\n  const assetLicense =\n    asset && licenses\n      ? licenses.find(({ name }) => name === asset.license)\n      : null;\n\n  return (\n    <Dialog\n      open\n      title={<Trans>Add an object from the store</Trans>}\n      onRequestClose={onClose}\n      actions={[\n        <FlatButton key=\"back\" label={<Trans>Back</Trans>} onClick={onClose} />,\n        <LeftLoader\n          isLoading={isBeingInstalled || (!asset && !error)}\n          key=\"install\"\n        >\n          <RaisedButton\n            primary\n            icon={<Add />}\n            label={<Trans>Add to the game</Trans>}\n            onClick={onAdd}\n            disabled={!canInstall || isBeingInstalled || !asset}\n          />\n        </LeftLoader>,\n      ]}\n    >\n      <Column expand noMargin>\n        <ResponsiveLineStackLayout noMargin>\n          <ResponsiveWindowMeasurer>\n            {windowWidth => (\n              <div\n                style={{\n                  ...styles.previewBackground,\n                  ...(windowWidth === 'small'\n                    ? styles.horizontalPreviewBackground\n                    : styles.verticalPreviewBackground),\n                }}\n              >\n                <CheckeredBackground />\n                <CorsAwareImage\n                  style={{\n                    ...styles.previewImage,\n                    ...(isPixelArt(assetShortHeader)\n                      ? styles.previewImagePixelated\n                      : undefined),\n                  }}\n                  src={assetShortHeader.previewImageUrls[0]}\n                  alt={assetShortHeader.name}\n                />\n              </div>\n            )}\n          </ResponsiveWindowMeasurer>\n          <Column expand>\n            <div>\n              <Text size=\"title\" displayInlineAsSpan>\n                {assetShortHeader.name}\n              </Text>{' '}\n              {assetShortHeader.shortDescription && (\n                <React.Fragment>\n                  -{' '}\n                  <Text size=\"body\" displayInlineAsSpan>\n                    {assetShortHeader.shortDescription}\n                  </Text>\n                </React.Fragment>\n              )}\n            </div>\n            <span>\n              {assetShortHeader.tags.map(tag => (\n                <Chip size=\"small\" style={styles.chip} label={tag} key={tag} />\n              ))}\n            </span>\n            {asset ? (\n              <React.Fragment>\n                <Text size=\"body\">\n                  <Trans>By:</Trans>{' '}\n                  {!!assetAuthors &&\n                    assetAuthors.map(author => {\n                      return (\n                        <Link\n                          key={author.name}\n                          component=\"button\"\n                          onClick={() => {\n                            Window.openExternalURL(author.website);\n                          }}\n                        >\n                          {author.name}\n                        </Link>\n                      );\n                    })}\n                </Text>\n                <Text size=\"body\">\n                  {!!assetLicense && (\n                    <Trans>\n                      License:{' '}\n                      {\n                        <Link\n                          component=\"button\"\n                          onClick={() => {\n                            Window.openExternalURL(assetLicense.website);\n                          }}\n                        >\n                          {assetLicense.name}\n                        </Link>\n                      }\n                    </Trans>\n                  )}\n                </Text>\n                <Text size=\"body\">{asset.description}</Text>\n              </React.Fragment>\n            ) : error ? (\n              <PlaceholderError onRetry={loadAsset}>\n                <Trans>\n                  Error while loading the asset. Verify your internet connection\n                  or try again later.\n                </Trans>\n              </PlaceholderError>\n            ) : (\n              <PlaceholderLoader />\n            )}\n          </Column>\n        </ResponsiveLineStackLayout>\n      </Column>\n    </Dialog>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport ListIcon from '../UI/ListIcon';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport {\n  enumerateObjectTypes,\n  type EnumeratedObjectMetadata,\n} from '../ObjectsList/EnumerateObjects';\nimport HelpButton from '../UI/HelpButton';\nimport { getExperimentalObjects } from '../Hints';\nimport { Line, Column } from '../UI/Grid';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { AssetStore } from '.';\nimport { type AssetShortHeader } from '../Utils/GDevelopServices/Asset';\nimport EventsFunctionsExtensionsContext from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport { installAsset } from './InstallAsset';\nimport { AssetDetails } from './AssetDetails';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  sendAssetAddedToProject,\n  sendAssetOpened,\n  sendNewObjectCreated,\n} from '../Utils/Analytics/EventSender';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport { useResourceFetcher } from '../ProjectsStorage/ResourceFetcher';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport ScrollView from '../UI/ScrollView';\n\nconst ObjectListItem = ({\n  objectMetadata,\n  onClick,\n}: {|\n  objectMetadata: EnumeratedObjectMetadata,\n  onClick: () => void,\n|}) => {\n  if (objectMetadata.name === '') {\n    // Base object is an \"abstract\" object\n    return null;\n  }\n\n  return (\n    <ListItem\n      leftIcon={\n        <ListIcon\n          src={objectMetadata.iconFilename}\n          iconSize={40}\n          isGDevelopIcon\n        />\n      }\n      key={objectMetadata.name}\n      primaryText={objectMetadata.fullName}\n      secondaryText={objectMetadata.description}\n      secondaryTextLines={2}\n      onClick={onClick}\n    />\n  );\n};\n\ntype Props = {|\n  project: gdProject,\n  layout: ?gdLayout,\n  objectsContainer: gdObjectsContainer,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  events: gdEventsList,\n  onClose: () => void,\n  onCreateNewObject: (type: string) => void,\n  onObjectAddedFromAsset: gdObject => void,\n|};\n\nexport default function NewObjectDialog({\n  project,\n  layout,\n  objectsContainer,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  events,\n  onClose,\n  onCreateNewObject,\n  onObjectAddedFromAsset,\n}: Props) {\n  const {\n    setNewObjectDialogDefaultTab,\n    getNewObjectDialogDefaultTab,\n  } = React.useContext(PreferencesContext);\n  const [assetWasInstalled, setAssetWasInstalled] = React.useState(false);\n  const [openedAsset, setOpenedAsset] = React.useState<null | AssetShortHeader>(\n    null\n  );\n\n  const [currentTab, setCurrentTab] = React.useState(\n    getNewObjectDialogDefaultTab()\n  );\n  const [showExperimental, setShowExperimental] = React.useState(false);\n  const objectMetadata = React.useMemo(() => enumerateObjectTypes(project), [\n    project,\n  ]);\n  const experimentalObjectsInformation = getExperimentalObjects();\n  const resourcesFetcher = useResourceFetcher();\n\n  React.useEffect(() => setNewObjectDialogDefaultTab(currentTab), [\n    setNewObjectDialogDefaultTab,\n    currentTab,\n  ]);\n\n  const objects = objectMetadata.filter(\n    ({ name }) => !experimentalObjectsInformation[name]\n  );\n  const experimentalObjects = objectMetadata.filter(\n    ({ name }) => !!experimentalObjectsInformation[name]\n  );\n\n  const [\n    assetBeingInstalled,\n    setAssetBeingInstalled,\n  ] = React.useState<?AssetShortHeader>(null);\n  const eventsFunctionsExtensionsState = React.useContext(\n    EventsFunctionsExtensionsContext\n  );\n  const onInstallAsset = React.useCallback(\n    (assetShortHeader: AssetShortHeader) => {\n      setAssetBeingInstalled(assetShortHeader);\n      (async () => {\n        try {\n          const installOutput = await installAsset({\n            assetShortHeader,\n            eventsFunctionsExtensionsState,\n            project,\n            objectsContainer,\n            events,\n          });\n          sendAssetAddedToProject({\n            id: assetShortHeader.id,\n            name: assetShortHeader.name,\n          });\n          console.log('Asset successfully installed.');\n\n          installOutput.createdObjects.forEach(object => {\n            onObjectAddedFromAsset(object);\n          });\n\n          await resourcesFetcher.ensureResourcesAreFetched(project);\n\n          setOpenedAsset(null);\n          setAssetWasInstalled(true);\n        } catch (error) {\n          console.error('Error while installing the asset:', error);\n          showErrorBox({\n            message: `There was an error while installing the asset \"${\n              assetShortHeader.name\n            }\". Verify your internet connection or try again later.`,\n            rawError: error,\n            errorId: 'install-asset-error',\n          });\n        }\n\n        setAssetBeingInstalled(null);\n      })();\n    },\n    [\n      resourcesFetcher,\n      eventsFunctionsExtensionsState,\n      project,\n      objectsContainer,\n      events,\n      onObjectAddedFromAsset,\n    ]\n  );\n\n  return (\n    <Dialog\n      title={<Trans>Add a new object</Trans>}\n      secondaryActions={[<HelpButton helpPagePath=\"/objects\" key=\"help\" />]}\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary={false}\n          onClick={onClose}\n        />,\n      ]}\n      onRequestClose={onClose}\n      cannotBeDismissed={false}\n      open\n      flexBody\n      noMargin\n      fullHeight\n    >\n      <Column noMargin expand>\n        <Tabs value={currentTab} onChange={setCurrentTab}>\n          <Tab label={<Trans>Search Asset Store</Trans>} value=\"asset-store\" />\n          <Tab\n            label={<Trans>New object from scratch</Trans>}\n            value=\"new-object\"\n          />\n        </Tabs>\n        {currentTab === 'asset-store' && (\n          <AssetStore\n            project={project}\n            objectsContainer={objectsContainer}\n            events={events}\n            onOpenDetails={assetShortHeader => {\n              setOpenedAsset(assetShortHeader);\n              sendAssetOpened({\n                id: assetShortHeader.id,\n                name: assetShortHeader.name,\n              });\n            }}\n          />\n        )}\n        {currentTab === 'new-object' && (\n          <ScrollView>\n            <List>\n              {objects.map(objectMetadata => (\n                <ObjectListItem\n                  key={objectMetadata.name}\n                  objectMetadata={objectMetadata}\n                  onClick={() => {\n                    sendNewObjectCreated(objectMetadata.name);\n                    onCreateNewObject(objectMetadata.name);\n                  }}\n                />\n              ))}\n              {showExperimental && (\n                <Subheader>\n                  Experimental (make sure to read the documentation page)\n                </Subheader>\n              )}\n              {showExperimental &&\n                experimentalObjects.map(objectMetadata => (\n                  <ObjectListItem\n                    key={objectMetadata.name}\n                    objectMetadata={objectMetadata}\n                    onClick={() => {\n                      sendNewObjectCreated(objectMetadata.name);\n                      onCreateNewObject(objectMetadata.name);\n                    }}\n                  />\n                ))}\n            </List>\n            <Line justifyContent=\"center\" alignItems=\"center\">\n              {!showExperimental ? (\n                <FlatButton\n                  key=\"toggle-experimental\"\n                  icon={<Visibility />}\n                  primary={false}\n                  onClick={() => setShowExperimental(true)}\n                  label={<Trans>Show experimental objects</Trans>}\n                />\n              ) : (\n                <FlatButton\n                  key=\"toggle-experimental\"\n                  icon={<VisibilityOff />}\n                  primary={false}\n                  onClick={() => setShowExperimental(false)}\n                  label={<Trans>Hide experimental objects</Trans>}\n                />\n              )}\n            </Line>\n          </ScrollView>\n        )}\n      </Column>\n      {openedAsset !== null ? (\n        <AssetDetails\n          project={project}\n          layout={layout}\n          objectsContainer={objectsContainer}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceExternalEditors={resourceExternalEditors}\n          assetShortHeader={openedAsset}\n          onAdd={() => onInstallAsset(openedAsset)}\n          onClose={() => setOpenedAsset(null)}\n          canInstall={!assetBeingInstalled}\n          isBeingInstalled={\n            !!assetBeingInstalled && assetBeingInstalled.id === openedAsset.id\n          }\n        />\n      ) : null}\n      {resourcesFetcher.renderResourceFetcherDialog()}\n      <InfoBar\n        identifier=\"asset-installed-explanation\"\n        message={\n          <Trans>\n            The object was added to the list of objects. You can now use it on\n            the scene, in events, and customize it.\n          </Trans>\n        }\n        show={assetWasInstalled}\n      />\n    </Dialog>\n  );\n}\n","// @flow\nimport * as React from 'react';\nimport { t } from '@lingui/macro';\nimport Dialog from './Dialog';\nimport TextField from './TextField';\nimport FlatButton from './FlatButton';\nimport { Trans } from '@lingui/macro';\nimport { type Tags, getTagsFromString } from '../Utils/TagsHelper';\nimport { shouldValidate } from './KeyboardShortcuts/InteractionKeys';\n\ntype Props = {|\n  tagsString: string,\n  onCancel: () => void,\n  onEdit: (tags: Tags) => void,\n|};\n\ntype State = {|\n  tagsString: string,\n|};\n\n/**\n * Dialog to edit tags, with keyboard support (auto focus of tags field,\n * enter to validate, esc to dismiss dialog).\n */\nexport default class EditTagsDialog extends React.Component<Props, State> {\n  state = {\n    tagsString: this.props.tagsString,\n  };\n  _tagsField = React.createRef<TextField>();\n\n  componentDidMount() {\n    setTimeout(() => {\n      if (this._tagsField && this._tagsField.current) {\n        this._tagsField.current.focus();\n      }\n    }, 10);\n  }\n\n  render() {\n    const { onCancel, onEdit } = this.props;\n    const { tagsString } = this.state;\n\n    const tags = getTagsFromString(tagsString);\n\n    return (\n      <Dialog\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Cancel</Trans>}\n            primary={false}\n            onClick={onCancel}\n          />,\n          <FlatButton\n            key=\"add\"\n            label={\n              this.props.tagsString && !tags.length ? (\n                <Trans>Remove all tags</Trans>\n              ) : (\n                <Trans>Add/update {tags.length} tag(s)</Trans>\n              )\n            }\n            primary\n            onClick={() => onEdit(tags)}\n            disabled={!this.props.tagsString && !tags.length}\n          />,\n        ]}\n        cannotBeDismissed={false}\n        open\n        onRequestClose={onCancel}\n      >\n        <TextField\n          fullWidth\n          value={tagsString}\n          onChange={(e, tagsString) =>\n            this.setState({\n              tagsString,\n            })\n          }\n          floatingLabelText=\"Tag(s) (comma-separated)\"\n          hintText={t`For example: player, spaceship, inventory...`}\n          onKeyPress={event => {\n            if (shouldValidate(event)) {\n              onEdit(tags);\n            }\n          }}\n          ref={this._tagsField}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport Background from '../UI/Background';\nimport SearchBar from '../UI/SearchBar';\nimport NewObjectDialog from '../AssetStore/NewObjectDialog';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport {\n  enumerateObjects,\n  filterObjectsList,\n  isSameObjectWithContext,\n} from './EnumerateObjects';\nimport type {\n  ObjectWithContextList,\n  ObjectWithContext,\n} from '../ObjectsList/EnumerateObjects';\nimport { CLIPBOARD_KIND } from './ClipboardKind';\nimport TagChips from '../UI/TagChips';\nimport EditTagsDialog from '../UI/EditTagsDialog';\nimport {\n  type Tags,\n  type SelectedTags,\n  getStringFromTags,\n  buildTagsMenuTemplate,\n  getTagsFromString,\n} from '../Utils/TagsHelper';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport { type HotReloadPreviewButtonProps } from '../HotReload/HotReloadPreviewButton';\nimport { useScreenType } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nexport const objectWithContextReactDndType = 'GD_OBJECT_WITH_CONTEXT';\n\nconst getObjectWithContextName = (objectWithContext: ObjectWithContext) =>\n  objectWithContext.object.getName();\n\nconst isObjectWithContextGlobal = (objectWithContext: ObjectWithContext) =>\n  objectWithContext.global;\n\nconst getPasteLabel = isGlobalObject => {\n  let clipboardObjectName = '';\n  if (Clipboard.has(CLIPBOARD_KIND)) {\n    const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n    clipboardObjectName =\n      SafeExtractor.extractStringProperty(clipboardContent, 'name') || '';\n  }\n\n  return isGlobalObject\n    ? 'Paste ' + clipboardObjectName + ' as a Global Object'\n    : 'Paste ' + clipboardObjectName;\n};\n\ntype State = {|\n  newObjectDialogOpen: boolean,\n  renamedObjectWithContext: ?ObjectWithContext,\n  searchText: string,\n  tagEditedObject: ?gdObject,\n|};\n\ntype Props = {|\n  project: gdProject,\n  layout: ?gdLayout,\n  objectsContainer: gdObjectsContainer,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  events: gdEventsList,\n  onDeleteObject: (\n    objectWithContext: ObjectWithContext,\n    cb: (boolean) => void\n  ) => void,\n  onRenameObject: (\n    objectWithContext: ObjectWithContext,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  selectedObjectNames: Array<string>,\n\n  selectedObjectTags: SelectedTags,\n  getAllObjectTags: () => Tags,\n  onChangeSelectedObjectTags: SelectedTags => void,\n\n  onEditObject: (object: gdObject, initialTab: ?string) => void,\n  onObjectCreated: gdObject => void,\n  onObjectSelected: string => void,\n  onObjectPasted?: gdObject => void,\n  canRenameObject: (newName: string) => boolean,\n\n  getThumbnail: (project: gdProject, object: Object) => string,\n  unsavedChanges?: ?UnsavedChanges,\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n|};\n\nexport default class ObjectsList extends React.Component<Props, State> {\n  sortableList: ?SortableVirtualizedItemList<ObjectWithContext>;\n  _displayedObjectWithContextsList: ObjectWithContextList = [];\n  state = {\n    newObjectDialogOpen: false,\n    renamedObjectWithContext: null,\n    searchText: '',\n    tagEditedObject: null,\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // The component is costly to render, so avoid any re-rendering as much\n    // as possible.\n    // We make the assumption that no changes to objects list is made outside\n    // from the component.\n    // If a change is made, the component won't notice it: you have to manually\n    // call forceUpdate.\n\n    if (\n      this.state.newObjectDialogOpen !== nextState.newObjectDialogOpen ||\n      this.state.renamedObjectWithContext !==\n        nextState.renamedObjectWithContext ||\n      this.state.searchText !== nextState.searchText ||\n      this.state.tagEditedObject !== nextState.tagEditedObject\n    )\n      return true;\n\n    if (\n      this.props.selectedObjectNames !== nextProps.selectedObjectNames ||\n      this.props.selectedObjectTags !== nextProps.selectedObjectTags\n    )\n      return true;\n\n    if (\n      this.props.project !== nextProps.project ||\n      this.props.objectsContainer !== nextProps.objectsContainer\n    )\n      return true;\n\n    return false;\n  }\n\n  addObject = (objectType: string) => {\n    const {\n      project,\n      objectsContainer,\n      onEditObject,\n      onObjectCreated,\n      onObjectSelected,\n    } = this.props;\n\n    const name = newNameGenerator(\n      'NewObject',\n      name =>\n        objectsContainer.hasObjectNamed(name) || project.hasObjectNamed(name)\n    );\n\n    const object = objectsContainer.insertNewObject(\n      project,\n      objectType,\n      name,\n      objectsContainer.getObjectsCount()\n    );\n    object.setTags(getStringFromTags(this.props.selectedObjectTags));\n\n    this.setState(\n      {\n        newObjectDialogOpen: false,\n      },\n      () => {\n        if (onEditObject) {\n          onEditObject(object);\n          onObjectCreated(object);\n          onObjectSelected(name);\n        }\n      }\n    );\n  };\n\n  _onObjectAddedFromAsset = (object: gdObject) => {\n    const { onObjectCreated } = this.props;\n\n    object.setTags(getStringFromTags(this.props.selectedObjectTags));\n    onObjectCreated(object);\n  };\n\n  onAddNewObject = () => {\n    this.setState({ newObjectDialogOpen: true });\n  };\n\n  _deleteObject = (objectWithContext: ObjectWithContext) => {\n    const { object, global } = objectWithContext;\n    const { project, objectsContainer } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this object? This can't be undone.\"\n    );\n    if (!answer) return;\n\n    // It's important to call onDeleteObject, because the parent might\n    // have to do some refactoring/clean up work before the object is deleted\n    // (typically, the SceneEditor will remove instances refering to the object,\n    // leading to the removal of their renderer - which can keep a reference to\n    // the object).\n    this.props.onDeleteObject(objectWithContext, doRemove => {\n      if (!doRemove) return;\n\n      if (global) {\n        project.removeObject(object.getName());\n      } else {\n        objectsContainer.removeObject(object.getName());\n      }\n\n      this._onObjectModified(false);\n    });\n  };\n\n  _copyObject = (objectWithContext: ObjectWithContext) => {\n    const { object } = objectWithContext;\n    Clipboard.set(CLIPBOARD_KIND, {\n      type: object.getType(),\n      name: object.getName(),\n      object: serializeToJSObject(object),\n    });\n  };\n\n  _cutObject = (objectWithContext: ObjectWithContext) => {\n    this._copyObject(objectWithContext);\n    this._deleteObject(objectWithContext);\n  };\n\n  _duplicateObject = (objectWithContext: ObjectWithContext) => {\n    this._copyObject(objectWithContext);\n    this._pasteAndRename(objectWithContext);\n  };\n\n  _pasteAndRename = (objectWithContext: ObjectWithContext) => {\n    this._editName(this._paste(objectWithContext));\n  };\n\n  _paste = (objectWithContext: ObjectWithContext): ?ObjectWithContext => {\n    if (!Clipboard.has(CLIPBOARD_KIND)) return null;\n\n    const { object: pasteObject, global } = objectWithContext;\n    const clipboardContent = Clipboard.get(CLIPBOARD_KIND);\n    const copiedObject = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'object'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    const type = SafeExtractor.extractStringProperty(clipboardContent, 'type');\n    if (!name || !type || !copiedObject) return;\n\n    const { project, objectsContainer, onObjectPasted } = this.props;\n\n    const newName = newNameGenerator(\n      name,\n      name =>\n        objectsContainer.hasObjectNamed(name) || project.hasObjectNamed(name),\n      ''\n    );\n\n    const newObject = global\n      ? project.insertNewObject(\n          project,\n          type,\n          newName,\n          project.getObjectPosition(pasteObject.getName())\n        )\n      : objectsContainer.insertNewObject(\n          project,\n          type,\n          newName,\n          objectsContainer.getObjectPosition(pasteObject.getName())\n        );\n\n    unserializeFromJSObject(\n      newObject,\n      copiedObject,\n      'unserializeFrom',\n      project\n    );\n    newObject.setName(newName); // Unserialization has overwritten the name.\n\n    this._onObjectModified(false);\n    if (onObjectPasted) onObjectPasted(newObject);\n\n    return { object: newObject, global };\n  };\n\n  _editName = (objectWithContext: ?ObjectWithContext) => {\n    this.setState(\n      {\n        renamedObjectWithContext: objectWithContext,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _rename = (objectWithContext: ObjectWithContext, newName: string) => {\n    const { object } = objectWithContext;\n    this.setState({\n      renamedObjectWithContext: null,\n    });\n\n    if (getObjectWithContextName(objectWithContext) === newName) return;\n\n    if (this.props.canRenameObject(newName)) {\n      this.props.onRenameObject(objectWithContext, newName, doRename => {\n        if (!doRename) return;\n\n        object.setName(newName);\n        this._onObjectModified(false);\n      });\n    }\n  };\n\n  _canMoveSelectionTo = (destinationObjectWithContext: ObjectWithContext) => {\n    // Check if at least one element in the selection can be moved.\n    const selectedObjects = this._displayedObjectWithContextsList.filter(\n      objectWithContext =>\n        this.props.selectedObjectNames.indexOf(\n          objectWithContext.object.getName()\n        ) !== -1\n    );\n    return (\n      selectedObjects.filter(movedObjectWithContext => {\n        return (\n          movedObjectWithContext.global === destinationObjectWithContext.global\n        );\n      }).length > 0\n    );\n  };\n\n  _moveSelectionTo = (destinationObjectWithContext: ObjectWithContext) => {\n    const { project, objectsContainer } = this.props;\n\n    const container: gdObjectsContainer = destinationObjectWithContext.global\n      ? project\n      : objectsContainer;\n\n    const selectedObjects = this._displayedObjectWithContextsList.filter(\n      objectWithContext =>\n        this.props.selectedObjectNames.indexOf(\n          objectWithContext.object.getName()\n        ) !== -1\n    );\n    selectedObjects.forEach(movedObjectWithContext => {\n      if (\n        movedObjectWithContext.global !== destinationObjectWithContext.global\n      ) {\n        // Can't move an object from the objects container to the global objects\n        // or vice-versa.\n        return;\n      }\n\n      const fromIndex = container.getObjectPosition(\n        movedObjectWithContext.object.getName()\n      );\n      let toIndex = container.getObjectPosition(\n        destinationObjectWithContext.object.getName()\n      );\n      if (toIndex > fromIndex) toIndex -= 1;\n      container.moveObject(fromIndex, toIndex);\n    });\n    this._onObjectModified(true);\n  };\n\n  _setAsGlobalObject = (objectWithContext: ObjectWithContext) => {\n    const { object } = objectWithContext;\n    const { project, objectsContainer } = this.props;\n\n    const objectName: string = object.getName();\n    if (!objectsContainer.hasObjectNamed(objectName)) return;\n\n    if (project.hasObjectNamed(objectName)) {\n      showWarningBox(\n        'A global object with this name already exists. Please change the object name before setting it as a global object',\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    const answer = Window.showConfirmDialog(\n      \"This object will be loaded and available in all the scenes. This is only recommended for objects that you reuse a lot and can't be undone. Make this object global?\"\n    );\n    if (!answer) return;\n\n    // It's safe to call moveObjectToAnotherContainer because it does not invalidate the\n    // references to the object in memory - so other editors like InstancesRenderer can\n    // continue to work.\n    objectsContainer.moveObjectToAnotherContainer(\n      objectName,\n      project,\n      project.getObjectsCount()\n    );\n    this._onObjectModified(true);\n  };\n\n  forceUpdateList = () => {\n    this.forceUpdate();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _openEditTagDialog = (tagEditedObject: ?gdObject) => {\n    this.setState({\n      tagEditedObject,\n    });\n  };\n\n  _changeObjectTags = (object: gdObject, tags: Tags) => {\n    object.setTags(getStringFromTags(tags));\n\n    // Force update the list as it's possible that user removed a tag\n    // from an object, that should then not be shown anymore in the list.\n    this._onObjectModified(true);\n  };\n\n  _selectObject = (objectWithContext: ?ObjectWithContext) => {\n    this.props.onObjectSelected(\n      objectWithContext ? objectWithContext.object.getName() : ''\n    );\n  };\n\n  _getObjectThumbnail = (objectWithContext: ObjectWithContext) =>\n    this.props.getThumbnail(this.props.project, objectWithContext.object);\n\n  _renderObjectMenuTemplate = (i18n: I18nType) => (\n    objectWithContext: ObjectWithContext,\n    index: number\n  ) => {\n    const { object } = objectWithContext;\n    return [\n      {\n        label: i18n._(t`Edit object`),\n        click: () => this.props.onEditObject(object),\n      },\n      {\n        label: i18n._(t`Edit object variables`),\n        click: () => this.props.onEditObject(object, 'variables'),\n      },\n      {\n        label: i18n._(t`Edit behaviors`),\n        click: () => this.props.onEditObject(object, 'behaviors'),\n      },\n      {\n        label: i18n._(t`Edit effects`),\n        click: () => this.props.onEditObject(object, 'effects'),\n      },\n      { type: 'separator' },\n      {\n        label: i18n._(t`Tags`),\n        submenu: buildTagsMenuTemplate({\n          noTagLabel: 'No tags',\n          getAllTags: this.props.getAllObjectTags,\n          selectedTags: getTagsFromString(object.getTags()),\n          onChange: objectTags => {\n            this._changeObjectTags(object, objectTags);\n          },\n          editTagsLabel: 'Add/edit tags...',\n          onEditTags: () => this._openEditTagDialog(object),\n        }),\n      },\n      {\n        label: i18n._(t`Rename`),\n        click: () => this._editName(objectWithContext),\n      },\n      {\n        label: i18n._(t`Set as a global object`),\n        enabled: !isObjectWithContextGlobal(objectWithContext),\n        click: () => this._setAsGlobalObject(objectWithContext),\n      },\n      {\n        label: i18n._(t`Delete`),\n        click: () => this._deleteObject(objectWithContext),\n      },\n      { type: 'separator' },\n      {\n        label: i18n._(t`Add a new object...`),\n        click: () => this.onAddNewObject(),\n      },\n      { type: 'separator' },\n      {\n        label: i18n._(t`Copy`),\n        click: () => this._copyObject(objectWithContext),\n      },\n      {\n        label: i18n._(t`Cut`),\n        click: () => this._cutObject(objectWithContext),\n      },\n      {\n        label: getPasteLabel(objectWithContext.global),\n        enabled: Clipboard.has(CLIPBOARD_KIND),\n        click: () => this._paste(objectWithContext),\n      },\n      {\n        label: i18n._(t`Duplicate`),\n        click: () => this._duplicateObject(objectWithContext),\n      },\n    ];\n  };\n\n  _onObjectModified = (shouldForceUpdateList: boolean) => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n\n    if (shouldForceUpdateList) this.forceUpdateList();\n    else this.forceUpdate();\n  };\n\n  render() {\n    const {\n      project,\n      layout,\n      objectsContainer,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n      selectedObjectTags,\n      events,\n    } = this.props;\n    const { searchText, tagEditedObject } = this.state;\n\n    const lists = enumerateObjects(project, objectsContainer);\n    this._displayedObjectWithContextsList = filterObjectsList(\n      lists.allObjectsList,\n      {\n        searchText,\n        selectedTags: selectedObjectTags,\n      }\n    );\n    const selectedObjects = this._displayedObjectWithContextsList.filter(\n      objectWithContext =>\n        this.props.selectedObjectNames.indexOf(\n          objectWithContext.object.getName()\n        ) !== -1\n    );\n    const renamedObjectWithContext = this._displayedObjectWithContextsList.find(\n      isSameObjectWithContext(this.state.renamedObjectWithContext)\n    );\n\n    // Force List component to be mounted again if project or objectsContainer\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr + ';' + objectsContainer.ptr;\n\n    return (\n      <Background maxWidth>\n        <TagChips\n          tags={this.props.selectedObjectTags}\n          onChange={this.props.onChangeSelectedObjectTags}\n        />\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <I18n>\n                {({ i18n }) => (\n                  <SortableVirtualizedItemList\n                    key={listKey}\n                    ref={sortableList => (this.sortableList = sortableList)}\n                    fullList={this._displayedObjectWithContextsList}\n                    width={width}\n                    height={height}\n                    getItemName={getObjectWithContextName}\n                    getItemThumbnail={this._getObjectThumbnail}\n                    isItemBold={isObjectWithContextGlobal}\n                    onEditItem={objectWithContext =>\n                      this.props.onEditObject(objectWithContext.object)\n                    }\n                    onAddNewItem={this.onAddNewObject}\n                    addNewItemLabel={<Trans>Add a new object</Trans>}\n                    selectedItems={selectedObjects}\n                    onItemSelected={this._selectObject}\n                    renamedItem={renamedObjectWithContext}\n                    onRename={this._rename}\n                    buildMenuTemplate={this._renderObjectMenuTemplate(i18n)}\n                    onMoveSelectionToItem={this._moveSelectionTo}\n                    canMoveSelectionToItem={this._canMoveSelectionTo}\n                    scaleUpItemIconWhenSelected={useScreenType() === 'touch'}\n                    reactDndType={objectWithContextReactDndType}\n                  />\n                )}\n              </I18n>\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n        {this.state.newObjectDialogOpen && (\n          <NewObjectDialog\n            onClose={() =>\n              this.setState({\n                newObjectDialogOpen: false,\n              })\n            }\n            onCreateNewObject={this.addObject}\n            onObjectAddedFromAsset={this._onObjectAddedFromAsset}\n            project={project}\n            layout={layout}\n            objectsContainer={objectsContainer}\n            events={events}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n          />\n        )}\n        {tagEditedObject && (\n          <EditTagsDialog\n            tagsString={tagEditedObject.getTags()}\n            onEdit={tags => {\n              this._changeObjectTags(tagEditedObject, tags);\n              this._openEditTagDialog(null);\n            }}\n            onCancel={() => this._openEditTagDialog(null)}\n          />\n        )}\n      </Background>\n    );\n  }\n}\n","export const CLIPBOARD_KIND = 'Object';\n","// @flow\nimport md5 from 'blueimp-md5';\n\nexport const getGravatarUrl = (\n  email: string,\n  { size }: { size: number } = { size: 40 }\n): string => {\n  const hash = md5(email.trim().toLowerCase());\n  return `https://www.gravatar.com/avatar/${hash}?s=${size}&d=retro`;\n};\n","// @flow\nimport React, { useEffect, useState } from 'react';\nimport { I18n } from '@lingui/react';\nimport { parseISO } from 'date-fns';\nimport Lock from '@material-ui/icons/Lock';\n\nimport { Column, Line } from '../../UI/Grid';\nimport Text from '../../UI/Text';\nimport {\n  compareAchievements,\n  type Badge,\n  type Achievement,\n  type AchievementWithUnlockedDate,\n} from '../../Utils/GDevelopServices/Badge';\nimport ScrollView from '../../UI/ScrollView';\n\ntype Props = {|\n  badges: Array<Badge>,\n  achievements: Array<Achievement>,\n  displayUnclaimedAchievements: boolean,\n|};\n\nconst styles = {\n  achievementsContainer: {\n    maxHeight: 250,\n  },\n  lockedAchievement: {\n    opacity: 0.4,\n  },\n  unlockedAchievement: {},\n};\n\nconst AchievementList = ({\n  badges,\n  achievements,\n  displayUnclaimedAchievements,\n}: Props) => {\n  const [\n    achievementsWithUnlockedDate,\n    setAchievementsWithUnlockedDate,\n  ] = useState<Array<AchievementWithUnlockedDate>>([]);\n\n  useEffect(\n    () => {\n      const badgeByAchievementId = badges.reduce((acc, badge) => {\n        acc[badge.achievementId] = badge;\n        return acc;\n      }, {});\n\n      const achievementsWithDate = achievements.reduce((acc, achievement) => {\n        const badge = badgeByAchievementId[achievement.id];\n        const hasBadge = !!badge;\n        if (hasBadge || (!hasBadge && displayUnclaimedAchievements)) {\n          acc.push({\n            ...achievement,\n            unlockedAt: hasBadge ? parseISO(badge.unlockedAt) : null,\n          });\n        }\n\n        return acc;\n      }, []);\n\n      achievementsWithDate.sort(compareAchievements);\n\n      setAchievementsWithUnlockedDate(achievementsWithDate);\n    },\n    [badges, achievements, displayUnclaimedAchievements]\n  );\n\n  return (\n    <Column noMargin>\n      <I18n>\n        {({ i18n }) => (\n          <ScrollView style={styles.achievementsContainer}>\n            {achievementsWithUnlockedDate.map(\n              achievement =>\n                achievement && (\n                  <Line key={achievement.id} justifyContent=\"space-between\">\n                    <Column justifyContent=\"center\">\n                      <Text\n                        noMargin\n                        style={\n                          achievement.unlockedAt\n                            ? styles.unlockedAchievement\n                            : styles.lockedAchievement\n                        }\n                      >\n                        {achievement.name}\n                      </Text>\n                      {displayUnclaimedAchievements && (\n                        <Text\n                          noMargin\n                          style={\n                            achievement.unlockedAt\n                              ? styles.unlockedAchievement\n                              : styles.lockedAchievement\n                          }\n                          size=\"body2\"\n                        >\n                          {achievement.description}\n                        </Text>\n                      )}\n                    </Column>\n                    <Column>\n                      {achievement.unlockedAt ? (\n                        <Text>{i18n.date(achievement.unlockedAt)}</Text>\n                      ) : (\n                        <Lock style={styles.lockedAchievement} />\n                      )}\n                    </Column>\n                  </Line>\n                )\n            )}\n          </ScrollView>\n        )}\n      </I18n>\n    </Column>\n  );\n};\n\nexport default AchievementList;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props} viewBox=\"0 0 528.9 511.62\">\n    <g id=\"Calque_2\" data-name=\"Calque 2\">\n      <g id=\"Calque_4\" data-name=\"Calque 4\">\n        <path\n          d=\"M144 60.33S80.75-18.31 35.82 21s-17.56 93.4-17.56 93.4 32.3 82.85 35.81 109.53S77 279.4 77 279.4s16.42 21.77 52.94 13.35 66-34.41 66-34.41ZM385 60.33S448.14-18.31 493.08 21s17.55 93.39 17.55 93.39-32.29 82.85-35.81 109.53-22.9 55.47-22.9 55.47-16.42 21.78-52.92 13.36-66-34.41-66-34.41Z\"\n          style={{\n            fill: 'none',\n            stroke: 'currentColor',\n            strokeWidth: '20px',\n            strokeMiterlimit: 10,\n          }}\n        />\n        <path\n          d=\"M395.53 429.67H352s-46.34-34.41-44.94-61.09C455.92 297 434.85 63.14 434.85 63.14H88.1S67 297 215.89 368.58c1.41 26.68-44.89 61.09-44.89 61.09h-43.58v24.57h-23.87v56.88h315.86v-56.88h-23.88Z\"\n          style={{ fill: 'inherit', strokeMiterlimit: 10 }}\n        />\n      </g>\n    </g>\n  </SvgIcon>\n));\n","// @flow\n\nimport { Trans } from '@lingui/macro';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport AlertMessage from '../../UI/AlertMessage';\n\nimport { Line } from '../../UI/Grid';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nimport Text from '../../UI/Text';\nimport {\n  getAchievements,\n  type Badge,\n  type Achievement,\n} from '../../Utils/GDevelopServices/Badge';\n\nimport AchievementList from './AchievementList';\nimport Trophy from '../../UI/CustomSvgIcons/Trophy';\nimport { useResponsiveWindowWidth } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\n\ntype Props = {|\n  badges: ?Array<Badge>,\n  displayUnclaimedAchievements: boolean,\n|};\n\nconst styles = {\n  summary: {\n    textAlign: 'center',\n  },\n  leftContainer: {\n    flex: 1,\n    margin: '20px',\n  },\n  rightContainer: {\n    flex: 2,\n  },\n};\n\nconst UserAchievements = ({ badges, displayUnclaimedAchievements }: Props) => {\n  const [achievements, setAchievements] = useState<?Array<Achievement>>(null);\n  const [displayError, setDisplayError] = useState<boolean>(false);\n  const windowWidth = useResponsiveWindowWidth();\n\n  const fetchAchievements = useCallback(async () => {\n    try {\n      setDisplayError(false);\n      const achievements = await getAchievements();\n      setAchievements(achievements);\n    } catch (err) {\n      console.log(`Error when fetching achievements: ${err}`);\n      setDisplayError(true);\n    }\n  }, []);\n\n  useEffect(\n    () => {\n      fetchAchievements();\n    },\n    [fetchAchievements]\n  );\n\n  return (\n    <ResponsiveLineStackLayout>\n      {displayError ? (\n        <Line>\n          <AlertMessage kind=\"error\">\n            <Trans>Unable to display your achievements for now.</Trans>{' '}\n            <Trans>\n              Please check your internet connection or try again later.\n            </Trans>\n          </AlertMessage>\n        </Line>\n      ) : !!badges && !!achievements ? (\n        <>\n          <div style={styles.leftContainer}>\n            <div\n              style={{\n                ...styles.summary,\n                padding: windowWidth === 'small' ? '0 20' : '20',\n              }}\n            >\n              <Trophy color=\"primary\" fontSize=\"large\" />\n              <Text size=\"title\">\n                <Trans>\n                  {badges.length}/{achievements.length} achievements\n                </Trans>\n                {badges.length === 0 && (\n                  <>\n                    {' '}\n                    <Trans>(yet!)</Trans>\n                  </>\n                )}\n              </Text>\n            </div>\n          </div>\n          {badges.length > 0 && (\n            <div style={styles.rightContainer}>\n              {badges && achievements && (\n                <AchievementList\n                  badges={badges}\n                  achievements={achievements}\n                  displayUnclaimedAchievements={displayUnclaimedAchievements}\n                />\n              )}\n            </div>\n          )}\n        </>\n      ) : (\n        <PlaceholderLoader />\n      )}\n    </ResponsiveLineStackLayout>\n  );\n};\n\nexport default UserAchievements;\n","// @flow\nimport { Trans, t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport { ResponsiveLineStackLayout } from '../UI/Layout';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport { getGravatarUrl } from '../UI/GravatarUrl';\nimport Text from '../UI/Text';\nimport TextField from '../UI/TextField';\nimport { I18n } from '@lingui/react';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport RaisedButton from '../UI/RaisedButton';\nimport UserAchievements from './Achievement/UserAchievements';\nimport {\n  ACHIEVEMENT_FEATURE_FLAG,\n  type Badge,\n} from '../Utils/GDevelopServices/Badge';\n\ntype DisplayedProfile = {\n  +email?: string,\n  description: ?string,\n  username: ?string,\n};\n\ntype Props = {|\n  profile: ?DisplayedProfile,\n  isAuthenticatedUserProfile?: boolean,\n  error?: ?Error,\n  onRetry?: () => void,\n  onChangeEmail?: () => void,\n  onEditProfile?: () => void,\n  badges: ?Array<Badge>,\n|};\n\nconst ProfileDetails = ({\n  profile,\n  isAuthenticatedUserProfile,\n  error,\n  onRetry,\n  onChangeEmail,\n  onEditProfile,\n  badges,\n}: Props) => {\n  return profile ? (\n    <I18n>\n      {({ i18n }) => (\n        <Column>\n          <Line alignItems=\"center\">\n            <Avatar src={getGravatarUrl(profile.email || '', { size: 40 })} />\n            <Spacer />\n            <Text\n              size=\"title\"\n              style={{\n                opacity: profile.username ? 1.0 : 0.5,\n              }}\n            >\n              {profile.username ||\n                (isAuthenticatedUserProfile\n                  ? i18n._(t`Edit your profile to pick a username!`)\n                  : i18n._(t`No username`))}\n            </Text>\n          </Line>\n          {isAuthenticatedUserProfile && profile.email && (\n            <Line>\n              <TextField\n                value={profile.email}\n                readOnly\n                fullWidth\n                floatingLabelText={<Trans>Email</Trans>}\n                floatingLabelFixed={true}\n              />\n            </Line>\n          )}\n          <Line>\n            <TextField\n              value={profile.description || ''}\n              readOnly\n              fullWidth\n              multiline\n              floatingLabelText={<Trans>Bio</Trans>}\n              floatingLabelFixed={true}\n              hintText={\n                isAuthenticatedUserProfile\n                  ? t`No bio defined. Edit your profile to tell us what you are using GDevelop for!`\n                  : t`No bio defined.`\n              }\n              rows={3}\n              rowsMax={5}\n            />\n          </Line>\n          {isAuthenticatedUserProfile && (\n            <ResponsiveLineStackLayout justifyContent=\"flex-end\">\n              <RaisedButton\n                label={<Trans>Change my email</Trans>}\n                onClick={onChangeEmail}\n              />\n              <RaisedButton\n                label={<Trans>Edit my profile</Trans>}\n                primary\n                onClick={onEditProfile}\n              />\n            </ResponsiveLineStackLayout>\n          )}\n          {ACHIEVEMENT_FEATURE_FLAG && (\n            <UserAchievements\n              badges={badges}\n              displayUnclaimedAchievements={!!isAuthenticatedUserProfile}\n            />\n          )}\n        </Column>\n      )}\n    </I18n>\n  ) : error ? (\n    <PlaceholderError onRetry={onRetry}>\n      <Trans>\n        Unable to load the profile, please verify your internet connection or\n        try again later.\n      </Trans>\n    </PlaceholderError>\n  ) : (\n    <PlaceholderLoader />\n  );\n};\n\nexport default ProfileDetails;\n","// @flow\nimport * as React from 'react';\nimport { type ExampleShortHeader } from '../../Utils/GDevelopServices/Example';\nimport { CorsAwareImage } from '../../UI/CorsAwareImage';\n\nconst styles = {\n  iconBackground: {\n    flex: 0,\n    display: 'flex',\n    justifyContent: 'center',\n  },\n  icon: {\n    background: 'linear-gradient(45deg, #FFFFFF33, #FFFFFF)',\n    padding: 4,\n    borderRadius: 4,\n  },\n};\n\ntype Props = {|\n  exampleShortHeader: ExampleShortHeader,\n  size: number,\n|};\n\nexport const ExampleIcon = ({ exampleShortHeader, size }: Props) => {\n  return (\n    <div style={styles.iconBackground}>\n      <CorsAwareImage\n        style={{ ...styles.icon, width: size, height: size }}\n        src={exampleShortHeader.previewImageUrls[0]}\n        alt={exampleShortHeader.name}\n      />\n    </div>\n  );\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport {\n  type ExampleShortHeader,\n  type Example,\n  getExample,\n} from '../../Utils/GDevelopServices/Example';\nimport { isCompatibleWithAsset } from '../../Utils/GDevelopServices/Asset';\nimport LeftLoader from '../../UI/LeftLoader';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport PlaceholderError from '../../UI/PlaceholderError';\nimport { MarkdownText } from '../../UI/MarkdownText';\nimport Text from '../../UI/Text';\nimport AlertMessage from '../../UI/AlertMessage';\nimport { getIDEVersion } from '../../Version';\nimport { Column, Line } from '../../UI/Grid';\nimport { Divider } from '@material-ui/core';\nimport { ColumnStackLayout } from '../../UI/Layout';\nimport { ExampleIcon } from './ExampleIcon';\nimport RaisedButtonWithSplitMenu from '../../UI/RaisedButtonWithSplitMenu';\nimport Window from '../../Utils/Window';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { UserPublicProfileChip } from '../../UI/UserPublicProfileChip';\n\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  exampleShortHeader: ExampleShortHeader,\n  isOpening: boolean,\n  onClose: () => void,\n  onOpen: () => void,\n|};\n\nexport const openExampleInWebApp = (example: Example) => {\n  Window.openExternalURL(\n    `https://editor.gdevelop-app.com/?project=${example.projectFileUrl}`\n  );\n};\n\nexport function ExampleDialog({\n  isOpening,\n  exampleShortHeader,\n  onClose,\n  onOpen,\n}: Props) {\n  const [error, setError] = React.useState<?Error>(null);\n  const [example, setExample] = React.useState<?Example>(null);\n\n  const loadExample = React.useCallback(\n    async () => {\n      setError(null);\n      try {\n        const example = await getExample(exampleShortHeader);\n        setExample(example);\n      } catch (error) {\n        setError(error);\n      }\n    },\n    [exampleShortHeader]\n  );\n\n  React.useEffect(\n    () => {\n      loadExample();\n    },\n    [loadExample]\n  );\n\n  const isCompatible = isCompatibleWithAsset(\n    getIDEVersion(),\n    exampleShortHeader\n  );\n  const hasIcon = exampleShortHeader.previewImageUrls.length > 0;\n\n  return (\n    <Dialog\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Back</Trans>}\n          primary={false}\n          onClick={onClose}\n          disabled={isOpening}\n        />,\n        <LeftLoader isLoading={isOpening} key=\"open\">\n          <RaisedButtonWithSplitMenu\n            label={\n              !isCompatible ? (\n                <Trans>Not compatible</Trans>\n              ) : (\n                <Trans>Open</Trans>\n              )\n            }\n            primary\n            onClick={onOpen}\n            disabled={isOpening || !isCompatible}\n            buildMenuTemplate={i18n => [\n              {\n                label: electron\n                  ? i18n._(t`Open in the web-app`)\n                  : i18n._(t`Open in a new tab`),\n                disabled: !example,\n                click: () => {\n                  if (example) openExampleInWebApp(example);\n                },\n              },\n            ]}\n          />\n        </LeftLoader>,\n      ]}\n      cannotBeDismissed={false}\n      open\n      onRequestClose={onClose}\n    >\n      <ColumnStackLayout expand noMargin>\n        {!isCompatible && (\n          <AlertMessage kind=\"error\">\n            <Trans>\n              Unfortunately, this example requires a newer version of GDevelop\n              to work. Update GDevelop to be able to open this example.\n            </Trans>\n          </AlertMessage>\n        )}\n        <Line alignItems=\"center\" noMargin>\n          {hasIcon ? (\n            <ExampleIcon exampleShortHeader={exampleShortHeader} size={40} />\n          ) : null}\n          <Column expand noMargin={!hasIcon}>\n            <Text noMargin size=\"title\">\n              {exampleShortHeader.name}\n            </Text>\n          </Column>\n        </Line>\n        {exampleShortHeader.authors && (\n          <Line>\n            {exampleShortHeader.authors.map(author => (\n              <UserPublicProfileChip\n                user={author}\n                key={author.id}\n                isClickable\n              />\n            ))}\n          </Line>\n        )}\n        <Text noMargin>{exampleShortHeader.shortDescription}</Text>\n        <Divider />\n        {example && (\n          <MarkdownText source={example.description} isStandaloneText />\n        )}\n        {!example && !error && <PlaceholderLoader />}\n        {!example && error && (\n          <PlaceholderError onRetry={loadExample}>\n            <Trans>\n              Can't load the example. Verify your internet connection or try\n              again later.\n            </Trans>\n          </PlaceholderError>\n        )}\n      </ColumnStackLayout>\n    </Dialog>\n  );\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport {\n  type ExampleShortHeader,\n  getExample,\n} from '../../Utils/GDevelopServices/Example';\nimport { isCompatibleWithAsset } from '../../Utils/GDevelopServices/Asset';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Text from '../../UI/Text';\nimport { Trans } from '@lingui/macro';\nimport { Column, Line } from '../../UI/Grid';\nimport RaisedButtonWithSplitMenu from '../../UI/RaisedButtonWithSplitMenu';\nimport { getIDEVersion } from '../../Version';\nimport { ExampleIcon } from './ExampleIcon';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport { showErrorBox } from '../../UI/Messages/MessageBox';\nimport { openExampleInWebApp } from './ExampleDialog';\nimport { UserPublicProfileChip } from '../../UI/UserPublicProfileChip';\n\nconst electron = optionalRequire('electron');\n\nconst styles = {\n  container: {\n    display: 'flex',\n    overflow: 'hidden',\n    padding: 8,\n  },\n  button: {\n    textAlign: 'left',\n    flex: 1,\n  },\n};\n\ntype Props = {|\n  exampleShortHeader: ExampleShortHeader,\n  isOpening: boolean,\n  onChoose: () => void,\n  onOpen: () => void,\n  onHeightComputed: number => void,\n|};\n\nexport const ExampleListItem = ({\n  exampleShortHeader,\n  isOpening,\n  onChoose,\n  onOpen,\n  onHeightComputed,\n}: Props) => {\n  // Report the height of the item once it's known.\n  const containerRef = React.useRef<?HTMLDivElement>(null);\n  React.useLayoutEffect(() => {\n    if (containerRef.current)\n      onHeightComputed(containerRef.current.getBoundingClientRect().height);\n  });\n\n  const isCompatible = isCompatibleWithAsset(\n    getIDEVersion(),\n    exampleShortHeader\n  );\n\n  const fetchAndOpenExampleInWebApp = React.useCallback(\n    async (i18n: I18nType) => {\n      try {\n        const example = await getExample(exampleShortHeader);\n        openExampleInWebApp(example);\n      } catch (error) {\n        showErrorBox({\n          message:\n            i18n._(t`Unable to fetch the example.`) +\n            ' ' +\n            i18n._(t`Verify your internet connection or try again later.`),\n          rawError: error,\n          errorId: 'example-load-error',\n        });\n      }\n    },\n    [exampleShortHeader]\n  );\n\n  return (\n    <div style={styles.container} ref={containerRef}>\n      <Line noMargin expand>\n        <ButtonBase style={styles.button} onClick={onChoose} focusRipple>\n          {!!exampleShortHeader.previewImageUrls.length && (\n            <ExampleIcon exampleShortHeader={exampleShortHeader} size={64} />\n          )}\n          <Column expand>\n            <Text noMargin>{exampleShortHeader.name} </Text>\n            {exampleShortHeader.authors && (\n              <Line>\n                {exampleShortHeader.authors.map(author => (\n                  <UserPublicProfileChip user={author} key={author.id} />\n                ))}\n              </Line>\n            )}\n            <Text noMargin size=\"body2\">\n              {exampleShortHeader.shortDescription}\n            </Text>\n          </Column>\n        </ButtonBase>\n        <Column justifyContent=\"center\">\n          <RaisedButtonWithSplitMenu\n            primary\n            label={<Trans>Open</Trans>}\n            disabled={isOpening || !isCompatible}\n            onClick={() => onOpen()}\n            buildMenuTemplate={i18n => [\n              {\n                label: i18n._(t`Open details`),\n                click: onChoose,\n              },\n              {\n                label: electron\n                  ? i18n._(t`Open in the web-app`)\n                  : i18n._(t`Open in a new tab`),\n                click: () => {\n                  fetchAndOpenExampleInWebApp(i18n);\n                },\n              },\n            ]}\n          />\n        </Column>\n      </Line>\n    </div>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport SearchBar from '../../UI/SearchBar';\nimport { Column, Line } from '../../UI/Grid';\nimport Background from '../../UI/Background';\nimport ScrollView from '../../UI/ScrollView';\nimport { type ExampleShortHeader } from '../../Utils/GDevelopServices/Example';\nimport { FiltersChooser } from '../../UI/Search/FiltersChooser';\nimport { ExampleStoreContext } from './ExampleStoreContext';\nimport { ListSearchResults } from '../../UI/Search/ListSearchResults';\nimport { ExampleListItem } from './ExampleListItem';\nimport { ResponsiveWindowMeasurer } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport Subheader from '../../UI/Subheader';\nimport { ExampleDialog } from './ExampleDialog';\n\nconst styles = {\n  searchBar: {\n    // TODO: Can we put this in the search bar by default?\n    flexShrink: 0,\n  },\n};\n\ntype Props = {|\n  isOpening: boolean,\n  onOpen: ExampleShortHeader => Promise<void>,\n|};\n\nconst getExampleName = (exampleShortHeader: ExampleShortHeader) =>\n  exampleShortHeader.name;\n\nexport const ExampleStore = ({ isOpening, onOpen }: Props) => {\n  const [\n    selectedExampleShortHeader,\n    setSelectedExampleShortHeader,\n  ] = React.useState<?ExampleShortHeader>(null);\n  const {\n    filters,\n    searchResults,\n    error,\n    fetchExamplesAndFilters,\n    filtersState,\n    searchText,\n    setSearchText,\n  } = React.useContext(ExampleStoreContext);\n\n  React.useEffect(\n    () => {\n      fetchExamplesAndFilters();\n    },\n    [fetchExamplesAndFilters]\n  );\n\n  return (\n    <React.Fragment>\n      <ResponsiveWindowMeasurer>\n        {windowWidth => (\n          <Column expand noMargin useFullHeight>\n            <SearchBar\n              value={searchText}\n              onChange={setSearchText}\n              onRequestSearch={() => {}}\n              style={styles.searchBar}\n            />\n            <Line\n              expand\n              overflow={\n                'hidden' /* Somehow required on Chrome/Firefox to avoid children growing (but not on Safari) */\n              }\n            >\n              <Background\n                noFullHeight\n                noExpand\n                width={windowWidth === 'small' ? 150 : 250}\n              >\n                <ScrollView>\n                  <Subheader>\n                    <Trans>Filters</Trans>\n                  </Subheader>\n                  <FiltersChooser\n                    allFilters={filters}\n                    filtersState={filtersState}\n                    error={error}\n                  />\n                </ScrollView>\n              </Background>\n              <ListSearchResults\n                onRetry={fetchExamplesAndFilters}\n                error={error}\n                searchItems={searchResults}\n                getSearchItemUniqueId={getExampleName}\n                renderSearchItem={(exampleShortHeader, onHeightComputed) => (\n                  <ExampleListItem\n                    isOpening={isOpening}\n                    onHeightComputed={onHeightComputed}\n                    exampleShortHeader={exampleShortHeader}\n                    onChoose={() => {\n                      setSelectedExampleShortHeader(exampleShortHeader);\n                    }}\n                    onOpen={() => {\n                      onOpen(exampleShortHeader);\n                    }}\n                  />\n                )}\n              />\n            </Line>\n          </Column>\n        )}\n      </ResponsiveWindowMeasurer>\n      {!!selectedExampleShortHeader && (\n        <ExampleDialog\n          isOpening={isOpening}\n          exampleShortHeader={selectedExampleShortHeader}\n          onOpen={() => {\n            onOpen(selectedExampleShortHeader);\n          }}\n          onClose={() => setSelectedExampleShortHeader(null)}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport {\n  type Release,\n  findRelease,\n} from '../../Utils/GDevelopServices/Release';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport { MarkdownText } from '../../UI/MarkdownText';\nimport { Column, Line } from '../../UI/Grid';\nimport Window from '../../Utils/Window';\nimport { hasBreakingChange } from '../../Utils/GDevelopServices/Release';\nimport AlertMessage from '../../UI/AlertMessage';\nimport FlatButton from '../../UI/FlatButton';\nimport RaisedButton from '../../UI/RaisedButton';\n\ntype Props = {|\n  releases: ?Array<Release>,\n  error: ?Error,\n  currentReleaseName: string,\n|};\n\n/**\n * Display information about latest releases.\n */\nconst ChangelogRenderer = ({ releases, error, currentReleaseName }: Props) => {\n  const openReleaseNote = () =>\n    Window.openExternalURL('https://github.com/4ian/GDevelop/releases');\n\n  if (error) {\n    return (\n      <Column>\n        <Line>\n          <AlertMessage kind=\"warning\">\n            <Trans>\n              Please double check online the changes to make sure that you are\n              aware of anything new in this version that would require you to\n              adapt your project.\n            </Trans>\n          </AlertMessage>\n        </Line>\n        <Line>\n          <EmptyMessage>\n            <Trans>\n              Unable to load the information about the latest GDevelop releases.\n              Verify your internet connection or retry later.\n            </Trans>\n          </EmptyMessage>\n        </Line>\n        <Line justifyContent=\"center\">\n          <RaisedButton\n            label={<Trans>See the releases notes online</Trans>}\n            onClick={openReleaseNote}\n          />\n        </Line>\n      </Column>\n    );\n  }\n\n  if (!releases) {\n    return <PlaceholderLoader />;\n  }\n\n  const currentRelease = findRelease(releases, currentReleaseName);\n  const currentVersionHasBreakingChange =\n    !!currentRelease && hasBreakingChange(currentRelease);\n\n  return (\n    <Column>\n      {currentVersionHasBreakingChange && (\n        <AlertMessage kind=\"warning\">\n          This version of GDevelop has a breaking change. Please make sure to\n          read the changes below to understand if any change or adaptation must\n          be made to your project.\n        </AlertMessage>\n      )}\n      {releases.map(release =>\n        release.name ? (\n          <MarkdownText\n            key={release.name}\n            source={\n              '# Version ' +\n              release.name +\n              '\\n---\\n' +\n              (release.description ||\n                'Changes and new features description will be available soon.')\n            }\n            isStandaloneText\n          />\n        ) : null\n      )}\n      <Line justifyContent=\"center\">\n        <FlatButton\n          label={<Trans>See all the releases notes</Trans>}\n          onClick={openReleaseNote}\n        />\n      </Line>\n    </Column>\n  );\n};\n\nexport default ChangelogRenderer;\n","// @flow\nimport axios from 'axios';\nimport { GDevelopReleaseApi } from './ApiConfigs';\n\nexport type Release = {\n  name: ?string,\n  publishedAt: ?string,\n  description: ?string,\n};\n\nexport const getReleases = (): Promise<Array<Release>> => {\n  return axios\n    .get(`${GDevelopReleaseApi.baseUrl}/release`, {\n      params: {\n        last: 4,\n      },\n    })\n    .then(response => response.data);\n};\n\nexport const hasBreakingChange = (release: Release): boolean => {\n  return (\n    (release.description || '').toLowerCase().indexOf('breaking change') !== -1\n  );\n};\n\nexport const findRelease = (\n  releases: Array<Release>,\n  name: string\n): ?Release => {\n  return releases.find(release => release.name === name);\n};\n","// @flow\nimport * as React from 'react';\nimport {\n  getReleases,\n  type Release,\n} from '../../Utils/GDevelopServices/Release';\nimport ChangelogRenderer from './ChangelogRenderer';\nimport { getIDEVersion } from '../../Version';\n\ntype State = {|\n  releases: ?Array<Release>,\n  error: ?Error,\n|};\n\ntype Props = {|\n  onUpdated?: () => void,\n|};\n\n/**\n * Load information about latest releases and display them.\n */\nexport default class Changelog extends React.Component<Props, State> {\n  state = {\n    releases: null,\n    error: null,\n  };\n\n  _onUpdated = () => {\n    if (this.props.onUpdated) this.props.onUpdated();\n  };\n\n  componentDidMount() {\n    getReleases()\n      .then(releases =>\n        this.setState(\n          {\n            releases,\n            error: null,\n          },\n          this._onUpdated\n        )\n      )\n      .catch((error: ?Error) =>\n        this.setState(\n          {\n            error,\n          },\n          this._onUpdated\n        )\n      );\n  }\n\n  render() {\n    const { releases, error } = this.state;\n    return (\n      <ChangelogRenderer\n        releases={releases}\n        error={error}\n        currentReleaseName={getIDEVersion()}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { type ExtensionShortHeader } from '../../Utils/GDevelopServices/Extension';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Text from '../../UI/Text';\nimport { Trans } from '@lingui/macro';\nimport { Column, Line } from '../../UI/Grid';\nimport { IconContainer } from '../../UI/IconContainer';\nimport { UserPublicProfileChip } from '../../UI/UserPublicProfileChip';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    textAlign: 'left',\n    overflow: 'hidden',\n    padding: 8,\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  extensionShortHeader: ExtensionShortHeader,\n  onChoose: () => void,\n  onHeightComputed: number => void,\n|};\n\nexport const ExtensionListItem = ({\n  project,\n  extensionShortHeader,\n  onChoose,\n  onHeightComputed,\n}: Props) => {\n  const alreadyInstalled = project.hasEventsFunctionsExtensionNamed(\n    extensionShortHeader.name\n  );\n\n  // Report the height of the item once it's known.\n  const containerRef = React.useRef<?HTMLDivElement>(null);\n  React.useLayoutEffect(() => {\n    if (containerRef.current)\n      onHeightComputed(containerRef.current.getBoundingClientRect().height);\n  });\n\n  return (\n    <ButtonBase onClick={onChoose} focusRipple>\n      <div style={styles.container} ref={containerRef}>\n        <Line>\n          <IconContainer\n            alt={extensionShortHeader.fullName}\n            src={extensionShortHeader.previewIconUrl}\n            size={64}\n          />\n          <Column expand>\n            <Text noMargin>\n              {extensionShortHeader.fullName}{' '}\n              {alreadyInstalled && <Trans> (already installed)</Trans>}\n            </Text>\n            {extensionShortHeader.authors && (\n              <Line>\n                {extensionShortHeader.authors.map(author => (\n                  <UserPublicProfileChip user={author} key={author.id} />\n                ))}\n              </Line>\n            )}\n            <Text noMargin size=\"body2\">\n              {extensionShortHeader.shortDescription}\n            </Text>\n          </Column>\n        </Line>\n      </div>\n    </ButtonBase>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport {\n  type ExtensionShortHeader,\n  type ExtensionHeader,\n  getExtensionHeader,\n  isCompatibleWithExtension,\n} from '../../Utils/GDevelopServices/Extension';\nimport LeftLoader from '../../UI/LeftLoader';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport PlaceholderError from '../../UI/PlaceholderError';\nimport { MarkdownText } from '../../UI/MarkdownText';\nimport Text from '../../UI/Text';\nimport AlertMessage from '../../UI/AlertMessage';\nimport { getIDEVersion } from '../../Version';\nimport { Column, Line } from '../../UI/Grid';\nimport { Divider } from '@material-ui/core';\nimport { ColumnStackLayout } from '../../UI/Layout';\nimport { IconContainer } from '../../UI/IconContainer';\nimport { UserPublicProfileChip } from '../../UI/UserPublicProfileChip';\n\ntype Props = {|\n  extensionShortHeader: ExtensionShortHeader,\n  isInstalling: boolean,\n  onClose: () => void,\n  onInstall: () => void,\n  alreadyInstalled: boolean,\n|};\ntype State = {|\n  extensionHeader: ?ExtensionHeader,\n  error: ?Error,\n|};\n\nconst getTransformedDescription = (extensionHeader: ExtensionHeader) => {\n  if (\n    extensionHeader.description.substr(\n      0,\n      extensionHeader.shortDescription.length\n    ) === extensionHeader.shortDescription\n  ) {\n    return extensionHeader.description.substr(\n      extensionHeader.shortDescription.length\n    );\n  }\n\n  return extensionHeader.description;\n};\n\nexport default class ExtensionInstallDialog extends Component<Props, State> {\n  state = {\n    extensionHeader: null,\n    error: null,\n  };\n\n  componentDidMount() {\n    this._loadExtensionheader();\n  }\n\n  _loadExtensionheader = () => {\n    this.setState({\n      error: null,\n    });\n    getExtensionHeader(this.props.extensionShortHeader).then(\n      extensionHeader => {\n        this.setState({\n          extensionHeader,\n        });\n      },\n      error => {\n        this.setState({\n          error,\n        });\n      }\n    );\n  };\n\n  render() {\n    const {\n      isInstalling,\n      extensionShortHeader,\n      onClose,\n      onInstall,\n      alreadyInstalled,\n    } = this.props;\n    const { extensionHeader, error } = this.state;\n\n    const isCompatible = isCompatibleWithExtension(\n      getIDEVersion(),\n      extensionShortHeader\n    );\n\n    return (\n      <Dialog\n        actions={[\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Back</Trans>}\n            primary={false}\n            onClick={onClose}\n            disabled={isInstalling}\n          />,\n          <LeftLoader isLoading={isInstalling} key=\"install\">\n            <FlatButton\n              label={\n                !isCompatible ? (\n                  <Trans>Not compatible</Trans>\n                ) : alreadyInstalled ? (\n                  <Trans>Re-install/update</Trans>\n                ) : (\n                  <Trans>Install in project</Trans>\n                )\n              }\n              primary\n              onClick={onInstall}\n              disabled={isInstalling || !isCompatible}\n            />\n          </LeftLoader>,\n        ]}\n        cannotBeDismissed={false}\n        open\n        onRequestClose={onClose}\n      >\n        <ColumnStackLayout expand noMargin>\n          {!isCompatible && (\n            <AlertMessage kind=\"error\">\n              <Trans>\n                Unfortunately, this extension requires a newer version of\n                GDevelop to work. Update GDevelop to be able to use this\n                extension in your project.\n              </Trans>\n            </AlertMessage>\n          )}\n          <Line alignItems=\"center\" noMargin>\n            <IconContainer\n              alt={extensionShortHeader.fullName}\n              src={extensionShortHeader.previewIconUrl}\n              size={64}\n            />\n            <Column expand>\n              <Text noMargin size=\"title\">\n                {extensionShortHeader.fullName}\n              </Text>\n              <Text noMargin size=\"body2\">\n                <Trans>Version {' ' + extensionShortHeader.version}</Trans>\n              </Text>\n              <Line>\n                {extensionShortHeader.authors &&\n                  extensionShortHeader.authors.map(author => (\n                    <UserPublicProfileChip\n                      user={author}\n                      key={author.id}\n                      isClickable\n                    />\n                  ))}\n              </Line>\n            </Column>\n          </Line>\n          <Text noMargin>{extensionShortHeader.shortDescription}</Text>\n          <Divider />\n          {extensionHeader && (\n            <MarkdownText\n              source={getTransformedDescription(extensionHeader)}\n              isStandaloneText\n            />\n          )}\n          {!extensionHeader && !error && <PlaceholderLoader />}\n          {!extensionHeader && error && (\n            <PlaceholderError onRetry={this._loadExtensionheader}>\n              <Trans>\n                Can't load the extension registry. Verify your internet\n                connection or try again later.\n              </Trans>\n            </PlaceholderError>\n          )}\n        </ColumnStackLayout>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport SearchBar from '../../UI/SearchBar';\nimport { Column, Line } from '../../UI/Grid';\nimport Background from '../../UI/Background';\nimport ScrollView from '../../UI/ScrollView';\nimport { type ExtensionShortHeader } from '../../Utils/GDevelopServices/Extension';\nimport { FiltersChooser } from '../../UI/Search/FiltersChooser';\nimport { ExtensionStoreContext } from './ExtensionStoreContext';\nimport { ListSearchResults } from '../../UI/Search/ListSearchResults';\nimport { ExtensionListItem } from './ExtensionListItem';\nimport { ResponsiveWindowMeasurer } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport ExtensionInstallDialog from './ExtensionInstallDialog';\nimport Subheader from '../../UI/Subheader';\n\nconst styles = {\n  searchBar: {\n    // TODO: Can we put this in the search bar by default?\n    flexShrink: 0,\n  },\n};\n\ntype Props = {|\n  isInstalling: boolean,\n  project: gdProject,\n  onInstall: ExtensionShortHeader => Promise<void>,\n  showOnlyWithBehaviors: boolean,\n|};\n\nconst getExtensionName = (extensionShortHeader: ExtensionShortHeader) =>\n  extensionShortHeader.name;\n\nexport const ExtensionStore = ({\n  isInstalling,\n  project,\n  onInstall,\n  showOnlyWithBehaviors,\n}: Props) => {\n  const [\n    selectedExtensionShortHeader,\n    setSelectedExtensionShortHeader,\n  ] = React.useState<?ExtensionShortHeader>(null);\n  const {\n    filters,\n    searchResults,\n    error,\n    fetchExtensionsAndFilters,\n    filtersState,\n    searchText,\n    setSearchText,\n  } = React.useContext(ExtensionStoreContext);\n\n  React.useEffect(\n    () => {\n      fetchExtensionsAndFilters();\n    },\n    [fetchExtensionsAndFilters]\n  );\n\n  const filteredSearchResults = searchResults\n    ? searchResults.filter(\n        extensionShortHeader =>\n          !showOnlyWithBehaviors ||\n          extensionShortHeader.eventsBasedBehaviorsCount > 0\n      )\n    : null;\n\n  return (\n    <React.Fragment>\n      <ResponsiveWindowMeasurer>\n        {windowWidth => (\n          <Column expand noMargin useFullHeight>\n            <SearchBar\n              value={searchText}\n              onChange={setSearchText}\n              onRequestSearch={() => {}}\n              style={styles.searchBar}\n            />\n            <Line\n              expand\n              overflow={\n                'hidden' /* Somehow required on Chrome/Firefox to avoid children growing (but not on Safari) */\n              }\n            >\n              <Background\n                noFullHeight\n                noExpand\n                width={windowWidth === 'small' ? 150 : 250}\n              >\n                <ScrollView>\n                  <Subheader>\n                    <Trans>Filters</Trans>\n                  </Subheader>\n                  <FiltersChooser\n                    allFilters={filters}\n                    filtersState={filtersState}\n                    error={error}\n                  />\n                </ScrollView>\n              </Background>\n              <ListSearchResults\n                onRetry={fetchExtensionsAndFilters}\n                error={error}\n                searchItems={filteredSearchResults}\n                getSearchItemUniqueId={getExtensionName}\n                renderSearchItem={(extensionShortHeader, onHeightComputed) => (\n                  <ExtensionListItem\n                    key={extensionShortHeader.name}\n                    project={project}\n                    onHeightComputed={onHeightComputed}\n                    extensionShortHeader={extensionShortHeader}\n                    onChoose={() => {\n                      setSelectedExtensionShortHeader(extensionShortHeader);\n                    }}\n                  />\n                )}\n              />\n            </Line>\n          </Column>\n        )}\n      </ResponsiveWindowMeasurer>\n      {!!selectedExtensionShortHeader && (\n        <ExtensionInstallDialog\n          isInstalling={isInstalling}\n          extensionShortHeader={selectedExtensionShortHeader}\n          alreadyInstalled={project.hasEventsFunctionsExtensionNamed(\n            selectedExtensionShortHeader.name\n          )}\n          onInstall={() => {\n            onInstall(selectedExtensionShortHeader);\n          }}\n          onClose={() => setSelectedExtensionShortHeader(null)}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport {\n  createTree,\n  type InstructionOrExpressionTreeNode,\n  findInTree,\n} from '../../InstructionOrExpression/CreateTree';\nimport {\n  enumerateAllInstructions,\n  enumerateFreeInstructions,\n  filterInstructionsList,\n  deduplicateInstructionsList,\n} from '../../InstructionOrExpression/EnumerateInstructions';\nimport {\n  type EnumeratedInstructionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { List, type ListItemRefType, ListItem } from '../../UI/List';\nimport SearchBar, { useShouldAutofocusSearchbar } from '../../UI/SearchBar';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport ScrollView, { type ScrollViewInterface } from '../../UI/ScrollView';\nimport { Tabs, Tab } from '../../UI/Tabs';\nimport Subheader from '../../UI/Subheader';\nimport {\n  enumerateObjectsAndGroups,\n  filterObjectsList,\n  filterGroupsList,\n  enumerateObjects,\n} from '../../ObjectsList/EnumerateObjects';\nimport TagChips from '../../UI/TagChips';\nimport { renderGroupObjectsListItem } from './SelectorListItems/SelectorGroupObjectsListItem';\nimport { renderObjectListItem } from './SelectorListItems/SelectorObjectListItem';\nimport { renderInstructionOrExpressionListItem } from './SelectorListItems/SelectorInstructionOrExpressionListItem';\nimport { renderInstructionOrExpressionTree } from './SelectorListItems/SelectorInstructionsTreeListItem';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport {\n  buildTagsMenuTemplate,\n  getTagsFromString,\n} from '../../Utils/TagsHelper';\nimport {\n  getObjectOrObjectGroupListItemValue,\n  getInstructionListItemValue,\n} from './SelectorListItems/Keys';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\n\nconst styles = {\n  searchBar: {\n    flexShrink: 0,\n  },\n};\n\nexport type TabName = 'objects' | 'free-instructions';\n\ntype State = {|\n  searchText: string,\n\n  // State for tags of objects:\n  selectedObjectTags: Array<string>,\n|};\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  scope: EventsScope,\n  currentTab: TabName,\n  onChangeTab: TabName => void,\n  isCondition: boolean,\n  focusOnMount?: boolean,\n  chosenInstructionType: ?string,\n  onChooseInstruction: (type: string, EnumeratedInstructionMetadata) => void,\n  chosenObjectName: ?string,\n  onChooseObject: (objectName: string) => void,\n  onSearchStartOrReset?: () => void,\n  style?: Object,\n|};\n\nconst iconSize = 24;\n\nexport default class InstructionOrObjectSelector extends React.PureComponent<\n  Props,\n  State\n> {\n  state = { searchText: '', selectedObjectTags: [] };\n  _searchBar = React.createRef<SearchBar>();\n  _scrollView = React.createRef<ScrollViewInterface>();\n  _selectedItem = React.createRef<ListItemRefType>();\n\n  // Free instructions, to be displayed in a tab next to the objects.\n  freeInstructionsInfo: Array<EnumeratedInstructionMetadata> = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    enumerateFreeInstructions(this.props.isCondition),\n    this.props.scope\n  );\n  freeInstructionsInfoTree: InstructionOrExpressionTreeNode = createTree(\n    this.freeInstructionsInfo\n  );\n  initialInstructionTypePath = findInTree(\n    this.freeInstructionsInfoTree,\n    this.props.chosenInstructionType\n  );\n\n  // All the instructions, to be used when searching, so that the search is done\n  // across all the instructions (including object and behaviors instructions).\n  allInstructionsInfo: Array<EnumeratedInstructionMetadata> = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    enumerateAllInstructions(this.props.isCondition),\n    this.props.scope\n  );\n\n  componentDidMount() {\n    if (\n      this.props.focusOnMount &&\n      useShouldAutofocusSearchbar() &&\n      this._searchBar.current\n    ) {\n      this._searchBar.current.focus();\n    }\n    if (this._selectedItem.current && this._scrollView.current) {\n      this._scrollView.current.scrollTo(this._selectedItem.current);\n    }\n  }\n\n  _getAllObjectTags = (): Array<string> => {\n    const { globalObjectsContainer, objectsContainer } = this.props;\n\n    const tagsSet: Set<string> = new Set();\n    enumerateObjects(\n      globalObjectsContainer,\n      objectsContainer\n    ).allObjectsList.forEach(({ object }) => {\n      getTagsFromString(object.getTags()).forEach(tag => tagsSet.add(tag));\n    });\n\n    return Array.from(tagsSet);\n  };\n\n  _buildObjectTagsMenuTemplate = (i18n: I18nType): Array<any> => {\n    const { selectedObjectTags } = this.state;\n\n    return buildTagsMenuTemplate({\n      noTagLabel: i18n._(t`No tags - add a tag to an object first`),\n      getAllTags: this._getAllObjectTags,\n      selectedTags: selectedObjectTags,\n      onChange: selectedObjectTags => {\n        this.setState({ selectedObjectTags });\n      },\n    });\n  };\n\n  render() {\n    const {\n      style,\n      globalObjectsContainer,\n      objectsContainer,\n      project,\n      chosenInstructionType,\n      onChooseInstruction,\n      chosenObjectName,\n      onChooseObject,\n      isCondition,\n      currentTab,\n      onChangeTab,\n      onSearchStartOrReset,\n    } = this.props;\n    const { searchText, selectedObjectTags } = this.state;\n\n    // If the global objects container is not the project, consider that we're\n    // not in the events of a layout or an external events sheet - but in an extension.\n    const isOutsideLayout = globalObjectsContainer !== project;\n\n    const { allObjectsList, allGroupsList } = enumerateObjectsAndGroups(\n      globalObjectsContainer,\n      objectsContainer\n    );\n    const displayedObjectsList = filterObjectsList(allObjectsList, {\n      searchText,\n      selectedTags: selectedObjectTags,\n    });\n    const displayedObjectGroupsList = selectedObjectTags.length\n      ? []\n      : filterGroupsList(allGroupsList, { searchText });\n    const isSearching = !!searchText;\n\n    const filteredInstructionsList = filterInstructionsList(\n      // When searching, search among all the instructions\n      isSearching ? this.allInstructionsInfo : this.freeInstructionsInfo,\n      { searchText }\n    );\n\n    // When searching, we can have a lot of results. Keep only the first ones.\n    // Also ensure no duplicate is shown (could be the case for the \"Create\" action,\n    // as both present in the object actions list and in the free actions list).\n    const displayedInstructionsList = isSearching\n      ? deduplicateInstructionsList(filteredInstructionsList.slice(0, 20))\n      : filteredInstructionsList;\n\n    const remainingResultsCount = isSearching\n      ? Math.max(filteredInstructionsList.length - 20, 0)\n      : 0;\n\n    const hasResults =\n      !isSearching ||\n      !!displayedObjectsList.length ||\n      !!displayedObjectGroupsList.length ||\n      !!displayedInstructionsList.length;\n\n    const onSubmitSearch = () => {\n      if (!isSearching) return;\n\n      if (displayedObjectsList.length > 0) {\n        onChooseObject(displayedObjectsList[0].object.getName());\n      } else if (displayedObjectGroupsList.length > 0) {\n        onChooseObject(displayedObjectGroupsList[0].group.getName());\n      } else if (displayedInstructionsList.length > 0) {\n        onChooseInstruction(\n          displayedInstructionsList[0].type,\n          displayedInstructionsList[0]\n        );\n      }\n    };\n\n    return (\n      <I18n key=\"tags\">\n        {({ i18n }) => (\n          <ThemeConsumer>\n            {muiTheme => (\n              <div\n                style={{\n                  backgroundColor: muiTheme.list.itemsBackgroundColor,\n                  minHeight: 0,\n                  ...style,\n                }}\n              >\n                <SearchBar\n                  value={searchText}\n                  onChange={searchText => {\n                    const oldSearchText = this.state.searchText;\n                    this.setState({\n                      searchText,\n                    });\n\n                    // Notify if needed that we started or cleared a search\n                    if (\n                      (!oldSearchText && searchText) ||\n                      (oldSearchText && !searchText)\n                    ) {\n                      if (onSearchStartOrReset) onSearchStartOrReset();\n                    }\n                  }}\n                  onRequestSearch={onSubmitSearch}\n                  buildTagsMenuTemplate={() =>\n                    this._buildObjectTagsMenuTemplate(i18n)\n                  }\n                  style={styles.searchBar}\n                  ref={this._searchBar}\n                />\n                {!isSearching && (\n                  <Tabs value={currentTab} onChange={onChangeTab}>\n                    <Tab\n                      label={<Trans>Objects</Trans>}\n                      value={('objects': TabName)}\n                    />\n                    <Tab\n                      label={\n                        isCondition ? (\n                          <Trans>Other conditions</Trans>\n                        ) : (\n                          <Trans>Other actions</Trans>\n                        )\n                      }\n                      value={('free-instructions': TabName)}\n                    />\n                  </Tabs>\n                )}\n                <ScrollView ref={this._scrollView}>\n                  {!isSearching && currentTab === 'objects' && (\n                    <TagChips\n                      tags={selectedObjectTags}\n                      onChange={selectedObjectTags =>\n                        this.setState({\n                          selectedObjectTags,\n                        })\n                      }\n                    />\n                  )}\n                  {hasResults && (\n                    <List>\n                      {(isSearching || currentTab === 'objects') && (\n                        <React.Fragment>\n                          {displayedObjectsList.map(objectWithContext =>\n                            renderObjectListItem({\n                              project: project,\n                              objectWithContext: objectWithContext,\n                              iconSize: iconSize,\n                              onClick: () =>\n                                onChooseObject(\n                                  objectWithContext.object.getName()\n                                ),\n                              selectedValue: chosenObjectName\n                                ? getObjectOrObjectGroupListItemValue(\n                                    chosenObjectName\n                                  )\n                                : undefined,\n                            })\n                          )}\n\n                          {displayedObjectGroupsList.length > 0 && (\n                            <Subheader>\n                              <Trans>Object groups</Trans>\n                            </Subheader>\n                          )}\n                          {displayedObjectGroupsList.map(groupWithContext =>\n                            renderGroupObjectsListItem({\n                              groupWithContext: groupWithContext,\n                              iconSize: iconSize,\n                              onClick: () =>\n                                onChooseObject(\n                                  groupWithContext.group.getName()\n                                ),\n                              selectedValue: chosenObjectName\n                                ? getObjectOrObjectGroupListItemValue(\n                                    chosenObjectName\n                                  )\n                                : undefined,\n                            })\n                          )}\n                        </React.Fragment>\n                      )}\n                      {isSearching && displayedInstructionsList.length > 0 && (\n                        <Subheader>\n                          {isCondition ? (\n                            <Trans>Conditions</Trans>\n                          ) : (\n                            <Trans>Actions</Trans>\n                          )}\n                        </Subheader>\n                      )}\n                      {isSearching &&\n                        displayedInstructionsList.map(instructionMetadata =>\n                          renderInstructionOrExpressionListItem({\n                            instructionOrExpressionMetadata: instructionMetadata,\n                            iconSize: iconSize,\n                            onClick: () =>\n                              onChooseInstruction(\n                                instructionMetadata.type,\n                                instructionMetadata\n                              ),\n                            selectedValue: chosenInstructionType\n                              ? getInstructionListItemValue(\n                                  chosenInstructionType\n                                )\n                              : undefined,\n                          })\n                        )}\n                      {!isSearching &&\n                        currentTab === 'free-instructions' &&\n                        renderInstructionOrExpressionTree({\n                          instructionTreeNode: this.freeInstructionsInfoTree,\n                          onChoose: onChooseInstruction,\n                          iconSize,\n                          selectedValue: chosenInstructionType\n                            ? getInstructionListItemValue(chosenInstructionType)\n                            : undefined,\n                          initiallyOpenedPath: this.initialInstructionTypePath,\n                          selectedItemRef: this._selectedItem,\n                        })}\n                      {remainingResultsCount > 0 && (\n                        <ListItem\n                          primaryText={\n                            <Trans>\n                              And {remainingResultsCount} more results.\n                            </Trans>\n                          }\n                          disabled\n                          secondaryText={\n                            <Trans>\n                              Refine your search with more specific keyword to\n                              see them.\n                            </Trans>\n                          }\n                        />\n                      )}\n                    </List>\n                  )}\n                  {!isSearching &&\n                    currentTab === 'objects' &&\n                    !allObjectsList.length && (\n                      <EmptyMessage>\n                        {isOutsideLayout ? (\n                          <Trans>\n                            There are no objects. Objects will appear if you add\n                            some as parameters.\n                          </Trans>\n                        ) : (\n                          <Trans>\n                            There is no object in your game or in this scene.\n                            Start by adding an new object in the scene editor,\n                            using the objects list.\n                          </Trans>\n                        )}\n                      </EmptyMessage>\n                    )}\n                  {!hasResults && (\n                    <EmptyMessage>\n                      <Trans>\n                        Nothing corresponding to your search. Choose an object\n                        first or browse the list of actions/conditions.\n                      </Trans>\n                    </EmptyMessage>\n                  )}\n                </ScrollView>\n              </div>\n            )}\n          </ThemeConsumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport ObjectsRenderingService from '../../../ObjectsRendering/ObjectsRenderingService';\nimport type { ObjectWithContext } from '../../../ObjectsList/EnumerateObjects';\nimport {\n  getObjectOrObjectGroupListItemValue,\n  getObjectListItemKey,\n} from './Keys';\n\ntype Props = {|\n  project: gdProject,\n  objectWithContext: ObjectWithContext,\n  iconSize: number,\n  onClick: () => void,\n  selectedValue: ?string,\n|};\n\nexport const renderObjectListItem = ({\n  project,\n  objectWithContext,\n  iconSize,\n  onClick,\n  selectedValue,\n}: Props) => {\n  const objectName: string = objectWithContext.object.getName();\n  return (\n    <ListItem\n      key={getObjectListItemKey(objectWithContext)}\n      selected={\n        selectedValue === getObjectOrObjectGroupListItemValue(objectName)\n      }\n      primaryText={objectName}\n      leftIcon={\n        <ListIcon\n          iconSize={iconSize}\n          src={ObjectsRenderingService.getThumbnail(\n            project,\n            objectWithContext.object\n          )}\n        />\n      }\n      onClick={onClick}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { ListItem } from '../../../UI/List';\nimport ListIcon from '../../../UI/ListIcon';\nimport type { GroupWithContext } from '../../../ObjectsList/EnumerateObjects';\nimport {\n  getObjectGroupListItemKey,\n  getObjectOrObjectGroupListItemValue,\n} from './Keys';\n\ntype Props = {|\n  groupWithContext: GroupWithContext,\n  iconSize: number,\n  onClick: () => void,\n  selectedValue: ?string,\n|};\n\nexport const renderGroupObjectsListItem = ({\n  groupWithContext,\n  iconSize,\n  onClick,\n  selectedValue,\n}: Props) => {\n  const groupName: string = groupWithContext.group.getName();\n  return (\n    <ListItem\n      key={getObjectGroupListItemKey(groupWithContext)}\n      selected={\n        selectedValue === getObjectOrObjectGroupListItemValue(groupName)\n      }\n      primaryText={groupName}\n      leftIcon={\n        <ListIcon\n          iconSize={iconSize}\n          src=\"res/ribbon_default/objectsgroups64.png\"\n        />\n      }\n      onClick={onClick}\n    />\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { type Resource } from '../../Utils/GDevelopServices/Asset';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport Text from '../../UI/Text';\nimport InsertDriveFile from '@material-ui/icons/InsertDriveFile';\nimport VideoLibrary from '@material-ui/icons/VideoLibrary';\nimport FontDownload from '@material-ui/icons/FontDownload';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Trans } from '@lingui/macro';\nimport { Column, Line } from '../../UI/Grid';\nimport { CorsAwareImage } from '../../UI/CorsAwareImage';\nimport CheckeredBackground from '../../ResourcesList/CheckeredBackground';\n\nconst paddingSize = 10;\nconst styles = {\n  previewContainer: {\n    display: 'flex',\n    position: 'relative',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  previewImage: {\n    position: 'relative',\n    objectFit: 'contain',\n    verticalAlign: 'middle',\n    pointerEvents: 'none',\n  },\n  previewIcon: {\n    width: 40,\n    height: 40,\n  },\n  cardContainer: {\n    overflow: 'hidden',\n    position: 'relative',\n  },\n  titleContainer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    height: 48,\n    color: '#fff',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    backgroundColor: 'rgb(0,0,0,0.5)',\n  },\n  title: {\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  icon: { width: 32, height: 32 },\n  audioElement: { width: 128, height: 40 },\n};\n\ntype ImageCardProps = {|\n  size: number,\n  resource: Resource,\n  onChoose: () => void,\n  imageStyle?: {|\n    width: number,\n    height: number,\n  |},\n|};\n\nconst ImageCard = ({\n  resource,\n  onChoose,\n  size,\n  imageStyle,\n}: ImageCardProps) => {\n  return (\n    <ButtonBase onClick={onChoose} focusRipple>\n      <div style={{ ...styles.cardContainer, width: size, height: size }}>\n        <div style={{ ...styles.previewContainer, width: size, height: size }}>\n          <CheckeredBackground />\n          <CorsAwareImage\n            key={resource.url}\n            style={{\n              ...styles.previewImage,\n              maxWidth: 128 - 2 * paddingSize,\n              maxHeight: 128 - 2 * paddingSize,\n              ...imageStyle,\n            }}\n            src={resource.url}\n            alt={resource.name}\n          />\n        </div>\n        <div style={styles.titleContainer}>\n          <Text noMargin style={styles.title}>\n            {resource.name}\n          </Text>\n          <Text noMargin style={styles.title} size=\"body2\">\n            {resource.license}\n          </Text>\n        </div>\n      </div>\n    </ButtonBase>\n  );\n};\n\ntype GenericCardProps = {|\n  size: number,\n  resource: Resource,\n  onChoose: () => void,\n  children: React.Node,\n|};\n\nconst GenericCard = ({\n  resource,\n  onChoose,\n  size,\n  children,\n}: GenericCardProps) => {\n  return (\n    <div style={{ ...styles.cardContainer, width: size, height: size }}>\n      <Column>{children}</Column>\n      <div style={styles.titleContainer}>\n        <Text noMargin style={styles.title}>\n          {resource.name}\n        </Text>\n        <Text noMargin style={styles.title} size=\"body2\">\n          {resource.license}\n        </Text>\n      </div>\n    </div>\n  );\n};\n\ntype Props = {|\n  size: number,\n  resource: Resource,\n  onChoose: () => void,\n|};\n\nexport const ResourceCard = ({ resource, onChoose, size }: Props) => {\n  const resourceKind = resource.type;\n\n  switch (resourceKind) {\n    case 'image':\n      return <ImageCard resource={resource} onChoose={onChoose} size={size} />;\n    case 'svg':\n      return (\n        <ImageCard\n          resource={resource}\n          onChoose={onChoose}\n          size={size}\n          imageStyle={styles.previewIcon}\n        />\n      );\n    case 'audio':\n      return (\n        <GenericCard onChoose={onChoose} resource={resource} size={size}>\n          <Line justifyContent=\"center\">\n            <audio controls src={resource.url} style={styles.audioElement}>\n              Audio preview is unsupported.\n            </audio>\n          </Line>\n          <Line justifyContent=\"center\">\n            <RaisedButton onClick={onChoose} label={<Trans>Choose</Trans>} />\n          </Line>\n        </GenericCard>\n      );\n    case 'json':\n      return (\n        <GenericCard onChoose={onChoose} resource={resource} size={size}>\n          <Line justifyContent=\"center\">\n            <InsertDriveFile style={styles.icon} />\n          </Line>\n          <Line justifyContent=\"center\">\n            <RaisedButton onClick={onChoose} label={<Trans>Choose</Trans>} />\n          </Line>\n        </GenericCard>\n      );\n    case 'video':\n      return (\n        <GenericCard onChoose={onChoose} resource={resource} size={size}>\n          <Line justifyContent=\"center\">\n            <VideoLibrary style={styles.icon} />\n          </Line>\n          <Line justifyContent=\"center\">\n            <RaisedButton onClick={onChoose} label={<Trans>Choose</Trans>} />\n          </Line>\n        </GenericCard>\n      );\n    case 'font':\n      return (\n        <GenericCard onChoose={onChoose} resource={resource} size={size}>\n          <Line justifyContent=\"center\">\n            <FontDownload style={styles.icon} />\n          </Line>\n          <Line justifyContent=\"center\">\n            <RaisedButton onClick={onChoose} label={<Trans>Choose</Trans>} />\n          </Line>\n        </GenericCard>\n      );\n    default:\n      return null;\n  }\n};\n","// @flow\nimport * as React from 'react';\nimport SearchBar from '../../UI/SearchBar';\nimport { Column, Line } from '../../UI/Grid';\nimport Background from '../../UI/Background';\nimport ScrollView from '../../UI/ScrollView';\nimport { type Resource } from '../../Utils/GDevelopServices/Asset';\nimport { FiltersChooser } from '../../UI/Search/FiltersChooser';\nimport { ResourceStoreContext } from './ResourceStoreContext';\nimport { BoxSearchResults } from '../../UI/Search/BoxSearchResults';\nimport { ResourceCard } from './ResourceCard';\nimport Subheader from '../../UI/Subheader';\nimport { CategoryChooser } from '../../UI/Search/CategoryChooser';\nimport { Trans } from '@lingui/macro';\n\nconst styles = {\n  searchBar: {\n    // TODO: Can we put this in the search bar by default?\n    flexShrink: 0,\n  },\n};\n\ntype Props = {\n  onChoose: Resource => void,\n  resourceKind: string,\n};\n\nexport const ResourceStore = ({ onChoose, resourceKind }: Props) => {\n  const {\n    filters,\n    searchResults,\n    error,\n    fetchResourcesAndFilters,\n    filtersState,\n    searchText,\n    setSearchText,\n  } = React.useContext(ResourceStoreContext);\n\n  React.useEffect(\n    () => {\n      fetchResourcesAndFilters();\n    },\n    [fetchResourcesAndFilters]\n  );\n\n  const searchResultsForResourceKind = searchResults\n    ? searchResults.filter(resource => resource.type === resourceKind)\n    : null;\n\n  return (\n    <Column expand noMargin useFullHeight>\n      <SearchBar\n        value={searchText}\n        onChange={setSearchText}\n        onRequestSearch={() => {}}\n        style={styles.searchBar}\n      />\n      <Line\n        expand\n        overflow={\n          'hidden' /* Somehow required on Chrome/Firefox to avoid children growing (but not on Safari) */\n        }\n      >\n        <Background noFullHeight noExpand width={250}>\n          <ScrollView>\n            <Subheader>\n              <Trans>Categories</Trans>\n            </Subheader>\n            <CategoryChooser\n              allItemsLabel={<Trans>All assets</Trans>}\n              allFilters={filters}\n              filtersState={filtersState}\n              error={error}\n            />\n            <Subheader>\n              <Trans>Filters</Trans>\n            </Subheader>\n            <FiltersChooser\n              allFilters={filters}\n              filtersState={filtersState}\n              error={error}\n            />\n          </ScrollView>\n        </Background>\n        <BoxSearchResults\n          baseSize={128}\n          onRetry={fetchResourcesAndFilters}\n          error={error}\n          searchItems={searchResultsForResourceKind}\n          renderSearchItem={(resource, size) => (\n            <ResourceCard\n              size={size}\n              resource={resource}\n              onChoose={() => onChoose(resource)}\n            />\n          )}\n        />\n      </Line>\n    </Column>\n  );\n};\n","// @flow\nimport axios from 'axios';\nimport { GDevelopAnalyticsApi } from './ApiConfigs';\n\nexport type GameMetrics = {\n  date: string,\n\n  sessions: ?{\n    /** Number of sessions for this day. */\n    d0Sessions: number,\n  },\n  players: ?{\n    /** Number of players for this day. */\n    d0Players: number,\n    /** Number of new players for this day. */\n    d0NewPlayers: number,\n  },\n  retention: ?{\n    /** Day 1 retained players (number of players that played this day, and were new players 1 days earlier). */\n    d1RetainedPlayers: number,\n    /** Day 2 retained players (number of players that played this day, and were new players 2 days earlier). */\n    d2RetainedPlayers: number,\n    /** Day 3 retained players (number of players that played this day, and were new players 3 days earlier). */\n    d3RetainedPlayers: number,\n    /** Day 4 retained players (number of players that played this day, and were new players 4 days earlier). */\n    d4RetainedPlayers: number,\n    /** Day 5 retained players (number of players that played this day, and were new players 5 days earlier). */\n    d5RetainedPlayers: number,\n    /** Day 6 retained players (number of players that played this day, and were new players 6 days earlier). */\n    d6RetainedPlayers: number,\n    /** Day 7 retained players (number of players that played this day, and were new players 7 days earlier). */\n    d7RetainedPlayers: number,\n  },\n};\n\nexport const getGameMetrics = async (\n  getAuthorizationHeader: () => Promise<string>,\n  userId: string,\n  gameId: string,\n  dayIsoDate: string\n): Promise<?GameMetrics> => {\n  const authorizationHeader = await getAuthorizationHeader();\n\n  const response = await axios.get(\n    `${GDevelopAnalyticsApi.baseUrl}/game-metrics`,\n    {\n      params: {\n        userId,\n        gameId,\n        dayIsoDate,\n      },\n      headers: {\n        Authorization: authorizationHeader,\n      },\n      validateStatus: status =>\n        (status >= 200 && status < 300) || status === 404,\n    }\n  );\n\n  if (response.status === 404) return null;\n  return response.data;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport { format, formatISO } from 'date-fns';\nimport FlatButton from '../UI/FlatButton';\nimport { Line, Spacer } from '../UI/Grid';\nimport {\n  type Game,\n  updateGame,\n  deleteGame,\n} from '../Utils/GDevelopServices/Game';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\nimport Dialog from '../UI/Dialog';\nimport { Tab, Tabs } from '../UI/Tabs';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport Text from '../UI/Text';\nimport {\n  type GameMetrics,\n  getGameMetrics,\n} from '../Utils/GDevelopServices/Analytics';\nimport AuthenticatedUserContext from '../Profile/AuthenticatedUserContext';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { CircularProgress } from '@material-ui/core';\nimport { Table, TableBody, TableRow, TableRowColumn } from '../UI/Table';\nimport AlertMessage from '../UI/AlertMessage';\nimport subDays from 'date-fns/subDays';\nimport RaisedButton from '../UI/RaisedButton';\nimport Window from '../Utils/Window';\nimport HelpButton from '../UI/HelpButton';\n\ntype Props = {|\n  game: Game,\n  project: ?gdProject,\n  initialTab: 'details' | 'analytics' | 'monetization',\n  onClose: () => void,\n  onGameUpdated: (updatedGame: Game) => void,\n  onGameDeleted: () => void,\n|};\n\nconst styles = {\n  bigIcon: {\n    width: 48,\n    height: 48,\n    marginTop: 8,\n  },\n};\n\n/** Check if the project has changes not refleted in the registered online game. */\nconst areProjectAndGameDiffering = (project: ?gdProject, game: Game) => {\n  if (!project) return false;\n\n  return (\n    project.getAuthor() !== game.authorName ||\n    project.getName() !== game.gameName\n  );\n};\n\nexport const GameDetailsDialog = ({\n  game,\n  project,\n  initialTab,\n  onClose,\n  onGameUpdated,\n  onGameDeleted,\n}: Props) => {\n  const { getAuthorizationHeader, profile } = React.useContext(\n    AuthenticatedUserContext\n  );\n  const [currentTab, setCurrentTab] = React.useState(initialTab);\n  const [gameRollingMetrics, setGameMetrics] = React.useState<?GameMetrics>(\n    null\n  );\n  const [gameRollingMetricsError, setGameMetricsError] = React.useState<?Error>(\n    null\n  );\n  const [isGameMetricsLoading, setIsGameMetricsLoading] = React.useState(false);\n\n  const yesterdayIsoDate = formatISO(subDays(new Date(), 1), {\n    representation: 'date',\n  });\n  const [analyticsDate, setAnalyticsDate] = React.useState(yesterdayIsoDate);\n\n  const loadGameMetrics = React.useCallback(\n    async () => {\n      if (!profile) return;\n\n      const { id } = profile;\n\n      setIsGameMetricsLoading(true);\n      setGameMetricsError(null);\n      try {\n        const gameRollingMetrics = await getGameMetrics(\n          getAuthorizationHeader,\n          id,\n          game.id,\n          analyticsDate\n        );\n        setGameMetrics(gameRollingMetrics);\n      } catch (err) {\n        console.error(`Unable to load game rolling metrics:`, err);\n        setGameMetricsError(err);\n      }\n      setIsGameMetricsLoading(false);\n    },\n    [getAuthorizationHeader, profile, game, analyticsDate]\n  );\n\n  React.useEffect(\n    () => {\n      loadGameMetrics();\n    },\n    [loadGameMetrics]\n  );\n\n  const updateGameFromProject = async () => {\n    if (!project) return;\n    if (!profile) return;\n    const { id } = profile;\n\n    try {\n      const game = await updateGame(getAuthorizationHeader, id, {\n        authorName: project.getAuthor(),\n        gameId: project.getProjectUuid(),\n        gameName: project.getName(),\n      });\n      onGameUpdated(game);\n    } catch (error) {\n      console.error('Unable to update the game:', error);\n    }\n  };\n\n  const unregisterGame = async () => {\n    if (!profile) return;\n    const { id } = profile;\n\n    try {\n      await deleteGame(getAuthorizationHeader, id, game.id);\n      onGameDeleted();\n    } catch (error) {\n      console.error('Unable to delete the game:', error);\n    }\n  };\n\n  return (\n    <Dialog\n      title={\n        <span>\n          {game.gameName}\n          {' - '}\n          <Trans>Dashboard</Trans>\n        </span>\n      }\n      open\n      noMargin\n      onRequestClose={onClose}\n      maxWidth=\"md\"\n      actions={[\n        <FlatButton\n          label={<Trans>Close</Trans>}\n          onClick={onClose}\n          key=\"close\"\n        />,\n      ]}\n      secondaryActions={[\n        <HelpButton key=\"help\" helpPagePath=\"/interface/games-dashboard\" />,\n      ]}\n    >\n      <Tabs value={currentTab} onChange={setCurrentTab}>\n        <Tab label={<Trans>Details</Trans>} value=\"details\" />\n        <Tab label={<Trans>Analytics</Trans>} value=\"analytics\" />\n        <Tab label={<Trans>Monetization</Trans>} value=\"monetization\" />\n      </Tabs>\n      <Line>\n        {currentTab === 'details' ? (\n          <ColumnStackLayout expand>\n            <Text>\n              <Trans>\n                Registered on{' '}\n                {format(game.createdAt * 1000 /* TODO */, 'yyyy-MM-dd')}.\n              </Trans>\n            </Text>\n            <SemiControlledTextField\n              fullWidth\n              disabled\n              value={game.gameName}\n              onChange={() => {}}\n              floatingLabelText={<Trans>Game name</Trans>}\n            />\n            <SemiControlledTextField\n              fullWidth\n              disabled\n              value={game.authorName}\n              onChange={() => {}}\n              floatingLabelText={<Trans>Author name</Trans>}\n            />\n            <Line noMargin justifyContent=\"space-between\">\n              <FlatButton\n                onClick={() => {\n                  const answer = Window.showConfirmDialog(\n                    \"Are you sure you want to unregister this game? You won't get access to analytics and metrics, unless you register it again.\"\n                  );\n\n                  if (!answer) return;\n\n                  unregisterGame();\n                }}\n                label={<Trans>Unregister this game</Trans>}\n              />\n              {areProjectAndGameDiffering(project, game) ? (\n                <RaisedButton\n                  primary\n                  onClick={() => {\n                    updateGameFromProject();\n                  }}\n                  label={\n                    <Trans>Update the game details from the project</Trans>\n                  }\n                />\n              ) : null}\n            </Line>\n          </ColumnStackLayout>\n        ) : null}\n        {currentTab === 'analytics' ? (\n          gameRollingMetricsError ? (\n            <PlaceholderError\n              onRetry={() => {\n                loadGameMetrics();\n              }}\n            >\n              <Trans>There was an issue getting the game analytics.</Trans>{' '}\n              <Trans>Verify your internet connection or try again later.</Trans>\n            </PlaceholderError>\n          ) : (\n            <ColumnStackLayout expand>\n              <Line noMargin>\n                <SelectField\n                  fullWidth\n                  floatingLabelText={<Trans>Day</Trans>}\n                  value={analyticsDate}\n                  onChange={(_, _index, newIsoDate) => {\n                    setAnalyticsDate(newIsoDate);\n                  }}\n                >\n                  {Array(5)\n                    .fill('')\n                    .map((_, index) => {\n                      const isoDate = formatISO(\n                        subDays(new Date(), index + 2),\n                        {\n                          representation: 'date',\n                        }\n                      );\n                      return (\n                        <SelectOption\n                          key={isoDate}\n                          value={isoDate}\n                          primaryText={isoDate}\n                        />\n                      );\n                    })\n                    .reverse()}\n                  <SelectOption\n                    value={yesterdayIsoDate}\n                    primaryText={t`Yesterday`}\n                  />\n                  <SelectOption\n                    value={formatISO(new Date(), { representation: 'date' })}\n                    primaryText={t`Today (so far, in real time)`}\n                  />\n                </SelectField>\n              </Line>\n              {!isGameMetricsLoading && !gameRollingMetrics ? (\n                <AlertMessage kind=\"warning\">\n                  <Trans>\n                    There were no players or stored metrics for this day. Be\n                    sure to publish your game and get players to try it to see\n                    the collected anonymous analytics.\n                  </Trans>\n                </AlertMessage>\n              ) : null}\n              <Line noMargin alignItems=\"center\">\n                <Text size=\"title\">\n                  <Trans>Main metrics</Trans>\n                </Text>\n                <Spacer />\n                {isGameMetricsLoading && <CircularProgress size={20} />}\n              </Line>\n              <Table>\n                <TableBody>\n                  <TableRow>\n                    <TableRowColumn>\n                      <Trans>Players count</Trans>\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      {gameRollingMetrics && gameRollingMetrics.players\n                        ? gameRollingMetrics.players.d0Players\n                        : '-'}\n                    </TableRowColumn>\n                  </TableRow>\n                  <TableRow>\n                    <TableRowColumn>\n                      <Trans>Sessions count</Trans>\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      {gameRollingMetrics && gameRollingMetrics.sessions\n                        ? gameRollingMetrics.sessions.d0Sessions\n                        : '-'}\n                    </TableRowColumn>\n                  </TableRow>\n                  <TableRow>\n                    <TableRowColumn>\n                      <Trans>New players count</Trans>\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      {gameRollingMetrics && gameRollingMetrics.players\n                        ? gameRollingMetrics.players.d0NewPlayers\n                        : '-'}\n                    </TableRowColumn>\n                  </TableRow>\n                </TableBody>\n              </Table>\n              {gameRollingMetrics &&\n              (!gameRollingMetrics.retention || !gameRollingMetrics.players) ? (\n                <AlertMessage kind=\"info\">\n                  Upgrade your account with a subscription to unlock all the\n                  metrics for your game.\n                </AlertMessage>\n              ) : null}\n              <Line noMargin alignItems=\"center\">\n                <Text size=\"title\">\n                  <Trans>Retention of players</Trans>\n                </Text>\n                <Spacer />\n                {isGameMetricsLoading && <CircularProgress size={20} />}\n              </Line>\n              <Table>\n                <TableBody>\n                  {[1, 2, 3, 4, 5, 6, 7].map(dayIndex => (\n                    <TableRow key={dayIndex}>\n                      <TableRowColumn>\n                        <Trans>Day {dayIndex} retained players</Trans>\n                      </TableRowColumn>\n                      <TableRowColumn>\n                        {gameRollingMetrics &&\n                        gameRollingMetrics.retention &&\n                        gameRollingMetrics.retention[\n                          `d${dayIndex}RetainedPlayers`\n                        ] != null\n                          ? gameRollingMetrics.retention[\n                              `d${dayIndex}RetainedPlayers`\n                            ]\n                          : '-'}\n                      </TableRowColumn>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </ColumnStackLayout>\n          )\n        ) : null}\n        {currentTab === 'monetization' ? (\n          <ColumnStackLayout expand>\n            <Line noMargin justifyContent=\"center\">\n              <MonetizationOnIcon color=\"disabled\" style={styles.bigIcon} />\n            </Line>\n            <EmptyMessage>\n              Services to help monetization of your game will be added later in\n              this panel.\n            </EmptyMessage>\n          </ColumnStackLayout>\n        ) : null}\n      </Line>\n    </Dialog>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { I18n } from '@lingui/react';\nimport TextField from '@material-ui/core/TextField';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\ntype Option = {|\n  text: string, // The text displayed\n  value: string, // The internal value selected\n|};\n\nexport type DataSource = Array<?Option>;\n\ntype Props = {|\n  value: Array<Option>,\n  onChange: Option => void,\n  dataSource: DataSource,\n  inputValue: ?string,\n  onInputChange: string => void,\n\n  floatingLabelText?: React.Node,\n  hintText?: MessageDescriptor,\n  helperText?: React.Node,\n  fullWidth?: boolean,\n  error?: ?string,\n  loading: boolean,\n|};\n\nexport default function SemiControlledMultiAutoComplete(props: Props) {\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Autocomplete\n          multiple\n          value={props.value}\n          onChange={props.onChange}\n          inputValue={props.inputValue}\n          onInputChange={props.onInputChange}\n          options={props.dataSource}\n          getOptionLabel={(option: Option) => option.text}\n          getOptionDisabled={(option: Option) =>\n            !!props.value.find(\n              element => element && element.value === option.value\n            )\n          }\n          loading={props.loading}\n          renderInput={params => (\n            <TextField\n              {...params}\n              InputProps={{\n                ...params.InputProps,\n                placeholder: props.hintText && i18n._(props.hintText),\n              }}\n              label={props.floatingLabelText}\n              helperText={props.error || props.helperText}\n              variant=\"filled\"\n              error={!!props.error}\n              disabled={props.loading}\n            />\n          )}\n          fullWidth={props.fullWidth}\n        />\n      )}\n    </I18n>\n  );\n}\n","//@flow\nimport * as React from 'react';\nimport { useState } from 'react';\nimport { t } from '@lingui/macro';\nimport { useDebounce } from './UseDebounce';\nimport SemiControlledMultiAutoComplete from '../UI/SemiControlledMultiAutoComplete';\nimport {\n  searchUserPublicProfilesByUsername,\n  type UserPublicProfile,\n  type UserPublicProfileSearch,\n  getUserPublicProfilesByIds,\n} from './GDevelopServices/User';\n\nimport useForceUpdate from './UseForceUpdate';\n\ntype Props = {|\n  userIds: gdVectorString,\n  floatingLabelText?: React.Node,\n  helperText: React.Node,\n|};\n\ntype Option = {|\n  text: string,\n  value: string,\n|};\n\nconst getErrorMessage = (error: ?Error) => {\n  if (error) return 'Error while loading users';\n};\n\nexport const UsersAutocomplete = (props: Props) => {\n  const forceUpdate = useForceUpdate();\n  const [users, setUsers] = React.useState<Array<Option>>([]);\n  const [userInput, setUserInput] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [\n    completionUserPublicProfiles,\n    setCompletionUserPublicProfiles,\n  ] = React.useState<Array<UserPublicProfileSearch>>([]);\n  const [error, setError] = React.useState(null);\n\n  // Recalculate if the userInput has changed.\n  const searchUserPublicProfiles = useDebounce(async () => {\n    setError(null);\n    if (!userInput) {\n      setCompletionUserPublicProfiles([]);\n      return;\n    }\n    try {\n      setLoading(true);\n      const userPublicProfiles = await searchUserPublicProfilesByUsername(\n        userInput\n      );\n      setCompletionUserPublicProfiles(userPublicProfiles);\n      setLoading(false);\n    } catch (err) {\n      setLoading(false);\n      setError(err);\n      console.error('Could not load the users: ', err);\n    }\n  }, 500);\n\n  // Call every time the userInput changes.\n  React.useEffect(\n    () => {\n      searchUserPublicProfiles();\n    },\n    [searchUserPublicProfiles, userInput]\n  );\n\n  // Do only once, the first time it is loaded.\n  const getUserPublicProfilesForAutocomplete = React.useCallback(\n    async () => {\n      setError(null);\n      const userIds = props.userIds.toJSArray();\n      if (!userIds.length) {\n        setUsers([]);\n        return;\n      }\n      try {\n        setLoading(true);\n        const userPublicProfilesByIds = await getUserPublicProfilesByIds(\n          userIds\n        );\n        setUsers(\n          Object.keys(userPublicProfilesByIds).map(userId => {\n            const userPublicProfile: UserPublicProfile =\n              userPublicProfilesByIds[userId];\n            return {\n              text: userPublicProfile.username || '(no username)',\n              value: userPublicProfile.id,\n            };\n          })\n        );\n        setLoading(false);\n      } catch (err) {\n        setLoading(false);\n        setError(err);\n        console.error('Could not load the users: ', err);\n      }\n    },\n    [props.userIds]\n  );\n\n  // Do only once.\n  React.useEffect(\n    () => {\n      getUserPublicProfilesForAutocomplete();\n    },\n    [getUserPublicProfilesForAutocomplete]\n  );\n\n  return (\n    <SemiControlledMultiAutoComplete\n      hintText={t`Start typing a username`}\n      floatingLabelText={props.floatingLabelText}\n      helperText={props.helperText}\n      value={users}\n      onChange={(event, values) => {\n        if (!values) return;\n        // change users in state\n        setUsers(values);\n        // change users in project\n        const userIds = props.userIds;\n        userIds.clear();\n        values.forEach(({ text, value }) => {\n          userIds.push_back(value);\n        });\n        forceUpdate();\n      }}\n      inputValue={userInput}\n      onInputChange={(event, value) => {\n        setUserInput(value);\n      }}\n      dataSource={completionUserPublicProfiles\n        .map((userPublicProfile: UserPublicProfileSearch) => {\n          if (userPublicProfile.username && userPublicProfile.id) {\n            return {\n              text: userPublicProfile.username,\n              value: userPublicProfile.id,\n            };\n          }\n\n          return null;\n        })\n        .filter(Boolean)}\n      loading={loading}\n      fullWidth\n      error={getErrorMessage(error)}\n    />\n  );\n};\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport React from 'react';\nimport { ListItem } from '../UI/List';\nimport TextField, {\n  noMarginTextFieldInListItemTopOffset,\n} from '../UI/TextField';\nimport ThemeConsumer from '../UI/Theme/ThemeConsumer';\nimport { shouldValidate } from '../UI/KeyboardShortcuts/InteractionKeys';\n\ntype Props = {|\n  group: gdObjectGroup,\n  style: Object,\n  onEdit: gdObjectGroup => void,\n  onEditName: () => void,\n  onDelete: () => void,\n  onRename: string => void,\n  editingName: boolean,\n  isGlobalGroup: boolean,\n  canSetAsGlobalGroup: boolean,\n  onSetAsGlobalGroup: () => void,\n|};\n\nconst styles = {\n  groupName: {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n  textField: {\n    top: noMarginTextFieldInListItemTopOffset,\n  },\n};\n\nexport default class GroupRow extends React.Component<Props, {||}> {\n  textField: ?TextField;\n\n  componentDidUpdate(prevProps: Props) {\n    if (!prevProps.editingName && this.props.editingName) {\n      setTimeout(() => {\n        if (this.textField) this.textField.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const { group, style, isGlobalGroup } = this.props;\n\n    const groupName = group.getName();\n    const label = this.props.editingName ? (\n      <TextField\n        id=\"rename-object-field\"\n        margin=\"none\"\n        ref={textField => (this.textField = textField)}\n        defaultValue={groupName}\n        onBlur={e => this.props.onRename(e.currentTarget.value)}\n        onKeyPress={event => {\n          if (shouldValidate(event)) {\n            if (this.textField) this.textField.blur();\n          }\n        }}\n        fullWidth\n        style={styles.textField}\n      />\n    ) : (\n      <div\n        style={{\n          ...styles.groupName,\n          fontStyle: isGlobalGroup ? 'italic' : undefined,\n          fontWeight: isGlobalGroup ? 'bold' : 'normal',\n        }}\n      >\n        {groupName}\n      </div>\n    );\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <I18n>\n            {({ i18n }) => (\n              <ListItem\n                style={{\n                  borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n                  ...style,\n                }}\n                primaryText={label}\n                displayMenuButton\n                buildMenuTemplate={(i18n: I18nType) => [\n                  {\n                    label: i18n._(t`Edit group`),\n                    click: () => this.props.onEdit(group),\n                  },\n                  {\n                    label: i18n._(t`Set as Global group`),\n                    enabled: !this.props.isGlobalGroup,\n                    click: () => this.props.onSetAsGlobalGroup(),\n                    visible: this.props.canSetAsGlobalGroup !== false,\n                  },\n                  {\n                    label: i18n._(t`Rename`),\n                    enabled: !!this.props.onEdit,\n                    click: () => this.props.onEditName(),\n                  },\n                  {\n                    label: i18n._(t`Delete`),\n                    enabled: !!this.props.onEdit,\n                    click: () => this.props.onDelete(),\n                  },\n                ]}\n                onClick={() => {\n                  // It's essential to discard clicks when editing the name,\n                  // to avoid weird opening of an editor when clicking on the\n                  // text field.\n                  if (!this.props.editingName) this.props.onEdit(group);\n                }}\n              />\n            )}\n          </I18n>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport { AutoSizer, List } from 'react-virtualized';\nimport Background from '../UI/Background';\nimport SearchBar from '../UI/SearchBar';\nimport GroupRow from './GroupRow';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { AddListItem } from '../UI/ListCommonItem';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport {\n  filterGroupsList,\n  enumerateGroups,\n} from '../ObjectsList/EnumerateObjects';\nimport {\n  type GroupWithContextList,\n  type GroupWithContext,\n} from '../ObjectsList/EnumerateObjects';\nimport { listItemWithoutIconHeight } from '../UI/List';\nimport Window from '../Utils/Window';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\n// TODO: This component should be updated to be implemented using SortableVirtualizedItemList,\n// so that drag'n'drop is identical to other lists (and to benefit from better typing + future improvements\n// in SortableVirtualizedItemList).\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nconst SortableGroupRow = SortableElement(props => {\n  const { style, ...otherProps } = props;\n  return (\n    <div style={style}>\n      <GroupRow {...otherProps} />\n    </div>\n  );\n});\n\nconst SortableAddGroupRow = SortableElement(props => {\n  const { style, ...otherProps } = props;\n  return (\n    <div style={style}>\n      <AddListItem {...otherProps} />\n    </div>\n  );\n});\n\nclass GroupsList extends Component<*, *> {\n  list: ?List;\n\n  forceUpdateGrid() {\n    if (this.list) this.list.forceUpdateGrid();\n  }\n\n  render() {\n    const { height, width, fullList } = this.props;\n\n    return (\n      <List\n        ref={list => (this.list = list)}\n        height={height}\n        rowCount={fullList.length}\n        rowHeight={listItemWithoutIconHeight}\n        rowRenderer={({ index, key, style }) => {\n          const groupWithContext = fullList[index];\n          if (groupWithContext.key === 'add-groups-row') {\n            return (\n              <SortableAddGroupRow\n                index={fullList.length}\n                key={key}\n                style={style}\n                disabled\n                onClick={this.props.onAddGroup}\n                primaryText={<Trans>Click to add a group</Trans>}\n              />\n            );\n          }\n\n          const nameBeingEdited =\n            this.props.renamedGroupWithScope &&\n            this.props.renamedGroupWithScope.group === groupWithContext.group &&\n            this.props.renamedGroupWithScope.global === groupWithContext.global;\n\n          return (\n            <SortableGroupRow\n              index={index}\n              key={groupWithContext.group.ptr}\n              group={groupWithContext.group}\n              style={style}\n              onEdit={\n                this.props.onEditGroup\n                  ? () => this.props.onEditGroup(groupWithContext.group)\n                  : undefined\n              }\n              onEditName={() => this.props.onEditName(groupWithContext)}\n              onDelete={() => this.props.onDelete(groupWithContext)}\n              onRename={newName =>\n                this.props.onRename(groupWithContext, newName)\n              }\n              editingName={nameBeingEdited}\n              isGlobalGroup={groupWithContext.global}\n              canSetAsGlobalGroup={this.props.canSetAsGlobalGroup}\n              onSetAsGlobalGroup={\n                groupWithContext.global\n                  ? undefined\n                  : () => this.props.onSetAsGlobalGroup(groupWithContext)\n              }\n            />\n          );\n        }}\n        width={width}\n      />\n    );\n  }\n}\n\nconst SortableGroupsList = SortableContainer(GroupsList, { withRef: true });\n\ntype State = {|\n  renamedGroupWithScope: ?GroupWithContext,\n  searchText: string,\n|};\n\ntype Props = {|\n  globalObjectGroups: gdObjectGroupsContainer,\n  objectGroups: gdObjectGroupsContainer,\n  onDeleteGroup: (groupWithContext: GroupWithContext, cb: Function) => void,\n  onEditGroup: gdObjectGroup => void,\n  canRenameGroup: (newName: string) => boolean,\n  onRenameGroup: (\n    groupWithContext: GroupWithContext,\n    newName: string,\n    cb: Function\n  ) => void,\n  onGroupAdded?: () => void,\n  onGroupRemoved?: () => void,\n  onGroupRenamed?: () => void,\n  canSetAsGlobalGroup?: boolean,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\nexport default class GroupsListContainer extends React.Component<Props, State> {\n  static defaultProps = {\n    onDeleteGroup: (groupWithContext: GroupWithContext, cb: Function) =>\n      cb(true),\n    onRenameGroup: (\n      groupWithContext: GroupWithContext,\n      newName: string,\n      cb: Function\n    ) => cb(true),\n  };\n\n  sortableList: any;\n  objectGroupsList: GroupWithContextList = [];\n  globalObjectGroupsList: GroupWithContextList = [];\n  state: State = {\n    renamedGroupWithScope: null,\n    searchText: '',\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // The component is costly to render, so avoid any re-rendering as much\n    // as possible.\n    // We make the assumption that no changes to groups list is made outside\n    // from the component.\n    // If a change is made, the component won't notice it: you have to manually\n    // call forceUpdate.\n\n    if (\n      this.state.renamedGroupWithScope !== nextState.renamedGroupWithScope ||\n      this.state.searchText !== nextState.searchText\n    )\n      return true;\n\n    if (\n      this.props.globalObjectGroups !== nextProps.globalObjectGroups ||\n      this.props.objectGroups !== nextProps.objectGroups\n    ) {\n      return true;\n    }\n\n    return false;\n  }\n\n  addGroup = () => {\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const name = newNameGenerator(\n      'Group',\n      name => objectGroups.has(name) || globalObjectGroups.has(name)\n    );\n\n    objectGroups.insertNew(name, objectGroups.count());\n    this._onObjectGroupModified();\n\n    if (this.props.onGroupAdded) {\n      this.props.onGroupAdded();\n    }\n  };\n\n  _onDelete = (groupWithContext: GroupWithContext) => {\n    const { group, global } = groupWithContext;\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this group? This can't be undone.\"\n    );\n    if (!answer) return;\n\n    this.props.onDeleteGroup(groupWithContext, doRemove => {\n      if (!doRemove) return;\n\n      if (global) {\n        globalObjectGroups.remove(group.getName());\n      } else {\n        objectGroups.remove(group.getName());\n      }\n\n      this._onObjectGroupModified();\n      if (this.props.onGroupRemoved) {\n        this.props.onGroupRemoved();\n      }\n    });\n  };\n\n  _onEditName = (groupWithContext: GroupWithContext) => {\n    this.setState(\n      {\n        renamedGroupWithScope: groupWithContext,\n      },\n      () => this.sortableList.getWrappedInstance().forceUpdateGrid()\n    );\n  };\n\n  _onRename = (groupWithContext: GroupWithContext, newName: string) => {\n    const { group } = groupWithContext;\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    this.setState({\n      renamedGroupWithScope: null,\n    });\n\n    if (group.getName() === newName) return;\n\n    if (objectGroups.has(newName) || globalObjectGroups.has(newName)) {\n      showWarningBox('Another object with this name already exists', {\n        delayToNextTick: true,\n      });\n      return;\n    }\n\n    if (this.props.canRenameGroup(newName)) {\n      this.props.onRenameGroup(groupWithContext, newName, doRename => {\n        if (!doRename) return;\n\n        group.setName(newName);\n\n        this._onObjectGroupModified();\n        if (this.props.onGroupRenamed) {\n          this.props.onGroupRenamed();\n        }\n      });\n    }\n  };\n\n  _onMove = (oldIndex: number, newIndex: number) => {\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const isInGroupsList = oldIndex < this.objectGroupsList.length;\n    if (isInGroupsList) {\n      objectGroups.move(\n        oldIndex,\n        Math.min(newIndex, this.objectGroupsList.length - 1)\n      );\n    } else {\n      const globalObjectGroupsOldIndex =\n        oldIndex - this.objectGroupsList.length;\n      const globalObjectGroupsNewIndex =\n        newIndex - this.objectGroupsList.length;\n\n      globalObjectGroups.move(\n        globalObjectGroupsOldIndex,\n        Math.min(\n          globalObjectGroupsNewIndex,\n          this.globalObjectGroupsList.length - 1\n        )\n      );\n    }\n\n    this._onObjectGroupModified();\n    this.sortableList.getWrappedInstance().forceUpdateGrid();\n  };\n\n  _setAsGlobalGroup = (groupWithContext: GroupWithContext) => {\n    const { group } = groupWithContext;\n    const { globalObjectGroups, objectGroups } = this.props;\n\n    const groupName = group.getName();\n\n    if (globalObjectGroups.has(groupName)) {\n      showWarningBox(\n        'A global object with this name already exists. Please change the object name before setting it as a global object',\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    const answer = Window.showConfirmDialog(\n      \"This group will be loaded and available in all the scenes. This is only recommended for groups that you reuse a lot and can't be undone. Make this group global?\"\n    );\n    if (!answer) return;\n\n    globalObjectGroups.insert(group, globalObjectGroups.count());\n    objectGroups.remove(groupName);\n    this._onObjectGroupModified();\n  };\n\n  _onObjectGroupModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  render() {\n    const { globalObjectGroups, objectGroups } = this.props;\n    const { searchText } = this.state;\n\n    const objectGroupsList: GroupWithContextList = enumerateGroups(\n      objectGroups\n    ).map(group => ({ group, global: false }));\n    const globalObjectGroupsList: GroupWithContextList = enumerateGroups(\n      globalObjectGroups\n    ).map(group => ({ group, global: true }));\n    this.objectGroupsList = filterGroupsList(objectGroupsList, { searchText });\n    this.globalObjectGroupsList = filterGroupsList(globalObjectGroupsList, {\n      searchText,\n    });\n    const allGroupsList = filterGroupsList(\n      [...objectGroupsList, ...globalObjectGroupsList],\n      { searchText }\n    );\n    const fullList = allGroupsList.concat({\n      key: 'add-groups-row',\n      object: null,\n    });\n\n    // Force List component to be mounted again if globalObjectGroups or objectGroups\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = objectGroups.ptr + ';' + globalObjectGroups.ptr;\n\n    return (\n      <Background>\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <SortableGroupsList\n                key={listKey}\n                ref={sortableList => (this.sortableList = sortableList)}\n                fullList={fullList}\n                width={width}\n                height={height}\n                renamedGroupWithScope={this.state.renamedGroupWithScope}\n                onEditGroup={this.props.onEditGroup}\n                onAddGroup={this.addGroup}\n                onEditName={this._onEditName}\n                onDelete={this._onDelete}\n                onRename={this._onRename}\n                canSetAsGlobalGroup={this.props.canSetAsGlobalGroup}\n                onSetAsGlobalGroup={this._setAsGlobalGroup}\n                onSortEnd={({ oldIndex, newIndex }) =>\n                  this._onMove(oldIndex, newIndex)\n                }\n                helperClass=\"sortable-helper\"\n                distance={20}\n              />\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport HelpButton from '../UI/HelpButton';\nimport Text from '../UI/Text';\nimport { EmptyPlaceholder } from '../UI/EmptyPlaceholder';\n\ntype Props = {|\n  target: 'object' | 'layer',\n|};\n\nexport const EmptyEffectsPlaceholder = (props: Props) => (\n  <EmptyPlaceholder\n    renderButtons={() => (\n      <HelpButton\n        helpPagePath={\n          props.target === 'object'\n            ? '/objects/effects'\n            : '/interface/scene-editor/layer-effects'\n        }\n      />\n    )}\n  >\n    <Text>\n      <Trans>\n        Effects can change how layers or objects are rendered on screen.\n      </Trans>\n    </Text>\n    <Text>\n      <Trans>\n        After adding an effect, set up its parameters. Launch a preview to see\n        the result. Using the events and the name of the effect, you can change\n        the parameters during the game.\n      </Trans>\n    </Text>\n  </EmptyPlaceholder>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { mapFor } from '../Utils/MapFor';\nimport RaisedButton from '../UI/RaisedButton';\nimport IconButton from '../UI/IconButton';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport MiniToolbar, { MiniToolbarText } from '../UI/MiniToolbar';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport Add from '@material-ui/icons/Add';\nimport PropertiesEditor from '../PropertiesEditor';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport BackgroundText from '../UI/BackgroundText';\nimport { MarkdownText } from '../UI/MarkdownText';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport {\n  enumerateEffectsMetadata,\n  type EnumeratedEffectMetadata,\n  setEffectDefaultParameters,\n} from './EnumerateEffects';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport ScrollView from '../UI/ScrollView';\nimport { EmptyEffectsPlaceholder } from './EmptyEffectsPlaceholder';\nimport {\n  ACHIEVEMENT_FEATURE_FLAG,\n  addCreateBadgePreHookIfNotClaimed,\n  TRIVIAL_FIRST_EFFECT,\n} from '../Utils/GDevelopServices/Badge';\nimport AuthenticatedUserContext from '../Profile/AuthenticatedUserContext';\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  effectsContainer: gdEffectsContainer,\n  onEffectsUpdated: () => void,\n  target: 'object' | 'layer',\n|};\n\nconst getEnumeratedEffectMetadata = (\n  allEffectDescriptions: Array<EnumeratedEffectMetadata>,\n  effectType: string\n): ?EnumeratedEffectMetadata => {\n  return allEffectDescriptions.find(\n    effectMetadata => effectMetadata.type === effectType\n  );\n};\n\n/**\n * Display a list of effects and allow to add/remove/edit them.\n *\n * All available effects are fetched from the project's platform.\n */\nexport default function EffectsList(props: Props) {\n  const { effectsContainer, onEffectsUpdated } = props;\n\n  const preferences = React.useContext(PreferencesContext);\n  const authenticatedUser = React.useContext(AuthenticatedUserContext);\n  const showEffectParameterNames = preferences.values.showEffectParameterNames;\n  const setShowEffectParameterNames = preferences.setShowEffectParameterNames;\n\n  const allEffectMetadata = React.useMemo(\n    () => enumerateEffectsMetadata(props.project),\n    [props.project]\n  );\n\n  const forceUpdate = useForceUpdate();\n\n  const _addEffect = () => {\n    const newName = newNameGenerator('Effect', name =>\n      effectsContainer.hasEffectNamed(name)\n    );\n    effectsContainer.insertNewEffect(\n      newName,\n      effectsContainer.getEffectsCount()\n    );\n\n    forceUpdate();\n    onEffectsUpdated();\n  };\n\n  const addEffect = ACHIEVEMENT_FEATURE_FLAG\n    ? addCreateBadgePreHookIfNotClaimed(\n        authenticatedUser,\n        TRIVIAL_FIRST_EFFECT,\n        _addEffect\n      )\n    : _addEffect;\n\n  const removeEffect = (name: string) => {\n    effectsContainer.removeEffect(name);\n    forceUpdate();\n    onEffectsUpdated();\n  };\n\n  const chooseEffectType = (effect: gdEffect, newEffectType: string) => {\n    effect.setEffectType(newEffectType);\n    const effectMetadata = getEnumeratedEffectMetadata(\n      allEffectMetadata,\n      newEffectType\n    );\n\n    if (effectMetadata) {\n      setEffectDefaultParameters(effect, effectMetadata.effectMetadata);\n    }\n\n    forceUpdate();\n    onEffectsUpdated();\n  };\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Column noMargin expand useFullHeight>\n          {effectsContainer.getEffectsCount() !== 0 ? (\n            <ScrollView>\n              {effectsContainer.getEffectsCount() > 3 && (\n                <Line>\n                  <Column>\n                    <DismissableAlertMessage\n                      identifier=\"too-much-effects\"\n                      kind=\"warning\"\n                    >\n                      <Trans>\n                        Using a lot of effects can have a severe negative impact\n                        on the rendering performance, especially on low-end or\n                        mobile devices. Consider using less effects if possible.\n                        You can also disable and re-enable effects as needed\n                        using events.\n                      </Trans>\n                    </DismissableAlertMessage>\n                  </Column>\n                </Line>\n              )}\n              {mapFor(0, effectsContainer.getEffectsCount(), (i: number) => {\n                const effect: gdEffect = effectsContainer.getEffectAt(i);\n                const effectType = effect.getEffectType();\n                const effectMetadata = getEnumeratedEffectMetadata(\n                  allEffectMetadata,\n                  effectType\n                );\n\n                return (\n                  <React.Fragment key={i}>\n                    <MiniToolbar>\n                      <MiniToolbarText firstChild>\n                        <Trans>Effect name:</Trans>\n                      </MiniToolbarText>\n                      <SemiControlledTextField\n                        margin=\"none\"\n                        commitOnBlur\n                        hintText={t`Enter the effect name`}\n                        value={effect.getName()}\n                        onChange={newName => {\n                          if (newName === effect.getName()) return;\n\n                          effect.setName(newName);\n                          forceUpdate();\n                          onEffectsUpdated();\n                        }}\n                        fullWidth\n                      />\n                      <MiniToolbarText>\n                        <Trans>Type:</Trans>\n                      </MiniToolbarText>\n                      <SelectField\n                        margin=\"none\"\n                        value={effectType}\n                        onChange={(e, i, newEffectType: string) =>\n                          chooseEffectType(effect, newEffectType)\n                        }\n                        fullWidth\n                        hintText={t`Choose the effect to apply`}\n                      >\n                        {allEffectMetadata.map(effectMetadata => (\n                          <SelectOption\n                            key={effectMetadata.type}\n                            value={effectMetadata.type}\n                            primaryText={effectMetadata.fullName}\n                            disabled={\n                              props.target === 'object' &&\n                              effectMetadata.isMarkedAsNotWorkingForObjects\n                            }\n                          />\n                        ))}\n                      </SelectField>\n                      <ElementWithMenu\n                        element={\n                          <IconButton>\n                            <MoreVert />\n                          </IconButton>\n                        }\n                        buildMenuTemplate={(i18n: I18nType) => [\n                          {\n                            label: i18n._(t`Delete`),\n                            click: () => removeEffect(effect.getName()),\n                          },\n                          { type: 'separator' },\n                          {\n                            type: 'checkbox',\n                            label: i18n._(t`Show Parameter Names`),\n                            checked: showEffectParameterNames,\n                            click: () =>\n                              setShowEffectParameterNames(\n                                !showEffectParameterNames\n                              ),\n                          },\n                        ]}\n                      />\n                    </MiniToolbar>\n                    <Line expand noMargin>\n                      <Column expand>\n                        {!!effectType && effectMetadata ? (\n                          <React.Fragment>\n                            <Line>\n                              <BackgroundText>\n                                <MarkdownText\n                                  source={effectMetadata.description}\n                                />\n                              </BackgroundText>\n                            </Line>\n                            <PropertiesEditor\n                              instances={[effect]}\n                              schema={effectMetadata.parametersSchema}\n                              project={props.project}\n                              resourceSources={props.resourceSources}\n                              onChooseResource={props.onChooseResource}\n                              resourceExternalEditors={\n                                props.resourceExternalEditors\n                              }\n                              renderExtraDescriptionText={\n                                showEffectParameterNames\n                                  ? parameterName =>\n                                      i18n._(\n                                        t`Parameter name in events: \\`${parameterName}\\` `\n                                      )\n                                  : undefined\n                              }\n                            />\n                          </React.Fragment>\n                        ) : null}\n                      </Column>\n                    </Line>\n                  </React.Fragment>\n                );\n              })}\n            </ScrollView>\n          ) : (\n            <Column noMargin expand justifyContent=\"center\">\n              <EmptyEffectsPlaceholder target={props.target} />\n            </Column>\n          )}\n          <Column>\n            <Line justifyContent=\"flex-end\" expand>\n              <RaisedButton\n                primary\n                label={<Trans>Add an effect</Trans>}\n                onClick={addEffect}\n                icon={<Add />}\n              />\n            </Line>\n          </Column>\n        </Column>\n      )}\n    </I18n>\n  );\n}\n","// @flow\nimport * as React from 'react';\nimport ThemeContext from '../UI/Theme/ThemeContext';\nimport Window from '../Utils/Window';\nimport { type FileMetadata } from '../ProjectsStorage';\nimport UnsavedChangesContext from './UnsavedChangesContext';\n\ntype Props = {|\n  fileMetadata: ?FileMetadata,\n|};\n\n/**\n * Update the title bar according to the project and the current theme.\n */\nexport default function ProjectTitlebar({ fileMetadata }: Props) {\n  const gdevelopTheme = React.useContext(ThemeContext);\n  const unsavedChanges = React.useContext(UnsavedChangesContext);\n  const hasUnsavedChanges = unsavedChanges.hasUnsavedChanges;\n\n  React.useEffect(\n    () => {\n      const title = [\n        'GDevelop 5',\n        fileMetadata\n          ? fileMetadata.fileIdentifier + (hasUnsavedChanges ? ' *' : '')\n          : '',\n      ]\n        .filter(Boolean)\n        .join(' - ');\n\n      Window.setTitle(title);\n      Window.setTitleBarColor(gdevelopTheme.toolbar.backgroundColor);\n    },\n    [fileMetadata, hasUnsavedChanges, gdevelopTheme.toolbar.backgroundColor]\n  );\n\n  return null;\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { PureComponent } from 'react';\nimport { List, ListItem } from '../UI/List';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { Column, Line } from '../UI/Grid';\nimport Window from '../Utils/Window';\nimport Text from '../UI/Text';\nimport PreferencesContext from './Preferences/PreferencesContext';\nimport {\n  getUpdateStatusLabel,\n  getUpdateButtonLabel,\n  canDownloadUpdate,\n  type UpdateStatus,\n} from './UpdaterTools';\nimport Changelog from './Changelog';\nimport { getIDEVersion, getGDCoreVersion } from '../Version';\n\ntype Props = {\n  open: boolean,\n  onClose: Function,\n  updateStatus: UpdateStatus,\n};\n\ntype State = {|\n  currentTab: string,\n|};\n\nconst styles = {\n  logo: {\n    width: '100%',\n  },\n};\n\n// There must be missing tons of people.\n// If you contributed to GDevelop but you're not in the list, please\n// send a Pull Request on GitHub or open an issue ;)\nconst contributors = [\n  // Core development team\n  {\n    name: 'Clément Pasteau',\n    description: 'Core development team',\n    link: 'https://github.com/ClementPasteau',\n  },\n  {\n    name: 'AlexandreSi',\n    description: 'Core development team',\n    link: 'https://github.com/AlexandreSi',\n  },\n  // Code contributors\n  {\n    name: 'Victor Levasseur',\n    description:\n      'Numerous code contributions to GDevelop and community moderation',\n  },\n  {\n    name: 'Lizard-13',\n    description:\n      'Numerous code contributions to GDevelop and community moderation',\n  },\n  {\n    name: \"Christina 'Castpixel' Antoinette Neofotistou\",\n    description: 'Art and assets for the 8-bit Space Shooter example.',\n    link: 'https://www.patreon.com/castpixel',\n  },\n  { name: 'ale26reg', description: 'Contributions to GDevelop' },\n  { name: 'dos1', description: 'Contributions to GDevelop' },\n  {\n    name: 'Aurélien Vivet',\n    description:\n      'Numerous code contributions to GDevelop and community management',\n    link: 'https://www.witly.fr',\n  },\n  {\n    name: 'Todor Imreorov',\n    description: 'Numerous code contributions to GDevelop',\n  },\n  { name: 'brylie', description: 'Contributions to GDevelop' },\n  { name: 'Nnarol', description: 'Contributions to GDevelop' },\n  { name: 'wild-master', description: 'Contributions to GDevelop' },\n  { name: 'RandomShaper', description: 'Contributions to GDevelop' },\n  { name: 'RyanNerd', description: 'Contributions to GDevelop' },\n  { name: 'greater', description: 'Contributions to GDevelop' },\n  { name: 'triptych', description: 'Contributions to GDevelop' },\n  {\n    name: 'Wend1go',\n    description: 'Contributions to GDevelop, Tutorials, Examples',\n  },\n  { name: 'mattiascibien', description: 'Contributions to GDevelop' },\n  { name: 'araujo921', description: 'Contributions to GDevelop' },\n  { name: 'ronnystandtke', description: 'Contributions to GDevelop' },\n  {\n    name: 'Thomas Flecy',\n    description: 'Contributions to GDevelop (original sound object extension)',\n  },\n  {\n    name: 'Arthur Pacaud (arthuro555)',\n    description:\n      'Numerous code contributions to GDevelop and community moderation',\n    link: 'https://forum.gdevelop-app.com/u/arthuro555/summary',\n  },\n  {\n    name: 'The Gem Dev',\n    description: 'Code contributions to GDevelop and tutorials on Youtube',\n    link: 'https://www.youtube.com/channel/UCsZ4Ue8c94YLJDbGRafCI5Q',\n  },\n  {\n    name: 'D8H',\n    description: 'Numerous code contributions to GDevelop',\n    link: 'https://github.com/D8H',\n  },\n  {\n    name: 'Harsimran Singh Virk',\n    description: 'Numerous code contributions to GDevelop',\n    link: 'https://github.com/HarsimranVirk',\n  },\n  {\n    name: 'Nilay Majorwar',\n    description: 'Numerous code contributions to GDevelop',\n    link: 'https://github.com/nilaymaj',\n  },\n\n  // Community members:\n  {\n    name: 'ddabrahim',\n    description: 'Examples for GDevelop',\n    link: 'https://gametemplates.itch.io/',\n  },\n  {\n    name: 'Gametemplates',\n    description: 'Examples bundled with GDevelop',\n    link: 'https://gametemplates.itch.io/',\n  },\n  { name: 'Mats', description: 'Tutorials, Examples' },\n  { name: 'erdo', description: 'Tutorials, Examples' },\n  { name: 'Jubileuksen3', description: 'Tutorials, Examples' },\n  { name: 'LucaTexas', description: 'Tutorials, Examples' },\n  { name: 'Kink', description: 'Forum moderator, tutorials, Examples' },\n  { name: 'RicoTrooper', description: 'Tutorials' },\n  { name: 'kalel', description: 'Tutorials' },\n  { name: 'mtarzaim', description: 'Tutorials' },\n  { name: 'Darkhog', description: 'Examples' },\n  { name: 'Ricardo Graca', description: 'Tutorials, Examples' },\n  { name: 'Diego Schiavon', description: 'Indiegogo Ubuntu contributor' },\n  { name: 'conceptgame', description: 'Indiegogo super contributor' },\n  {\n    name: 'Jose David Cuartas Correa',\n    description:\n      'Author of Digitopolis (a book on how to make games with GDevelop 4)',\n  },\n\n  {\n    name: 'François Dumortier',\n    description: 'GDevelop logo design',\n    link: 'http://www.fdumortier.com',\n  },\n  {\n    name: 'Constantine Shvetsov',\n    description: 'Design of all the awesome icons',\n  },\n  {\n    name: 'MillionthVector',\n    description: 'Assets of various examples',\n  },\n  {\n    name: 'Tristan Rhodes (Victris Games)',\n    description: 'High quality extensions for GDevelop',\n    link: 'https://www.youtube.com/channel/UClbq1M-D83t_bYhfa1mfyEQ',\n  },\n  {\n    name: 'Entropy',\n    description: 'High quality extensions and art packs for GDevelop',\n    link: 'https://github.com/Entr0py404',\n  },\n  {\n    name: 'FlokiTV',\n    description: 'High quality extensions for GDevelop',\n    link: 'https://github.com/FlokiTV',\n  },\n  {\n    name: 'Silver-Streak',\n    description:\n      'Examples, bug reports, testing of new features, providing community support to users, community moderation',\n    link: 'https://github.com/Silver-Streak',\n  },\n  {\n    name: 'Jurfix',\n    description: 'Discord moderation',\n    link: 'https://github.com/Jurfix',\n  },\n  {\n    name: 'Wishforge Games',\n    description: 'Making high quality tutorials',\n    link: 'https://www.wishforge.games/',\n  },\n  {\n    name: 'Sleeper Games',\n    description: 'Making the game feel starter',\n    link: 'https://twitter.com/Sleeper_Games',\n  },\n  {\n    name: 'VegeTato',\n    description: 'Extensions for GDevelop',\n  },\n  {\n    name: 'Leo Red',\n    description: 'Reviewing examples submissions',\n    link: 'https://github.com/Midhil457',\n  },\n  {\n    name: 'add_',\n    description: 'Extensions for GDevelop',\n    link: 'https://github.com/add00',\n  },\n  {\n    name: 'HelperWesley',\n    description: 'Examples and youtube content that is relevant to GDevelop',\n    link: 'https://www.youtube.com/channel/UC8RsU74-hU1pfNKHNMfiFfw',\n  },\n  {\n    name: 'UlisesFreitas',\n    description:\n      'Numerous examples and making external services that integrate with GDevelop games',\n    link: 'https://ulisesfreitas.itch.io/',\n  },\n  {\n    name: 'IttaloXD',\n    description: 'The GDevelop embassador in Brazil',\n    link: 'https://twitter.com/ittaloxd',\n  },\n  {\n    name: 'PANDAKO',\n    description: 'Translations in Japanese, extensions and blog',\n    link: 'https://gdevelop-jp.blogspot.com',\n  },\n];\n\nexport default class AboutDialog extends PureComponent<Props, State> {\n  state = {\n    currentTab: 'about',\n  };\n\n  _openContributePage = () => {\n    Window.openExternalURL('https://gdevelop-app.com/contribute/');\n  };\n\n  _openLink = (link: string) => {\n    if (!link) return;\n\n    Window.openExternalURL(link);\n  };\n\n  _changeTab = (currentTab: string) => {\n    this.setState({ currentTab });\n  };\n\n  render() {\n    const { open, onClose, updateStatus } = this.props;\n    const { currentTab } = this.state;\n    if (!open) return null;\n\n    const updateStatusString = getUpdateStatusLabel(updateStatus.status);\n    const updateButtonLabel = getUpdateButtonLabel(updateStatus.status);\n\n    return (\n      <Dialog\n        actions={[\n          <FlatButton\n            key=\"website\"\n            label={<Trans>GDevelop Website</Trans>}\n            primary={false}\n            onClick={() => Window.openExternalURL('http://gdevelop-app.com')}\n          />,\n          <FlatButton\n            key=\"close\"\n            label={<Trans>Close</Trans>}\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        onRequestClose={onClose}\n        cannotBeDismissed={false}\n        open={open}\n        maxWidth=\"sm\"\n        noMargin\n      >\n        <PreferencesContext.Consumer>\n          {({ values, checkUpdates }) => (\n            <Column noMargin>\n              <img\n                src=\"res/GD-logo.png\"\n                alt=\"GDevelop logo\"\n                style={styles.logo}\n              />\n              <Tabs value={currentTab} onChange={this._changeTab}>\n                <Tab label={<Trans>About GDevelop</Trans>} value=\"about\" />\n                <Tab label={<Trans>What's new?</Trans>} value=\"changelog\" />\n                <Tab label={<Trans>Contributors</Trans>} value=\"contributors\" />\n              </Tabs>\n              {currentTab === 'about' && (\n                <React.Fragment>\n                  <Column>\n                    <Line>\n                      <Text>\n                        <Trans>\n                          GDevelop {getIDEVersion()} based on GDevelop.js{' '}\n                          {getGDCoreVersion()}\n                        </Trans>\n                      </Text>\n                    </Line>\n                    <Line>\n                      <Text>{updateStatusString}</Text>\n                    </Line>\n                    <Line justifyContent=\"center\">\n                      {!!updateStatusString && (\n                        <FlatButton\n                          label={updateButtonLabel}\n                          onClick={() =>\n                            checkUpdates(canDownloadUpdate(updateStatus.status))\n                          }\n                        />\n                      )}\n                    </Line>\n                  </Column>\n                </React.Fragment>\n              )}\n              {currentTab === 'changelog' && (\n                <Column>\n                  <Changelog />\n                </Column>\n              )}\n              {currentTab === 'contributors' && (\n                <React.Fragment>\n                  <Column>\n                    <Text>\n                      <Trans>\n                        GDevelop was created by Florian \"4ian\" Rival.\n                      </Trans>\n                    </Text>\n                    <Text>\n                      <Trans>Contributors, in no particular order:</Trans>\n                    </Text>\n                  </Column>\n                  <List>\n                    {contributors.map(contributor => (\n                      <ListItem\n                        key={contributor.name}\n                        primaryText={contributor.name}\n                        secondaryText={contributor.description}\n                        secondaryTextLines={\n                          contributor.description.length < 30 ? 1 : 2\n                        }\n                        displayLinkButton={contributor.link ? true : false}\n                        onOpenLink={() =>\n                          this._openLink(contributor.link || '')\n                        }\n                      />\n                    ))}\n                  </List>\n                  <Column expand>\n                    <Text>\n                      <Trans>\n                        Thanks to all users of GDevelop! There must be missing\n                        tons of people, please send your name if you've\n                        contributed and you're not listed.\n                      </Trans>\n                    </Text>\n                    <Line alignItems=\"center\" justifyContent=\"center\">\n                      <FlatButton\n                        label={<Trans>Contribute to GDevelop</Trans>}\n                        onClick={this._openContributePage}\n                      />\n                    </Line>\n                  </Column>\n                </React.Fragment>\n              )}\n            </Column>\n          )}\n        </PreferencesContext.Consumer>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { TreeTableRow, TreeTableCell } from '../UI/TreeTable';\nimport DragHandle from '../UI/DragHandle';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport SemiControlledAutoComplete from '../UI/SemiControlledAutoComplete';\nimport Checkbox from '../UI/Checkbox';\nimport AddCircle from '@material-ui/icons/AddCircle';\nimport BuildIcon from '@material-ui/icons/Build';\nimport SubdirectoryArrowRight from '@material-ui/icons/SubdirectoryArrowRight';\nimport IconButton from '../UI/IconButton';\nimport Replay from '@material-ui/icons/Replay';\nimport styles from './styles';\nimport BooleanField from '../UI/BooleanField';\nimport { type VariableOrigin } from './VariablesList.flow';\nimport Text from '../UI/Text';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport BackgroundText from '../UI/BackgroundText';\nconst gd: libGDevelop = global.gd;\n\n//TODO: Refactor into TreeTable?\nconst Indent = React.memo(({ width }) => (\n  <div style={{ ...styles.indent, width }}>\n    <SubdirectoryArrowRight htmlColor={styles.indentIconColor} />\n  </div>\n));\n\ntype Props = {|\n  name: string,\n  variable: gdVariable,\n  depth: number,\n  errorText?: ?string,\n  commitVariableValueOnBlur: boolean,\n  onChangeType: (type: string) => void,\n  onRemove: () => void,\n  onAddChild: () => void,\n  onChangeName: string => void,\n  onChangeValue: string => void,\n  onResetToDefaultValue: () => void,\n  children?: React.Node,\n  showHandle: boolean,\n  showSelectionCheckbox: boolean,\n  isSelected: boolean,\n  onSelect: boolean => void,\n  origin: VariableOrigin,\n  arrayElement: boolean,\n  undefinedVariableNames: Array<string>,\n|};\n\nconst VariableRow = ({\n  name,\n  variable,\n  depth,\n  errorText,\n  onChangeType,\n  commitVariableValueOnBlur,\n  onRemove,\n  onAddChild,\n  onChangeName,\n  onChangeValue,\n  onResetToDefaultValue,\n  children,\n  showHandle,\n  showSelectionCheckbox,\n  isSelected,\n  onSelect,\n  origin,\n  arrayElement,\n  undefinedVariableNames,\n}: Props) => {\n  const type = variable.getType();\n  const isCollection = !gd.Variable.isPrimitive(type);\n\n  const key = '' + depth + name;\n  const limitEditing = origin === 'parent' || origin === 'inherited';\n\n  const columns = [\n    <TreeTableCell key=\"name\" expand>\n      {depth > 0 && (\n        <Indent width={(depth + 1) * styles.tableChildIndentation} />\n      )}\n      {depth === 0 && showHandle && <DragHandle />}\n      {showSelectionCheckbox && !limitEditing && (\n        <Checkbox\n          checked={isSelected}\n          onCheck={(e, checked) => onSelect(checked)}\n        />\n      )}\n      {arrayElement ? (\n        <Text noMargin>{name}</Text>\n      ) : (\n        <SemiControlledAutoComplete\n          margin=\"none\"\n          style={{\n            fontStyle: origin !== 'inherited' ? 'normal' : 'italic',\n          }}\n          fullWidth\n          errorText={errorText}\n          disabled={origin === 'parent'}\n          value={name}\n          onChange={onChangeName}\n          dataSource={\n            undefinedVariableNames\n              ? undefinedVariableNames.map(name => ({\n                  text: name,\n                  value: name,\n                }))\n              : []\n          }\n          openOnFocus={true}\n        />\n      )}\n    </TreeTableCell>,\n  ];\n  if (isCollection) {\n    columns.push(\n      <TreeTableCell\n        expand\n        key=\"value\"\n        style={limitEditing ? styles.fadedButton : undefined}\n      >\n        <BackgroundText>\n          {type === gd.Variable.Structure ? (\n            <Trans>Structure</Trans>\n          ) : (\n            <Trans>Array</Trans>\n          )}\n        </BackgroundText>\n      </TreeTableCell>\n    );\n  } else {\n    if (type !== gd.Variable.Boolean)\n      columns.push(\n        <TreeTableCell key=\"value\" expand>\n          <SemiControlledTextField\n            margin=\"none\"\n            type={type === gd.Variable.String ? 'text' : 'number'}\n            commitOnBlur={commitVariableValueOnBlur}\n            fullWidth\n            name={key + 'value'}\n            value={\n              type === gd.Variable.String\n                ? variable.getString()\n                : '' + variable.getValue()\n            }\n            onChange={newValue => {\n              if (\n                type === gd.Variable.String\n                  ? variable.getString() !== newValue\n                  : variable.getValue() !== newValue\n              ) {\n                // Note that onChangeValue pass all the values as strings.\n                // It's the parent responsibility to cast them back according to the variable type.\n                onChangeValue(newValue);\n              }\n            }}\n            disabled={origin === 'parent' && depth !== 0}\n            multiline={type === gd.Variable.String}\n            inputStyle={\n              type === gd.Variable.String\n                ? styles.noPaddingMultilineTextField\n                : undefined\n            }\n          />\n        </TreeTableCell>\n      );\n    else\n      columns.push(\n        <TreeTableCell key=\"value\" expand>\n          <BooleanField\n            value={variable.getBool()}\n            onChange={newValue => {\n              // Note that onChangeValue pass all the values as strings.\n              // It's the parent responsibility to cast them back according to the variable type.\n              onChangeValue(newValue ? 'true' : 'false');\n            }}\n            disabled={origin === 'parent' && depth !== 0}\n          />\n        </TreeTableCell>\n      );\n  }\n  columns.push(\n    <TreeTableCell key=\"tools\" style={styles.toolColumn}>\n      {origin === 'inherited' && depth === 0 ? (\n        <IconButton\n          size=\"small\"\n          onClick={onResetToDefaultValue}\n          style={isCollection ? undefined : styles.fadedButton}\n          tooltip={t`Reset`}\n        >\n          <Replay />\n        </IconButton>\n      ) : (\n        origin !== 'parent' && (\n          <>\n            {isCollection ? (\n              <IconButton\n                size=\"small\"\n                tooltip={t`Add child variable`}\n                onClick={() => onAddChild()}\n              >\n                <AddCircle />\n              </IconButton>\n            ) : (\n              <IconButton\n                size=\"small\"\n                style={styles.fadedButton}\n                tooltip={t`Convert the variable to a collection before adding children`}\n              >\n                <AddCircle />\n              </IconButton>\n            )}\n            <ElementWithMenu\n              element={\n                <IconButton size=\"small\" tooltip={t`Change variable type`}>\n                  <BuildIcon />\n                </IconButton>\n              }\n              buildMenuTemplate={(i18n: I18nType) => [\n                {\n                  label: 'Primitive types',\n                  submenu: [\n                    {\n                      visible: type !== gd.Variable.String,\n                      label: i18n._(t`Convert to string`),\n                      click: () => onChangeType('string'),\n                    },\n                    {\n                      visible: type !== gd.Variable.Number,\n                      label: i18n._(t`Convert to number`),\n                      click: () => onChangeType('number'),\n                    },\n                    {\n                      visible: type !== gd.Variable.Boolean,\n                      label: i18n._(t`Convert to boolean`),\n                      click: () => onChangeType('boolean'),\n                    },\n                  ],\n                },\n\n                {\n                  label: 'Collection types',\n                  submenu: [\n                    {\n                      visible: type !== gd.Variable.Structure,\n                      label: i18n._(t`Convert to structure`),\n                      click: () => onChangeType('structure'),\n                    },\n                    {\n                      visible: type !== gd.Variable.Array,\n                      label: i18n._(t`Convert to array`),\n                      click: () => onChangeType('array'),\n                    },\n                  ],\n                },\n              ]}\n            />\n          </>\n        )\n      )}\n    </TreeTableCell>\n  );\n\n  return (\n    <>\n      <TreeTableRow>{columns}</TreeTableRow>\n      {children}\n    </>\n  );\n};\n\nexport default VariableRow;\n","export default {\n  toolColumnHeader: {\n    textAlign: 'left',\n    paddingRight: 4,\n  },\n  toolColumn: {\n    minWidth: 48,\n    flex: 0,\n    justifyContent: 'flex-end',\n  },\n  tableChildIndentation: 18,\n  indent: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    // The indentation is fixed and should never be smaller than the width that is set:\n    flexShrink: 0,\n  },\n  indentIconColor: '#DDD', //TODO: Use theme color instead\n  fadedButton: {\n    opacity: 0.7,\n  },\n  noPaddingMultilineTextField: {\n    // By default, Material-UI adds some padding on top and bottom of a multiline text field.\n    // Avoid this to prevent extra spaces that would make single line strings\n    // (for variable values) not aligned with the variable name\n    padding: 0,\n  },\n};\n","// @flow\nimport React from 'react';\n\nimport { Trans } from '@lingui/macro';\nimport RaisedButton from './RaisedButton';\nimport { Line, Column } from './Grid';\n\nconst buttonStyle = {\n  margin: 5,\n};\n\ntype Props = {|\n  value: boolean,\n  onChange: (newValue: boolean) => void,\n  disabled: boolean,\n|};\n\nconst BooleanField = ({ value, onChange, disabled }: Props) => {\n  return (\n    <Line>\n      <Column noMargin>\n        <RaisedButton\n          style={buttonStyle}\n          label={<Trans>True</Trans>}\n          primary={value && !disabled}\n          onClick={() => {\n            if (!value && !disabled) onChange(true);\n          }}\n        />\n      </Column>\n      <Column noMargin>\n        <RaisedButton\n          style={buttonStyle}\n          label={<Trans>False</Trans>}\n          primary={!value && !disabled}\n          onClick={() => {\n            if (value && !disabled) onChange(false);\n          }}\n        />\n      </Column>\n    </Line>\n  );\n};\n\nexport default BooleanField;\n","// @flow\n/**\n * Export functions to manipulate a selection of objects.\n */\n\nimport values from 'lodash/values';\n\ntype ObjectType = { ptr: number };\n\ntype SelectionState<T> = {\n  [number]: ?T,\n};\n\nexport const getInitialSelection = () => ({});\n\nexport const clearSelection = () => getInitialSelection();\n\nexport const getSelection = <T: ObjectType>(\n  selection: SelectionState<T>\n): Array<T> => values(selection).filter(value => !!value);\n\nexport const addToSelection = <T: ObjectType>(\n  selection: SelectionState<T>,\n  object: T,\n  select: boolean = true\n): SelectionState<T> => {\n  return {\n    ...selection,\n    [object.ptr]: select ? object : null,\n  };\n};\n\nexport const isSelected = <T: ObjectType>(\n  selection: SelectionState<T>,\n  object: T\n): boolean => !!selection[object.ptr];\n\nexport const hasSelection = <T: ObjectType>(\n  selection: SelectionState<T>\n): boolean => {\n  return !!values(selection).filter(value => !!value).length;\n};\n","export const CLIPBOARD_KIND = 'Variables';\n","// @flow\n\n/**\n * Check if the Emscripten object is actually a null pointer.\n *\n * You should normally not use this - instead prefer the null/empty object pattern,\n * with a function `IsBadXxx` to check if the object you're manipulating represents\n * an null/empty object.\n */\nexport const isNullPtr = (\n  gd: libGDevelop,\n  object: gdEmscriptenObject\n): boolean => gd.getPointer(object) === 0;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { Line } from '../UI/Grid';\nimport ResourcesLoader from '../ResourcesLoader';\nimport ResourceSelectorWithThumbnail from '../ResourcesList/ResourceSelectorWithThumbnail';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { resizeImage, isResizeSupported } from './ImageResizer';\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Text from '../UI/Text';\nimport { ColumnStackLayout } from '../UI/Layout';\nconst path = optionalRequire('path');\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  open: boolean,\n  onClose: Function,\n  onApply: Function,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\ntype State = {|\n  desktopIconResourceNames: Array<string>,\n  androidIconResourceNames: Array<string>,\n  iosIconResourceNames: Array<string>,\n|};\n\nconst desktopSizes = [512];\nconst androidSizes = [192, 144, 96, 72, 48, 36];\nconst iosSizes = [\n  1024,\n  180,\n  167,\n  152,\n  144,\n  120,\n  114,\n  100,\n  87,\n  80,\n  76,\n  72,\n  60,\n  58,\n  57,\n  50,\n  40,\n  29,\n  20,\n];\n\nexport default class PlatformSpecificAssetsDialog extends React.Component<\n  Props,\n  State\n> {\n  constructor(props: Props) {\n    super(props);\n    this.state = this._loadFrom(props.project);\n  }\n\n  _loadFrom(project: gdProject): State {\n    return {\n      desktopIconResourceNames: desktopSizes.map(size =>\n        project.getPlatformSpecificAssets().get('desktop', `icon-${size}`)\n      ),\n      androidIconResourceNames: androidSizes.map(size =>\n        project.getPlatformSpecificAssets().get('android', `icon-${size}`)\n      ),\n      iosIconResourceNames: iosSizes.map(size =>\n        project.getPlatformSpecificAssets().get('ios', `icon-${size}`)\n      ),\n    };\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.project !== newProps.project)\n    ) {\n      this.setState(this._loadFrom(newProps.project));\n    }\n  }\n\n  _generateFromFile = () => {\n    const { project, resourceSources, onChooseResource } = this.props;\n\n    const sources = resourceSources.filter(source => source.kind === 'image');\n    if (!sources.length) return;\n\n    onChooseResource({\n      // Should be updated once new sources are introduced in the desktop app.\n      // Search for \"sources[0]\" in the codebase for other places like this.\n      initialSourceName: sources[0].name,\n      multiSelection: false,\n      resourceKind: 'image',\n    }).then(resources => {\n      if (!resources.length || !path) {\n        return;\n      }\n\n      const resourcesManager = project.getResourcesManager();\n      const projectPath = path.dirname(project.getProjectFile());\n      const fullPath = path.resolve(projectPath, resources[0].getFile());\n\n      // Important, we are responsible for deleting the resources that were given to us.\n      // Otherwise we have a memory leak.\n      resources.forEach(resource => resource.delete());\n\n      Promise.all([\n        ...desktopSizes.map(size =>\n          resizeImage(\n            fullPath,\n            path.join(projectPath, `desktop-icon-${size}.png`),\n            {\n              width: size,\n              height: size,\n            }\n          )\n        ),\n        ...androidSizes.map(size =>\n          resizeImage(\n            fullPath,\n            path.join(projectPath, `android-icon-${size}.png`),\n            {\n              width: size,\n              height: size,\n            }\n          )\n        ),\n        ...iosSizes.map(size =>\n          resizeImage(\n            fullPath,\n            path.join(projectPath, `ios-icon-${size}.png`),\n            {\n              width: size,\n              height: size,\n            }\n          )\n        ),\n      ]).then(results => {\n        if (results.indexOf(false) !== -1) {\n          showErrorBox({\n            message: 'Some icons could not be generated!',\n            rawError: undefined,\n            errorId: 'icon-generation-error',\n            doNotReport: true,\n          });\n          return;\n        }\n\n        // Add resources to the game\n        const allResourcesNames = [\n          ...desktopSizes.map(size => `desktop-icon-${size}.png`),\n          ...androidSizes.map(size => `android-icon-${size}.png`),\n          ...iosSizes.map(size => `ios-icon-${size}.png`),\n        ];\n        allResourcesNames.forEach(resourceName => {\n          if (!resourcesManager.hasResource(resourceName)) {\n            const imageResource = new gd.ImageResource();\n            imageResource.setFile(resourceName);\n            imageResource.setName(resourceName);\n\n            resourcesManager.addResource(imageResource);\n\n            // Important, we are responsible for deleting the resources that we created\n            // Otherwise we have a memory leak, as calling addResource is making a copy of the resource.\n            imageResource.delete();\n          } else {\n            resourcesManager.getResource(resourceName).setFile(resourceName);\n          }\n        });\n\n        // Make sure the resources are (re)loaded.\n        ResourcesLoader.burstUrlsCacheForResources(project, allResourcesNames);\n        setTimeout(() => {\n          this.setState({\n            desktopIconResourceNames: desktopSizes.map(\n              size => `desktop-icon-${size}.png`\n            ),\n            androidIconResourceNames: androidSizes.map(\n              size => `android-icon-${size}.png`\n            ),\n            iosIconResourceNames: iosSizes.map(size => `ios-icon-${size}.png`),\n          });\n        }, 200 /* Let a bit of time so that image files can be found */);\n      });\n    });\n  };\n\n  onApply = () => {\n    const { project } = this.props;\n    const {\n      desktopIconResourceNames,\n      androidIconResourceNames,\n      iosIconResourceNames,\n    } = this.state;\n\n    desktopSizes.forEach((size, index) => {\n      project\n        .getPlatformSpecificAssets()\n        .set('desktop', `icon-${size}`, desktopIconResourceNames[index]);\n    });\n    androidSizes.forEach((size, index) => {\n      project\n        .getPlatformSpecificAssets()\n        .set('android', `icon-${size}`, androidIconResourceNames[index]);\n    });\n    iosSizes.forEach((size, index) => {\n      project\n        .getPlatformSpecificAssets()\n        .set('ios', `icon-${size}`, iosIconResourceNames[index]);\n    });\n\n    this.props.onApply();\n  };\n\n  render() {\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        primary={false}\n        onClick={this.props.onClose}\n      />,\n      <FlatButton\n        key=\"apply\"\n        label={<Trans>Apply</Trans>}\n        primary={true}\n        keyboardFocused={true}\n        onClick={this.onApply}\n      />,\n    ];\n    const {\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const {\n      desktopIconResourceNames,\n      androidIconResourceNames,\n      iosIconResourceNames,\n    } = this.state;\n\n    return (\n      <Dialog\n        onApply={this.onApply}\n        title={<Trans>Project icons</Trans>}\n        actions={actions}\n        open={this.props.open}\n        cannotBeDismissed={true}\n        onRequestClose={this.props.onClose}\n      >\n        <ColumnStackLayout noMargin>\n          <Line justifyContent=\"center\">\n            {isResizeSupported() ? (\n              <RaisedButton\n                primary\n                label={<Trans>Generate icons from a file</Trans>}\n                onClick={this._generateFromFile}\n              />\n            ) : (\n              <Text>\n                <Trans>\n                  Download GDevelop desktop version to generate the Android and\n                  iOS icons of your game.\n                </Trans>\n              </Text>\n            )}\n          </Line>\n          <Text>\n            <Trans>Desktop (Windows, macOS and Linux) icon:</Trans>\n          </Text>\n          {desktopSizes.map((size, index) => (\n            <ResourceSelectorWithThumbnail\n              key={size}\n              floatingLabelText={`Desktop icon (${size}x${size} px)`}\n              project={project}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n              resourceKind=\"image\"\n              resourceName={desktopIconResourceNames[index]}\n              onChange={resourceName => {\n                const newIcons = [...desktopIconResourceNames];\n                newIcons[index] = resourceName;\n                this.setState({\n                  desktopIconResourceNames: newIcons,\n                });\n              }}\n            />\n          ))}\n          <Text>\n            <Trans>Android icons:</Trans>\n          </Text>\n          {androidSizes.map((size, index) => (\n            <ResourceSelectorWithThumbnail\n              key={size}\n              floatingLabelText={`Android icon (${size}x${size} px)`}\n              project={project}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n              resourceKind=\"image\"\n              resourceName={androidIconResourceNames[index]}\n              onChange={resourceName => {\n                const newIcons = [...androidIconResourceNames];\n                newIcons[index] = resourceName;\n                this.setState({\n                  androidIconResourceNames: newIcons,\n                });\n              }}\n            />\n          ))}\n          <Text>\n            <Trans>iOS (iPhone and iPad) icons:</Trans>\n          </Text>\n          {iosSizes.map((size, index) => (\n            <ResourceSelectorWithThumbnail\n              key={size}\n              floatingLabelText={`iOS icon (${size}x${size} px)`}\n              project={project}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceKind=\"image\"\n              resourceName={iosIconResourceNames[index]}\n              resourceExternalEditors={resourceExternalEditors}\n              onChange={resourceName => {\n                const newIcons = [...iosIconResourceNames];\n                newIcons[index] = resourceName;\n                this.setState({\n                  iosIconResourceNames: newIcons,\n                });\n              }}\n            />\n          ))}\n        </ColumnStackLayout>\n      </Dialog>\n    );\n  }\n}\n","//@flow\nimport optionalLazyRequire from '../Utils/OptionalLazyRequire';\nconst lazyRequireJimp = optionalLazyRequire('jimp');\n\nexport const isResizeSupported = () => {\n  const Jimp = lazyRequireJimp();\n  return !!Jimp;\n};\n\nexport const resizeImage = (\n  inputFile: string,\n  outputFile: string,\n  { width, height }: { width: number, height: number }\n): Promise<any> => {\n  const Jimp = lazyRequireJimp();\n  if (!Jimp) return Promise.resolve(false);\n\n  return Jimp.read(inputFile)\n    .then(function(jimpImage) {\n      return jimpImage.contain(width, height).write(outputFile);\n    })\n    .then(() => {\n      return true;\n    })\n    .catch(function(err) {\n      console.error(err);\n      return false;\n    });\n};\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { Dialog, DialogContent } from '@material-ui/core';\n\nconst loaderSize = 50;\n\nconst styles = {\n  dialogContent: {\n    padding: 10,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'row',\n  },\n};\n\nconst transitionDuration = { enter: 0, exit: 150 };\n\nexport default props => {\n  return (\n    <Dialog open={props.show} transitionDuration={transitionDuration}>\n      <DialogContent style={styles.dialogContent}>\n        <CircularProgress\n          style={styles.circularProgress}\n          size={loaderSize}\n          disableShrink\n        />\n      </DialogContent>\n    </Dialog>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport Close from '@material-ui/icons/Close';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nimport { tooltipEnterDelay } from './Tooltip';\n\nconst appBarHeight = 32;\n\ntype Props = {|\n  title: React.Node,\n  displayLeftCloseButton?: boolean,\n  displayRightCloseButton?: boolean,\n  onClose: () => void,\n|};\n\nconst styles = {\n  appBar: {\n    height: appBarHeight,\n    minHeight: appBarHeight,\n  },\n  toolbar: {\n    height: appBarHeight,\n    minHeight: appBarHeight,\n    paddingLeft: 15,\n    paddingRight: 15,\n  },\n  title: {\n    fontSize: '15px',\n    flexGrow: 1,\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n};\n\nexport default (props: Props) => {\n  return (\n    <AppBar\n      position=\"static\"\n      style={styles.appBar}\n      className=\"safe-area-aware-top-margin\"\n      color=\"primary\"\n    >\n      <Toolbar style={styles.toolbar}>\n        {props.displayLeftCloseButton && (\n          <IconButton onClick={props.onClose} edge=\"start\" color=\"inherit\">\n            <Close />\n          </IconButton>\n        )}\n        <Tooltip\n          title={props.title}\n          placement=\"bottom\"\n          enterDelay={tooltipEnterDelay}\n        >\n          <Typography variant=\"h6\" style={styles.title}>\n            {props.title}\n          </Typography>\n        </Tooltip>\n\n        {props.displayRightCloseButton && (\n          <IconButton onClick={props.onClose} edge=\"end\" color=\"inherit\">\n            <Close />\n          </IconButton>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Window from '../Utils/Window';\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  shouldPrompt: boolean,\n  i18n: I18nType,\n  language: string, // Should be i18n.language.\n  hasUnsavedChanges: boolean,\n|};\n\nexport default React.memo<Props>(function CloseConfirmDialog({\n  shouldPrompt,\n  i18n,\n  language,\n  hasUnsavedChanges,\n}: Props) {\n  const delayElectronClose = React.useRef(true);\n\n  React.useEffect(\n    () => {\n      if (Window.isDev()) return; // Don't prevent live-reload in development\n\n      const quitMessage = i18n._(t`Are you sure you want to quit GDevelop?`);\n      const unsavedChangesMessage = hasUnsavedChanges\n        ? i18n._(t`Any unsaved changes in the project will be lost.`)\n        : '';\n      const message = [quitMessage, unsavedChangesMessage]\n        .filter(Boolean)\n        .join('\\n');\n\n      if (electron) {\n        window.onbeforeunload = e => {\n          if (delayElectronClose.current && shouldPrompt) {\n            // Use setTimeout to avoiding blocking the thread with the \"confirm\" dialog,\n            // which would make Electron to close the window for some weird reason.\n            // See https://github.com/electron/electron/issues/7977\n            setTimeout(() => {\n              const answer = Window.showConfirmDialog(message);\n              if (answer) {\n                // If answer is positive, re-trigger the close\n                delayElectronClose.current = false;\n                electron.remote.getCurrentWindow().close();\n              }\n            }, 10);\n\n            // Prevents closing the window immediately. See https://github.com/electron/electron/blob/master/docs/api/browser-window.md#event-close\n            e.returnValue = true; //\"It is recommended to always set the event.returnValue explicitly, instead of only returning a value, as the former works more consistently within Electron.\"\"\n            return false; //\"In Electron, returning any value other than undefined would cancel the close\"\n          } else {\n            // Returning undefined will let the window close\n          }\n        };\n      } else if (window) {\n        if (shouldPrompt) {\n          window.onbeforeunload = () => message;\n        } else {\n          window.onbeforeunload = null;\n        }\n      }\n    },\n    [shouldPrompt, i18n, language, hasUnsavedChanges]\n  );\n\n  return null;\n});\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport React, { Component, useEffect, type Node, useRef } from 'react';\nimport Close from '@material-ui/icons/Close';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport ThemeConsumer from './Theme/ThemeConsumer';\nimport ContextMenu from './Menu/ContextMenu';\nimport { useLongTouch } from '../Utils/UseLongTouch';\n\nconst styles = {\n  tabsContainerStyle: {\n    maxWidth: '100%',\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  tabContentContainer: {\n    width: '100%',\n    position: 'relative',\n    textAlign: 'initial',\n    height: '100%',\n    display: 'flex',\n    flex: 1,\n  },\n  tabLabel: {\n    maxWidth: 400,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    marginTop: 6,\n    marginBottom: 6,\n    marginLeft: 10,\n    marginRight: 10,\n    fontSize: '15px', // Same as in Mosaic.css (for mosaic-window-title)\n  },\n  closeButton: {\n    marginTop: 7,\n    marginBottom: 7,\n    marginRight: 5,\n    marginLeft: 5,\n  },\n};\n\ntype TabContentContainerProps = {|\n  active: boolean,\n  children: Node,\n|};\n\n/**\n * Contains the content of a tab. Two important things:\n *\n * 1) Instead of setting the \"height\" of hidden tabs to \"0\", we set \"display\" to \"none\" to avoid\n * messing with components (in particular components where you can scroll: when collapsed because of height=0,\n * they will lose they scrolling position).\n *\n * 2) shouldComponentUpdate is used to avoid updating the content of a tab that is not selected.\n */\nexport class TabContentContainer extends Component<TabContentContainerProps> {\n  shouldComponentUpdate(nextProps: TabContentContainerProps) {\n    return this.props.active || nextProps.active;\n  }\n\n  render() {\n    const { children, active } = this.props;\n    return (\n      <div\n        style={{\n          ...styles.tabContentContainer,\n          ...(active ? undefined : { display: 'none' }),\n        }}\n      >\n        {children}\n      </div>\n    );\n  }\n}\n\ntype ClosableTabsProps = {|\n  hideLabels?: boolean,\n  children: Node,\n|};\n\nexport class ClosableTabs extends Component<ClosableTabsProps> {\n  render() {\n    const { hideLabels, children } = this.props;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => {\n          const tabItemContainerStyle = {\n            maxWidth: '100%', // Tabs should take all width\n            flexShrink: 0, // Tabs height should never be reduced\n            display: hideLabels ? 'none' : 'flex',\n            flexWrap: 'nowrap', // Single line of tab...\n            overflowX: 'auto', // ...scroll horizontally if needed\n            backgroundColor: muiTheme.closableTabs.containerBackgroundColor,\n          };\n\n          return <div style={tabItemContainerStyle}>{children}</div>;\n        }}\n      </ThemeConsumer>\n    );\n  }\n}\n\ntype ClosableTabProps = {|\n  active: boolean,\n  label: Node,\n  closable: boolean,\n  onClose: () => void,\n  onCloseOthers: () => void,\n  onCloseAll: () => void,\n  onClick: () => void,\n  onActivated: () => void,\n|};\n\nexport function ClosableTab({\n  active,\n  onClose,\n  onCloseOthers,\n  onCloseAll,\n  label,\n  closable,\n  onClick,\n  onActivated,\n}: ClosableTabProps) {\n  useEffect(\n    () => {\n      if (active) {\n        onActivated();\n      }\n    },\n    [active, onActivated]\n  );\n  const contextMenu = useRef<ContextMenu>(null);\n\n  const openContextMenu = event => {\n    event.stopPropagation();\n    if (contextMenu.current) {\n      contextMenu.current.open(event.clientX, event.clientY);\n    }\n  };\n\n  // Allow a long press to show the context menu\n  const longTouchForContextMenuProps = useLongTouch(\n    React.useCallback(\n      event => {\n        if (contextMenu.current) {\n          contextMenu.current.open(event.clientX, event.clientY);\n        }\n      },\n      [contextMenu]\n    )\n  );\n\n  return (\n    <ThemeConsumer>\n      {muiTheme => {\n        const textColor = !active\n          ? muiTheme.closableTabs.textColor\n          : muiTheme.closableTabs.selectedTextColor;\n\n        return (\n          <React.Fragment>\n            <span\n              style={{\n                flexShrink: 0, // Tabs are never resized to fit in flex container\n                position: 'relative',\n                display: 'inline-block',\n                marginRight: 1,\n                backgroundColor: !active\n                  ? muiTheme.closableTabs.backgroundColor\n                  : muiTheme.closableTabs.selectedBackgroundColor,\n              }}\n            >\n              <ButtonBase\n                onClick={onClick}\n                onContextMenu={openContextMenu}\n                {...longTouchForContextMenuProps}\n                focusRipple\n              >\n                <span\n                  style={{\n                    ...styles.tabLabel,\n                    color: textColor,\n                    fontFamily: muiTheme.closableTabs.fontFamily,\n                  }}\n                >\n                  {label}\n                </span>\n              </ButtonBase>\n              {closable && (\n                <ButtonBase\n                  onClick={onClose}\n                  onContextMenu={openContextMenu}\n                  {...longTouchForContextMenuProps}\n                  focusRipple\n                >\n                  <Close\n                    style={{\n                      ...styles.closeButton,\n                      width: muiTheme.closableTabs.height / 2,\n                      height: muiTheme.closableTabs.height / 2,\n                    }}\n                    htmlColor={textColor}\n                  />\n                </ButtonBase>\n              )}\n            </span>\n            <ContextMenu\n              ref={contextMenu}\n              buildMenuTemplate={(i18n: I18nType) => [\n                {\n                  label: i18n._(t`Close`),\n                  click: onClose,\n                  enabled: closable,\n                },\n                {\n                  label: i18n._(t`Close others`),\n                  click: onCloseOthers,\n                },\n                {\n                  label: i18n._(t`Close all`),\n                  click: onCloseAll,\n                },\n              ]}\n            />\n          </React.Fragment>\n        );\n      }}\n    </ThemeConsumer>\n  );\n}\n","// @flow\nimport * as React from 'react';\nimport findIndex from 'lodash/findIndex';\nimport { EventsEditorContainer } from './EditorContainers/EventsEditorContainer';\nimport { DebuggerEditorContainer } from './EditorContainers/DebuggerEditorContainer';\nimport { EventsFunctionsExtensionEditorContainer } from './EditorContainers/EventsFunctionsExtensionEditorContainer';\nimport { ExternalEventsEditorContainer } from './EditorContainers/ExternalEventsEditorContainer';\nimport { ExternalLayoutEditorContainer } from './EditorContainers/ExternalLayoutEditorContainer';\nimport { ResourcesEditorContainer } from './EditorContainers/ResourcesEditorContainer';\nimport { SceneEditorContainer } from './EditorContainers/SceneEditorContainer';\nimport {\n  type RenderEditorContainerPropsWithRef,\n  type EditorContainerExtraProps,\n} from './EditorContainers/BaseEditor';\n\n// Supported editors\ntype EditorRef =\n  | DebuggerEditorContainer\n  | EventsEditorContainer\n  | EventsFunctionsExtensionEditorContainer\n  | ExternalEventsEditorContainer\n  | ExternalLayoutEditorContainer\n  | ResourcesEditorContainer\n  | SceneEditorContainer;\n\nexport type EditorTab = {|\n  // The function to render the tab editor.\n  renderEditorContainer: RenderEditorContainerPropsWithRef => React.Node,\n  // A reference to the editor.\n  editorRef: ?EditorRef,\n  // The label shown on the tab.\n  label: string,\n  // The name of the layout/external layout/external events/extension.\n  projectItemName: ?string,\n  // A unique key for the tab.\n  key: string,\n  // Extra props to pass to editors\n  extraEditorProps: ?EditorContainerExtraProps,\n  // If set to false, the tab can't be closed.\n  closable: boolean,\n|};\n\nexport type EditorTabsState = {\n  editors: Array<EditorTab>,\n  currentTab: number,\n};\n\nexport const getEditorTabsInitialState = (): EditorTabsState => {\n  return {\n    editors: [],\n    currentTab: 0,\n  };\n};\n\nexport const openEditorTab = (\n  state: EditorTabsState,\n  {\n    label,\n    projectItemName,\n    renderEditorContainer,\n    key,\n    extraEditorProps,\n    dontFocusTab,\n    closable,\n  }: {|\n    label: string,\n    projectItemName: ?string,\n    renderEditorContainer: (\n      props: RenderEditorContainerPropsWithRef\n    ) => React.Node,\n    key: string,\n    extraEditorProps?: EditorContainerExtraProps,\n    dontFocusTab?: boolean,\n    closable?: boolean,\n  |}\n): EditorTabsState => {\n  const existingEditorId = findIndex(\n    state.editors,\n    editor => editor.key === key\n  );\n  if (existingEditorId !== -1) {\n    return {\n      ...state,\n      currentTab: dontFocusTab ? state.currentTab : existingEditorId,\n    };\n  }\n\n  const editorTab: EditorTab = {\n    label,\n    projectItemName,\n    renderEditorContainer,\n    key,\n    extraEditorProps,\n    editorRef: null,\n    closable: typeof closable === 'undefined' ? true : !!closable,\n  };\n\n  return {\n    ...state,\n    editors: [...state.editors, editorTab],\n    currentTab: dontFocusTab ? state.currentTab : state.editors.length,\n  };\n};\n\nexport const changeCurrentTab = (\n  state: EditorTabsState,\n  newTabId: number\n): EditorTabsState => {\n  return {\n    ...state,\n    currentTab: Math.max(0, Math.min(newTabId, state.editors.length - 1)),\n  };\n};\n\nexport const closeTabsExceptIf = (\n  state: EditorTabsState,\n  keepPredicate: (editorTab: EditorTab) => boolean\n) => {\n  const currentEditorTab = getCurrentTab(state);\n  const remainingEditors = state.editors.filter(keepPredicate);\n  return changeCurrentTab(\n    {\n      ...state,\n      editors: remainingEditors,\n    },\n    // Keep the focus on the current editor tab, or if it was closed\n    // go back to the first tab.\n    remainingEditors.indexOf(currentEditorTab) || 0\n  );\n};\n\nexport const closeAllEditorTabs = (state: EditorTabsState): EditorTabsState => {\n  return closeTabsExceptIf(state, editorTab => !editorTab.closable);\n};\n\nexport const closeEditorTab = (\n  state: EditorTabsState,\n  chosenEditorTab: EditorTab\n): EditorTabsState => {\n  return closeTabsExceptIf(state, editorTab => editorTab !== chosenEditorTab);\n};\n\nexport const closeOtherEditorTabs = (\n  state: EditorTabsState,\n  chosenEditorTab: EditorTab\n): EditorTabsState => {\n  return closeTabsExceptIf(\n    state,\n    editorTab => !editorTab.closable || editorTab === chosenEditorTab\n  );\n};\n\nexport const getEditors = (state: EditorTabsState): Array<EditorTab> => {\n  return state.editors;\n};\n\nexport const getCurrentTabIndex = (state: EditorTabsState): number => {\n  return state.currentTab;\n};\n\nexport const getCurrentTab = (state: EditorTabsState): EditorTab => {\n  return state.editors[state.currentTab];\n};\n\nexport const closeProjectTabs = (\n  state: EditorTabsState,\n  project: ?gdProject\n) => {\n  return closeTabsExceptIf(state, editorTab => {\n    const editorProject =\n      editorTab.editorRef && editorTab.editorRef.getProject();\n    return !editorProject || editorProject !== project;\n  });\n};\n\n/**\n * Ask the editors to persist their UI settings\n * to the project.\n */\nexport const saveUiSettings = (state: EditorTabsState) => {\n  state.editors.forEach(editorTab => {\n    if (\n      editorTab.editorRef &&\n      (editorTab.editorRef instanceof SceneEditorContainer ||\n        editorTab.editorRef instanceof ExternalLayoutEditorContainer)\n    ) {\n      editorTab.editorRef.saveUiSettings();\n    }\n  });\n};\n\n/**\n * Notify the editors that the preview will start. This gives a chance\n * to editors with changes to commit them (like modified extensions).\n */\nexport const notifyPreviewWillStart = (state: EditorTabsState) => {\n  state.editors.forEach(editorTab => {\n    const editor = editorTab.editorRef;\n\n    if (editor instanceof EventsFunctionsExtensionEditorContainer) {\n      editor.previewWillStart();\n    }\n  });\n};\n\nexport const closeLayoutTabs = (state: EditorTabsState, layout: gdLayout) => {\n  return closeTabsExceptIf(state, editorTab => {\n    const editor = editorTab.editorRef;\n\n    if (\n      editor instanceof EventsEditorContainer ||\n      editor instanceof ExternalEventsEditorContainer ||\n      editor instanceof ExternalLayoutEditorContainer ||\n      editor instanceof SceneEditorContainer\n    ) {\n      const editorLayout = editor.getLayout();\n      return !editorLayout || editorLayout !== layout;\n    }\n\n    return true;\n  });\n};\n\nexport const closeExternalLayoutTabs = (\n  state: EditorTabsState,\n  externalLayout: gdExternalLayout\n) => {\n  return closeTabsExceptIf(state, editorTab => {\n    const editor = editorTab.editorRef;\n\n    if (editor instanceof ExternalLayoutEditorContainer) {\n      return (\n        !editor.getExternalLayout() ||\n        editor.getExternalLayout() !== externalLayout\n      );\n    }\n\n    return true;\n  });\n};\n\nexport const closeExternalEventsTabs = (\n  state: EditorTabsState,\n  externalEvents: gdExternalEvents\n) => {\n  return closeTabsExceptIf(state, editorTab => {\n    const editor = editorTab.editorRef;\n    if (editor instanceof ExternalEventsEditorContainer) {\n      return (\n        !editor.getExternalEvents() ||\n        editor.getExternalEvents() !== externalEvents\n      );\n    }\n\n    return true;\n  });\n};\n\nexport const closeEventsFunctionsExtensionTabs = (\n  state: EditorTabsState,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) => {\n  return closeTabsExceptIf(state, editorTab => {\n    const editor = editorTab.editorRef;\n    if (editor instanceof EventsFunctionsExtensionEditorContainer) {\n      return (\n        !editor.getEventsFunctionsExtension() ||\n        editor.getEventsFunctionsExtension() !== eventsFunctionsExtension\n      );\n    }\n\n    return true;\n  });\n};\n\nexport const getEventsFunctionsExtensionEditor = (\n  state: EditorTabsState,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n): ?{| editor: EventsFunctionsExtensionEditorContainer, tabIndex: number |} => {\n  for (let tabIndex = 0; tabIndex < state.editors.length; ++tabIndex) {\n    const editor = state.editors[tabIndex].editorRef;\n    if (\n      editor instanceof EventsFunctionsExtensionEditorContainer &&\n      editor.getEventsFunctionsExtension() === eventsFunctionsExtension\n    ) {\n      return { editor, tabIndex };\n    }\n  }\n\n  return null;\n};\n","// @flow\nimport React, { Component, type Node } from 'react';\nimport findIndex from 'lodash/findIndex';\nimport {\n  SortableTreeWithoutDndContext,\n  getNodeAtPath,\n} from 'react-sortable-tree';\nimport { mapFor } from '../../Utils/MapFor';\nimport { getInitialSelection, isEventSelected } from '../SelectionHandler';\nimport EventsRenderingService from './EventsRenderingService';\nimport EventHeightsCache from './EventHeightsCache';\nimport classNames from 'classnames';\nimport { eventsTree, eventsTreeWithSearchResults, icon } from './ClassNames';\nimport {\n  type SelectionState,\n  type EventContext,\n  type InstructionsListContext,\n  type InstructionContext,\n  type ParameterContext,\n} from '../SelectionHandler';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport ObjectsRenderingService from '../../ObjectsRendering/ObjectsRenderingService';\nimport { type ScreenType } from '../../UI/Reponsive/ScreenTypeMeasurer';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\n\n// Import default style of react-sortable-tree and the override made for EventsSheet.\nimport 'react-sortable-tree/style.css';\nimport './style.css';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport BottomButtons from './BottomButtons';\nimport EmptyEventsPlaceholder from './EmptyEventsPlaceholder';\nimport { CorsAwareImage } from '../../UI/CorsAwareImage';\nconst gd: libGDevelop = global.gd;\n\nconst getThumbnail = ObjectsRenderingService.getThumbnail.bind(\n  ObjectsRenderingService\n);\n\nconst defaultIndentWidth = 22;\nconst smallIndentWidth = 11;\n\nconst styles = {\n  container: { flex: 1 },\n  defaultEventContainer: {\n    marginRight: 10,\n  },\n  smallEventContainer: {\n    marginRight: 0,\n  },\n};\n\nconst getIndentWidth = (windowWidth: WidthType) =>\n  windowWidth === 'small' ? smallIndentWidth : defaultIndentWidth;\nconst getEventContainerStyle = (windowWidth: WidthType) =>\n  windowWidth === 'small'\n    ? styles.smallEventContainer\n    : styles.defaultEventContainer;\n\ntype EventsContainerProps = {|\n  eventsHeightsCache: EventHeightsCache,\n  event: gdBaseEvent,\n  leftIndentWidth: number,\n  disabled: boolean,\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  selection: SelectionState,\n  onAddNewInstruction: InstructionsListContext => void,\n  onPasteInstructions: InstructionsListContext => void,\n  onMoveToInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onInstructionClick: InstructionContext => void,\n  onInstructionDoubleClick: InstructionContext => void,\n  onInstructionContextMenu: (x: number, y: number, InstructionContext) => void,\n  onAddInstructionContextMenu: (\n    HTMLButtonElement,\n    InstructionsListContext\n  ) => void,\n  onParameterClick: ParameterContext => void,\n\n  onEventClick: (eventContext: EventContext) => void,\n  onEventContextMenu: (x: number, y: number) => void,\n  onOpenExternalEvents: string => void,\n  onOpenLayout: string => void,\n  renderObjectThumbnail: string => Node,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n  eventsSheetHeight: number,\n|};\n\n/**\n * The component containing an event.\n * It will report the rendered event height so that the EventsTree can\n * update accordingly.\n */\nclass EventContainer extends Component<EventsContainerProps, {||}> {\n  _container: ?any;\n  componentDidMount() {\n    const height = this._container ? this._container.offsetHeight : 0;\n    this.props.eventsHeightsCache.setEventHeight(this.props.event, height);\n  }\n\n  componentDidUpdate() {\n    const height = this._container ? this._container.offsetHeight : 0;\n    this.props.eventsHeightsCache.setEventHeight(this.props.event, height);\n  }\n\n  _onEventUpdated = () => {\n    this.forceUpdate();\n  };\n\n  _onEventContextMenu = (domEvent: any) => {\n    domEvent.preventDefault();\n    this.props.onEventContextMenu(domEvent.clientX, domEvent.clientY);\n  };\n\n  render() {\n    const { event, project, scope, disabled } = this.props;\n    const EventComponent = EventsRenderingService.getEventComponent(event);\n\n    return (\n      <div\n        ref={container => (this._container = container)}\n        onClick={this.props.onEventClick}\n        onContextMenu={this._onEventContextMenu}\n        style={getEventContainerStyle(this.props.windowWidth)}\n      >\n        {EventComponent && (\n          <EventComponent\n            project={project}\n            scope={scope}\n            event={event}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            selected={isEventSelected(this.props.selection, event)}\n            selection={this.props.selection}\n            leftIndentWidth={this.props.leftIndentWidth}\n            onUpdate={this._onEventUpdated}\n            onAddNewInstruction={this.props.onAddNewInstruction}\n            onPasteInstructions={this.props.onPasteInstructions}\n            onMoveToInstruction={this.props.onMoveToInstruction}\n            onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n            onInstructionClick={this.props.onInstructionClick}\n            onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n            onInstructionContextMenu={this.props.onInstructionContextMenu}\n            onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n            onParameterClick={this.props.onParameterClick}\n            onOpenExternalEvents={this.props.onOpenExternalEvents}\n            onOpenLayout={this.props.onOpenLayout}\n            disabled={\n              disabled /* Use disabled (not event.disabled) as it is true if a parent event is disabled*/\n            }\n            renderObjectThumbnail={this.props.renderObjectThumbnail}\n            screenType={this.props.screenType}\n            windowWidth={this.props.windowWidth}\n            eventsSheetHeight={this.props.eventsSheetHeight}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nconst getNodeKey = ({ treeIndex }) => treeIndex;\n\nconst SortableTree = ({ className, ...otherProps }) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <SortableTreeWithoutDndContext\n        className={`${eventsTree} ${\n          muiTheme.eventsSheetRootClassName\n        } ${className}`}\n        {...otherProps}\n      />\n    )}\n  </ThemeConsumer>\n);\n\nconst noop = () => {};\n\ntype EventsTreeProps = {|\n  events: gdEventsList,\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  selection: SelectionState,\n  onAddNewInstruction: InstructionsListContext => void,\n  onPasteInstructions: InstructionsListContext => void,\n  onMoveToInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onInstructionClick: InstructionContext => void,\n  onInstructionDoubleClick: InstructionContext => void,\n  onInstructionContextMenu: (x: number, y: number, InstructionContext) => void,\n  onAddInstructionContextMenu: (\n    HTMLButtonElement,\n    InstructionsListContext\n  ) => void,\n  onParameterClick: ParameterContext => void,\n\n  onEventClick: (eventContext: EventContext) => void,\n  onEventContextMenu: (\n    x: number,\n    y: number,\n    eventContext: EventContext\n  ) => void,\n  onAddNewEvent: (eventType: string, eventsList: gdEventsList) => void,\n  onOpenExternalEvents: string => void,\n  onOpenLayout: string => void,\n  showObjectThumbnails: boolean,\n\n  searchResults: ?Array<gdBaseEvent>,\n  searchFocusOffset: ?number,\n\n  onEventMoved: () => void,\n  onScroll?: () => void,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n  eventsSheetHeight: number,\n  fontSize?: number,\n|};\n\n// A node displayed by the SortableTree. Almost always represents an\n// event, except for the buttons at the bottom of the sheet.\ntype SortableTreeNode = {\n  eventsList: gdEventsList,\n  event: ?gdBaseEvent,\n  depth: number,\n  disabled: boolean,\n  indexInList: number,\n\n  // In case of nodes without event (buttons at the bottom of the sheet),\n  // use a fixed height.\n  fixedHeight?: ?number,\n};\n\n/**\n * Display a tree of event. Builtin on react-sortable-tree so that event\n * can be drag'n'dropped and events rows are virtualized.\n */\nexport default class ThemableEventsTree extends Component<EventsTreeProps, *> {\n  static defaultProps = {\n    selection: getInitialSelection(),\n  };\n  _list: ?any;\n  eventsHeightsCache: EventHeightsCache;\n\n  constructor(props: EventsTreeProps) {\n    super(props);\n\n    this.eventsHeightsCache = new EventHeightsCache(this);\n    this.state = {\n      ...this._eventsToTreeData(props.events),\n    };\n  }\n\n  componentDidMount() {\n    this.onHeightsChanged();\n  }\n\n  /**\n   * Should be called whenever an event height has changed\n   */\n  onHeightsChanged(cb: ?() => void) {\n    this.forceUpdate(() => {\n      if (this._list && this._list.wrappedInstance.current) {\n        this._list.wrappedInstance.current.recomputeRowHeights();\n      }\n      if (cb) cb();\n    });\n  }\n\n  /**\n   * Should be called whenever events changed (new event...)\n   * from outside this component.\n   */\n  forceEventsUpdate(cb: ?() => void) {\n    this.setState(this._eventsToTreeData(this.props.events), () => {\n      if (this._list && this._list.wrappedInstance.current) {\n        this._list.wrappedInstance.current.recomputeRowHeights();\n      }\n      if (cb) cb();\n    });\n  }\n\n  scrollToEvent(event: gdBaseEvent) {\n    const row = this._getEventRow(event);\n    if (row !== -1) {\n      if (this._list && this._list.wrappedInstance.current) {\n        this._list.wrappedInstance.current.scrollToRow(row);\n      }\n    }\n  }\n\n  /**\n   * Unfold events so that the given one is visible\n   */\n  unfoldForEvent(event: gdBaseEvent) {\n    gd.EventsListUnfolder.unfoldWhenContaining(this.props.events, event);\n    this.forceEventsUpdate();\n  }\n\n  _getEventRow(searchedEvent: gdBaseEvent) {\n    // TODO: flatData could be replaced by a hashmap of events to row index\n    return findIndex(\n      this.state.flatData,\n      event => event.ptr === searchedEvent.ptr\n    );\n  }\n\n  _eventsToTreeData = (\n    eventsList: gdEventsList,\n    flatData: Array<gdBaseEvent> = [],\n    depth: number = 0,\n    parentDisabled: boolean = false\n  ) => {\n    const treeData = mapFor<SortableTreeNode>(\n      0,\n      eventsList.getEventsCount(),\n      i => {\n        const event = eventsList.getEventAt(i);\n        flatData.push(event);\n\n        const disabled = parentDisabled || event.isDisabled();\n\n        return {\n          title: this._renderEvent,\n          event,\n          eventsList,\n          indexInList: i,\n          expanded: !event.isFolded(),\n          disabled,\n          depth,\n          key: event.ptr, //TODO: useless?\n          children: this._eventsToTreeData(\n            event.getSubEvents(),\n            // flatData is a flat representation of events, one for each line.\n            // Hence it should not contain the folded events.\n            !event.isFolded() ? flatData : [],\n            depth + 1,\n            disabled\n          ).treeData,\n        };\n      }\n    );\n\n    // Add the bottom buttons if we're at the root\n    const extraNodes = [\n      depth === 0\n        ? {\n            title: () => (\n              <BottomButtons\n                onAddEvent={(eventType: string) =>\n                  this.props.onAddNewEvent(eventType, this.props.events)\n                }\n              />\n            ),\n            event: null,\n            indexInList: eventsList.getEventsCount(),\n            disabled: false,\n            depth: 0,\n            fixedHeight: 40,\n            children: [],\n          }\n        : null,\n      depth === 0 && eventsList.getEventsCount() === 0\n        ? {\n            title: () => <EmptyEventsPlaceholder />,\n            event: null,\n            indexInList: eventsList.getEventsCount() + 1,\n            disabled: false,\n            depth: 0,\n            fixedHeight: 300,\n            children: [],\n          }\n        : null,\n    ].filter(Boolean);\n\n    return {\n      treeData: extraNodes.length ? treeData.concat(extraNodes) : treeData,\n      flatData,\n    };\n  };\n\n  _onMoveNode = ({\n    treeData,\n    path,\n    node,\n  }: {\n    treeData: any,\n    path: Array<any>,\n    node: SortableTreeNode,\n  }) => {\n    // Get the moved event and its list from the moved node.\n    const { event, eventsList } = node;\n    if (!event) return;\n\n    // Get the event list where the event should be moved to.\n    const targetPath = path.slice(0, -1);\n    const target = getNodeAtPath({\n      getNodeKey,\n      treeData: treeData,\n      path: targetPath,\n    });\n    const targetNode = target.node;\n    const targetEventsList =\n      targetNode && targetNode.event\n        ? targetNode.event.getSubEvents()\n        : this.props.events;\n    const targetPosition =\n      targetNode && targetNode.children ? targetNode.children.indexOf(node) : 0;\n\n    // Do the move\n    // Note that moveEventToAnotherEventsList does not invalidate the\n    // references to the event in memory - so things refering to this event like the\n    // selection in EventsSheet remain valid. This might not be needed anymore\n    // if events drag'n'drop is reworked to be similar to instructions drag'n'drop.\n    eventsList.moveEventToAnotherEventsList(\n      event,\n      targetEventsList,\n      targetPosition\n    );\n\n    this.forceEventsUpdate();\n    this.props.onEventMoved();\n  };\n\n  _canDrag = ({ node }: { node: ?SortableTreeNode }) => {\n    return !!node && !!node.event;\n  };\n\n  _canDrop = ({ nextParent }: { nextParent: ?SortableTreeNode }) => {\n    if (nextParent) {\n      if (nextParent.event) {\n        return nextParent.event.canHaveSubEvents();\n      }\n    }\n\n    // No \"nextParent\" means that we're trying to drop at the root\n    // of the events tree.\n    return true;\n  };\n\n  _canNodeHaveChildren = (node: ?SortableTreeNode) => {\n    if (node && node.event) {\n      return node.event.canHaveSubEvents();\n    }\n\n    return false;\n  };\n\n  _onVisibilityToggle = ({ node }: { node: SortableTreeNode }) => {\n    const { event } = node;\n    if (!event) return;\n\n    event.setFolded(!event.isFolded());\n    this.forceEventsUpdate();\n  };\n\n  _renderObjectThumbnail = (objectName: string) => {\n    const { project, scope, showObjectThumbnails } = this.props;\n    if (!showObjectThumbnails) return null;\n\n    const object = getObjectByName(project, scope.layout, objectName);\n    if (!object) return null;\n\n    return (\n      <CorsAwareImage\n        className={classNames({\n          [icon]: true,\n        })}\n        alt=\"\"\n        src={getThumbnail(project, object)}\n      />\n    );\n  };\n\n  _renderEvent = ({ node }: { node: SortableTreeNode }) => {\n    const { event, depth, disabled } = node;\n    if (!event) return null;\n\n    return (\n      <EventContainer\n        project={this.props.project}\n        scope={this.props.scope}\n        globalObjectsContainer={this.props.globalObjectsContainer}\n        objectsContainer={this.props.objectsContainer}\n        event={event}\n        key={event.ptr}\n        eventsHeightsCache={this.eventsHeightsCache}\n        selection={this.props.selection}\n        leftIndentWidth={depth * getIndentWidth(this.props.windowWidth)}\n        onAddNewInstruction={this.props.onAddNewInstruction}\n        onPasteInstructions={this.props.onPasteInstructions}\n        onMoveToInstruction={this.props.onMoveToInstruction}\n        onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n        onInstructionClick={this.props.onInstructionClick}\n        onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n        onParameterClick={this.props.onParameterClick}\n        onEventClick={() =>\n          this.props.onEventClick({\n            eventsList: node.eventsList,\n            event: event,\n            indexInList: node.indexInList,\n          })\n        }\n        onEventContextMenu={(x, y) =>\n          this.props.onEventContextMenu(x, y, {\n            eventsList: node.eventsList,\n            event: event,\n            indexInList: node.indexInList,\n          })\n        }\n        onInstructionContextMenu={this.props.onInstructionContextMenu}\n        onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n        onOpenExternalEvents={this.props.onOpenExternalEvents}\n        onOpenLayout={this.props.onOpenLayout}\n        disabled={\n          disabled /* Use node.disabled (not event.disabled) as it is true if a parent event is disabled*/\n        }\n        renderObjectThumbnail={this._renderObjectThumbnail}\n        screenType={this.props.screenType}\n        windowWidth={this.props.windowWidth}\n        eventsSheetHeight={this.props.eventsSheetHeight}\n      />\n    );\n  };\n\n  _isNodeHighlighted = ({\n    node,\n    searchQuery,\n  }: {\n    node: SortableTreeNode,\n    searchQuery: ?Array<gdBaseEvent>,\n  }) => {\n    const searchResults = searchQuery;\n    if (!searchResults) return false;\n    const { event } = node;\n    if (!event) return false;\n\n    return searchResults.find(highlightedEvent =>\n      gd.compare(highlightedEvent, event)\n    );\n  };\n\n  render() {\n    // react-sortable-tree does the rendering by transforming treeData\n    // into a flat array, the result being memoized. This hack forces\n    // a re-rendering of events, by discarding the memoized flat array\n    // (otherwise, no re-rendering would be done).\n    const treeData = this.state.treeData ? [...this.state.treeData] : null;\n    const zoomLevel = this.props.fontSize || 14;\n\n    return (\n      <div\n        style={{\n          ...styles.container,\n          fontSize: `${zoomLevel}px`,\n          '--icon-size': `${Math.round(zoomLevel * 1.14)}px`,\n        }}\n      >\n        <SortableTree\n          treeData={treeData}\n          scaffoldBlockPxWidth={getIndentWidth(this.props.windowWidth)}\n          onChange={noop}\n          onVisibilityToggle={this._onVisibilityToggle}\n          onMoveNode={this._onMoveNode}\n          canDrag={this._canDrag}\n          canDrop={this._canDrop}\n          canNodeHaveChildren={this._canNodeHaveChildren}\n          rowHeight={({ node }: { node: SortableTreeNode }) => {\n            if (!node.event) return node.fixedHeight || 0;\n\n            return this.eventsHeightsCache.getEventHeight(node.event);\n          }}\n          searchMethod={this._isNodeHighlighted}\n          searchQuery={this.props.searchResults}\n          searchFocusOffset={this.props.searchFocusOffset}\n          className={\n            this.props.searchResults ? eventsTreeWithSearchResults : ''\n          }\n          reactVirtualizedListProps={{\n            ref: list => (this._list = list),\n            onScroll: this.props.onScroll,\n          }}\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  executableEventContainer,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class StandardEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  render() {\n    var standardEvent = gd.asStandardEvent(this.props.event);\n\n    return (\n      <ConditionsActionsColumns\n        leftIndentWidth={this.props.leftIndentWidth}\n        windowWidth={this.props.windowWidth}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n        renderConditionsList={({ style, className }) => (\n          <InstructionsList\n            instrsList={standardEvent.getConditions()}\n            style={style}\n            className={className}\n            selection={this.props.selection}\n            areConditions\n            onAddNewInstruction={this.props.onAddNewInstruction}\n            onPasteInstructions={this.props.onPasteInstructions}\n            onMoveToInstruction={this.props.onMoveToInstruction}\n            onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n            onInstructionClick={this.props.onInstructionClick}\n            onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n            onInstructionContextMenu={this.props.onInstructionContextMenu}\n            onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n            onParameterClick={this.props.onParameterClick}\n            disabled={this.props.disabled}\n            renderObjectThumbnail={this.props.renderObjectThumbnail}\n            screenType={this.props.screenType}\n            windowWidth={this.props.windowWidth}\n          />\n        )}\n        renderActionsList={({ className }) => (\n          <InstructionsList\n            instrsList={standardEvent.getActions()}\n            style={\n              {\n                ...styles.actionsList,\n              } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n            }\n            className={className}\n            selection={this.props.selection}\n            areConditions={false}\n            onAddNewInstruction={this.props.onAddNewInstruction}\n            onPasteInstructions={this.props.onPasteInstructions}\n            onMoveToInstruction={this.props.onMoveToInstruction}\n            onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n            onInstructionClick={this.props.onInstructionClick}\n            onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n            onInstructionContextMenu={this.props.onInstructionContextMenu}\n            onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n            onParameterClick={this.props.onParameterClick}\n            disabled={this.props.disabled}\n            renderObjectThumbnail={this.props.renderObjectThumbnail}\n            screenType={this.props.screenType}\n            windowWidth={this.props.windowWidth}\n          />\n        )}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { mapFor } from '../../Utils/MapFor';\nimport classNames from 'classnames';\nimport {\n  selectedArea,\n  selectableArea,\n  subInstructionsContainer,\n  instructionParameter,\n  disabledText,\n  icon,\n} from './ClassNames';\nimport {\n  type InstructionsListContext,\n  type InstructionContext,\n} from '../SelectionHandler';\nimport InstructionsList from './InstructionsList';\nimport DropIndicator from './DropIndicator';\nimport ParameterRenderingService from '../ParameterRenderingService';\nimport InvalidParameterValue from './InvalidParameterValue';\nimport MissingParameterValue from './MissingParameterValue';\nimport { makeDragSourceAndDropTarget } from '../../UI/DragAndDrop/DragSourceAndDropTarget';\nimport {\n  type ScreenType,\n  useScreenType,\n} from '../../UI/Reponsive/ScreenTypeMeasurer';\nimport { type WidthType } from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport PreferencesContext from '../../MainFrame/Preferences/PreferencesContext';\nimport { useLongTouch } from '../../Utils/UseLongTouch';\nimport {\n  shouldActivate,\n  shouldValidate,\n} from '../../UI/KeyboardShortcuts/InteractionKeys';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    whiteSpace: 'normal',\n    wordWrap: 'break-word',\n    cursor: 'pointer',\n    marginBottom: 1,\n  },\n};\n\nexport const reactDndInstructionType = 'GD_DRAGGED_INSTRUCTION';\n\nconst capitalize = (str: string) => {\n  if (!str) return '';\n\n  return str[0].toUpperCase() + str.substr(1);\n};\n\nconst DragSourceAndDropTarget = makeDragSourceAndDropTarget<{\n  isCondition: boolean,\n}>(reactDndInstructionType);\n\ntype Props = {|\n  instruction: gdInstruction,\n  isCondition: boolean,\n  onClick: Function,\n  selected: boolean,\n  disabled: boolean,\n  onDoubleClick: () => void,\n  onContextMenu: (x: number, y: number) => void,\n  onMoveToInstruction: () => void,\n\n  // For potential sub-instructions list:\n  selection: Object,\n  onAddNewSubInstruction: InstructionsListContext => void,\n  onPasteSubInstructions: InstructionsListContext => void,\n  onMoveToSubInstruction: (destinationContext: InstructionContext) => void,\n  onMoveToSubInstructionsList: (\n    destinationContext: InstructionsListContext\n  ) => void,\n  onSubInstructionClick: InstructionContext => void,\n  onSubInstructionDoubleClick: InstructionContext => void,\n  onAddSubInstructionContextMenu: (\n    button: HTMLButtonElement,\n    instructionsListContext: InstructionsListContext\n  ) => void,\n  onSubParameterClick: Function,\n  onSubInstructionContextMenu: (\n    x: number,\n    y: number,\n    instructionContext: InstructionContext\n  ) => void,\n  onParameterClick: (event: any, parameterIndex: number) => void,\n  renderObjectThumbnail: string => React.Node,\n\n  screenType: ScreenType,\n  windowWidth: WidthType,\n|};\n\nconst Instruction = (props: Props) => {\n  const {\n    instruction,\n    isCondition,\n    onClick,\n    onMoveToInstruction,\n    onContextMenu,\n  } = props;\n\n  const instrFormatter = React.useMemo(\n    () => gd.InstructionSentenceFormatter.get(),\n    []\n  );\n  const preferences = React.useContext(PreferencesContext);\n  const useAssignmentOperators =\n    preferences.values.eventsSheetUseAssignmentOperators;\n\n  /**\n   * Render the different parts of the text of the instruction.\n   * Parameter can have formatting, be hovered and clicked. The rest\n   * has not particular styling.\n   */\n  const renderInstructionText = (metadata: gdInstructionMetadata) => {\n    const { instruction, disabled, renderObjectThumbnail } = props;\n    const formattedTexts = instrFormatter.getAsFormattedText(\n      instruction,\n      metadata\n    );\n    const parametersCount = metadata.getParametersCount();\n\n    return (\n      <span\n        className={classNames({\n          [disabledText]: disabled,\n        })}\n      >\n        {mapFor(0, formattedTexts.size(), i => {\n          const formatting = formattedTexts.getTextFormatting(i);\n          const parameterIndex = formatting.getUserData();\n          const isParameter =\n            parameterIndex >= 0 && parameterIndex < parametersCount;\n\n          if (!isParameter) {\n            return (\n              <span key={i}>\n                {i === 0\n                  ? capitalize(formattedTexts.getString(i))\n                  : formattedTexts.getString(i)}\n              </span>\n            );\n          }\n\n          const parameterMetadata = metadata.getParameter(parameterIndex);\n          const parameterType = parameterMetadata.getType();\n          return (\n            <span\n              key={i}\n              className={classNames({\n                [selectableArea]: true,\n                [instructionParameter]: true,\n                [parameterType]: true,\n              })}\n              onClick={domEvent => {\n                props.onParameterClick(domEvent, parameterIndex);\n\n                // On touchscreen, don't propagate the click to the instruction div,\n                // as it's listening for taps to simulate double \"clicks\".\n                if (props.screenType === 'touch') {\n                  domEvent.stopPropagation();\n                }\n              }}\n              onKeyPress={event => {\n                if (shouldActivate(event)) {\n                  props.onParameterClick(event, parameterIndex);\n                  event.stopPropagation();\n                  event.preventDefault();\n                }\n              }}\n              tabIndex={0}\n            >\n              {ParameterRenderingService.renderInlineParameter({\n                value: formattedTexts.getString(i),\n                parameterMetadata,\n                renderObjectThumbnail,\n                InvalidParameterValue,\n                MissingParameterValue,\n                useAssignmentOperators,\n              })}\n            </span>\n          );\n        })}\n      </span>\n    );\n  };\n\n  // Disable drag on touchscreens, because it would interfere with the\n  // scroll, and would create too much mistake/frustration.\n  const screenType = useScreenType();\n  const dragAllowed = screenType !== 'touch';\n\n  // Allow a long press to show the context menu\n  const longTouchForContextMenuProps = useLongTouch(\n    React.useCallback(\n      event => {\n        onContextMenu(event.clientX, event.clientY);\n      },\n      [onContextMenu]\n    )\n  );\n\n  return (\n    <DragSourceAndDropTarget\n      beginDrag={() => {\n        onClick(); // Select the dragged instruction\n\n        // No need to save here what is being dragged,\n        // as its the entire selection that is considered to be dragged.\n        return {\n          isCondition,\n        };\n      }}\n      canDrag={() => dragAllowed}\n      canDrop={draggedItem => draggedItem.isCondition === isCondition}\n      drop={() => {\n        onMoveToInstruction();\n      }}\n    >\n      {({ connectDragSource, connectDropTarget, isOver, canDrop }) => {\n        // /!\\ It's important to get the metadata now so that we're sure they\n        // are valid.\n        // If the metadata is retrieved outside of the closure, it's possible\n        // that the metadata is changed in the meantime (especially on behavior\n        // properties it seems).\n        const metadata = isCondition\n          ? gd.MetadataProvider.getConditionMetadata(\n              gd.JsPlatform.get(),\n              instruction.getType()\n            )\n          : gd.MetadataProvider.getActionMetadata(\n              gd.JsPlatform.get(),\n              instruction.getType()\n            );\n\n        // The instruction itself can be dragged and is a target for\n        // another instruction to be dropped. It's IMPORTANT NOT to have\n        // the subinstructions list inside the connectDropTarget/connectDragSource\n        // as otherwise this can confuse react-dnd (\"Expected to find a valid target\")\n        // (surely due to components re-mounting/rerendering ?).\n        const instructionDragSourceElement = connectDragSource(\n          <div\n            style={styles.container}\n            className={classNames({\n              [selectableArea]: true,\n              [selectedArea]: props.selected,\n            })}\n            onClick={e => {\n              e.stopPropagation();\n\n              if (props.screenType === 'touch' && props.selected) {\n                // On touch screens, tapping again a selected instruction should edit it.\n                props.onDoubleClick();\n              } else {\n                props.onClick();\n              }\n            }}\n            onDoubleClick={e => {\n              e.stopPropagation();\n              props.onDoubleClick();\n            }}\n            onContextMenu={e => {\n              e.stopPropagation();\n              onContextMenu(e.clientX, e.clientY);\n            }}\n            {...longTouchForContextMenuProps}\n            onKeyPress={event => {\n              if (shouldValidate(event)) {\n                props.onDoubleClick();\n                event.stopPropagation();\n                event.preventDefault();\n              } else if (shouldActivate(event)) {\n                props.onClick();\n                event.stopPropagation();\n                event.preventDefault();\n              }\n            }}\n            tabIndex={0}\n          >\n            {instruction.isInverted() && (\n              <img\n                className={classNames({\n                  [icon]: true,\n                })}\n                src=\"res/contraire.png\"\n                alt=\"Condition is negated\"\n              />\n            )}\n            <img\n              className={classNames({\n                [icon]: true,\n              })}\n              src={metadata.getSmallIconFilename()}\n              alt=\"\"\n            />\n            {renderInstructionText(metadata)}\n          </div>\n        );\n\n        const instructionDragSourceDropTargetElement = instructionDragSourceElement\n          ? connectDropTarget(instructionDragSourceElement)\n          : null;\n\n        return (\n          <React.Fragment>\n            {isOver && <DropIndicator canDrop={canDrop} />}\n            {instructionDragSourceDropTargetElement}\n            {metadata.canHaveSubInstructions() && (\n              <InstructionsList\n                style={\n                  {} /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n                }\n                className={subInstructionsContainer}\n                instrsList={instruction.getSubInstructions()}\n                areConditions={props.isCondition}\n                selection={props.selection}\n                onAddNewInstruction={props.onAddNewSubInstruction}\n                onPasteInstructions={props.onPasteSubInstructions}\n                onMoveToInstruction={props.onMoveToSubInstruction}\n                onMoveToInstructionsList={props.onMoveToSubInstructionsList}\n                onInstructionClick={props.onSubInstructionClick}\n                onInstructionDoubleClick={props.onSubInstructionDoubleClick}\n                onInstructionContextMenu={props.onSubInstructionContextMenu}\n                onAddInstructionContextMenu={\n                  props.onAddSubInstructionContextMenu\n                }\n                onParameterClick={props.onSubParameterClick}\n                addButtonLabel={<Trans>Add a sub-condition</Trans>}\n                disabled={props.disabled}\n                renderObjectThumbnail={props.renderObjectThumbnail}\n                screenType={props.screenType}\n                windowWidth={props.windowWidth}\n              />\n            )}\n          </React.Fragment>\n        );\n      }}\n    </DragSourceAndDropTarget>\n  );\n};\n\nexport default Instruction;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\n\nconst operatorLabels = {\n  '=': t`= (equal to)`,\n  '<': t`< (less than)`,\n  '>': t`> (greater than)`,\n  '<=': t`≤ (less or equal to)`,\n  '>=': t`≥ (greater or equal to)`,\n  '!=': t`≠ (not equal to)`,\n};\n\nconst mapTypeToOperators: { [string]: Array<string> } = {\n  unknown: Object.keys(operatorLabels),\n  number: ['=', '<', '>', '<=', '>=', '!='],\n  string: ['=', '!='],\n  color: ['=', '!='],\n};\n\nexport default class RelationalOperatorField extends Component<ParameterFieldProps> {\n  _field: ?SelectField;\n  focus() {\n    if (this._field && this._field.focus) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    const comparedValueType = parameterMetadata\n      ? parameterMetadata.getExtraInfo()\n      : 'unknown';\n    const operators =\n      mapTypeToOperators[comparedValueType] || mapTypeToOperators.unknown;\n\n    return (\n      <SelectField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        value={this.props.value}\n        onChange={(e, i, value: string) => this.props.onChange(value)}\n        ref={field => (this._field = field)}\n        hintText={t`Choose an operator`}\n      >\n        {operators.map(operator => (\n          <SelectOption\n            key={operator}\n            value={operator}\n            primaryText={operatorLabels[operator]}\n          />\n        ))}\n      </SelectField>\n    );\n  }\n}\n\nexport const renderInlineRelationalOperator = ({\n  value,\n  InvalidParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value) {\n    return (\n      <InvalidParameterValue isEmpty>\n        <Trans>Choose an operator</Trans>\n      </InvalidParameterValue>\n    );\n  }\n\n  if (\n    value !== '=' &&\n    value !== '<' &&\n    value !== '>' &&\n    value !== '<=' &&\n    value !== '>=' &&\n    value !== '!='\n  ) {\n    return <InvalidParameterValue>{value}</InvalidParameterValue>;\n  }\n\n  if (value === '<=') return '\\u2264';\n  if (value === '>=') return '\\u2265';\n  else if (value === '!=') return '\\u2260';\n\n  return value;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\n\nconst operatorLabels = {\n  '=': t`= (set to)`,\n  '+': t`+ (add)`,\n  '-': t`- (subtract)`,\n  '*': t`* (multiply by)`,\n  '/': t`/ (divide by)`,\n};\n\nconst mapTypeToOperators = {\n  unknown: Object.keys(operatorLabels),\n  number: ['=', '+', '-', '*', '/'],\n  string: ['=', '+'],\n  color: ['=', '+'],\n};\n\nexport default class OperatorField extends Component<ParameterFieldProps> {\n  _field: ?SelectField;\n  focus() {\n    if (this._field && this._field.focus) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    const comparedValueType = parameterMetadata\n      ? parameterMetadata.getExtraInfo()\n      : 'unknown';\n    const operators =\n      mapTypeToOperators[comparedValueType] || mapTypeToOperators.unknown;\n\n    return (\n      <SelectField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        value={this.props.value}\n        onChange={(e, i, value: string) => this.props.onChange(value)}\n        ref={field => (this._field = field)}\n        hintText={t`Choose an operator`}\n      >\n        {operators.map(operator => (\n          <SelectOption\n            key={operator}\n            value={operator}\n            primaryText={operatorLabels[operator]}\n          />\n        ))}\n      </SelectField>\n    );\n  }\n}\n\nexport const renderInlineOperator = ({\n  value,\n  InvalidParameterValue,\n  useAssignmentOperators,\n}: ParameterInlineRendererProps) => {\n  if (!value) {\n    return (\n      <InvalidParameterValue isEmpty>\n        <Trans>Choose an operator</Trans>\n      </InvalidParameterValue>\n    );\n  }\n\n  if (useAssignmentOperators) {\n    if (value === '=') return '=';\n    else if (value === '+') return '+=';\n    else if (value === '-') return '-=';\n    else if (value === '/') return '/=';\n    else if (value === '*') return '*=';\n  } else {\n    if (value === '=') return <Trans>set to</Trans>;\n    else if (value === '+') return <Trans>add</Trans>;\n    else if (value === '-') return <Trans>subtract</Trans>;\n    else if (value === '/') return <Trans>divide by</Trans>;\n    else if (value === '*') return <Trans>multiply by</Trans>;\n  }\n\n  return <InvalidParameterValue>{value}</InvalidParameterValue>;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\n\nexport default class MouseField extends Component<ParameterFieldProps> {\n  _field: ?SelectField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { parameterMetadata, value } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    return (\n      <SelectField\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        floatingLabelText={description}\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        value={value}\n        ref={field => (this._field = field)}\n        onChange={(e, i, value) => this.props.onChange(value)}\n      >\n        <SelectOption value=\"Left\" primaryText={t`Left (primary)`} />\n        <SelectOption value=\"Right\" primaryText={t`Right (secondary)`} />\n        <SelectOption\n          value=\"Middle\"\n          primaryText={t`Middle (Auxiliary button, usually the wheel button)`}\n        />\n      </SelectField>\n    );\n  }\n}\n\nexport const renderInlineMouse = ({\n  value,\n  InvalidParameterValue,\n}: ParameterInlineRendererProps) => {\n  return value ? (\n    value\n  ) : (\n    <InvalidParameterValue isEmpty>\n      <Trans>Choose a mouse button</Trans>\n    </InvalidParameterValue>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport SemiControlledAutoComplete from '../../UI/SemiControlledAutoComplete';\n\nconst keyNames = [\n  'Num0',\n  'Num1',\n  'Num2',\n  'Num3',\n  'Num4',\n  'Num5',\n  'Num6',\n  'Num7',\n  'Num8',\n  'Num9',\n  'a',\n  'b',\n  'c',\n  'd',\n  'e',\n  'f',\n  'g',\n  'h',\n  'i',\n  'j',\n  'k',\n  'l',\n  'm',\n  'n',\n  'o',\n  'p',\n  'q',\n  'r',\n  's',\n  't',\n  'u',\n  'v',\n  'w',\n  'x',\n  'y',\n  'z',\n  'LBracket',\n  'RBracket',\n  'SemiColon',\n  'Numpad0',\n  'Numpad1',\n  'Numpad2',\n  'Numpad3',\n  'Numpad4',\n  'Numpad5',\n  'Numpad6',\n  'Numpad7',\n  'Numpad8',\n  'Numpad9',\n  'Escape',\n  'Space',\n  'Return',\n  'Back',\n  'Tab',\n  'PageUp',\n  'PageDown',\n  'End',\n  'Home',\n  'Insert',\n  'Delete',\n  'Add',\n  'Subtract',\n  'Multiply',\n  'Divide',\n  'NumpadAdd',\n  'NumpadSubtract',\n  'NumpadMultiply',\n  'NumpadDivide',\n  'Left',\n  'Right',\n  'Up',\n  'Down',\n  'NumpadLeft',\n  'NumpadRight',\n  'NumpadUp',\n  'NumpadDown',\n  'F1',\n  'F2',\n  'F3',\n  'F4',\n  'F5',\n  'F6',\n  'F7',\n  'F8',\n  'F9',\n  'F10',\n  'F11',\n  'F12',\n  'Pause',\n  'RControl',\n  'LControl',\n  'RAlt',\n  'LAlt',\n  'RShift',\n  'LShift',\n];\n\nconst isKeyValid = (key: string) => keyNames.indexOf(key) !== -1;\n\nexport default class KeyField extends Component<ParameterFieldProps, {||}> {\n  _field: ?any;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      isInline,\n      parameterMetadata,\n      onRequestClose,\n      onApply,\n    } = this.props;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={\n          parameterMetadata ? parameterMetadata.getDescription() : undefined\n        }\n        helperMarkdownText={\n          parameterMetadata ? parameterMetadata.getLongDescription() : undefined\n        }\n        fullWidth\n        value={value}\n        onChange={onChange}\n        dataSource={keyNames.map(keyName => ({\n          text: keyName,\n          value: keyName,\n        }))}\n        openOnFocus={!isInline}\n        onRequestClose={onRequestClose}\n        onApply={onApply}\n        ref={field => (this._field = field)}\n        errorText={\n          !value ? (\n            <Trans>You must select a key.</Trans>\n          ) : !isKeyValid(value) ? (\n            <Trans>You must select a valid key. \"{value}\" is not valid.</Trans>\n          ) : (\n            undefined\n          )\n        }\n      />\n    );\n  }\n}\n\nexport const renderInlineKey = ({\n  value,\n  InvalidParameterValue,\n}: ParameterInlineRendererProps) => {\n  if (!value) {\n    return (\n      <InvalidParameterValue isEmpty>\n        <Trans>Choose a key</Trans>\n      </InvalidParameterValue>\n    );\n  }\n\n  return isKeyValid(value) ? (\n    value\n  ) : (\n    <InvalidParameterValue>{value}</InvalidParameterValue>\n  );\n};\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\n\n/**\n * Objects with an unknown type are rendered with a placeholder rectangle.\n *\n * @extends RenderedInstance\n * @class RenderedUnknownInstance\n * @constructor\n */\nfunction RenderedUnknownInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  //This renderer show a placeholder for the object:\n  this._pixiObject = new PIXI.Graphics();\n  this._pixiContainer.addChild(this._pixiObject);\n\n  var width = instance.hasCustomSize() ? instance.getCustomWidth() : 32;\n  var height = instance.hasCustomSize() ? instance.getCustomHeight() : 32;\n\n  this._pixiObject.beginFill(0x0033ff);\n  this._pixiObject.lineStyle(1, 0xffd900, 1);\n  this._pixiObject.moveTo(0, 0);\n  this._pixiObject.lineTo(width, 0);\n  this._pixiObject.lineTo(width, height);\n  this._pixiObject.lineTo(0, height);\n  this._pixiObject.endFill();\n}\nRenderedUnknownInstance.prototype = Object.create(RenderedInstance.prototype);\nRenderedUnknownInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  return 'res/unknown32.png';\n};\n\nRenderedUnknownInstance.prototype.update = function() {\n  this._pixiObject.position.x = this._instance.getX();\n  this._pixiObject.position.y = this._instance.getY();\n  this._pixiObject.rotation = (this._instance.getAngle() * Math.PI) / 180.0;\n};\n\nexport default RenderedUnknownInstance;\n","import FontFaceObserver from 'fontfaceobserver';\n\n/**\n * A simple wrapper around FontFace (if supported) or @font-face + FontFaceObserver\n * to load a font from an url and be notified when loading is done (or failed).\n * @param {*} fontFamily\n * @param {*} src\n * @param {*} descriptors\n */\nexport const loadFontFace = (fontFamily, src, descriptors = {}) => {\n  if (typeof FontFace !== 'undefined') {\n    // Load the given font using CSS Font Loading API.\n    const fontFace = new FontFace(fontFamily, src, descriptors);\n    document.fonts.add(fontFace);\n    return fontFace.load();\n  } else {\n    // Add @font-face and use FontFaceObserver to be notified when the\n    // font is ready.\n    const newStyle = document.createElement('style');\n    newStyle.appendChild(\n      document.createTextNode(\n        `@font-face {\n          font-family: ${fontFamily};\n          src: ${src};\n        }`\n      )\n    );\n\n    document.head.appendChild(newStyle);\n    return new FontFaceObserver(fontFamily, descriptors).load().catch(err => {\n      console.warn(`Error while loading font ${fontFamily}`, err);\n\n      throw err;\n    });\n  }\n};\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\nconst gd /* TODO: add flow in this file */ = global.gd;\n\n/**\n * Renderer for gd.SpriteObject\n *\n * @extends RenderedInstance\n * @class RenderedSpriteInstance\n * @constructor\n */\nfunction RenderedSpriteInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  this._renderedAnimation = 0;\n  this._renderedDirection = 0;\n  this._centerX = 0;\n  this._centerY = 0;\n  this._originX = 0;\n  this._originY = 0;\n\n  //Setup the PIXI object:\n  this._pixiObject = new PIXI.Sprite(\n    this._pixiResourcesLoader.getInvalidPIXITexture()\n  );\n  this._pixiContainer.addChild(this._pixiObject);\n  this.updatePIXITextureAndSprite();\n}\nRenderedSpriteInstance.prototype = Object.create(RenderedInstance.prototype);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedSpriteInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  const spriteObject = gd.asSpriteObject(object);\n\n  if (\n    spriteObject.getAnimationsCount() > 0 &&\n    spriteObject.getAnimation(0).getDirectionsCount() > 0 &&\n    spriteObject\n      .getAnimation(0)\n      .getDirection(0)\n      .getSpritesCount() > 0\n  ) {\n    const imageName = spriteObject\n      .getAnimation(0)\n      .getDirection(0)\n      .getSprite(0)\n      .getImageName();\n    return resourcesLoader.getResourceFullUrl(project, imageName, {});\n  }\n\n  return 'res/unknown32.png';\n};\n\nRenderedSpriteInstance.prototype.updatePIXISprite = function() {\n  this._pixiObject.anchor.x =\n    this._centerX / this._pixiObject.texture.frame.width;\n  this._pixiObject.anchor.y =\n    this._centerY / this._pixiObject.texture.frame.height;\n  this._pixiObject.rotation = this._shouldNotRotate\n    ? 0\n    : RenderedInstance.toRad(this._instance.getAngle());\n  if (this._instance.hasCustomSize()) {\n    this._pixiObject.scale.x =\n      this._instance.getCustomWidth() / this._pixiObject.texture.frame.width;\n    this._pixiObject.scale.y =\n      this._instance.getCustomHeight() / this._pixiObject.texture.frame.height;\n  } else {\n    this._pixiObject.scale.x = 1;\n    this._pixiObject.scale.y = 1;\n  }\n  this._pixiObject.position.x =\n    this._instance.getX() +\n    (this._centerX - this._originX) * Math.abs(this._pixiObject.scale.x);\n  this._pixiObject.position.y =\n    this._instance.getY() +\n    (this._centerY - this._originY) * Math.abs(this._pixiObject.scale.y);\n};\n\nRenderedSpriteInstance.prototype.updateSprite = function() {\n  this._sprite = null;\n  this._shouldNotRotate = false;\n\n  const spriteObject = gd.asSpriteObject(this._associatedObject);\n  if (spriteObject.hasNoAnimations()) return false;\n\n  this._renderedAnimation = this._instance.getRawDoubleProperty('animation');\n  if (this._renderedAnimation >= spriteObject.getAnimationsCount())\n    this._renderedAnimation = 0;\n\n  const animation = spriteObject.getAnimation(this._renderedAnimation);\n  if (animation.hasNoDirections()) return false;\n\n  this._renderedDirection = 0;\n  if (animation.useMultipleDirections()) {\n    let normalizedAngle = Math.floor(this._instance.getAngle()) % 360;\n    if (normalizedAngle < 0) normalizedAngle += 360;\n\n    this._renderedDirection = Math.round(normalizedAngle / 45) % 8;\n  }\n\n  if (this._renderedDirection >= animation.getDirectionsCount())\n    this._renderedDirection = 0;\n\n  const direction = animation.getDirection(this._renderedDirection);\n\n  if (direction.getSpritesCount() === 0) return false;\n\n  this._shouldNotRotate = animation.useMultipleDirections();\n  this._sprite = direction.getSprite(0);\n  return true;\n};\n\nRenderedSpriteInstance.prototype.updatePIXITextureAndSprite = function() {\n  this.updateSprite();\n  if (!this._sprite) return;\n\n  const texture = this._pixiResourcesLoader.getPIXITexture(\n    this._project,\n    this._sprite.getImageName()\n  );\n  this._pixiObject.texture = texture;\n\n  if (!texture.baseTexture.valid) {\n    // Post pone texture update if texture is not loaded.\n    texture.once('update', () => this.updatePIXITextureAndSprite());\n    return;\n  }\n\n  const origin = this._sprite.getOrigin();\n  this._originX = origin.getX();\n  this._originY = origin.getY();\n\n  if (this._sprite.isDefaultCenterPoint()) {\n    this._centerX = texture.width / 2;\n    this._centerY = texture.height / 2;\n  } else {\n    const center = this._sprite.getCenter();\n    this._centerX = center.getX();\n    this._centerY = center.getY();\n  }\n\n  this.updatePIXISprite();\n};\n\nRenderedSpriteInstance.prototype.update = function() {\n  const animation = this._instance.getRawDoubleProperty('animation');\n  if (this._renderedAnimation !== animation) {\n    this.updatePIXITextureAndSprite();\n  } else {\n    this.updatePIXISprite();\n  }\n};\n\nRenderedSpriteInstance.prototype.getOriginX = function() {\n  if (!this._sprite || !this._pixiObject) return 0;\n\n  return this._sprite.getOrigin().getX() * this._pixiObject.scale.x;\n};\n\nRenderedSpriteInstance.prototype.getOriginY = function() {\n  if (!this._sprite || !this._pixiObject) return 0;\n\n  return this._sprite.getOrigin().getY() * this._pixiObject.scale.y;\n};\n\nRenderedSpriteInstance.prototype.getDefaultWidth = function() {\n  return Math.abs(this._pixiObject.width);\n};\n\nRenderedSpriteInstance.prototype.getDefaultHeight = function() {\n  return Math.abs(this._pixiObject.height);\n};\n\nexport default RenderedSpriteInstance;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\nconst gd /* TODO: add flow in this file */ = global.gd;\n\n/**\n * Renderer for gd.TiledSpriteObject\n *\n * @extends RenderedInstance\n * @class RenderedTiledSpriteInstance\n * @constructor\n */\nfunction RenderedTiledSpriteInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  //Setup the PIXI object:\n  var tiledSprite = gd.asTiledSpriteObject(associatedObject);\n  this._texture = tiledSprite.getTexture();\n  this._pixiObject = new PIXI.TilingSprite(\n    this._pixiResourcesLoader.getPIXITexture(project, tiledSprite.getTexture()),\n    tiledSprite.getWidth(),\n    tiledSprite.getHeight()\n  );\n  this._pixiObject.anchor.x = 0.5;\n  this._pixiObject.anchor.y = 0.5;\n  this._pixiContainer.addChild(this._pixiObject);\n}\nRenderedTiledSpriteInstance.prototype = Object.create(\n  RenderedInstance.prototype\n);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedTiledSpriteInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  var tiledSprite = gd.asTiledSpriteObject(object);\n\n  return resourcesLoader.getResourceFullUrl(\n    project,\n    tiledSprite.getTexture(),\n    {}\n  );\n};\n\nRenderedTiledSpriteInstance.prototype.update = function() {\n  var tiledSprite = gd.asTiledSpriteObject(this._associatedObject);\n  if (this._instance.hasCustomSize()) {\n    this._pixiObject.width = this._instance.getCustomWidth();\n    this._pixiObject.height = this._instance.getCustomHeight();\n  } else {\n    this._pixiObject.width = tiledSprite.getWidth();\n    this._pixiObject.height = tiledSprite.getHeight();\n  }\n\n  if (this._texture !== tiledSprite.getTexture()) {\n    this._texture = tiledSprite.getTexture();\n    this._pixiObject.texture = this._pixiResourcesLoader.getPIXITexture(\n      this._project,\n      tiledSprite.getTexture()\n    );\n  }\n\n  this._pixiObject.x = this._instance.getX() + this._pixiObject.width / 2;\n  this._pixiObject.y = this._instance.getY() + this._pixiObject.height / 2;\n  this._pixiObject.rotation = RenderedInstance.toRad(this._instance.getAngle());\n};\n\nRenderedTiledSpriteInstance.prototype.getDefaultWidth = function() {\n  var tiledSprite = gd.asTiledSpriteObject(this._associatedObject);\n  return tiledSprite.getWidth();\n};\n\nRenderedTiledSpriteInstance.prototype.getDefaultHeight = function() {\n  var tiledSprite = gd.asTiledSpriteObject(this._associatedObject);\n  return tiledSprite.getHeight();\n};\n\nexport default RenderedTiledSpriteInstance;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\nconst gd /* TODO: add flow in this file */ = global.gd;\n\n/**\n * Renderer for gd.PanelSpriteObject\n *\n * Heavily inspired from the GDJS PIXI renderer for PanelSprite objects.\n * TODO: Find a way to factor GDJS objects and IDE instances renderers.\n *\n * @extends RenderedInstance\n * @class RenderedPanelSpriteInstance\n * @constructor\n */\nfunction RenderedPanelSpriteInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  this.makeObjects();\n  this.updateTexture();\n}\nRenderedPanelSpriteInstance.prototype = Object.create(\n  RenderedInstance.prototype\n);\n\nRenderedPanelSpriteInstance.prototype.update = function() {\n  //TODO\n  // if (this._pixiObject.visible && this._wasRendered) {\n  //   this._pixiObject.cacheAsBitmap = true;\n  // }\n  // this._wasRendered = true;\n\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  if (panelSprite.isTiled() !== this._tiled) {\n    this.makeObjects();\n  }\n  if (panelSprite.getTexture() !== this._textureName) {\n    this.updateTexture();\n  }\n\n  this.updateAngle();\n  this.updatePosition();\n\n  const oldWidth = this._width;\n  const oldHeight = this._height;\n  if (this._instance.hasCustomSize()) {\n    this._width = this._instance.getCustomWidth();\n    this._height = this._instance.getCustomHeight();\n  } else {\n    var tiledSprite = gd.asPanelSpriteObject(this._associatedObject);\n    this._width = tiledSprite.getWidth();\n    this._height = tiledSprite.getHeight();\n  }\n\n  if (this._width !== oldWidth || this._height !== oldHeight) {\n    this.updateWidthHeight();\n  }\n};\n\nRenderedPanelSpriteInstance.prototype.makeObjects = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  this._textureName = panelSprite.getTexture();\n  const texture = this._pixiResourcesLoader.getPIXITexture(\n    this._project,\n    this._textureName\n  );\n\n  this._tiled = panelSprite.isTiled();\n  var StretchedSprite = !this._tiled ? PIXI.Sprite : PIXI.TilingSprite;\n\n  if (!this._pixiObject) {\n    this._pixiObject = new PIXI.Container();\n    this._pixiContainer.addChild(this._pixiObject);\n  }\n  this._centerSprite = new StretchedSprite(new PIXI.Texture(texture));\n  this._borderSprites = [\n    new StretchedSprite(new PIXI.Texture(texture)), //Right\n    new PIXI.Sprite(texture), //Top-Right\n    new StretchedSprite(new PIXI.Texture(texture)), //Top\n    new PIXI.Sprite(texture), //Top-Left\n    new StretchedSprite(new PIXI.Texture(texture)), //Left\n    new PIXI.Sprite(texture), //Bottom-Left\n    new StretchedSprite(new PIXI.Texture(texture)), //Bottom\n    new PIXI.Sprite(texture), //Bottom-Right\n  ];\n\n  this._pixiObject.removeChildren();\n  this._pixiObject.addChild(this._centerSprite);\n  for (var i = 0; i < this._borderSprites.length; ++i) {\n    this._pixiObject.addChild(this._borderSprites[i]);\n  }\n};\n\nRenderedPanelSpriteInstance.prototype.updateAngle = function() {\n  this._pixiObject.rotation = RenderedInstance.toRad(this._instance.getAngle());\n};\n\nRenderedPanelSpriteInstance.prototype.updatePosition = function() {\n  this._pixiObject.x = this._instance.getX() + this._width / 2;\n  this._pixiObject.y = this._instance.getY() + this._height / 2;\n};\n\nRenderedPanelSpriteInstance.prototype._updateLocalPositions = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n\n  this._centerSprite.position.x = panelSprite.getLeftMargin();\n  this._centerSprite.position.y = panelSprite.getTopMargin();\n\n  //Right\n  this._borderSprites[0].position.x =\n    this._width - panelSprite.getRightMargin();\n  this._borderSprites[0].position.y = panelSprite.getTopMargin();\n\n  //Top-right\n  this._borderSprites[1].position.x =\n    this._width - this._borderSprites[1].width;\n  this._borderSprites[1].position.y = 0;\n\n  //Top\n  this._borderSprites[2].position.x = panelSprite.getLeftMargin();\n  this._borderSprites[2].position.y = 0;\n\n  //Top-Left\n  this._borderSprites[3].position.x = 0;\n  this._borderSprites[3].position.y = 0;\n\n  //Left\n  this._borderSprites[4].position.x = 0;\n  this._borderSprites[4].position.y = panelSprite.getTopMargin();\n\n  //Bottom-Left\n  this._borderSprites[5].position.x = 0;\n  this._borderSprites[5].position.y =\n    this._height - this._borderSprites[5].height;\n\n  //Bottom\n  this._borderSprites[6].position.x = panelSprite.getLeftMargin();\n  this._borderSprites[6].position.y =\n    this._height - panelSprite.getBottomMargin();\n\n  //Bottom-Right\n  this._borderSprites[7].position.x =\n    this._width - this._borderSprites[7].width;\n  this._borderSprites[7].position.y =\n    this._height - this._borderSprites[7].height;\n};\n\nRenderedPanelSpriteInstance.prototype._updateSpritesAndTexturesSize = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  this._centerSprite.width = Math.max(\n    this._width - panelSprite.getRightMargin() - panelSprite.getLeftMargin(),\n    0\n  );\n  this._centerSprite.height = Math.max(\n    this._height - panelSprite.getTopMargin() - panelSprite.getBottomMargin(),\n    0\n  );\n\n  //Right\n  this._borderSprites[0].width = panelSprite.getRightMargin();\n  this._borderSprites[0].height = Math.max(\n    this._height - panelSprite.getTopMargin() - panelSprite.getBottomMargin(),\n    0\n  );\n\n  //Top\n  this._borderSprites[2].height = panelSprite.getTopMargin();\n  this._borderSprites[2].width = Math.max(\n    this._width - panelSprite.getRightMargin() - panelSprite.getLeftMargin(),\n    0\n  );\n\n  //Left\n  this._borderSprites[4].width = panelSprite.getLeftMargin();\n  this._borderSprites[4].height = Math.max(\n    this._height - panelSprite.getTopMargin() - panelSprite.getBottomMargin(),\n    0\n  );\n\n  //Bottom\n  this._borderSprites[6].height = panelSprite.getBottomMargin();\n  this._borderSprites[6].width = Math.max(\n    this._width - panelSprite.getRightMargin() - panelSprite.getLeftMargin(),\n    0\n  );\n\n  this._wasRendered = true;\n  this._pixiObject.cacheAsBitmap = false;\n};\n\nRenderedPanelSpriteInstance.prototype.updateTexture = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  this._textureName = panelSprite.getTexture();\n  const texture = this._pixiResourcesLoader.getPIXITexture(\n    this._project,\n    this._textureName\n  );\n\n  if (!texture.baseTexture.valid) {\n    // Post pone texture update if texture is not loaded.\n    texture.once('update', () => this.updateTexture());\n    return;\n  }\n\n  console.log('Updating PanelSprite instance texture');\n  function makeInsideTexture(rect) {\n    if (rect.width < 0) rect.width = 0;\n    if (rect.height < 0) rect.height = 0;\n    if (rect.x < 0) rect.x = 0;\n    if (rect.y < 0) rect.y = 0;\n    if (rect.x > texture.width) rect.x = texture.width;\n    if (rect.y > texture.height) rect.y = texture.height;\n    if (rect.x + rect.width > texture.width)\n      rect.width = texture.width - rect.x;\n    if (rect.y + rect.height > texture.height)\n      rect.height = texture.height - rect.y;\n\n    return rect;\n  }\n\n  this._centerSprite.texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        panelSprite.getLeftMargin(),\n        panelSprite.getTopMargin(),\n        texture.width -\n          panelSprite.getLeftMargin() -\n          panelSprite.getRightMargin(),\n        texture.height -\n          panelSprite.getTopMargin() -\n          panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Right\n  this._borderSprites[0].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        texture.width - panelSprite.getRightMargin(),\n        panelSprite.getTopMargin(),\n        panelSprite.getRightMargin(),\n        texture.height -\n          panelSprite.getTopMargin() -\n          panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Top-right\n  this._borderSprites[1].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        texture.width - panelSprite.getRightMargin(),\n        0,\n        panelSprite.getRightMargin(),\n        panelSprite.getTopMargin()\n      )\n    )\n  );\n\n  //Top\n  this._borderSprites[2].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        panelSprite.getLeftMargin(),\n        0,\n        texture.width -\n          panelSprite.getLeftMargin() -\n          panelSprite.getRightMargin(),\n        panelSprite.getTopMargin()\n      )\n    )\n  );\n\n  //Top-Left\n  this._borderSprites[3].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        0,\n        0,\n        panelSprite.getLeftMargin(),\n        panelSprite.getTopMargin()\n      )\n    )\n  );\n\n  //Left\n  this._borderSprites[4].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        0,\n        panelSprite.getTopMargin(),\n        panelSprite.getLeftMargin(),\n        texture.height -\n          panelSprite.getTopMargin() -\n          panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Bottom-Left\n  this._borderSprites[5].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        0,\n        texture.height - panelSprite.getBottomMargin(),\n        panelSprite.getLeftMargin(),\n        panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Bottom\n  this._borderSprites[6].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        panelSprite.getLeftMargin(),\n        texture.height - panelSprite.getBottomMargin(),\n        texture.width -\n          panelSprite.getLeftMargin() -\n          panelSprite.getRightMargin(),\n        panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  //Bottom-Right\n  this._borderSprites[7].texture = new PIXI.Texture(\n    texture,\n    makeInsideTexture(\n      new PIXI.Rectangle(\n        texture.width - panelSprite.getRightMargin(),\n        texture.height - panelSprite.getBottomMargin(),\n        panelSprite.getRightMargin(),\n        panelSprite.getBottomMargin()\n      )\n    )\n  );\n\n  this._updateSpritesAndTexturesSize();\n  this._updateLocalPositions();\n  this.updatePosition();\n};\n\nRenderedPanelSpriteInstance.prototype.updateWidthHeight = function() {\n  this._pixiObject.pivot.x = this._width / 2;\n  this._pixiObject.pivot.y = this._height / 2;\n  this._updateSpritesAndTexturesSize();\n  this._updateLocalPositions();\n  this.updatePosition();\n};\n\nRenderedPanelSpriteInstance.prototype.getDefaultWidth = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  return panelSprite.getWidth();\n};\n\nRenderedPanelSpriteInstance.prototype.getDefaultHeight = function() {\n  const panelSprite = gd.asPanelSpriteObject(this._associatedObject);\n  return panelSprite.getHeight();\n};\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedPanelSpriteInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  const panelSprite = gd.asPanelSpriteObject(object);\n\n  return resourcesLoader.getResourceFullUrl(\n    project,\n    panelSprite.getTexture(),\n    {}\n  );\n};\n\nexport default RenderedPanelSpriteInstance;\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\nconst gd /* TODO: add flow in this file */ = global.gd;\n\n/**\n * Renderer for a Text object.\n *\n * @extends RenderedInstance\n * @class RenderedTextInstance\n * @constructor\n */\nfunction RenderedTextInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  const style = new PIXI.TextStyle({\n    fontFamily: 'Arial',\n    fontSize: 20,\n    align: 'left',\n    padding: 5,\n  });\n\n  //Setup the PIXI object:\n  this._pixiObject = new PIXI.Text('', style);\n  this._pixiObject.anchor.x = 0.5;\n  this._pixiObject.anchor.y = 0.5;\n  this._pixiContainer.addChild(this._pixiObject);\n  this._styleFontDirty = true;\n  this.update();\n}\nRenderedTextInstance.prototype = Object.create(RenderedInstance.prototype);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedTextInstance.getThumbnail = function(project, resourcesLoader, object) {\n  return 'CppPlatform/Extensions/texticon24.png';\n};\n\nRenderedTextInstance.prototype.update = function() {\n  const textObject = gd.asTextObject(this._associatedObject);\n  this._pixiObject.text = textObject.getString();\n\n  //Update style, only if needed to avoid destroying text rendering performances\n  if (\n    textObject.isItalic() !== this._isItalic ||\n    textObject.isBold() !== this._isBold ||\n    textObject.getCharacterSize() !== this._characterSize ||\n    this._instance.hasCustomSize() !== this._wrapping ||\n    (this._instance.getCustomWidth() !== this._wrappingWidth && this._wrapping)\n  ) {\n    this._isItalic = textObject.isItalic();\n    this._isBold = textObject.isBold();\n    this._characterSize = textObject.getCharacterSize();\n    this._wrapping = this._instance.hasCustomSize();\n    this._wrappingWidth = this._instance.getCustomWidth();\n    this._styleFontDirty = true;\n  }\n\n  if (this._fontName !== textObject.getFontName()) {\n    //Avoid calling loadFontFamily if the font didn't changed.\n    this._fontName = textObject.getFontName();\n    this._pixiResourcesLoader\n      .loadFontFamily(this._project, textObject.getFontName())\n      .then(fontFamily => {\n        // Once the font is loaded, we can use the given fontFamily.\n        this._fontFamily = fontFamily;\n        this._styleFontDirty = true;\n      })\n      .catch(err => {\n        // Ignore errors\n        console.warn(\n          'Unable to load font family for RenderedTextInstance',\n          err\n        );\n      });\n  }\n\n  if (this._styleFontDirty) {\n    this._pixiObject.style.fontFamily = this._fontFamily || 'Arial';\n    this._pixiObject.style.fontSize = Math.max(1, this._characterSize);\n    this._pixiObject.style.fontStyle = this._isItalic ? 'italic' : 'normal';\n    this._pixiObject.style.fontWeight = this._isBold ? 'bold' : 'normal';\n    this._pixiObject.style.wordWrap = this._wrapping;\n    this._pixiObject.style.wordWrapWidth =\n      this._wrappingWidth <= 1 ? 1 : this._wrappingWidth;\n    this._pixiObject.style.breakWords = true;\n\n    // Manually ask the PIXI object to re-render as we changed a style property\n    // see http://www.html5gamedevs.com/topic/16924-change-text-style-post-render/\n    this._pixiObject.dirty = true;\n    this._styleFontDirty = false;\n  }\n\n  if (\n    textObject.getColorR() !== this._colorR ||\n    textObject.getColorG() !== this._colorG ||\n    textObject.getColorB() !== this._colorB\n  ) {\n    this._colorR = textObject.getColorR();\n    this._colorG = textObject.getColorG();\n    this._colorB = textObject.getColorB();\n    this._pixiObject.style.fill =\n      'rgb(' + this._colorR + ',' + this._colorG + ',' + this._colorB + ')';\n\n    // Manually ask the PIXI object to re-render as we changed a style property\n    // see http://www.html5gamedevs.com/topic/16924-change-text-style-post-render/\n    this._pixiObject.dirty = true;\n  }\n\n  this._pixiObject.position.x =\n    this._instance.getX() + this._pixiObject.width / 2;\n  this._pixiObject.position.y =\n    this._instance.getY() + this._pixiObject.height / 2;\n  this._pixiObject.rotation = RenderedInstance.toRad(this._instance.getAngle());\n};\n\nRenderedTextInstance.prototype.getDefaultWidth = function() {\n  return this._pixiObject.width;\n};\n\nRenderedTextInstance.prototype.getDefaultHeight = function() {\n  return this._pixiObject.height;\n};\n\nexport default RenderedTextInstance;\n","import makeRenderer from './RenderedIconInstance';\nexport default makeRenderer('CppPlatform/Extensions/primitivedrawingicon.png');\n","import makeRenderer from './RenderedIconInstance';\nexport default makeRenderer('CppPlatform/Extensions/textentry.png');\n","import RenderedInstance from './RenderedInstance';\nimport * as PIXI from 'pixi.js-legacy';\nimport { rgbToHexNumber } from '../../Utils/ColorTransformer';\nconst gd /* TODO: add flow in this file */ = global.gd;\n\n/**\n * Renderer for an ParticleEmitter object.\n *\n * @extends RenderedInstance\n * @class RenderedParticleEmitterInstance\n * @constructor\n */\nfunction RenderedParticleEmitterInstance(\n  project,\n  layout,\n  instance,\n  associatedObject,\n  pixiContainer,\n  pixiResourcesLoader\n) {\n  RenderedInstance.call(\n    this,\n    project,\n    layout,\n    instance,\n    associatedObject,\n    pixiContainer,\n    pixiResourcesLoader\n  );\n\n  this._pixiObject = new PIXI.Graphics();\n  this._pixiContainer.addChild(this._pixiObject);\n  this.updateGraphics();\n}\nRenderedParticleEmitterInstance.prototype = Object.create(\n  RenderedInstance.prototype\n);\n\n/**\n * Return a URL for thumbnail of the specified object.\n */\nRenderedParticleEmitterInstance.getThumbnail = function(\n  project,\n  resourcesLoader,\n  object\n) {\n  return 'CppPlatform/Extensions/particleSystemicon.png';\n};\n\nRenderedParticleEmitterInstance.prototype.update = function() {\n  this._pixiObject.position.x = this._instance.getX();\n  this._pixiObject.position.y = this._instance.getY();\n  this.updateGraphics();\n};\n\n/**\n * Render the preview of the particle emitter according to the setup of the object\n */\nRenderedParticleEmitterInstance.prototype.updateGraphics = function() {\n  const particleEmitterObject = gd.asParticleEmitterObject(\n    this._associatedObject\n  );\n\n  this._pixiObject.clear();\n\n  const emitterAngle = (this._instance.getAngle() / 180) * 3.14159;\n  const sprayConeAngle = particleEmitterObject.getConeSprayAngle();\n  const line1Angle = emitterAngle - (sprayConeAngle / 2.0 / 180.0) * 3.14159;\n  const line2Angle = emitterAngle + (sprayConeAngle / 2.0 / 180.0) * 3.14159;\n  const length = 64;\n\n  this._pixiObject.beginFill(0, 0);\n  this._pixiObject.lineStyle(\n    3,\n    rgbToHexNumber(\n      particleEmitterObject.getParticleRed2(),\n      particleEmitterObject.getParticleGreen2(),\n      particleEmitterObject.getParticleBlue2()\n    ),\n    1\n  );\n  this._pixiObject.moveTo(0, 0);\n  this._pixiObject.lineTo(\n    Math.cos(line1Angle) * length,\n    Math.sin(line1Angle) * length\n  );\n  this._pixiObject.moveTo(0, 0);\n  this._pixiObject.lineTo(\n    Math.cos(line2Angle) * length,\n    Math.sin(line2Angle) * length\n  );\n  this._pixiObject.endFill();\n\n  this._pixiObject.lineStyle(0, 0x000000, 1);\n  this._pixiObject.beginFill(\n    rgbToHexNumber(\n      particleEmitterObject.getParticleRed1(),\n      particleEmitterObject.getParticleGreen1(),\n      particleEmitterObject.getParticleBlue1()\n    )\n  );\n  this._pixiObject.drawCircle(0, 0, 8);\n  this._pixiObject.endFill();\n};\n\nRenderedParticleEmitterInstance.prototype.getDefaultWidth = function() {\n  return 128;\n};\n\nRenderedParticleEmitterInstance.prototype.getDefaultHeight = function() {\n  return 128;\n};\n\nRenderedParticleEmitterInstance.prototype.getOriginX = function() {\n  return 64;\n};\n\nRenderedParticleEmitterInstance.prototype.getOriginY = function() {\n  return 64;\n};\n\nexport default RenderedParticleEmitterInstance;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line, Column } from '../../UI/Grid';\nimport {\n  type ParameterFieldProps,\n  getParameterValueOrDefault,\n} from './ParameterFieldCommons';\nimport { focusButton } from '../../UI/Button';\nimport Text from '../../UI/Text';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { MarkdownText } from '../../UI/MarkdownText';\n\nconst styles = {\n  button: {\n    margin: 5,\n  },\n  description: {\n    marginRight: 5,\n  },\n};\n\nexport default class YesNoField extends Component<ParameterFieldProps, void> {\n  _yesButton = React.createRef<RaisedButton>();\n\n  focus() {\n    focusButton(this._yesButton);\n  }\n\n  render() {\n    const { parameterMetadata, value } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : null;\n    const longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : null;\n    const effectiveValue = getParameterValueOrDefault(value, parameterMetadata);\n\n    return (\n      <Column noMargin>\n        <Line>\n          <Text style={styles.description} displayInlineAsSpan>\n            {description}\n          </Text>\n          <Column noMargin>\n            <RaisedButton\n              style={styles.button}\n              label={<Trans>Yes</Trans>}\n              primary={effectiveValue === 'yes'}\n              onClick={() => this.props.onChange('yes')}\n              ref={this._yesButton}\n            />\n          </Column>\n          <Column noMargin>\n            <RaisedButton\n              style={styles.button}\n              label={<Trans>No</Trans>}\n              primary={effectiveValue !== 'yes'}\n              onClick={() => this.props.onChange('no')}\n            />\n          </Column>\n        </Line>\n        {longDescription ? (\n          <FormHelperText variant=\"filled\" margin=\"dense\">\n            <MarkdownText source={longDescription} />\n          </FormHelperText>\n        ) : null}\n      </Column>\n    );\n  }\n}\n\nexport const renderInlineYesNo = ({\n  value,\n  parameterMetadata,\n}: ParameterInlineRendererProps) => {\n  if (getParameterValueOrDefault(value, parameterMetadata) === 'yes') {\n    return <Trans>yes</Trans>;\n  } else {\n    return <Trans>no</Trans>;\n  }\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line, Column } from '../../UI/Grid';\nimport {\n  type ParameterFieldProps,\n  getParameterValueOrDefault,\n} from './ParameterFieldCommons';\nimport { focusButton } from '../../UI/Button';\nimport Text from '../../UI/Text';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport { MarkdownText } from '../../UI/MarkdownText';\n\nconst styles = {\n  button: {\n    margin: 5,\n  },\n  description: {\n    marginRight: 5,\n  },\n};\n\nexport default class TrueFalseField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _trueButton = React.createRef<RaisedButton>();\n\n  focus() {\n    focusButton(this._trueButton);\n  }\n\n  render() {\n    const { parameterMetadata, value } = this.props;\n    const description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n    const longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : null;\n    const effectiveValue = getParameterValueOrDefault(value, parameterMetadata);\n\n    return (\n      <Column noMargin>\n        <Line>\n          <Text style={styles.description} displayInlineAsSpan>\n            {description}\n          </Text>\n          <Column noMargin>\n            <RaisedButton\n              style={styles.button}\n              label={<Trans>True</Trans>}\n              primary={effectiveValue === 'True'}\n              onClick={() => this.props.onChange('True')}\n              ref={this._trueButton}\n            />\n          </Column>\n          <Column noMargin>\n            <RaisedButton\n              style={styles.button}\n              label={<Trans>False</Trans>}\n              primary={effectiveValue !== 'True'}\n              onClick={() => this.props.onChange('False')}\n            />\n          </Column>\n        </Line>\n        {longDescription ? (\n          <FormHelperText variant=\"filled\" margin=\"dense\">\n            <MarkdownText source={longDescription} />\n          </FormHelperText>\n        ) : null}\n      </Column>\n    );\n  }\n}\n\nexport const renderInlineTrueFalse = ({\n  value,\n  parameterMetadata,\n}: ParameterInlineRendererProps) => {\n  if (getParameterValueOrDefault(value, parameterMetadata) === 'True') {\n    return <Trans>true</Trans>;\n  } else {\n    return <Trans>false</Trans>;\n  }\n};\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class ExpressionField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"number\"\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { enumerateAllExpressions } from '../../../InstructionOrExpression/EnumerateExpressions';\nimport InstructionOrExpressionSelector from './index';\nimport {\n  createTree,\n  type ExpressionTreeNode,\n} from '../../../InstructionOrExpression/CreateTree';\nimport {\n  type EnumeratedExpressionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\n\ntype Props = {|\n  expressionType: string,\n  focusOnMount?: boolean,\n  selectedType: string,\n  onChoose: (type: string, EnumeratedExpressionMetadata) => void,\n  scope: EventsScope,\n|};\n\nconst style = {\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n};\n\nexport default class ExpressionSelector extends Component<Props, {||}> {\n  instructionsInfo: Array<EnumeratedExpressionMetadata> = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    enumerateAllExpressions(this.props.expressionType),\n    this.props.scope\n  );\n  instructionsInfoTree: ExpressionTreeNode = createTree(this.instructionsInfo);\n\n  render() {\n    const { expressionType, scope, ...otherProps } = this.props;\n    return (\n      <InstructionOrExpressionSelector\n        style={style}\n        instructionsInfo={this.instructionsInfo}\n        instructionsInfoTree={this.instructionsInfoTree}\n        iconSize={16}\n        helpPagePath=\"/all-features/expressions-reference\"\n        {...otherProps}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\nimport React, { Component } from 'react';\nimport FlatButton from '../../../UI/FlatButton';\nimport ExpressionParametersEditor from './ExpressionParametersEditor';\nimport Dialog from '../../../UI/Dialog';\nimport Text from '../../../UI/Text';\nimport { Column } from '../../../UI/Grid';\n\nexport type ParameterValues = Array<string>;\n\nconst styles = {\n  minHeightContainer: {\n    // Use a minimum height that is large enough so that ExpressionSelector in\n    // GenericExpressionField can fit and display entirely.\n    minHeight: 300,\n    flex: 1,\n    flexDirection: 'column',\n  },\n};\n\ntype Props = {\n  project?: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  expressionMetadata: gdExpressionMetadata,\n  onDone: ParameterValues => void,\n  onRequestClose: () => void,\n  parameterRenderingService?: {\n    components: any,\n    getParameterComponent: (type: string) => any,\n  },\n};\n\ntype State = {\n  parameterValues: ParameterValues,\n};\n\nexport default class ExpressionParametersEditorDialog extends Component<\n  Props,\n  State\n> {\n  state = {\n    parameterValues: Array(\n      this.props.expressionMetadata.getParametersCount()\n    ).fill(''),\n  };\n\n  render() {\n    const {\n      project,\n      scope,\n      globalObjectsContainer,\n      objectsContainer,\n      expressionMetadata,\n      parameterRenderingService,\n    } = this.props;\n\n    return (\n      <Dialog\n        title={<Trans>Enter the expression parameters</Trans>}\n        cannotBeDismissed={true}\n        open\n        actions={\n          <FlatButton\n            key=\"apply\"\n            label={<Trans>Apply</Trans>}\n            primary\n            onClick={() => this.props.onDone(this.state.parameterValues)}\n          />\n        }\n        noMargin\n        onRequestClose={this.props.onRequestClose}\n      >\n        <Column>\n          <div style={styles.minHeightContainer}>\n            <Text>{expressionMetadata.getDescription()}</Text>\n            <ExpressionParametersEditor\n              project={project}\n              scope={scope}\n              globalObjectsContainer={globalObjectsContainer}\n              objectsContainer={objectsContainer}\n              expressionMetadata={expressionMetadata}\n              parameterValues={this.state.parameterValues}\n              onChangeParameter={(editedIndex, value) => {\n                this.setState({\n                  parameterValues: this.state.parameterValues.map(\n                    (oldValue, index) =>\n                      index === editedIndex ? value : oldValue\n                  ),\n                });\n              }}\n              parameterRenderingService={parameterRenderingService}\n            />\n          </div>\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\n\nexport type Highlight = {|\n  begin: number,\n  end: number,\n  type?: 'error',\n  message: string,\n|};\n\ntype Props = {|\n  value: string,\n  style: Object,\n  highlights: Array<Highlight>,\n|};\n\nconst defaultStyle = {\n  width: '100%',\n  position: 'absolute',\n  whiteSpace: 'pre-wrap',\n  wordWrap: 'break-word',\n  color: 'transparent',\n};\n\nconst highlightedText = {\n  backgroundColor: 'rgba(244, 67, 54, 0.15)',\n  borderSizing: 'border-box',\n  borderBottom: '3px solid rgba(244, 67, 54, 0.7)',\n};\n\nexport default ({ value, style, highlights }: Props) => {\n  const sortedHighlights = highlights\n    .slice()\n    .sort((highlight1, highlight2) => highlight1.begin - highlight2.begin);\n\n  const elements = [];\n  let lastPos = 0;\n\n  sortedHighlights.forEach((highlight, i) => {\n    const startPos = Math.max(highlight.begin, lastPos);\n    if (startPos !== lastPos) {\n      elements.push(\n        <span key={`defaultText-${i}`}>\n          {value.substring(lastPos, startPos)}\n        </span>\n      );\n    }\n\n    if (lastPos < highlight.end) {\n      elements.push(\n        <span key={`highlightedText-${i}`} style={highlightedText}>\n          {value.substring(startPos, highlight.end)}\n        </span>\n      );\n      lastPos = highlight.end;\n    }\n  });\n  if (lastPos < value.length) {\n    elements.push(\n      <span key={`defaultText-end`}>{value.substring(lastPos)}</span>\n    );\n  }\n\n  return <div style={{ ...defaultStyle, ...style }}>{elements}</div>;\n};\n","// @flow\nimport { mapVector } from '../Utils/MapFor';\nimport {\n  enumerateObjectsAndGroups,\n  filterObjectsList,\n  filterGroupsList,\n} from '../ObjectsList/EnumerateObjects';\nimport { enumerateVariables } from '../EventsSheet/ParameterFields/EnumerateVariables';\nimport flatten from 'lodash/flatten';\nimport { type EventsScope } from '../InstructionOrExpression/EventsScope.flow';\nimport {\n  enumerateFreeExpressions,\n  filterExpressions,\n  enumerateObjectExpressions,\n  enumerateBehaviorExpressions,\n} from '../InstructionOrExpression/EnumerateExpressions';\nimport {\n  type EnumeratedExpressionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata';\nimport { getVisibleParameterTypes } from '../EventsSheet/ParameterFields/GenericExpressionField/FormatExpressionCall';\nimport { getParameterChoices } from '../EventsSheet/ParameterFields/ParameterMetadataTools';\nimport getObjectByName from '../Utils/GetObjectByName';\nimport { getAllPointNames } from '../ObjectEditor/Editors/SpriteEditor/Utils/SpriteObjectHelper';\nimport { mapFor } from '../Utils/MapFor';\n\nconst gd: libGDevelop = global.gd;\n\ntype BaseExpressionAutocompletion = {|\n  completion: string,\n  replacementStartPosition?: number,\n  replacementEndPosition?: number,\n  addParenthesis?: boolean,\n  addDot?: boolean,\n  addParameterSeparator?: boolean,\n  addNamespaceSeparator?: boolean,\n  hasVisibleParameters?: boolean,\n  isExact?: boolean,\n|};\n\nexport type ExpressionAutocompletion =\n  | {|\n      ...BaseExpressionAutocompletion,\n      kind: 'Expression',\n      enumeratedExpressionMetadata: EnumeratedExpressionMetadata,\n    |}\n  | {|\n      ...BaseExpressionAutocompletion,\n      kind: 'Text',\n    |}\n  | {|\n      ...BaseExpressionAutocompletion,\n      kind: 'Variable',\n    |}\n  | {|\n      ...BaseExpressionAutocompletion,\n      object?: gdObject,\n      kind: 'Object',\n    |}\n  | {|\n      ...BaseExpressionAutocompletion,\n      kind: 'Behavior',\n    |};\n\ntype ExpressionAutocompletionContext = {|\n  gd: libGDevelop,\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  scope: EventsScope,\n|};\n\nconst filterStringList = (\n  list: Array<string>,\n  searchText: string\n): Array<string> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter((text: string) => {\n    return text.toLowerCase().indexOf(lowercaseSearchText) !== -1;\n  });\n};\n\nconst getAutocompletionsForExpressions = (\n  expressionMetadatas: Array<EnumeratedExpressionMetadata>,\n  prefix: string,\n  replacementStartPosition: number,\n  replacementEndPosition: number,\n  isExact: boolean\n): Array<ExpressionAutocompletion> => {\n  return expressionMetadatas\n    .filter(\n      enumeratedExpressionMetadata =>\n        !isExact || enumeratedExpressionMetadata.type === prefix\n    )\n    .map(enumeratedExpressionMetadata => {\n      // All enumeratedExpressionMetadata should have a name.\n      if (\n        !enumeratedExpressionMetadata.name ||\n        !enumeratedExpressionMetadata.parameters\n      )\n        return null;\n\n      return {\n        kind: 'Expression',\n        completion: enumeratedExpressionMetadata.name,\n        replacementStartPosition,\n        replacementEndPosition,\n        enumeratedExpressionMetadata: enumeratedExpressionMetadata,\n        addParenthesis: true,\n        hasVisibleParameters:\n          getVisibleParameterTypes(enumeratedExpressionMetadata).length !== 0,\n        isExact,\n      };\n    })\n    .filter(Boolean);\n};\n\nconst getAutocompletionsForFreeExpressions = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const isExact: boolean = completionDescription.isExact();\n\n  const freeExpressions = enumerateFreeExpressions(type);\n\n  const filteredFreeExpressions = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    filterExpressions(freeExpressions, prefix),\n    expressionAutocompletionContext.scope\n  );\n  return getAutocompletionsForExpressions(\n    filteredFreeExpressions,\n    prefix,\n    completionDescription.getReplacementStartPosition(),\n    completionDescription.getReplacementEndPosition(),\n    isExact\n  );\n};\n\nconst getAutocompletionsForObjectExpressions = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const objectName: string = completionDescription.getObjectName();\n  const isExact: boolean = completionDescription.isExact();\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n\n  const objectType: string = gd.getTypeOfObject(\n    globalObjectsContainer,\n    objectsContainer,\n    objectName,\n    /* searchInGroups= */ true\n  );\n  const objectExpressions = enumerateObjectExpressions(type, objectType);\n  const filteredObjectExpressions = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    filterExpressions(objectExpressions, prefix),\n    expressionAutocompletionContext.scope\n  );\n\n  return getAutocompletionsForExpressions(\n    filteredObjectExpressions,\n    prefix,\n    completionDescription.getReplacementStartPosition(),\n    completionDescription.getReplacementEndPosition(),\n    isExact\n  );\n};\n\nconst getAutocompletionsForBehaviorExpressions = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const behaviorName: string = completionDescription.getBehaviorName();\n  const isExact: boolean = completionDescription.isExact();\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n\n  // TODO: could be made more precise with the object name\n  const behaviorType = gd.getTypeOfBehavior(\n    globalObjectsContainer,\n    objectsContainer,\n    behaviorName,\n    /* searchInGroups= */ true\n  );\n\n  const behaviorExpressions = enumerateBehaviorExpressions(type, behaviorType);\n\n  const filteredBehaviorExpressions = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    filterExpressions(behaviorExpressions, prefix),\n    expressionAutocompletionContext.scope\n  );\n\n  return getAutocompletionsForExpressions(\n    filteredBehaviorExpressions,\n    prefix,\n    completionDescription.getReplacementStartPosition(),\n    completionDescription.getReplacementEndPosition(),\n    isExact\n  );\n};\n\nconst getAutocompletionsForObject = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n\n  const { allObjectsList, allGroupsList } = enumerateObjectsAndGroups(\n    globalObjectsContainer,\n    objectsContainer\n  );\n\n  // We hide exact matches to prevent suggesting options already fully typed.\n  const filteredObjectsList = filterObjectsList(allObjectsList, {\n    searchText: prefix,\n    selectedTags: [],\n    hideExactMatches: true,\n  });\n  const filteredGroupsList = filterGroupsList(allGroupsList, {\n    searchText: prefix,\n    hideExactMatches: true,\n  });\n\n  // If we expect an object, don't add a dot. Otherwise (number, string...),\n  // add a dot to prepare for an object function.\n  const addDot = !gd.ParameterMetadata.isObject(type);\n\n  return [\n    ...filteredObjectsList.map(({ object }) => ({\n      kind: 'Object',\n      completion: object.getName(),\n      replacementStartPosition: completionDescription.getReplacementStartPosition(),\n      replacementEndPosition: completionDescription.getReplacementEndPosition(),\n      object,\n      addDot,\n    })),\n    ...filteredGroupsList.map(({ group }) => ({\n      kind: 'Object',\n      completion: group.getName(),\n      replacementStartPosition: completionDescription.getReplacementStartPosition(),\n      replacementEndPosition: completionDescription.getReplacementEndPosition(),\n      addDot,\n    })),\n  ];\n};\n\nconst getAutocompletionsForText = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const { project, scope } = expressionAutocompletionContext;\n\n  let autocompletionTexts: string[] = [];\n  if (type === 'layer') {\n    const layout = scope.layout;\n    if (layout) {\n      for (let index = 0; index < layout.getLayersCount(); index++) {\n        autocompletionTexts.push(`\"${layout.getLayerAt(index).getName()}\"`);\n      }\n    }\n  } else if (type === 'sceneName') {\n    if (project) {\n      for (let index = 0; index < project.getLayoutsCount(); index++) {\n        autocompletionTexts.push(`\"${project.getLayoutAt(index).getName()}\"`);\n      }\n    }\n  } else if (type === 'stringWithSelector') {\n    autocompletionTexts = getParameterChoices(\n      completionDescription.getParameterMetadata()\n    ).map(autocompletion => autocompletion.completion);\n  } else if (type === 'objectPointName') {\n    const objectName: string = completionDescription.getObjectName();\n    if (!objectName) {\n      return [];\n    }\n\n    const object = getObjectByName(project, scope.layout, objectName);\n    if (!object) {\n      return [];\n    }\n\n    if (object.getType() === 'Sprite') {\n      const spriteObject = gd.asSpriteObject(object);\n\n      autocompletionTexts = getAllPointNames(spriteObject)\n        .map(spriteObjectName =>\n          spriteObjectName.length > 0 ? `\"${spriteObjectName}\"` : null\n        )\n        .filter(Boolean);\n    } else {\n      return [];\n    }\n  } else if (type === 'objectAnimationName') {\n    const objectName: string = completionDescription.getObjectName();\n    if (!objectName) {\n      return [];\n    }\n\n    const object = getObjectByName(project, scope.layout, objectName);\n    if (!object) {\n      return [];\n    }\n\n    if (object.getType() === 'Sprite') {\n      const spriteObject = gd.asSpriteObject(object);\n\n      autocompletionTexts = mapFor(\n        0,\n        spriteObject.getAnimationsCount(),\n        index => {\n          const animationName = spriteObject.getAnimation(index).getName();\n          return animationName.length > 0 ? `\"${animationName}\"` : null;\n        }\n      ).filter(Boolean);\n    } else {\n      return [];\n    }\n  }\n  // To add missing string types see Core\\GDCore\\Extensions\\Metadata\\ParameterMetadata.h\n\n  const filteredTextList = filterStringList(autocompletionTexts, prefix).sort();\n\n  const isLastParameter = completionDescription.isLastParameter();\n  return filteredTextList.map(text => ({\n    kind: 'Text',\n    completion: text,\n    replacementStartPosition: completionDescription.getReplacementStartPosition(),\n    replacementEndPosition: completionDescription.getReplacementEndPosition(),\n    addParameterSeparator: !isLastParameter,\n  }));\n};\n\nconst getAutocompletionsForVariable = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const type: string = completionDescription.getType();\n  const objectName: string = completionDescription.getObjectName();\n  const { project, scope } = expressionAutocompletionContext;\n  const layout = scope.layout;\n\n  let variablesContainer: gdVariablesContainer;\n  if (type === 'globalvar') {\n    if (!project) {\n      // No variable completion\n      return [];\n    }\n    variablesContainer = project.getVariables();\n  } else if (type === 'scenevar') {\n    if (!layout) {\n      // No variable completion\n      return [];\n    }\n    variablesContainer = layout.getVariables();\n  } else if (type === 'objectvar') {\n    const object = getObjectByName(project, layout, objectName);\n    if (!object) {\n      // No variable completion for unknown objet\n      return [];\n    }\n    variablesContainer = object.getVariables();\n  }\n\n  const definedVariableNames = enumerateVariables(variablesContainer)\n    .map(({ name, isValidName }) =>\n      isValidName\n        ? name\n        : // Hide invalid variable names - they would not\n          // be parsed correctly anyway.\n          null\n    )\n    .filter(Boolean);\n\n  const filteredVariablesList = filterStringList(definedVariableNames, prefix);\n\n  return filteredVariablesList.map(variableName => ({\n    kind: 'Variable',\n    completion: variableName,\n    replacementStartPosition: completionDescription.getReplacementStartPosition(),\n    replacementEndPosition: completionDescription.getReplacementEndPosition(),\n  }));\n};\n\nconst getAutocompletionsForBehavior = function(\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  completionDescription: gdExpressionCompletionDescription\n): Array<ExpressionAutocompletion> {\n  const prefix: string = completionDescription.getPrefix();\n  const isExact: boolean = completionDescription.isExact();\n  const objectName: string = completionDescription.getObjectName();\n\n  const {\n    gd,\n    globalObjectsContainer,\n    objectsContainer,\n  } = expressionAutocompletionContext;\n  return gd\n    .getBehaviorsOfObject(\n      globalObjectsContainer,\n      objectsContainer,\n      objectName,\n      true\n    )\n    .toJSArray()\n    .filter(behaviorName => behaviorName.indexOf(prefix) !== -1)\n    .map(behaviorName => ({\n      kind: 'Behavior',\n      completion: behaviorName,\n      replacementStartPosition: completionDescription.getReplacementStartPosition(),\n      replacementEndPosition: completionDescription.getReplacementEndPosition(),\n      addNamespaceSeparator: true,\n      isExact,\n    }));\n};\n\nexport const getAutocompletionsFromDescriptions = (\n  expressionAutocompletionContext: ExpressionAutocompletionContext,\n  expressionCompletionDescriptions: gdVectorExpressionCompletionDescription\n): Array<ExpressionAutocompletion> => {\n  const { gd } = expressionAutocompletionContext;\n\n  return flatten(\n    mapVector(expressionCompletionDescriptions, completionDescription => {\n      const completionKind = completionDescription.getCompletionKind();\n\n      if (completionKind === gd.ExpressionCompletionDescription.Expression) {\n        const objectName: string = completionDescription.getObjectName();\n        const behaviorName: string = completionDescription.getBehaviorName();\n\n        if (behaviorName) {\n          return getAutocompletionsForBehaviorExpressions(\n            expressionAutocompletionContext,\n            completionDescription\n          );\n        } else if (objectName) {\n          return getAutocompletionsForObjectExpressions(\n            expressionAutocompletionContext,\n            completionDescription\n          );\n        } else {\n          return getAutocompletionsForFreeExpressions(\n            expressionAutocompletionContext,\n            completionDescription\n          );\n        }\n      } else if (completionKind === gd.ExpressionCompletionDescription.Object) {\n        return getAutocompletionsForObject(\n          expressionAutocompletionContext,\n          completionDescription\n        );\n      } else if (\n        completionKind === gd.ExpressionCompletionDescription.Behavior\n      ) {\n        return getAutocompletionsForBehavior(\n          expressionAutocompletionContext,\n          completionDescription\n        );\n      } else if (completionKind === gd.ExpressionCompletionDescription.Text) {\n        return getAutocompletionsForText(\n          expressionAutocompletionContext,\n          completionDescription\n        );\n      } else if (\n        completionKind === gd.ExpressionCompletionDescription.Variable\n      ) {\n        return getAutocompletionsForVariable(\n          expressionAutocompletionContext,\n          completionDescription\n        );\n      }\n\n      return [];\n    })\n  );\n};\n\ntype InsertedAutocompletion = {|\n  completion: string,\n  replacementStartPosition?: number,\n  replacementEndPosition?: number,\n  addParenthesis?: ?boolean,\n  hasVisibleParameters?: ?boolean,\n  addDot?: ?boolean,\n  addParameterSeparator?: ?boolean,\n  addNamespaceSeparator?: ?boolean,\n|};\n\ntype ExpressionAndCaretLocation = {|\n  expression: string,\n  caretLocation: number,\n|};\n\nexport const insertAutocompletionInExpression = (\n  { expression, caretLocation }: ExpressionAndCaretLocation,\n  insertedAutocompletion: InsertedAutocompletion\n): ExpressionAndCaretLocation => {\n  const formatCompletion = (nextCharacter: ?string) => {\n    const suffix = insertedAutocompletion.addDot\n      ? '.'\n      : insertedAutocompletion.addParameterSeparator\n      ? ', '\n      : insertedAutocompletion.addNamespaceSeparator\n      ? '::'\n      : insertedAutocompletion.addParenthesis\n      ? '()'\n      : '';\n\n    const addSuffix =\n      !nextCharacter || !suffix || nextCharacter[0] !== suffix[0];\n\n    return insertedAutocompletion.completion + (addSuffix ? suffix : '');\n  };\n\n  if (caretLocation > expression.length) {\n    caretLocation = expression.length;\n  }\n\n  if (caretLocation === 0 || !expression) {\n    const newExpression = formatCompletion(undefined) + expression;\n    return {\n      caretLocation: newExpression.length,\n      expression: newExpression,\n    };\n  }\n\n  const wordStartPosition: number = insertedAutocompletion.replacementStartPosition\n    ? insertedAutocompletion.replacementStartPosition\n    : 0;\n  const wordEndPosition: number = insertedAutocompletion.replacementEndPosition\n    ? insertedAutocompletion.replacementEndPosition\n    : expression.length;\n\n  // The next character, if any, will be useful to format the completion\n  // (to avoid repeating an existing character).\n  const maybeNextCharacter: ?string = expression[wordEndPosition];\n\n  const newExpressionStart = expression.substring(0, wordStartPosition);\n  const insertedWord = formatCompletion(maybeNextCharacter);\n  const newExpressionEnd = expression.substring(wordEndPosition);\n  const newExpression = newExpressionStart + insertedWord + newExpressionEnd;\n  let newCaretLocation = newExpressionStart.length + insertedWord.length;\n  if (\n    insertedAutocompletion.addParenthesis &&\n    insertedAutocompletion.hasVisibleParameters\n  ) {\n    newCaretLocation = newCaretLocation - 1;\n  }\n\n  return {\n    caretLocation: newCaretLocation,\n    expression: newExpression,\n  };\n};\n","// @flow\nimport { type ExpressionAutocompletion } from '../../../ExpressionAutocompletion';\nimport {\n  shouldCloseOrCancel,\n  shouldValidate,\n  shouldFocusNextField,\n} from '../../../UI/KeyboardShortcuts/InteractionKeys';\n\nexport type AutocompletionsState = {|\n  autocompletions: Array<ExpressionAutocompletion>,\n  selectedCompletionIndex: number,\n|};\n\nexport const getAutocompletionsInitialState = (): AutocompletionsState => {\n  return {\n    autocompletions: [],\n    selectedCompletionIndex: 0,\n  };\n};\n\nconst MAX_VISIBLE_COUNT = 25;\n\nexport const getRemainingCount = (state: AutocompletionsState): number => {\n  return Math.max(0, state.autocompletions.length - MAX_VISIBLE_COUNT);\n};\n\nexport const getVisibleAutocompletions = (\n  state: AutocompletionsState\n): Array<ExpressionAutocompletion> => {\n  const remainingCount = getRemainingCount(state);\n  return remainingCount === 0\n    ? state.autocompletions\n    : state.autocompletions.slice(0, MAX_VISIBLE_COUNT);\n};\n\nexport const setNewAutocompletions = (\n  state: AutocompletionsState,\n  autocompletions: Array<ExpressionAutocompletion>\n): AutocompletionsState => {\n  const completionsChanged =\n    state.autocompletions.length !== autocompletions.length;\n\n  // Reset the selected completion only if completions changed.\n  const selectedCompletionIndex = completionsChanged\n    ? 0\n    : state.selectedCompletionIndex;\n\n  return {\n    autocompletions,\n    selectedCompletionIndex,\n  };\n};\n\nexport const handleAutocompletionsKeyDown = (\n  state: AutocompletionsState,\n  {\n    event,\n    onUpdateAutocompletions,\n    onInsertAutocompletion,\n  }: {|\n    event: SyntheticKeyboardEvent<>,\n    onUpdateAutocompletions: () => void,\n    onInsertAutocompletion: ExpressionAutocompletion => void,\n  |}\n): AutocompletionsState => {\n  if (\n    event.key === 'ArrowDown' ||\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight'\n  ) {\n    onUpdateAutocompletions();\n  }\n\n  if (!state.autocompletions.length) return state;\n\n  const visibleAutocompletionsLength = Math.min(\n    MAX_VISIBLE_COUNT,\n    state.autocompletions.length\n  );\n\n  if (event.key === 'ArrowDown') {\n    event.preventDefault();\n\n    return {\n      ...state,\n      selectedCompletionIndex:\n        (state.selectedCompletionIndex + 1) % visibleAutocompletionsLength,\n    };\n  } else if (event.key === 'ArrowUp') {\n    event.preventDefault();\n\n    return {\n      ...state,\n      selectedCompletionIndex:\n        (visibleAutocompletionsLength + state.selectedCompletionIndex - 1) %\n        visibleAutocompletionsLength,\n    };\n  } else if (shouldCloseOrCancel(event)) {\n    // Stop propagation to avoid closing the modal the\n    // field is contained in.\n    event.preventDefault();\n    event.stopPropagation();\n\n    return getAutocompletionsInitialState();\n  } else if (shouldValidate(event) || shouldFocusNextField(event)) {\n    const autocompletion = state.autocompletions[state.selectedCompletionIndex];\n    if (autocompletion) {\n      // Don't prevent the default behavior when an exact completion is shown,\n      // the user should be able to freely move to the next line.\n      if (autocompletion.isExact) return state;\n      onInsertAutocompletion(autocompletion);\n    }\n\n    // Avoid entering a new line or tabbing to the next field.\n    event.preventDefault();\n  }\n\n  return state;\n};\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport Popper from '@material-ui/core/Popper';\nimport Paper from '@material-ui/core/Paper';\nimport muiZIndex from '@material-ui/core/styles/zIndex';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport { type ExpressionAutocompletion } from '../../../ExpressionAutocompletion';\nimport Text from '../../../UI/Text';\nimport ScrollView, { type ScrollViewInterface } from '../../../UI/ScrollView';\nimport { getVisibleParameterTypes } from './FormatExpressionCall';\nimport { type ParameterRenderingServiceType } from '../ParameterFieldCommons';\nimport { type EnumeratedInstructionOrExpressionMetadata } from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata';\nimport { Column, Line, Spacer } from '../../../UI/Grid';\nimport ObjectsRenderingService from '../../../ObjectsRendering/ObjectsRenderingService';\n\nconst defaultTextStyle = {\n  // Break words if they are too long to fit on a single line.\n  overflow: 'hidden',\n  overflowWrap: 'break-word',\n};\n\nconst AutocompletionIcon = React.memo(({ src }) => (\n  <img\n    alt=\"\"\n    src={src}\n    style={{\n      maxWidth: 16,\n      maxHeight: 16,\n    }}\n  />\n));\n\nconst formatParameterTypesString = (\n  parameterRenderingService: ParameterRenderingServiceType,\n  i18n: I18nType,\n  enumeratedExpressionMetadata: EnumeratedInstructionOrExpressionMetadata\n) => {\n  return getVisibleParameterTypes(enumeratedExpressionMetadata)\n    .map(type => {\n      const userFriendlyName = parameterRenderingService.getUserFriendlyTypeName(\n        type\n      );\n\n      return userFriendlyName ? i18n._(userFriendlyName) : type;\n    })\n    .join(', ');\n};\n\nconst DisplayedTextAutocompletion = React.forwardRef(\n  (\n    {\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n    }: {|\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n    |},\n    ref\n  ) => (\n    <ButtonBase\n      style={styles.button}\n      onPointerDown={() => {\n        // Trigger the onClick on the mouse/touch down\n        // to avoid the blur event of the text field to discard the autocompletions.\n        onClick();\n      }}\n      ref={ref}\n    >\n      <Text style={defaultTextStyle} noMargin align=\"left\">\n        {isSelected ? (\n          <b>{expressionAutocompletion.completion}</b>\n        ) : (\n          expressionAutocompletion.completion\n        )}\n      </Text>\n    </ButtonBase>\n  )\n);\n\nconst DisplayedExpressionAutocompletion = React.forwardRef(\n  (\n    {\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n      i18n,\n      parameterRenderingService,\n    }: {|\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n      i18n: I18nType,\n      parameterRenderingService: ParameterRenderingServiceType,\n    |},\n    ref\n  ) => {\n    if (!expressionAutocompletion.enumeratedExpressionMetadata) return null;\n\n    const title = isSelected ? (\n      <b>{expressionAutocompletion.completion}</b>\n    ) : (\n      expressionAutocompletion.completion\n    );\n\n    return (\n      <ButtonBase\n        style={styles.button}\n        onPointerDown={() => {\n          // Trigger the onClick on the mouse/touch down\n          // to avoid the blur event of the text field to discard the autocompletions.\n          onClick();\n        }}\n        ref={ref}\n      >\n        <AutocompletionIcon\n          src={\n            expressionAutocompletion.enumeratedExpressionMetadata.iconFilename\n          }\n        />\n        <Spacer />\n        <Text style={defaultTextStyle} noMargin align=\"left\">\n          {title}(\n          <i>\n            {formatParameterTypesString(\n              parameterRenderingService,\n              i18n,\n              expressionAutocompletion.enumeratedExpressionMetadata\n            )}\n          </i>\n          )\n        </Text>\n      </ButtonBase>\n    );\n  }\n);\n\nconst DisplayedObjectAutocompletion = React.forwardRef(\n  (\n    {\n      project,\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n    }: {|\n      project: ?gdProject,\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n    |},\n    ref\n  ) => {\n    const thumbnail =\n      project && expressionAutocompletion.object\n        ? ObjectsRenderingService.getThumbnail(\n            project,\n            expressionAutocompletion.object\n          )\n        : 'res/types/object.png';\n\n    const title = isSelected ? (\n      <b>{expressionAutocompletion.completion}</b>\n    ) : (\n      expressionAutocompletion.completion\n    );\n\n    return (\n      <ButtonBase\n        style={styles.button}\n        onPointerDown={() => {\n          // Trigger the onClick on the mouse/touch down\n          // to avoid the blur event of the text field to discard the autocompletions.\n          onClick();\n        }}\n        ref={ref}\n      >\n        <AutocompletionIcon src={thumbnail} />\n        <Spacer />\n        <Text style={defaultTextStyle} noMargin align=\"left\">\n          {title}\n        </Text>\n      </ButtonBase>\n    );\n  }\n);\n\nconst DisplayedBehaviorAutocompletion = React.forwardRef(\n  (\n    {\n      expressionAutocompletion,\n      isSelected,\n      onClick,\n    }: {|\n      expressionAutocompletion: ExpressionAutocompletion,\n      isSelected: boolean,\n      onClick: () => void,\n    |},\n    ref\n  ) => {\n    const title = isSelected ? (\n      <b>{expressionAutocompletion.completion}</b>\n    ) : (\n      expressionAutocompletion.completion\n    );\n    return (\n      <ButtonBase\n        style={styles.button}\n        onPointerDown={() => {\n          // Trigger the onClick on the mouse/touch down\n          // to avoid the blur event of the text field to discard the autocompletions.\n          onClick();\n        }}\n        ref={ref}\n      >\n        <AutocompletionIcon src={'res/types/behavior.png'} />\n        <Spacer />\n        <Text style={defaultTextStyle} noMargin align=\"left\">\n          {title}\n        </Text>\n      </ButtonBase>\n    );\n  }\n);\n\ntype Props = {|\n  project: ?gdProject,\n  expressionAutocompletions: Array<ExpressionAutocompletion>,\n  remainingCount: number,\n  selectedCompletionIndex: number,\n  anchorEl: Element,\n  onChoose: (chosenExpressionAutocompletion: ExpressionAutocompletion) => void,\n  parameterRenderingService: ParameterRenderingServiceType,\n|};\n\nconst styles = {\n  container: {\n    width: 370,\n    maxHeight: 150,\n    display: 'flex',\n    overflowX: 'hidden',\n  },\n  button: {\n    width: '100%',\n    paddingLeft: 8,\n    paddingRight: 8,\n    justifyContent: 'flex-start',\n  },\n  tooManyTextContainer: {\n    width: '100%',\n  },\n  popperStyle: {\n    // Ensure the popper is above everything (modal, dialog, snackbar, tooltips, etc).\n    // There will be only one ExpressionAutocompletionsDisplay opened at a time, so it's fair to put the\n    // highest z index. If this is breaking, check the z-index of material-ui.\n    zIndex: muiZIndex.tooltip + 100,\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'row',\n  },\n};\n\nexport default function ExpressionAutocompletionsDisplayer({\n  project,\n  expressionAutocompletions,\n  remainingCount,\n  selectedCompletionIndex,\n  anchorEl,\n  onChoose,\n  parameterRenderingService,\n}: Props) {\n  const scrollView = React.useRef((null: ?ScrollViewInterface));\n  const selectedAutocompletionElement = React.useRef(\n    (null: ?React$Component<any, any>)\n  );\n  React.useEffect(\n    () => {\n      if (scrollView.current && selectedAutocompletionElement.current) {\n        scrollView.current.scrollTo(selectedAutocompletionElement.current);\n      }\n    },\n    [scrollView, selectedAutocompletionElement, selectedCompletionIndex]\n  );\n\n  if (expressionAutocompletions.length === 0) return null;\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Popper\n          style={styles.popperStyle}\n          open\n          anchorEl={anchorEl}\n          placement=\"bottom-start\"\n          disablePortal={\n            // We can use a portal to display this component, because even if it\n            // used inside a modal, which has a focus trap, it's entirely\n            // controlled by the parent component.\n            false\n          }\n        >\n          <Paper variant=\"outlined\" square style={styles.container}>\n            <ScrollView autoHideScrollbar ref={scrollView}>\n              {expressionAutocompletions.map(\n                (expressionAutocompletion, index) => {\n                  const isSelected = selectedCompletionIndex === index;\n                  const ref = isSelected\n                    ? selectedAutocompletionElement\n                    : undefined;\n\n                  return expressionAutocompletion.kind === 'Text' ||\n                    expressionAutocompletion.kind === 'Variable' ? (\n                    <DisplayedTextAutocompletion\n                      key={index}\n                      expressionAutocompletion={expressionAutocompletion}\n                      isSelected={isSelected}\n                      onClick={() => onChoose(expressionAutocompletion)}\n                      ref={ref}\n                    />\n                  ) : expressionAutocompletion.kind === 'Expression' ? (\n                    !expressionAutocompletion.isExact && (\n                      <DisplayedExpressionAutocompletion\n                        key={index}\n                        expressionAutocompletion={expressionAutocompletion}\n                        onClick={() => onChoose(expressionAutocompletion)}\n                        isSelected={isSelected}\n                        i18n={i18n}\n                        parameterRenderingService={parameterRenderingService}\n                        ref={ref}\n                      />\n                    )\n                  ) : expressionAutocompletion.kind === 'Object' ? (\n                    <DisplayedObjectAutocompletion\n                      key={index}\n                      project={project}\n                      expressionAutocompletion={expressionAutocompletion}\n                      onClick={() => onChoose(expressionAutocompletion)}\n                      isSelected={isSelected}\n                      ref={ref}\n                    />\n                  ) : expressionAutocompletion.kind === 'Behavior' ? (\n                    <DisplayedBehaviorAutocompletion\n                      key={index}\n                      expressionAutocompletion={expressionAutocompletion}\n                      onClick={() => onChoose(expressionAutocompletion)}\n                      isSelected={isSelected}\n                      ref={ref}\n                    />\n                  ) : null;\n                }\n              )}\n              {remainingCount > 0 && (\n                <Column justifyContent=\"flex-start\">\n                  <Text>And {remainingCount} others...</Text>\n                </Column>\n              )}\n            </ScrollView>\n          </Paper>\n          {selectedCompletionIndex !== null &&\n            expressionAutocompletions[selectedCompletionIndex].kind ===\n              'Expression' &&\n            !expressionAutocompletions[selectedCompletionIndex].isExact && (\n              <Paper variant=\"outlined\" square style={styles.container}>\n                <ScrollView autoHideScrollbar>\n                  <Column>\n                    <Line noMargin expand alignItems=\"center\">\n                      <Text style={defaultTextStyle} size=\"body2\">\n                        {expressionAutocompletions[\n                          selectedCompletionIndex\n                        ].enumeratedExpressionMetadata.metadata.getDescription()}\n                      </Text>\n                    </Line>\n                  </Column>\n                </ScrollView>\n              </Paper>\n            )}\n        </Popper>\n      )}\n    </I18n>\n  );\n}\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class StringField extends Component<ParameterFieldProps, void> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { getParameterChoices } from './ParameterMetadataTools';\n\nexport default class StringWithSelectorField extends Component<\n  ParameterFieldProps,\n  {||}\n> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          getParameterChoices(this.props.parameterMetadata).filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\nimport SemiControlledAutoComplete, {\n  type SemiControlledAutoCompleteInterface,\n} from '../../UI/SemiControlledAutoComplete';\nconst gd: libGDevelop = global.gd;\n\ntype State = {|\n  errorText: ?string,\n|};\n\nexport default class BehaviorField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  state = { errorText: null };\n  _description: ?string;\n  _longDescription: ?string;\n  _behaviorTypeAllowed: ?string;\n  _behaviorNames: Array<string> = [];\n  _field: ?SemiControlledAutoCompleteInterface;\n\n  constructor(props: ParameterFieldProps) {\n    super(props);\n\n    const { parameterMetadata } = this.props;\n    this._description = parameterMetadata\n      ? parameterMetadata.getDescription()\n      : undefined;\n\n    this._longDescription = parameterMetadata\n      ? parameterMetadata.getLongDescription()\n      : undefined;\n\n    this._behaviorTypeAllowed = parameterMetadata\n      ? parameterMetadata.getExtraInfo()\n      : undefined;\n  }\n\n  _updateBehaviorsList() {\n    const {\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = this.props;\n\n    const objectName = getLastObjectParameterValue({\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    });\n    if (!objectName) return;\n\n    this._behaviorNames = gd\n      .getBehaviorsOfObject(\n        this.props.globalObjectsContainer,\n        this.props.objectsContainer,\n        objectName,\n        true\n      )\n      .toJSArray()\n      .filter(behaviorName => {\n        return (\n          !this._behaviorTypeAllowed ||\n          gd.getTypeOfBehavior(\n            this.props.globalObjectsContainer,\n            this.props.objectsContainer,\n            behaviorName,\n            false\n          ) === this._behaviorTypeAllowed\n        );\n      });\n  }\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  _getError = (value?: string) => {\n    if (!value && !this.props.value) return null;\n\n    const isValidChoice =\n      this._behaviorNames.filter(choice => this.props.value === choice)\n        .length !== 0;\n\n    if (!isValidChoice) return 'This behavior is not attached to the object';\n\n    return null;\n  };\n\n  _doValidation = (value?: string) => {\n    this.setState({ errorText: this._getError(value) });\n  };\n\n  _forceChooseBehavior = () => {\n    // This is a bit hacky:\n    // force the behavior selection if there is only one selectable behavior\n    if (this._behaviorNames.length === 1) {\n      if (this.props.value !== this._behaviorNames[0]) {\n        this.props.onChange(this._behaviorNames[0]);\n      }\n    }\n  };\n\n  componentDidUpdate() {\n    this._forceChooseBehavior();\n  }\n\n  componentDidMount() {\n    this._forceChooseBehavior();\n  }\n\n  render() {\n    this._updateBehaviorsList();\n\n    const noBehaviorErrorText =\n      this._behaviorTypeAllowed !== '' ? (\n        <Trans>\n          The behavior is not attached to this object. Please select another\n          object or add this behavior.\n        </Trans>\n      ) : (\n        <Trans>\n          This object has no behaviors: please add this behavior to the object\n          first.\n        </Trans>\n      );\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        floatingLabelText={this._description}\n        helperMarkdownText={this._longDescription}\n        fullWidth\n        errorText={\n          !this._behaviorNames.length\n            ? noBehaviorErrorText\n            : this.state.errorText\n        }\n        value={this.props.value}\n        onChange={this.props.onChange}\n        onRequestClose={this.props.onRequestClose}\n        onApply={this.props.onApply}\n        onBlur={event => {\n          this._doValidation(event.currentTarget.value);\n        }}\n        dataSource={this._behaviorNames.map(behaviorName => ({\n          text: behaviorName,\n          value: behaviorName,\n        }))}\n        openOnFocus={!this.props.isInline}\n        disabled={this._behaviorNames.length <= 1}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport VariableField, { renderVariableWithIcon } from './VariableField';\nimport VariablesEditorDialog from '../../VariablesList/VariablesEditorDialog';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport EventsRootVariablesFinder from '../../Utils/EventsRootVariablesFinder';\n\ntype State = {|\n  editorOpen: boolean,\n|};\n\nexport default class GlobalVariableField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  _field: ?VariableField;\n  state = {\n    editorOpen: false,\n  };\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { project, scope } = this.props;\n\n    const onComputeAllVariableNames = () =>\n      project\n        ? EventsRootVariablesFinder.findAllGlobalVariables(\n            project.getCurrentPlatform(),\n            project\n          )\n        : [];\n\n    return (\n      <React.Fragment>\n        <VariableField\n          variablesContainer={project ? project.getVariables() : null}\n          onComputeAllVariableNames={onComputeAllVariableNames}\n          parameterMetadata={this.props.parameterMetadata}\n          value={this.props.value}\n          onChange={this.props.onChange}\n          isInline={this.props.isInline}\n          onRequestClose={this.props.onRequestClose}\n          onApply={this.props.onApply}\n          ref={field => (this._field = field)}\n          onOpenDialog={() => this.setState({ editorOpen: true })}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          scope={scope}\n        />\n        {this.state.editorOpen && project && (\n          <VariablesEditorDialog\n            title={<Trans>Global Variables</Trans>}\n            open={this.state.editorOpen}\n            variablesContainer={project.getVariables()}\n            onCancel={() => this.setState({ editorOpen: false })}\n            onApply={() => {\n              this.setState({ editorOpen: false });\n              if (this._field) this._field.updateAutocompletions();\n            }}\n            emptyExplanationMessage={\n              <Trans>\n                Global variables are variables that are shared amongst all the\n                scenes of the game.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called UnlockedLevelsCount\n                representing the number of levels unlocked by the player.\n              </Trans>\n            }\n            helpPagePath={'/all-features/variables/global-variables'}\n            onComputeAllVariableNames={onComputeAllVariableNames}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderInlineGlobalVariable = (\n  props: ParameterInlineRendererProps\n) => {\n  return renderVariableWithIcon(\n    props,\n    'res/types/globalvar.png',\n    'global variable'\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport VariableField, { renderVariableWithIcon } from './VariableField';\nimport VariablesEditorDialog from '../../VariablesList/VariablesEditorDialog';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\nimport EventsRootVariablesFinder from '../../Utils/EventsRootVariablesFinder';\n\ntype State = {|\n  editorOpen: boolean,\n|};\n\nexport default class ObjectVariableField extends React.Component<\n  ParameterFieldProps,\n  State\n> {\n  _field: ?VariableField;\n  state = {\n    editorOpen: false,\n  };\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      project,\n      scope,\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = this.props;\n\n    const objectName = getLastObjectParameterValue({\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    });\n\n    const { layout } = scope;\n    let object = null;\n    let variablesContainer = null;\n    if (objectName) {\n      if (layout && layout.hasObjectNamed(objectName)) {\n        object = layout.getObject(objectName);\n        variablesContainer = object.getVariables();\n      } else if (project && project.hasObjectNamed(objectName)) {\n        object = project.getObject(objectName);\n        variablesContainer = object.getVariables();\n      }\n    }\n\n    const onComputeAllVariableNames = () =>\n      project && layout && object\n        ? EventsRootVariablesFinder.findAllObjectVariables(\n            project.getCurrentPlatform(),\n            project,\n            layout,\n            object\n          )\n        : [];\n\n    return (\n      <React.Fragment>\n        <VariableField\n          variablesContainer={variablesContainer}\n          onComputeAllVariableNames={onComputeAllVariableNames}\n          parameterMetadata={this.props.parameterMetadata}\n          value={this.props.value}\n          onChange={this.props.onChange}\n          isInline={this.props.isInline}\n          onRequestClose={this.props.onRequestClose}\n          onApply={this.props.onApply}\n          ref={field => (this._field = field)}\n          onOpenDialog={() => this.setState({ editorOpen: true })}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          scope={scope}\n        />\n        {this.state.editorOpen && variablesContainer && (\n          <VariablesEditorDialog\n            title={<Trans>Object Variables</Trans>}\n            open={this.state.editorOpen}\n            variablesContainer={variablesContainer}\n            emptyExplanationMessage={\n              <Trans>\n                When you add variables to an object, any instance of the object\n                put on the scene or created during the game will have these\n                variables attached to it.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called Life representing\n                the health of the object.\n              </Trans>\n            }\n            helpPagePath={'/all-features/variables/object-variables'}\n            onComputeAllVariableNames={onComputeAllVariableNames}\n            onCancel={() => this.setState({ editorOpen: false })}\n            onApply={() => {\n              this.setState({ editorOpen: false });\n              if (this._field) this._field.updateAutocompletions();\n            }}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport const renderInlineObjectVariable = (\n  props: ParameterInlineRendererProps\n) => {\n  return renderVariableWithIcon(\n    props,\n    'res/types/objectvar.png',\n    'object variable'\n  );\n};\n","// @flow\nimport React, { Component } from 'react';\nimport { mapFor } from '../../Utils/MapFor';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\n\nexport default class LayerField extends Component<ParameterFieldProps, {||}> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const { layout } = this.props.scope;\n    const layerNames: Array<ExpressionAutocompletion> = layout\n      ? mapFor(0, layout.getLayersCount(), i => {\n          const layer = layout.getLayerAt(i);\n          return { kind: 'Text', completion: `\"${layer.getName()}\"` };\n        })\n      : [];\n\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          layerNames.filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class AudioResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for AudioResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"audio\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={<Trans>Choose the audio file to use</Trans>}\n        onRequestClose={this.props.onRequestClose}\n        onApply={this.props.onApply}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class VideoResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for VideoResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"video\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={<Trans>Choose the video file to use</Trans>}\n        onRequestClose={this.props.onRequestClose}\n        onApply={this.props.onApply}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class JsonResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for JsonResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"json\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={<Trans>Choose the json file to use</Trans>}\n        onRequestClose={this.props.onRequestClose}\n        onApply={this.props.onApply}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\n\nexport default class BitmapFontResourceField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?ResourceSelector;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    if (\n      !this.props.resourceSources ||\n      !this.props.onChooseResource ||\n      !this.props.resourceExternalEditors ||\n      !this.props.project\n    ) {\n      console.error(\n        'Missing project, resourceSources, onChooseResource or resourceExternalEditors for BitmapFontResourceField'\n      );\n      return null;\n    }\n\n    return (\n      <ResourceSelector\n        margin={this.props.isInline ? 'none' : 'dense'}\n        project={this.props.project}\n        resourceSources={this.props.resourceSources}\n        onChooseResource={this.props.onChooseResource}\n        resourceExternalEditors={this.props.resourceExternalEditors}\n        resourcesLoader={ResourcesLoader}\n        resourceKind=\"bitmapFont\"\n        fullWidth\n        initialResourceName={this.props.value}\n        onChange={this.props.onChange}\n        floatingLabelText={\n          <Trans>Choose the bitmap font file (.fnt, .xml) to use</Trans>\n        }\n        onRequestClose={this.props.onRequestClose}\n        onApply={this.props.onApply}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport GenericExpressionField from './GenericExpressionField';\nimport ColorPicker from '../../UI/ColorField/ColorPicker';\nimport { rgbStringAndAlphaToRGBColor } from '../../Utils/ColorTransformer';\n\nexport default class ParameterColorField extends Component<ParameterFieldProps> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        ref={field => (this._field = field)}\n        renderExtraButton={({ style }) => (\n          <ColorPicker\n            style={style}\n            disableAlpha\n            color={rgbStringAndAlphaToRGBColor(this.props.value)}\n            onChangeComplete={color => {\n              this.props.onChange(\n                '\"' + color.rgb.r + ';' + color.rgb.g + ';' + color.rgb.b + '\"'\n              );\n            }}\n          />\n        )}\n        onExtractAdditionalErrors={(\n          expression: string,\n          expressioNode: gdExpressionNode\n        ) => {\n          if (expression.trim().startsWith('\"\\\\\"')) {\n            return 'A color is a text in the format R;G;B, like 100;200;180 (numbers going from 0 to 255). You need to surround the text with quotes, but the text itself should not contain a quote inside.';\n          }\n\n          return null;\n        }}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type ParameterInlineRendererProps } from './ParameterInlineRenderer.flow';\nimport React, { Component } from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line, Column } from '../../UI/Grid';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport GenericExpressionField from './GenericExpressionField';\nimport BackgroundText from '../../UI/BackgroundText';\nimport { focusButton } from '../../UI/Button';\nimport Text from '../../UI/Text';\n\ntype State = {|\n  showDeprecatedNumericValue: boolean,\n|};\n\nexport default class ForceMultiplierField extends Component<\n  ParameterFieldProps,\n  State\n> {\n  _instantButton = React.createRef<RaisedButton>();\n  state = {\n    showDeprecatedNumericValue:\n      this.props.value !== '' &&\n      this.props.value !== '1' &&\n      this.props.value !== '0',\n  };\n\n  focus() {\n    focusButton(this._instantButton);\n  }\n\n  render() {\n    const { showDeprecatedNumericValue } = this.state;\n    return (\n      <Column expand noMargin>\n        <Line expand alignItems=\"center\">\n          <Column>\n            <RaisedButton\n              label={<Trans>Instant</Trans>}\n              primary={this.props.value === '' || this.props.value === '0'}\n              onClick={() => this.props.onChange('0')}\n              ref={this._instantButton}\n            />\n          </Column>\n          <Column>\n            <Text>\n              <Trans>\n                The force will only push the object during the time of one\n                frame. Typically used in an event with no conditions or with\n                conditions that stay valid for a certain amount of time.\n              </Trans>\n            </Text>\n          </Column>\n        </Line>\n        <Line expand alignItems=\"center\">\n          <Column>\n            <RaisedButton\n              label={<Trans>Permanent</Trans>}\n              primary={this.props.value === '1'}\n              onClick={() => this.props.onChange('1')}\n            />\n          </Column>\n          <Column>\n            <Text>\n              <Trans>\n                The force will push the object forever, unless you use the\n                action \"Stop the object\". Typically used in an event with\n                conditions that are only true once, or with a \"Trigger Once\"\n                condition.\n              </Trans>\n            </Text>\n          </Column>\n        </Line>\n        {showDeprecatedNumericValue && (\n          <React.Fragment>\n            <BackgroundText>\n              <Trans>or</Trans>\n            </BackgroundText>\n            <Line expand>\n              <Column expand>\n                <GenericExpressionField\n                  expressionType=\"number\"\n                  {...this.props}\n                />\n              </Column>\n            </Line>\n            <BackgroundText>\n              <Trans>\n                The usage of a number or expression is deprecated. Please now\n                use only \"Permanent\" or \"Instant\" for configuring forces.\n              </Trans>\n            </BackgroundText>\n          </React.Fragment>\n        )}\n      </Column>\n    );\n  }\n}\n\nexport const renderInlineForceMultiplier = ({\n  value,\n}: ParameterInlineRendererProps) => {\n  if (value === '1') return <Trans>{`a permanent`}</Trans>;\n  else if (value === '0' || value === '') return <Trans>{`an instant`}</Trans>;\n\n  return 'a (multiplier: ' + value + ')';\n};\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { enumerateLayouts } from '../../ProjectManager/EnumerateProjectItems';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\n\nexport default class SceneNameField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const layoutNames: Array<ExpressionAutocompletion> = this.props.project\n      ? enumerateLayouts(this.props.project).map(layout => ({\n          kind: 'Text',\n          completion: `\"${layout.getName()}\"`,\n        }))\n      : [];\n\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          layoutNames.filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport {\n  type ParameterFieldProps,\n  type ParameterFieldInterface,\n} from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nimport {\n  getPreviousParameterValue,\n  tryExtractStringLiteralContent,\n} from './ParameterMetadataTools';\nimport { enumerateEffectNames } from '../../EffectsList/EnumerateEffects';\n\nexport default React.forwardRef<ParameterFieldProps, ParameterFieldInterface>(\n  function LayerEffectNameField(props: ParameterFieldProps, ref) {\n    const field = React.useRef<?GenericExpressionField>(null);\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (field.current) field.current.focus();\n      },\n    }));\n\n    const getEffectNames = (): Array<ExpressionAutocompletion> => {\n      const { scope, instruction, expression, parameterIndex } = props;\n\n      const { layout } = scope;\n      if (!layout) return [];\n\n      const layerName = tryExtractStringLiteralContent(\n        getPreviousParameterValue({\n          instruction,\n          expression,\n          parameterIndex,\n        })\n      );\n      if (layerName == null || !layout.hasLayerNamed(layerName)) return [];\n      const layer = layout.getLayer(layerName);\n\n      return enumerateEffectNames(layer.getEffects())\n        .sort()\n        .map(effectName => ({\n          kind: 'Text',\n          completion: `\"${effectName}\"`,\n        }));\n    };\n\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          getEffectNames().filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field}\n        {...props}\n      />\n    );\n  }\n);\n","// @flow\nimport * as React from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport {\n  type ParameterFieldProps,\n  type ParameterFieldInterface,\n} from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nimport {\n  getPreviousParameterValue,\n  tryExtractStringLiteralContent,\n} from './ParameterMetadataTools';\n\nconst gd: libGDevelop = global.gd;\n\nexport default React.forwardRef<ParameterFieldProps, ParameterFieldInterface>(\n  function LayerEffectParameterNameField(props: ParameterFieldProps, ref) {\n    const field = React.useRef<?GenericExpressionField>(null);\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (field.current) field.current.focus();\n      },\n    }));\n\n    const getEffectParameterNames = (): Array<ExpressionAutocompletion> => {\n      const { project, scope, instruction, expression, parameterIndex } = props;\n\n      const { layout } = scope;\n      if (!layout || !project) return [];\n\n      const layerName = tryExtractStringLiteralContent(\n        getPreviousParameterValue({\n          instruction,\n          expression,\n          parameterIndex: parameterIndex ? parameterIndex - 1 : null,\n        })\n      );\n      if (layerName == null || !layout.hasLayerNamed(layerName)) return [];\n      const layer = layout.getLayer(layerName);\n\n      const effectName = tryExtractStringLiteralContent(\n        getPreviousParameterValue({\n          instruction,\n          expression,\n          parameterIndex,\n        })\n      );\n      if (!effectName || !layer.getEffects().hasEffectNamed(effectName)) {\n        return [];\n      }\n      const effect = layer.getEffects().getEffect(effectName);\n\n      const effectType = effect.getEffectType();\n      const effectMetadata = gd.MetadataProvider.getEffectMetadata(\n        project.getCurrentPlatform(),\n        effectType\n      );\n      const properties = effectMetadata.getProperties();\n      const parameterNames = properties.keys().toJSArray();\n\n      return parameterNames.sort().map(parameterName => ({\n        kind: 'Text',\n        completion: `\"${parameterName}\"`,\n      }));\n    };\n\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          getEffectParameterNames().filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field}\n        {...props}\n      />\n    );\n  }\n);\n","// @flow\nimport * as React from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport {\n  type ParameterFieldProps,\n  type ParameterFieldInterface,\n} from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\nimport { enumerateEffectNames } from '../../EffectsList/EnumerateEffects';\n\nexport default React.forwardRef<ParameterFieldProps, ParameterFieldInterface>(\n  function ObjectEffectNameField(props: ParameterFieldProps, ref) {\n    const field = React.useRef<?GenericExpressionField>(null);\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (field.current) field.current.focus();\n      },\n    }));\n\n    const {\n      project,\n      scope,\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = props;\n\n    const getEffectNames = (): Array<ExpressionAutocompletion> => {\n      const objectName = getLastObjectParameterValue({\n        instructionMetadata,\n        instruction,\n        expressionMetadata,\n        expression,\n        parameterIndex,\n      });\n      if (!objectName || !project) {\n        return [];\n      }\n\n      const object = getObjectByName(project, scope.layout, objectName);\n      if (!object) {\n        return [];\n      }\n\n      return enumerateEffectNames(object.getEffects())\n        .sort()\n        .map(effectName => ({\n          kind: 'Text',\n          completion: `\"${effectName}\"`,\n        }));\n    };\n\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          getEffectNames().filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field}\n        {...props}\n      />\n    );\n  }\n);\n","// @flow\nimport * as React from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport {\n  type ParameterFieldProps,\n  type ParameterFieldInterface,\n} from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport {\n  getLastObjectParameterValue,\n  getPreviousParameterValue,\n  tryExtractStringLiteralContent,\n} from './ParameterMetadataTools';\n\nconst gd: libGDevelop = global.gd;\n\nexport default React.forwardRef<ParameterFieldProps, ParameterFieldInterface>(\n  function ObjectEffectParameterNameField(props: ParameterFieldProps, ref) {\n    const field = React.useRef<?GenericExpressionField>(null);\n    React.useImperativeHandle(ref, () => ({\n      focus: () => {\n        if (field.current) field.current.focus();\n      },\n    }));\n\n    const getEffectParameterNames = (): Array<ExpressionAutocompletion> => {\n      const {\n        project,\n        scope,\n        instructionMetadata,\n        instruction,\n        expressionMetadata,\n        expression,\n        parameterIndex,\n      } = props;\n\n      const objectName = getLastObjectParameterValue({\n        instructionMetadata,\n        instruction,\n        expressionMetadata,\n        expression,\n        parameterIndex,\n      });\n      const effectName = tryExtractStringLiteralContent(\n        getPreviousParameterValue({\n          instruction,\n          expression,\n          parameterIndex,\n        })\n      );\n      if (!objectName || !project || !effectName) {\n        return [];\n      }\n\n      const object = getObjectByName(project, scope.layout, objectName);\n      if (!object || !object.getEffects().hasEffectNamed(effectName)) {\n        return [];\n      }\n      const effect = object.getEffects().getEffect(effectName);\n\n      const effectType = effect.getEffectType();\n      const effectMetadata = gd.MetadataProvider.getEffectMetadata(\n        project.getCurrentPlatform(),\n        effectType\n      );\n      const properties = effectMetadata.getProperties();\n      const parameterNames = properties.keys().toJSArray();\n\n      return parameterNames.sort().map(parameterName => ({\n        kind: 'Text',\n        completion: `\"${parameterName}\"`,\n      }));\n    };\n\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          getEffectParameterNames().filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field}\n        {...props}\n      />\n    );\n  }\n);\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\nimport { getAllPointNames } from '../../ObjectEditor/Editors/SpriteEditor/Utils/SpriteObjectHelper';\n\nconst gd: libGDevelop = global.gd;\n\nexport default class ObjectPointNameField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  getPointNames(): Array<ExpressionAutocompletion> {\n    const {\n      project,\n      scope,\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = this.props;\n\n    const objectName = getLastObjectParameterValue({\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    });\n    if (!objectName || !project) {\n      return [];\n    }\n\n    const object = getObjectByName(project, scope.layout, objectName);\n    if (!object) {\n      return [];\n    }\n\n    if (object.getType() === 'Sprite') {\n      const spriteObject = gd.asSpriteObject(object);\n\n      return getAllPointNames(spriteObject)\n        .map(spriteObjectName =>\n          spriteObjectName.length > 0 ? spriteObjectName : null\n        )\n        .filter(Boolean)\n        .sort()\n        .map(pointName => ({\n          kind: 'Text',\n          completion: `\"${pointName}\"`,\n        }));\n    }\n\n    return [];\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          this.getPointNames().filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport React, { Component } from 'react';\nimport GenericExpressionField from './GenericExpressionField';\nimport { type ParameterFieldProps } from './ParameterFieldCommons';\nimport { type ExpressionAutocompletion } from '../../ExpressionAutocompletion';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport { getLastObjectParameterValue } from './ParameterMetadataTools';\nimport { mapFor } from '../../Utils/MapFor';\n\nconst gd: libGDevelop = global.gd;\n\nexport default class ObjectAnimationNameField extends Component<\n  ParameterFieldProps,\n  void\n> {\n  _field: ?GenericExpressionField;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  getAnimationNames(): Array<ExpressionAutocompletion> {\n    const {\n      project,\n      scope,\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    } = this.props;\n\n    const objectName = getLastObjectParameterValue({\n      instructionMetadata,\n      instruction,\n      expressionMetadata,\n      expression,\n      parameterIndex,\n    });\n    if (!objectName || !project) {\n      return [];\n    }\n\n    const object = getObjectByName(project, scope.layout, objectName);\n    if (!object) {\n      return [];\n    }\n\n    if (object.getType() === 'Sprite') {\n      const spriteObject = gd.asSpriteObject(object);\n\n      return mapFor(0, spriteObject.getAnimationsCount(), index => {\n        const animationName = spriteObject.getAnimation(index).getName();\n        return animationName.length > 0 ? animationName : null;\n      })\n        .filter(Boolean)\n        .sort()\n        .map(animationName => ({\n          kind: 'Text',\n          completion: `\"${animationName}\"`,\n        }));\n    }\n\n    return [];\n  }\n\n  render() {\n    return (\n      <GenericExpressionField\n        expressionType=\"string\"\n        onGetAdditionalAutocompletions={expression =>\n          this.getAnimationNames().filter(\n            ({ completion }) => completion.indexOf(expression) === 0\n          )\n        }\n        ref={field => (this._field = field)}\n        {...this.props}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { instructionInvalidParameter } from './ClassNames';\n\ntype Props = {| children: React.Node, isEmpty?: boolean |};\n\n/**\n * Displayed when a parameter is invalid\n */\nexport default ({ children, isEmpty }: Props) =>\n  isEmpty ? (\n    <span className={instructionInvalidParameter}>&lt; {children} &gt;</span>\n  ) : (\n    <span className={instructionInvalidParameter}>{children}</span>\n  );\n","// @flow\nimport * as React from 'react';\nimport { instructionMissingParameter } from './ClassNames';\n\n/**\n * Displayed when a parameter is missing (i.e: empty and not optional)\n */\nexport default () => <span className={instructionMissingParameter} />;\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TextField from '../../../UI/TextField';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  disabledText,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nimport {\n  shouldActivate,\n  shouldCloseOrCancel,\n  shouldValidate,\n} from '../../../UI/KeyboardShortcuts/InteractionKeys';\nimport { Trans } from '@lingui/macro';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    height: '2.5em',\n    display: 'flex',\n    alignItems: 'center',\n    padding: 5,\n    overflow: 'hidden',\n  },\n  title: {\n    fontSize: '1.3em',\n    width: '100%',\n  },\n};\n\nexport default class GroupEvent extends React.Component<EventRendererProps, *> {\n  state = {\n    editing: false,\n  };\n  _textField: ?TextField = null;\n\n  edit = () => {\n    this.setState(\n      {\n        editing: true,\n      },\n      () => {\n        if (this._textField) this._textField.focus();\n      }\n    );\n  };\n\n  endEditing = () => {\n    this.setState({\n      editing: false,\n    });\n  };\n\n  render() {\n    var groupEvent = gd.asGroupEvent(this.props.event);\n\n    const r = groupEvent.getBackgroundColorR(),\n      g = groupEvent.getBackgroundColorG(),\n      b = groupEvent.getBackgroundColorB();\n\n    const textColor = (r + g + b) / 3 > 200 ? 'black' : 'white';\n\n    return (\n      <div\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n        style={{\n          ...styles.container,\n          backgroundColor: `rgb(${r}, ${g}, ${b})`,\n        }}\n        onClick={this.edit}\n        onKeyPress={event => {\n          if (shouldActivate(event)) {\n            this.edit();\n          }\n        }}\n        tabIndex={0}\n      >\n        {this.state.editing ? (\n          <TextField\n            ref={textField => (this._textField = textField)}\n            value={groupEvent.getName()}\n            hintText={t`<Enter group name>`}\n            onBlur={this.endEditing}\n            onChange={(e, text) => {\n              groupEvent.setName(text);\n              this.forceUpdate();\n            }}\n            style={styles.title}\n            inputStyle={{\n              color: textColor,\n              WebkitTextFillColor: textColor,\n            }}\n            underlineFocusStyle={{\n              borderColor: textColor,\n            }}\n            fullWidth\n            id=\"group-title\"\n            onKeyUp={event => {\n              if (shouldCloseOrCancel(event)) {\n                this.endEditing();\n              }\n            }}\n            onKeyPress={event => {\n              if (shouldValidate(event)) {\n                this.endEditing();\n              }\n            }}\n          />\n        ) : (\n          <span\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            style={{ ...styles.title, color: textColor }}\n          >\n            {groupEvent.getName() ? (\n              groupEvent.getName()\n            ) : (\n              <Trans>{`<Enter group name>`}</Trans>\n            )}\n          </span>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport TextField from '../../../UI/TextField';\nimport { rgbToHex } from '../../../Utils/ColorTransformer';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  disabledText,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nimport {\n  shouldActivate,\n  shouldCloseOrCancel,\n} from '../../../UI/KeyboardShortcuts/InteractionKeys';\nconst gd: libGDevelop = global.gd;\n\nconst commentTextStyle = {\n  width: '100%',\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexWrap: 'wrap',\n    padding: 5,\n    overflow: 'hidden',\n    minHeight: '2.1em',\n  },\n  commentTextField: commentTextStyle,\n  commentSpan: {\n    ...commentTextStyle,\n    boxSizing: 'border-box',\n    alignItems: 'center',\n    height: '100%',\n    whiteSpace: 'pre-wrap',\n    lineHeight: 1.5,\n    border: 1,\n  },\n};\n\ntype State = {|\n  editing: boolean,\n|};\n\nexport default class CommentEvent extends React.Component<\n  EventRendererProps,\n  State\n> {\n  state = {\n    editing: false,\n  };\n\n  _selectable: ?HTMLSpanElement;\n  _textField: ?TextField;\n\n  edit = () => {\n    this.setState(\n      {\n        editing: true,\n      },\n      () => {\n        if (this._textField) this._textField.focus();\n      }\n    );\n  };\n\n  onEvent = (e: any, text: string) => {\n    const commentEvent = gd.asCommentEvent(this.props.event);\n    commentEvent.setComment(text);\n\n    this.props.onUpdate();\n    this.forceUpdate();\n  };\n\n  endEditing = () => {\n    if (!this._textField) return;\n\n    this.setState(\n      {\n        editing: false,\n      },\n      () => this.props.onUpdate()\n    );\n  };\n\n  _getCommentHTML = () => {\n    const commentEvent = gd.asCommentEvent(this.props.event);\n    return commentEvent\n      .getComment()\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\\n/g, '<br>');\n  };\n\n  render() {\n    const commentEvent = gd.asCommentEvent(this.props.event);\n\n    const backgroundColor = rgbToHex(\n      commentEvent.getBackgroundColorRed(),\n      commentEvent.getBackgroundColorGreen(),\n      commentEvent.getBackgroundColorBlue()\n    );\n\n    const textColor = rgbToHex(\n      commentEvent.getTextColorRed(),\n      commentEvent.getTextColorGreen(),\n      commentEvent.getTextColorBlue()\n    );\n\n    return (\n      <div\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n        style={{\n          ...styles.container,\n          backgroundColor: `#${backgroundColor}`,\n        }}\n        onClick={this.edit}\n        onKeyPress={event => {\n          if (shouldActivate(event)) {\n            this.edit();\n          }\n        }}\n        tabIndex={0}\n      >\n        {this.state.editing ? (\n          <TextField\n            multiline\n            margin=\"none\"\n            ref={textField => (this._textField = textField)}\n            value={commentEvent.getComment()}\n            hintText={t`<Enter comment>`}\n            onBlur={this.endEditing}\n            onChange={this.onEvent}\n            style={styles.commentTextField}\n            inputStyle={{\n              color: `#${textColor}`,\n              padding: 0,\n              lineHeight: 1.5,\n              fontSize: '1em',\n            }}\n            underlineFocusStyle={{\n              borderColor: `#${textColor}`,\n            }}\n            fullWidth\n            id=\"comment-title\"\n            onKeyUp={event => {\n              if (shouldCloseOrCancel(event)) {\n                this.endEditing();\n              }\n            }}\n          />\n        ) : (\n          <span\n            ref={selectable => (this._selectable = selectable)}\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            style={{\n              ...styles.commentSpan,\n              color: `#${textColor}`,\n            }}\n            dangerouslySetInnerHTML={{\n              __html: this._getCommentHTML(),\n            }}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList.js';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  executableEventContainer,\n  disabledText,\n} from '../ClassNames';\nimport InlinePopover from '../../InlinePopover';\nimport ObjectField from '../../ParameterFields/ObjectField';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nimport { shouldActivate } from '../../../UI/KeyboardShortcuts/InteractionKeys.js';\nimport { Trans } from '@lingui/macro';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class ForEachEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  _objectField: ?ObjectField = null;\n  state = {\n    editing: false,\n    editingPreviousValue: null,\n    anchorEl: null,\n  };\n\n  edit = (domEvent: any) => {\n    const forEachEvent = gd.asForEachEvent(this.props.event);\n    const objectName = forEachEvent.getObjectToPick();\n\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editing: true,\n            editingPreviousValue: objectName,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._objectField) this._objectField.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  cancelEditing = () => {\n    this.endEditing();\n\n    const forEachEvent = gd.asForEachEvent(this.props.event);\n    const { editingPreviousValue } = this.state;\n    if (editingPreviousValue != null) {\n      forEachEvent.setObjectToPick(editingPreviousValue);\n      this.forceUpdate();\n    }\n  };\n\n  endEditing = () => {\n    const { anchorEl } = this.state;\n    // Put back the focus after closing the inline popover.\n    // $FlowFixMe\n    if (anchorEl) anchorEl.focus();\n\n    this.setState({\n      editing: false,\n      editingPreviousValue: null,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const forEachEvent = gd.asForEachEvent(this.props.event);\n    const objectName = forEachEvent.getObjectToPick();\n\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n      >\n        <div>\n          <span\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            onClick={this.edit}\n            onKeyPress={event => {\n              if (shouldActivate(event)) {\n                this.edit(event);\n              }\n            }}\n            tabIndex={0}\n          >\n            {objectName ? (\n              <Trans>Repeat for each instance of {objectName}:</Trans>\n            ) : (\n              <i>\n                <Trans>\n                  Click to choose for which objects this event will be repeated\n                </Trans>\n              </i>\n            )}\n          </span>\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={forEachEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={forEachEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n        <InlinePopover\n          open={this.state.editing}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.cancelEditing}\n          onApply={this.endEditing}\n        >\n          <ObjectField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={objectName}\n            onChange={text => {\n              forEachEvent.setObjectToPick(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            onRequestClose={this.cancelEditing}\n            onApply={this.endEditing}\n            ref={objectField => (this._objectField = objectField)}\n          />\n        </InlinePopover>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList.js';\nimport classNames from 'classnames';\nimport {\n  selectableArea,\n  largeSelectableArea,\n  largeSelectedArea,\n  executableEventContainer,\n  disabledText,\n  instructionParameter,\n  nameAndIconContainer,\n  icon,\n} from '../ClassNames';\nimport InlinePopover from '../../InlinePopover';\nimport SceneVariableField from '../../ParameterFields/SceneVariableField';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nimport { Trans } from '@lingui/macro';\nimport { shouldActivate } from '../../../UI/KeyboardShortcuts/InteractionKeys.js';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n  variableContainer: {\n    marginLeft: '3px',\n    marginRight: '2px',\n  },\n  eventLabel: {\n    marginLeft: '5px',\n    whiteSpace: 'normal',\n    wordWrap: 'break-word',\n  },\n};\n\ntype State = {|\n  editingValueIteratorVariableName: boolean,\n  editingKeyIteratorVariableName: boolean,\n  editingIterableVariableName: boolean,\n  editingPreviousValue: ?string,\n  anchorEl: ?HTMLSpanElement,\n|};\n\nexport default class ForEachChildVariableEvent extends React.Component<\n  EventRendererProps,\n  State\n> {\n  _valueIteratorField: ?SceneVariableField = null;\n  _keyIteratorField: ?SceneVariableField = null;\n  _iterableField: ?SceneVariableField = null;\n\n  state = {\n    editingValueIteratorVariableName: false,\n    editingKeyIteratorVariableName: false,\n    editingIterableVariableName: false,\n    editingPreviousValue: null,\n    anchorEl: null,\n  };\n\n  edit = (\n    variable: 'iterable' | 'iteratorValue' | 'iteratorKey',\n    anchorEl: HTMLSpanElement\n  ) => {\n    const forEachChildVariableEvent = gd.asForEachChildVariableEvent(\n      this.props.event\n    );\n    const valueIteratorName = forEachChildVariableEvent.getValueIteratorVariableName();\n    const keyIteratorName = forEachChildVariableEvent.getKeyIteratorVariableName();\n    const iterableName = forEachChildVariableEvent.getIterableVariableName();\n\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editingValueIteratorVariableName: variable === 'iteratorValue',\n            editingKeyIteratorVariableName: variable === 'iteratorKey',\n            editingIterableVariableName: variable === 'iterable',\n            editingPreviousValue:\n              variable === 'iterable'\n                ? iterableName\n                : variable === 'iteratorValue'\n                ? valueIteratorName\n                : keyIteratorName,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              const field =\n                variable === 'iterable'\n                  ? this._iterableField\n                  : variable === 'iteratorValue'\n                  ? this._valueIteratorField\n                  : this._keyIteratorField;\n              if (field) field.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  cancelEditing = () => {\n    this.endEditing();\n\n    const forEachChildVariableEvent = gd.asForEachChildVariableEvent(\n      this.props.event\n    );\n    const {\n      editingPreviousValue,\n      editingIterableVariableName,\n      editingValueIteratorVariableName,\n      editingKeyIteratorVariableName,\n    } = this.state;\n    if (editingPreviousValue != null) {\n      if (editingIterableVariableName) {\n        forEachChildVariableEvent.setIterableVariableName(editingPreviousValue);\n      } else if (editingValueIteratorVariableName) {\n        forEachChildVariableEvent.setValueIteratorVariableName(\n          editingPreviousValue\n        );\n      } else if (editingKeyIteratorVariableName) {\n        forEachChildVariableEvent.setKeyIteratorVariableName(\n          editingPreviousValue\n        );\n      }\n      this.forceUpdate();\n    }\n  };\n\n  endEditing = () => {\n    const { anchorEl } = this.state;\n    // Put back the focus after closing the inline popover.\n    // $FlowFixMe\n    if (anchorEl) anchorEl.focus();\n\n    this.setState({\n      editingKeyIteratorVariableName: false,\n      editingValueIteratorVariableName: false,\n      editingIterableVariableName: false,\n      editingPreviousValue: null,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const forEachChildVariableEvent = gd.asForEachChildVariableEvent(\n      this.props.event\n    );\n    const valueIteratorName = forEachChildVariableEvent.getValueIteratorVariableName();\n    const keyIteratorName = forEachChildVariableEvent.getKeyIteratorVariableName();\n    const iterableName = forEachChildVariableEvent.getIterableVariableName();\n\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [executableEventContainer]: true,\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n      >\n        <div style={styles.eventLabel}>\n          <Trans>\n            <span\n              className={classNames({\n                [disabledText]: this.props.disabled,\n              })}\n            >\n              For every child in\n              <span\n                className={classNames({\n                  [selectableArea]: true,\n                  [instructionParameter]: true,\n                  [nameAndIconContainer]: true,\n                  scenevar: true,\n                })}\n                style={styles.variableContainer}\n                onClick={e => this.edit('iterable', e.currentTarget)}\n                onKeyPress={event => {\n                  if (shouldActivate(event)) {\n                    this.edit('iterable', event.currentTarget);\n                  }\n                }}\n                tabIndex={0}\n              >\n                <img\n                  className={icon}\n                  src=\"res/types/scenevar.png\"\n                  alt=\"Scene variable\"\n                />\n                {iterableName.length !== 0 ? (\n                  <span>{iterableName}</span>\n                ) : (\n                  <span className=\"instruction-missing-parameter\">\n                    <Trans>{`<Select a variable>`}</Trans>\n                  </span>\n                )}\n              </span>\n              , store the child in variable\n              <span\n                className={classNames({\n                  [selectableArea]: true,\n                  [instructionParameter]: true,\n                  [nameAndIconContainer]: true,\n                  scenevar: true,\n                })}\n                style={styles.variableContainer}\n                onClick={e => this.edit('iteratorValue', e.currentTarget)}\n                onKeyPress={event => {\n                  if (shouldActivate(event)) {\n                    this.edit('iteratorValue', event.currentTarget);\n                  }\n                }}\n                tabIndex={0}\n              >\n                <img\n                  className={icon}\n                  src=\"res/types/scenevar.png\"\n                  alt=\"Scene variable\"\n                />\n                {valueIteratorName.length !== 0 ? (\n                  <span>{valueIteratorName}</span>\n                ) : (\n                  <span>\n                    <Trans>{`<Select a variable> (optional)`}</Trans>\n                  </span>\n                )}\n              </span>\n              , the child name in\n              <span\n                className={classNames({\n                  [selectableArea]: true,\n                  [instructionParameter]: true,\n                  [nameAndIconContainer]: true,\n                  scenevar: true,\n                })}\n                style={styles.variableContainer}\n                onClick={e => this.edit('iteratorKey', e.currentTarget)}\n                onKeyPress={event => {\n                  if (shouldActivate(event)) {\n                    this.edit('iteratorKey', event.currentTarget);\n                  }\n                }}\n                tabIndex={0}\n              >\n                <img\n                  className={icon}\n                  src=\"res/types/scenevar.png\"\n                  alt=\"Scene variable\"\n                />\n                {keyIteratorName.length !== 0 ? (\n                  <span>{keyIteratorName}</span>\n                ) : (\n                  <span>\n                    <Trans>{`<Select a variable> (optional)`}</Trans>\n                  </span>\n                )}\n              </span>\n              and do:\n            </span>\n          </Trans>\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={forEachChildVariableEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={forEachChildVariableEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n        <InlinePopover\n          open={this.state.editingValueIteratorVariableName}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.cancelEditing}\n          onApply={this.endEditing}\n        >\n          <SceneVariableField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={valueIteratorName}\n            onChange={text => {\n              forEachChildVariableEvent.setValueIteratorVariableName(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            onRequestClose={this.cancelEditing}\n            onApply={this.endEditing}\n            ref={iteratorField => (this._valueIteratorField = iteratorField)}\n          />\n        </InlinePopover>\n        <InlinePopover\n          open={this.state.editingKeyIteratorVariableName}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.cancelEditing}\n          onApply={this.endEditing}\n        >\n          <SceneVariableField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={keyIteratorName}\n            onChange={text => {\n              forEachChildVariableEvent.setKeyIteratorVariableName(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            onRequestClose={this.cancelEditing}\n            onApply={this.endEditing}\n            ref={iteratorField => (this._keyIteratorField = iteratorField)}\n          />\n        </InlinePopover>\n        <InlinePopover\n          open={this.state.editingIterableVariableName}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.cancelEditing}\n          onApply={this.endEditing}\n        >\n          <SceneVariableField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={iterableName}\n            onChange={text => {\n              forEachChildVariableEvent.setIterableVariableName(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            onRequestClose={this.cancelEditing}\n            onApply={this.endEditing}\n            ref={iterableField => (this._iterableField = iterableField)}\n          />\n        </InlinePopover>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList.js';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  executableEventContainer,\n  disabledText,\n} from '../ClassNames';\nimport InlinePopover from '../../InlinePopover';\nimport DefaultField from '../../ParameterFields/DefaultField';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nimport { shouldActivate } from '../../../UI/KeyboardShortcuts/InteractionKeys.js';\nimport { Trans } from '@lingui/macro';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class RepeatEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  _field: ?DefaultField = null;\n  state = {\n    editing: false,\n    editingPreviousValue: null,\n    anchorEl: null,\n  };\n\n  edit = (domEvent: any) => {\n    const repeatEvent = gd.asRepeatEvent(this.props.event);\n    const expression = repeatEvent.getRepeatExpression();\n\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editing: true,\n            editingPreviousValue: expression,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._field) this._field.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  cancelEditing = () => {\n    this.endEditing();\n\n    const repeatEvent = gd.asRepeatEvent(this.props.event);\n    const { editingPreviousValue } = this.state;\n    if (editingPreviousValue != null) {\n      repeatEvent.setRepeatExpression(editingPreviousValue);\n      this.forceUpdate();\n    }\n  };\n\n  endEditing = () => {\n    const { anchorEl } = this.state;\n\n    // Put back the focus after closing the inline popover.\n    // $FlowFixMe\n    if (anchorEl) anchorEl.focus();\n\n    this.setState({\n      editing: false,\n      editingPreviousValue: null,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const repeatEvent = gd.asRepeatEvent(this.props.event);\n    const expression = repeatEvent.getRepeatExpression();\n\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n      >\n        <div>\n          <span\n            className={classNames({\n              [selectableArea]: true,\n              [disabledText]: this.props.disabled,\n            })}\n            onClick={this.edit}\n            onKeyPress={event => {\n              if (shouldActivate(event)) {\n                this.edit(event);\n              }\n            }}\n            tabIndex={0}\n          >\n            {expression ? (\n              <Trans>Repeat {expression} times:</Trans>\n            ) : (\n              <i>\n                <Trans>Click to choose how many times will be repeated</Trans>\n              </i>\n            )}\n          </span>\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={repeatEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={repeatEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n        <InlinePopover\n          open={this.state.editing}\n          anchorEl={this.state.anchorEl}\n          onRequestClose={this.cancelEditing}\n          onApply={this.endEditing}\n        >\n          <DefaultField\n            project={this.props.project}\n            scope={this.props.scope}\n            globalObjectsContainer={this.props.globalObjectsContainer}\n            objectsContainer={this.props.objectsContainer}\n            value={expression}\n            onChange={text => {\n              repeatEvent.setRepeatExpression(text);\n              this.props.onUpdate();\n            }}\n            isInline\n            ref={field => (this._field = field)}\n          />\n        </InlinePopover>\n      </div>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport InstructionsList from '../InstructionsList';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  executableEventContainer,\n  disabledText,\n  conditionsContainer,\n} from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\nimport ConditionsActionsColumns from '../ConditionsActionsColumns';\nimport { Trans } from '@lingui/macro';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  instructionsContainer: {\n    display: 'flex',\n  },\n  actionsList: {\n    flex: 1,\n  },\n};\n\nexport default class ForEachEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  render() {\n    var whileEvent = gd.asWhileEvent(this.props.event);\n\n    return (\n      <div\n        style={styles.container}\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n          [executableEventContainer]: true,\n        })}\n      >\n        <div\n          className={classNames({\n            [disabledText]: this.props.disabled,\n          })}\n        >\n          <Trans>While these conditions are true:</Trans>\n        </div>\n        <InstructionsList\n          instrsList={whileEvent.getWhileConditions()}\n          style={\n            {} /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n          }\n          className={conditionsContainer}\n          selection={this.props.selection}\n          areConditions\n          onAddNewInstruction={this.props.onAddNewInstruction}\n          onPasteInstructions={this.props.onPasteInstructions}\n          onMoveToInstruction={this.props.onMoveToInstruction}\n          onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n          onInstructionClick={this.props.onInstructionClick}\n          onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n          onInstructionContextMenu={this.props.onInstructionContextMenu}\n          onAddInstructionContextMenu={this.props.onAddInstructionContextMenu}\n          onParameterClick={this.props.onParameterClick}\n          disabled={this.props.disabled}\n          renderObjectThumbnail={this.props.renderObjectThumbnail}\n          screenType={this.props.screenType}\n          windowWidth={this.props.windowWidth}\n        />\n        <div\n          className={classNames({\n            [disabledText]: this.props.disabled,\n          })}\n        >\n          <Trans>Repeat these:</Trans>\n        </div>\n        <ConditionsActionsColumns\n          leftIndentWidth={this.props.leftIndentWidth}\n          windowWidth={this.props.windowWidth}\n          renderConditionsList={({ style, className }) => (\n            <InstructionsList\n              instrsList={whileEvent.getConditions()}\n              style={style}\n              className={className}\n              selection={this.props.selection}\n              areConditions\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n          renderActionsList={({ className }) => (\n            <InstructionsList\n              instrsList={whileEvent.getActions()}\n              style={\n                {\n                  ...styles.actionsList,\n                } /* TODO: Use a new object to force update - somehow updates are not always propagated otherwise */\n              }\n              className={className}\n              selection={this.props.selection}\n              areConditions={false}\n              onAddNewInstruction={this.props.onAddNewInstruction}\n              onPasteInstructions={this.props.onPasteInstructions}\n              onMoveToInstruction={this.props.onMoveToInstruction}\n              onMoveToInstructionsList={this.props.onMoveToInstructionsList}\n              onInstructionClick={this.props.onInstructionClick}\n              onInstructionDoubleClick={this.props.onInstructionDoubleClick}\n              onInstructionContextMenu={this.props.onInstructionContextMenu}\n              onAddInstructionContextMenu={\n                this.props.onAddInstructionContextMenu\n              }\n              onParameterClick={this.props.onParameterClick}\n              disabled={this.props.disabled}\n              renderObjectThumbnail={this.props.renderObjectThumbnail}\n              screenType={this.props.screenType}\n              windowWidth={this.props.windowWidth}\n            />\n          )}\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport IconButton from '../../../../UI/IconButton';\nimport classNames from 'classnames';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n  linkContainer,\n  disabledText,\n} from '../../ClassNames';\nimport InlinePopover from '../../../InlinePopover';\nimport ExternalEventsAutoComplete from './ExternalEventsAutoComplete';\nimport { showWarningBox } from '../../../../UI/Messages/MessageBox';\nimport { type EventRendererProps } from '../EventRenderer';\nimport { shouldActivate } from '../../../../UI/KeyboardShortcuts/InteractionKeys';\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  container: {\n    height: '4em',\n    display: 'flex',\n    alignItems: 'center',\n    padding: 5,\n  },\n  title: {\n    fontSize: '1.2em',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  openInNewIcon: {\n    fontSize: '1.5em',\n  },\n};\n\nexport default class LinkEvent extends React.Component<EventRendererProps, *> {\n  _externalEventsAutoComplete: ?ExternalEventsAutoComplete = null;\n\n  state = {\n    editing: false,\n    editingPreviousValue: null,\n    anchorEl: null,\n  };\n\n  edit = (domEvent: any) => {\n    const linkEvent = gd.asLinkEvent(this.props.event);\n    const target = linkEvent.getTarget();\n\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editing: true,\n            editingPreviousValue: target,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._externalEventsAutoComplete)\n                this._externalEventsAutoComplete.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  openTarget = (i18n: I18nType) => {\n    const { project, event, onOpenLayout, onOpenExternalEvents } = this.props;\n    const linkEvent = gd.asLinkEvent(event);\n    const target = linkEvent.getTarget();\n\n    if (project.hasExternalEventsNamed(target)) {\n      onOpenExternalEvents(target);\n    } else if (project.hasLayoutNamed(target)) {\n      onOpenLayout(target);\n    } else {\n      showWarningBox(\n        i18n._(\n          t`The specified external events do not exist in the game. Be sure that the name is correctly spelled or create them using the project manager.`\n        )\n      );\n    }\n  };\n\n  cancelEditing = () => {\n    this.endEditing();\n\n    const linkEvent = gd.asLinkEvent(this.props.event);\n    const { editingPreviousValue } = this.state;\n    if (editingPreviousValue != null) {\n      linkEvent.setTarget(editingPreviousValue);\n      this.forceUpdate();\n    }\n  };\n\n  endEditing = () => {\n    const { anchorEl } = this.state;\n\n    // Put back the focus after closing the inline popover.\n    // $FlowFixMe\n    if (anchorEl) anchorEl.focus();\n\n    this.setState({\n      editing: false,\n      editingPreviousValue: null,\n      anchorEl: null,\n    });\n  };\n\n  render() {\n    const linkEvent = gd.asLinkEvent(this.props.event);\n    const target = linkEvent.getTarget();\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <div\n            className={classNames({\n              [largeSelectableArea]: true,\n              [largeSelectedArea]: this.props.selected,\n              [linkContainer]: true,\n            })}\n            style={styles.container}\n          >\n            <span\n              style={styles.title}\n              className={classNames({\n                [disabledText]: this.props.disabled,\n              })}\n            >\n              {this.props.scope.layout ? (\n                <>\n                  <Trans>Include events from</Trans>{' '}\n                  <i\n                    className={classNames({\n                      [selectableArea]: true,\n                    })}\n                    onClick={this.edit}\n                    onKeyPress={event => {\n                      if (shouldActivate(event)) {\n                        this.edit(event);\n                      }\n                    }}\n                    tabIndex={0}\n                  >\n                    {target || (\n                      <Trans>{`<Enter the name of external events>`}</Trans>\n                    )}\n                  </i>{' '}\n                </>\n              ) : (\n                <Trans>Links can't be used outside of a scene.</Trans>\n              )}\n            </span>\n            <IconButton\n              onClick={() => this.openTarget(i18n)}\n              disabled={!target}\n            >\n              <OpenInNew style={styles.openInNewIcon} />\n            </IconButton>\n            <InlinePopover\n              open={this.state.editing}\n              anchorEl={this.state.anchorEl}\n              onRequestClose={this.cancelEditing}\n              onApply={this.endEditing}\n            >\n              <ExternalEventsAutoComplete\n                project={this.props.project}\n                value={target}\n                sceneName={\n                  this.props.scope.layout\n                    ? this.props.scope.layout.getName()\n                    : undefined\n                }\n                externalEventsName={\n                  this.props.scope.externalEvents\n                    ? this.props.scope.externalEvents.getName()\n                    : undefined\n                }\n                onChange={text => {\n                  linkEvent.setTarget(text);\n                  this.props.onUpdate();\n                }}\n                isInline\n                onRequestClose={this.cancelEditing}\n                onApply={this.endEditing}\n                ref={externalEventsAutoComplete =>\n                  (this._externalEventsAutoComplete = externalEventsAutoComplete)\n                }\n              />\n            </InlinePopover>\n          </div>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport {\n  enumerateLayouts,\n  enumerateExternalEvents,\n} from '../../../../ProjectManager/EnumerateProjectItems';\nimport SemiControlledAutoComplete, {\n  type DataSource,\n} from '../../../../UI/SemiControlledAutoComplete';\n\nconst getList = (\n  currentSceneName: ?string,\n  currentExternalEventName: ?string,\n  project: ?gdProject\n): DataSource => {\n  if (!project || !currentSceneName) {\n    return [];\n  }\n\n  const externalEvents = enumerateExternalEvents(project)\n    .filter(\n      externalEvents => externalEvents.getName() !== currentExternalEventName\n    )\n    .map(externalEvents => ({\n      text: externalEvents.getName(),\n      value: externalEvents.getName(),\n    }));\n\n  const layouts = enumerateLayouts(project)\n    .filter(layout => layout.getName() !== currentSceneName)\n    .map(layout => ({\n      text: layout.getName(),\n      value: layout.getName(),\n    }));\n\n  return [...externalEvents, { type: 'separator' }, ...layouts];\n};\n\ntype Props = {|\n  onChange: string => void,\n  value: string,\n  project?: gdProject,\n  isInline?: boolean,\n  onRequestClose?: () => void,\n  onApply?: () => void,\n  sceneName?: string,\n  externalEventsName?: string,\n|};\n\nexport default class ExternalEventsAutoComplete extends React.Component<\n  Props,\n  {||}\n> {\n  _field: ?any;\n\n  focus() {\n    if (this._field) this._field.focus();\n  }\n\n  render() {\n    const {\n      value,\n      onChange,\n      onRequestClose,\n      onApply,\n      isInline,\n      project,\n      sceneName,\n      externalEventsName,\n    } = this.props;\n\n    return (\n      <SemiControlledAutoComplete\n        margin={this.props.isInline ? 'none' : 'dense'}\n        fullWidth\n        id=\"external-events-field\"\n        value={value}\n        onChange={onChange}\n        onRequestClose={onRequestClose}\n        onApply={onApply}\n        dataSource={getList(sceneName, externalEventsName, project)}\n        openOnFocus={!isInline}\n        ref={field => (this._field = field)}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport Button from '@material-ui/core/Button';\nimport InlinePopover from '../../InlinePopover';\nimport ObjectField from '../../ParameterFields/ObjectField';\nimport {\n  largeSelectedArea,\n  largeSelectableArea,\n  selectableArea,\n} from '../ClassNames';\nimport { getHelpLink } from '../../../Utils/HelpLink';\nimport { type EventRendererProps } from './EventRenderer';\nimport Measure from 'react-measure';\nimport { CodeEditor } from '../../../CodeEditor';\nimport { shouldActivate } from '../../../UI/KeyboardShortcuts/InteractionKeys';\nimport { Trans } from '@lingui/macro';\nconst gd: libGDevelop = global.gd;\n\nconst fontFamily = '\"Lucida Console\", Monaco, monospace';\nconst MINIMUM_EDITOR_HEIGHT = 200;\nconst EDITOR_PADDING = 100;\n\nconst styles = {\n  container: {\n    minHeight: 30,\n    display: 'flex',\n    flexDirection: 'column',\n    backgroundColor: '#1e1e1e',\n  },\n  wrappingText: {\n    fontFamily,\n    fontSize: '0.95em',\n    paddingLeft: 5,\n    paddingRight: 5,\n    paddingTop: 2,\n    paddingBottom: 2,\n    margin: 0,\n    backgroundColor: '#1e1e1e',\n    color: '#d4d4d4',\n    overflowX: 'hidden',\n    maxWidth: '100%',\n  },\n  comment: {\n    color: '#777',\n  },\n  commentLink: {\n    cursor: 'pointer',\n    color: '#777',\n    textDecoration: 'underline',\n  },\n  expandIcon: {\n    color: '#d4d4d4',\n  },\n};\n\ntype State = {|\n  editingObject: boolean,\n  editingPreviousValue: ?string,\n  anchorEl: ?any,\n|};\n\nexport default class JsCodeEvent extends React.Component<\n  EventRendererProps,\n  State\n> {\n  _objectField: ?ObjectField = null;\n  state = {\n    editingObject: false,\n    editingPreviousValue: null,\n    anchorEl: null,\n  };\n\n  _input: ?any;\n\n  onChange = (newValue: string) => {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    jsCodeEvent.setInlineCode(newValue);\n  };\n\n  editObject = (domEvent: any) => {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    const parameterObjects = jsCodeEvent.getParameterObjects();\n\n    // We should not need to use a timeout, but\n    // if we don't do this, the InlinePopover's clickaway listener\n    // is immediately picking up the event and closing.\n    // Search the rest of the codebase for inlinepopover-event-hack\n    const anchorEl = domEvent.currentTarget;\n    setTimeout(\n      () =>\n        this.setState(\n          {\n            editingObject: true,\n            editingPreviousValue: parameterObjects,\n            anchorEl,\n          },\n          () => {\n            // Give a bit of time for the popover to mount itself\n            setTimeout(() => {\n              if (this._objectField) this._objectField.focus();\n            }, 10);\n          }\n        ),\n      10\n    );\n  };\n\n  cancelObjectEditing = () => {\n    this.endObjectEditing();\n\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    const { editingPreviousValue } = this.state;\n    if (editingPreviousValue != null) {\n      jsCodeEvent.setParameterObjects(editingPreviousValue);\n      this.forceUpdate();\n    }\n  };\n\n  endObjectEditing = () => {\n    const { anchorEl } = this.state;\n\n    // Put back the focus after closing the inline popover.\n    // $FlowFixMe\n    if (anchorEl) anchorEl.focus();\n\n    this.setState({\n      editingObject: false,\n      editingPreviousValue: null,\n      anchorEl: null,\n    });\n  };\n\n  toggleExpanded = () => {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    jsCodeEvent.setEventsSheetExpanded(!jsCodeEvent.isEventsSheetExpanded());\n  };\n\n  _getCodeEditorHeight = () => {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n\n    // Always use the minimum height when collapsed.\n    if (!jsCodeEvent.isEventsSheetExpanded()) {\n      return MINIMUM_EDITOR_HEIGHT;\n    }\n\n    // Shrink the editor enough for the additional event elements to fit in the sheet space.\n    const heightToFillSheet = this.props.eventsSheetHeight - EDITOR_PADDING;\n    return Math.max(MINIMUM_EDITOR_HEIGHT, heightToFillSheet);\n  };\n\n  render() {\n    const jsCodeEvent = gd.asJsCodeEvent(this.props.event);\n    const parameterObjects = jsCodeEvent.getParameterObjects();\n\n    const textStyle = this.props.disabled ? styles.comment : undefined;\n\n    const objects = (\n      <span\n        className={classNames({\n          [selectableArea]: true,\n        })}\n        onClick={this.editObject}\n        onKeyPress={event => {\n          if (shouldActivate(event)) {\n            this.editObject(event);\n          }\n        }}\n        tabIndex={0}\n        style={textStyle}\n      >\n        {parameterObjects ? (\n          <Trans>, objects /*{parameterObjects}*/</Trans>\n        ) : (\n          <>\n            {' '}\n            <Trans>\n              {'/* Click here to choose objects to pass to JavaScript */'}\n            </Trans>\n          </>\n        )}\n      </span>\n    );\n\n    const eventsFunctionContext = this.props.scope.eventsFunction ? (\n      <span style={textStyle}>, eventsFunctionContext</span>\n    ) : null;\n\n    const functionStart = (\n      <p style={styles.wrappingText}>\n        <span style={textStyle}>\n          {this.props.disabled ? '/*' : ''}\n          {'(function(runtimeScene'}\n        </span>\n        {objects}\n        {eventsFunctionContext}\n        <span style={textStyle}>{') {'}</span>\n      </p>\n    );\n    const functionEnd = (\n      <p style={styles.wrappingText}>\n        <span style={textStyle}>{'})(runtimeScene'}</span>\n        {objects}\n        {eventsFunctionContext}\n        <span style={textStyle}>\n          {');'}\n          {this.props.disabled ? '*/' : ''}\n        </span>\n        <span style={styles.comment}>\n          {' // '}\n          <a\n            href={getHelpLink('/events/js-code')}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={styles.commentLink}\n          >\n            Read the documentation and help\n          </a>\n        </span>\n      </p>\n    );\n\n    const expandIcon = (\n      <div style={styles.expandIcon}>\n        {jsCodeEvent.isEventsSheetExpanded() ? (\n          <ExpandLess fontSize=\"small\" color=\"inherit\" />\n        ) : (\n          <ExpandMore fontSize=\"small\" color=\"inherit\" />\n        )}\n      </div>\n    );\n\n    return (\n      <Measure bounds>\n        {({ measureRef, contentRect }) => (\n          <div\n            style={styles.container}\n            className={classNames({\n              [largeSelectableArea]: true,\n              [largeSelectedArea]: this.props.selected,\n            })}\n            ref={measureRef}\n          >\n            {functionStart}\n            <CodeEditor\n              value={jsCodeEvent.getInlineCode()}\n              onChange={this.onChange}\n              width={contentRect.bounds.width - 5}\n              height={this._getCodeEditorHeight()}\n              onEditorMounted={() => this.props.onUpdate()}\n            />\n            {functionEnd}\n            <Button onClick={this.toggleExpanded} fullWidth size=\"small\">\n              {expandIcon}\n            </Button>\n            <InlinePopover\n              open={this.state.editingObject}\n              anchorEl={this.state.anchorEl}\n              onRequestClose={this.cancelObjectEditing}\n              onApply={this.endObjectEditing}\n            >\n              <ObjectField\n                project={this.props.project}\n                scope={this.props.scope}\n                globalObjectsContainer={this.props.globalObjectsContainer}\n                objectsContainer={this.props.objectsContainer}\n                value={parameterObjects}\n                onChange={text => {\n                  jsCodeEvent.setParameterObjects(text);\n                  this.props.onUpdate();\n                }}\n                isInline\n                onRequestClose={this.cancelObjectEditing}\n                onApply={this.endObjectEditing}\n                ref={objectField => (this._objectField = objectField)}\n              />\n            </InlinePopover>\n          </div>\n        )}\n      </Measure>\n    );\n  }\n}\n","// @flow\n\ntype WatchedComponent = {\n  +onHeightsChanged: Function => void,\n};\n\n/**\n * Store the height of events and notify a component whenever\n * heights have changed.\n * Needed for EventsTree as we need to tell it when heights have changed\n * so it can recompute the internal row heights of the react-virtualized List.\n */\nexport default class EventHeightsCache {\n  eventHeights = {};\n  updateTimeoutId: ?TimeoutID = null;\n  component: ?WatchedComponent = null;\n\n  constructor(component: WatchedComponent) {\n    this.component = component;\n  }\n\n  _notifyComponent() {\n    if (this.updateTimeoutId) {\n      return; // An update is already scheduled.\n    }\n\n    // Notify the component, on the next tick, that heights have changed\n    this.updateTimeoutId = setTimeout(() => {\n      if (this.component) {\n        this.component.onHeightsChanged(() => (this.updateTimeoutId = null));\n      } else {\n        this.updateTimeoutId = null;\n      }\n    }, 0);\n  }\n\n  setEventHeight(event: gdBaseEvent, height: number) {\n    const cachedHeight = this.eventHeights[event.ptr];\n    if (cachedHeight === undefined || cachedHeight !== height) {\n      // console.log(event.ptr, 'has a new height', height, 'old:', cachedHeight);\n      this._notifyComponent();\n    }\n\n    this.eventHeights[event.ptr] = height;\n  }\n\n  getEventHeight(event: gdBaseEvent): number {\n    return this.eventHeights[event.ptr] || 60;\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Line, Column } from '../../UI/Grid';\nimport ElementWithMenu from '../../UI/Menu/ElementWithMenu';\nimport { enumerateEventsMetadata } from '../EnumerateEventsMetadata';\n\nconst styles = {\n  addButton: {\n    cursor: 'pointer',\n  },\n};\n\ntype Props = {|\n  onAddEvent: (eventType: string) => void,\n|};\n\nconst makeMenuTemplateBuilderForEvents = (\n  onAddEvent: (eventType: string) => void\n) => () =>\n  enumerateEventsMetadata().map(metadata => {\n    return {\n      label: metadata.fullName,\n      click: () => onAddEvent(metadata.type),\n    };\n  });\n\nexport default function BottomButtons({ onAddEvent }: Props) {\n  return (\n    <Column>\n      <Line justifyContent=\"space-between\">\n        <ElementWithMenu\n          openMenuWithSecondaryClick\n          element={\n            <button\n              style={styles.addButton}\n              className=\"add-link\"\n              onClick={() => onAddEvent('BuiltinCommonInstructions::Standard')}\n            >\n              <Trans>Add a new event</Trans>\n            </button>\n          }\n          buildMenuTemplate={makeMenuTemplateBuilderForEvents(onAddEvent)}\n        />\n        <ElementWithMenu\n          element={\n            <button style={styles.addButton} className=\"add-link\">\n              <Trans>Add...</Trans>\n            </button>\n          }\n          buildMenuTemplate={makeMenuTemplateBuilderForEvents(onAddEvent)}\n        />\n      </Line>\n    </Column>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport HelpButton from '../../UI/HelpButton';\nimport Text from '../../UI/Text';\nimport { EmptyPlaceholder } from '../../UI/EmptyPlaceholder';\n\nconst EmptyEventsPlaceholder = () => (\n  <EmptyPlaceholder renderButtons={() => <HelpButton helpPagePath=\"/events\" />}>\n    <Text>\n      <Trans>There are no events here.</Trans>\n    </Text>\n    <Text>\n      <Trans>\n        Events are composed of conditions (on the left of an event) and actions\n        (on the right). When conditions are fulfilled, the actions are executed.\n      </Trans>\n    </Text>\n    <Text>\n      <Trans>Add your first event using the button \"Add a new event\".</Trans>\n    </Text>\n  </EmptyPlaceholder>\n);\n\nexport default EmptyEventsPlaceholder;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport InstructionParametersEditor from './InstructionParametersEditor';\nimport InstructionOrObjectSelector, {\n  type TabName,\n} from './InstructionOrObjectSelector';\nimport InstructionOrExpressionSelector from './InstructionOrExpressionSelector';\nimport HelpButton from '../../UI/HelpButton';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { SelectColumns } from '../../UI/Reponsive/SelectColumns';\nimport {\n  ResponsiveWindowMeasurer,\n  type WidthType,\n} from '../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport {\n  useNewInstructionEditor,\n  getInstructionMetadata,\n} from './NewInstructionEditor';\nimport useForceUpdate from '../../Utils/UseForceUpdate';\n\nconst styles = {\n  fullHeightSelector: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n};\n\ntype StepName =\n  | 'object-or-free-instructions'\n  | 'object-instructions'\n  | 'parameters';\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  isNewInstruction: boolean,\n  onCancel: () => void,\n  onSubmit: () => void,\n  open: boolean,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  anchorEl?: any, // Unused\n  canPasteInstructions: boolean, // Unused\n  onPasteInstructions: () => void, // Unused\n|};\n\nconst getInitialStepName = (isNewInstruction: boolean): StepName => {\n  if (isNewInstruction) return 'object-or-free-instructions';\n  return 'parameters';\n};\n\nconst getInitialTab = (\n  isNewInstruction: boolean,\n  hasObjectChosen: boolean\n): TabName => {\n  if (isNewInstruction) return 'objects';\n  return hasObjectChosen ? 'objects' : 'free-instructions';\n};\n\n/**\n * A responsive instruction editor in a dialog, showing InstructionParametersEditor\n * at the end.\n */\nexport default function NewInstructionEditorDialog({\n  project,\n  globalObjectsContainer,\n  objectsContainer,\n  onCancel,\n  open,\n  instruction,\n  isCondition,\n  isNewInstruction,\n  scope,\n  onSubmit,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  openInstructionOrExpression,\n}: Props) {\n  const forceUpdate = useForceUpdate();\n  const [\n    newInstructionEditorState,\n    newInstructionEditorSetters,\n  ] = useNewInstructionEditor({\n    instruction,\n    isCondition,\n    project,\n    isNewInstruction,\n    scope,\n    globalObjectsContainer,\n    objectsContainer,\n  });\n  const {\n    chosenObjectName,\n    chosenObjectInstructionsInfo,\n    chosenObjectInstructionsInfoTree,\n  } = newInstructionEditorState;\n  const {\n    chooseInstruction,\n    chooseObject,\n    chooseObjectInstruction,\n  } = newInstructionEditorSetters;\n  const hasObjectChosen =\n    !!chosenObjectInstructionsInfo && !!chosenObjectInstructionsInfoTree;\n  const [step, setStep] = React.useState(() =>\n    getInitialStepName(isNewInstruction)\n  );\n  const [\n    currentInstructionOrObjectSelectorTab,\n    setCurrentInstructionOrObjectSelectorTab,\n  ] = React.useState(() => getInitialTab(isNewInstruction, hasObjectChosen));\n  const instructionType: string = instruction.getType();\n\n  // Handle the back button\n  const stepBackFrom = (origin: StepName, windowWidth: WidthType) => {\n    if (origin === 'parameters' && chosenObjectName) {\n      setStep(\n        // \"medium\" displays 2 columns, so \"Back\" button should go back to the first screen.\n        windowWidth === 'medium'\n          ? 'object-or-free-instructions'\n          : 'object-instructions'\n      );\n    } else {\n      setStep('object-or-free-instructions');\n    }\n  };\n\n  // Focus the parameters when showing them\n  const instructionParametersEditor = React.useRef(\n    (null: ?InstructionParametersEditor)\n  );\n  React.useEffect(\n    () => {\n      if (step === 'parameters') {\n        if (instructionParametersEditor.current) {\n          instructionParametersEditor.current.focus();\n        }\n      }\n    },\n    [step]\n  );\n\n  const instructionMetadata = getInstructionMetadata({\n    instructionType,\n    isCondition,\n    project,\n  });\n  const instructionHelpPage = instructionMetadata\n    ? instructionMetadata.getHelpPath()\n    : undefined;\n\n  const renderInstructionOrObjectSelector = () => (\n    <InstructionOrObjectSelector\n      key=\"instruction-or-object-selector\"\n      style={styles.fullHeightSelector}\n      project={project}\n      scope={scope}\n      currentTab={currentInstructionOrObjectSelectorTab}\n      onChangeTab={setCurrentInstructionOrObjectSelectorTab}\n      globalObjectsContainer={globalObjectsContainer}\n      objectsContainer={objectsContainer}\n      isCondition={isCondition}\n      chosenInstructionType={!chosenObjectName ? instructionType : undefined}\n      onChooseInstruction={(instructionType: string) => {\n        chooseInstruction(instructionType);\n        setStep('parameters');\n      }}\n      chosenObjectName={chosenObjectName}\n      onChooseObject={(chosenObjectName: string) => {\n        chooseObject(chosenObjectName);\n        setStep('object-instructions');\n      }}\n      focusOnMount={!instructionType}\n      onSearchStartOrReset={forceUpdate}\n    />\n  );\n\n  const renderParameters = () => (\n    <InstructionParametersEditor\n      key=\"parameters\"\n      project={project}\n      scope={scope}\n      globalObjectsContainer={globalObjectsContainer}\n      objectsContainer={objectsContainer}\n      objectName={chosenObjectName}\n      isCondition={isCondition}\n      instruction={instruction}\n      resourceSources={resourceSources}\n      onChooseResource={onChooseResource}\n      resourceExternalEditors={resourceExternalEditors}\n      openInstructionOrExpression={openInstructionOrExpression}\n      ref={instructionParametersEditor}\n      focusOnMount={!!instructionType}\n      noHelpButton\n    />\n  );\n\n  const renderObjectInstructionSelector = () =>\n    chosenObjectInstructionsInfoTree && chosenObjectInstructionsInfo ? (\n      <InstructionOrExpressionSelector\n        key=\"object-instruction-selector\"\n        style={styles.fullHeightSelector}\n        instructionsInfo={chosenObjectInstructionsInfo}\n        instructionsInfoTree={chosenObjectInstructionsInfoTree}\n        iconSize={24}\n        onChoose={(instructionType: string) => {\n          chooseObjectInstruction(instructionType);\n          setStep('parameters');\n        }}\n        selectedType={instructionType}\n        useSubheaders\n        focusOnMount={!instructionType}\n        searchPlaceholderObjectName={chosenObjectName}\n        searchPlaceholderIsCondition={isCondition}\n      />\n    ) : null;\n\n  return (\n    <ResponsiveWindowMeasurer>\n      {windowWidth => (\n        <Dialog\n          onApply={instructionType ? onSubmit : null}\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              primary={false}\n              onClick={onCancel}\n              key=\"cancel\"\n            />,\n            <FlatButton\n              label={<Trans>Ok</Trans>}\n              primary={true}\n              keyboardFocused={false}\n              disabled={!instructionType}\n              onClick={onSubmit}\n              key=\"ok\"\n            />,\n          ]}\n          secondaryActions={[\n            windowWidth !== 'large' &&\n            step !== 'object-or-free-instructions' ? (\n              <FlatButton\n                label={<Trans>Back</Trans>}\n                primary={false}\n                onClick={() => stepBackFrom(step, windowWidth)}\n                key=\"back\"\n              />\n            ) : null,\n            <HelpButton\n              key=\"help\"\n              helpPagePath={instructionHelpPage || '/events'}\n              label={\n                !instructionHelpPage ||\n                (windowWidth === 'small' ||\n                  step === 'object-or-free-instructions') ? (\n                  <Trans>Help</Trans>\n                ) : isCondition ? (\n                  <Trans>Help for this condition</Trans>\n                ) : (\n                  <Trans>Help for this action</Trans>\n                )\n              }\n            />,\n          ]}\n          open={open}\n          onRequestClose={onCancel}\n          cannotBeDismissed={true}\n          maxWidth={false}\n          noMargin\n          flexRowBody\n          fullHeight={\n            true /* Always use full height to avoid a very small dialog when there are not a lot of objects. */\n          }\n        >\n          <SelectColumns\n            columnsRenderer={{\n              'instruction-or-object-selector': renderInstructionOrObjectSelector,\n              'object-instruction-selector': renderObjectInstructionSelector,\n              parameters: renderParameters,\n            }}\n            getColumns={() => {\n              if (windowWidth === 'large') {\n                if (chosenObjectName) {\n                  return [\n                    'instruction-or-object-selector',\n                    'object-instruction-selector',\n                    'parameters',\n                  ];\n                } else {\n                  return ['instruction-or-object-selector', 'parameters'];\n                }\n              } else if (windowWidth === 'medium') {\n                if (step === 'object-or-free-instructions') {\n                  return ['instruction-or-object-selector'];\n                } else {\n                  if (chosenObjectName) {\n                    return ['object-instruction-selector', 'parameters'];\n                  } else {\n                    return ['parameters'];\n                  }\n                }\n              } else {\n                if (step === 'object-or-free-instructions') {\n                  return ['instruction-or-object-selector'];\n                } else if (step === 'object-instructions') {\n                  return ['object-instruction-selector'];\n                } else {\n                  return ['parameters'];\n                }\n              }\n            }}\n          />\n        </Dialog>\n      )}\n    </ResponsiveWindowMeasurer>\n  );\n}\n","// @flow\n\n/*\n * Case Sensitive Slug method\n * Inspired by Aaron Stannard module (https://github.com/Aaronontheweb/node-slugs)\n */\nexport const caseSensitiveSlug = (\n  incString: string,\n  separator?: string,\n  preserved?: Array<string>\n): string => {\n  var p = ['.', '=', '-'];\n  var s = '-';\n\n  if (typeof preserved != 'undefined') {\n    p = preserved;\n  }\n\n  if (typeof separator != 'undefined') {\n    s = separator;\n  }\n\n  return incString\n    .replace(/ü/g, 'ue')\n    .replace(/ä/g, 'ae')\n    .replace(/ö/g, 'oe')\n    .replace(/ß/g, 'ss')\n    .replace(new RegExp('[' + p.join('') + ']', 'g'), ' ') //  replace preserved characters with spaces\n    .replace(/-{2,}/g, ' ') //  remove duplicate spaces\n    .replace(/^\\s\\s*/, '')\n    .replace(/\\s\\s*$/, '') //  trim both sides of string\n    .replace(/[^\\w ]/gi, '') //  replaces all non-alphanumeric with empty string\n    .replace(/[ ]/gi, s); //  Convert spaces to dashes\n};\n","// @flow\nimport { mapVector } from '../Utils/MapFor';\n\n/** The JS equivalent of gdPropertyDescriptor */\ntype EnumeratedProperty = {|\n  name: string,\n  type: string,\n  description: string,\n  label: string,\n  value: string,\n  extraInfo: Array<string>,\n  isHidden: boolean,\n|};\n\n/**\n * Transform a gdNamedPropertyDescriptorsList into a JS object.\n * **Don't use this** unless you explictely need to deal with JS objects.\n * Otherwise, prefer just iterating and using gdNamedPropertyDescriptorsList functions.\n */\nexport const enumerateNamedPropertyDescriptorsList = (\n  namedProperties: gdNamedPropertyDescriptorsList\n): Array<EnumeratedProperty> => {\n  return mapVector(namedProperties, namedProperty => {\n    return {\n      name: namedProperty.getName(),\n      type: namedProperty.getType(),\n      description: namedProperty.getDescription(),\n      label: namedProperty.getLabel(),\n      value: namedProperty.getValue(),\n      extraInfo: namedProperty.getExtraInfo().toJSArray(),\n      isHidden: namedProperty.isHidden(),\n    };\n  });\n};\n\nexport const toGdPropertyDescriptor = (\n  enumeratedProperty: EnumeratedProperty,\n  propertyDescriptor: gdPropertyDescriptor\n): gdPropertyDescriptor => {\n  propertyDescriptor\n    .setType(enumeratedProperty.type)\n    .setDescription(enumeratedProperty.description)\n    .setLabel(enumeratedProperty.label)\n    .setValue(enumeratedProperty.value)\n    .setHidden(enumeratedProperty.isHidden);\n\n  enumeratedProperty.extraInfo.forEach(extraInfo => {\n    propertyDescriptor.addExtraInfo(extraInfo);\n  });\n\n  return propertyDescriptor;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport Popover from '@material-ui/core/Popover';\nimport * as React from 'react';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  useNewInstructionEditor,\n  getInstructionMetadata,\n} from './NewInstructionEditor';\nimport InstructionOrObjectSelector, {\n  type TabName,\n} from './InstructionOrObjectSelector';\nimport InstructionOrExpressionSelector from './InstructionOrExpressionSelector';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\nimport { SelectColumns } from '../../UI/Reponsive/SelectColumns';\nimport useForceUpdate from '../../Utils/UseForceUpdate';\nimport { setupInstructionParameters } from '../../InstructionOrExpression/SetupInstructionParameters';\nimport FlatButton from '../../UI/FlatButton';\nimport Paste from '../../UI/CustomSvgIcons/Paste';\nimport { Line } from '../../UI/Grid';\n\nconst styles = {\n  fullHeightSelector: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    height: '400px',\n    width: '400px',\n  },\n};\n\ntype StepName = 'object-or-free-instructions' | 'object-instructions';\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  anchorEl: ?HTMLElement,\n  isNewInstruction: boolean,\n  onCancel: () => void,\n  onSubmit: () => void,\n  open: boolean,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  canPasteInstructions: boolean, // Unused\n  onPasteInstructions: () => void, // Unused\n|};\n\n/**\n * An instruction editor in a popover.\n * Does not show the parameters for the instruction.\n */\nexport default function NewInstructionEditorMenu({\n  project,\n  globalObjectsContainer,\n  objectsContainer,\n  onCancel,\n  open,\n  instruction,\n  isCondition,\n  isNewInstruction,\n  anchorEl,\n  scope,\n  onSubmit,\n  canPasteInstructions,\n  onPasteInstructions,\n}: Props) {\n  const forceUpdate = useForceUpdate();\n  const [\n    newInstructionEditorState,\n    newInstructionEditorSetters,\n  ] = useNewInstructionEditor({\n    instruction,\n    isCondition,\n    project,\n    isNewInstruction,\n    scope,\n    globalObjectsContainer,\n    objectsContainer,\n  });\n  const {\n    chosenObjectName,\n    chosenObjectInstructionsInfo,\n    chosenObjectInstructionsInfoTree,\n  } = newInstructionEditorState;\n  const {\n    chooseInstruction,\n    chooseObject,\n    chooseObjectInstruction,\n  } = newInstructionEditorSetters;\n  // As we're in a context menu, always start from 'object-or-free-instructions' step and with 'objects' tab.\n  const [step, setStep] = React.useState<StepName>(\n    'object-or-free-instructions'\n  );\n  const [\n    currentInstructionOrObjectSelectorTab,\n    setCurrentInstructionOrObjectSelectorTab,\n  ] = React.useState<TabName>('objects');\n  const instructionType: string = instruction.getType();\n\n  const submitInstruction = ({\n    instruction,\n    chosenObjectName,\n  }: {\n    instruction: gdInstruction,\n    chosenObjectName: ?string,\n  }) => {\n    // Before submitting the instruction, ensure that we set the default\n    // parameters, notably the object and behavior name.\n    const instructionMetadata = getInstructionMetadata({\n      instructionType: instruction.getType(),\n      isCondition,\n      project,\n    });\n    if (instructionMetadata) {\n      setupInstructionParameters(\n        globalObjectsContainer,\n        objectsContainer,\n        instruction,\n        instructionMetadata,\n        chosenObjectName\n      );\n    }\n    onSubmit();\n  };\n\n  const renderInstructionOrObjectSelector = () => (\n    <InstructionOrObjectSelector\n      key=\"instruction-or-object-selector\"\n      style={styles.fullHeightSelector}\n      project={project}\n      scope={scope}\n      currentTab={currentInstructionOrObjectSelectorTab}\n      onChangeTab={setCurrentInstructionOrObjectSelectorTab}\n      globalObjectsContainer={globalObjectsContainer}\n      objectsContainer={objectsContainer}\n      isCondition={isCondition}\n      chosenInstructionType={!chosenObjectName ? instructionType : undefined}\n      onChooseInstruction={(instructionType: string) => {\n        const { instruction, chosenObjectName } = chooseInstruction(\n          instructionType\n        );\n        submitInstruction({ instruction, chosenObjectName });\n      }}\n      chosenObjectName={chosenObjectName}\n      onChooseObject={chosenObjectName => {\n        chooseObject(chosenObjectName);\n        setStep('object-instructions');\n      }}\n      focusOnMount={!instructionType}\n      onSearchStartOrReset={forceUpdate}\n    />\n  );\n\n  const renderObjectInstructionSelector = () =>\n    chosenObjectInstructionsInfoTree && chosenObjectInstructionsInfo ? (\n      <InstructionOrExpressionSelector\n        key=\"object-instruction-selector\"\n        style={styles.fullHeightSelector}\n        instructionsInfo={chosenObjectInstructionsInfo}\n        instructionsInfoTree={chosenObjectInstructionsInfoTree}\n        iconSize={24}\n        onChoose={(instructionType: string) => {\n          const { instruction, chosenObjectName } = chooseObjectInstruction(\n            instructionType\n          );\n          submitInstruction({ instruction, chosenObjectName });\n        }}\n        selectedType={instructionType}\n        useSubheaders\n        focusOnMount={!instructionType}\n        searchPlaceholderObjectName={chosenObjectName}\n        searchPlaceholderIsCondition={isCondition}\n      />\n    ) : null;\n\n  return (\n    <Popover\n      open={open}\n      onClose={onCancel}\n      anchorEl={anchorEl}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'left',\n      }}\n    >\n      <SelectColumns\n        columnsRenderer={{\n          'instruction-or-object-selector': renderInstructionOrObjectSelector,\n          'object-instruction-selector': renderObjectInstructionSelector,\n        }}\n        getColumns={() => {\n          if (step === 'object-or-free-instructions') {\n            return ['instruction-or-object-selector'];\n          } else {\n            return ['object-instruction-selector'];\n          }\n        }}\n      />\n      <Line noMargin justifyContent=\"flex-end\">\n        <FlatButton\n          label={\n            isCondition ? (\n              <Trans>Paste condition(s)</Trans>\n            ) : (\n              <Trans>Paste action(s)</Trans>\n            )\n          }\n          icon={<Paste />}\n          disabled={!canPasteInstructions}\n          onClick={() => onPasteInstructions()}\n        />\n      </Line>\n    </Popover>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport { Line, Column } from '../../UI/Grid';\nimport ColorPicker from '../../UI/ColorField/ColorPicker';\nimport { type RGBColor } from '../../Utils/ColorTransformer';\nimport MiniToolbar, { MiniToolbarText } from '../../UI/MiniToolbar';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\n\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  sizeTextField: {\n    width: 90,\n  },\n};\n\ntype Props = {|\n  event: gdBaseEvent,\n  onClose: () => void,\n  onApply: () => void,\n|};\n\nconst white: RGBColor = {\n  r: 255,\n  g: 255,\n  b: 255,\n};\n\nconst black: RGBColor = {\n  r: 0,\n  g: 0,\n  b: 0,\n};\n\nexport const filterEditableWithEventTextDialog = (\n  events: Array<gdBaseEvent>\n): Array<gdBaseEvent> => {\n  return events.filter(event =>\n    [\n      'BuiltinCommonInstructions::Group',\n      'BuiltinCommonInstructions::Comment',\n    ].includes(event.getType())\n  );\n};\n\nconst EventTextDialog = (props: Props) => {\n  const { event, onClose } = props;\n\n  const [textValue, setTextValue] = React.useState<string>('');\n  const [textColor, setTextColor] = React.useState<RGBColor>(black);\n  const [backgroundColor, setBackgroundColor] = React.useState<RGBColor>(black);\n\n  const eventType = event.getType();\n\n  React.useEffect(\n    () => {\n      if (eventType === 'BuiltinCommonInstructions::Comment') {\n        const commentEvent = gd.asCommentEvent(event);\n\n        setTextColor({\n          r: commentEvent.getTextColorRed(),\n          g: commentEvent.getTextColorGreen(),\n          b: commentEvent.getTextColorBlue(),\n        });\n\n        setBackgroundColor({\n          r: commentEvent.getBackgroundColorRed(),\n          g: commentEvent.getBackgroundColorGreen(),\n          b: commentEvent.getBackgroundColorBlue(),\n        });\n\n        setTextValue(gd.asCommentEvent(event).getComment());\n      } else if (eventType === 'BuiltinCommonInstructions::Group') {\n        var groupEvent = gd.asGroupEvent(event);\n        const r = groupEvent.getBackgroundColorR(),\n          g = groupEvent.getBackgroundColorG(),\n          b = groupEvent.getBackgroundColorB();\n\n        // Text color is automatically chosen for groups.\n        setTextColor(() => {\n          return (r + g + b) / 3 > 200 ? black : white;\n        });\n\n        setBackgroundColor({\n          r: groupEvent.getBackgroundColorR(),\n          g: groupEvent.getBackgroundColorG(),\n          b: groupEvent.getBackgroundColorB(),\n        });\n\n        setTextValue(gd.asGroupEvent(event).getName());\n      } else {\n        console.error(\n          'Dialog was opened for an unsupported event type: ' + eventType\n        );\n      }\n    },\n    [event, eventType]\n  );\n\n  const onApply = React.useCallback(\n    () => {\n      if (eventType === 'BuiltinCommonInstructions::Comment') {\n        //Text value\n        gd.asCommentEvent(event).setComment(textValue);\n\n        //Text color\n        gd.asCommentEvent(event).setTextColor(\n          textColor.r,\n          textColor.g,\n          textColor.b\n        );\n        //Background color\n        gd.asCommentEvent(event).setBackgroundColor(\n          backgroundColor.r,\n          backgroundColor.g,\n          backgroundColor.b\n        );\n      } else if (eventType === 'BuiltinCommonInstructions::Group') {\n        //Text value\n        gd.asGroupEvent(event).setName(textValue);\n\n        //Text color for group not supported in Core, instead GroupEvent.js handle this\n        //Background color\n        gd.asGroupEvent(event).setBackgroundColor(\n          backgroundColor.r,\n          backgroundColor.g,\n          backgroundColor.b\n        );\n      }\n      props.onApply();\n      return;\n    },\n    [props, event, eventType, textValue, textColor, backgroundColor]\n  );\n\n  return (\n    <Dialog\n      onApply={onApply}\n      title={<Trans>Edit the event text</Trans>}\n      onRequestClose={onClose}\n      cannotBeDismissed={true}\n      open\n      noMargin\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Cancel</Trans>}\n          primary={false}\n          onClick={onClose}\n        />,\n        <FlatButton\n          key={'Apply'}\n          label={<Trans>Apply</Trans>}\n          primary\n          keyboardFocused\n          onClick={onApply}\n        />,\n      ]}\n    >\n      <Column noMargin>\n        <MiniToolbar>\n          <MiniToolbarText firstChild>\n            <Trans>Background color:</Trans>\n          </MiniToolbarText>\n          <ColorPicker\n            style={styles.sizeTextField}\n            disableAlpha\n            color={backgroundColor}\n            onChangeComplete={color => {\n              setBackgroundColor(color.rgb);\n            }}\n          />\n\n          {eventType === 'BuiltinCommonInstructions::Comment' && (\n            <React.Fragment>\n              <MiniToolbarText>\n                <Trans>Text color:</Trans>\n              </MiniToolbarText>\n              <ColorPicker\n                style={styles.sizeTextField}\n                disableAlpha\n                color={textColor}\n                onChangeComplete={color => {\n                  setTextColor(color.rgb);\n                }}\n              />\n            </React.Fragment>\n          )}\n        </MiniToolbar>\n        <Line noMargin>\n          <Column expand>\n            <Line>\n              <SemiControlledTextField\n                commitOnBlur\n                hintText={t`Enter the text to be displayed`}\n                fullWidth\n                multiline\n                rows={8}\n                rowsMax={30}\n                value={textValue}\n                onChange={value => {\n                  setTextValue(value);\n                }}\n              />\n            </Line>\n          </Column>\n        </Line>\n      </Column>\n    </Dialog>\n  );\n};\n\nexport default EventTextDialog;\n","// @flow\nconst LEFT_KEY = 37;\nconst UP_KEY = 38;\nconst RIGHT_KEY = 39;\nconst DOWN_KEY = 40;\nconst BACKSPACE_KEY = 8;\nconst DELETE_KEY = 46;\nconst EQUAL_KEY = 187;\nconst MINUS_KEY = 189;\nconst NUMPAD_ADD = 107;\nconst NUMPAD_SUBTRACT = 109;\nconst C_KEY = 67;\nconst F_KEY = 70;\nconst V_KEY = 86;\nconst X_KEY = 88;\nconst Y_KEY = 89;\nconst Z_KEY = 90;\nconst ESC_KEY = 27;\n\ntype ShortcutCallbacks = {|\n  onDelete?: () => void,\n  onMove?: (number, number) => void,\n  onCopy?: () => void,\n  onCut?: () => void,\n  onPaste?: () => void,\n  onUndo?: () => void,\n  onRedo?: () => void,\n  onSearch?: () => void,\n  onZoomOut?: KeyboardEvent => void,\n  onZoomIn?: KeyboardEvent => void,\n  onEscape?: () => void,\n|};\n\ntype ConstructorArgs = {|\n  isActive?: () => boolean,\n  shortcutCallbacks: ShortcutCallbacks,\n|};\n\n/**\n * Listen to keyboard shorcuts and call callbacks according to them.\n * Also store the state of the modifier keys (shift, ctrl, alt, meta) to know\n * if some special operations (multi selection, selection duplication) must\n * be done.\n *\n * `onKeyDown`, `onKeyUp` and other methods handling events (`onDragOver`...)\n * must be binded to the `div` element containing your component. We're not\n * using `document` to avoid issues with shortcuts being detected while a\n * component is not focused.\n */\nexport default class KeyboardShortcuts {\n  _shortcutCallbacks: ShortcutCallbacks;\n  _isActive: ?() => boolean;\n  _shiftPressed = false;\n  _ctrlPressed = false;\n  _altPressed = false;\n  _metaPressed = false;\n\n  constructor({ isActive, shortcutCallbacks }: ConstructorArgs) {\n    this._shortcutCallbacks = shortcutCallbacks;\n    this._isActive = isActive;\n  }\n\n  shouldCloneInstances() {\n    return this._isControlOrCmdPressed();\n  }\n\n  shouldMultiSelect() {\n    return this._shiftPressed;\n  }\n\n  _updateModifiersFromEvent = (evt: KeyboardEvent | DragEvent) => {\n    this._metaPressed = evt.metaKey;\n    this._altPressed = evt.altKey;\n    this._ctrlPressed = evt.ctrlKey;\n    this._shiftPressed = evt.shiftKey;\n  };\n\n  _isControlOrCmdPressed = () => {\n    // On macOS, meta key (Apple/Command key) acts as Control key on Windows/Linux.\n    return this._metaPressed || this._ctrlPressed;\n  };\n\n  onDragOver = (evt: DragEvent) => {\n    this._updateModifiersFromEvent(evt);\n  };\n\n  onKeyUp = (evt: KeyboardEvent) => {\n    this._updateModifiersFromEvent(evt);\n  };\n\n  onKeyDown = (evt: KeyboardEvent) => {\n    this._updateModifiersFromEvent(evt);\n\n    if (this._isActive && !this._isActive()) return;\n\n    const textEditorSelectors = 'textarea, input, [contenteditable=\"true\"]';\n    // $FlowFixMe\n    if (evt.target && evt.target.closest(textEditorSelectors)) {\n      return; // Something else is currently being edited.\n    }\n\n    const {\n      onDelete,\n      onMove,\n      onCopy,\n      onCut,\n      onPaste,\n      onUndo,\n      onRedo,\n      onSearch,\n      onZoomOut,\n      onZoomIn,\n      onEscape,\n    } = this._shortcutCallbacks;\n\n    if (onMove) {\n      if (evt.which === UP_KEY) {\n        this._shiftPressed ? onMove(0, -5) : onMove(0, -1);\n      } else if (evt.which === DOWN_KEY) {\n        this._shiftPressed ? onMove(0, 5) : onMove(0, 1);\n      } else if (evt.which === LEFT_KEY) {\n        this._shiftPressed ? onMove(-5, 0) : onMove(-1, 0);\n      } else if (evt.which === RIGHT_KEY) {\n        this._shiftPressed ? onMove(5, 0) : onMove(1, 0);\n      }\n    }\n    if (onDelete && (evt.which === BACKSPACE_KEY || evt.which === DELETE_KEY)) {\n      onDelete();\n    }\n    if (onCopy && this._isControlOrCmdPressed() && evt.which === C_KEY) {\n      onCopy();\n    }\n    if (onCut && this._isControlOrCmdPressed() && evt.which === X_KEY) {\n      onCut();\n    }\n    if (onPaste && this._isControlOrCmdPressed() && evt.which === V_KEY) {\n      onPaste();\n    }\n    if (onUndo && this._isControlOrCmdPressed() && evt.which === Z_KEY) {\n      onUndo();\n    }\n    if (\n      onRedo &&\n      this._isControlOrCmdPressed() &&\n      evt.shiftKey &&\n      evt.which === Z_KEY\n    ) {\n      onRedo();\n    }\n    if (onRedo && this._isControlOrCmdPressed() && evt.which === Y_KEY) {\n      onRedo();\n    }\n    if (onSearch && this._isControlOrCmdPressed() && evt.which === F_KEY) {\n      onSearch();\n    }\n    if (onEscape && evt.which === ESC_KEY) {\n      onEscape();\n    }\n\n    if (onZoomOut && this._isControlOrCmdPressed() && evt.which === MINUS_KEY) {\n      onZoomOut(evt);\n    }\n    if (onZoomOut && evt.which === NUMPAD_SUBTRACT) {\n      onZoomOut(evt);\n    }\n\n    if (onZoomIn && this._isControlOrCmdPressed() && evt.which === EQUAL_KEY) {\n      onZoomIn(evt);\n    }\n    if (onZoomIn && evt.which === NUMPAD_ADD) {\n      onZoomIn(evt);\n    }\n  };\n}\n","// @flow\nimport * as React from 'react';\nimport InlinePopover from './InlinePopover';\nimport ParameterRenderingService from './ParameterRenderingService';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../InstructionOrExpression/EventsScope.flow';\nimport { setupInstructionParameters } from '../InstructionOrExpression/SetupInstructionParameters';\nimport { getObjectParameterIndex } from '../InstructionOrExpression/EnumerateInstructions';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n\n  open: boolean,\n  onRequestClose: () => void,\n  onApply: () => void,\n  onChange: string => void,\n\n  instruction: ?gdInstruction,\n  isCondition: boolean,\n  parameterIndex: number,\n\n  anchorEl: ?any,\n\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\ntype State = {|\n  parameterMetadata: ?gdParameterMetadata,\n  instructionMetadata: ?gdInstructionMetadata,\n  ParameterComponent: ?any,\n|};\n\nexport default class InlineParameterEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    parameterMetadata: null,\n    instructionMetadata: null,\n    ParameterComponent: null,\n  };\n\n  _field: ?any;\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (newProps.open && !this.props.open) ||\n      newProps.instruction !== this.props.instruction\n    ) {\n      this._loadComponentFromInstruction(newProps);\n    }\n  }\n\n  _unload() {\n    this.setState({\n      ParameterComponent: null,\n      parameterMetadata: null,\n      instructionMetadata: null,\n    });\n  }\n\n  _loadComponentFromInstruction(props: Props) {\n    const { project, isCondition, instruction, parameterIndex } = props;\n    if (!instruction) return this._unload();\n\n    const type = instruction.getType();\n    const instructionMetadata = isCondition\n      ? gd.MetadataProvider.getConditionMetadata(\n          project.getCurrentPlatform(),\n          type\n        )\n      : gd.MetadataProvider.getActionMetadata(\n          project.getCurrentPlatform(),\n          type\n        );\n\n    if (parameterIndex >= instructionMetadata.getParametersCount())\n      return this._unload();\n\n    const parameterMetadata = instructionMetadata.getParameter(parameterIndex);\n    const ParameterComponent = ParameterRenderingService.getParameterComponent(\n      parameterMetadata.getType()\n    );\n    this.setState(\n      {\n        ParameterComponent,\n        parameterMetadata,\n        instructionMetadata,\n      },\n      () => {\n        // Give a bit of time for the popover to mount itself\n        setTimeout(() => {\n          if (this._field && this._field.focus) this._field.focus();\n        }, 10);\n      }\n    );\n  }\n\n  _onApply = () => {\n    const { instruction } = this.props;\n    const { instructionMetadata } = this.state;\n\n    // When the parameter is done being edited, ensure the instruction parameters\n    // are properly set up. For example, it's possible that the object name was\n    // changed, and so the associated behavior should be updated.\n    if (instruction && instructionMetadata) {\n      const objectParameterIndex = getObjectParameterIndex(instructionMetadata);\n      setupInstructionParameters(\n        this.props.globalObjectsContainer,\n        this.props.objectsContainer,\n        instruction,\n        instructionMetadata,\n        objectParameterIndex !== -1\n          ? instruction.getParameter(objectParameterIndex)\n          : null\n      );\n    }\n\n    this.props.onApply();\n  };\n\n  render() {\n    if (!this.state.ParameterComponent || !this.props.open) return null;\n    const instruction = this.props.instruction;\n    if (!instruction) return null;\n\n    const { ParameterComponent } = this.state;\n\n    return (\n      <InlinePopover\n        open={this.props.open}\n        anchorEl={this.props.anchorEl}\n        onRequestClose={this.props.onRequestClose}\n        onApply={this._onApply}\n      >\n        <ParameterComponent\n          instruction={instruction}\n          instructionMetadata={this.state.instructionMetadata}\n          parameterMetadata={this.state.parameterMetadata}\n          parameterIndex={this.props.parameterIndex}\n          value={instruction.getParameter(this.props.parameterIndex)}\n          onChange={this.props.onChange}\n          onRequestClose={this.props.onRequestClose}\n          onApply={this._onApply}\n          project={this.props.project}\n          scope={this.props.scope}\n          globalObjectsContainer={this.props.globalObjectsContainer}\n          objectsContainer={this.props.objectsContainer}\n          key={instruction.ptr}\n          ref={field => (this._field = field)}\n          parameterRenderingService={ParameterRenderingService}\n          isInline\n          resourceSources={this.props.resourceSources}\n          onChooseResource={this.props.onChooseResource}\n          resourceExternalEditors={this.props.resourceExternalEditors}\n        />\n      </InlinePopover>\n    );\n  }\n}\n","//@flow\nconst gd: libGDevelop = global.gd;\n\nexport const ensureSingleOnceInstructions = (\n  instructionsList: gdInstructionsList\n) => {\n  let hasEndingOnceInstruction = false;\n  let hasInvalidOnce = false;\n  for (let i = instructionsList.size() - 1; i >= 0; --i) {\n    const instruction = instructionsList.get(i);\n    if (i === instructionsList.size() - 1) {\n      if (instruction.getType() === 'BuiltinCommonInstructions::Once') {\n        hasEndingOnceInstruction = true;\n      }\n    } else {\n      if (instruction.getType() === 'BuiltinCommonInstructions::Once') {\n        instructionsList.removeAt(i);\n        hasInvalidOnce = true;\n      }\n    }\n  }\n\n  if (hasInvalidOnce && !hasEndingOnceInstruction) {\n    const onceInstruction = new gd.Instruction();\n    onceInstruction.setType('BuiltinCommonInstructions::Once');\n    instructionsList.insert(onceInstruction, instructionsList.size());\n    onceInstruction.delete();\n  }\n\n  return hasInvalidOnce;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport Text from '../UI/Text';\n\nexport type EventsContextResult = {|\n  objectsNames: Array<string>,\n  objectOrGroupNames: Array<string>,\n  objectOrGroupBehaviorNames: {\n    [string]: Array<string>,\n  },\n|};\n\n// Store in a EventsContextResult the content of a gd.EventsContext.\n// In theory not necessary, but easier than storing,\n// passing around, and properly delete a gd.EventsContext.\nexport const toEventsContextResult = (\n  eventsContext: gdEventsContext\n): EventsContextResult => {\n  const objectsNames = eventsContext\n    .getObjectNames()\n    .toNewVectorString()\n    .toJSArray();\n  const objectOrGroupNames = eventsContext\n    .getReferencedObjectOrGroupNames()\n    .toNewVectorString()\n    .toJSArray();\n\n  const objectOrGroupBehaviorNames = {};\n  objectOrGroupNames.forEach(objectOrGroupName => {\n    const behaviorNames = eventsContext\n      .getBehaviorNamesOfObjectOrGroup(objectOrGroupName)\n      .toNewVectorString()\n      .toJSArray();\n\n    if (behaviorNames.length) {\n      objectOrGroupBehaviorNames[objectOrGroupName] = behaviorNames;\n    }\n  });\n\n  return {\n    objectsNames,\n    objectOrGroupNames,\n    objectOrGroupBehaviorNames,\n  };\n};\n\ntype Props = {|\n  onClose: () => void,\n  eventsContextResult: EventsContextResult,\n|};\n\nexport default class EventsContextAnalyzerDialog extends React.Component<\n  Props,\n  {}\n> {\n  render() {\n    const { onClose, eventsContextResult } = this.props;\n    const actions = [\n      <FlatButton\n        key=\"close\"\n        label={<Trans>Close</Trans>}\n        primary={true}\n        onClick={this.props.onClose}\n      />,\n    ];\n\n    return (\n      <Dialog\n        actions={actions}\n        cannotBeDismissed={false}\n        open\n        onRequestClose={onClose}\n      >\n        <Text>\n          <Trans>\n            Objects or groups being directly referenced in the events:{' '}\n            {eventsContextResult.objectOrGroupNames.join(', ')}\n          </Trans>\n        </Text>\n        <Text>\n          <Trans>\n            All objects potentially used in events:{' '}\n            {eventsContextResult.objectsNames.join(', ')}\n          </Trans>\n        </Text>\n        <Text>\n          <Trans>All behaviors being directly referenced in the events:</Trans>{' '}\n          {Object.keys(eventsContextResult.objectOrGroupBehaviorNames).map(\n            objectOrGroupName => {\n              return (\n                <Trans key={objectOrGroupName}>\n                  Behaviors of {objectOrGroupName}:{' '}\n                  {eventsContextResult.objectOrGroupBehaviorNames[\n                    objectOrGroupName\n                  ].join(', ')}\n                  ;{' '}\n                </Trans>\n              );\n            }\n          )}\n        </Text>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans, t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Background from '../UI/Background';\nimport TextField from '../UI/TextField';\nimport { Line, Spacer } from '../UI/Grid';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport IconButton from '../UI/IconButton';\nimport FlatButton from '../UI/FlatButton';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport Text from '../UI/Text';\nimport {\n  type SearchInEventsInputs,\n  type ReplaceInEventsInputs,\n} from './EventsSearcher';\nimport RaisedButton from '../UI/RaisedButton';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport {\n  shouldCloseOrCancel,\n  shouldValidate,\n} from '../UI/KeyboardShortcuts/InteractionKeys';\nimport { Tabs, Tab } from '../UI/Tabs';\n\ntype Props = {|\n  onSearchInEvents: SearchInEventsInputs => void,\n  onReplaceInEvents: ReplaceInEventsInputs => void,\n  onCloseSearchPanel: () => void,\n  resultsCount: ?number,\n  hasEventSelected: boolean,\n  onGoToPreviousSearchResult: () => ?gdBaseEvent,\n  onGoToNextSearchResult: () => ?gdBaseEvent,\n  searchFocusOffset: ?number,\n|};\n\nexport type SearchPanelInterface = {|\n  focus: () => void,\n  markSearchResultsDirty: () => void,\n|};\n\nconst SearchPanel = (\n  {\n    onSearchInEvents,\n    onReplaceInEvents,\n    onCloseSearchPanel,\n    resultsCount,\n    hasEventSelected,\n    onGoToPreviousSearchResult,\n    onGoToNextSearchResult,\n    searchFocusOffset,\n  }: Props,\n  ref\n) => {\n  const searchTextField = React.useRef<?TextField>(null);\n\n  const focusSearchField = React.useCallback((): void => {\n    if (searchTextField.current) searchTextField.current.focus();\n  }, []);\n\n  const markSearchResultsDirty = React.useCallback((): void => {\n    setSearchResultsDirty(true);\n  }, []);\n\n  React.useImperativeHandle(ref, () => ({\n    focus: focusSearchField,\n    markSearchResultsDirty,\n  }));\n\n  const [searchText, setSearchText] = React.useState<string>('');\n  const [replaceText, setReplaceText] = React.useState<string>('');\n  const [matchCase, setMatchCase] = React.useState<boolean>(false);\n  const [searchInActions, setSearchInActions] = React.useState<boolean>(true);\n  const [searchInConditions, setSearchInConditions] = React.useState<boolean>(\n    true\n  );\n  const [\n    searchInEventStrings,\n    setSearchInEventStrings,\n  ] = React.useState<boolean>(true);\n  // eslint-disable-next-line no-unused-vars\n  const [searchInSelection, setSearchInSelection] = React.useState<boolean>(\n    false\n  );\n  const [searchResultsDirty, setSearchResultsDirty] = React.useState<boolean>(\n    false\n  );\n  const [currentTab, setCurrentTab] = React.useState<\n    'search-and-replace' | 'search-in-event-sentences'\n  >('search-and-replace');\n\n  React.useEffect(\n    () => {\n      setSearchResultsDirty(true);\n    },\n    [\n      searchText,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n      matchCase,\n    ]\n  );\n\n  React.useEffect(focusSearchField, [currentTab]);\n  React.useEffect(markSearchResultsDirty, [currentTab]);\n\n  const launchSearch = () => {\n    onSearchInEvents({\n      searchInSelection,\n      searchText,\n      matchCase,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n      searchInEventSentences: !isSearchAndReplaceTab(),\n    });\n  };\n\n  const launchReplace = () => {\n    launchSearch();\n\n    onReplaceInEvents({\n      searchInSelection,\n      searchText,\n      replaceText,\n      matchCase,\n      searchInActions,\n      searchInConditions,\n      searchInEventStrings,\n    });\n  };\n\n  const launchSearchIfResultsDirty = () => {\n    if (searchResultsDirty) {\n      launchSearch();\n      setSearchResultsDirty(false);\n    }\n  };\n\n  const isSearchAndReplaceTab = React.useCallback(\n    (): boolean => currentTab === 'search-and-replace',\n    [currentTab]\n  );\n\n  return (\n    <Background noFullHeight noExpand>\n      <Tabs value={currentTab} onChange={setCurrentTab}>\n        <Tab\n          label={<Trans>Search and replace in parameters</Trans>}\n          value=\"search-and-replace\"\n        />\n        <Tab\n          label={<Trans>Search in event sentences</Trans>}\n          value=\"search-in-event-sentences\"\n        />\n      </Tabs>\n      <Line>\n        <ColumnStackLayout expand>\n          <Line alignItems=\"baseline\" noMargin>\n            <TextField\n              ref={searchTextField}\n              type=\"search\"\n              margin=\"dense\"\n              hintText={\n                isSearchAndReplaceTab()\n                  ? t`Text to search in parameters`\n                  : t`Text to search in event sentences`\n              }\n              onChange={(e, searchText) => {\n                setSearchText(searchText);\n              }}\n              onKeyPress={event => {\n                if (shouldValidate(event)) {\n                  if (!searchResultsDirty) {\n                    onGoToNextSearchResult();\n                  } else {\n                    launchSearchIfResultsDirty();\n                  }\n                }\n              }}\n              onKeyUp={event => {\n                if (shouldCloseOrCancel(event)) {\n                  onCloseSearchPanel();\n                }\n              }}\n              value={searchText}\n              fullWidth\n            />\n            <Spacer />\n            <RaisedButton\n              disabled={!searchText}\n              primary\n              label={<Trans>Search</Trans>}\n              onClick={() => {\n                if (!searchResultsDirty) {\n                  onGoToNextSearchResult();\n                } else {\n                  launchSearchIfResultsDirty();\n                }\n              }}\n            />\n          </Line>\n          {isSearchAndReplaceTab() && (\n            <Line alignItems=\"baseline\" noMargin>\n              <TextField\n                type=\"search\"\n                margin=\"dense\"\n                hintText={t`Text to replace in parameters`}\n                onChange={(e, replaceText) => {\n                  setReplaceText(replaceText);\n                }}\n                onKeyPress={event => {\n                  if (shouldValidate(event)) {\n                    launchReplace();\n                  }\n                }}\n                onKeyUp={event => {\n                  if (shouldCloseOrCancel(event)) {\n                    onCloseSearchPanel();\n                  }\n                }}\n                value={replaceText}\n                fullWidth\n              />\n              <Spacer />\n              <RaisedButton\n                disabled={\n                  !replaceText ||\n                  !searchText ||\n                  (!hasEventSelected && searchInSelection)\n                }\n                label={<Trans>Replace</Trans>}\n                onClick={launchReplace}\n              />\n            </Line>\n          )}\n          <Line noMargin alignItems=\"center\" justifyContent=\"space-between\">\n            <Line noMargin alignItems=\"center\">\n              <InlineCheckbox\n                label={<Trans>Case insensitive</Trans>}\n                checked={!matchCase}\n                onCheck={(e, checked) => {\n                  setMatchCase(!checked);\n                }}\n              />\n              <Text>\n                <Trans>Search in:</Trans>\n              </Text>\n              <Spacer />\n              <InlineCheckbox\n                label={<Trans>Conditions</Trans>}\n                checked={searchInConditions}\n                onCheck={(e, checked) => {\n                  setSearchInConditions(checked);\n                }}\n              />\n              <InlineCheckbox\n                label={<Trans>Actions</Trans>}\n                checked={searchInActions}\n                onCheck={(e, checked) => {\n                  setSearchInActions(checked);\n                }}\n              />\n              <InlineCheckbox\n                label={<Trans>Texts</Trans>}\n                checked={searchInEventStrings}\n                onCheck={(e, checked) => {\n                  setSearchInEventStrings(checked);\n                }}\n              />\n              {/* <InlineCheckbox //TODO: Implement search/replace in selection\n                label={<Trans>Replace in selection</Trans>}\n                checked={searchInSelection}\n                onCheck={(e, checked) =>\n                  this.setState({ searchInSelection: checked })}\n              /> */}\n            </Line>\n            <Line noMargin alignItems=\"center\">\n              <Text>\n                {resultsCount === null || resultsCount === undefined ? (\n                  ''\n                ) : resultsCount === 0 ? (\n                  <Trans>No results</Trans>\n                ) : searchFocusOffset === null ||\n                  searchFocusOffset === undefined ? (\n                  <Trans>{resultsCount} results</Trans>\n                ) : (\n                  <Trans>\n                    Showing {searchFocusOffset + 1} of {resultsCount}\n                  </Trans>\n                )}\n              </Text>\n              <IconButton\n                disabled={!resultsCount}\n                onClick={() => {\n                  onGoToPreviousSearchResult();\n                }}\n              >\n                <ChevronLeft />\n              </IconButton>\n              <IconButton\n                disabled={!resultsCount}\n                onClick={() => {\n                  onGoToNextSearchResult();\n                }}\n              >\n                <ChevronRight />\n              </IconButton>\n              <FlatButton\n                key=\"close\"\n                label={<Trans>Close</Trans>}\n                primary={false}\n                onClick={() => {\n                  onCloseSearchPanel();\n                }}\n              />\n            </Line>\n          </Line>\n        </ColumnStackLayout>\n      </Line>\n    </Background>\n  );\n};\n\nexport default React.forwardRef<Props, SearchPanelInterface>(SearchPanel);\n","// @flow\nimport * as React from 'react';\nimport { type SelectionState } from './SelectionHandler';\nimport { mapFor } from '../Utils/MapFor';\nimport uniqBy from 'lodash/uniqBy';\nconst gd: libGDevelop = global.gd;\n\nexport type SearchInEventsInputs = {|\n  searchInSelection: boolean,\n  searchText: string,\n  matchCase: boolean,\n  searchInConditions: boolean,\n  searchInActions: boolean,\n  searchInEventStrings: boolean,\n  searchInEventSentences: boolean,\n|};\n\nexport type ReplaceInEventsInputs = {|\n  searchInSelection: boolean,\n  searchText: string,\n  replaceText: ?string,\n  matchCase: boolean,\n  searchInConditions: boolean,\n  searchInActions: boolean,\n  searchInEventStrings: boolean,\n|};\n\ntype State = {|\n  eventsSearchResults: ?gdVectorEventsSearchResult,\n  searchFocusOffset: ?number,\n|};\n\ntype Props = {|\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  events: gdEventsList,\n  selection: SelectionState,\n  project: gdProject,\n  children: (props: {|\n    eventsSearchResultEvents: ?Array<gdBaseEvent>,\n    searchFocusOffset: ?number,\n    searchInEvents: (SearchInEventsInputs, cb: () => void) => void,\n    replaceInEvents: ReplaceInEventsInputs => void,\n    goToNextSearchResult: () => ?gdBaseEvent,\n    goToPreviousSearchResult: () => ?gdBaseEvent,\n    clearSearchResults: () => void,\n  |}) => React.Node,\n|};\n\n/**\n * Component allowing to do search in events and pass the results\n * to its children components, as well as methods to browse the results.\n */\nexport default class EventsSearcher extends React.Component<Props, State> {\n  state = {\n    eventsSearchResults: null, // The list of results\n    searchFocusOffset: null,\n  };\n\n  // The list containing the raw events results. Should be derived from this.state.eventsSearchResults using\n  // this._updateListOfResultEvents before being used.\n  _resultEvents: ?Array<gdBaseEvent> = null;\n\n  componentWillUnmount() {\n    this.reset();\n  }\n\n  reset = () => {\n    if (this.state.eventsSearchResults) this.state.eventsSearchResults.delete();\n\n    this._resultEvents = null;\n    this.setState({\n      eventsSearchResults: null,\n      searchFocusOffset: null,\n    });\n  };\n\n  _doReplaceInEvents = ({\n    searchInSelection,\n    searchText,\n    replaceText,\n    matchCase,\n    searchInConditions,\n    searchInActions,\n    searchInEventStrings,\n  }: ReplaceInEventsInputs) => {\n    const { globalObjectsContainer, objectsContainer, events } = this.props;\n\n    if (searchInSelection) {\n      // Replace in selection is a bit tricky to implement as it requires to have a list\n      // of events (gd.EventsList) pointing to the same events. Need some workaround/helper\n      // function to be done in C++.\n      console.error('Replace in selection is not implemented yet');\n    }\n    if (!replaceText) return;\n\n    gd.EventsRefactorer.replaceStringInEvents(\n      globalObjectsContainer,\n      objectsContainer,\n      events,\n      searchText,\n      replaceText,\n      matchCase,\n      searchInConditions,\n      searchInActions\n      // TODO: add capability to replace in event strings\n      // searchInEventStrings\n    );\n  };\n\n  _doSearchInEvents = (\n    {\n      searchInSelection,\n      searchText,\n      matchCase,\n      searchInConditions,\n      searchInActions,\n      searchInEventStrings,\n      searchInEventSentences,\n    }: SearchInEventsInputs,\n    cb: () => void\n  ) => {\n    const { events } = this.props;\n\n    if (searchInSelection) {\n      // Search in selection is a bit tricky to implement as it requires to have a list\n      // of events (gd.EventsList) pointing to the same events. Need some workaround/helper\n      // function to be done in C++.\n      console.error('Search in selection is not implemented yet');\n    }\n\n    const newEventsSearchResults = gd.EventsRefactorer.searchInEvents(\n      this.props.project.getCurrentPlatform(),\n      events,\n      searchText,\n      matchCase,\n      searchInConditions,\n      searchInActions,\n      searchInEventStrings,\n      searchInEventSentences\n    );\n\n    if (this.state.eventsSearchResults) {\n      this.state.eventsSearchResults.delete();\n    }\n    this.setState(\n      {\n        eventsSearchResults: newEventsSearchResults.clone(),\n        searchFocusOffset: null,\n      },\n      () => {\n        this._updateListOfResultEvents();\n        cb();\n      }\n    );\n  };\n\n  _updateListOfResultEvents = () => {\n    const { eventsSearchResults } = this.state;\n    if (!eventsSearchResults) {\n      this._resultEvents = null;\n      return;\n    }\n\n    const resultEventsWithDuplicates = mapFor(\n      0,\n      eventsSearchResults.size(),\n      i => {\n        const eventsSearchResult = eventsSearchResults.at(i);\n        return eventsSearchResult.isEventValid()\n          ? eventsSearchResult.getEvent()\n          : null;\n      }\n    ).filter(Boolean);\n\n    // Store a list of unique events, because browsing for results in the events\n    // tree is made event by event.\n    this._resultEvents = uniqBy(resultEventsWithDuplicates, event => event.ptr);\n  };\n\n  _goToSearchResults = (step: number): ?gdBaseEvent => {\n    this._updateListOfResultEvents();\n    if (!this._resultEvents || this._resultEvents.length === 0) {\n      this.setState({ searchFocusOffset: null });\n      return null;\n    }\n\n    let newSearchFocusOffset =\n      this.state.searchFocusOffset === null\n        ? 0\n        : ((this.state.searchFocusOffset || 0) + step) %\n          this._resultEvents.length;\n    if (newSearchFocusOffset < 0)\n      newSearchFocusOffset += this._resultEvents.length;\n\n    const event = this._resultEvents[newSearchFocusOffset];\n    setTimeout(\n      // Change the offset on next tick to give a chance to children to unfold events before focusing it.\n      () => this.setState({ searchFocusOffset: newSearchFocusOffset }),\n      0\n    );\n    return event;\n  };\n\n  _goToPreviousSearchResult = (): ?gdBaseEvent => {\n    return this._goToSearchResults(-1);\n  };\n\n  _goToNextSearchResult = (): ?gdBaseEvent => {\n    return this._goToSearchResults(+1);\n  };\n\n  render() {\n    return this.props.children({\n      eventsSearchResultEvents: this._resultEvents,\n      searchFocusOffset: this.state.searchFocusOffset,\n      searchInEvents: this._doSearchInEvents,\n      replaceInEvents: this._doReplaceInEvents,\n      goToNextSearchResult: this._goToNextSearchResult,\n      goToPreviousSearchResult: this._goToPreviousSearchResult,\n      clearSearchResults: this.reset,\n    });\n  }\n}\n","// @flow\nconst gd: libGDevelop = global.gd;\n\nexport const containsSubInstructions = (\n  instruction: gdInstruction,\n  instructionsList: gdInstructionsList\n) => {\n  const subInstructionsList = instruction.getSubInstructions();\n  if (gd.compare(subInstructionsList, instructionsList)) return true;\n\n  for (let i = 0; i < subInstructionsList.size(); ++i) {\n    const subInstruction = subInstructionsList.get(i);\n    if (containsSubInstructions(subInstruction, instructionsList)) return true;\n  }\n\n  return false;\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport { enumerateEventsFunctionsExtensions } from '../../ProjectManager/EnumerateProjectItems';\nimport { Line, Column, Spacer } from '../../UI/Grid';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport {\n  setupFunctionFromEvents,\n  canCreateEventsFunction,\n  functionHasLotsOfParameters,\n  validateExtensionNameUniqueness,\n  validateExtensionName,\n  validateEventsFunctionNameUniqueness,\n  validateEventsFunctionName,\n} from '.';\nimport AlertMessage from '../../UI/AlertMessage';\nimport DismissableAlertMessage from '../../UI/DismissableAlertMessage';\nimport EventsFunctionParametersEditor from '../../EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionParametersEditor';\nimport EventsFunctionPropertiesEditor from '../../EventsFunctionsExtensionEditor/EventsFunctionConfigurationEditor/EventsFunctionPropertiesEditor';\nimport HelpButton from '../../UI/HelpButton';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  serializedEvents: Object,\n  onClose: () => void,\n  onCreate: (extensionName: string, eventsFunction: gdEventsFunction) => void,\n|};\n\ntype State = {|\n  eventsFunction: ?gdEventsFunction,\n  extensionName: string,\n  createNewExtension: boolean,\n|};\n\nconst CREATE_NEW_EXTENSION_PLACEHOLDER = '<create a new extension>';\n\nexport default class EventsFunctionExtractorDialog extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    eventsFunction: null,\n    extensionName: '',\n    createNewExtension: false,\n  };\n\n  componentDidMount() {\n    const {\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      serializedEvents,\n    } = this.props;\n\n    // Set up the function\n    const eventsFunction = new gd.EventsFunction();\n    setupFunctionFromEvents({\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      serializedEvents,\n      eventsFunction,\n    });\n    this.setState({\n      eventsFunction,\n    });\n\n    // Prepopulate the form\n    const eventsFunctionsExtensions = enumerateEventsFunctionsExtensions(\n      project\n    );\n    if (eventsFunctionsExtensions.length === 0) {\n      this.setState({\n        createNewExtension: true,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    const { eventsFunction } = this.state;\n    if (eventsFunction) eventsFunction.delete();\n  }\n\n  render() {\n    const { project, onClose, onCreate } = this.props;\n    const { eventsFunction, extensionName, createNewExtension } = this.state;\n    if (!eventsFunction) return null;\n\n    const eventsFunctionsExtensions = enumerateEventsFunctionsExtensions(\n      project\n    );\n    const hasLotsOfParameters = functionHasLotsOfParameters(eventsFunction);\n\n    const onApply = () => {\n      if (!canCreateEventsFunction(project, extensionName, eventsFunction)) {\n        onClose();\n      } else {\n        onCreate(extensionName, eventsFunction);\n      }\n    };\n\n    return (\n      <Dialog\n        onApply={onApply}\n        title={<Trans>Extract the events in a function</Trans>}\n        secondaryActions={\n          <HelpButton helpPagePath=\"/events/functions/extract-events\" />\n        }\n        actions={[\n          <FlatButton\n            key=\"cancel\"\n            label={<Trans>Cancel</Trans>}\n            onClick={onClose}\n          />,\n          <FlatButton\n            key=\"create\"\n            label={<Trans>Create</Trans>}\n            primary\n            disabled={\n              !canCreateEventsFunction(project, extensionName, eventsFunction)\n            }\n            onClick={onApply}\n          />,\n        ]}\n        cannotBeDismissed={true}\n        open\n        onRequestClose={onClose}\n        noMargin\n      >\n        <Column noMargin>\n          <Column>\n            <DismissableAlertMessage\n              identifier=\"function-extractor-explanation\"\n              kind=\"info\"\n            >\n              After creating a function, it will be usable in the events sheet.\n              Functions are grouped by extensions. Choose, or enter the name of\n              a new extension, and a function name, then configure the function\n              and its parameters.\n            </DismissableAlertMessage>\n            <ResponsiveLineStackLayout noMargin expand>\n              <SelectField\n                floatingLabelText={\n                  <Trans>Extension (storing the function)</Trans>\n                }\n                value={\n                  createNewExtension\n                    ? CREATE_NEW_EXTENSION_PLACEHOLDER\n                    : extensionName\n                }\n                onChange={(e, i, extensionName) => {\n                  if (extensionName === CREATE_NEW_EXTENSION_PLACEHOLDER) {\n                    this.setState({\n                      createNewExtension: true,\n                      extensionName: '',\n                    });\n                  } else {\n                    this.setState({\n                      createNewExtension: false,\n                      extensionName,\n                    });\n                  }\n                }}\n                fullWidth\n              >\n                {eventsFunctionsExtensions.map(eventsFunctionsExtension => (\n                  <SelectOption\n                    key={eventsFunctionsExtension.getName()}\n                    value={eventsFunctionsExtension.getName()}\n                    primaryText={\n                      eventsFunctionsExtension.getFullName() ||\n                      eventsFunctionsExtension.getName()\n                    }\n                  />\n                ))}\n                <SelectOption\n                  value={CREATE_NEW_EXTENSION_PLACEHOLDER}\n                  primaryText={t`<Create a New Extension>`}\n                />\n              </SelectField>\n              {createNewExtension ? (\n                <SemiControlledTextField\n                  commitOnBlur\n                  value={extensionName}\n                  floatingLabelText={<Trans>New extension name</Trans>}\n                  onChange={(extensionName: string) =>\n                    this.setState({ extensionName })\n                  }\n                  fullWidth\n                  errorText={\n                    !validateExtensionNameUniqueness(project, extensionName) ? (\n                      <Trans>\n                        This name is already taken by another extension.\n                      </Trans>\n                    ) : !validateExtensionName(extensionName) ? (\n                      <Trans>\n                        This name is not valid. Only use alphanumeric characters\n                        (0-9, a-z) and underscores.\n                      </Trans>\n                    ) : (\n                      undefined\n                    )\n                  }\n                />\n              ) : null}\n            </ResponsiveLineStackLayout>\n            <Line>\n              <SemiControlledTextField\n                commitOnBlur\n                value={eventsFunction.getName()}\n                floatingLabelText={<Trans>Function name</Trans>}\n                onChange={(functionName: string) => {\n                  eventsFunction.setName(functionName);\n                  this.forceUpdate();\n                }}\n                fullWidth\n                errorText={\n                  !validateEventsFunctionNameUniqueness(\n                    project,\n                    extensionName,\n                    eventsFunction\n                  ) ? (\n                    <Trans>\n                      This name is already taken by another function. Choose\n                      another name.\n                    </Trans>\n                  ) : !validateEventsFunctionName(eventsFunction.getName()) ? (\n                    <Trans>\n                      This name is not valid. Only use alphanumeric characters\n                      (0-9, a-z) and underscores.\n                    </Trans>\n                  ) : (\n                    undefined\n                  )\n                }\n              />\n            </Line>\n            {hasLotsOfParameters ? (\n              <Line>\n                <AlertMessage kind=\"warning\">\n                  <Trans>\n                    This function will have a lot of parameters. Consider\n                    creating groups or functions for a smaller set of objects so\n                    that the function is easier to reuse.\n                  </Trans>\n                </AlertMessage>\n              </Line>\n            ) : null}\n          </Column>\n          <EventsFunctionPropertiesEditor\n            eventsFunction={eventsFunction}\n            eventsBasedBehavior={null}\n            onConfigurationUpdated={() => {\n              // Force re-running logic to see if Create button is disabled.\n              this.forceUpdate();\n            }}\n            freezeEventsFunctionType\n          />\n          <Spacer />\n          <EventsFunctionParametersEditor\n            project={project}\n            eventsFunction={eventsFunction}\n            eventsBasedBehavior={null}\n            onParametersUpdated={() => {\n              // Force the dialog to adapt its size\n              this.forceUpdate();\n            }}\n            freezeParameters\n          />\n        </Column>\n      </Dialog>\n    );\n  }\n}\n","// @flow\n\nexport default function getObjectGroupByName(\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  objectGroupName: string\n): ?gdObjectGroup {\n  if (objectsContainer.getObjectGroups().has(objectGroupName)) {\n    return objectsContainer.getObjectGroups().get(objectGroupName);\n  } else if (globalObjectsContainer.getObjectGroups().has(objectGroupName)) {\n    return globalObjectsContainer.getObjectGroups().get(objectGroupName);\n  }\n\n  return null;\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport EventsSheet, { type EventsSheetInterface } from '../EventsSheet';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport EventsFunctionConfigurationEditor from './EventsFunctionConfigurationEditor';\nimport EventsFunctionsList, {\n  type EventsFunctionCreationParameters,\n} from '../EventsFunctionsList';\nimport EventsBasedBehaviorsList from '../EventsBasedBehaviorsList';\nimport Background from '../UI/Background';\nimport OptionsEditorDialog from './OptionsEditorDialog';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport EventsBasedBehaviorEditorDialog from '../EventsBasedBehaviorEditor/EventsBasedBehaviorEditorDialog';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport BehaviorMethodSelectorDialog from './BehaviorMethodSelectorDialog';\nimport ExtensionFunctionSelectorDialog from './ExtensionFunctionSelectorDialog';\nimport {\n  isBehaviorLifecycleEventsFunction,\n  isExtensionLifecycleEventsFunction,\n} from '../EventsFunctionsExtensionsLoader/MetadataDeclarationHelpers';\nimport FlatButton from '../UI/FlatButton';\nimport { Line } from '../UI/Grid';\nimport Divider from '@material-ui/core/Divider';\nimport { ResponsiveWindowMeasurer } from '../UI/Reponsive/ResponsiveWindowMeasurer';\nimport EditorNavigator, {\n  type EditorNavigatorInterface,\n} from '../UI/EditorMosaic/EditorNavigator';\nimport ChooseEventsFunctionsExtensionEditor from './ChooseEventsFunctionsExtensionEditor';\nimport Check from '@material-ui/icons/Check';\nimport Tune from '@material-ui/icons/Tune';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport { getParametersIndexOffset } from '../EventsFunctionsExtensionsLoader';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  setToolbar: (?React.Node) => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  onCreateEventsFunction: (\n    extensionName: string,\n    eventsFunction: gdEventsFunction\n  ) => void,\n  onBehaviorEdited?: () => Promise<void>,\n  initiallyFocusedFunctionName: ?string,\n  initiallyFocusedBehaviorName: ?string,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\ntype State = {|\n  selectedEventsFunction: ?gdEventsFunction,\n  selectedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  editedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  editOptionsDialogOpen: boolean,\n  behaviorMethodSelectorDialogOpen: boolean,\n  extensionFunctionSelectorDialogOpen: boolean,\n  onAddEventsFunctionCb: ?(\n    parameters: ?EventsFunctionCreationParameters\n  ) => void,\n|};\n\nconst initialMosaicEditorNodes = {\n  direction: 'row',\n  first: {\n    direction: 'column',\n    first: 'free-functions-list',\n    second: 'behaviors-list',\n    splitPercentage: 50,\n  },\n  second: {\n    direction: 'column',\n    first: 'parameters',\n    second: 'events-sheet',\n    splitPercentage: 25,\n  },\n  splitPercentage: 25,\n};\n\nexport default class EventsFunctionsExtensionEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    selectedEventsFunction: null,\n    selectedEventsBasedBehavior: null,\n    editedEventsBasedBehavior: null,\n    editOptionsDialogOpen: false,\n    behaviorMethodSelectorDialogOpen: false,\n    extensionFunctionSelectorDialogOpen: false,\n    onAddEventsFunctionCb: null,\n  };\n  editor: ?EventsSheetInterface;\n  _editorMosaic: ?EditorMosaic;\n  _editorNavigator: ?EditorNavigatorInterface;\n  _globalObjectsContainer: ?gdObjectsContainer;\n  _objectsContainer: ?gdObjectsContainer;\n\n  componentDidMount() {\n    if (this.props.initiallyFocusedFunctionName) {\n      this.selectEventsFunctionByName(\n        this.props.initiallyFocusedFunctionName,\n        this.props.initiallyFocusedBehaviorName\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._globalObjectsContainer) this._globalObjectsContainer.delete();\n    if (this._objectsContainer) this._objectsContainer.delete();\n  }\n\n  _loadEventsFunctionFrom = (\n    project: gdProject,\n    eventsFunction: gdEventsFunction,\n    eventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => {\n    // Create an empty \"context\" of objects.\n    // Avoid recreating containers if they were already created, so that\n    // we keep the same objects in memory and avoid remounting components\n    // (like ObjectGroupsList) because objects \"ptr\" changed.\n    if (!this._globalObjectsContainer) {\n      this._globalObjectsContainer = new gd.ObjectsContainer();\n    }\n\n    if (!this._objectsContainer) {\n      this._objectsContainer = new gd.ObjectsContainer();\n    }\n\n    // Initialize this \"context\" of objects with the function\n    // (as done during code generation).\n    if (eventsBasedBehavior) {\n      gd.EventsFunctionTools.behaviorEventsFunctionToObjectsContainer(\n        project,\n        eventsBasedBehavior,\n        eventsFunction,\n        this._globalObjectsContainer,\n        this._objectsContainer\n      );\n    } else {\n      gd.EventsFunctionTools.freeEventsFunctionToObjectsContainer(\n        project,\n        eventsFunction,\n        this._globalObjectsContainer,\n        this._objectsContainer\n      );\n    }\n  };\n\n  updateToolbar = () => {\n    if (this.editor) {\n      this.editor.updateToolbar();\n    } else {\n      this.props.setToolbar(<div />);\n    }\n  };\n\n  selectEventsFunctionByName = (\n    functionName: string,\n    behaviorName: ?string\n  ) => {\n    const { eventsFunctionsExtension } = this.props;\n\n    if (behaviorName) {\n      // Behavior function\n      const eventsBasedBehaviors = eventsFunctionsExtension.getEventsBasedBehaviors();\n      if (eventsBasedBehaviors.has(behaviorName)) {\n        const eventsBasedBehavior = eventsBasedBehaviors.get(behaviorName);\n        const behaviorEventsFunctions = eventsBasedBehavior.getEventsFunctions();\n        if (behaviorEventsFunctions.hasEventsFunctionNamed(functionName)) {\n          this._selectEventsFunction(\n            behaviorEventsFunctions.getEventsFunction(functionName),\n            eventsBasedBehavior\n          );\n        }\n      }\n    } else {\n      // Free function\n      if (eventsFunctionsExtension.hasEventsFunctionNamed(functionName)) {\n        this._selectEventsFunction(\n          eventsFunctionsExtension.getEventsFunction(functionName),\n          null\n        );\n      }\n    }\n  };\n\n  _selectEventsFunction = (\n    selectedEventsFunction: ?gdEventsFunction,\n    selectedEventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => {\n    if (!selectedEventsFunction) {\n      this.setState(\n        {\n          selectedEventsFunction: null,\n          selectedEventsBasedBehavior,\n        },\n        () => this.updateToolbar()\n      );\n      return;\n    }\n\n    this._loadEventsFunctionFrom(\n      this.props.project,\n      selectedEventsFunction,\n      selectedEventsBasedBehavior\n    );\n    this.setState(\n      {\n        selectedEventsFunction,\n        selectedEventsBasedBehavior,\n      },\n      () => {\n        this.updateToolbar();\n\n        if (this._editorNavigator) {\n          // Open the parameters of the function if it's a new, empty function.\n          if (\n            selectedEventsFunction &&\n            !selectedEventsFunction.getEvents().getEventsCount()\n          ) {\n            this._editorNavigator.openEditor('parameters');\n          } else {\n            this._editorNavigator.openEditor('events-sheet');\n          }\n        }\n      }\n    );\n  };\n\n  _makeRenameFreeEventsFunction = (i18n: I18nType) => (\n    eventsFunction: gdEventsFunction,\n    newName: string,\n    done: boolean => void\n  ) => {\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        ),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n    if (isExtensionLifecycleEventsFunction(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is reserved for a lifecycle function of the extension. Choose another name for your function.`\n        ),\n        { delayToNextTick: true }\n      );\n      return done(false);\n    }\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameEventsFunction(\n      project,\n      eventsFunctionsExtension,\n      eventsFunction.getName(),\n      newName\n    );\n\n    done(true);\n  };\n\n  _makeRenameBehaviorEventsFunction = (i18n: I18nType) => (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction,\n    newName: string,\n    done: boolean => void\n  ) => {\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        ),\n        { delayToNextTick: true }\n      );\n      return done(false);\n    }\n    if (isBehaviorLifecycleEventsFunction(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is reserved for a lifecycle method of the behavior. Choose another name for your custom function.`\n        ),\n        { delayToNextTick: true }\n      );\n      return done(false);\n    }\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameBehaviorEventsFunction(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior,\n      eventsFunction.getName(),\n      newName\n    );\n\n    done(true);\n  };\n\n  _makeMoveFreeEventsParameter = (i18n: I18nType) => (\n    eventsFunction: gdEventsFunction,\n    oldIndex: number,\n    newIndex: number,\n    done: boolean => void\n  ) => {\n    // Don't ask for user confirmation as this change is easy to revert.\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.moveEventsFunctionParameter(\n      project,\n      eventsFunctionsExtension,\n      eventsFunction.getName(),\n      oldIndex + getParametersIndexOffset(false),\n      newIndex + getParametersIndexOffset(false)\n    );\n\n    done(true);\n  };\n\n  _makeMoveBehaviorEventsParameter = (i18n: I18nType) => (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction,\n    oldIndex: number,\n    newIndex: number,\n    done: boolean => void\n  ) => {\n    // Don't ask for user confirmation as this change is easy to revert.\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.moveBehaviorEventsFunctionParameter(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior,\n      eventsFunction.getName(),\n      oldIndex,\n      newIndex\n    );\n\n    done(true);\n  };\n\n  _onDeleteEventsFunction = (\n    eventsFunction: gdEventsFunction,\n    cb: boolean => void\n  ) => {\n    if (\n      this.state.selectedEventsFunction &&\n      gd.compare(eventsFunction, this.state.selectedEventsFunction)\n    ) {\n      this._selectEventsFunction(null, this.state.selectedEventsBasedBehavior);\n    }\n\n    cb(true);\n  };\n\n  _selectEventsBasedBehavior = (\n    selectedEventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => {\n    this.setState(\n      {\n        selectedEventsBasedBehavior,\n        selectedEventsFunction: null,\n      },\n      () => {\n        this.updateToolbar();\n        if (selectedEventsBasedBehavior) {\n          if (this._editorMosaic)\n            this._editorMosaic.openEditor(\n              'behavior-functions-list',\n              'end',\n              75,\n              'column'\n            );\n          if (this._editorNavigator)\n            this._editorNavigator.openEditor('behavior-functions-list');\n        }\n      }\n    );\n  };\n\n  _makeRenameEventsBasedBehavior = (i18n: I18nType) => (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    newName: string,\n    done: boolean => void\n  ) => {\n    if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        i18n._(\n          t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n        ),\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameEventsBasedBehavior(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior.getName(),\n      newName\n    );\n\n    done(true);\n  };\n\n  _onEventsBasedBehaviorRenamed = () => {\n    // Name of a behavior changed, so notify parent\n    // that a behavior was edited (to trigger reload of extensions)\n    if (this.props.onBehaviorEdited) this.props.onBehaviorEdited();\n\n    // Reload the selected events function, if any, as the behavior was\n    // changed so objects containers need to be re-created (otherwise,\n    // objects from objects containers will still refer to the old behavior name,\n    // done before the call to gd.WholeProjectRefactorer.renameEventsBasedBehavior).\n    if (this.state.selectedEventsFunction) {\n      this._loadEventsFunctionFrom(\n        this.props.project,\n        this.state.selectedEventsFunction,\n        this.state.selectedEventsBasedBehavior\n      );\n    }\n  };\n\n  _onDeleteEventsBasedBehavior = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    cb: boolean => void\n  ) => {\n    if (\n      this.state.selectedEventsBasedBehavior &&\n      gd.compare(eventsBasedBehavior, this.state.selectedEventsBasedBehavior)\n    ) {\n      this._selectEventsBasedBehavior(null);\n    }\n\n    cb(true);\n  };\n\n  _onAddFreeEventsFunction = (\n    onAddEventsFunctionCb: (\n      parameters: ?EventsFunctionCreationParameters\n    ) => void\n  ) => {\n    this.setState({\n      extensionFunctionSelectorDialogOpen: true,\n      onAddEventsFunctionCb,\n    });\n  };\n\n  _onCloseExtensionFunctionSelectorDialog = (\n    parameters: ?EventsFunctionCreationParameters\n  ) => {\n    const { onAddEventsFunctionCb } = this.state;\n    this.setState(\n      {\n        extensionFunctionSelectorDialogOpen: false,\n        onAddEventsFunctionCb: null,\n      },\n      () => {\n        if (onAddEventsFunctionCb) onAddEventsFunctionCb(parameters);\n      }\n    );\n  };\n\n  _onAddBehaviorEventsFunction = (\n    onAddEventsFunctionCb: (\n      parameters: ?EventsFunctionCreationParameters\n    ) => void\n  ) => {\n    this.setState({\n      behaviorMethodSelectorDialogOpen: true,\n      onAddEventsFunctionCb,\n    });\n  };\n\n  _onCloseBehaviorMethodSelectorDialog = (\n    parameters: ?EventsFunctionCreationParameters\n  ) => {\n    const { onAddEventsFunctionCb } = this.state;\n    this.setState(\n      {\n        behaviorMethodSelectorDialogOpen: false,\n        onAddEventsFunctionCb: null,\n      },\n      () => {\n        if (onAddEventsFunctionCb) onAddEventsFunctionCb(parameters);\n      }\n    );\n  };\n\n  _onBehaviorEventsFunctionAdded = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction\n  ) => {\n    // This will create the mandatory parameters for the newly added function.\n    gd.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(\n      this.props.eventsFunctionsExtension,\n      eventsBasedBehavior\n    );\n  };\n\n  _onBehaviorPropertyRenamed = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    oldName: string,\n    newName: string\n  ) => {\n    const { project, eventsFunctionsExtension } = this.props;\n    gd.WholeProjectRefactorer.renameEventsBasedBehaviorProperty(\n      project,\n      eventsFunctionsExtension,\n      eventsBasedBehavior,\n      oldName,\n      newName\n    );\n  };\n\n  _editOptions = (open: boolean = true) => {\n    this.setState({\n      editOptionsDialogOpen: open,\n    });\n  };\n\n  _editBehavior = (editedEventsBasedBehavior: ?gdEventsBasedBehavior) => {\n    this.setState(\n      state => {\n        // If we're closing the properties of a behavior, ensure parameters\n        // are up-to-date in all event functions of the behavior (the object\n        // type might have changed).\n        if (state.editedEventsBasedBehavior && !editedEventsBasedBehavior) {\n          gd.WholeProjectRefactorer.ensureBehaviorEventsFunctionsProperParameters(\n            this.props.eventsFunctionsExtension,\n            state.editedEventsBasedBehavior\n          );\n        }\n\n        return {\n          editedEventsBasedBehavior,\n        };\n      },\n      async () => {\n        // TODO: Is this logic the same as in _onEventsBasedBehaviorRenamed?\n\n        if (!editedEventsBasedBehavior) {\n          // If we're closing the properties of a behavior, notify parent\n          // that a behavior was edited (to trigger reload of extensions)\n          if (this.props.onBehaviorEdited) {\n            await this.props.onBehaviorEdited();\n\n            // Once extensions are reloaded, ensure the project stays valid by\n            // filling any invalid required behavior property in the objects\n            // of the project.\n            //\n            // We need to do that as \"required behavior\" properties may have been\n            // added (or the type of the required behavior changed) in the dialog.\n            gd.WholeProjectRefactorer.fixInvalidRequiredBehaviorProperties(\n              this.props.project\n            );\n          }\n\n          // Reload the selected events function, if any, as the behavior was\n          // changed so objects containers need to be re-created. Notably, the\n          // type of the object that is handled by the behavior may have changed.\n          if (this.state.selectedEventsFunction) {\n            this._loadEventsFunctionFrom(\n              this.props.project,\n              this.state.selectedEventsFunction,\n              this.state.selectedEventsBasedBehavior\n            );\n          }\n        }\n      }\n    );\n  };\n\n  _openFreeFunctionsListEditor = () => {\n    if (this._editorNavigator)\n      this._editorNavigator.openEditor('free-functions-list');\n  };\n\n  _openBehaviorsListEditor = () => {\n    if (this._editorNavigator)\n      this._editorNavigator.openEditor('behaviors-list');\n  };\n\n  _onEditorNavigatorEditorChanged = (editorName: string) => {\n    // It's important that this method is the same across renders,\n    // to avoid confusing EditorNavigator into thinking it's changed\n    // and immediately calling it, which would trigger an infinite loop.\n    // Search for \"callback-prevent-infinite-rerendering\" in the codebase.\n\n    this.updateToolbar();\n\n    if (editorName === 'behaviors-list') {\n      this._selectEventsBasedBehavior(null);\n    } else if (\n      editorName === 'free-functions-list' ||\n      editorName === 'behavior-functions-list'\n    ) {\n      this._selectEventsFunction(null, this.state.selectedEventsBasedBehavior);\n    }\n  };\n\n  render() {\n    const { project, eventsFunctionsExtension } = this.props;\n    const {\n      selectedEventsFunction,\n      selectedEventsBasedBehavior,\n      editOptionsDialogOpen,\n      behaviorMethodSelectorDialogOpen,\n      extensionFunctionSelectorDialogOpen,\n      editedEventsBasedBehavior,\n    } = this.state;\n\n    const editors = {\n      'choose-editor': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <ChooseEventsFunctionsExtensionEditor\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            onEditFreeFunctions={this._openFreeFunctionsListEditor}\n            onEditBehaviors={this._openBehaviorsListEditor}\n            onEditExtensionOptions={this._editOptions}\n          />\n        ),\n      },\n      parameters: {\n        type: 'primary',\n        title: t`Function Configuration`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <I18n>\n            {({ i18n }) => (\n              <Background>\n                {selectedEventsFunction &&\n                this._globalObjectsContainer &&\n                this._objectsContainer ? (\n                  <EventsFunctionConfigurationEditor\n                    project={project}\n                    eventsFunction={selectedEventsFunction}\n                    eventsBasedBehavior={selectedEventsBasedBehavior}\n                    globalObjectsContainer={this._globalObjectsContainer}\n                    objectsContainer={this._objectsContainer}\n                    helpPagePath={\n                      !!selectedEventsBasedBehavior\n                        ? '/behaviors/events-based-behaviors'\n                        : '/events/functions'\n                    }\n                    onParametersOrGroupsUpdated={() => {\n                      this._loadEventsFunctionFrom(\n                        project,\n                        selectedEventsFunction,\n                        selectedEventsBasedBehavior\n                      );\n                      this.forceUpdate();\n                    }}\n                    onMoveFreeEventsParameter={this._makeMoveFreeEventsParameter(\n                      i18n\n                    )}\n                    onMoveBehaviorEventsParameter={this._makeMoveBehaviorEventsParameter(\n                      i18n\n                    )}\n                    unsavedChanges={this.props.unsavedChanges}\n                  />\n                ) : (\n                  <EmptyMessage>\n                    <Trans>\n                      Choose a function, or a function of a behavior, to set the\n                      parameters that it accepts.\n                    </Trans>\n                  </EmptyMessage>\n                )}\n              </Background>\n            )}\n          </I18n>\n        ),\n      },\n      'events-sheet': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () =>\n          selectedEventsFunction &&\n          this._globalObjectsContainer &&\n          this._objectsContainer ? (\n            <Background>\n              <EventsSheet\n                key={selectedEventsFunction.ptr}\n                ref={editor => (this.editor = editor)}\n                project={project}\n                scope={{\n                  layout: null,\n                  externalEvents: null,\n                  eventsFunctionsExtension,\n                  eventsBasedBehavior: selectedEventsBasedBehavior,\n                  eventsFunction: selectedEventsFunction,\n                }}\n                globalObjectsContainer={this._globalObjectsContainer}\n                objectsContainer={this._objectsContainer}\n                events={selectedEventsFunction.getEvents()}\n                onOpenExternalEvents={() => {}}\n                onOpenLayout={() => {}}\n                resourceSources={this.props.resourceSources}\n                onChooseResource={this.props.onChooseResource}\n                resourceExternalEditors={this.props.resourceExternalEditors}\n                openInstructionOrExpression={\n                  this.props.openInstructionOrExpression\n                }\n                setToolbar={this.props.setToolbar}\n                onCreateEventsFunction={this.props.onCreateEventsFunction}\n                onOpenSettings={this._editOptions}\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            </Background>\n          ) : (\n            <Background>\n              <EmptyMessage>\n                <Trans>\n                  Choose a function, or a function of a behavior, to edit its\n                  events.\n                </Trans>\n              </EmptyMessage>\n            </Background>\n          ),\n      },\n      'free-functions-list': {\n        type: 'primary',\n        title: t`Functions`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <I18n>\n            {({ i18n }) => (\n              <EventsFunctionsList\n                project={project}\n                eventsFunctionsContainer={eventsFunctionsExtension}\n                selectedEventsFunction={selectedEventsFunction}\n                onSelectEventsFunction={selectedEventsFunction =>\n                  this._selectEventsFunction(selectedEventsFunction, null)\n                }\n                onDeleteEventsFunction={this._onDeleteEventsFunction}\n                canRename={(eventsFunction: gdEventsFunction) => {\n                  return !isExtensionLifecycleEventsFunction(\n                    eventsFunction.getName()\n                  );\n                }}\n                onRenameEventsFunction={this._makeRenameFreeEventsFunction(\n                  i18n\n                )}\n                onAddEventsFunction={this._onAddFreeEventsFunction}\n                onEventsFunctionAdded={() => {}}\n                renderHeader={() => (\n                  <React.Fragment>\n                    <Line justifyContent=\"center\">\n                      <FlatButton\n                        label={<Trans>Edit extension options</Trans>}\n                        primary\n                        onClick={() => this._editOptions()}\n                      />\n                    </Line>\n                    <Divider />\n                  </React.Fragment>\n                )}\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            )}\n          </I18n>\n        ),\n      },\n      'behavior-functions-list': {\n        type: 'primary',\n        title: t`Behavior functions`,\n        renderEditor: () =>\n          selectedEventsBasedBehavior ? (\n            <I18n>\n              {({ i18n }) => (\n                <EventsFunctionsList\n                  project={project}\n                  eventsFunctionsContainer={selectedEventsBasedBehavior.getEventsFunctions()}\n                  selectedEventsFunction={selectedEventsFunction}\n                  onSelectEventsFunction={selectedEventsFunction =>\n                    this._selectEventsFunction(\n                      selectedEventsFunction,\n                      selectedEventsBasedBehavior\n                    )\n                  }\n                  onDeleteEventsFunction={this._onDeleteEventsFunction}\n                  canRename={(eventsFunction: gdEventsFunction) => {\n                    return !isBehaviorLifecycleEventsFunction(\n                      eventsFunction.getName()\n                    );\n                  }}\n                  onRenameEventsFunction={(\n                    eventsFunction: gdEventsFunction,\n                    newName: string,\n                    done: boolean => void\n                  ) =>\n                    this._makeRenameBehaviorEventsFunction(i18n)(\n                      selectedEventsBasedBehavior,\n                      eventsFunction,\n                      newName,\n                      done\n                    )\n                  }\n                  onAddEventsFunction={this._onAddBehaviorEventsFunction}\n                  onEventsFunctionAdded={eventsFunction =>\n                    this._onBehaviorEventsFunctionAdded(\n                      selectedEventsBasedBehavior,\n                      eventsFunction\n                    )\n                  }\n                  renderHeader={() => (\n                    <React.Fragment>\n                      <Line justifyContent=\"center\">\n                        <FlatButton\n                          label={<Trans>Edit behavior properties</Trans>}\n                          primary\n                          onClick={() =>\n                            this._editBehavior(selectedEventsBasedBehavior)\n                          }\n                        />\n                      </Line>\n                      <Divider />\n                    </React.Fragment>\n                  )}\n                  unsavedChanges={this.props.unsavedChanges}\n                />\n              )}\n            </I18n>\n          ) : (\n            <Background>\n              <EmptyMessage>\n                <Trans>\n                  Select a behavior to display the functions inside this\n                  behavior.\n                </Trans>\n              </EmptyMessage>\n            </Background>\n          ),\n      },\n\n      'behaviors-list': {\n        type: 'secondary',\n        title: t`Behaviors`,\n        toolbarControls: [],\n        renderEditor: () => (\n          <I18n>\n            {({ i18n }) => (\n              <EventsBasedBehaviorsList\n                project={project}\n                eventsBasedBehaviorsList={eventsFunctionsExtension.getEventsBasedBehaviors()}\n                selectedEventsBasedBehavior={selectedEventsBasedBehavior}\n                onSelectEventsBasedBehavior={this._selectEventsBasedBehavior}\n                onDeleteEventsBasedBehavior={this._onDeleteEventsBasedBehavior}\n                onRenameEventsBasedBehavior={this._makeRenameEventsBasedBehavior(\n                  i18n\n                )}\n                onEventsBasedBehaviorRenamed={\n                  this._onEventsBasedBehaviorRenamed\n                }\n                onEditProperties={this._editBehavior}\n                unsavedChanges={this.props.unsavedChanges}\n              />\n            )}\n          </I18n>\n        ),\n      },\n    };\n\n    return (\n      <React.Fragment>\n        <ResponsiveWindowMeasurer>\n          {windowWidth =>\n            windowWidth === 'small' ? (\n              <EditorNavigator\n                ref={editorNavigator =>\n                  (this._editorNavigator = editorNavigator)\n                }\n                editors={editors}\n                initialEditorName={'choose-editor'}\n                transitions={{\n                  'behaviors-list': {\n                    previousEditor: 'choose-editor',\n                  },\n                  'behavior-functions-list': {\n                    previousEditor: 'behaviors-list',\n                  },\n                  'free-functions-list': {\n                    previousEditor: 'choose-editor',\n                  },\n                  'events-sheet': {\n                    nextIcon: <Tune />,\n                    nextLabel: <Trans>Parameters</Trans>,\n                    nextEditor: 'parameters',\n                    previousEditor: () => {\n                      if (selectedEventsBasedBehavior)\n                        return 'behavior-functions-list';\n                      return 'free-functions-list';\n                    },\n                  },\n                  parameters: {\n                    nextIcon: <Check />,\n                    nextLabel: <Trans>Validate these parameters</Trans>,\n                    nextEditor: 'events-sheet',\n                  },\n                }}\n                onEditorChanged={\n                  // It's important that this callback is the same across renders,\n                  // to avoid confusing EditorNavigator into thinking it's changed\n                  // and immediately calling it, which would trigger an infinite loop.\n                  // Search for \"callback-prevent-infinite-rerendering\" in the codebase.\n                  this._onEditorNavigatorEditorChanged\n                }\n              />\n            ) : (\n              <PreferencesContext.Consumer>\n                {({\n                  getDefaultEditorMosaicNode,\n                  setDefaultEditorMosaicNode,\n                }) => (\n                  <EditorMosaic\n                    ref={editorMosaic => (this._editorMosaic = editorMosaic)}\n                    editors={editors}\n                    onPersistNodes={node =>\n                      setDefaultEditorMosaicNode(\n                        'events-functions-extension-editor',\n                        node\n                      )\n                    }\n                    initialNodes={\n                      getDefaultEditorMosaicNode(\n                        'events-functions-extension-editor'\n                      ) || initialMosaicEditorNodes\n                    }\n                  />\n                )}\n              </PreferencesContext.Consumer>\n            )\n          }\n        </ResponsiveWindowMeasurer>\n        {editOptionsDialogOpen && (\n          <OptionsEditorDialog\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            open\n            onClose={() => this._editOptions(false)}\n          />\n        )}\n        {behaviorMethodSelectorDialogOpen && selectedEventsBasedBehavior && (\n          <BehaviorMethodSelectorDialog\n            eventsBasedBehavior={selectedEventsBasedBehavior}\n            onCancel={() => this._onCloseBehaviorMethodSelectorDialog(null)}\n            onChoose={parameters =>\n              this._onCloseBehaviorMethodSelectorDialog(parameters)\n            }\n          />\n        )}\n        {extensionFunctionSelectorDialogOpen && eventsFunctionsExtension && (\n          <ExtensionFunctionSelectorDialog\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            onCancel={() => this._onCloseExtensionFunctionSelectorDialog(null)}\n            onChoose={parameters =>\n              this._onCloseExtensionFunctionSelectorDialog(parameters)\n            }\n          />\n        )}\n        {editedEventsBasedBehavior && (\n          <EventsBasedBehaviorEditorDialog\n            project={project}\n            eventsFunctionsExtension={eventsFunctionsExtension}\n            eventsBasedBehavior={editedEventsBasedBehavior}\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this._editBehavior(null);\n            }}\n            onRenameProperty={(oldName, newName) =>\n              this._onBehaviorPropertyRenamed(\n                editedEventsBasedBehavior,\n                oldName,\n                newName\n              )\n            }\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ObjectGroupsListWithObjectGroupEditor from '../../ObjectGroupsList/ObjectGroupsListWithObjectGroupEditor';\nimport { Tabs, Tab } from '../../UI/Tabs';\nimport EventsFunctionParametersEditor from './EventsFunctionParametersEditor';\nimport EventsFunctionPropertiesEditor from './EventsFunctionPropertiesEditor';\nimport ScrollView from '../../UI/ScrollView';\nimport { Column, Line } from '../../UI/Grid';\nimport { showWarningBox } from '../../UI/Messages/MessageBox';\nimport Window from '../../Utils/Window';\nimport { type GroupWithContext } from '../../ObjectsList/EnumerateObjects';\nimport { type UnsavedChanges } from '../../MainFrame/UnsavedChangesContext';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  eventsFunction: gdEventsFunction,\n  eventsBasedBehavior: ?gdEventsBasedBehavior,\n  onParametersOrGroupsUpdated: () => void,\n  helpPagePath?: string,\n  onConfigurationUpdated?: () => void,\n  renderConfigurationHeader?: () => React.Node,\n  freezeParameters?: boolean,\n  freezeEventsFunctionType?: boolean,\n  onMoveFreeEventsParameter?: (\n    eventsFunction: gdEventsFunction,\n    oldIndex: number,\n    newIndex: number,\n    done: (boolean) => void\n  ) => void,\n  onMoveBehaviorEventsParameter?: (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    eventsFunction: gdEventsFunction,\n    oldIndex: number,\n    newIndex: number,\n    done: (boolean) => void\n  ) => void,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\ntype TabNames = 'config' | 'parameters' | 'groups';\n\ntype State = {|\n  currentTab: TabNames,\n|};\n\nexport default class EventsFunctionConfigurationEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    currentTab: 'config',\n  };\n\n  _canObjectOrGroupUseNewName = (newName: string) => {\n    const { objectsContainer, globalObjectsContainer } = this.props;\n\n    if (\n      objectsContainer.hasObjectNamed(newName) ||\n      globalObjectsContainer.hasObjectNamed(newName) ||\n      objectsContainer.getObjectGroups().has(newName) ||\n      globalObjectsContainer.getObjectGroups().has(newName)\n    ) {\n      showWarningBox(\n        'Another object or group with this name already exists in this function.',\n        { delayToNextTick: true }\n      );\n      return false;\n    } else if (!gd.Project.validateName(newName)) {\n      showWarningBox(\n        'This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.',\n        { delayToNextTick: true }\n      );\n      return false;\n    }\n\n    return true;\n  };\n\n  _onDeleteGroup = (\n    groupWithContext: GroupWithContext,\n    done: boolean => void\n  ) => {\n    const { group } = groupWithContext;\n    const {\n      project,\n      eventsFunction,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    const answer = Window.showConfirmDialog(\n      'Do you want to remove all references to this group in events (actions and conditions using the group)?'\n    );\n\n    gd.WholeProjectRefactorer.objectOrGroupRemovedInEventsFunction(\n      project,\n      eventsFunction,\n      globalObjectsContainer,\n      objectsContainer,\n      group.getName(),\n      /* isObjectGroup=*/ true,\n      !!answer\n    );\n    done(true);\n  };\n\n  _onRenameGroup = (\n    groupWithContext: GroupWithContext,\n    newName: string,\n    done: boolean => void\n  ) => {\n    const { group } = groupWithContext;\n    const {\n      project,\n      eventsFunction,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    // newName is supposed to have been already validated\n\n    // Avoid triggering renaming refactoring if name has not really changed\n    if (group.getName() !== newName) {\n      gd.WholeProjectRefactorer.objectOrGroupRenamedInEventsFunction(\n        project,\n        eventsFunction,\n        globalObjectsContainer,\n        objectsContainer,\n        group.getName(),\n        newName,\n        /* isObjectGroup=*/ true\n      );\n    }\n\n    done(true);\n  };\n\n  _chooseTab = (currentTab: TabNames) =>\n    this.setState({\n      currentTab,\n    });\n\n  render() {\n    const {\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      eventsFunction,\n      eventsBasedBehavior,\n      freezeEventsFunctionType,\n      onConfigurationUpdated,\n      onParametersOrGroupsUpdated,\n      freezeParameters,\n      helpPagePath,\n      renderConfigurationHeader,\n      onMoveFreeEventsParameter,\n      onMoveBehaviorEventsParameter,\n    } = this.props;\n\n    return (\n      <Column expand noMargin useFullHeight>\n        <Tabs value={this.state.currentTab} onChange={this._chooseTab}>\n          <Tab\n            label={<Trans>Configuration</Trans>}\n            value={('config': TabNames)}\n          />\n          <Tab\n            label={<Trans>Parameters</Trans>}\n            value={('parameters': TabNames)}\n          />\n          <Tab\n            label={<Trans>Object groups</Trans>}\n            value={('groups': TabNames)}\n          />\n        </Tabs>\n        {this.state.currentTab === 'config' ? (\n          <ScrollView>\n            <Line>\n              <EventsFunctionPropertiesEditor\n                eventsFunction={eventsFunction}\n                eventsBasedBehavior={eventsBasedBehavior}\n                helpPagePath={helpPagePath}\n                onConfigurationUpdated={onConfigurationUpdated}\n                renderConfigurationHeader={renderConfigurationHeader}\n                freezeEventsFunctionType={freezeEventsFunctionType}\n              />\n            </Line>\n          </ScrollView>\n        ) : null}\n        {this.state.currentTab === 'parameters' ? (\n          <ScrollView>\n            <Line>\n              <EventsFunctionParametersEditor\n                project={project}\n                eventsFunction={eventsFunction}\n                eventsBasedBehavior={eventsBasedBehavior}\n                onParametersUpdated={onParametersOrGroupsUpdated}\n                helpPagePath={helpPagePath}\n                freezeParameters={freezeParameters}\n                onMoveFreeEventsParameter={onMoveFreeEventsParameter}\n                onMoveBehaviorEventsParameter={onMoveBehaviorEventsParameter}\n                key={eventsFunction ? eventsFunction.ptr : null}\n              />\n            </Line>\n          </ScrollView>\n        ) : null}\n        {this.state.currentTab === 'groups' ? (\n          <ObjectGroupsListWithObjectGroupEditor\n            project={project}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            globalObjectGroups={globalObjectsContainer.getObjectGroups()}\n            objectGroups={eventsFunction.getObjectGroups()}\n            canRenameGroup={this._canObjectOrGroupUseNewName}\n            onRenameGroup={this._onRenameGroup}\n            onDeleteGroup={this._onDeleteGroup}\n            onGroupsUpdated={onParametersOrGroupsUpdated}\n            canSetAsGlobalGroup={false}\n            unsavedChanges={this.props.unsavedChanges}\n          />\n        ) : null}\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ObjectGroupsList from '.';\nimport ObjectGroupEditorDialog from '../ObjectGroupEditor/ObjectGroupEditorDialog';\nimport { type GroupWithContext } from '../ObjectsList/EnumerateObjects';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\ntype Props = {|\n  project: gdProject,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  globalObjectGroups: gdObjectGroupsContainer,\n  objectGroups: gdObjectGroupsContainer,\n  canRenameGroup: (newName: string) => boolean,\n  onDeleteGroup: (\n    groupWithScope: GroupWithContext,\n    done: (boolean) => void\n  ) => void,\n  onRenameGroup: (\n    groupWithScope: GroupWithContext,\n    newName: string,\n    done: (boolean) => void\n  ) => void,\n  onGroupsUpdated?: () => void,\n  canSetAsGlobalGroup?: boolean,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\ntype State = {|\n  editedGroup: ?gdObjectGroup,\n|};\n\n/**\n * Helper showing the list of groups and embedding the editor to edit a group.\n */\nexport default class ObjectGroupsListWithObjectGroupEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    editedGroup: null,\n  };\n\n  editGroup = (editedGroup: ?gdObjectGroup) => this.setState({ editedGroup });\n\n  render() {\n    const {\n      project,\n      objectsContainer,\n      globalObjectsContainer,\n      objectGroups,\n      globalObjectGroups,\n    } = this.props;\n\n    return (\n      <React.Fragment>\n        <ObjectGroupsList\n          globalObjectGroups={globalObjectGroups}\n          objectGroups={objectGroups}\n          onEditGroup={this.editGroup}\n          onDeleteGroup={this.props.onDeleteGroup}\n          onRenameGroup={this.props.onRenameGroup}\n          canRenameGroup={this.props.canRenameGroup}\n          onGroupAdded={this.props.onGroupsUpdated}\n          onGroupRemoved={this.props.onGroupsUpdated}\n          onGroupRenamed={this.props.onGroupsUpdated}\n          canSetAsGlobalGroup={this.props.canSetAsGlobalGroup}\n          unsavedChanges={this.props.unsavedChanges}\n        />\n        {this.state.editedGroup && (\n          <ObjectGroupEditorDialog\n            project={project}\n            key={globalObjectsContainer.ptr + ';' + objectsContainer.ptr}\n            group={this.state.editedGroup}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            onCancel={() => this.editGroup(null)}\n            onApply={() => {\n              if (this.props.onGroupsUpdated) this.props.onGroupsUpdated();\n              this.editGroup(null);\n            }}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { List, ListItem } from '../UI/List';\nimport ObjectSelector from '../ObjectsList/ObjectSelector';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport { Column } from '../UI/Grid';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: ?gdProject,\n  group: gdObjectGroup,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  onSizeUpdated?: () => void,\n|};\n\ntype State = {|\n  newObjectName: string,\n|};\n\nexport default class ObjectGroupEditor extends React.Component<Props, State> {\n  state = {\n    newObjectName: '',\n  };\n\n  removeObject = (objectName: string) => {\n    const { group, onSizeUpdated } = this.props;\n\n    group.removeObject(objectName);\n\n    this.forceUpdate();\n    if (onSizeUpdated) onSizeUpdated();\n  };\n\n  addObject = (objectName: string) => {\n    const { group, onSizeUpdated } = this.props;\n\n    group.addObject(objectName);\n    this.setState({\n      newObjectName: '',\n    });\n    if (onSizeUpdated) onSizeUpdated();\n  };\n\n  _renderExplanation() {\n    const { group, globalObjectsContainer, objectsContainer } = this.props;\n\n    let type = undefined;\n    group\n      .getAllObjectsNames()\n      .toJSArray()\n      .forEach(objectName => {\n        const objectType = gd.getTypeOfObject(\n          globalObjectsContainer,\n          objectsContainer,\n          objectName,\n          false\n        );\n        if (type === undefined || objectType === type) type = objectType;\n        else type = '';\n      });\n\n    let message = '';\n    if (type === undefined) {\n      message = 'This group is empty';\n    } else if (type === '') {\n      message =\n        \"This group contains objects of different kinds. You'll only be able to use actions and conditions common to all objects with this group.\";\n    } else {\n      message = `This group contains objects of the same kind (${type}). You can use actions and conditions related to this kind of objects in events with this group.`;\n    }\n\n    return <EmptyMessage>{message}</EmptyMessage>;\n  }\n\n  render() {\n    const {\n      project,\n      group,\n      globalObjectsContainer,\n      objectsContainer,\n    } = this.props;\n\n    return (\n      <div>\n        {this._renderExplanation()}\n        <List>\n          {group\n            .getAllObjectsNames()\n            .toJSArray()\n            .map(objectName => {\n              return (\n                <ListItem\n                  key={objectName}\n                  primaryText={objectName}\n                  displayRemoveButton\n                  onRemove={() => this.removeObject(objectName)}\n                />\n              );\n            })}\n        </List>\n        <Column>\n          <ObjectSelector\n            project={project}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            value={this.state.newObjectName}\n            onChange={name => this.setState({ newObjectName: name })}\n            onChoose={this.addObject}\n            openOnFocus\n            noGroups\n            hintText={t`Choose an object to add to the group`}\n            fullWidth\n          />\n        </Column>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport EventsBasedBehaviorEditor from './index';\nimport HelpButton from '../UI/HelpButton';\n\ntype Props = {|\n  onApply: () => void,\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onRenameProperty: (oldName: string, newName: string) => void,\n|};\n\nexport default class EventsBasedBehaviorEditorDialog extends React.Component<\n  Props,\n  {||}\n> {\n  render() {\n    const {\n      onApply,\n      eventsBasedBehavior,\n      eventsFunctionsExtension,\n      project,\n    } = this.props;\n\n    return (\n      <Dialog\n        onApply={onApply}\n        noMargin\n        secondaryActions={[\n          <HelpButton\n            key=\"help\"\n            helpPagePath=\"/behaviors/events-based-behaviors\"\n          />,\n        ]}\n        actions={[\n          <FlatButton\n            label={<Trans>Apply</Trans>}\n            primary\n            keyboardFocused\n            onClick={onApply}\n            key={'Apply'}\n          />,\n        ]}\n        cannotBeDismissed={true}\n        open\n        onRequestClose={onApply}\n        title={<Trans>Edit the behavior</Trans>}\n      >\n        <EventsBasedBehaviorEditor\n          project={project}\n          eventsFunctionsExtension={eventsFunctionsExtension}\n          eventsBasedBehavior={eventsBasedBehavior}\n          onTabChanged={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n          }\n          onPropertiesUpdated={\n            () =>\n              this.forceUpdate() /*Force update to ensure dialog is properly positioned*/\n          }\n          onRenameProperty={this.props.onRenameProperty}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport TextField from '../UI/TextField';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport ObjectTypeSelector from '../ObjectTypeSelector';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport AlertMessage from '../UI/AlertMessage';\nimport EventsBasedBehaviorPropertiesEditor from './EventsBasedBehaviorPropertiesEditor';\nimport { ColumnStackLayout } from '../UI/Layout';\nconst gd: libGDevelop = global.gd;\n\ntype TabName = 'configuration' | 'properties';\n\ntype Props = {|\n  project: gdProject,\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onPropertiesUpdated: () => void,\n  onRenameProperty: (oldName: string, newName: string) => void,\n  onTabChanged: () => void,\n|};\n\ntype State = {|\n  currentTab: TabName,\n|};\n\nexport default class EventsBasedBehaviorEditor extends React.Component<\n  Props,\n  State\n> {\n  state = {\n    currentTab: 'configuration',\n  };\n\n  // An array containing all the object types that are using the behavior\n  _allObjectTypes: Array<string> = gd.WholeProjectRefactorer.getAllObjectTypesUsingEventsBasedBehavior(\n    this.props.project,\n    this.props.eventsFunctionsExtension,\n    this.props.eventsBasedBehavior\n  )\n    .toNewVectorString()\n    .toJSArray();\n\n  _changeTab = (newTab: TabName) =>\n    this.setState(\n      {\n        currentTab: newTab,\n      },\n      () => this.props.onTabChanged()\n    );\n\n  render() {\n    const { currentTab } = this.state;\n    const { eventsBasedBehavior, project } = this.props;\n\n    return (\n      <React.Fragment>\n        <Tabs value={currentTab} onChange={this._changeTab}>\n          <Tab label={<Trans>Configuration</Trans>} value=\"configuration\" />\n          <Tab label={<Trans>Properties</Trans>} value=\"properties\" />\n        </Tabs>\n        {currentTab === 'configuration' && (\n          <ColumnStackLayout expand>\n            <DismissableAlertMessage\n              identifier=\"events-based-behavior-explanation\"\n              kind=\"info\"\n            >\n              <Trans>\n                This is the configuration of your behavior. Make sure to choose\n                a proper internal name as it's hard to change it later. Enter a\n                description explaining what the behavior is doing to the object.\n              </Trans>\n            </DismissableAlertMessage>\n            <TextField\n              floatingLabelText={<Trans>Internal Name</Trans>}\n              value={eventsBasedBehavior.getName()}\n              disabled\n              fullWidth\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Name displayed in editor</Trans>}\n              value={eventsBasedBehavior.getFullName()}\n              onChange={text => {\n                eventsBasedBehavior.setFullName(text);\n                this.forceUpdate();\n              }}\n              fullWidth\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Description</Trans>}\n              floatingLabelFixed\n              hintText={t`The description of the behavior should explain what the behavior is doing to the object, and, briefly, how to use it.`}\n              value={eventsBasedBehavior.getDescription()}\n              onChange={text => {\n                eventsBasedBehavior.setDescription(text);\n                this.forceUpdate();\n              }}\n              multiline\n              fullWidth\n              rows={3}\n            />\n            <ObjectTypeSelector\n              floatingLabelText={\n                <Trans>Object on which this behavior can be used</Trans>\n              }\n              project={project}\n              value={eventsBasedBehavior.getObjectType()}\n              onChange={(objectType: string) => {\n                eventsBasedBehavior.setObjectType(objectType);\n                this.forceUpdate();\n              }}\n              allowedObjectTypes={\n                this._allObjectTypes.length === 0\n                  ? undefined /* Allow anything as the behavior is not used */\n                  : this._allObjectTypes.length === 1\n                  ? [\n                      '',\n                      this._allObjectTypes[0],\n                    ] /* Allow only the type of the objects using the behavior */\n                  : [\n                      '',\n                    ] /* More than one type of object are using the behavior. Only \"any object\" can be used on this behavior */\n              }\n            />\n            {this._allObjectTypes.length > 1 && (\n              <AlertMessage kind=\"info\">\n                <Trans>\n                  This behavior is being used by multiple types of objects.\n                  Thus, you can't restrict its usage to any particular object\n                  type. All the object types using this behavior are listed\n                  here:\n                  {this._allObjectTypes.join(', ')}\n                </Trans>\n              </AlertMessage>\n            )}\n            {eventsBasedBehavior\n              .getEventsFunctions()\n              .getEventsFunctionsCount() === 0 && (\n              <DismissableAlertMessage\n                identifier=\"empty-events-based-behavior-explanation\"\n                kind=\"info\"\n              >\n                <Trans>\n                  Once you're done, close this dialog and start adding some\n                  functions to the behavior. Then, test the behavior by adding\n                  it to an object in a scene.\n                </Trans>\n              </DismissableAlertMessage>\n            )}\n          </ColumnStackLayout>\n        )}\n        {currentTab === 'properties' && (\n          <EventsBasedBehaviorPropertiesEditor\n            project={project}\n            eventsBasedBehavior={eventsBasedBehavior}\n            onPropertiesUpdated={this.props.onPropertiesUpdated}\n            onRenameProperty={this.props.onRenameProperty}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport { mapVector } from '../Utils/MapFor';\nimport RaisedButton from '../UI/RaisedButton';\nimport IconButton from '../UI/IconButton';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport MiniToolbar from '../UI/MiniToolbar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport Add from '@material-ui/icons/Add';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../UI/Layout';\nimport StringArrayEditor from '../StringArrayEditor';\nimport ColorField from '../UI/ColorField';\nimport BehaviorTypeSelector from '../BehaviorTypeSelector';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onPropertiesUpdated: () => void,\n  onRenameProperty: (oldName: string, newName: string) => void,\n|};\n\nconst styles = {\n  propertiesContainer: {\n    flex: 1,\n  },\n};\n\nconst validatePropertyName = (\n  i18n: I18nType,\n  properties: gdNamedPropertyDescriptorsList,\n  newName: string\n) => {\n  if (!newName) {\n    showWarningBox(i18n._(t`The name of a property cannot be empty.`), {\n      delayToNextTick: true,\n    });\n    return false;\n  }\n  if (newName === 'name' || newName === 'type') {\n    showWarningBox(\n      i18n._(\n        t`The name of a property cannot be \"name\" or \"type\", as they are used by GDevelop internally.`\n      ),\n      { delayToNextTick: true }\n    );\n    return false;\n  }\n  if (properties.has(newName)) {\n    showWarningBox(\n      i18n._(\n        t`This name is already used by another property. Choose a unique name for each property.`\n      ),\n      { delayToNextTick: true }\n    );\n    return false;\n  }\n  if (!gd.Project.validateName(newName)) {\n    showWarningBox(\n      i18n._(\n        t`This name is invalid. Only use alphanumeric characters (0-9, a-z) and underscores. Digits are not allowed as the first character.`\n      ),\n      { delayToNextTick: true }\n    );\n    return false;\n  }\n\n  return true;\n};\n\nconst getExtraInfoArray = (property: gdNamedPropertyDescriptor) => {\n  const extraInfoVector = property.getExtraInfo();\n  return extraInfoVector.toJSArray();\n};\n\nexport default class EventsBasedBehaviorPropertiesEditor extends React.Component<\n  Props,\n  {||}\n> {\n  _addProperty = () => {\n    const { eventsBasedBehavior } = this.props;\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    const newName = newNameGenerator('Property', name => properties.has(name));\n    const property = properties.insertNew(newName, properties.getCount());\n    property.setType('Number');\n    this.forceUpdate();\n    this.props.onPropertiesUpdated();\n  };\n\n  _removeProperty = (name: string) => {\n    const { eventsBasedBehavior } = this.props;\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    properties.remove(name);\n    this.forceUpdate();\n    this.props.onPropertiesUpdated();\n  };\n\n  _moveProperty = (oldIndex: number, newIndex: number) => {\n    const { eventsBasedBehavior } = this.props;\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    properties.move(oldIndex, newIndex);\n    this.forceUpdate();\n    this.props.onPropertiesUpdated();\n  };\n\n  _setChoiceExtraInfo = (property: gdNamedPropertyDescriptor) => {\n    return (newExtraInfo: Array<string>) => {\n      const vectorString = new gd.VectorString();\n      newExtraInfo.forEach(item => vectorString.push_back(item));\n      property.setExtraInfo(vectorString);\n      vectorString.delete();\n      this.forceUpdate();\n    };\n  };\n\n  render() {\n    const { eventsBasedBehavior } = this.props;\n\n    const properties = eventsBasedBehavior.getPropertyDescriptors();\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Column noMargin>\n            <Line noMargin>\n              <div style={styles.propertiesContainer}>\n                {mapVector(\n                  properties,\n                  (property: gdNamedPropertyDescriptor, i: number) => (\n                    <React.Fragment key={i}>\n                      <MiniToolbar>\n                        <Column expand noMargin>\n                          <SemiControlledTextField\n                            margin=\"none\"\n                            commitOnBlur\n                            hintText={t`Enter the property name`}\n                            value={property.getName()}\n                            onChange={newName => {\n                              if (newName === property.getName()) return;\n                              if (\n                                !validatePropertyName(i18n, properties, newName)\n                              )\n                                return;\n\n                              this.props.onRenameProperty(\n                                property.getName(),\n                                newName\n                              );\n\n                              property.setName(newName);\n                              this.forceUpdate();\n                              this.props.onPropertiesUpdated();\n                            }}\n                            fullWidth\n                          />\n                        </Column>\n                        <InlineCheckbox\n                          label={\n                            property.isHidden() ? (\n                              <Trans>Hidden</Trans>\n                            ) : (\n                              <Trans>Visible in editor</Trans>\n                            )\n                          }\n                          checked={!property.isHidden()}\n                          onCheck={(e, checked) => {\n                            property.setHidden(!checked);\n                            this.forceUpdate();\n                            this.props.onPropertiesUpdated();\n                          }}\n                          checkedIcon={<Visibility />}\n                          uncheckedIcon={<VisibilityOff />}\n                        />\n                        <ElementWithMenu\n                          element={\n                            <IconButton>\n                              <MoreVert />\n                            </IconButton>\n                          }\n                          buildMenuTemplate={(i18n: I18nType) => [\n                            {\n                              label: i18n._(t`Delete`),\n                              click: () =>\n                                this._removeProperty(property.getName()),\n                            },\n                            { type: 'separator' },\n                            {\n                              label: i18n._(t`Move up`),\n                              click: () => this._moveProperty(i, i - 1),\n                              enabled: i - 1 >= 0,\n                            },\n                            {\n                              label: i18n._(t`Move down`),\n                              click: () => this._moveProperty(i, i + 1),\n                              enabled: i + 1 < properties.getCount(),\n                            },\n                          ]}\n                        />\n                      </MiniToolbar>\n                      <Line>\n                        <ColumnStackLayout expand>\n                          <ResponsiveLineStackLayout noMargin>\n                            <SelectField\n                              floatingLabelText={<Trans>Type</Trans>}\n                              value={property.getType()}\n                              onChange={(e, i, value: string) => {\n                                property.setType(value);\n                                this.forceUpdate();\n                                this.props.onPropertiesUpdated();\n                              }}\n                              fullWidth\n                            >\n                              <SelectOption\n                                value=\"Number\"\n                                primaryText={t`Number`}\n                              />\n                              <SelectOption\n                                value=\"String\"\n                                primaryText={t`String`}\n                              />\n                              <SelectOption\n                                value=\"Boolean\"\n                                primaryText={t`Boolean (checkbox)`}\n                              />\n                              <SelectOption\n                                value=\"Choice\"\n                                primaryText={t`String from a list of options (text)`}\n                              />\n                              <SelectOption\n                                value=\"Color\"\n                                primaryText={t`Color (text)`}\n                              />\n                              <SelectOption\n                                value=\"Behavior\"\n                                primaryText={t`Required behavior`}\n                              />\n                            </SelectField>\n                            {(property.getType() === 'String' ||\n                              property.getType() === 'Number') && (\n                              <SemiControlledTextField\n                                commitOnBlur\n                                floatingLabelText={<Trans>Default value</Trans>}\n                                hintText={\n                                  property.getType() === 'Number'\n                                    ? '123'\n                                    : 'ABC'\n                                }\n                                value={property.getValue()}\n                                onChange={newValue => {\n                                  property.setValue(newValue);\n                                  this.forceUpdate();\n                                  this.props.onPropertiesUpdated();\n                                }}\n                                fullWidth\n                              />\n                            )}\n                            {property.getType() === 'Boolean' && (\n                              <SelectField\n                                floatingLabelText={<Trans>Default value</Trans>}\n                                value={\n                                  property.getValue() === 'true'\n                                    ? 'true'\n                                    : 'false'\n                                }\n                                onChange={(e, i, value) => {\n                                  property.setValue(value);\n                                  this.forceUpdate();\n                                  this.props.onPropertiesUpdated();\n                                }}\n                                fullWidth\n                              >\n                                <SelectOption\n                                  value=\"true\"\n                                  primaryText={t`True (checked)`}\n                                />\n                                <SelectOption\n                                  value=\"false\"\n                                  primaryText={t`False (not checked)`}\n                                />\n                              </SelectField>\n                            )}\n                            {property.getType() === 'Behavior' && (\n                              <BehaviorTypeSelector\n                                project={this.props.project}\n                                objectType={this.props.eventsBasedBehavior.getObjectType()}\n                                value={\n                                  property.getExtraInfo().size() === 0\n                                    ? ''\n                                    : property.getExtraInfo().at(0)\n                                }\n                                onChange={(newValue: string) => {\n                                  // Change the type of the required behavior.\n                                  const extraInfo = property.getExtraInfo();\n                                  if (extraInfo.size() === 0) {\n                                    extraInfo.push_back(newValue);\n                                  } else {\n                                    extraInfo.set(0, newValue);\n                                  }\n                                  this.forceUpdate();\n                                  this.props.onPropertiesUpdated();\n                                }}\n                                disabled={false}\n                              />\n                            )}\n                          </ResponsiveLineStackLayout>\n                          {property.getType() === 'Choice' && (\n                            <StringArrayEditor\n                              extraInfo={getExtraInfoArray(property)}\n                              setExtraInfo={this._setChoiceExtraInfo(property)}\n                            />\n                          )}\n                          {property.getType() === 'Color' && (\n                            <ColorField\n                              floatingLabelText={<Trans>Color</Trans>}\n                              disableAlpha\n                              fullWidth\n                              color={property.getValue()}\n                              onChange={color => {\n                                property.setValue(color);\n                                this.forceUpdate();\n                                this.props.onPropertiesUpdated();\n                              }}\n                            />\n                          )}\n                          <SemiControlledTextField\n                            commitOnBlur\n                            floatingLabelText={\n                              <Trans>Label, shown in the editor</Trans>\n                            }\n                            hintText={t`This should make the purpose of the property easy to understand`}\n                            floatingLabelFixed\n                            value={property.getLabel()}\n                            onChange={text => {\n                              property.setLabel(text);\n                              this.forceUpdate();\n                            }}\n                            fullWidth\n                          />\n                        </ColumnStackLayout>\n                      </Line>\n                    </React.Fragment>\n                  )\n                )}\n                {properties.getCount() === 0 ? (\n                  <EmptyMessage>\n                    <Trans>\n                      No properties for this behavior. Add one to store data\n                      inside this behavior (for example: health, ammo, speed,\n                      etc...)\n                    </Trans>\n                  </EmptyMessage>\n                ) : null}\n                <Column>\n                  <Line justifyContent=\"flex-end\" expand>\n                    <RaisedButton\n                      primary\n                      label={<Trans>Add a property</Trans>}\n                      onClick={this._addProperty}\n                      icon={<Add />}\n                    />\n                  </Line>\n                </Column>\n              </div>\n            </Line>\n          </Column>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { type EventsFunctionCreationParameters } from '../EventsFunctionsList';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport Create from '../UI/CustomSvgIcons/Behaviors/Create';\nimport Step from '../UI/CustomSvgIcons/Behaviors/Step';\nimport Destroy from '../UI/CustomSvgIcons/Behaviors/Destroy';\nimport Function from '../UI/CustomSvgIcons/Behaviors/Function';\nimport Activate from '../UI/CustomSvgIcons/Behaviors/Activate';\nimport Deactivate from '../UI/CustomSvgIcons/Behaviors/Deactivate';\nimport { Line } from '../UI/Grid';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  eventsBasedBehavior: gdEventsBasedBehavior,\n  onCancel: () => void,\n  onChoose: (parameters: EventsFunctionCreationParameters) => void,\n|};\n\nconst styles = {\n  icon: { width: 40, height: 40 },\n  disabledItem: { opacity: 0.6 },\n};\n\nconst MethodListItem = ({\n  icon,\n  disabled,\n  onChoose,\n  name,\n  description,\n}: {|\n  icon: React.Node,\n  disabled: boolean,\n  onChoose: EventsFunctionCreationParameters => void,\n  name: string,\n  description: React.Node,\n|}) => {\n  return (\n    <ListItem\n      leftIcon={icon}\n      primaryText={name}\n      secondaryText={description}\n      secondaryTextLines={2}\n      onClick={() =>\n        onChoose({\n          functionType: gd.EventsFunction.Action,\n          name,\n        })\n      }\n      style={disabled ? styles.disabledItem : undefined}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default function BehaviorMethodSelectorDialog({\n  eventsBasedBehavior,\n  onChoose,\n  onCancel,\n}: Props) {\n  const eventsFunctions = eventsBasedBehavior.getEventsFunctions();\n  const [showAdvanced, setShowAdvanced] = React.useState(false);\n\n  return (\n    <Dialog\n      secondaryActions={[\n        <HelpButton\n          key=\"help\"\n          helpPagePath=\"/behaviors/events-based-behaviors\"\n        />,\n      ]}\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          keyboardFocused={true}\n          onClick={onCancel}\n          key={'close'}\n        />,\n      ]}\n      cannotBeDismissed={false}\n      open\n      noMargin\n      title={<Trans>Choose a new behavior function (\"method\")</Trans>}\n      onRequestClose={onCancel}\n    >\n      <List>\n        <ListItem\n          leftIcon={<Function style={styles.icon} />}\n          primaryText={<Trans>Action</Trans>}\n          secondaryText={\n            <Trans>\n              An action that can be used on objects with the behavior. You can\n              define the action parameters: objects, texts, numbers, layers,\n              etc...\n            </Trans>\n          }\n          onClick={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Action,\n              name: null,\n            })\n          }\n        />\n        <ListItem\n          leftIcon={<Function style={styles.icon} />}\n          primaryText={<Trans>Condition</Trans>}\n          secondaryText={\n            <Trans>\n              A condition that can be used on objects with the behavior. You can\n              define the condition parameters: objects, texts, numbers, layers,\n              etc...\n            </Trans>\n          }\n          onClick={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Condition,\n              name: null,\n            })\n          }\n        />\n        <ListItem\n          leftIcon={<Function style={styles.icon} />}\n          primaryText={<Trans>Expression</Trans>}\n          secondaryText={\n            <Trans>\n              An expression that can be used on objects with the behavior. Can\n              either return a number or a string, and take some parameters.\n            </Trans>\n          }\n          onClick={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Expression,\n              name: null,\n            })\n          }\n        />\n        <Subheader>\n          <Trans>Lifecycle methods</Trans>\n        </Subheader>\n        <MethodListItem\n          icon={<Create style={styles.icon} />}\n          name={'onCreated'}\n          disabled={eventsFunctions.hasEventsFunctionNamed('onCreated')}\n          onChoose={onChoose}\n          description={\n            <Trans>\n              Events that will be run once, when an object is created with this\n              behavior being attached to it.\n            </Trans>\n          }\n        />\n        <MethodListItem\n          icon={<Step style={styles.icon} />}\n          name={'doStepPreEvents'}\n          disabled={eventsFunctions.hasEventsFunctionNamed('doStepPreEvents')}\n          onChoose={onChoose}\n          description={\n            <Trans>\n              Events that will be run at every frame (roughly 60 times per\n              second), for every object that has the behavior attached, before\n              the events from the events sheet are launched.\n            </Trans>\n          }\n        />\n        <MethodListItem\n          icon={<Destroy style={styles.icon} />}\n          name={'onDestroy'}\n          disabled={\n            eventsFunctions.hasEventsFunctionNamed('onOwnerRemovedFromScene') ||\n            eventsFunctions.hasEventsFunctionNamed('onDestroy')\n          }\n          onChoose={onChoose}\n          description={\n            <Trans>\n              Events that will be run once, after the object is removed from the\n              scene and before it is entirely removed from memory.\n            </Trans>\n          }\n        />\n        {showAdvanced && (\n          <>\n            <Subheader>\n              <Trans>Other lifecycle methods</Trans>\n            </Subheader>\n            <MethodListItem\n              icon={<Deactivate style={styles.icon} />}\n              name={'onDeActivate'}\n              disabled={eventsFunctions.hasEventsFunctionNamed('onDeActivate')}\n              onChoose={onChoose}\n              description={\n                <Trans>\n                  Events that will be run once when the behavior is deactivated\n                  on an object (step events won't be run until the behavior is\n                  activated again).\n                </Trans>\n              }\n            />\n            <MethodListItem\n              icon={<Activate style={styles.icon} />}\n              name={'onActivate'}\n              disabled={eventsFunctions.hasEventsFunctionNamed('onActivate')}\n              onChoose={onChoose}\n              description={\n                <Trans>\n                  Events that will be run once when the behavior is re-activated\n                  on an object (after it was previously deactivated).\n                </Trans>\n              }\n            />\n            <MethodListItem\n              icon={<Step style={styles.icon} />}\n              name={'doStepPostEvents'}\n              disabled={eventsFunctions.hasEventsFunctionNamed(\n                'doStepPostEvents'\n              )}\n              onChoose={onChoose}\n              description={\n                <Trans>\n                  Events that will be run at every frame (roughly 60 times per\n                  second), for every object that has the behavior attached,\n                  after the events from the events sheet.\n                </Trans>\n              }\n            />\n          </>\n        )}\n      </List>\n      <Line justifyContent=\"center\" alignItems=\"center\">\n        {!showAdvanced ? (\n          <FlatButton\n            icon={<Visibility />}\n            primary={false}\n            onClick={() => setShowAdvanced(true)}\n            label={<Trans>Show other lifecycle functions (advanced)</Trans>}\n          />\n        ) : (\n          <FlatButton\n            icon={<VisibilityOff />}\n            primary={false}\n            onClick={() => setShowAdvanced(false)}\n            label={<Trans>Hide other lifecycle functions (advanced)</Trans>}\n          />\n        )}\n      </Line>\n    </Dialog>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { type EventsFunctionCreationParameters } from '../EventsFunctionsList';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport { List, ListItem } from '../UI/List';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport Create from '../UI/CustomSvgIcons/Behaviors/Create';\nimport Step from '../UI/CustomSvgIcons/Behaviors/Step';\nimport Destroy from '../UI/CustomSvgIcons/Behaviors/Destroy';\nimport Function from '../UI/CustomSvgIcons/Behaviors/Function';\nimport Activate from '../UI/CustomSvgIcons/Behaviors/Activate';\nimport Deactivate from '../UI/CustomSvgIcons/Behaviors/Deactivate';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport { Line } from '../UI/Grid';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onCancel: () => void,\n  onChoose: (parameters: EventsFunctionCreationParameters) => void,\n|};\n\nconst styles = {\n  icon: { width: 40, height: 40 },\n  disabledItem: { opacity: 0.6 },\n};\n\nconst FunctionListItem = ({\n  icon,\n  disabled,\n  onChoose,\n  name,\n  description,\n}: {|\n  icon: React.Node,\n  disabled?: boolean,\n  onChoose: () => void,\n  name: React.Node,\n  description: React.Node,\n|}) => {\n  return (\n    <ListItem\n      leftIcon={icon}\n      primaryText={name}\n      secondaryText={description}\n      secondaryTextLines={2}\n      onClick={onChoose}\n      style={disabled ? styles.disabledItem : undefined}\n      disabled={disabled}\n    />\n  );\n};\n\nexport default function BehaviorMethodSelectorDialog({\n  eventsFunctionsExtension,\n  onChoose,\n  onCancel,\n}: Props) {\n  const [showAdvanced, setShowAdvanced] = React.useState(false);\n\n  return (\n    <Dialog\n      secondaryActions={[\n        <HelpButton key=\"help\" helpPagePath=\"/events/functions\" />,\n      ]}\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          keyboardFocused={true}\n          onClick={onCancel}\n          key={'close'}\n        />,\n      ]}\n      cannotBeDismissed={false}\n      open\n      noMargin\n      title={<Trans>Choose a new extension function</Trans>}\n      onRequestClose={onCancel}\n    >\n      <List>\n        <FunctionListItem\n          icon={<Function style={styles.icon} />}\n          name={<Trans>Action</Trans>}\n          onChoose={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Action,\n              name: null,\n            })\n          }\n          description={\n            <Trans>\n              An action that can be used in other events sheet. You can define\n              the action parameters: objects, texts, numbers, layers, etc...\n            </Trans>\n          }\n        />\n        <FunctionListItem\n          icon={<Function style={styles.icon} />}\n          name={<Trans>Condition</Trans>}\n          onChoose={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Condition,\n              name: null,\n            })\n          }\n          description={\n            <Trans>\n              A condition that can be used in other events sheet. You can define\n              the condition parameters: objects, texts, numbers, layers, etc...\n            </Trans>\n          }\n        />\n        <FunctionListItem\n          icon={<Function style={styles.icon} />}\n          name={<Trans>Expression</Trans>}\n          onChoose={() =>\n            onChoose({\n              functionType: gd.EventsFunction.Expression,\n              name: null,\n            })\n          }\n          description={\n            <Trans>\n              An expression that can be used in formulas. Can either return a\n              number or a string, and take some parameters.\n            </Trans>\n          }\n        />\n        {showAdvanced && (\n          <React.Fragment>\n            <Subheader>\n              <Trans>Lifecycle functions (advanced)</Trans>\n            </Subheader>\n            <FunctionListItem\n              icon={<Create style={styles.icon} />}\n              name={'onFirstSceneLoaded'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onFirstSceneLoaded'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onFirstSceneLoaded',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when the first scene of the game\n                  is loaded, before any other events.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Create style={styles.icon} />}\n              name={'onSceneLoaded'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onSceneLoaded'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onSceneLoaded',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene of the game is\n                  loaded, before the scene events.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Step style={styles.icon} />}\n              name={'onScenePreEvents'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onScenePreEvents'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onScenePreEvents',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run at every frame (roughly 60 times per\n                  second), before the events from the events sheet of the scene.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Step style={styles.icon} />}\n              name={'onScenePostEvents'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onScenePostEvents'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onScenePostEvents',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run at every frame (roughly 60 times per\n                  second), after the events from the events sheet of the scene.\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Deactivate style={styles.icon} />}\n              name={'onScenePaused'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onScenePaused'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onScenePaused',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene is paused (another\n                  scene is run on top of it).\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Activate style={styles.icon} />}\n              name={'onSceneResumed'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onSceneResumed'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onSceneResumed',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene is resumed (after it\n                  was previously paused).\n                </Trans>\n              }\n            />\n            <FunctionListItem\n              icon={<Destroy style={styles.icon} />}\n              name={'onSceneUnloading'}\n              disabled={eventsFunctionsExtension.hasEventsFunctionNamed(\n                'onSceneUnloading'\n              )}\n              onChoose={() =>\n                onChoose({\n                  functionType: gd.EventsFunction.Action,\n                  name: 'onSceneUnloading',\n                })\n              }\n              description={\n                <Trans>\n                  Events that will be run once when a scene is about to be\n                  unloaded from memory. The previous scene that was paused will\n                  be resumed after this.\n                </Trans>\n              }\n            />\n          </React.Fragment>\n        )}\n      </List>\n      <Line justifyContent=\"center\" alignItems=\"center\">\n        {!showAdvanced ? (\n          <FlatButton\n            icon={<Visibility />}\n            primary={false}\n            onClick={() => setShowAdvanced(true)}\n            label={<Trans>Show lifecycle functions (advanced)</Trans>}\n          />\n        ) : (\n          <FlatButton\n            icon={<VisibilityOff />}\n            primary={false}\n            onClick={() => setShowAdvanced(false)}\n            label={<Trans>Hide lifecycle functions (advanced)</Trans>}\n          />\n        )}\n      </Line>\n    </Dialog>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { type Editor } from '.';\nimport { Column, Line } from '../Grid';\nimport FlatButton from '../FlatButton';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Background from '../Background';\n\ntype Props = {|\n  initialEditorName: string,\n  editors: {\n    [string]: Editor,\n  },\n  transitions: {\n    [string]: {|\n      nextEditor?: string | (() => string),\n      nextLabel?: React.Node,\n      nextIcon?: React.Node,\n      previousEditor?: string | (() => string),\n    |},\n  },\n  onEditorChanged: (editorName: string) => void,\n|};\n\nexport type EditorNavigatorInterface = {|\n  openEditor: (editorName: string) => void,\n|};\n\n// Flow types might have to be changed/removed if upgrading Flow\n// (see example at https://github.com/wgao19/flow-notes/blob/master/react/react-memo.md)\n\nexport default React.forwardRef<Props, EditorNavigatorInterface>(\n  (\n    { initialEditorName, editors, transitions, onEditorChanged }: Props,\n    ref\n  ) => {\n    const [currentEditorName, setCurrentEditorName] = React.useState(\n      initialEditorName\n    );\n    React.useImperativeHandle(ref, () => ({\n      openEditor: editorName => {\n        setCurrentEditorName(editorName);\n      },\n    }));\n    React.useEffect(\n      () => {\n        onEditorChanged(currentEditorName);\n      },\n      [currentEditorName, onEditorChanged]\n    );\n\n    const transition = transitions[currentEditorName];\n    let buttonLineJustifyContent = 'space-between';\n    if (transition) {\n      if (transition.previousEditor && !transition.nextEditor) {\n        buttonLineJustifyContent = 'flex-start';\n      }\n      if (!transition.previousEditor && transition.nextEditor) {\n        buttonLineJustifyContent = 'flex-end';\n      }\n    }\n\n    return (\n      <Column noMargin expand>\n        {transition && (\n          <Background maxWidth noExpand noFullHeight>\n            <Column>\n              <Line justifyContent={buttonLineJustifyContent}>\n                {transition.previousEditor && (\n                  <FlatButton\n                    label={<Trans>Back</Trans>}\n                    onClick={() => {\n                      if (transition.previousEditor)\n                        setCurrentEditorName(transition.previousEditor);\n                    }}\n                    icon={<ArrowBack />}\n                  />\n                )}\n                {transition.nextLabel && transition.nextEditor && (\n                  <FlatButton\n                    label={transition.nextLabel}\n                    onClick={() => {\n                      if (transition.nextEditor)\n                        setCurrentEditorName(transition.nextEditor);\n                    }}\n                    icon={transition.nextIcon}\n                  />\n                )}\n              </Line>\n            </Column>\n          </Background>\n        )}\n        {editors[currentEditorName]\n          ? editors[currentEditorName].renderEditor()\n          : null}\n      </Column>\n    );\n  }\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Background from '../UI/Background';\nimport { Column, Spacer } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport RaisedButton from '../UI/RaisedButton';\nimport FlatButton from '../UI/FlatButton';\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onEditFreeFunctions: () => void,\n  onEditBehaviors: () => void,\n  onEditExtensionOptions: () => void,\n|};\n\nexport default (props: Props) => {\n  const eventsFunctionsCount = props.eventsFunctionsExtension.getEventsFunctionsCount();\n  const eventsBasedBehaviorsCount = props.eventsFunctionsExtension\n    .getEventsBasedBehaviors()\n    .getCount();\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Background>\n          <Column>\n            <Text>\n              <Trans>\n                Extensions can provide functions (which can be actions,\n                conditions or expressions) or new behaviors.\n              </Trans>\n            </Text>\n            <RaisedButton\n              label={i18n._(\n                t`Edit functions (not attached to behaviors) (${eventsFunctionsCount})`\n              )}\n              onClick={props.onEditFreeFunctions}\n              primary\n            />\n            <Spacer />\n            <RaisedButton\n              label={i18n._(t`Edit behaviors (${eventsBasedBehaviorsCount})`)}\n              onClick={props.onEditBehaviors}\n              primary\n            />\n            <Spacer />\n            <FlatButton\n              label={<Trans>Edit extension options</Trans>}\n              onClick={props.onEditExtensionOptions}\n            />\n          </Column>\n        </Background>\n      )}\n    </I18n>\n  );\n};\n","// @flow\nimport gesture from 'pixi-simple-gesture';\nimport ObjectsRenderingService from '../../ObjectsRendering/ObjectsRenderingService';\nimport RenderedInstance from '../../ObjectsRendering/Renderers/RenderedInstance';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport ViewPosition from '../ViewPosition';\n\nimport * as PIXI from 'pixi.js-legacy';\nimport { shouldBeHandledByPinch } from '../PinchHandler';\nimport { makeDoubleClickable } from './PixiDoubleClickEvent';\nimport Rectangle from '../../Utils/Rectangle';\nimport { rotatePolygon, type Polygon } from '../../Utils/PolygonHelper';\nconst gd: libGDevelop = global.gd;\n\nexport default class LayerRenderer {\n  project: gdProject;\n  instances: gdInitialInstancesContainer;\n  layout: gdLayout;\n  /** `layer` can be changed at any moment (see InstancesRenderer).\n   * /!\\ Don't store any other reference.\n   */\n  layer: gdLayer;\n  viewPosition: ViewPosition;\n  onInstanceClicked: gdInitialInstance => void;\n  onInstanceDoubleClicked: gdInitialInstance => void;\n  onOverInstance: gdInitialInstance => void;\n  onOutInstance: gdInitialInstance => void;\n  onMoveInstance: (gdInitialInstance, number, number) => void;\n  onMoveInstanceEnd: void => void;\n  onDownInstance: (gdInitialInstance, number, number) => void;\n  /**Used for instances culling on rendering */\n  viewTopLeft: [number, number];\n  /** Used for instances culling on rendering */\n  viewBottomRight: [number, number];\n\n  renderedInstances: { [number]: RenderedInstance } = {};\n  pixiContainer: PIXI.Container;\n\n  /** Functor used to render an instance */\n  instancesRenderer: gdInitialInstanceJSFunctor;\n\n  wasUsed: boolean = false;\n\n  _temporaryRectangle: Rectangle = new Rectangle();\n  _temporaryRectanglePath: Polygon = [[0, 0], [0, 0], [0, 0], [0, 0]];\n\n  constructor({\n    project,\n    layout,\n    layer,\n    viewPosition,\n    instances,\n    onInstanceClicked,\n    onInstanceDoubleClicked,\n    onOverInstance,\n    onOutInstance,\n    onMoveInstance,\n    onMoveInstanceEnd,\n    onDownInstance,\n  }: {\n    project: gdProject,\n    instances: gdInitialInstancesContainer,\n    layout: gdLayout,\n    layer: gdLayer,\n    viewPosition: ViewPosition,\n    onInstanceClicked: gdInitialInstance => void,\n    onInstanceDoubleClicked: gdInitialInstance => void,\n    onOverInstance: gdInitialInstance => void,\n    onOutInstance: gdInitialInstance => void,\n    onMoveInstance: (gdInitialInstance, number, number) => void,\n    onMoveInstanceEnd: void => void,\n    onDownInstance: (gdInitialInstance, number, number) => void,\n  }) {\n    this.project = project;\n    this.instances = instances;\n    this.layout = layout;\n    this.layer = layer; // /!\\ Don't store any other reference.\n    // `layer` can be changed at any moment (see InstancesRenderer).\n    this.viewPosition = viewPosition;\n    this.onInstanceClicked = onInstanceClicked;\n    this.onInstanceDoubleClicked = onInstanceDoubleClicked;\n    this.onOverInstance = onOverInstance;\n    this.onOutInstance = onOutInstance;\n    this.onMoveInstance = onMoveInstance;\n    this.onMoveInstanceEnd = onMoveInstanceEnd;\n    this.onDownInstance = onDownInstance;\n\n    this.viewTopLeft = [0, 0]; // Used for instances culling on rendering\n    this.viewBottomRight = [0, 0]; // Used for instances culling on rendering\n\n    this.pixiContainer = new PIXI.Container();\n\n    // Functor used to render an instance\n    this.instancesRenderer = new gd.InitialInstanceJSFunctor();\n    // $FlowFixMe - invoke is not writable\n    this.instancesRenderer.invoke = instancePtr => {\n      // $FlowFixMe - wrapPointer is not exposed\n      const instance = gd.wrapPointer(instancePtr, gd.InitialInstance);\n\n      //Get the \"RendereredInstance\" object associated to the instance and tell it to update.\n      var renderedInstance: ?RenderedInstance = this.getRendererOfInstance(\n        instance\n      );\n      if (!renderedInstance) return;\n\n      const pixiObject = renderedInstance.getPixiObject();\n      if (pixiObject) pixiObject.zOrder = instance.getZOrder();\n\n      // \"Culling\" improves rendering performance of large levels\n      const isVisible = this._isInstanceVisible(instance);\n      if (pixiObject) pixiObject.visible = isVisible;\n      if (isVisible) renderedInstance.update();\n\n      renderedInstance.wasUsed = true;\n    };\n  }\n\n  getPixiContainer() {\n    return this.pixiContainer;\n  }\n\n  getUnrotatedInstanceLeft = (instance: gdInitialInstance) => {\n    return (\n      instance.getX() -\n      (this.renderedInstances[instance.ptr]\n        ? this.renderedInstances[instance.ptr].getOriginX()\n        : 0)\n    );\n  };\n\n  getUnrotatedInstanceTop = (instance: gdInitialInstance) => {\n    return (\n      instance.getY() -\n      (this.renderedInstances[instance.ptr]\n        ? this.renderedInstances[instance.ptr].getOriginY()\n        : 0)\n    );\n  };\n\n  getUnrotatedInstanceWidth = (instance: gdInitialInstance) => {\n    if (instance.hasCustomSize()) return instance.getCustomWidth();\n\n    return this.renderedInstances[instance.ptr]\n      ? this.renderedInstances[instance.ptr].getDefaultWidth()\n      : 0;\n  };\n\n  getUnrotatedInstanceHeight = (instance: gdInitialInstance) => {\n    if (instance.hasCustomSize()) return instance.getCustomHeight();\n\n    return this.renderedInstances[instance.ptr]\n      ? this.renderedInstances[instance.ptr].getDefaultHeight()\n      : 0;\n  };\n\n  getUnrotatedInstanceAABB(\n    instance: gdInitialInstance,\n    bounds: Rectangle\n  ): Rectangle {\n    const left = this.getUnrotatedInstanceLeft(instance);\n    const top = this.getUnrotatedInstanceTop(instance);\n    const right = left + this.getUnrotatedInstanceWidth(instance);\n    const bottom = top + this.getUnrotatedInstanceHeight(instance);\n\n    bounds.left = left;\n    bounds.right = right;\n    bounds.top = top;\n    bounds.bottom = bottom;\n    return bounds;\n  }\n\n  _getInstanceRotatedRectangle(instance: gdInitialInstance): Polygon {\n    const left = this.getUnrotatedInstanceLeft(instance);\n    const top = this.getUnrotatedInstanceTop(instance);\n    const right = left + this.getUnrotatedInstanceWidth(instance);\n    const bottom = top + this.getUnrotatedInstanceHeight(instance);\n\n    const rectangle = this._temporaryRectanglePath;\n\n    rectangle[0][0] = left;\n    rectangle[0][1] = top;\n\n    rectangle[1][0] = left;\n    rectangle[1][1] = bottom;\n\n    rectangle[2][0] = right;\n    rectangle[2][1] = bottom;\n\n    rectangle[3][0] = right;\n    rectangle[3][1] = top;\n\n    const centerX = (rectangle[0][0] + rectangle[2][0]) / 2;\n    const centerY = (rectangle[0][1] + rectangle[2][1]) / 2;\n    const angle = (instance.getAngle() * Math.PI) / 180;\n    rotatePolygon(rectangle, centerX, centerY, angle);\n    return rectangle;\n  }\n\n  getInstanceAABB(instance: gdInitialInstance, bounds: Rectangle): Rectangle {\n    const angle = (instance.getAngle() * Math.PI) / 180;\n    if (angle === 0) {\n      return this.getUnrotatedInstanceAABB(instance, bounds);\n    }\n\n    const rotatedRectangle = this._getInstanceRotatedRectangle(instance);\n\n    let left = Number.MAX_VALUE;\n    let right = -Number.MAX_VALUE;\n    let top = Number.MAX_VALUE;\n    let bottom = -Number.MAX_VALUE;\n    for (let i = 0, len = rotatedRectangle.length; i < len; ++i) {\n      left = Math.min(left, rotatedRectangle[i][0]);\n      right = Math.max(right, rotatedRectangle[i][0]);\n      top = Math.min(top, rotatedRectangle[i][1]);\n      bottom = Math.max(bottom, rotatedRectangle[i][1]);\n    }\n    bounds.left = left;\n    bounds.right = right;\n    bounds.top = top;\n    bounds.bottom = bottom;\n    return bounds;\n  }\n\n  getRendererOfInstance = (instance: gdInitialInstance) => {\n    var renderedInstance = this.renderedInstances[instance.ptr];\n    if (renderedInstance === undefined) {\n      //No renderer associated yet, the instance must have been just created!...\n      const associatedObjectName = instance.getObjectName();\n      const associatedObject = getObjectByName(\n        this.project,\n        this.layout,\n        associatedObjectName\n      );\n      if (!associatedObject) return null;\n\n      //...so let's create a renderer.\n      renderedInstance = this.renderedInstances[\n        instance.ptr\n      ] = ObjectsRenderingService.createNewInstanceRenderer(\n        this.project,\n        this.layout,\n        instance,\n        associatedObject,\n        this.pixiContainer\n      );\n\n      renderedInstance._pixiObject.interactive = true;\n      gesture.panable(renderedInstance._pixiObject);\n      makeDoubleClickable(renderedInstance._pixiObject);\n      renderedInstance._pixiObject.on('click', () => {\n        this.onInstanceClicked(instance);\n      });\n      renderedInstance._pixiObject.on('doubleclick', () => {\n        this.onInstanceDoubleClicked(instance);\n      });\n      renderedInstance._pixiObject.on('mouseover', () => {\n        this.onOverInstance(instance);\n      });\n      renderedInstance._pixiObject.on('mousedown', event => {\n        const viewPoint = event.data.global;\n        const scenePoint = this.viewPosition.toSceneCoordinates(\n          viewPoint.x,\n          viewPoint.y\n        );\n        this.onDownInstance(instance, scenePoint[0], scenePoint[1]);\n      });\n      renderedInstance._pixiObject.on('touchstart', event => {\n        if (shouldBeHandledByPinch(event.data && event.data.originalEvent)) {\n          return null;\n        }\n\n        const viewPoint = event.data.global;\n        const scenePoint = this.viewPosition.toSceneCoordinates(\n          viewPoint.x,\n          viewPoint.y\n        );\n        this.onDownInstance(instance, scenePoint[0], scenePoint[1]);\n      });\n      renderedInstance._pixiObject.on('mouseout', () => {\n        this.onOutInstance(instance);\n      });\n      renderedInstance._pixiObject.on('panmove', event => {\n        if (shouldBeHandledByPinch(event.data && event.data.originalEvent)) {\n          return null;\n        }\n\n        this.onMoveInstance(instance, event.deltaX, event.deltaY);\n      });\n      renderedInstance._pixiObject.on('panend', event => {\n        this.onMoveInstanceEnd();\n      });\n    }\n\n    return renderedInstance;\n  };\n\n  /**\n   * This returns true if an instance is visible according to the viewPosition.\n   * The approach is a naive bounding box testing but save rendering time on large\n   * levels (though this could be improved with spatial partitioning).\n   */\n  _isInstanceVisible(instance: gdInitialInstance) {\n    const aabb = this.getInstanceAABB(instance, this._temporaryRectangle);\n    if (\n      aabb.left + aabb.width() < this.viewTopLeft[0] ||\n      aabb.top + aabb.height() < this.viewTopLeft[1] ||\n      aabb.left > this.viewBottomRight[0] ||\n      aabb.top > this.viewBottomRight[1]\n    )\n      return false;\n\n    return true;\n  }\n\n  _computeViewBounds() {\n    // Add a margin of 100 pixels around the view. Culling will hide PIXI objects,\n    // and hidden objects won't respond to events. Hence, a margin allow the cursor to go\n    // slightly out of the canvas when moving an instance, and still have the instance\n    // to follow the cursor.\n    const margin = 100;\n    this.viewTopLeft = this.viewPosition.toSceneCoordinates(-margin, -margin);\n    this.viewBottomRight = this.viewPosition.toSceneCoordinates(\n      this.viewPosition.getWidth() + margin,\n      this.viewPosition.getHeight() + margin\n    );\n  }\n\n  render() {\n    this._computeViewBounds();\n    this.instances.iterateOverInstancesWithZOrdering(\n      // $FlowFixMe - gd.castObject is not supporting typings.\n      this.instancesRenderer,\n      this.layer.getName()\n    );\n    this._updatePixiObjectsZOrder();\n    this._updateVisibility();\n    this._destroyUnusedInstanceRenderers();\n  }\n\n  _updatePixiObjectsZOrder() {\n    this.pixiContainer.children.sort((a, b) => {\n      a.zOrder = a.zOrder || 0;\n      b.zOrder = b.zOrder || 0;\n      return a.zOrder - b.zOrder;\n    });\n  }\n\n  _updateVisibility() {\n    this.pixiContainer.visible = this.layer.getVisibility();\n  }\n\n  /**\n   * Delete instance renderers of the specified objects, which will then be recreated during\n   * the next render.\n   * @param {string} objectName The name of the object for which instance must be re-rendered.\n   */\n  resetInstanceRenderersFor(objectName: string) {\n    for (let s in this.renderedInstances) {\n      let i = Number(s);\n      if (this.renderedInstances.hasOwnProperty(i)) {\n        const renderedInstance = this.renderedInstances[i];\n        if (renderedInstance.getInstance().getObjectName() === objectName) {\n          renderedInstance.onRemovedFromScene();\n          delete this.renderedInstances[i];\n        }\n      }\n    }\n  }\n\n  /**\n   * Remove rendered instances that are not associated to any instance anymore\n   * (this can happen after an instance has been deleted).\n   */\n  _destroyUnusedInstanceRenderers() {\n    for (let s in this.renderedInstances) {\n      let i = Number(s);\n      if (this.renderedInstances.hasOwnProperty(i)) {\n        const renderedInstance = this.renderedInstances[i];\n        if (!renderedInstance.wasUsed) {\n          renderedInstance.onRemovedFromScene();\n          delete this.renderedInstances[i];\n        } else renderedInstance.wasUsed = false;\n      }\n    }\n  }\n\n  delete() {\n    // Destroy all instances\n    for (let s in this.renderedInstances) {\n      let i = Number(s);\n      if (this.renderedInstances.hasOwnProperty(i)) {\n        const renderedInstance = this.renderedInstances[i];\n        renderedInstance.onRemovedFromScene(); // TODO: pass argument to tell it's even worth removing from container?\n        delete this.renderedInstances[i];\n      }\n    }\n\n    // Destroy the container\n    this.pixiContainer.destroy();\n\n    // Destroy the object iterating on instances\n    this.instancesRenderer.delete();\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\n\nconst moveTolerance = 10; // px\nconst doubleClickDelay = 500; //ms\n\n/**\n * Add a 'doubleclick' event to the given PIXI DisplayObject,\n * which is emitted when the object is double tapped in less than\n * 500ms (using touch or mouse) on the same position (with a small tolerance).\n */\nexport const makeDoubleClickable = (pixiDisplayObject: PIXI.DisplayObject) => {\n  let lastClickTime = 0;\n  let lastClickGlobalX = 0;\n  let lastClickGlobalY = 0;\n\n  const handleTap = (event: PIXI.InteractionEvent) => {\n    const { x, y } = event.data.global;\n    const currentTime = Date.now();\n\n    if (\n      currentTime - lastClickTime < doubleClickDelay &&\n      Math.abs(x - lastClickGlobalX) <= moveTolerance &&\n      Math.abs(y - lastClickGlobalY) <= moveTolerance\n    ) {\n      // Wait for the next event cycle, as otherwise the \"touchend\"\n      // event could be catched by a dialog/another component shown\n      // as a result of the double click.\n      setTimeout(() => {\n        pixiDisplayObject.emit('doubleclick', event);\n      });\n    }\n\n    lastClickTime = currentTime;\n    lastClickGlobalX = x;\n    lastClickGlobalY = y;\n  };\n\n  pixiDisplayObject.interactive = true;\n  pixiDisplayObject.on('click', handleTap);\n  pixiDisplayObject.on('touchend', handleTap);\n};\n","// @flow\nexport type Polygon = Array<[number, number]>;\n\nexport function rotatePolygon(\n  vertices: Polygon,\n  centerX: number,\n  centerY: number,\n  angle: number\n): void {\n  //We want a clockwise rotation\n  const cosa = Math.cos(-angle);\n  const sina = Math.sin(-angle);\n  for (let i = 0, len = vertices.length; i < len; ++i) {\n    let x = vertices[i][0] - centerX;\n    let y = vertices[i][1] - centerY;\n    vertices[i][0] = centerX + x * cosa + y * sina;\n    vertices[i][1] = centerY - x * sina + y * cosa;\n  }\n}\n","// @flow\nimport * as PIXI from 'pixi.js-legacy';\nimport Rectangle from '../Utils/Rectangle';\nconst gd: libGDevelop = global.gd;\n\nexport default class SelectionRectangle {\n  instances: gdInitialInstancesContainer;\n  instanceMeasurer: any;\n  toSceneCoordinates: (x: number, y: number) => [number, number];\n\n  pixiRectangle: PIXI.Graphics;\n  selectionRectangleStart: any;\n  selectionRectangleEnd: any;\n  _instancesInSelectionRectangle: gdInitialInstance[];\n\n  selector: gdInitialInstanceJSFunctor;\n  /**\n   * Used to check if an instance is in the selection rectangle\n   */\n  _temporaryAABB: Rectangle;\n\n  constructor({\n    instances,\n    instanceMeasurer,\n    toSceneCoordinates,\n  }: {\n    instances: gdInitialInstancesContainer,\n    instanceMeasurer: any,\n    toSceneCoordinates: (x: number, y: number) => [number, number],\n  }) {\n    this.instances = instances;\n    this.instanceMeasurer = instanceMeasurer;\n    this.toSceneCoordinates = toSceneCoordinates;\n\n    this.pixiRectangle = new PIXI.Graphics();\n    this.pixiRectangle.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\n    this.selectionRectangleStart = null;\n    this.selectionRectangleEnd = null;\n    this._instancesInSelectionRectangle = [];\n\n    this._temporaryAABB = new Rectangle();\n    this.selector = new gd.InitialInstanceJSFunctor();\n    // $FlowFixMe - invoke is not writable\n    this.selector.invoke = instancePtr => {\n      // $FlowFixMe - wrapPointer is not exposed\n      const instance = gd.wrapPointer(instancePtr, gd.InitialInstance);\n      const instanceAABB = this.instanceMeasurer.getInstanceAABB(\n        instance,\n        this._temporaryAABB\n      );\n\n      if (!this.selectionRectangleStart || !this.selectionRectangleEnd) return;\n\n      const selectionSceneStart = toSceneCoordinates(\n        this.selectionRectangleStart.x,\n        this.selectionRectangleStart.y\n      );\n      const selectionSceneEnd = toSceneCoordinates(\n        this.selectionRectangleEnd.x,\n        this.selectionRectangleEnd.y\n      );\n\n      if (\n        selectionSceneStart[0] <= instanceAABB.left &&\n        instanceAABB.right <= selectionSceneEnd[0] &&\n        selectionSceneStart[1] <= instanceAABB.top &&\n        instanceAABB.bottom <= selectionSceneEnd[1]\n      ) {\n        this._instancesInSelectionRectangle.push(instance);\n      }\n    };\n  }\n\n  hasStartedSelectionRectangle() {\n    return this.selectionRectangleStart;\n  }\n\n  startSelectionRectangle = (x: number, y: number) => {\n    this.selectionRectangleStart = { x, y };\n    this.selectionRectangleEnd = { x, y };\n  };\n\n  updateSelectionRectangle = (lastX: number, lastY: number) => {\n    if (!this.selectionRectangleStart)\n      this.selectionRectangleStart = { x: lastX, y: lastY };\n\n    this.selectionRectangleEnd = { x: lastX, y: lastY };\n  };\n\n  endSelectionRectangle = () => {\n    if (!this.selectionRectangleStart) return [];\n\n    this._instancesInSelectionRectangle.length = 0;\n    if (this.selectionRectangleStart.x > this.selectionRectangleEnd.x) {\n      const tmp = this.selectionRectangleStart.x;\n      this.selectionRectangleStart.x = this.selectionRectangleEnd.x;\n      this.selectionRectangleEnd.x = tmp;\n    }\n    if (this.selectionRectangleStart.y > this.selectionRectangleEnd.y) {\n      const tmp = this.selectionRectangleStart.y;\n      this.selectionRectangleStart.y = this.selectionRectangleEnd.y;\n      this.selectionRectangleEnd.y = tmp;\n    }\n\n    this.instances.iterateOverInstances(\n      // $FlowFixMe - gd.castObject is not supporting typings.\n      this.selector\n    );\n\n    this.selectionRectangleStart = null;\n    return this._instancesInSelectionRectangle;\n  };\n\n  getPixiObject() {\n    return this.pixiRectangle;\n  }\n\n  render() {\n    if (!this.selectionRectangleStart) {\n      this.pixiRectangle.visible = false;\n      return;\n    }\n\n    let x1 = this.selectionRectangleStart.x;\n    let y1 = this.selectionRectangleStart.y;\n    let x2 = this.selectionRectangleEnd.x;\n    let y2 = this.selectionRectangleEnd.y;\n\n    this.pixiRectangle.visible = true;\n    this.pixiRectangle.clear();\n    this.pixiRectangle.beginFill(0x6868e8);\n    this.pixiRectangle.lineStyle(1, 0x6868e8, 1);\n    this.pixiRectangle.fill.alpha = 0.1;\n    this.pixiRectangle.alpha = 0.8;\n    this.pixiRectangle.drawRect(\n      Math.min(x1, x2),\n      Math.min(y1, y2),\n      Math.abs(x2 - x1),\n      Math.abs(y2 - y1)\n    );\n    this.pixiRectangle.endFill();\n  }\n\n  delete() {\n    this.selector.delete();\n  }\n}\n","// @flow\nimport { roundPosition } from '../Utils/GridHelpers';\nimport { type InstancesEditorSettings } from './InstancesEditorSettings';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  instances: gdInitialInstancesContainer,\n  instancesEditorSettings: InstancesEditorSettings,\n|};\n\nconst roundPositionsToGrid = (\n  pos: [number, number],\n  instancesEditorSettings: InstancesEditorSettings\n): [number, number] => {\n  const newPos = pos;\n\n  if (instancesEditorSettings.grid && instancesEditorSettings.snap) {\n    roundPosition(\n      newPos,\n      instancesEditorSettings.gridWidth,\n      instancesEditorSettings.gridHeight,\n      instancesEditorSettings.gridOffsetX,\n      instancesEditorSettings.gridOffsetY,\n      instancesEditorSettings.gridType\n    );\n  } else {\n    newPos[0] = Math.round(newPos[0]);\n    newPos[1] = Math.round(newPos[1]);\n  }\n\n  return newPos;\n};\n\n/**\n * Allow to add instances on the scene. Supports \"temporary\" instances,\n * which are real instances but can be deleted as long as they are not \"committed\".\n */\nexport default class InstancesAdder {\n  _instances: gdInitialInstancesContainer;\n  _temporaryInstances: Array<gdInitialInstance>;\n  _instancesEditorSettings: InstancesEditorSettings;\n  _zOrderFinder = new gd.HighestZOrderFinder();\n\n  constructor({ instances, instancesEditorSettings }: Props) {\n    this._instances = instances;\n    this._instancesEditorSettings = instancesEditorSettings;\n    this._temporaryInstances = [];\n  }\n\n  setInstancesEditorSettings(instancesEditorSettings: InstancesEditorSettings) {\n    this._instancesEditorSettings = instancesEditorSettings;\n  }\n\n  /**\n   * Immediately create new instance at the specified position\n   * (specified in scene coordinates).\n   */\n  addInstances = (\n    pos: [number, number],\n    objectNames: Array<string>\n  ): Array<gdInitialInstance> => {\n    this._instances.iterateOverInstances(this._zOrderFinder);\n    const zOrder = this._zOrderFinder.getHighestZOrder() + 1;\n\n    const newPos = roundPositionsToGrid(pos, this._instancesEditorSettings);\n    const addedInstances = objectNames.map(objectName => {\n      const instance: gdInitialInstance = this._instances.insertNewInitialInstance();\n      instance.setObjectName(objectName);\n      instance.setX(newPos[0]);\n      instance.setY(newPos[1]);\n      instance.setZOrder(zOrder);\n\n      return instance;\n    });\n\n    return addedInstances;\n  };\n\n  /**\n   * Create temporary instances at the specified position\n   * (specified in scene coordinates).\n   */\n  createOrUpdateTemporaryInstancesFromObjectNames = (\n    pos: [number, number],\n    objectNames: Array<string>\n  ) => {\n    if (!objectNames.length) return;\n\n    if (!this._temporaryInstances.length) {\n      this._createTemporaryInstancesFromObjectNames(pos, objectNames);\n    } else {\n      this.updateTemporaryInstancePositions(pos);\n    }\n  };\n\n  _createTemporaryInstancesFromObjectNames = (\n    pos: [number, number],\n    objectNames: Array<string>\n  ) => {\n    this.deleteTemporaryInstances();\n\n    this._instances.iterateOverInstances(this._zOrderFinder);\n    const zOrder = this._zOrderFinder.getHighestZOrder() + 1;\n\n    const newPos = roundPositionsToGrid(pos, this._instancesEditorSettings);\n    this._temporaryInstances = objectNames.map(objectName => {\n      const instance: gdInitialInstance = this._instances.insertNewInitialInstance();\n      instance.setObjectName(objectName);\n      instance.setX(newPos[0]);\n      instance.setY(newPos[1]);\n      instance.setZOrder(zOrder);\n\n      return instance;\n    });\n  };\n\n  /**\n   * Update the temporary instances  positions\n   * (specified in scene coordinates). Useful when dragging these instances.\n   */\n  updateTemporaryInstancePositions = (\n    pos: [number, number]\n  ): Array<gdInitialInstance> => {\n    const newPos = roundPositionsToGrid(pos, this._instancesEditorSettings);\n    this._temporaryInstances.forEach(instance => {\n      instance.setX(newPos[0]);\n      instance.setY(newPos[1]);\n    });\n\n    return this._temporaryInstances;\n  };\n\n  /**\n   * Delete the temporary instances.\n   */\n  deleteTemporaryInstances() {\n    this._temporaryInstances.forEach(instance => {\n      this._instances.removeInstance(instance);\n    });\n    this._temporaryInstances = [];\n  }\n\n  /**\n   * Consider the temporary instances as not temporary anymore.\n   */\n  commitTemporaryInstances() {\n    this._temporaryInstances = [];\n  }\n\n  unmount() {\n    this._zOrderFinder.delete();\n\n    // Nothing to do for temporaries instances, that should have been deleted/commited by this moment.\n    // Don't take the risk to delete them now as this._instances might have been deleted/invalidated\n    // already.\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Background from '../../UI/Background';\nimport enumerateLayers from '../../LayersList/EnumerateLayers';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport { type Schema } from '../../PropertiesEditor';\nimport VariablesList from '../../VariablesList';\nimport getObjectByName from '../../Utils/GetObjectByName';\nimport IconButton from '../../UI/IconButton';\nimport { Line, Column } from '../../UI/Grid';\nimport OpenInNew from '@material-ui/icons/OpenInNew';\nimport Text from '../../UI/Text';\nimport { type UnsavedChanges } from '../../MainFrame/UnsavedChangesContext';\nimport ScrollView from '../../UI/ScrollView';\nimport EventsRootVariablesFinder from '../../Utils/EventsRootVariablesFinder';\n\ntype Props = {|\n  project: gdProject,\n  layout: gdLayout,\n  instances: Array<gdInitialInstance>,\n  onEditObjectByName: string => void,\n  onInstancesModified?: (Array<gdInitialInstance>) => void,\n  editInstanceVariables: gdInitialInstance => void,\n  unsavedChanges?: ?UnsavedChanges,\n  i18n: I18nType,\n|};\n\nexport default class InstancePropertiesEditor extends React.Component<Props> {\n  _instanceVariablesList: { current: null | VariablesList } = React.createRef();\n  schema: Schema = [\n    {\n      name: this.props.i18n._(t`Object name`),\n      valueType: 'string',\n      disabled: true,\n      getValue: (instance: gdInitialInstance) => instance.getObjectName(),\n      setValue: (instance: gdInitialInstance, newValue: string) =>\n        instance.setObjectName(newValue),\n      onEditButtonClick: (instance: gdInitialInstance) =>\n        this.props.onEditObjectByName(instance.getObjectName()),\n    },\n    {\n      name: this.props.i18n._(t`Position`),\n      type: 'row',\n      children: [\n        {\n          name: this.props.i18n._(t`X`),\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getX(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setX(newValue),\n        },\n        {\n          name: this.props.i18n._(t`Y`),\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getY(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setY(newValue),\n        },\n      ],\n    },\n    {\n      name: this.props.i18n._(t`Angle`),\n      valueType: 'number',\n      getValue: (instance: gdInitialInstance) => instance.getAngle(),\n      setValue: (instance: gdInitialInstance, newValue: number) =>\n        instance.setAngle(newValue),\n    },\n    {\n      name: this.props.i18n._(t`Lock position/angle in the editor`),\n      valueType: 'boolean',\n      getValue: (instance: gdInitialInstance) => instance.isLocked(),\n      setValue: (instance: gdInitialInstance, newValue: boolean) =>\n        instance.setLocked(newValue),\n    },\n    {\n      name: this.props.i18n._(t`Z Order`),\n      valueType: 'number',\n      getValue: (instance: gdInitialInstance) => instance.getZOrder(),\n      setValue: (instance: gdInitialInstance, newValue: number) =>\n        instance.setZOrder(newValue),\n    },\n    {\n      name: this.props.i18n._(t`Layer`),\n      valueType: 'string',\n      getChoices: () => enumerateLayers(this.props.layout),\n      getValue: (instance: gdInitialInstance) => instance.getLayer(),\n      setValue: (instance: gdInitialInstance, newValue: string) =>\n        instance.setLayer(newValue),\n    },\n    {\n      name: this.props.i18n._(t`Custom size`),\n      valueType: 'boolean',\n      getValue: (instance: gdInitialInstance) => instance.hasCustomSize(),\n      setValue: (instance: gdInitialInstance, newValue: boolean) =>\n        instance.setHasCustomSize(newValue),\n    },\n    {\n      name: 'custom-size-row',\n      type: 'row',\n      children: [\n        {\n          name: this.props.i18n._(t`Width`),\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getCustomWidth(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setCustomWidth(Math.max(newValue, 0)),\n        },\n        {\n          name: this.props.i18n._(t`Height`),\n          valueType: 'number',\n          getValue: (instance: gdInitialInstance) => instance.getCustomHeight(),\n          setValue: (instance: gdInitialInstance, newValue: number) =>\n            instance.setCustomHeight(Math.max(newValue, 0)),\n        },\n      ],\n    },\n  ];\n\n  _renderEmpty() {\n    return (\n      <EmptyMessage>\n        <Trans>\n          Click on an instance in the scene to display its properties\n        </Trans>\n      </EmptyMessage>\n    );\n  }\n\n  _renderInstancesProperties() {\n    const { project, layout, instances } = this.props;\n    const instance = instances[0];\n    const associatedObjectName = instance.getObjectName();\n    const object = getObjectByName(project, layout, associatedObjectName);\n    //TODO: multiple instances support\n    const properties = instance.getCustomProperties(project, layout);\n    const instanceSchema = propertiesMapToSchema(\n      properties,\n      (instance: gdInitialInstance) =>\n        instance.getCustomProperties(project, layout),\n      (instance: gdInitialInstance, name, value) =>\n        instance.updateCustomProperty(name, value, project, layout)\n    );\n\n    return (\n      <ScrollView\n        autoHideScrollbar\n        key={instances\n          .map((instance: gdInitialInstance) => '' + instance.ptr)\n          .join(';')}\n      >\n        <Line>\n          <Column expand noMargin>\n            <Column>\n              <PropertiesEditor\n                unsavedChanges={this.props.unsavedChanges}\n                schema={this.schema.concat(instanceSchema)}\n                instances={instances}\n                onInstancesModified={this.props.onInstancesModified}\n              />\n              <Line alignItems=\"center\" justifyContent=\"space-between\">\n                <Text>\n                  <Trans>Instance Variables</Trans>\n                </Text>\n                <IconButton\n                  onClick={() => {\n                    this.props.editInstanceVariables(instance);\n                  }}\n                >\n                  <OpenInNew />\n                </IconButton>\n              </Line>\n            </Column>\n            <VariablesList\n              inheritedVariablesContainer={\n                object ? object.getVariables() : null\n              }\n              variablesContainer={instance.getVariables()}\n              onComputeAllVariableNames={() =>\n                object\n                  ? EventsRootVariablesFinder.findAllObjectVariables(\n                      project.getCurrentPlatform(),\n                      project,\n                      layout,\n                      object\n                    )\n                  : []\n              }\n              ref={this._instanceVariablesList}\n            />\n          </Column>\n        </Line>\n      </ScrollView>\n    );\n  }\n\n  render() {\n    const { instances } = this.props;\n\n    return (\n      <Background>\n        {!instances || !instances.length\n          ? this._renderEmpty()\n          : this._renderInstancesProperties()}\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport {\n  AutoSizer,\n  Table as RVTable,\n  Column as RVColumn,\n} from 'react-virtualized';\nimport ThemeConsumer from '../../UI/Theme/ThemeConsumer';\nimport SearchBar, { useShouldAutofocusSearchbar } from '../../UI/SearchBar';\nconst gd /*TODO: add flow in this file */ = global.gd;\n\ntype State = {|\n  searchText: string,\n|};\n\ntype Props = {|\n  instances: gdInitialInstancesContainer,\n  selectedInstances: Array<gdInitialInstance>,\n  onSelectInstances: (Array<gdInitialInstance>) => void,\n|};\n\ntype RenderedRowInfo = {\n  instance: gdInitialInstance,\n  name: string,\n  locked: string,\n  x: string,\n  y: string,\n  angle: string,\n  layer: string,\n  zOrder: string,\n};\n\nconst styles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'stretch',\n  },\n};\n\nexport default class InstancesList extends Component<Props, State> {\n  state = {\n    searchText: '',\n  };\n  renderedRows: Array<RenderedRowInfo> = [];\n  instanceRowRenderer: ?typeof gd.InitialInstanceJSFunctor;\n  table: ?typeof RVTable;\n  _searchBar = React.createRef<SearchBar>();\n\n  componentDidMount() {\n    if (useShouldAutofocusSearchbar() && this._searchBar.current)\n      this._searchBar.current.focus();\n  }\n\n  componentWillMount() {\n    // Functor used to display an instance row\n    this.instanceRowRenderer = new gd.InitialInstanceJSFunctor();\n    this.instanceRowRenderer.invoke = instancePtr => {\n      const { searchText } = this.state;\n      const instance = gd.wrapPointer(instancePtr, gd.InitialInstance);\n\n      const name: string = instance.getObjectName();\n      if (\n        !searchText ||\n        name.toLowerCase().indexOf(searchText.toLowerCase()) !== -1\n      ) {\n        this.renderedRows.push({\n          instance,\n          name,\n          locked: instance.isLocked() ? '🔒' : '',\n          x: instance.getX().toFixed(2),\n          y: instance.getY().toFixed(2),\n          angle: instance.getAngle().toFixed(2),\n          layer: instance.getLayer(),\n          zOrder: instance.getZOrder(),\n        });\n      }\n    };\n  }\n\n  componentWillUnmount() {\n    if (this.instanceRowRenderer) this.instanceRowRenderer.delete();\n  }\n\n  _onRowClick = ({ index }: { index: number }) => {\n    if (!this.renderedRows[index]) return;\n    this.props.onSelectInstances([this.renderedRows[index].instance]);\n  };\n\n  _rowGetter = ({ index }: { index: number }) => {\n    return this.renderedRows[index];\n  };\n\n  _rowClassName = ({ index }: { index: number }) => {\n    if (index < 0) {\n      return 'tableHeaderRow';\n    } else {\n      const row = this.renderedRows[index];\n      if (row && this.props.selectedInstances.indexOf(row.instance) !== -1)\n        return 'tableSelectedRow';\n\n      return index % 2 === 0 ? 'tableEvenRow' : 'tableOddRow';\n    }\n  };\n\n  _selectFirstInstance = () => {\n    if (this.renderedRows.length) {\n      this.props.onSelectInstances([this.renderedRows[0].instance]);\n    }\n  };\n\n  render() {\n    const { searchText } = this.state;\n    const { instances } = this.props;\n\n    if (!this.instanceRowRenderer) return null;\n\n    this.renderedRows.length = 0;\n    instances.iterateOverInstances(this.instanceRowRenderer);\n\n    // Force RVTable component to be mounted again if instances\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const tableKey = instances.ptr;\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <div style={styles.container}>\n            <div style={{ flex: 1 }}>\n              <AutoSizer>\n                {({ height, width }) => (\n                  <RVTable\n                    ref={table => (this.table = table)}\n                    key={tableKey}\n                    headerHeight={30}\n                    height={height}\n                    className={`gd-table ${muiTheme.tableRootClassName}`}\n                    headerClassName={'tableHeaderColumn'}\n                    rowCount={this.renderedRows.length}\n                    rowGetter={this._rowGetter}\n                    rowHeight={32}\n                    onRowClick={this._onRowClick}\n                    rowClassName={this._rowClassName}\n                    width={width}\n                  >\n                    <RVColumn\n                      label={<Trans>Object name</Trans>}\n                      dataKey=\"name\"\n                      width={width * 0.35}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label=\"\"\n                      dataKey=\"locked\"\n                      width={width * 0.05}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>X</Trans>}\n                      dataKey=\"x\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Y</Trans>}\n                      dataKey=\"y\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Angle</Trans>}\n                      dataKey=\"angle\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Layer</Trans>}\n                      dataKey=\"layer\"\n                      width={width * 0.2}\n                      className={'tableColumn'}\n                    />\n                    <RVColumn\n                      label={<Trans>Z Order</Trans>}\n                      dataKey=\"zOrder\"\n                      width={width * 0.1}\n                      className={'tableColumn'}\n                    />\n                  </RVTable>\n                )}\n              </AutoSizer>\n            </div>\n            <SearchBar\n              value={searchText}\n              onChange={searchText =>\n                this.setState({\n                  searchText,\n                })\n              }\n              onRequestSearch={this._selectFirstInstance}\n              ref={this._searchBar}\n            />\n          </div>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n","import { Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Text from '../UI/Text';\nimport enumerateLayers from './EnumerateLayers';\n\nexport default class VariablesEditorDialog extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedLayer: '',\n    };\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (!this.props.open && newProps.open) {\n      this.setState({\n        selectedLayer: '',\n      });\n    }\n  }\n\n  render() {\n    if (!this.props.layersContainer || !this.props.open) return null;\n\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        keyboardFocused={true}\n        onClick={() => this.props.onClose(false)}\n      />,\n      <FlatButton\n        key=\"remove\"\n        label={<Trans>Remove objects</Trans>}\n        onClick={() => this.props.onClose(true, null)}\n      />,\n      <FlatButton\n        key=\"move\"\n        label={<Trans>Move objects</Trans>}\n        primary={true}\n        onClick={() => this.props.onClose(true, this.state.selectedLayer)}\n      />,\n    ];\n\n    const layers = enumerateLayers(this.props.layersContainer);\n    const choices = layers\n      .filter(({ value }) => {\n        return value !== this.props.layerRemoved;\n      })\n      .map(({ value, label }) => (\n        <SelectOption key={value} value={value} primaryText={label} />\n      ));\n\n    return (\n      <Dialog\n        title={<Trans>Objects on {this.props.layerRemoved}</Trans>}\n        actions={actions}\n        cannotBeDismissed={false}\n        open={this.props.open}\n        onRequestClose={this.props.onCancel}\n      >\n        <Text>\n          <Trans>Move objects on layer {this.props.layerRemoved} to:</Trans>\n        </Text>\n        <SelectField\n          value={this.state.selectedLayer}\n          onChange={(event, index, newValue) => {\n            this.setState({ selectedLayer: newValue });\n          }}\n        >\n          {choices}\n        </SelectField>\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport ColorField from '../UI/ColorField';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport {\n  rgbColorToRGBString,\n  rgbStringAndAlphaToRGBColor,\n} from '../Utils/ColorTransformer';\nimport { useSerializableObjectCancelableEditor } from '../Utils/SerializableObjectCancelableEditor';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport Text from '../UI/Text';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport HotReloadPreviewButton, {\n  type HotReloadPreviewButtonProps,\n} from '../HotReload/HotReloadPreviewButton';\nimport HelpButton from '../UI/HelpButton';\nimport { Tab, Tabs } from '../UI/Tabs';\nimport EffectsList from '../EffectsList';\nimport { Column, Spacer } from '../UI/Grid';\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  layer: gdLayer,\n  initialInstances: gdInitialInstancesContainer,\n\n  initialTab: 'properties' | 'effects',\n\n  onClose: () => void,\n\n  // Preview:\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n|};\n\nconst LayerEditorDialog = (props: Props) => {\n  const {\n    initialTab,\n    layer,\n    initialInstances,\n    onClose,\n    hotReloadPreviewButtonProps,\n  } = props;\n  const forceUpdate = useForceUpdate();\n  const onCancelChanges = useSerializableObjectCancelableEditor({\n    serializableObject: layer,\n    onCancel: onClose,\n  });\n  const [currentTab, setCurrentTab] = React.useState(initialTab);\n  const { instancesCount, highestZOrder } = React.useMemo(\n    () => {\n      const zOrderFinder = new gd.HighestZOrderFinder();\n      zOrderFinder.restrictSearchToLayer(layer.getName());\n\n      initialInstances.iterateOverInstances(zOrderFinder);\n      const instancesCount = zOrderFinder.getInstancesCount();\n      const highestZOrder = zOrderFinder.getHighestZOrder();\n      zOrderFinder.delete();\n      return { instancesCount, highestZOrder };\n    },\n    [layer, initialInstances]\n  );\n\n  return (\n    <Dialog\n      onApply={onClose}\n      noMargin\n      open\n      title={<Trans>Edit Layer Properties</Trans>}\n      secondaryActions={[\n        <HelpButton\n          key=\"help\"\n          helpPagePath={'/interface/scene-editor/layer-effects' /* TODO */}\n        />,\n        <HotReloadPreviewButton\n          key=\"hot-reload-preview-button\"\n          {...hotReloadPreviewButtonProps}\n        />,\n      ]}\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          onClick={onCancelChanges}\n          key={'Cancel'}\n        />,\n        <FlatButton\n          label={<Trans>Apply</Trans>}\n          primary\n          keyboardFocused\n          onClick={onClose}\n          key={'Apply'}\n        />,\n      ]}\n      onRequestClose={onCancelChanges}\n      fullHeight\n      flexBody\n    >\n      <Column expand noMargin useFullHeight>\n        <Tabs value={currentTab} onChange={setCurrentTab}>\n          <Tab label={<Trans>Properties</Trans>} value=\"properties\" />\n          <Tab label={<Trans>Effects</Trans>} value=\"effects\" />\n        </Tabs>\n        {currentTab === 'properties' && (\n          <ColumnStackLayout>\n            {layer.isLightingLayer() ? (\n              <DismissableAlertMessage\n                kind=\"info\"\n                identifier=\"lighting-layer-usage\"\n              >\n                <Trans>\n                  The lighting layer renders an ambient light on the scene. All\n                  lights should be placed on this layer so that shadows are\n                  properly rendered. By default, the layer follows the base\n                  layer camera. Uncheck this if you want to manually move the\n                  camera using events.\n                </Trans>\n              </DismissableAlertMessage>\n            ) : null}\n            <Text>\n              There are {instancesCount} instances of objects on this layer.\n            </Text>\n            {!props.project.getUseDeprecatedZeroAsDefaultZOrder() && (\n              <Text>\n                Objects created using events on this layer will be given a \"Z\n                order\" of {highestZOrder + 1}, so that they appear in front of\n                all objects of this layer. You can change this using the action\n                to change an object Z order, after using an action to create it.\n              </Text>\n            )}\n            <InlineCheckbox\n              label={<Trans>Layer visible</Trans>}\n              checked={layer.getVisibility()}\n              onCheck={(e, checked) => {\n                layer.setVisibility(checked);\n                forceUpdate();\n              }}\n            />\n            {layer.isLightingLayer() ? (\n              <React.Fragment>\n                <Text size=\"title\">\n                  <Trans>Lighting settings</Trans>\n                </Text>\n                <InlineCheckbox\n                  label={<Trans>Automatically follow the base layer.</Trans>}\n                  checked={layer.isFollowingBaseLayerCamera()}\n                  onCheck={(e, checked) => {\n                    layer.setFollowBaseLayerCamera(checked);\n                    forceUpdate();\n                  }}\n                />\n                <ColorField\n                  fullWidth\n                  floatingLabelText={<Trans>Ambient light color</Trans>}\n                  disableAlpha\n                  color={rgbColorToRGBString({\n                    r: layer.getAmbientLightColorRed(),\n                    g: layer.getAmbientLightColorGreen(),\n                    b: layer.getAmbientLightColorBlue(),\n                  })}\n                  onChange={color => {\n                    const rgbColor = rgbStringAndAlphaToRGBColor(color);\n                    if (rgbColor) {\n                      layer.setAmbientLightColor(\n                        rgbColor.r,\n                        rgbColor.g,\n                        rgbColor.b\n                      );\n                      forceUpdate();\n                    }\n                  }}\n                />\n              </React.Fragment>\n            ) : (\n              // Add some space to avoid a dialog to short that would show scrollbars\n              <React.Fragment>\n                <Spacer />\n                <Spacer />\n              </React.Fragment>\n            )}\n          </ColumnStackLayout>\n        )}\n        {currentTab === 'effects' && (\n          <EffectsList\n            target=\"layer\"\n            project={props.project}\n            resourceSources={props.resourceSources}\n            onChooseResource={props.onChooseResource}\n            resourceExternalEditors={props.resourceExternalEditors}\n            effectsContainer={layer.getEffects()}\n            onEffectsUpdated={\n              forceUpdate /*Force update to ensure dialog is properly positioned*/\n            }\n          />\n        )}\n      </Column>\n    </Dialog>\n  );\n};\n\nexport default LayerEditorDialog;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport ObjectsEditorService from './ObjectsEditorService';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport BehaviorsEditor from '../BehaviorsEditor';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { useSerializableObjectCancelableEditor } from '../Utils/SerializableObjectCancelableEditor';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport { Column, Line } from '../UI/Grid';\nimport { type EditorProps } from './Editors/EditorProps.flow';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport HotReloadPreviewButton, {\n  type HotReloadPreviewButtonProps,\n} from '../HotReload/HotReloadPreviewButton';\nimport EffectsList from '../EffectsList';\nimport VariablesList from '../VariablesList/index';\n\ntype Props = {|\n  open: boolean,\n  object: ?gdObject,\n\n  onApply: () => void,\n  onCancel: () => void,\n\n  // Object renaming:\n  onRename: string => void,\n  canRenameObject: string => boolean,\n\n  // Passed down to object editors:\n  project: gdProject,\n  onComputeAllVariableNames: () => Array<string>,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  unsavedChanges?: UnsavedChanges,\n  onUpdateBehaviorsSharedData: () => void,\n  initialTab: ?string,\n\n  // Preview:\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n|};\n\ntype InnerDialogProps = {|\n  ...Props,\n  editorComponent: ?Class<React.Component<EditorProps, any>>,\n  objectName: string,\n  helpPagePath: ?string,\n  object: gdObject,\n|};\n\nconst InnerDialog = (props: InnerDialogProps) => {\n  const [currentTab, setCurrentTab] = React.useState(\n    props.initialTab || 'properties'\n  );\n  const [newObjectName, setNewObjectName] = React.useState(props.objectName);\n  const forceUpdate = useForceUpdate();\n  const onCancelChanges = useSerializableObjectCancelableEditor({\n    serializableObject: props.object,\n    useProjectToUnserialize: props.project,\n    onCancel: props.onCancel,\n  });\n\n  const EditorComponent = props.editorComponent;\n\n  const onApply = () => {\n    props.onApply();\n    // Do the renaming *after* applying changes, as \"withSerializableObject\"\n    // HOC will unserialize the object to apply modifications, which will\n    // override the name.\n    props.onRename(newObjectName);\n  };\n\n  return (\n    <Dialog\n      onApply={onApply}\n      key={props.object && props.object.ptr}\n      secondaryActions={[\n        <HelpButton key=\"help-button\" helpPagePath={props.helpPagePath} />,\n        <HotReloadPreviewButton\n          key=\"hot-reload-preview-button\"\n          {...props.hotReloadPreviewButtonProps}\n        />,\n      ]}\n      actions={[\n        <FlatButton\n          key=\"cancel\"\n          label={<Trans>Cancel</Trans>}\n          onClick={onCancelChanges}\n        />,\n        <FlatButton\n          key=\"apply\"\n          label={<Trans>Apply</Trans>}\n          primary\n          keyboardFocused\n          onClick={onApply}\n        />,\n      ]}\n      noMargin\n      onRequestClose={onCancelChanges}\n      cannotBeDismissed={true}\n      open={props.open}\n      noTitleMargin\n      fullHeight\n      flexBody\n      title={\n        <div>\n          <Tabs value={currentTab} onChange={setCurrentTab}>\n            <Tab\n              label={<Trans>Properties</Trans>}\n              value={'properties'}\n              key={'properties'}\n            />\n            <Tab\n              label={<Trans>Behaviors</Trans>}\n              value={'behaviors'}\n              key={'behaviors'}\n            />\n            <Tab\n              label={<Trans>Variables</Trans>}\n              value={'variables'}\n              key={'variables'}\n            />\n            <Tab\n              label={<Trans>Effects</Trans>}\n              value={'effects'}\n              key={'effects'}\n            />\n          </Tabs>\n        </div>\n      }\n    >\n      {currentTab === 'properties' && EditorComponent && (\n        <Column\n          noMargin\n          expand\n          useFullHeight={\n            true /* Ensure editors with large/scrolling children won't grow outside of the dialog. */\n          }\n          noOverflowParent={\n            true /* Ensure editors with large/scrolling children won't grow outside of the dialog. */\n          }\n        >\n          <Line>\n            <Column expand>\n              <SemiControlledTextField\n                fullWidth\n                commitOnBlur\n                floatingLabelText={<Trans>Object name</Trans>}\n                floatingLabelFixed\n                value={newObjectName}\n                hintText={t`Object Name`}\n                onChange={text => {\n                  if (text === newObjectName) return;\n\n                  if (props.canRenameObject(text)) {\n                    setNewObjectName(text);\n                  }\n                }}\n              />\n            </Column>\n          </Line>\n          <EditorComponent\n            object={props.object}\n            project={props.project}\n            resourceSources={props.resourceSources}\n            onChooseResource={props.onChooseResource}\n            resourceExternalEditors={props.resourceExternalEditors}\n            onSizeUpdated={\n              forceUpdate /*Force update to ensure dialog is properly positionned*/\n            }\n            objectName={props.objectName}\n          />\n        </Column>\n      )}\n      {currentTab === 'behaviors' && (\n        <BehaviorsEditor\n          object={props.object}\n          project={props.project}\n          resourceSources={props.resourceSources}\n          onChooseResource={props.onChooseResource}\n          resourceExternalEditors={props.resourceExternalEditors}\n          onSizeUpdated={\n            forceUpdate /*Force update to ensure dialog is properly positionned*/\n          }\n          onUpdateBehaviorsSharedData={props.onUpdateBehaviorsSharedData}\n        />\n      )}\n      {currentTab === 'variables' && (\n        <VariablesList\n          variablesContainer={props.object.getVariables()}\n          emptyExplanationMessage={\n            <Trans>\n              When you add variables to an object, any instance of the object\n              put on the scene or created during the game will have these\n              variables attached to it.\n            </Trans>\n          }\n          emptyExplanationSecondMessage={\n            <Trans>\n              For example, you can have a variable called Life representing the\n              health of the object.\n            </Trans>\n          }\n          helpPagePath={'/all-features/variables/object-variables'}\n          onSizeUpdated={\n            forceUpdate /*Force update to ensure dialog is properly positioned*/\n          }\n          onComputeAllVariableNames={props.onComputeAllVariableNames}\n        />\n      )}\n      {currentTab === 'effects' && (\n        <EffectsList\n          target=\"object\"\n          project={props.project}\n          resourceSources={props.resourceSources}\n          onChooseResource={props.onChooseResource}\n          resourceExternalEditors={props.resourceExternalEditors}\n          effectsContainer={props.object.getEffects()}\n          onEffectsUpdated={\n            forceUpdate /*Force update to ensure dialog is properly positionned*/\n          }\n        />\n      )}\n    </Dialog>\n  );\n};\n\ntype State = {|\n  editorComponent: ?Class<React.Component<EditorProps, any>>,\n  castToObjectType: ?(object: gdObject) => gdObject,\n  helpPagePath: ?string,\n  objectName: string,\n|};\n\nexport default class ObjectEditorDialog extends Component<Props, State> {\n  state = {\n    editorComponent: null,\n    castToObjectType: null,\n    helpPagePath: null,\n    objectName: '',\n  };\n\n  componentWillMount() {\n    this._loadFrom(this.props.object);\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      (!this.props.open && newProps.open) ||\n      (newProps.open && this.props.object !== newProps.object)\n    ) {\n      this._loadFrom(newProps.object);\n    }\n  }\n\n  _loadFrom(object: ?gdObject) {\n    if (!object) return;\n\n    const editorConfiguration = ObjectsEditorService.getEditorConfiguration(\n      object.getType()\n    );\n    if (!editorConfiguration) {\n      return this.setState({\n        editorComponent: null,\n        castToObjectType: null,\n      });\n    }\n\n    this.setState({\n      editorComponent: editorConfiguration.component,\n      helpPagePath: editorConfiguration.helpPagePath,\n      castToObjectType: editorConfiguration.castToObjectType,\n      objectName: object.getName(),\n    });\n  }\n\n  render() {\n    const { object, initialTab } = this.props;\n    const { editorComponent, castToObjectType, helpPagePath } = this.state;\n\n    if (!object || !castToObjectType) return null;\n\n    return (\n      <InnerDialog\n        {...this.props}\n        editorComponent={editorComponent}\n        key={this.props.object && this.props.object.ptr}\n        helpPagePath={helpPagePath}\n        object={castToObjectType(object)}\n        objectName={this.state.objectName}\n        initialTab={initialTab}\n      />\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport { Line, Column } from '../../UI/Grid';\nimport ColorPicker from '../../UI/ColorField/ColorPicker';\nimport MiniToolbar, { MiniToolbarText } from '../../UI/MiniToolbar';\nimport ResourceSelector from '../../ResourcesList/ResourceSelector';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type EditorProps } from './EditorProps.flow';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nconst gd = global.gd;\n\nconst toolbarItemStyle = {\n  marginRight: 10,\n};\n\nconst styles = {\n  sizeTextField: {\n    width: 90,\n    ...toolbarItemStyle,\n  },\n  resourcesSelector: { alignSelf: 'center' },\n  toolbarItem: toolbarItemStyle,\n  checkbox: toolbarItemStyle,\n};\n\nexport default class TextEditor extends React.Component<EditorProps, void> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const textObject = gd.asTextObject(object);\n\n    return (\n      <Column noMargin>\n        <MiniToolbar>\n          <MiniToolbarText firstChild>\n            <Trans>Size:</Trans>\n          </MiniToolbarText>\n          <SemiControlledTextField\n            commitOnBlur\n            type=\"number\"\n            margin=\"none\"\n            style={styles.sizeTextField}\n            value={textObject.getCharacterSize()}\n            onChange={value => {\n              textObject.setCharacterSize(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <MiniToolbarText>\n            <Trans>Color:</Trans>\n          </MiniToolbarText>\n          <ColorPicker\n            style={styles.toolbarItem}\n            disableAlpha\n            color={{\n              r: textObject.getColorR(),\n              g: textObject.getColorG(),\n              b: textObject.getColorB(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              textObject.setColor(color.rgb.r, color.rgb.g, color.rgb.b);\n              this.forceUpdate();\n            }}\n          />\n          <Checkbox\n            label={<Trans>Bold</Trans>}\n            checked={textObject.isBold()}\n            onCheck={(e, checked) => {\n              textObject.setBold(checked);\n              this.forceUpdate();\n            }}\n            style={styles.checkbox}\n          />\n          <Checkbox\n            label={<Trans>Italic</Trans>}\n            checked={textObject.isItalic()}\n            onCheck={(e, checked) => {\n              textObject.setItalic(checked);\n              this.forceUpdate();\n            }}\n            style={styles.checkbox}\n          />\n          <MiniToolbarText>\n            <Trans>Font:</Trans>\n          </MiniToolbarText>\n          <ResourceSelector\n            margin=\"none\"\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceExternalEditors={resourceExternalEditors}\n            resourcesLoader={ResourcesLoader}\n            resourceKind=\"font\"\n            fullWidth\n            canBeReset\n            initialResourceName={textObject.getFontName()}\n            onChange={resourceName => {\n              textObject.setFontName(resourceName);\n              this.forceUpdate();\n            }}\n            hintText={<Trans>Choose a font</Trans>}\n            style={styles.resourcesSelector}\n          />\n        </MiniToolbar>\n        <Line noMargin>\n          <Column expand>\n            <Line>\n              <SemiControlledTextField\n                floatingLabelText={<Trans>Initial text to display</Trans>}\n                floatingLabelFixed\n                commitOnBlur\n                hintText={t`Enter the text to be displayed by the object`}\n                fullWidth\n                multiline\n                rows={8}\n                rowsMax={8}\n                value={textObject.getString()}\n                onChange={value => {\n                  textObject.setString(value);\n                  this.forceUpdate();\n                  this.props.onSizeUpdated();\n                }}\n              />\n            </Line>\n          </Column>\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport ResourceSelectorWithThumbnail from '../../ResourcesList/ResourceSelectorWithThumbnail';\nimport { type EditorProps } from './EditorProps.flow';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class TiledSpriteEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const tiledSpriteObject = gd.asTiledSpriteObject(object);\n\n    return (\n      <ColumnStackLayout>\n        <ResourceSelectorWithThumbnail\n          project={project}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceKind=\"image\"\n          resourceName={tiledSpriteObject.getTexture()}\n          resourceExternalEditors={resourceExternalEditors}\n          onChange={resourceName => {\n            tiledSpriteObject.setTexture(resourceName);\n            this.forceUpdate();\n          }}\n          floatingLabelText={<Trans>Select an image</Trans>}\n        />\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default width (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={tiledSpriteObject.getWidth()}\n            onChange={value => {\n              tiledSpriteObject.setWidth(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default height (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={tiledSpriteObject.getHeight()}\n            onChange={value => {\n              tiledSpriteObject.setHeight(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </ColumnStackLayout>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport ResourceSelectorWithThumbnail from '../../ResourcesList/ResourceSelectorWithThumbnail';\nimport { type EditorProps } from './EditorProps.flow';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class PanelSpriteEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const panelSpriteObject = gd.asPanelSpriteObject(object);\n\n    return (\n      <ColumnStackLayout>\n        <ResourceSelectorWithThumbnail\n          project={project}\n          resourceSources={resourceSources}\n          onChooseResource={onChooseResource}\n          resourceExternalEditors={resourceExternalEditors}\n          resourceKind=\"image\"\n          resourceName={panelSpriteObject.getTexture()}\n          onChange={resourceName => {\n            panelSpriteObject.setTexture(resourceName);\n            this.forceUpdate();\n          }}\n          floatingLabelText={<Trans>Select an image</Trans>}\n        />\n        <Checkbox\n          label={\n            <Trans>\n              Repeat borders and center textures (instead of stretching them)\n            </Trans>\n          }\n          checked={panelSpriteObject.isTiled()}\n          onCheck={(e, checked) => {\n            panelSpriteObject.setTiled(checked);\n            this.forceUpdate();\n          }}\n        />\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Top margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getTopMargin()}\n            onChange={value => {\n              panelSpriteObject.setTopMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Bottom margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getBottomMargin()}\n            onChange={value => {\n              panelSpriteObject.setBottomMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Left margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getLeftMargin()}\n            onChange={value => {\n              panelSpriteObject.setLeftMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Right margin</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getRightMargin()}\n            onChange={value => {\n              panelSpriteObject.setRightMargin(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default width (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getWidth()}\n            onChange={value => {\n              panelSpriteObject.setWidth(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Default height (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={panelSpriteObject.getHeight()}\n            onChange={value => {\n              panelSpriteObject.setHeight(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </ColumnStackLayout>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport SpritesList from './SpritesList';\nimport Add from '@material-ui/icons/Add';\nimport Delete from '@material-ui/icons/Delete';\nimport IconButton from '../../../UI/IconButton';\nimport FlatButton from '../../../UI/FlatButton';\nimport RaisedButton from '../../../UI/RaisedButton';\nimport { mapFor } from '../../../Utils/MapFor';\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\nimport Dialog from '../../../UI/Dialog';\nimport HelpButton from '../../../UI/HelpButton';\nimport EmptyMessage from '../../../UI/EmptyMessage';\nimport MiniToolbar, { MiniToolbarText } from '../../../UI/MiniToolbar';\nimport DragHandle from '../../../UI/DragHandle';\nimport ContextMenu from '../../../UI/Menu/ContextMenu';\nimport { showWarningBox } from '../../../UI/Messages/MessageBox';\nimport ResourcesLoader from '../../../ResourcesLoader';\nimport PointsEditor from './PointsEditor';\nimport CollisionMasksEditor from './CollisionMasksEditor';\nimport Window from '../../../Utils/Window';\nimport {\n  deleteSpritesFromAnimation,\n  duplicateSpritesInAnimation,\n} from './Utils/SpriteObjectHelper';\nimport { type EditorProps } from '../EditorProps.flow';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../../ResourcesList/ResourceExternalEditor.flow';\nimport { Column } from '../../../UI/Grid';\nimport { ResponsiveLineStackLayout } from '../../../UI/Layout';\nimport ScrollView from '../../../UI/ScrollView';\nimport Checkbox from '../../../UI/Checkbox';\nimport useForceUpdate from '../../../Utils/UseForceUpdate';\n\nconst gd: libGDevelop = global.gd;\n\ntype AnimationProps = {|\n  animation: gdAnimation,\n  id: number,\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  onRemove: () => void,\n  resourcesLoader: typeof ResourcesLoader,\n  onSpriteContextMenu: (x: number, y: number, sprite: gdSprite) => void,\n  selectedSprites: {\n    [number]: boolean,\n  },\n  onSelectSprite: (sprite: gdSprite, selected: boolean) => void,\n  onReplaceDirection: (\n    directionIndex: number,\n    newDirection: gdDirection\n  ) => void,\n  objectName: string,\n  onChangeName: string => void,\n|};\n\nclass Animation extends React.Component<AnimationProps, void> {\n  render() {\n    const {\n      animation,\n      id,\n      project,\n      resourceSources,\n      onRemove,\n      onChooseResource,\n      resourceExternalEditors,\n      resourcesLoader,\n      onSpriteContextMenu,\n      selectedSprites,\n      onSelectSprite,\n      onReplaceDirection,\n      objectName,\n      onChangeName,\n    } = this.props;\n\n    const animationName = animation.getName();\n    return (\n      <div>\n        <MiniToolbar>\n          <DragHandle />\n          <MiniToolbarText>Animation #{id} </MiniToolbarText>\n          <Column expand>\n            <SemiControlledTextField\n              commitOnBlur\n              margin=\"none\"\n              value={animation.getName()}\n              hintText={t`Optional animation name`}\n              onChange={text => onChangeName(text)}\n              fullWidth\n            />\n          </Column>\n          <IconButton onClick={onRemove}>\n            <Delete />\n          </IconButton>\n        </MiniToolbar>\n        {mapFor(0, animation.getDirectionsCount(), i => {\n          const direction = animation.getDirection(i);\n          return (\n            <SpritesList\n              direction={direction}\n              key={i}\n              project={project}\n              resourcesLoader={resourcesLoader}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n              onSpriteContextMenu={onSpriteContextMenu}\n              selectedSprites={selectedSprites}\n              onSelectSprite={onSelectSprite}\n              onReplaceByDirection={newDirection =>\n                onReplaceDirection(i, newDirection)\n              }\n              objectName={objectName}\n              animationName={animationName}\n              onChangeName={onChangeName}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nconst SortableAnimation = SortableElement(Animation);\n\nconst SortableAnimationsList = SortableContainer(\n  ({\n    spriteObject,\n    objectName,\n    onAddAnimation,\n    onRemoveAnimation,\n    onChangeAnimationName,\n    project,\n    resourcesLoader,\n    resourceSources,\n    onChooseResource,\n    resourceExternalEditors,\n    extraBottomTools,\n    onSpriteContextMenu,\n    selectedSprites,\n    onSelectSprite,\n    onReplaceDirection,\n  }) => {\n    // Note that it's important to have <ScrollView> *inside* this\n    // component, otherwise the sortable list won't work (because the\n    // SortableContainer would not find a root div to use).\n    return (\n      <ScrollView>\n        {mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const animation = spriteObject.getAnimation(i);\n          return (\n            <SortableAnimation\n              key={i}\n              index={i}\n              id={i}\n              animation={animation}\n              project={project}\n              resourcesLoader={resourcesLoader}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n              onRemove={() => onRemoveAnimation(i)}\n              onChangeName={newName => onChangeAnimationName(i, newName)}\n              onSpriteContextMenu={onSpriteContextMenu}\n              selectedSprites={selectedSprites}\n              onSelectSprite={onSelectSprite}\n              onReplaceDirection={(directionId, newDirection) =>\n                onReplaceDirection(i, directionId, newDirection)\n              }\n              objectName={objectName}\n            />\n          );\n        })}\n      </ScrollView>\n    );\n  }\n);\n\ntype AnimationsListContainerProps = {|\n  spriteObject: gdSpriteObject,\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  resourcesLoader: typeof ResourcesLoader,\n  extraBottomTools: React.Node,\n  onSizeUpdated: () => void,\n  objectName: string,\n|};\n\ntype AnimationsListContainerState = {|\n  selectedSprites: {\n    [number]: boolean,\n  },\n|};\n\nclass AnimationsListContainer extends React.Component<\n  AnimationsListContainerProps,\n  AnimationsListContainerState\n> {\n  state = {\n    selectedSprites: {},\n  };\n  spriteContextMenu: ?ContextMenu;\n\n  onSortEnd = ({ oldIndex, newIndex }) => {\n    this.props.spriteObject.moveAnimation(oldIndex, newIndex);\n    this.forceUpdate();\n  };\n\n  addAnimation = () => {\n    const emptyAnimation = new gd.Animation();\n    emptyAnimation.setDirectionsCount(1);\n    this.props.spriteObject.addAnimation(emptyAnimation);\n    this.forceUpdate();\n    this.props.onSizeUpdated();\n  };\n\n  removeAnimation = i => {\n    const answer = Window.showConfirmDialog(\n      'Are you sure you want to remove this animation?'\n    );\n\n    if (answer) {\n      this.props.spriteObject.removeAnimation(i);\n      this.forceUpdate();\n      this.props.onSizeUpdated();\n    }\n  };\n\n  changeAnimationName = (i, newName) => {\n    const { spriteObject } = this.props;\n\n    const otherNames = mapFor(0, spriteObject.getAnimationsCount(), index => {\n      return index === i\n        ? undefined // Don't check the current animation name as we're changing it.\n        : spriteObject.getAnimation(index).getName();\n    });\n\n    if (newName !== '' && otherNames.filter(name => name === newName).length) {\n      showWarningBox(\n        'Another animation with this name already exists. Please use another name.',\n        { delayToNextTick: true }\n      );\n      return;\n    }\n\n    spriteObject.getAnimation(i).setName(newName);\n    this.forceUpdate();\n  };\n\n  deleteSelection = () => {\n    const { spriteObject } = this.props;\n\n    mapFor(0, spriteObject.getAnimationsCount(), index => {\n      const animation = spriteObject.getAnimation(index);\n      deleteSpritesFromAnimation(animation, this.state.selectedSprites);\n    });\n\n    this.setState({\n      selectedSprites: {},\n    });\n  };\n\n  duplicateSelection = () => {\n    const { spriteObject } = this.props;\n\n    mapFor(0, spriteObject.getAnimationsCount(), index => {\n      const animation = spriteObject.getAnimation(index);\n      duplicateSpritesInAnimation(animation, this.state.selectedSprites);\n    });\n\n    this.setState({\n      selectedSprites: {},\n    });\n  };\n\n  openSpriteContextMenu = (x, y, sprite, index) => {\n    this.selectSprite(sprite, true);\n    if (this.spriteContextMenu) this.spriteContextMenu.open(x, y);\n  };\n\n  selectSprite = (sprite, selected) => {\n    this.setState({\n      selectedSprites: {\n        ...this.state.selectedSprites,\n        [sprite.ptr]: selected,\n      },\n    });\n  };\n\n  replaceDirection = (animationId, directionId, newDirection) => {\n    this.props.spriteObject\n      .getAnimation(animationId)\n      .setDirection(newDirection, directionId);\n    this.forceUpdate();\n  };\n\n  render() {\n    return (\n      <Column noMargin expand useFullHeight>\n        {this.props.spriteObject.getAnimationsCount() === 0 ? (\n          <EmptyMessage>\n            <Trans>\n              This object has no animations containing images. Start by adding\n              an animation.\n            </Trans>\n          </EmptyMessage>\n        ) : (\n          <SortableAnimationsList\n            spriteObject={this.props.spriteObject}\n            objectName={this.props.objectName}\n            helperClass=\"sortable-helper\"\n            project={this.props.project}\n            onSortEnd={this.onSortEnd}\n            onChangeAnimationName={this.changeAnimationName}\n            onRemoveAnimation={this.removeAnimation}\n            onReplaceDirection={this.replaceDirection}\n            onSpriteContextMenu={this.openSpriteContextMenu}\n            selectedSprites={this.state.selectedSprites}\n            onSelectSprite={this.selectSprite}\n            resourcesLoader={this.props.resourcesLoader}\n            resourceSources={this.props.resourceSources}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            onChooseResource={this.props.onChooseResource}\n            useDragHandle\n            lockAxis=\"y\"\n            axis=\"y\"\n          />\n        )}\n        <Column>\n          <ResponsiveLineStackLayout\n            justifyContent=\"space-between\"\n            noColumnMargin\n          >\n            {this.props.extraBottomTools}\n            <RaisedButton\n              label={<Trans>Add an animation</Trans>}\n              primary\n              onClick={this.addAnimation}\n              icon={<Add />}\n            />\n          </ResponsiveLineStackLayout>\n        </Column>\n        <ContextMenu\n          ref={spriteContextMenu =>\n            (this.spriteContextMenu = spriteContextMenu)\n          }\n          buildMenuTemplate={(i18n: I18nType) => [\n            {\n              label: i18n._(t`Delete selection`),\n              click: () => this.deleteSelection(),\n            },\n            {\n              label: i18n._(t`Duplicate selection`),\n              click: () => this.duplicateSelection(),\n            },\n          ]}\n        />\n      </Column>\n    );\n  }\n}\n\nexport default function SpriteEditor({\n  object,\n  project,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n  onSizeUpdated,\n  objectName,\n}: EditorProps) {\n  const [pointsEditorOpen, setPointsEditorOpen] = React.useState(false);\n  const [advancedOptionsOpen, setAdvancedOptionsOpen] = React.useState(false);\n  const [\n    collisionMasksEditorOpen,\n    setCollisionMasksEditorOpen,\n  ] = React.useState(false);\n  const forceUpdate = useForceUpdate();\n  const spriteObject = gd.asSpriteObject(object);\n\n  return (\n    <>\n      <AnimationsListContainer\n        spriteObject={spriteObject}\n        resourcesLoader={ResourcesLoader}\n        resourceSources={resourceSources}\n        onChooseResource={onChooseResource}\n        resourceExternalEditors={resourceExternalEditors}\n        project={project}\n        objectName={objectName}\n        onSizeUpdated={onSizeUpdated}\n        extraBottomTools={\n          <ResponsiveLineStackLayout noMargin noColumnMargin>\n            <RaisedButton\n              label={<Trans>Edit collision masks</Trans>}\n              primary={false}\n              onClick={() => setCollisionMasksEditorOpen(true)}\n              disabled={spriteObject.getAnimationsCount() === 0}\n            />\n            <RaisedButton\n              label={<Trans>Edit points</Trans>}\n              primary={false}\n              onClick={() => setPointsEditorOpen(true)}\n              disabled={spriteObject.getAnimationsCount() === 0}\n            />\n            <FlatButton\n              label={<Trans>Advanced options</Trans>}\n              primary={false}\n              onClick={() => setAdvancedOptionsOpen(true)}\n              disabled={spriteObject.getAnimationsCount() === 0}\n            />\n          </ResponsiveLineStackLayout>\n        }\n      />\n      {advancedOptionsOpen && (\n        <Dialog\n          actions={\n            <FlatButton\n              label={<Trans>Close</Trans>}\n              primary\n              onClick={() => setAdvancedOptionsOpen(false)}\n            />\n          }\n          maxWidth=\"sm\"\n          flexBody\n          onRequestClose={() => setAdvancedOptionsOpen(false)}\n          open\n        >\n          <Column noMargin>\n            <Checkbox\n              label={\n                <Trans>\n                  Don't play the animation when the object is far from the\n                  camera or hidden (recommended for performance)\n                </Trans>\n              }\n              checked={!spriteObject.getUpdateIfNotVisible()}\n              onCheck={(_, value) => {\n                spriteObject.setUpdateIfNotVisible(!value);\n\n                forceUpdate();\n              }}\n            />\n          </Column>\n        </Dialog>\n      )}\n      {pointsEditorOpen && (\n        <Dialog\n          actions={\n            <FlatButton\n              label={<Trans>Close</Trans>}\n              primary\n              onClick={() => setPointsEditorOpen(false)}\n            />\n          }\n          secondaryActions={[\n            <HelpButton\n              helpPagePath=\"/objects/sprite/edit-points\"\n              key=\"help\"\n            />,\n          ]}\n          cannotBeDismissed={true}\n          noMargin\n          maxWidth=\"lg\"\n          flexBody\n          fullHeight\n          onRequestClose={() => setPointsEditorOpen(false)}\n          open={pointsEditorOpen}\n        >\n          <PointsEditor\n            object={spriteObject}\n            resourcesLoader={ResourcesLoader}\n            project={project}\n          />\n        </Dialog>\n      )}\n      {collisionMasksEditorOpen && (\n        <Dialog\n          actions={\n            <FlatButton\n              label={<Trans>Close</Trans>}\n              primary\n              onClick={() => setCollisionMasksEditorOpen(false)}\n            />\n          }\n          secondaryActions={[\n            <HelpButton\n              helpPagePath=\"/objects/sprite/collision-mask\"\n              key=\"help\"\n            />,\n          ]}\n          noMargin\n          maxWidth=\"lg\"\n          flexBody\n          fullHeight\n          cannotBeDismissed={true}\n          onRequestClose={() => setCollisionMasksEditorOpen(false)}\n          open={collisionMasksEditorOpen}\n        >\n          <CollisionMasksEditor\n            object={spriteObject}\n            resourcesLoader={ResourcesLoader}\n            project={project}\n          />\n        </Dialog>\n      )}\n    </>\n  );\n}\n","// @flow\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport React, { Component } from 'react';\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\nimport { mapFor } from '../../../Utils/MapFor';\r\nimport Add from '@material-ui/icons/Add';\r\nimport DirectionTools from './DirectionTools';\r\nimport MiniToolbar from '../../../UI/MiniToolbar';\r\nimport ImageThumbnail, {\r\n  thumbnailContainerStyle,\r\n} from '../../../ResourcesList/ResourceThumbnail/ImageThumbnail';\r\nimport {\r\n  copySpritePoints,\r\n  copySpritePolygons,\r\n  allDirectionSpritesHaveSamePointsAs,\r\n  allDirectionSpritesHaveSameCollisionMasksAs,\r\n} from './Utils/SpriteObjectHelper';\r\nimport ResourcesLoader from '../../../ResourcesLoader';\r\nimport {\r\n  type ResourceSource,\r\n  type ChooseResourceFunction,\r\n} from '../../../ResourcesList/ResourceSource';\r\nimport { type ResourceExternalEditor } from '../../../ResourcesList/ResourceExternalEditor.flow';\r\nimport { applyResourceDefaults } from '../../../ResourcesList/ResourceUtils';\r\nimport FlatButton from '../../../UI/FlatButton';\r\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\r\nconst gd: libGDevelop = global.gd;\r\nconst path = require('path');\r\n\r\nconst SPRITE_SIZE = 100; //TODO: Factor with Thumbnail\r\n\r\nconst styles = {\r\n  spritesList: {\r\n    whiteSpace: 'nowrap',\r\n    overflowY: 'hidden',\r\n  },\r\n  thumbnailExtraStyle: {\r\n    marginRight: 10,\r\n  },\r\n  spriteThumbnailImage: {\r\n    maxWidth: SPRITE_SIZE,\r\n    maxHeight: SPRITE_SIZE,\r\n    verticalAlign: 'middle',\r\n  },\r\n};\r\n\r\nconst AddSpriteButton = SortableElement(({ displayHint, onAdd }) => {\r\n  return (\r\n    <ThemeConsumer>\r\n      {muiTheme => (\r\n        <div\r\n          style={{\r\n            ...thumbnailContainerStyle,\r\n            backgroundColor: muiTheme.list.itemsBackgroundColor,\r\n          }}\r\n        >\r\n          <FlatButton\r\n            onClick={onAdd}\r\n            label={<Trans>Add</Trans>}\r\n            icon={<Add />}\r\n          />\r\n        </div>\r\n      )}\r\n    </ThemeConsumer>\r\n  );\r\n});\r\n\r\nconst SortableSpriteThumbnail = SortableElement(\r\n  ({ sprite, project, resourcesLoader, selected, onSelect, onContextMenu }) => {\r\n    return (\r\n      <ImageThumbnail\r\n        selectable\r\n        selected={selected}\r\n        onSelect={onSelect}\r\n        onContextMenu={onContextMenu}\r\n        resourceName={sprite.getImageName()}\r\n        resourcesLoader={resourcesLoader}\r\n        project={project}\r\n        style={styles.thumbnailExtraStyle}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nconst SortableList = SortableContainer(\r\n  ({\r\n    direction,\r\n    project,\r\n    resourcesLoader,\r\n    onAddSprite,\r\n    selectedSprites,\r\n    onSelectSprite,\r\n    onSpriteContextMenu,\r\n  }) => {\r\n    const spritesCount = direction.getSpritesCount();\r\n    return (\r\n      <div style={styles.spritesList}>\r\n        {[\r\n          ...mapFor(0, spritesCount, i => {\r\n            const sprite = direction.getSprite(i);\r\n            return (\r\n              <SortableSpriteThumbnail\r\n                sprite={sprite}\r\n                key={sprite.ptr}\r\n                index={i}\r\n                selected={!!selectedSprites[sprite.ptr]}\r\n                onContextMenu={(x, y) => onSpriteContextMenu(x, y, sprite)}\r\n                onSelect={selected => onSelectSprite(sprite, selected)}\r\n                resourcesLoader={resourcesLoader}\r\n                project={project}\r\n              />\r\n            );\r\n          }),\r\n          <AddSpriteButton\r\n            displayHint={!direction.getSpritesCount()}\r\n            key=\"add-sprite-button\"\r\n            disabled\r\n            index={spritesCount}\r\n            onAdd={onAddSprite}\r\n          />,\r\n        ]}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\n/**\r\n * Check if all sprites of the given direction have the same points and collision masks\r\n */\r\nconst checkDirectionPointsAndCollisionsMasks = (direction: gdDirection) => {\r\n  let allDirectionSpritesHaveSamePoints = false;\r\n  let allDirectionSpritesHaveSameCollisionMasks = false;\r\n  if (direction.getSpritesCount() !== 0) {\r\n    allDirectionSpritesHaveSamePoints = allDirectionSpritesHaveSamePointsAs(\r\n      direction.getSprite(0),\r\n      direction\r\n    );\r\n    allDirectionSpritesHaveSameCollisionMasks = allDirectionSpritesHaveSameCollisionMasksAs(\r\n      direction.getSprite(0),\r\n      direction\r\n    );\r\n  }\r\n\r\n  return {\r\n    allDirectionSpritesHaveSamePoints,\r\n    allDirectionSpritesHaveSameCollisionMasks,\r\n  };\r\n};\r\n\r\ntype Props = {|\r\n  direction: gdDirection,\r\n  project: gdProject,\r\n  resourcesLoader: typeof ResourcesLoader,\r\n  resourceSources: Array<ResourceSource>,\r\n  resourceExternalEditors: Array<ResourceExternalEditor>,\r\n  onChooseResource: ChooseResourceFunction,\r\n  onSpriteContextMenu: (x: number, y: number, sprite: gdSprite) => void,\r\n  selectedSprites: {\r\n    [number]: boolean,\r\n  },\r\n  onSelectSprite: (sprite: gdSprite, selected: boolean) => void,\r\n  onReplaceByDirection: (newDirection: gdDirection) => void,\r\n  onChangeName: (newAnimationName: string) => void, // Used by piskel to set the name, if there is no name\r\n  objectName: string, // This is used for the default name of images created with Piskel.\r\n  animationName: string, // This is used for the default name of images created with Piskel.\r\n|};\r\n\r\nexport default class SpritesList extends Component<Props, void> {\r\n  onSortEnd = ({\r\n    oldIndex,\r\n    newIndex,\r\n  }: {\r\n    oldIndex: number,\r\n    newIndex: number,\r\n  }) => {\r\n    this.props.direction.moveSprite(oldIndex, newIndex);\r\n    this.forceUpdate();\r\n  };\r\n\r\n  onAddSprite = () => {\r\n    const {\r\n      resourceSources,\r\n      onChooseResource,\r\n      project,\r\n      direction,\r\n    } = this.props;\r\n    if (!resourceSources) return;\r\n    const sources = resourceSources.filter(source => source.kind === 'image');\r\n    if (!sources.length) return;\r\n\r\n    const {\r\n      allDirectionSpritesHaveSameCollisionMasks,\r\n      allDirectionSpritesHaveSamePoints,\r\n    } = checkDirectionPointsAndCollisionsMasks(direction);\r\n\r\n    onChooseResource({\r\n      // Should be updated once new sources are introduced in the desktop app.\r\n      // Search for \"sources[0]\" in the codebase for other places like this.\r\n      initialSourceName: sources[0].name,\r\n      multiSelection: true,\r\n      resourceKind: 'image',\r\n    }).then(resources => {\r\n      resources.forEach(resource => {\r\n        applyResourceDefaults(project, resource);\r\n        project.getResourcesManager().addResource(resource);\r\n\r\n        const sprite = new gd.Sprite();\r\n        sprite.setImageName(resource.getName());\r\n        if (allDirectionSpritesHaveSamePoints) {\r\n          copySpritePoints(direction.getSprite(0), sprite);\r\n        }\r\n        if (allDirectionSpritesHaveSameCollisionMasks) {\r\n          copySpritePolygons(direction.getSprite(0), sprite);\r\n        }\r\n        direction.addSprite(sprite);\r\n      });\r\n\r\n      // Important, we are responsible for deleting the resources that were given to us.\r\n      // Otherwise we have a memory leak, as calling addResource is making a copy of the resource.\r\n      resources.forEach(resource => resource.delete());\r\n\r\n      this.forceUpdate();\r\n    });\r\n  };\r\n\r\n  editWith = (externalEditor: ResourceExternalEditor) => {\r\n    const {\r\n      project,\r\n      direction,\r\n      resourcesLoader,\r\n      onReplaceByDirection,\r\n      onChangeName,\r\n      objectName,\r\n      animationName,\r\n    } = this.props;\r\n    const resourceNames = mapFor(0, direction.getSpritesCount(), i => {\r\n      return direction.getSprite(i).getImageName();\r\n    });\r\n\r\n    const {\r\n      allDirectionSpritesHaveSameCollisionMasks,\r\n      allDirectionSpritesHaveSamePoints,\r\n    } = checkDirectionPointsAndCollisionsMasks(direction);\r\n\r\n    let externalEditorData = {};\r\n    const metadataRaw = direction.getMetadata();\r\n    if (metadataRaw) {\r\n      try {\r\n        externalEditorData = JSON.parse(metadataRaw);\r\n      } catch (e) {\r\n        console.error('Malformed metadata', e);\r\n      }\r\n    }\r\n\r\n    externalEditor.edit({\r\n      project,\r\n      resourcesLoader,\r\n      singleFrame: false,\r\n      resourceNames,\r\n      extraOptions: {\r\n        fps:\r\n          direction.getTimeBetweenFrames() > 0\r\n            ? 1 / direction.getTimeBetweenFrames()\r\n            : 1,\r\n        name:\r\n          animationName ||\r\n          (resourceNames.length > 0\r\n            ? path.basename(resourceNames[0], path.extname(resourceNames[0]))\r\n            : objectName),\r\n        isLooping: direction.isLooping(),\r\n        externalEditorData,\r\n      },\r\n      onChangesSaved: resources => {\r\n        const newDirection = new gd.Direction();\r\n        newDirection.setTimeBetweenFrames(direction.getTimeBetweenFrames());\r\n        newDirection.setLoop(direction.isLooping());\r\n        resources.forEach(resource => {\r\n          const sprite = new gd.Sprite();\r\n          sprite.setImageName(resource.name);\r\n          // Restore collision masks and points\r\n          if (\r\n            resource.originalIndex !== undefined &&\r\n            resource.originalIndex !== null\r\n          ) {\r\n            const originalSprite = direction.getSprite(resource.originalIndex);\r\n            copySpritePoints(originalSprite, sprite);\r\n            copySpritePolygons(originalSprite, sprite);\r\n          } else {\r\n            if (allDirectionSpritesHaveSamePoints) {\r\n              copySpritePoints(direction.getSprite(0), sprite);\r\n            }\r\n            if (allDirectionSpritesHaveSameCollisionMasks) {\r\n              copySpritePolygons(direction.getSprite(0), sprite);\r\n            }\r\n          }\r\n          newDirection.addSprite(sprite);\r\n          sprite.delete();\r\n        });\r\n\r\n        // set metadata if there is such on the direction\r\n        if (resources[0].metadata) {\r\n          newDirection.setMetadata(JSON.stringify(resources[0].metadata));\r\n        }\r\n\r\n        // Burst the ResourcesLoader cache to force images to be reloaded (and not cached by the browser).\r\n        resourcesLoader.burstUrlsCacheForResources(project, resourceNames);\r\n        onReplaceByDirection(newDirection);\r\n        // Set optional animation name if the user hasn't done so\r\n        if (resources[0].newAnimationName) {\r\n          onChangeName(resources[0].newAnimationName);\r\n        }\r\n        newDirection.delete();\r\n      },\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <MiniToolbar justifyContent=\"flex-end\" smallest>\r\n          <DirectionTools\r\n            direction={this.props.direction}\r\n            resourcesLoader={this.props.resourcesLoader}\r\n            project={this.props.project}\r\n            resourceExternalEditors={this.props.resourceExternalEditors}\r\n            onEditWith={this.editWith}\r\n          />\r\n        </MiniToolbar>\r\n        <SortableList\r\n          resourcesLoader={this.props.resourcesLoader}\r\n          direction={this.props.direction}\r\n          project={this.props.project}\r\n          onSortEnd={this.onSortEnd}\r\n          onAddSprite={this.onAddSprite}\r\n          selectedSprites={this.props.selectedSprites}\r\n          onSelectSprite={this.props.onSelectSprite}\r\n          onSpriteContextMenu={this.props.onSpriteContextMenu}\r\n          helperClass=\"sortable-helper\"\r\n          lockAxis=\"x\"\r\n          axis=\"x\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport EmptyMessage from '../../../../UI/EmptyMessage';\nimport { Line, Column } from '../../../../UI/Grid';\nimport { mapFor } from '../../../../Utils/MapFor';\nimport PointsList from './PointsList';\nimport PointsPreview from './PointsPreview';\nimport ImagePreview from '../../../../ResourcesList/ResourcePreview/ImagePreview';\nimport {\n  getCurrentElements,\n  allSpritesHaveSamePointsAs,\n  copyAnimationsSpritePoints,\n} from '../Utils/SpriteObjectHelper';\nimport SpriteSelector from '../Utils/SpriteSelector';\nimport Window from '../../../../Utils/Window';\nimport every from 'lodash/every';\nimport ResourcesLoader from '../../../../ResourcesLoader';\nimport useForceUpdate from '../../../../Utils/UseForceUpdate';\nimport EditorMosaic, {\n  type Editor,\n  type EditorMosaicNode,\n} from '../../../../UI/EditorMosaic';\nimport { useResponsiveWindowWidth } from '../../../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport Background from '../../../../UI/Background';\nimport ScrollView from '../../../../UI/ScrollView';\nconst gd: libGDevelop = global.gd;\n\nconst horizontalMosaicNodes: EditorMosaicNode = {\n  direction: 'row',\n  first: 'preview',\n  second: 'properties',\n  splitPercentage: 50,\n};\n\nconst verticalMosaicNodes: EditorMosaicNode = {\n  direction: 'column',\n  first: 'preview',\n  second: 'properties',\n  splitPercentage: 50,\n};\n\ntype Props = {|\n  object: gdSpriteObject,\n  resourcesLoader: typeof ResourcesLoader,\n  project: gdProject,\n|};\n\nconst PointsEditor = (props: Props) => {\n  const [animationIndex, setAnimationIndex] = React.useState(0);\n  const [directionIndex, setDirectionIndex] = React.useState(0);\n  const [spriteIndex, setSpriteIndex] = React.useState(0);\n\n  // Note: these two booleans are set to false to avoid erasing points of other\n  // animations/frames (and they will be updated by updateSamePointsToggles). In\n  // theory, they should be set to the appropriate value at their initialization,\n  // for consistency of the state.\n  const [samePointsForAnimations, setSamePointsForAnimations] = React.useState(\n    false\n  );\n  const [samePointsForSprites, setSamePointsForSprites] = React.useState(false);\n  const forceUpdate = useForceUpdate();\n\n  const spriteObject = gd.asSpriteObject(props.object);\n  const { animation, sprite, hasValidSprite } = getCurrentElements(\n    spriteObject,\n    animationIndex,\n    directionIndex,\n    spriteIndex\n  );\n\n  const updatePoints = React.useCallback(\n    () => {\n      if (animation && sprite) {\n        if (samePointsForAnimations) {\n          mapFor(0, spriteObject.getAnimationsCount(), i => {\n            const otherAnimation = spriteObject.getAnimation(i);\n            copyAnimationsSpritePoints(sprite, otherAnimation);\n          });\n        } else if (samePointsForSprites) {\n          copyAnimationsSpritePoints(sprite, animation);\n        }\n      }\n\n      forceUpdate(); // Refresh the preview\n    },\n    [\n      animation,\n      sprite,\n      spriteObject,\n      samePointsForAnimations,\n      samePointsForSprites,\n      forceUpdate,\n    ]\n  );\n\n  const chooseAnimation = index => {\n    setAnimationIndex(index);\n    setDirectionIndex(0);\n    setSpriteIndex(0);\n  };\n\n  const chooseDirection = index => {\n    setDirectionIndex(index);\n    setSpriteIndex(0);\n  };\n\n  const chooseSprite = index => {\n    setSpriteIndex(index);\n  };\n\n  const updateSamePointsToggles = () => {\n    if (!animation || !sprite) return;\n\n    setSamePointsForAnimations(\n      every(\n        mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const otherAnimation = spriteObject.getAnimation(i);\n          return allSpritesHaveSamePointsAs(sprite, otherAnimation);\n        })\n      )\n    );\n\n    setSamePointsForSprites(allSpritesHaveSamePointsAs(sprite, animation));\n  };\n\n  const setSamePointsForAllAnimations = (enable: boolean) => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same points for all animations will erase and reset all the other animations points. This can't be undone. Are you sure you want to share these points amongst all the animations of the object?\"\n      );\n      if (!answer) return;\n    }\n\n    setSamePointsForAnimations(enable);\n    setSamePointsForSprites(enable || samePointsForSprites);\n  };\n\n  const setSamePointsForAllSprites = (enable: boolean) => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same points for all frames will erase and reset all the other frames points. This can't be undone. Are you sure you want to share these points amongst all the frames of the animation?\"\n      );\n      if (!answer) return;\n    }\n\n    setSamePointsForAnimations(enable && samePointsForAnimations);\n    setSamePointsForSprites(enable);\n  };\n\n  React.useEffect(updateSamePointsToggles, [animationIndex]);\n\n  React.useEffect(updatePoints, [\n    samePointsForAnimations,\n    samePointsForSprites,\n  ]);\n\n  // Keep panes vertical for small screens, side-by-side for large screens\n  const screenSize = useResponsiveWindowWidth();\n  const editorNodes =\n    screenSize === 'small' ? verticalMosaicNodes : horizontalMosaicNodes;\n\n  if (!props.object.getAnimationsCount()) return null;\n\n  const editors: { [string]: Editor } = {\n    preview: {\n      type: 'primary',\n      noTitleBar: true,\n      renderEditor: () => (\n        <Background>\n          <ImagePreview\n            resourceName={hasValidSprite ? sprite.getImageName() : ''}\n            resourcesLoader={props.resourcesLoader}\n            project={props.project}\n            renderOverlay={overlayProps =>\n              hasValidSprite && (\n                <PointsPreview\n                  {...overlayProps}\n                  pointsContainer={sprite}\n                  onPointsUpdated={updatePoints}\n                />\n              )\n            }\n          />\n        </Background>\n      ),\n    },\n    properties: {\n      type: 'secondary',\n      noTitleBar: true,\n      renderEditor: () => (\n        <Background>\n          <ScrollView>\n            <Line>\n              <Column expand>\n                <SpriteSelector\n                  spriteObject={spriteObject}\n                  animationIndex={animationIndex}\n                  directionIndex={directionIndex}\n                  spriteIndex={spriteIndex}\n                  chooseAnimation={chooseAnimation}\n                  chooseDirection={chooseDirection}\n                  chooseSprite={chooseSprite}\n                  sameForAllAnimations={samePointsForAnimations}\n                  sameForAllSprites={samePointsForSprites}\n                  setSameForAllAnimations={setSamePointsForAllAnimations}\n                  setSameForAllSprites={setSamePointsForAllSprites}\n                  setSameForAllAnimationsLabel={\n                    <Trans>Share same points for all animations</Trans>\n                  }\n                  setSameForAllSpritesLabel={\n                    <Trans>\n                      Share same points for all sprites of this animation\n                    </Trans>\n                  }\n                />\n              </Column>\n            </Line>\n            {!!sprite && (\n              <PointsList\n                pointsContainer={sprite}\n                onPointsUpdated={updatePoints}\n              />\n            )}\n            {!sprite && (\n              <EmptyMessage>\n                <Trans>Choose an animation and frame to edit the points</Trans>\n              </EmptyMessage>\n            )}\n          </ScrollView>\n        </Background>\n      ),\n    },\n  };\n\n  return (\n    <div style={{ flex: 1 }}>\n      <EditorMosaic editors={editors} initialNodes={editorNodes} />\n    </div>\n  );\n};\n\nexport default PointsEditor;\n","// @flow\nimport * as React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../../../../UI/Table';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport newNameGenerator from '../../../../Utils/NewNameGenerator';\nimport { mapVector } from '../../../../Utils/MapFor';\nimport Window from '../../../../Utils/Window';\nimport styles from './styles';\nimport PointRow from './PointRow';\nimport useForceUpdate from '../../../../Utils/UseForceUpdate';\nimport { Column, Line, Spacer } from '../../../../UI/Grid';\nimport RaisedButton from '../../../../UI/RaisedButton';\nimport { Trans } from '@lingui/macro';\nimport AddIcon from '@material-ui/icons/Add';\nconst gd: libGDevelop = global.gd;\n\nconst SortablePointRow = SortableElement(PointRow);\n\ntype PointsListBodyProps = {|\n  pointsContainer: gdSprite,\n  onPointsUpdated: () => void,\n|};\n\nconst PointsListBody = (props: PointsListBodyProps) => {\n  const [nameErrors, setNameErrors] = React.useState({});\n  const { pointsContainer } = props;\n  const forceUpdate = useForceUpdate();\n\n  const onPointsUpdated = () => {\n    forceUpdate();\n    props.onPointsUpdated();\n  };\n\n  const updateOriginPointX = newValue => {\n    pointsContainer.getOrigin().setX(newValue);\n    onPointsUpdated();\n  };\n\n  const updateOriginPointY = newValue => {\n    pointsContainer.getOrigin().setY(newValue);\n    onPointsUpdated();\n  };\n\n  const updateCenterPointX = newValue => {\n    pointsContainer.getCenter().setX(newValue);\n    onPointsUpdated();\n  };\n\n  const updateCenterPointY = newValue => {\n    pointsContainer.getCenter().setY(newValue);\n    onPointsUpdated();\n  };\n\n  const updatePointX = (point, newValue) => {\n    point.setX(newValue);\n    onPointsUpdated();\n  };\n\n  const updatePointY = (point, newValue) => {\n    point.setY(newValue);\n    onPointsUpdated();\n  };\n\n  const nonDefaultPoints = pointsContainer.getAllNonDefaultPoints();\n  const pointsRows = mapVector(nonDefaultPoints, (point, i) => {\n    const pointName = point.getName();\n\n    return (\n      <SortablePointRow\n        index={i}\n        disabled\n        key={'point-' + pointName}\n        pointX={point.getX()}\n        pointY={point.getY()}\n        onChangePointX={newValue => updatePointX(point, newValue)}\n        onChangePointY={newValue => updatePointY(point, newValue)}\n        pointName={pointName}\n        nameError={nameErrors[pointName]}\n        onBlur={event => {\n          const newName = event.target.value;\n          if (pointName === newName) return;\n\n          let success = true;\n          if (pointsContainer.hasPoint(newName)) {\n            success = false;\n          } else {\n            point.setName(newName);\n            onPointsUpdated();\n          }\n\n          setNameErrors(old => ({ ...old, [pointName]: !success }));\n        }}\n        onRemove={() => {\n          const answer = Window.showConfirmDialog(\n            \"Are you sure you want to remove this point? This can't be undone.\"\n          );\n          if (!answer) return;\n\n          pointsContainer.delPoint(pointName);\n          onPointsUpdated();\n        }}\n      />\n    );\n  });\n\n  const originPoint = pointsContainer.getOrigin();\n  const centerPoint = pointsContainer.getCenter();\n\n  const originRow = (\n    <SortablePointRow\n      index={0}\n      key={'origin-point-row'}\n      pointName=\"Origin\"\n      pointX={originPoint.getX()}\n      pointY={originPoint.getY()}\n      onChangePointX={updateOriginPointX}\n      onChangePointY={updateOriginPointY}\n      disabled\n    />\n  );\n  const centerRow = (\n    <SortablePointRow\n      index={1}\n      key={'center-point-row'}\n      pointName=\"Center\"\n      isAutomatic={pointsContainer.isDefaultCenterPoint()}\n      pointX={centerPoint.getX()}\n      pointY={centerPoint.getY()}\n      onChangePointX={updateCenterPointX}\n      onChangePointY={updateCenterPointY}\n      disabled\n      onEdit={\n        pointsContainer.isDefaultCenterPoint()\n          ? () => {\n              pointsContainer.setDefaultCenterPoint(false);\n              onPointsUpdated();\n            }\n          : null\n      }\n      onRemove={\n        !pointsContainer.isDefaultCenterPoint()\n          ? () => {\n              pointsContainer.setDefaultCenterPoint(true);\n              onPointsUpdated();\n            }\n          : null\n      }\n    />\n  );\n\n  return <TableBody>{[originRow, centerRow, ...pointsRows]}</TableBody>;\n};\n\nconst SortablePointsListBody = SortableContainer(PointsListBody);\nSortablePointsListBody.muiName = 'TableBody';\n\ntype PointsListProps = {|\n  pointsContainer: gdSprite,\n  onPointsUpdated: () => void,\n|};\n\nconst PointsList = (props: PointsListProps) => {\n  return (\n    <Column expand>\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHeaderColumn style={styles.handleColumn} />\n            <TableHeaderColumn>Point name</TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              X\n            </TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              Y\n            </TableHeaderColumn>\n            <TableRowColumn style={styles.toolColumn} />\n          </TableRow>\n        </TableHeader>\n        <SortablePointsListBody\n          pointsContainer={props.pointsContainer}\n          onPointsUpdated={props.onPointsUpdated}\n          onSortEnd={({ oldIndex, newIndex }) => {\n            // Reordering points is not supported for now\n          }}\n          helperClass=\"sortable-helper\"\n          useDragHandle\n          lockToContainerEdges\n        />\n      </Table>\n      <Spacer />\n      <Line alignItems=\"center\" justifyContent=\"center\">\n        <RaisedButton\n          primary\n          icon={<AddIcon />}\n          label={<Trans>Add a point</Trans>}\n          onClick={() => {\n            const name = newNameGenerator('Point', name =>\n              props.pointsContainer.hasPoint(name)\n            );\n            const point = new gd.Point(name);\n            props.pointsContainer.addPoint(point);\n            point.delete();\n            props.onPointsUpdated();\n          }}\n        />\n      </Line>\n    </Column>\n  );\n};\n\nexport default PointsList;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport IconButton from '../../../../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport Edit from '@material-ui/icons/Edit';\nimport TextField from '../../../../UI/TextField';\nimport styles from './styles';\nimport ThemeConsumer from '../../../../UI/Theme/ThemeConsumer';\nimport Text from '../../../../UI/Text';\n\ntype Props = {|\n  pointName: string,\n  nameError: boolean,\n  onBlur?: (ev: any) => void,\n  onRemove?: (ev: any) => void,\n  onEdit?: (ev: any) => void,\n  pointX: number,\n  pointY: number,\n  onChangePointX: (value: number) => void,\n  onChangePointY: (value: number) => void,\n  isAutomatic?: Boolean,\n|};\n\nconst PointRow = (props: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <TableRow\n        style={{\n          backgroundColor: muiTheme.list.itemsBackgroundColor,\n        }}\n      >\n        <TableRowColumn style={styles.handleColumn}>\n          {/* <DragHandle /> Reordering point is not supported for now */}\n        </TableRowColumn>\n        <TableRowColumn>\n          <TextField\n            margin=\"none\"\n            defaultValue={props.pointName || 'Unnamed point'}\n            id={props.pointName}\n            fullWidth\n            errorText={\n              props.nameError ? 'This name is already taken' : undefined\n            }\n            disabled={!props.onBlur}\n            onBlur={props.onBlur}\n          />\n        </TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          {!props.isAutomatic ? (\n            <TextField\n              margin=\"none\"\n              value={props.pointX}\n              type=\"number\"\n              id=\"point-x\"\n              onChange={(e, value) =>\n                props.onChangePointX(parseFloat(value || 0))\n              }\n            />\n          ) : (\n            <Text noMargin>\n              <Trans>(auto)</Trans>\n            </Text>\n          )}\n        </TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          {!props.isAutomatic ? (\n            <TextField\n              margin=\"none\"\n              value={props.pointY}\n              type=\"number\"\n              id=\"point-y\"\n              onChange={(e, value) =>\n                props.onChangePointY(parseFloat(value || 0))\n              }\n            />\n          ) : (\n            <Text noMargin>\n              <Trans>(auto)</Trans>\n            </Text>\n          )}\n        </TableRowColumn>\n        <TableRowColumn style={styles.toolColumn}>\n          {!!props.onRemove && (\n            <IconButton size=\"small\" onClick={props.onRemove}>\n              <Delete />\n            </IconButton>\n          )}\n          {!!props.onEdit && (\n            <IconButton size=\"small\" onClick={props.onEdit}>\n              <Edit />\n            </IconButton>\n          )}\n        </TableRowColumn>\n      </TableRow>\n    )}\n  </ThemeConsumer>\n);\n\nexport default PointRow;\n","// @flow\nimport * as React from 'react';\nimport { mapVector } from '../../../../Utils/MapFor';\nimport useForceUpdate from '../../../../Utils/UseForceUpdate';\n\nconst styles = {\n  container: {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n  },\n};\n\nconst pointKindIdentifiers = {\n  NORMAL: 1,\n  ORIGIN: 2,\n  CENTER: 3,\n};\ntype PointKind = 1 | 2 | 3;\n\ntype Props = {|\n  pointsContainer: gdSprite, // Could potentially be generalized to other things than Sprite in the future.\n  imageWidth: number,\n  imageHeight: number,\n  offsetTop: number,\n  offsetLeft: number,\n  imageZoomFactor: number,\n  onPointsUpdated: () => void,\n|};\n\ntype State = {|\n  draggedPoint: ?gdPoint,\n  draggedPointKind: ?PointKind,\n|};\n\nconst PointsPreview = (props: Props) => {\n  const frameRef = React.useRef<React.ElementRef<'div'> | null>(null);\n  const [state, setState] = React.useState<State>({\n    draggedPoint: null,\n    draggedPointKind: null,\n  });\n\n  const {\n    pointsContainer,\n    imageWidth,\n    imageHeight,\n    offsetTop,\n    offsetLeft,\n    imageZoomFactor,\n  } = props;\n\n  const forceUpdate = useForceUpdate();\n\n  const onStartDragPoint = (\n    draggedPoint: gdPoint,\n    draggedPointKind: PointKind\n  ) => {\n    if (state.draggedPoint) return;\n    setState({\n      draggedPoint,\n      draggedPointKind,\n    });\n  };\n\n  const onEndDragPoint = () => {\n    const draggingWasDone = !!state.draggedPoint;\n    if (draggingWasDone) props.onPointsUpdated();\n    setState({\n      draggedPoint: null,\n      draggedPointKind: null,\n    });\n  };\n\n  /**\n   * Move a point with the mouse. A similar dragging implementation is done in\n   * CollisionMasksPreview (but with svg elements).\n   *\n   * TODO: This could be optimized by avoiding the forceUpdate (not sure if worth it though).\n   */\n  const onMouseMove = (event: any) => {\n    const { draggedPoint, draggedPointKind } = state;\n    if (!draggedPoint || !frameRef.current) return;\n\n    const frameBoundingRect = frameRef.current.getBoundingClientRect();\n    const xOnFrame = event.clientX - frameBoundingRect.left;\n    const yOnFrame = event.clientY - frameBoundingRect.top;\n\n    if (draggedPointKind === pointKindIdentifiers.CENTER) {\n      props.pointsContainer.setDefaultCenterPoint(false);\n    }\n    draggedPoint.setX(xOnFrame / imageZoomFactor);\n    draggedPoint.setY(yOnFrame / imageZoomFactor);\n    forceUpdate();\n  };\n\n  const renderPoint = (\n    name: string,\n    x: number,\n    y: number,\n    kind: PointKind,\n    point: gdPoint\n  ) => {\n    const pointName =\n      kind === pointKindIdentifiers.ORIGIN\n        ? 'Origin'\n        : kind === pointKindIdentifiers.CENTER\n        ? 'Center'\n        : point.getName();\n    const imageSrc =\n      kind === pointKindIdentifiers.ORIGIN\n        ? 'res/originPoint.png'\n        : kind === pointKindIdentifiers.CENTER\n        ? 'res/centerPoint.png'\n        : 'res/point.png';\n    return (\n      <img\n        src={imageSrc}\n        title={pointName}\n        style={{\n          position: 'absolute',\n          left: x,\n          top: y,\n          transform: 'translate(-6px, -5px)',\n          cursor: 'move',\n        }}\n        alt=\"\"\n        key={name}\n        onPointerDown={e => {\n          e.preventDefault(); // Disable dragging ghost image on Firefox\n          onStartDragPoint(point, kind);\n        }}\n      />\n    );\n  };\n\n  const nonDefaultPoints = pointsContainer.getAllNonDefaultPoints();\n  const points = mapVector(nonDefaultPoints, (point, i) =>\n    renderPoint(\n      point.getName(),\n      point.getX() * imageZoomFactor,\n      point.getY() * imageZoomFactor,\n      pointKindIdentifiers.NORMAL,\n      point\n    )\n  );\n\n  const originPoint = pointsContainer.getOrigin();\n  const centerPoint = pointsContainer.getCenter();\n  const automaticCenterPosition = pointsContainer.isDefaultCenterPoint();\n\n  const frameStyle = {\n    position: 'absolute',\n    top: offsetTop || 0,\n    left: offsetLeft || 0,\n    width: imageWidth * imageZoomFactor,\n    height: imageHeight * imageZoomFactor,\n    overflow: 'visible',\n  };\n\n  return (\n    <div\n      style={styles.container}\n      onPointerMove={onMouseMove}\n      onPointerUp={onEndDragPoint}\n    >\n      <div style={frameStyle} ref={frameRef}>\n        {points}\n        {renderPoint(\n          'Origin',\n          originPoint.getX() * imageZoomFactor,\n          originPoint.getY() * imageZoomFactor,\n          pointKindIdentifiers.ORIGIN,\n          originPoint\n        )}\n        {renderPoint(\n          'Center',\n          (!automaticCenterPosition ? centerPoint.getX() : imageWidth / 2) *\n            imageZoomFactor,\n          (!automaticCenterPosition ? centerPoint.getY() : imageHeight / 2) *\n            imageZoomFactor,\n          pointKindIdentifiers.CENTER,\n          centerPoint\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PointsPreview;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport FlatButton from '../../../../UI/FlatButton';\nimport EmptyMessage from '../../../../UI/EmptyMessage';\nimport { Line, Column } from '../../../../UI/Grid';\nimport { mapFor } from '../../../../Utils/MapFor';\nimport PolygonsList from './PolygonsList';\nimport CollisionMasksPreview from './CollisionMasksPreview';\nimport ImagePreview from '../../../../ResourcesList/ResourcePreview/ImagePreview';\nimport {\n  getCurrentElements,\n  allSpritesHaveSameCollisionMasksAs,\n  copyAnimationsSpriteCollisionMasks,\n} from '../Utils/SpriteObjectHelper';\nimport SpriteSelector from '../Utils/SpriteSelector';\nimport Window from '../../../../Utils/Window';\nimport every from 'lodash/every';\nimport ResourcesLoader from '../../../../ResourcesLoader';\nimport useForceUpdate from '../../../../Utils/UseForceUpdate';\nimport EditorMosaic, {\n  type Editor,\n  type EditorMosaicNode,\n} from '../../../../UI/EditorMosaic';\nimport { useResponsiveWindowWidth } from '../../../../UI/Reponsive/ResponsiveWindowMeasurer';\nimport Background from '../../../../UI/Background';\nconst gd: libGDevelop = global.gd;\n\nconst horizontalMosaicNodes: EditorMosaicNode = {\n  direction: 'row',\n  first: 'preview',\n  second: 'properties',\n  splitPercentage: 50,\n};\n\nconst verticalMosaicNodes: EditorMosaicNode = {\n  direction: 'column',\n  first: 'preview',\n  second: 'properties',\n  splitPercentage: 50,\n};\n\ntype Props = {|\n  object: gdSpriteObject,\n  resourcesLoader: typeof ResourcesLoader,\n  project: gdProject,\n|};\n\nconst CollisionMasksEditor = (props: Props) => {\n  const [animationIndex, setAnimationIndex] = React.useState(0);\n  const [directionIndex, setDirectionIndex] = React.useState(0);\n  const [spriteIndex, setSpriteIndex] = React.useState(0);\n\n  // Note: these two booleans are set to false to avoid erasing points of other\n  // animations/frames (and they will be updated by updateSameCollisionMasksToggles). In\n  // theory, they should be set to the appropriate value at their initialization,\n  // for consistency of the state.\n  const [\n    sameCollisionMasksForAnimations,\n    setSameCollisionMasksForAnimations,\n  ] = React.useState(false);\n  const [\n    sameCollisionMasksForSprites,\n    setSameCollisionMasksForSprites,\n  ] = React.useState(false);\n  const [spriteWidth, setSpriteWidth] = React.useState(0);\n  const [spriteHeight, setSpriteHeight] = React.useState(0);\n  const forceUpdate = useForceUpdate();\n\n  const spriteObject = gd.asSpriteObject(props.object);\n  const { animation, sprite, hasValidSprite } = getCurrentElements(\n    spriteObject,\n    animationIndex,\n    directionIndex,\n    spriteIndex\n  );\n\n  const updateCollisionMasks = React.useCallback(\n    () => {\n      if (animation && sprite) {\n        if (sameCollisionMasksForAnimations) {\n          mapFor(0, spriteObject.getAnimationsCount(), i => {\n            const otherAnimation = spriteObject.getAnimation(i);\n            copyAnimationsSpriteCollisionMasks(sprite, otherAnimation);\n          });\n        } else if (sameCollisionMasksForSprites) {\n          copyAnimationsSpriteCollisionMasks(sprite, animation);\n        }\n      }\n\n      forceUpdate(); // Refresh the preview and the list\n    },\n    [\n      animation,\n      sprite,\n      spriteObject,\n      sameCollisionMasksForAnimations,\n      sameCollisionMasksForSprites,\n      forceUpdate,\n    ]\n  );\n\n  const chooseAnimation = index => {\n    setAnimationIndex(index);\n    setDirectionIndex(0);\n    setSpriteIndex(0);\n  };\n\n  const chooseDirection = index => {\n    setDirectionIndex(index);\n    setSpriteIndex(0);\n  };\n\n  const chooseSprite = index => {\n    setSpriteIndex(index);\n  };\n\n  const updateSameCollisionMasksToggles = () => {\n    if (!animation || !sprite) return;\n\n    setSameCollisionMasksForAnimations(\n      every(\n        mapFor(0, spriteObject.getAnimationsCount(), i => {\n          const otherAnimation = spriteObject.getAnimation(i);\n          return allSpritesHaveSameCollisionMasksAs(sprite, otherAnimation);\n        })\n      )\n    );\n\n    setSameCollisionMasksForSprites(\n      allSpritesHaveSameCollisionMasksAs(sprite, animation)\n    );\n  };\n\n  const onSetCollisionMaskAutomatic = React.useCallback(\n    (automatic: boolean = true) => {\n      if (!sprite) return;\n      sprite.setCollisionMaskAutomatic(automatic);\n      updateCollisionMasks();\n    },\n    [sprite, updateCollisionMasks]\n  );\n\n  const setSameCollisionMasksForAllAnimations = (enable: boolean) => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same collision masks for all animations will erase and reset all the other animations collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the animations of the object?\"\n      );\n      if (!answer) return;\n    }\n\n    setSameCollisionMasksForAnimations(enable);\n    setSameCollisionMasksForSprites(enable || sameCollisionMasksForSprites);\n  };\n\n  const setSameCollisionMasksForAllSprites = (enable: boolean) => {\n    if (enable) {\n      const answer = Window.showConfirmDialog(\n        \"Having the same collision masks for all animations will erase and reset all the other animations collision masks. This can't be undone. Are you sure you want to share these collision masks amongst all the animations of the object?\"\n      );\n      if (!answer) return;\n    }\n\n    setSameCollisionMasksForAnimations(\n      enable && sameCollisionMasksForAnimations\n    );\n    setSameCollisionMasksForSprites(enable);\n  };\n\n  const setCurrentSpriteSize = (spriteWidth: number, spriteHeight: number) => {\n    setSpriteWidth(spriteWidth);\n    setSpriteHeight(spriteHeight);\n  };\n\n  React.useEffect(updateCollisionMasks, [\n    sameCollisionMasksForAnimations,\n    sameCollisionMasksForSprites,\n  ]);\n\n  React.useEffect(updateSameCollisionMasksToggles, [animationIndex]);\n\n  // Keep panes vertical for small screens, side-by-side for large screens\n  const screenSize = useResponsiveWindowWidth();\n  const editorNodes =\n    screenSize === 'small' ? verticalMosaicNodes : horizontalMosaicNodes;\n\n  if (!props.object.getAnimationsCount()) return null;\n\n  const editors: { [string]: Editor } = {\n    preview: {\n      type: 'primary',\n      noTitleBar: true,\n      renderEditor: () => (\n        <Background>\n          <ImagePreview\n            resourceName={hasValidSprite ? sprite.getImageName() : ''}\n            resourcesLoader={props.resourcesLoader}\n            project={props.project}\n            onSize={setCurrentSpriteSize}\n            renderOverlay={overlayProps =>\n              hasValidSprite && (\n                <CollisionMasksPreview\n                  {...overlayProps}\n                  isDefaultBoundingBox={sprite.isCollisionMaskAutomatic()}\n                  polygons={sprite.getCustomCollisionMask()}\n                  onPolygonsUpdated={updateCollisionMasks}\n                />\n              )\n            }\n          />\n        </Background>\n      ),\n    },\n    properties: {\n      type: 'secondary',\n      noTitleBar: true,\n      renderEditor: () => (\n        <Background>\n          <Line>\n            <Column expand>\n              <SpriteSelector\n                spriteObject={spriteObject}\n                animationIndex={animationIndex}\n                directionIndex={directionIndex}\n                spriteIndex={spriteIndex}\n                chooseAnimation={chooseAnimation}\n                chooseDirection={chooseDirection}\n                chooseSprite={chooseSprite}\n                sameForAllAnimations={sameCollisionMasksForAnimations}\n                sameForAllSprites={sameCollisionMasksForSprites}\n                setSameForAllAnimations={setSameCollisionMasksForAllAnimations}\n                setSameForAllSprites={setSameCollisionMasksForAllSprites}\n                setSameForAllAnimationsLabel={\n                  <Trans>Share same collision masks for all animations</Trans>\n                }\n                setSameForAllSpritesLabel={\n                  <Trans>\n                    Share same collision masks for all sprites of this animation\n                  </Trans>\n                }\n              />\n            </Column>\n          </Line>\n          {!!sprite && !sprite.isCollisionMaskAutomatic() && (\n            <React.Fragment>\n              <PolygonsList\n                polygons={sprite.getCustomCollisionMask()}\n                onPolygonsUpdated={updateCollisionMasks}\n                restoreCollisionMask={() => onSetCollisionMaskAutomatic(true)}\n                spriteWidth={spriteWidth}\n                spriteHeight={spriteHeight}\n              />\n            </React.Fragment>\n          )}\n          {!!sprite && sprite.isCollisionMaskAutomatic() && (\n            <React.Fragment>\n              <EmptyMessage>\n                <Trans>\n                  This sprite uses the default collision mask, a rectangle that\n                  is as large as the sprite.\n                </Trans>\n              </EmptyMessage>\n              <Line justifyContent=\"center\">\n                <FlatButton\n                  label={<Trans>Use a custom collision mask</Trans>}\n                  primary={false}\n                  onClick={() => onSetCollisionMaskAutomatic(false)}\n                />\n              </Line>\n            </React.Fragment>\n          )}\n          {!sprite && (\n            <EmptyMessage>\n              <Trans>\n                Choose an animation and frame to edit the collision masks\n              </Trans>\n            </EmptyMessage>\n          )}\n        </Background>\n      ),\n    },\n  };\n\n  return (\n    <div style={{ flex: 1 }}>\n      <EditorMosaic editors={editors} initialNodes={editorNodes} />\n    </div>\n  );\n};\n\nexport default CollisionMasksEditor;\n","// @flow\nimport * as React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../../../../UI/Table';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport { mapVector } from '../../../../Utils/MapFor';\nimport styles from './styles';\nimport VerticeRow from './VerticeRow';\nimport {\n  Accordion,\n  AccordionBody,\n  AccordionHeader,\n} from '../../../../UI/Accordion';\nimport Text from '../../../../UI/Text';\nimport IconButton from '../../../../UI/IconButton';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport AddIcon from '@material-ui/icons/Add';\nimport FlatButton from '../../../../UI/FlatButton';\nimport { Trans, t } from '@lingui/macro';\nimport { Column, Line, Spacer } from '../../../../UI/Grid';\nimport RaisedButtonWithSplitMenu from '../../../../UI/RaisedButtonWithSplitMenu';\nimport AlertMessage from '../../../../UI/AlertMessage';\nimport GDevelopThemeContext from '../../../../UI/Theme/ThemeContext';\nimport ScrollView from '../../../../UI/ScrollView';\nconst gd = global.gd;\n\nconst SortableVerticeRow = SortableElement(VerticeRow);\n\ntype VerticesTableProps = {|\n  vertices: gdVectorVector2f,\n  hasWarning: boolean,\n  onUpdated: () => void,\n\n  // Sprite size is useful to make sure polygon vertices\n  // are not put outside the sprite bounding box, which is not supported:\n  spriteWidth: number,\n  spriteHeight: number,\n|};\n\nconst VerticesTable = (props: VerticesTableProps) => {\n  const updateVerticeX = (vertice, newValue) => {\n    // Ensure vertice stays inside the sprite bounding box.\n    vertice.set_x(Math.min(props.spriteWidth, Math.max(newValue, 0)));\n    props.onUpdated();\n  };\n\n  const updateVerticeY = (vertice, newValue) => {\n    // Ensure vertice stays inside the sprite bounding box.\n    vertice.set_y(Math.min(props.spriteHeight, Math.max(newValue, 0)));\n    props.onUpdated();\n  };\n\n  return (\n    <Column expand>\n      {props.hasWarning && (\n        <AlertMessage kind=\"warning\">\n          <Trans>\n            The polygon is not convex. Ensure it is, otherwise the collision\n            mask won't work.\n          </Trans>\n        </AlertMessage>\n      )}\n      <Spacer />\n      <Table>\n        <TableHeader>\n          <TableRow>\n            <TableHeaderColumn />\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              X\n            </TableHeaderColumn>\n            <TableHeaderColumn style={styles.coordinateColumn}>\n              Y\n            </TableHeaderColumn>\n            <TableRowColumn style={styles.toolColumn} />\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {mapVector(props.vertices, (vertice, j) => (\n            <SortableVerticeRow\n              index={j}\n              key={j}\n              disabled\n              verticeX={vertice.get_x()}\n              verticeY={vertice.get_y()}\n              onChangeVerticeX={newValue => updateVerticeX(vertice, newValue)}\n              onChangeVerticeY={newValue => updateVerticeY(vertice, newValue)}\n              onRemove={() => {\n                gd.removeFromVectorVector2f(props.vertices, j);\n                props.onUpdated();\n              }}\n              canRemove={props.vertices.size() > 3}\n            />\n          ))}\n        </TableBody>\n      </Table>\n      <Line justifyContent=\"center\">\n        <FlatButton\n          icon={<AddIcon size=\"small\" />}\n          label={<Trans>Add a vertex</Trans>}\n          onClick={() => {\n            const newVertice = new gd.Vector2f();\n            props.vertices.push_back(newVertice);\n            newVertice.delete();\n            props.onUpdated();\n          }}\n        />\n      </Line>\n    </Column>\n  );\n};\n\nconst SortableVerticesTable = SortableContainer(VerticesTable);\n\ntype PolygonSectionProps = {|\n  polygon: gdPolygon2d,\n  onUpdated: () => void,\n  onRemove: () => void,\n\n  // Sprite size is useful to make sure polygon vertices\n  // are not put outside the sprite bounding box, which is not supported:\n  spriteWidth: number,\n  spriteHeight: number,\n|};\n\nconst PolygonSection = (props: PolygonSectionProps) => {\n  const theme = React.useContext(GDevelopThemeContext);\n  const warningColor = theme.message.warning;\n\n  const vertices = props.polygon.getVertices();\n  const verticesCount = vertices.size();\n  const isConvex = props.polygon.isConvex();\n\n  const polygonActions = [\n    isConvex ? null : (\n      <IconButton\n        key=\"not-convex\"\n        size=\"small\"\n        tooltip={t`Polygon is not convex!`}\n      >\n        <WarningIcon style={{ color: warningColor }} />\n      </IconButton>\n    ),\n    <IconButton\n      key=\"delete-mask\"\n      size=\"small\"\n      onClick={ev => {\n        ev.stopPropagation();\n        props.onRemove();\n      }}\n      tooltip={t`Delete collision mask`}\n    >\n      <DeleteIcon />\n    </IconButton>,\n  ];\n\n  return (\n    <Accordion defaultExpanded>\n      <AccordionHeader actions={polygonActions}>\n        <Text displayInlineAsSpan>\n          {verticesCount === 3 && `Triangle`}\n          {verticesCount === 4 && `Quadrilateral`}\n          {verticesCount >= 5 && `Polygon with ${verticesCount} vertices`}\n        </Text>\n      </AccordionHeader>\n      <AccordionBody disableGutters>\n        <SortableVerticesTable\n          vertices={vertices}\n          hasWarning={!isConvex}\n          onUpdated={props.onUpdated}\n          spriteWidth={props.spriteWidth}\n          spriteHeight={props.spriteHeight}\n          onSortEnd={({ oldIndex, newIndex }) => {\n            // Reordering polygons is not supported for now\n          }}\n          helperClass=\"sortable-helper\"\n          useDragHandle\n          lockToContainerEdges\n        />\n      </AccordionBody>\n    </Accordion>\n  );\n};\n\ntype PolygonsListProps = {|\n  polygons: gdVectorPolygon2d,\n  onPolygonsUpdated: () => void,\n  restoreCollisionMask: () => void,\n\n  // Sprite size is useful to make sure polygon vertices\n  // are not put outside the sprite bounding box, which is not supported:\n  spriteWidth: number,\n  spriteHeight: number,\n|};\n\nconst PolygonsList = (props: PolygonsListProps) => {\n  const {\n    polygons,\n    spriteHeight,\n    spriteWidth,\n    onPolygonsUpdated,\n    restoreCollisionMask,\n  } = props;\n\n  const addCollisionMask = React.useCallback(\n    () => {\n      const newPolygon = gd.Polygon2d.createRectangle(\n        spriteWidth,\n        spriteHeight\n      );\n      newPolygon.move(spriteWidth / 2, spriteHeight / 2);\n      polygons.push_back(newPolygon);\n      onPolygonsUpdated();\n    },\n    [spriteHeight, spriteWidth, polygons, onPolygonsUpdated]\n  );\n\n  React.useEffect(\n    () => {\n      if (polygons.size() === 0) {\n        addCollisionMask();\n      }\n    },\n    [polygons, addCollisionMask]\n  );\n\n  return (\n    <React.Fragment>\n      <Column noMargin expand useFullHeight>\n        <ScrollView>\n          {mapVector(polygons, (polygon, i) => (\n            <PolygonSection\n              key={`polygon-${i}`}\n              polygon={polygon}\n              onUpdated={onPolygonsUpdated}\n              onRemove={() => {\n                gd.removeFromVectorPolygon2d(polygons, i);\n                if (polygons.size() === 0) {\n                  restoreCollisionMask();\n                }\n                onPolygonsUpdated();\n              }}\n              spriteWidth={spriteWidth}\n              spriteHeight={spriteHeight}\n            />\n          ))}\n        </ScrollView>\n        <Column>\n          <Line alignItems=\"center\" justifyContent=\"center\">\n            <RaisedButtonWithSplitMenu\n              primary\n              icon={<AddIcon />}\n              label={<Trans>Add collision mask</Trans>}\n              onClick={() => {\n                addCollisionMask();\n              }}\n              buildMenuTemplate={i18n => [\n                {\n                  label: i18n._(t`Restore the default collision mask`),\n                  click: restoreCollisionMask,\n                },\n              ]}\n            />\n          </Line>\n        </Column>\n      </Column>\n    </React.Fragment>\n  );\n};\n\nexport default PolygonsList;\n","// @flow\nimport React from 'react';\nimport { TableRow, TableRowColumn } from '../../../../UI/Table';\nimport IconButton from '../../../../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport TextField from '../../../../UI/TextField';\nimport styles from './styles';\nimport ThemeConsumer from '../../../../UI/Theme/ThemeConsumer';\n\ntype Props = {|\n  canRemove: boolean,\n  onRemove: () => void,\n  verticeX: number,\n  verticeY: number,\n  onChangeVerticeX: (value: number) => void,\n  onChangeVerticeY: (value: number) => void,\n|};\n\nconst VerticeRow = (props: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <TableRow\n        style={{\n          backgroundColor: muiTheme.list.itemsBackgroundColor,\n        }}\n      >\n        <TableRowColumn />\n        <TableRowColumn style={styles.coordinateColumn}>\n          <TextField\n            margin=\"none\"\n            value={props.verticeX}\n            type=\"number\"\n            id=\"vertice-x\"\n            onChange={(e, value) =>\n              props.onChangeVerticeX(parseFloat(value || 0))\n            }\n          />\n        </TableRowColumn>\n        <TableRowColumn style={styles.coordinateColumn}>\n          <TextField\n            margin=\"none\"\n            value={props.verticeY}\n            type=\"number\"\n            id=\"vertice-y\"\n            onChange={(e, value) =>\n              props.onChangeVerticeY(parseFloat(value || 0))\n            }\n          />\n        </TableRowColumn>\n        <TableRowColumn style={styles.toolColumn}>\n          {!!props.onRemove && (\n            <IconButton\n              size=\"small\"\n              onClick={props.onRemove}\n              disabled={!props.canRemove}\n            >\n              <Delete />\n            </IconButton>\n          )}\n        </TableRowColumn>\n      </TableRow>\n    )}\n  </ThemeConsumer>\n);\n\nexport default VerticeRow;\n","// @flow\nimport * as React from 'react';\nimport { mapVector } from '../../../../Utils/MapFor';\nimport useForceUpdate from '../../../../Utils/UseForceUpdate';\n\nconst styles = {\n  vertexCircle: {\n    cursor: 'move',\n  },\n};\n\ntype Props = {|\n  polygons: gdVectorPolygon2d,\n  isDefaultBoundingBox: boolean,\n  imageWidth: number,\n  imageHeight: number,\n  offsetTop: number,\n  offsetLeft: number,\n  imageZoomFactor: number,\n  onPolygonsUpdated: () => void,\n|};\n\nconst CollisionMasksPreview = (props: Props) => {\n  const svgRef = React.useRef<React.ElementRef<'svg'> | null>(null);\n  const [draggedVertex, setDraggedVertex] = React.useState<gdVector2f | null>(\n    null\n  );\n\n  const {\n    polygons,\n    imageZoomFactor,\n    imageHeight,\n    imageWidth,\n    offsetTop,\n    offsetLeft,\n    isDefaultBoundingBox,\n  } = props;\n\n  const forceUpdate = useForceUpdate();\n\n  const onStartDragVertex = (vertex: gdVector2f) => {\n    if (draggedVertex) return;\n    setDraggedVertex(vertex);\n  };\n\n  const onEndDragVertex = () => {\n    const draggingWasDone = !!draggedVertex;\n    if (draggingWasDone) props.onPolygonsUpdated();\n    setDraggedVertex(null);\n  };\n\n  /**\n   * Move a vertex with the mouse. A similar dragging implementation is done in\n   * PointsPreview (but with div and img elements).\n   *\n   * TODO: This could be optimized by avoiding the forceUpdate (not sure if worth it though).\n   */\n  const onPointerMove = (event: any) => {\n    if (!draggedVertex || !svgRef.current) return;\n\n    // $FlowExpectedError Flow doesn't have SVG typings yet (@facebook/flow#4551)\n    const pointOnScreen = svgRef.current.createSVGPoint();\n    pointOnScreen.x = event.clientX;\n    pointOnScreen.y = event.clientY;\n    // $FlowExpectedError Flow doesn't have SVG typings yet (@facebook/flow#4551)\n    const screenToSvgMatrix = svgRef.current.getScreenCTM().inverse();\n    const pointOnSvg = pointOnScreen.matrixTransform(screenToSvgMatrix);\n\n    // Confine vertices to inside the sprite frame\n    const { frameX, frameY } = confinePointToFrame(pointOnSvg.x, pointOnSvg.y);\n\n    draggedVertex.set_x(frameX / imageZoomFactor);\n    draggedVertex.set_y(frameY / imageZoomFactor);\n    forceUpdate();\n  };\n\n  /**\n   * Given a point's coordinates, returns new coordinates that\n   * are confined inside the sprite frame.\n   */\n  const confinePointToFrame = (freeX: number, freeY: number) => {\n    const maxX = imageWidth * imageZoomFactor;\n    const maxY = imageHeight * imageZoomFactor;\n\n    const frameX = Math.min(maxX, Math.max(freeX, 0));\n    const frameY = Math.min(maxY, Math.max(freeY, 0));\n    return { frameX, frameY };\n  };\n\n  const renderBoundingBox = () => {\n    return (\n      <polygon\n        fill=\"rgba(255,0,0,0.2)\"\n        stroke=\"rgba(255,0,0,0.5)\"\n        strokeWidth={1}\n        fillRule=\"evenodd\"\n        points={`0,0 ${imageWidth * imageZoomFactor},0 ${imageWidth *\n          imageZoomFactor},${imageHeight * imageZoomFactor} 0,${imageHeight *\n          imageZoomFactor}`}\n      />\n    );\n  };\n\n  const renderPolygons = () => {\n    return (\n      <React.Fragment>\n        {mapVector(polygons, (polygon, i) => {\n          const vertices = polygon.getVertices();\n          return (\n            <polygon\n              key={`polygon-${i}`}\n              fill=\"rgba(255,0,0,0.2)\"\n              stroke=\"rgba(255,0,0,0.5)\"\n              strokeWidth={1}\n              fillRule=\"evenodd\"\n              points={mapVector(\n                vertices,\n                (vertex, j) =>\n                  `${vertex.get_x() * imageZoomFactor},${vertex.get_y() *\n                    imageZoomFactor}`\n              ).join(' ')}\n            />\n          );\n        })}\n        {mapVector(polygons, (polygon, i) => {\n          const vertices = polygon.getVertices();\n          return mapVector(vertices, (vertex, j) => (\n            <circle\n              onPointerDown={() => onStartDragVertex(vertex)}\n              key={`polygon-${i}-vertex-${j}`}\n              fill=\"rgba(255,0,0,0.75)\"\n              strokeWidth={1}\n              cx={vertex.get_x() * imageZoomFactor}\n              cy={vertex.get_y() * imageZoomFactor}\n              r={5}\n              style={styles.vertexCircle}\n            />\n          ));\n        })}\n      </React.Fragment>\n    );\n  };\n\n  const containerStyle = {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n  };\n\n  const svgStyle = {\n    position: 'absolute',\n    top: offsetTop || 0,\n    left: offsetLeft || 0,\n    width: imageWidth * imageZoomFactor,\n    height: imageHeight * imageZoomFactor,\n    overflow: 'visible',\n  };\n\n  return (\n    <div\n      style={containerStyle}\n      onPointerMove={onPointerMove}\n      onPointerUp={onEndDragVertex}\n    >\n      <svg style={svgStyle} ref={svgRef}>\n        {isDefaultBoundingBox && renderBoundingBox()}\n        {!isDefaultBoundingBox && renderPolygons()}\n      </svg>\n    </div>\n  );\n};\n\nexport default CollisionMasksPreview;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport { Line, Column } from '../../UI/Grid';\nimport EmptyMessage from '../../UI/EmptyMessage';\n\nexport default function EmptyEditor() {\n  return (\n    <Column>\n      <Line>\n        <EmptyMessage>\n          <Trans>\n            This object does not have any specific configuration. Add it on the\n            scene and use events to interact with it.\n          </Trans>\n        </EmptyMessage>\n      </Line>\n    </Column>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport ColorField from '../../UI/ColorField';\nimport {\n  rgbColorToRGBString,\n  rgbStringAndAlphaToRGBColor,\n} from '../../Utils/ColorTransformer';\nimport { type EditorProps } from './EditorProps.flow';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../../UI/Layout';\nconst gd = global.gd;\n\nexport default class PanelSpriteEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const { object } = this.props;\n    const shapePainterObject = gd.asShapePainterObject(object);\n\n    return (\n      <ColumnStackLayout>\n        <Checkbox\n          label={\n            <Trans>\n              Draw the shapes relative to the object position on the scene\n            </Trans>\n          }\n          checked={!shapePainterObject.areCoordinatesAbsolute()}\n          onCheck={(e, checked) => {\n            if (!checked) shapePainterObject.setCoordinatesAbsolute();\n            else shapePainterObject.setCoordinatesRelative();\n            this.forceUpdate();\n          }}\n        />\n        <Checkbox\n          label={<Trans>Clear the rendered image between each frame</Trans>}\n          checked={shapePainterObject.isClearedBetweenFrames()}\n          onCheck={(e, checked) => {\n            shapePainterObject.setClearBetweenFrames(checked);\n            this.forceUpdate();\n          }}\n        />\n        <ResponsiveLineStackLayout noMargin>\n          <ColorField\n            floatingLabelText={<Trans>Outline color</Trans>}\n            disableAlpha\n            fullWidth\n            color={rgbColorToRGBString({\n              r: shapePainterObject.getOutlineColorR(),\n              g: shapePainterObject.getOutlineColorG(),\n              b: shapePainterObject.getOutlineColorB(),\n            })}\n            onChange={color => {\n              const rgbColor = rgbStringAndAlphaToRGBColor(color);\n              if (rgbColor) {\n                shapePainterObject.setOutlineColor(\n                  rgbColor.r,\n                  rgbColor.g,\n                  rgbColor.b\n                );\n\n                this.forceUpdate();\n              }\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Outline opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={shapePainterObject.getOutlineOpacity()}\n            onChange={value => {\n              shapePainterObject.setOutlineOpacity(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Outline size (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={shapePainterObject.getOutlineSize()}\n            onChange={value => {\n              shapePainterObject.setOutlineSize(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <ColorField\n            floatingLabelText={<Trans>Fill color</Trans>}\n            disableAlpha\n            fullWidth\n            color={rgbColorToRGBString({\n              r: shapePainterObject.getFillColorR(),\n              g: shapePainterObject.getFillColorG(),\n              b: shapePainterObject.getFillColorB(),\n            })}\n            onChange={color => {\n              const rgbColor = rgbStringAndAlphaToRGBColor(color);\n              if (rgbColor) {\n                shapePainterObject.setFillColor(\n                  rgbColor.r,\n                  rgbColor.g,\n                  rgbColor.b\n                );\n\n                this.forceUpdate();\n              }\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Fill opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={shapePainterObject.getFillOpacity()}\n            onChange={value => {\n              shapePainterObject.setFillOpacity(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </ColumnStackLayout>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Checkbox from '../../UI/Checkbox';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport ColorField from '../../UI/ColorField';\nimport {\n  rgbColorToRGBString,\n  rgbStringAndAlphaToRGBColor,\n} from '../../Utils/ColorTransformer';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport { type EditorProps } from './EditorProps.flow';\nimport ResourceSelectorWithThumbnail from '../../ResourcesList/ResourceSelectorWithThumbnail';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../../UI/Layout';\nimport DismissableTutorialMessage from '../../Hints/DismissableTutorialMessage';\nimport { getObjectTutorialIds } from '../../Utils/GDevelopServices/Tutorial';\nconst gd = global.gd;\n\nexport default class ParticleEmitterEditor extends React.Component<\n  EditorProps,\n  void\n> {\n  render() {\n    const {\n      object,\n      project,\n      resourceSources,\n      onChooseResource,\n      resourceExternalEditors,\n    } = this.props;\n    const particleEmitterObject = gd.asParticleEmitterObject(object);\n    const tutorialIds = getObjectTutorialIds(object.getType());\n\n    return (\n      <ColumnStackLayout>\n        {tutorialIds.map(tutorialId => (\n          <DismissableTutorialMessage\n            key={tutorialId}\n            tutorialId={tutorialId}\n          />\n        ))}\n        <SelectField\n          fullWidth\n          floatingLabelText={<Trans>Particle type</Trans>}\n          value={particleEmitterObject.getRendererType()}\n          onChange={(e, i, value: string) => {\n            const rendererType = parseInt(value, 10) || 0;\n            particleEmitterObject.setRendererType(rendererType);\n            if (rendererType !== gd.ParticleEmitterObject.Quad) {\n              particleEmitterObject.setParticleTexture('');\n            }\n            this.forceUpdate();\n          }}\n        >\n          <SelectOption\n            value={gd.ParticleEmitterObject.Point}\n            primaryText={t`Circle`}\n          />\n          <SelectOption\n            value={gd.ParticleEmitterObject.Line}\n            primaryText={t`Line`}\n          />\n          <SelectOption\n            value={gd.ParticleEmitterObject.Quad}\n            primaryText={t`Image`}\n          />\n        </SelectField>\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Point && (\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Size</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getRendererParam1()}\n            onChange={value => {\n              particleEmitterObject.setRendererParam1(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        )}\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Line && (\n          <ResponsiveLineStackLayout noMargin>\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Lines length</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getRendererParam1()}\n              onChange={value => {\n                particleEmitterObject.setRendererParam1(parseFloat(value));\n                this.forceUpdate();\n              }}\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Lines thickness</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getRendererParam2()}\n              onChange={value => {\n                particleEmitterObject.setRendererParam2(parseFloat(value));\n                this.forceUpdate();\n              }}\n            />\n          </ResponsiveLineStackLayout>\n        )}\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Quad && (\n          <ResourceSelectorWithThumbnail\n            project={project}\n            resourceSources={resourceSources}\n            onChooseResource={onChooseResource}\n            resourceKind=\"image\"\n            resourceName={particleEmitterObject.getParticleTexture()}\n            resourceExternalEditors={resourceExternalEditors}\n            onChange={resourceName => {\n              particleEmitterObject.setParticleTexture(resourceName);\n              this.forceUpdate();\n            }}\n            floatingLabelText={<Trans>Select an image</Trans>}\n          />\n        )}\n        {particleEmitterObject.getRendererType() ===\n          gd.ParticleEmitterObject.Quad && (\n          <ResponsiveLineStackLayout noMargin>\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Particles start width</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getRendererParam1()}\n              onChange={value => {\n                particleEmitterObject.setRendererParam1(\n                  Math.max(0, parseFloat(value))\n                );\n                this.forceUpdate();\n              }}\n            />\n            <SemiControlledTextField\n              commitOnBlur\n              floatingLabelText={<Trans>Particles start height</Trans>}\n              fullWidth\n              type=\"number\"\n              value={particleEmitterObject.getRendererParam2()}\n              onChange={value => {\n                particleEmitterObject.setRendererParam2(\n                  Math.max(0, parseFloat(value))\n                );\n                this.forceUpdate();\n              }}\n            />\n          </ResponsiveLineStackLayout>\n        )}\n        <ResponsiveLineStackLayout noMargin>\n          <ColorField\n            floatingLabelText={<Trans>Particles start color</Trans>}\n            disableAlpha\n            fullWidth\n            color={rgbColorToRGBString({\n              r: particleEmitterObject.getParticleRed1(),\n              g: particleEmitterObject.getParticleGreen1(),\n              b: particleEmitterObject.getParticleBlue1(),\n            })}\n            onChange={color => {\n              const rgbColor = rgbStringAndAlphaToRGBColor(color);\n              if (rgbColor) {\n                particleEmitterObject.setParticleRed1(rgbColor.r);\n                particleEmitterObject.setParticleGreen1(rgbColor.g);\n                particleEmitterObject.setParticleBlue1(rgbColor.b);\n\n                this.forceUpdate();\n              }\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Start opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAlpha1()}\n            onChange={value => {\n              particleEmitterObject.setParticleAlpha1(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <ColorField\n            floatingLabelText={<Trans>Particles end color</Trans>}\n            disableAlpha\n            fullWidth\n            color={rgbColorToRGBString({\n              r: particleEmitterObject.getParticleRed2(),\n              g: particleEmitterObject.getParticleGreen2(),\n              b: particleEmitterObject.getParticleBlue2(),\n            })}\n            onChange={color => {\n              const rgbColor = rgbStringAndAlphaToRGBColor(color);\n              if (rgbColor) {\n                particleEmitterObject.setParticleRed2(rgbColor.r);\n                particleEmitterObject.setParticleGreen2(rgbColor.g);\n                particleEmitterObject.setParticleBlue2(rgbColor.b);\n\n                this.forceUpdate();\n              }\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>End opacity (0-255)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAlpha2()}\n            onChange={value => {\n              particleEmitterObject.setParticleAlpha2(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <Checkbox\n          label={<Trans>Additive rendering</Trans>}\n          checked={particleEmitterObject.isRenderingAdditive()}\n          onCheck={(e, checked) => {\n            if (checked) particleEmitterObject.setRenderingAdditive();\n            else particleEmitterObject.setRenderingAlpha();\n            this.forceUpdate();\n          }}\n        />\n        <Checkbox\n          label={<Trans>Delete when out of particles</Trans>}\n          checked={particleEmitterObject.getDestroyWhenNoParticles()}\n          onCheck={(e, checked) => {\n            particleEmitterObject.setDestroyWhenNoParticles(checked);\n            this.forceUpdate();\n          }}\n        />\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Maximum number of particles displayed</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getMaxParticleNb()}\n            onChange={value => {\n              particleEmitterObject.setMaxParticleNb(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Number of particles in tank (-1 for infinite)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getTank()}\n            onChange={value => {\n              particleEmitterObject.setTank(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Flow of particles (particles/seconds)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getFlow()}\n            onChange={value => {\n              particleEmitterObject.setFlow(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Minimum emitter force applied on particles</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getEmitterForceMin()}\n            onChange={value => {\n              particleEmitterObject.setEmitterForceMin(\n                parseInt(value, 10) || 0\n              );\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Maximum emitter force applied on particles</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getEmitterForceMax()}\n            onChange={value => {\n              particleEmitterObject.setEmitterForceMax(\n                parseInt(value, 10) || 0\n              );\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Spray cone angle (in degrees)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getConeSprayAngle()}\n            onChange={value => {\n              particleEmitterObject.setConeSprayAngle(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Radius of the emitter</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getZoneRadius()}\n            onChange={value => {\n              particleEmitterObject.setZoneRadius(parseInt(value, 10) || 0);\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Gravity on particles on X axis</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleGravityX()}\n            onChange={value => {\n              particleEmitterObject.setParticleGravityX(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Gravity on particles on Y axis</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleGravityY()}\n            onChange={value => {\n              particleEmitterObject.setParticleGravityY(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle minimum lifetime (in seconds)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleLifeTimeMin()}\n            onChange={value => {\n              particleEmitterObject.setParticleLifeTimeMin(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle maximum lifetime (in seconds)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleLifeTimeMax()}\n            onChange={value => {\n              particleEmitterObject.setParticleLifeTimeMax(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Particle start size (in percents)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleSize1()}\n            onChange={value => {\n              particleEmitterObject.setParticleSize1(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={<Trans>Particle end size (in percents)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleSize2()}\n            onChange={value => {\n              particleEmitterObject.setParticleSize2(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin>\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle minimum rotation speed (degrees/second)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAngle1()}\n            onChange={value => {\n              particleEmitterObject.setParticleAngle1(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n          <SemiControlledTextField\n            commitOnBlur\n            floatingLabelText={\n              <Trans>Particle maximum rotation speed (degrees/second)</Trans>\n            }\n            fullWidth\n            type=\"number\"\n            value={particleEmitterObject.getParticleAngle2()}\n            onChange={value => {\n              particleEmitterObject.setParticleAngle2(parseFloat(value));\n              this.forceUpdate();\n            }}\n          />\n        </ResponsiveLineStackLayout>\n      </ColumnStackLayout>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\n\nimport * as React from 'react';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { type EditorProps } from './EditorProps.flow';\nimport { Column, Line } from '../../UI/Grid';\nimport { getExtraObjectsInformation } from '../../Hints';\nimport { getObjectTutorialIds } from '../../Utils/GDevelopServices/Tutorial';\nimport AlertMessage from '../../UI/AlertMessage';\nimport { ColumnStackLayout } from '../../UI/Layout';\nimport DismissableTutorialMessage from '../../Hints/DismissableTutorialMessage';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = EditorProps;\n\nconst ObjectPropertiesEditor = (props: Props) => {\n  const {\n    object,\n    project,\n    resourceSources,\n    onChooseResource,\n    resourceExternalEditors,\n    unsavedChanges,\n  } = props;\n\n  // TODO: Workaround a bad design of ObjectJsImplementation. When getProperties\n  // and associated methods are redefined in JS, they have different arguments (\n  // see ObjectJsImplementation C++ implementation). If called directly here from JS,\n  // the arguments will be mismatched. To workaround this, always case the object to\n  // a base gdObject to ensure C++ methods are called.\n  const objectAsGdObject = gd.castObject(object, gd.gdObject);\n  const properties = objectAsGdObject.getProperties();\n\n  const propertiesSchema = propertiesMapToSchema(\n    properties,\n    object => object.getProperties(),\n    (object, name, value) => object.updateProperty(name, value)\n  );\n\n  const extraInformation = getExtraObjectsInformation()[\n    objectAsGdObject.getType()\n  ];\n\n  const tutorialIds = getObjectTutorialIds(objectAsGdObject.getType());\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <ColumnStackLayout>\n          {tutorialIds.map(tutorialId => (\n            <DismissableTutorialMessage\n              key={tutorialId}\n              tutorialId={tutorialId}\n            />\n          ))}\n          {propertiesSchema.length ? (\n            <React.Fragment>\n              {extraInformation ? (\n                <Line>\n                  <Column noMargin>\n                    {extraInformation.map(({ kind, message }, index) => (\n                      <AlertMessage kind={kind} key={index}>\n                        {i18n._(message)}\n                      </AlertMessage>\n                    ))}\n                  </Column>\n                </Line>\n              ) : null}\n              <PropertiesEditor\n                unsavedChanges={unsavedChanges}\n                schema={propertiesSchema}\n                instances={[objectAsGdObject]}\n                project={project}\n                resourceSources={resourceSources}\n                onChooseResource={onChooseResource}\n                resourceExternalEditors={resourceExternalEditors}\n              />\n            </React.Fragment>\n          ) : (\n            <EmptyMessage>\n              <Trans>\n                There is nothing to configure for this object. You can still use\n                events to interact with the object.\n              </Trans>\n            </EmptyMessage>\n          )}\n        </ColumnStackLayout>\n      )}\n    </I18n>\n  );\n};\n\nexport default ObjectPropertiesEditor;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport TextField from '../UI/TextField';\nimport Add from '@material-ui/icons/Add';\nimport Delete from '@material-ui/icons/Delete';\nimport IconButton from '../UI/IconButton';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport { MiniToolbarText } from '../UI/MiniToolbar';\nimport HelpIcon from '../UI/HelpIcon';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport NewBehaviorDialog from './NewBehaviorDialog';\nimport BehaviorsEditorService from './BehaviorsEditorService';\nimport Window from '../Utils/Window';\nimport { Column, Line } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport DismissableTutorialMessage from '../Hints/DismissableTutorialMessage';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport { Accordion, AccordionHeader, AccordionBody } from '../UI/Accordion';\nimport EmptyBehaviorsPlaceholder from './EmptyBehaviorsPlaceholder';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport ScrollView from '../UI/ScrollView';\nimport { IconContainer } from '../UI/IconContainer';\nimport {\n  ACHIEVEMENT_FEATURE_FLAG,\n  addCreateBadgePreHookIfNotClaimed,\n  TRIVIAL_FIRST_BEHAVIOR,\n} from '../Utils/GDevelopServices/Badge';\nimport AuthenticatedUserContext from '../Profile/AuthenticatedUserContext';\nimport { getBehaviorTutorialIds } from '../Utils/GDevelopServices/Tutorial';\n\nconst gd: libGDevelop = global.gd;\n\ntype Props = {|\n  project: gdProject,\n  object: gdObject,\n  onUpdateBehaviorsSharedData: () => void,\n  onSizeUpdated?: ?() => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\nconst BehaviorsEditor = (props: Props) => {\n  const [newBehaviorDialogOpen, setNewBehaviorDialogOpen] = React.useState(\n    false\n  );\n  const authenticatedUser = React.useContext(AuthenticatedUserContext);\n\n  const { object, project } = props;\n  const allBehaviorNames = object.getAllBehaviorNames().toJSArray();\n  const forceUpdate = useForceUpdate();\n\n  const { values } = React.useContext(PreferencesContext);\n\n  const hasBehaviorWithType = (type: string) => {\n    return allBehaviorNames\n      .map(behaviorName => object.getBehavior(behaviorName))\n      .map(behavior => behavior.getTypeName())\n      .filter(behaviorType => behaviorType === type).length;\n  };\n\n  const _addBehavior = (type: string, defaultName: string) => {\n    setNewBehaviorDialogOpen(false);\n\n    if (hasBehaviorWithType(type)) {\n      const answer = Window.showConfirmDialog(\n        \"There is already a behavior of this type attached to the object. It's possible to add this behavior again, but it's unusual and may not be always supported properly. Are you sure you want to add this behavior again?\"\n      );\n\n      if (!answer) return;\n    }\n\n    const name = newNameGenerator(defaultName, name =>\n      object.hasBehaviorNamed(name)\n    );\n    gd.WholeProjectRefactorer.addBehaviorAndRequiredBehaviors(\n      project,\n      object,\n      type,\n      name\n    );\n\n    forceUpdate();\n    if (props.onSizeUpdated) props.onSizeUpdated();\n    props.onUpdateBehaviorsSharedData();\n  };\n\n  const addBehavior = ACHIEVEMENT_FEATURE_FLAG\n    ? addCreateBadgePreHookIfNotClaimed(\n        authenticatedUser,\n        TRIVIAL_FIRST_BEHAVIOR,\n        _addBehavior\n      )\n    : _addBehavior;\n\n  const onChangeBehaviorName = (\n    behaviorContent: gdBehaviorContent,\n    newName: string\n  ) => {\n    // TODO: This is disabled for now as there is no proper refactoring\n    // of events after a behavior renaming. Once refactoring is available,\n    // the text field can be enabled again and refactoring calls added here\n    // (or in a parent).\n    // Renaming a behavior is something that is really rare anyway! :)\n\n    if (object.hasBehaviorNamed(newName)) return;\n    object.renameBehavior(behaviorContent.getName(), newName);\n    forceUpdate();\n  };\n\n  const onRemoveBehavior = (behaviorName: string) => {\n    let message =\n      \"Are you sure you want to remove this behavior? This can't be undone.\";\n    const dependentBehaviors = gd.WholeProjectRefactorer.findDependentBehaviorNames(\n      project,\n      object,\n      behaviorName\n    ).toJSArray();\n    if (dependentBehaviors.length > 0) {\n      message +=\n        '\\nDependent behaviors will be removed too: ' +\n        dependentBehaviors.join(', ');\n    }\n    const answer = Window.showConfirmDialog(message);\n\n    if (answer) {\n      object.removeBehavior(behaviorName);\n      dependentBehaviors.forEach(name => object.removeBehavior(name));\n      if (props.onSizeUpdated) props.onSizeUpdated();\n    }\n  };\n\n  return (\n    <Column noMargin expand useFullHeight>\n      {allBehaviorNames.length === 0 ? (\n        <Column noMargin expand justifyContent=\"center\">\n          <EmptyBehaviorsPlaceholder />\n        </Column>\n      ) : (\n        <ScrollView>\n          {allBehaviorNames.map((behaviorName, index) => {\n            const behaviorContent = object.getBehavior(behaviorName);\n            const behaviorTypeName = behaviorContent.getTypeName();\n\n            const behaviorMetadata = gd.MetadataProvider.getBehaviorMetadata(\n              gd.JsPlatform.get(),\n              behaviorTypeName\n            );\n            if (gd.MetadataProvider.isBadBehaviorMetadata(behaviorMetadata)) {\n              return (\n                <Accordion key={behaviorName} defaultExpanded>\n                  <AccordionHeader\n                    actions={[\n                      <IconButton\n                        key=\"delete\"\n                        onClick={ev => {\n                          ev.stopPropagation();\n                          onRemoveBehavior(behaviorName);\n                        }}\n                      >\n                        <Delete />\n                      </IconButton>,\n                    ]}\n                  >\n                    <MiniToolbarText firstChild>\n                      <Trans>Unknown behavior</Trans>{' '}\n                    </MiniToolbarText>\n                    <Column noMargin expand>\n                      <TextField margin=\"none\" value={behaviorName} disabled />\n                    </Column>\n                  </AccordionHeader>\n                  <AccordionBody>\n                    <EmptyMessage>\n                      <Trans>\n                        This behavior is unknown. It might be a behavior that\n                        was defined in an extension and that was later removed.\n                        You should delete it.\n                      </Trans>\n                    </EmptyMessage>\n                  </AccordionBody>\n                </Accordion>\n              );\n            }\n\n            const behavior = behaviorMetadata.get();\n            const BehaviorComponent = BehaviorsEditorService.getEditor(\n              behaviorTypeName\n            );\n            const tutorialIds = getBehaviorTutorialIds(behaviorTypeName);\n            const enabledTutorialIds = tutorialIds.filter(\n              tutorialId => !values.hiddenTutorialHints[tutorialId]\n            );\n            const iconUrl = behaviorMetadata.getIconFilename();\n\n            return (\n              <Accordion key={behaviorName} defaultExpanded>\n                <AccordionHeader\n                  actions={[\n                    <HelpIcon\n                      key=\"help\"\n                      size=\"small\"\n                      helpPagePath={behaviorMetadata.getHelpPath()}\n                    />,\n                    <IconButton\n                      key=\"delete\"\n                      size=\"small\"\n                      onClick={ev => {\n                        ev.stopPropagation();\n                        onRemoveBehavior(behaviorName);\n                      }}\n                    >\n                      <Delete />\n                    </IconButton>,\n                  ]}\n                >\n                  {iconUrl ? (\n                    <IconContainer\n                      src={iconUrl}\n                      alt={behaviorMetadata.getFullName()}\n                      size={20}\n                    />\n                  ) : null}\n                  <Column expand>\n                    <TextField\n                      value={behaviorName}\n                      hintText={t`Behavior name`}\n                      margin=\"none\"\n                      fullWidth\n                      disabled\n                      onChange={(e, text) =>\n                        onChangeBehaviorName(behaviorContent, text)\n                      }\n                    />\n                  </Column>\n                </AccordionHeader>\n                <AccordionBody>\n                  <Column\n                    expand\n                    noMargin\n                    // Avoid Physics2 behavior overflow on small screens\n                    noOverflowParent\n                  >\n                    {enabledTutorialIds.length ? (\n                      <Line>\n                        <ColumnStackLayout expand>\n                          {tutorialIds.map(tutorialId => (\n                            <DismissableTutorialMessage\n                              key={tutorialId}\n                              tutorialId={tutorialId}\n                            />\n                          ))}\n                        </ColumnStackLayout>\n                      </Line>\n                    ) : null}\n                    <Line>\n                      <BehaviorComponent\n                        behavior={behavior}\n                        behaviorContent={behaviorContent}\n                        project={project}\n                        object={object}\n                        resourceSources={props.resourceSources}\n                        onChooseResource={props.onChooseResource}\n                        resourceExternalEditors={props.resourceExternalEditors}\n                      />\n                    </Line>\n                  </Column>\n                </AccordionBody>\n              </Accordion>\n            );\n          })}\n        </ScrollView>\n      )}\n      <Column>\n        <Line justifyContent=\"flex-end\" expand>\n          <RaisedButton\n            key=\"add-behavior-line\"\n            label={<Trans>Add a behavior to the object</Trans>}\n            primary\n            onClick={() => setNewBehaviorDialogOpen(true)}\n            icon={<Add />}\n          />\n        </Line>\n      </Column>\n\n      {newBehaviorDialogOpen && (\n        <NewBehaviorDialog\n          open={newBehaviorDialogOpen}\n          objectType={object.getType()}\n          onClose={() => setNewBehaviorDialogOpen(false)}\n          onChoose={addBehavior}\n          project={project}\n        />\n      )}\n    </Column>\n  );\n};\n\nexport default BehaviorsEditor;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport FlatButton from '../UI/FlatButton';\nimport Subheader from '../UI/Subheader';\nimport ListIcon from '../UI/ListIcon';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport { List, ListItem } from '../UI/List';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport Create from '@material-ui/icons/Create';\nimport { Column, Line } from '../UI/Grid';\nimport { showMessageBox } from '../UI/Messages/MessageBox';\nimport { getDeprecatedBehaviorsInformation } from '../Hints';\nimport { getHelpLink } from '../Utils/HelpLink';\nimport {\n  type EnumeratedBehaviorMetadata,\n  enumerateBehaviorsMetadata,\n  filterEnumeratedBehaviorMetadata,\n} from './EnumerateBehaviorsMetadata';\nimport SearchBar, { useShouldAutofocusSearchbar } from '../UI/SearchBar';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport { ExtensionStore } from '../AssetStore/ExtensionStore';\nimport Window from '../Utils/Window';\nimport EventsFunctionsExtensionsContext from '../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport { installExtension } from '../AssetStore/ExtensionStore/InstallExtension';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport ScrollView, { type ScrollViewInterface } from '../UI/ScrollView';\n\nconst styles = {\n  disabledItem: { opacity: 0.6 },\n};\n\nconst BehaviorListItem = ({\n  behaviorMetadata,\n  onClick,\n  disabled,\n}: {|\n  behaviorMetadata: EnumeratedBehaviorMetadata,\n  onClick: () => void,\n  disabled: boolean,\n|}) => (\n  <ListItem\n    leftIcon={\n      <ListIcon\n        src={behaviorMetadata.iconFilename}\n        iconSize={40}\n        isGDevelopIcon\n      />\n    }\n    key={behaviorMetadata.type}\n    primaryText={behaviorMetadata.fullName}\n    secondaryText={behaviorMetadata.description}\n    secondaryTextLines={2}\n    onClick={onClick}\n    style={disabled ? styles.disabledItem : undefined}\n    disabled={disabled}\n  />\n);\n\ntype Props = {|\n  project: gdProject,\n  objectType: string,\n  open: boolean,\n  onClose: () => void,\n  onChoose: (type: string, defaultName: string) => void,\n|};\n\nexport default function NewBehaviorDialog({\n  project,\n  open,\n  onClose,\n  onChoose,\n  objectType,\n}: Props) {\n  const [showDeprecated, setShowDeprecated] = React.useState(false);\n  const [searchText, setSearchText] = React.useState('');\n  const [currentTab, setCurrentTab] = React.useState('installed');\n  const searchBar = React.useRef<?SearchBar>(null);\n  const scrollView = React.useRef((null: ?ScrollViewInterface));\n\n  const [isInstalling, setIsInstalling] = React.useState(false);\n  const [extensionInstallTime, setExtensionInstallTime] = React.useState(0);\n  const eventsFunctionsExtensionsState = React.useContext(\n    EventsFunctionsExtensionsContext\n  );\n\n  const platform = project.getCurrentPlatform();\n  const behaviorMetadata: Array<EnumeratedBehaviorMetadata> = React.useMemo(\n    () => {\n      return project && platform\n        ? enumerateBehaviorsMetadata(platform, project)\n        : [];\n    },\n    [project, platform, extensionInstallTime] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  const shouldAutofocusSearchbar = useShouldAutofocusSearchbar();\n  React.useEffect(\n    () => {\n      setTimeout(() => {\n        if (shouldAutofocusSearchbar && searchBar.current)\n          searchBar.current.focus();\n      }, 20 /* Be sure that the search bar is shown */);\n    },\n    [shouldAutofocusSearchbar]\n  );\n\n  if (!open || !project) return null;\n\n  const deprecatedBehaviorsInformation = getDeprecatedBehaviorsInformation();\n\n  const filteredBehaviorMetadata = filterEnumeratedBehaviorMetadata(\n    behaviorMetadata,\n    searchText\n  );\n  const behaviors = filteredBehaviorMetadata.filter(\n    ({ type }) => !deprecatedBehaviorsInformation[type]\n  );\n  const deprecatedBehaviors = filteredBehaviorMetadata.filter(\n    ({ type }) => !!deprecatedBehaviorsInformation[type]\n  );\n\n  const chooseBehavior = (\n    i18n: I18nType,\n    { type, defaultName }: EnumeratedBehaviorMetadata\n  ) => {\n    if (deprecatedBehaviorsInformation[type]) {\n      showMessageBox(i18n._(deprecatedBehaviorsInformation[type].warning));\n    }\n\n    return onChoose(type, defaultName);\n  };\n\n  const canBehaviorBeUsed = (behaviorMetadata: EnumeratedBehaviorMetadata) => {\n    // An empty object type means the base object, i.e: any object.\n    return (\n      behaviorMetadata.objectType === '' ||\n      behaviorMetadata.objectType === objectType\n    );\n  };\n\n  const hasSearchNoResult =\n    !!searchText && !behaviors.length && !deprecatedBehaviors.length;\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Dialog\n          title={<Trans>Add a new behavior to the object</Trans>}\n          actions={[\n            <FlatButton\n              key=\"close\"\n              label={<Trans>Close</Trans>}\n              primary={false}\n              onClick={onClose}\n            />,\n          ]}\n          secondaryActions={<HelpButton helpPagePath=\"/behaviors\" />}\n          open\n          cannotBeDismissed={false}\n          flexBody\n          noMargin\n        >\n          <Column expand noMargin>\n            <Tabs value={currentTab} onChange={setCurrentTab}>\n              <Tab\n                label={<Trans>Installed Behaviors</Trans>}\n                value=\"installed\"\n              />\n              <Tab label={<Trans>Search New Behaviors</Trans>} value=\"search\" />\n            </Tabs>\n            {currentTab === 'installed' && (\n              <React.Fragment>\n                <SearchBar\n                  value={searchText}\n                  onRequestSearch={() => {\n                    if (behaviors.length) {\n                      chooseBehavior(i18n, behaviors[0]);\n                    } else if (showDeprecated && deprecatedBehaviors.length) {\n                      chooseBehavior(i18n, deprecatedBehaviors[0]);\n                    }\n                  }}\n                  onChange={setSearchText}\n                  ref={searchBar}\n                />\n                {hasSearchNoResult && (\n                  <EmptyMessage>\n                    <Trans>\n                      No behavior found for your search. Try another search, or\n                      search for new behaviors to install.\n                    </Trans>\n                  </EmptyMessage>\n                )}\n                <ScrollView ref={scrollView}>\n                  <List>\n                    {behaviors.map((behaviorMetadata, index) => (\n                      <BehaviorListItem\n                        key={index}\n                        behaviorMetadata={behaviorMetadata}\n                        onClick={() => chooseBehavior(i18n, behaviorMetadata)}\n                        disabled={!canBehaviorBeUsed(behaviorMetadata)}\n                      />\n                    ))}\n                    {showDeprecated && !!deprecatedBehaviors.length && (\n                      <Subheader>\n                        Deprecated (old, prefer not to use anymore)\n                      </Subheader>\n                    )}\n                    {showDeprecated &&\n                      deprecatedBehaviors.map((behaviorMetadata, index) => (\n                        <BehaviorListItem\n                          key={index}\n                          behaviorMetadata={behaviorMetadata}\n                          onClick={() => chooseBehavior(i18n, behaviorMetadata)}\n                          disabled={!canBehaviorBeUsed(behaviorMetadata)}\n                        />\n                      ))}\n                  </List>\n                  <Line justifyContent=\"center\" alignItems=\"center\">\n                    {!showDeprecated ? (\n                      <FlatButton\n                        key=\"toggle-experimental\"\n                        icon={<Visibility />}\n                        primary={false}\n                        onClick={() => {\n                          setShowDeprecated(true);\n                        }}\n                        label={<Trans>Show deprecated (old) behaviors</Trans>}\n                      />\n                    ) : (\n                      <FlatButton\n                        key=\"toggle-experimental\"\n                        icon={<VisibilityOff />}\n                        primary={false}\n                        onClick={() => {\n                          setShowDeprecated(false);\n                        }}\n                        label={<Trans>Show deprecated (old) behaviors</Trans>}\n                      />\n                    )}\n                  </Line>\n                  <Line justifyContent=\"center\" alignItems=\"center\">\n                    <FlatButton\n                      icon={<Create />}\n                      primary={false}\n                      onClick={() =>\n                        Window.openExternalURL(\n                          getHelpLink('/behaviors/events-based-behaviors')\n                        )\n                      }\n                      label={<Trans>Create your own behavior</Trans>}\n                    />\n                  </Line>\n                </ScrollView>\n              </React.Fragment>\n            )}\n            {currentTab === 'search' && (\n              <ExtensionStore // TODO\n                project={project}\n                isInstalling={isInstalling}\n                onInstall={async extensionShortHeader => {\n                  setIsInstalling(true);\n                  const wasExtensionInstalled = await installExtension(\n                    i18n,\n                    project,\n                    eventsFunctionsExtensionsState,\n                    extensionShortHeader\n                  );\n\n                  if (wasExtensionInstalled) {\n                    // Setting the extension install time will force a reload of\n                    // the behavior metadata, and so the list of behaviors.\n                    setExtensionInstallTime(Date.now());\n                    setCurrentTab('installed');\n                    if (scrollView.current) scrollView.current.scrollToBottom();\n                  }\n                  setIsInstalling(false);\n                }}\n                showOnlyWithBehaviors\n              />\n            )}\n          </Column>\n          <InfoBar\n            identifier=\"extension-installed-explanation\"\n            message={\n              <Trans>\n                The behavior was added to the project. You can now add it to\n                your object.\n              </Trans>\n            }\n            show={extensionInstallTime !== 0}\n          />\n        </Dialog>\n      )}\n    </I18n>\n  );\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport HelpButton from '../UI/HelpButton';\nimport Text from '../UI/Text';\nimport { EmptyPlaceholder } from '../UI/EmptyPlaceholder';\n\nconst EmptyBehaviorsPlaceholder = () => (\n  <EmptyPlaceholder\n    renderButtons={() => <HelpButton helpPagePath=\"/behaviors\" />}\n  >\n    <Text>\n      <Trans>There are no behaviors here.</Trans>\n    </Text>\n    <Text>\n      <Trans>\n        Behaviors are predefined actions that are assigned to objects. Behaviors\n        can have no or multiple parameters.\n      </Trans>\n    </Text>\n    <Text>\n      <Trans>\n        Add your first behavior using the button \"Add a behavior to the object\".\n      </Trans>\n    </Text>\n  </EmptyPlaceholder>\n);\n\nexport default EmptyBehaviorsPlaceholder;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport TextField from '../UI/TextField';\nimport Checkbox from '../UI/Checkbox';\nimport { ColumnStackLayout, ResponsiveLineStackLayout } from '../UI/Layout';\nimport Dialog from '../UI/Dialog';\nimport ColorField from '../UI/ColorField';\nimport {\n  type InstancesEditorSettings,\n  cloneInstancesEditorSettings,\n} from '../InstancesEditor/InstancesEditorSettings';\nimport {\n  hexNumberToRGBString,\n  rgbStringToHexNumber,\n} from '../Utils/ColorTransformer';\n\ntype Props = {|\n  instancesEditorSettings: InstancesEditorSettings,\n  onChangeInstancesEditorSettings: InstancesEditorSettings => void,\n  onApply: () => void,\n  onCancel: () => void,\n|};\n\n/** Below this value, rendering the grid is too costly (risk of infinite loop/memory saturation). */\nconst GRID_MIN_VALUE = 0.01;\n\nexport default function SetupGridDialog(props: Props) {\n  const [previousOptions] = React.useState(() =>\n    cloneInstancesEditorSettings(props.instancesEditorSettings)\n  );\n\n  const onCancel = () => {\n    props.onChangeInstancesEditorSettings({\n      ...props.instancesEditorSettings,\n      gridWidth: previousOptions.gridWidth,\n      gridHeight: previousOptions.gridHeight,\n      gridOffsetX: previousOptions.gridOffsetX,\n      gridOffsetY: previousOptions.gridOffsetY,\n      gridColor: previousOptions.gridColor,\n      gridType: previousOptions.gridType,\n    });\n    props.onCancel();\n  };\n\n  return (\n    <Dialog\n      onApply={props.onApply}\n      title={<Trans>Edit Grid Options</Trans>}\n      actions={[\n        <FlatButton\n          key=\"cancel\"\n          label={<Trans>Cancel</Trans>}\n          primary={false}\n          onClick={onCancel}\n        />,\n        <FlatButton\n          key=\"apply\"\n          label={<Trans>Apply</Trans>}\n          primary={true}\n          keyboardFocused={true}\n          onClick={props.onApply}\n        />,\n      ]}\n      cannotBeDismissed={true}\n      open\n      onRequestClose={onCancel}\n      maxWidth=\"sm\"\n      noMargin\n    >\n      <ColumnStackLayout>\n        <ResponsiveLineStackLayout noMargin expand>\n          <ColorField\n            floatingLabelText={<Trans>Line color</Trans>}\n            fullWidth\n            color={hexNumberToRGBString(\n              props.instancesEditorSettings.gridColor\n            )}\n            alpha={props.instancesEditorSettings.gridAlpha}\n            onChange={(color, alpha) => {\n              props.onChangeInstancesEditorSettings({\n                ...props.instancesEditorSettings,\n                gridColor: rgbStringToHexNumber(color),\n                // alpha can be 0 and we need to handle this case.\n                gridAlpha: alpha === undefined || alpha === null ? 1 : alpha,\n              });\n            }}\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin expand>\n          <TextField\n            floatingLabelText={<Trans>Cell width (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={props.instancesEditorSettings.gridWidth}\n            onChange={(e, value) =>\n              props.onChangeInstancesEditorSettings({\n                ...props.instancesEditorSettings,\n                gridWidth: Math.max(parseFloat(value), GRID_MIN_VALUE),\n              })\n            }\n          />\n          <TextField\n            floatingLabelText={<Trans>Cell height (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={props.instancesEditorSettings.gridHeight}\n            onChange={(e, value) =>\n              props.onChangeInstancesEditorSettings({\n                ...props.instancesEditorSettings,\n                gridHeight: Math.max(parseFloat(value), GRID_MIN_VALUE),\n              })\n            }\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin expand>\n          <TextField\n            floatingLabelText={<Trans>X offset (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={props.instancesEditorSettings.gridOffsetX}\n            onChange={(e, value) =>\n              props.onChangeInstancesEditorSettings({\n                ...props.instancesEditorSettings,\n                gridOffsetX: parseFloat(value),\n              })\n            }\n          />\n          <TextField\n            floatingLabelText={<Trans>Y offset (in pixels)</Trans>}\n            fullWidth\n            type=\"number\"\n            value={props.instancesEditorSettings.gridOffsetY}\n            onChange={(e, value) =>\n              props.onChangeInstancesEditorSettings({\n                ...props.instancesEditorSettings,\n                gridOffsetY: parseFloat(value),\n              })\n            }\n          />\n        </ResponsiveLineStackLayout>\n        <ResponsiveLineStackLayout noMargin expand>\n          <Checkbox\n            checked={props.instancesEditorSettings.gridType === 'isometric'}\n            label={<Trans>Isometric</Trans>}\n            onCheck={(e, check) =>\n              props.onChangeInstancesEditorSettings({\n                ...props.instancesEditorSettings,\n                gridType: check ? 'isometric' : 'rectangular',\n              })\n            }\n          />\n        </ResponsiveLineStackLayout>\n      </ColumnStackLayout>\n    </Dialog>\n  );\n}\n","// @flow\nimport React, { Component } from 'react';\nimport Slider from '@material-ui/core/Slider';\nimport ViewPosition from './ViewPosition';\nimport throttle from 'lodash/throttle';\nimport InstancesEditor, {\n  type InstancesEditorPropsWithoutSizeAndScroll,\n} from './index';\nimport { ScreenTypeMeasurer } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport { FullSizeMeasurer } from '../UI/FullSizeMeasurer';\n\nconst styles = {\n  container: {\n    overflow: 'hidden',\n  },\n  xScrollbar: {\n    position: 'absolute',\n    top: -13,\n    left: 0,\n    right: 0,\n  },\n  yScrollbar: {\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    left: -13,\n    transform: 'rotate(180deg)',\n  },\n};\n\ntype Props = {|\n  ...InstancesEditorPropsWithoutSizeAndScroll,\n  wrappedEditorRef: ?(?InstancesEditor) => void,\n|};\n\ntype State = {|\n  xValue: number,\n  yValue: number,\n  xMin: number,\n  xMax: number,\n  yMin: number,\n  yMax: number,\n|};\n\nconst noop = () => {};\n\nexport default class FullSizeInstancesEditorWithScrollbars extends Component<\n  Props,\n  State\n> {\n  _editor: ?InstancesEditor = null;\n\n  state: State = {\n    xValue: 0,\n    yValue: 0,\n    xMin: -5000,\n    xMax: +5000,\n    yMin: -5000,\n    yMax: +5000,\n  };\n\n  componentDidMount() {\n    if (this._editor) {\n      this._handleViewPositionChange(this._editor.getViewPosition());\n    }\n  }\n\n  _handleXChange = (e: any, value: number) => {\n    const { xMin, xMax } = this.state;\n    const xValue = xMin + ((xMax - xMin) * value) / 100;\n    this.setState(\n      {\n        xValue,\n      },\n      () => {\n        if (this._editor) {\n          this._editor.scrollTo(this.state.xValue, this.state.yValue);\n        }\n      }\n    );\n  };\n\n  _handleYChange = (e: any, value: number) => {\n    const { yMin, yMax } = this.state;\n    // Substract the value from 100 as the slider is 180deg rotated. Not perfect though\n    // as it breaks when using the keyboard arrow keys (when focusing the slider).\n    const yValue = yMin + ((yMax - yMin) * (100 - value)) / 100;\n    this.setState(\n      {\n        yValue,\n      },\n      () => {\n        if (this._editor) {\n          this._editor.scrollTo(this.state.xValue, this.state.yValue);\n        }\n      }\n    );\n  };\n\n  _setAndAdjust = ({ xValue, yValue }: { xValue: number, yValue: number }) => {\n    const xMax = Math.max(Math.abs(xValue) + 100, this.state.xMax);\n    const yMax = Math.max(Math.abs(yValue) + 100, this.state.yMax);\n\n    this.setState({\n      xMax,\n      yMax,\n      xMin: -xMax,\n      yMin: -yMax,\n      xValue,\n      yValue,\n    });\n  };\n\n  _handleViewPositionChange = throttle(\n    (viewPosition: ?ViewPosition) => {\n      if (!viewPosition) return;\n\n      this._setAndAdjust({\n        xValue: viewPosition.getViewX(),\n        yValue: viewPosition.getViewY(),\n      });\n    },\n    500, // Throttle the updates after a scroll to avoid make lots of updates in a row that would kill CPU\n    { leading: false, trailing: true }\n  );\n\n  render() {\n    const { wrappedEditorRef, ...otherProps } = this.props;\n\n    return (\n      <ScreenTypeMeasurer>\n        {screenType => (\n          <FullSizeMeasurer>\n            {({ width, height }) => (\n              <div style={styles.container}>\n                <InstancesEditor\n                  onViewPositionChanged={\n                    screenType !== 'touch'\n                      ? this._handleViewPositionChange\n                      : noop\n                  }\n                  ref={(editorRef: ?InstancesEditor) => {\n                    wrappedEditorRef && wrappedEditorRef(editorRef);\n                    this._editor = editorRef;\n                  }}\n                  width={width}\n                  height={height}\n                  screenType={screenType}\n                  {...otherProps}\n                />\n                {screenType !== 'touch' && (\n                  <Slider\n                    value={\n                      ((this.state.xValue - this.state.xMin) /\n                        (this.state.xMax - this.state.xMin)) *\n                      100\n                    }\n                    onChange={this._handleXChange}\n                    style={styles.xScrollbar}\n                    orientation=\"horizontal\"\n                  />\n                )}\n                {screenType !== 'touch' && (\n                  <Slider\n                    value={\n                      ((this.state.yValue - this.state.yMin) /\n                        (this.state.yMax - this.state.yMin)) *\n                      100\n                    }\n                    onChange={this._handleYChange}\n                    style={styles.yScrollbar}\n                    orientation=\"vertical\"\n                  />\n                )}\n              </div>\n            )}\n          </FullSizeMeasurer>\n        )}\n      </ScreenTypeMeasurer>\n    );\n  }\n}\n","// @flow\n\nexport const shortenString = (str: string, maxLength: number) => {\n  return str.length > maxLength ? str.substring(0, maxLength) + '...' : str;\n};\n","// @flow\nimport React, { Component } from 'react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport IconButton from '../IconButton';\nimport FilterList from '@material-ui/icons/FilterList';\nimport ElementWithMenu from '../Menu/ElementWithMenu';\nimport { type MenuItemTemplate } from '../Menu/Menu.flow';\n\nconst styles = {\n  container: {\n    padding: 0,\n    width: 32,\n    height: 32,\n  },\n  icon: {\n    width: 16,\n    height: 16,\n  },\n};\n\ntype Props = {|\n  buildMenuTemplate: (i18n: I18nType) => Array<MenuItemTemplate>,\n|};\n\nexport default class TagsButton extends Component<Props, {||}> {\n  render() {\n    return (\n      <ElementWithMenu\n        element={\n          <IconButton style={styles.container}>\n            <FilterList htmlColor=\"white\" style={styles.icon} />\n          </IconButton>\n        }\n        buildMenuTemplate={this.props.buildMenuTemplate}\n      />\n    );\n  }\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type AlertMessageIdentifier } from '../MainFrame/Preferences/PreferencesContext';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { type MessageDescriptor } from '../Utils/i18n/MessageDescriptor.flow';\n\n/*\n * Define additional logic which executes after an object/instance has been created.\n * Also, InfoBar can be used which could notify users of the additional changes.\n * Declare new identifier for infoBar in Mainframe/Preferences/PreferenceContext\n * and add it in hints/explanation list.\n */\n\nexport type InfoBarDetails = {|\n  identifier: AlertMessageIdentifier,\n  message: MessageDescriptor,\n  touchScreenMessage: MessageDescriptor,\n|};\n\ntype InfoBarEvent = 'onObjectAdded' | 'onInstanceAdded';\n\nexport const onObjectAdded = (\n  object: gdObject,\n  layout: gdLayout,\n  project: gdProject\n): ?InfoBarDetails => {\n  const additionalWork = objectType[object.getType()];\n  if (additionalWork) {\n    additionalWork.onObjectAdded(object, layout, project);\n    return additionalWork.getInfoBarDetails('onObjectAdded');\n  }\n\n  return null;\n};\n\nexport const onInstanceAdded = (\n  instance: gdInitialInstance,\n  layout: gdLayout,\n  project: gdProject\n): ?InfoBarDetails => {\n  const objectName = instance.getObjectName();\n  let object: ?gdObject = null;\n  if (layout.hasObjectNamed(objectName)) object = layout.getObject(objectName);\n  else if (project.hasObjectNamed(objectName))\n    object = project.getObject(objectName);\n\n  const additionalWork = object ? objectType[object.getType()] : null;\n  if (additionalWork) {\n    additionalWork.onInstanceAdded(instance, layout, project);\n    return additionalWork.getInfoBarDetails('onInstanceAdded');\n  }\n\n  return null;\n};\n\nconst getLightingLayer = (layout: gdLayout): ?gdLayer => {\n  for (let i = 0; i < layout.getLayersCount(); i++) {\n    const layer = layout.getLayerAt(i);\n    if (layer.isLightingLayer()) return layer;\n  }\n\n  return null;\n};\n\nconst objectType = {\n  'Lighting::LightObject': {\n    onObjectAdded: (object: gdObject, layout: gdLayout, project: gdProject) => {\n      const lightingLayer = getLightingLayer(layout);\n      if (lightingLayer === null) {\n        const name = newNameGenerator('Lighting', name =>\n          layout.hasLayerNamed(name)\n        );\n        layout.insertNewLayer(name, layout.getLayersCount());\n        const layer: gdLayer = layout.getLayer('Lighting');\n        layer.setLightingLayer(true);\n        layer.setFollowBaseLayerCamera(true);\n        layer.setAmbientLightColor(128, 128, 128);\n      }\n    },\n\n    onInstanceAdded: (\n      instance: gdInitialInstance,\n      layout: gdLayout,\n      project: gdProject\n    ) => {\n      const lightingLayer = getLightingLayer(layout);\n      if (lightingLayer) {\n        instance.setLayer(lightingLayer.getName());\n      }\n    },\n\n    getInfoBarDetails: (infoBarEvent: InfoBarEvent): ?InfoBarDetails => {\n      if (infoBarEvent === 'onObjectAdded') {\n        return {\n          identifier: 'automatic-lighting-layer',\n          message: t`A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer`,\n          touchScreenMessage: t`A lighting layer was created. Lights will be placed on it automatically. You can change the ambient light color in the properties of this layer`,\n        };\n      }\n\n      if (infoBarEvent === 'onInstanceAdded') {\n        return {\n          identifier: 'object-moved-in-lighting-layer',\n          message: t`The light object was automatically placed on the Lighting layer.`,\n          touchScreenMessage: t`The light object was automatically placed on the Lighting layer.`,\n        };\n      }\n\n      return null;\n    },\n  },\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport ResourcesList from '../ResourcesList';\nimport ResourcePropertiesEditor from './ResourcePropertiesEditor';\nimport Toolbar from './Toolbar';\nimport EditorMosaic from '../UI/EditorMosaic';\nimport InfoBar from '../UI/Messages/InfoBar';\nimport ResourcesLoader from '../ResourcesLoader';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport Window from '../Utils/Window';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n  type ResourceKind,\n} from '../ResourcesList/ResourceSource';\nimport { getResourceFilePathStatus } from '../ResourcesList/ResourceUtils.js';\n\nconst gd: libGDevelop = global.gd;\n\nconst electron = optionalRequire('electron');\nconst shell = electron ? electron.shell : null;\nconst path = optionalRequire('path');\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n};\n\ntype State = {|\n  showPropertiesInfoBar: boolean,\n  selectedResource: ?gdResource,\n|};\n\ntype Props = {|\n  setToolbar: React.Node => void,\n  project: gdProject,\n  onDeleteResource: (resource: gdResource, cb: (boolean) => void) => void,\n  onRenameResource: (\n    resource: gdResource,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n|};\n\nconst initialMosaicEditorNodes = {\n  direction: 'row',\n  first: 'properties',\n  second: 'resources-list',\n  splitPercentage: 66,\n};\n\nexport default class ResourcesEditor extends React.Component<Props, State> {\n  static defaultProps = {\n    setToolbar: () => {},\n  };\n\n  editorMosaic: ?EditorMosaic = null;\n  _propertiesEditor: ?ResourcePropertiesEditor = null;\n  _resourcesList: ?ResourcesList = null;\n  resourcesLoader = ResourcesLoader;\n  state = {\n    showPropertiesInfoBar: false,\n    selectedResource: null,\n  };\n\n  updateToolbar() {\n    this.props.setToolbar(\n      <Toolbar\n        onOpenProjectFolder={this.openProjectFolder}\n        onOpenProperties={this.openProperties}\n        canDelete={!!this.state.selectedResource}\n        onDeleteSelection={() =>\n          this.deleteResource(this.state.selectedResource)\n        }\n      />\n    );\n  }\n\n  deleteResource = (resource: ?gdResource) => {\n    const { project, onDeleteResource } = this.props;\n    if (!resource) return;\n\n    const answer = Window.showConfirmDialog(\n      \"Are you sure you want to remove this resource? This can't be undone.\"\n    );\n    if (!answer) return;\n\n    onDeleteResource(resource, doRemove => {\n      if (!doRemove || !resource) return;\n\n      project.getResourcesManager().removeResource(resource.getName());\n      this.setState(\n        {\n          selectedResource: null,\n        },\n        () => {\n          // Force update of the resources list as otherwise it could render\n          // resource that was just deleted.\n          if (this._resourcesList) this._resourcesList.forceUpdateList();\n          this.updateToolbar();\n        }\n      );\n    });\n  };\n\n  _removeUnusedResources = (resourceKind: ResourceKind) => {\n    const { project } = this.props;\n    const selectedResourceName = this.state.selectedResource\n      ? this.state.selectedResource.getName()\n      : null;\n\n    const removedResourceNames = gd.ProjectResourcesAdder.getAllUseless(\n      project,\n      resourceKind\n    ).toJSArray();\n    console.info(\n      `Removing ${\n        removedResourceNames.length\n      } unused ${resourceKind} resource(s):`,\n      removedResourceNames\n    );\n\n    gd.ProjectResourcesAdder.removeAllUseless(project, resourceKind);\n\n    // The selectedResource might be *invalid* now if it was removed.\n    // Be sure to drop the reference to it if that's the case.\n    if (removedResourceNames.includes(selectedResourceName)) {\n      this._onResourceSelected(null);\n    }\n\n    // Force update of the resources list as otherwise it could render\n    // resources that were just deleted.\n    if (this._resourcesList) {\n      this._resourcesList.forceUpdateList();\n    }\n  };\n\n  _removeAllResourcesWithInvalidPath = () => {\n    const { project } = this.props;\n    const selectedResourceName = this.state.selectedResource\n      ? this.state.selectedResource.getName()\n      : null;\n\n    const resourcesManager = project.getResourcesManager();\n    const removedResourceNames = resourcesManager\n      .getAllResourceNames()\n      .toJSArray()\n      .filter(resourceName => {\n        return getResourceFilePathStatus(project, resourceName) === 'error';\n      });\n\n    removedResourceNames.forEach(resourceName => {\n      resourcesManager.removeResource(resourceName);\n      console.info('Removed due to invalid path: ' + resourceName);\n    });\n\n    // The selectedResource might be *invalid* now if it was removed.\n    // Be sure to drop the reference to it if that's the case.\n    if (removedResourceNames.includes(selectedResourceName)) {\n      this._onResourceSelected(null);\n    }\n\n    // Force update of the resources list as otherwise it could render\n    // resources that were just deleted.\n    if (this._resourcesList) {\n      this._resourcesList.forceUpdateList();\n    }\n  };\n\n  openProjectFolder = () => {\n    const project = this.props.project;\n    if (shell) shell.openItem(path.dirname(project.getProjectFile()));\n  };\n\n  openProperties = () => {\n    if (!this.editorMosaic) return;\n    if (!this.editorMosaic.openEditor('properties', 'start', 66, 'column')) {\n      this.setState({\n        showPropertiesInfoBar: true,\n      });\n    }\n  };\n\n  _onResourceSelected = (selectedResource: ?gdResource) => {\n    this.setState(\n      {\n        selectedResource,\n      },\n      () => {\n        if (this._propertiesEditor) this._propertiesEditor.forceUpdate();\n        this.updateToolbar();\n      }\n    );\n  };\n\n  render() {\n    const {\n      project,\n      onRenameResource,\n      onChooseResource,\n      resourceSources,\n    } = this.props;\n    const { selectedResource } = this.state;\n\n    const editors = {\n      properties: {\n        type: 'secondary',\n        title: t`Properties`,\n        renderEditor: () => (\n          <ResourcePropertiesEditor\n            key={selectedResource ? selectedResource.ptr : undefined}\n            resources={selectedResource ? [selectedResource] : []}\n            project={project}\n            resourcesLoader={this.resourcesLoader}\n            ref={propertiesEditor =>\n              (this._propertiesEditor = propertiesEditor)\n            }\n            onResourcePathUpdated={() => {\n              if (this._resourcesList) {\n                this._resourcesList.checkMissingPaths();\n              }\n            }}\n            onChooseResource={onChooseResource}\n            resourceSources={resourceSources}\n          />\n        ),\n      },\n      'resources-list': {\n        type: 'primary',\n        noTitleBar: true,\n        renderEditor: () => (\n          <ResourcesList\n            project={project}\n            onDeleteResource={this.deleteResource}\n            onRenameResource={onRenameResource}\n            onSelectResource={this._onResourceSelected}\n            selectedResource={selectedResource}\n            ref={resourcesList => (this._resourcesList = resourcesList)}\n            onRemoveUnusedResources={this._removeUnusedResources}\n            onRemoveAllResourcesWithInvalidPath={\n              this._removeAllResourcesWithInvalidPath\n            }\n          />\n        ),\n      },\n    };\n\n    return (\n      <div style={styles.container}>\n        <PreferencesContext.Consumer>\n          {({ getDefaultEditorMosaicNode, setDefaultEditorMosaicNode }) => (\n            <EditorMosaic\n              editors={editors}\n              ref={editorMosaic => (this.editorMosaic = editorMosaic)}\n              initialNodes={\n                getDefaultEditorMosaicNode('resources-editor') ||\n                initialMosaicEditorNodes\n              }\n              onPersistNodes={node =>\n                setDefaultEditorMosaicNode('resources-editor', node)\n              }\n            />\n          )}\n        </PreferencesContext.Consumer>\n        <InfoBar\n          message={\n            <Trans>\n              Properties panel is already opened. After selecting a resource,\n              inspect and change its properties from this panel.\n            </Trans>\n          }\n          show={!!this.state.showPropertiesInfoBar}\n          identifier=\"resource-properties-panel-explanation\"\n        />\n      </div>\n    );\n  }\n}\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport Background from '../UI/Background';\nimport SearchBar from '../UI/SearchBar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { filterResourcesList } from './EnumerateResources';\nimport { mapVector } from '../Utils/MapFor';\nimport optionalRequire from '../Utils/OptionalRequire.js';\nimport {\n  applyResourceDefaults,\n  getLocalResourceFullPath,\n  getResourceFilePathStatus,\n} from './ResourceUtils.js';\nimport { type MenuItemTemplate } from '../UI/Menu/Menu.flow';\nimport {\n  type ResourceKind,\n  allResourceKindsAndMetadata,\n} from './ResourceSource';\nimport optionalLazyRequire from '../Utils/OptionalLazyRequire';\nimport ResourcesLoader from '../ResourcesLoader';\nimport newNameGenerator from '../Utils/NewNameGenerator';\n\nconst lazyRequireGlob = optionalLazyRequire('glob');\nconst path = optionalRequire('path');\nconst electron = optionalRequire('electron');\nconst hasElectron = electron ? true : false;\n\nconst gd: libGDevelop = global.gd;\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nconst getResourceName = (resource: gdResource) => resource.getName();\n\ntype State = {|\n  renamedResource: ?gdResource,\n  searchText: string,\n  resourcesWithErrors: { [string]: '' | 'error' | 'warning' },\n|};\n\ntype Props = {|\n  project: gdProject,\n  selectedResource: ?gdResource,\n  onSelectResource: (resource: ?gdResource) => void,\n  onDeleteResource: (resource: gdResource) => void,\n  onRenameResource: (\n    resource: gdResource,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  onRemoveUnusedResources: ResourceKind => void,\n  onRemoveAllResourcesWithInvalidPath: () => void,\n|};\n\nexport default class ResourcesList extends React.Component<Props, State> {\n  sortableList: any;\n  state: State = {\n    renamedResource: null,\n    searchText: '',\n    resourcesWithErrors: {},\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // The component is costly to render, so avoid any re-rendering as much\n    // as possible.\n    // We make the assumption that no changes to resources list is made outside\n    // from the component.\n    // If a change is made, the component won't notice it: you have to manually\n    // call forceUpdate.\n\n    if (\n      this.state.renamedResource !== nextState.renamedResource ||\n      this.state.searchText !== nextState.searchText\n    )\n      return true;\n\n    if (\n      this.props.project !== nextProps.project ||\n      this.props.selectedResource !== nextProps.selectedResource\n    )\n      return true;\n\n    return false;\n  }\n\n  _deleteResource = (resource: gdResource) => {\n    this.props.onDeleteResource(resource);\n  };\n\n  _locateResourceFile = (resource: gdResource) => {\n    const resourceFolderPath = path.dirname(\n      getLocalResourceFullPath(this.props.project, resource.getName())\n    );\n    electron.shell.openItem(resourceFolderPath);\n  };\n\n  _openResourceFile = (resource: gdResource) => {\n    const resourceFilePath = getLocalResourceFullPath(\n      this.props.project,\n      resource.getName()\n    );\n    electron.shell.openItem(resourceFilePath);\n  };\n\n  _copyResourceFilePath = (resource: gdResource) => {\n    const resourceFilePath = getLocalResourceFullPath(\n      this.props.project,\n      resource.getName()\n    );\n    electron.clipboard.writeText(resourceFilePath);\n  };\n\n  _scanForNewResources = (\n    extensions: Array<string>,\n    createResource: () => gdResource\n  ) => {\n    const glob = lazyRequireGlob();\n    if (!glob) return;\n\n    const project = this.props.project;\n    const resourcesManager = project.getResourcesManager();\n    const projectPath = path.dirname(project.getProjectFile());\n\n    const allExtensions = [\n      ...extensions,\n      ...extensions.map(extension => extension.toUpperCase()),\n    ];\n    const getAllFiles = (src, callback) => {\n      glob(src + '/**/*.{' + allExtensions.join(',') + '}', callback);\n    };\n    getAllFiles(projectPath, (error, allFiles) => {\n      if (error) {\n        console.error(`Error finding files inside ${projectPath}:`, error);\n        return;\n      }\n\n      const filesToCheck = new gd.VectorString();\n      allFiles.forEach(filePath =>\n        filesToCheck.push_back(path.relative(projectPath, filePath))\n      );\n      const filePathsNotInResources = project\n        .getResourcesManager()\n        .findFilesNotInResources(filesToCheck);\n      filesToCheck.delete();\n\n      mapVector(filePathsNotInResources, (relativeFilePath: string) => {\n        const resourceName = newNameGenerator(relativeFilePath, name =>\n          resourcesManager.hasResource(name)\n        );\n\n        const resource = createResource();\n        resource.setFile(relativeFilePath);\n        resource.setName(resourceName);\n        applyResourceDefaults(project, resource);\n        resourcesManager.addResource(resource);\n        resource.delete();\n\n        console.info(\n          `\"${relativeFilePath}\" added to project as resource named \"${resourceName}\".`\n        );\n      });\n\n      this.forceUpdate();\n    });\n  };\n\n  _editName = (resource: ?gdResource) => {\n    this.setState(\n      {\n        renamedResource: resource,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _getResourceThumbnail = (resource: gdResource) => {\n    switch (resource.getKind()) {\n      case 'image':\n        return ResourcesLoader.getResourceFullUrl(\n          this.props.project,\n          resource.getName(),\n          {}\n        );\n      case 'audio':\n        return 'res/actions/music24.png';\n      case 'json':\n        return 'res/actions/fichier24.png';\n      case 'video':\n        return 'JsPlatform/Extensions/videoicon24.png';\n      case 'font':\n        return 'res/actions/font24.png';\n      case 'bitmapFont':\n        return 'JsPlatform/Extensions/bitmapfont32.png';\n      default:\n        return 'res/unknown32.png';\n    }\n  };\n\n  _rename = (resource: gdResource, newName: string) => {\n    const { project } = this.props;\n    this.setState({\n      renamedResource: null,\n    });\n\n    if (resource.getName() === newName) return;\n\n    if (project.getResourcesManager().hasResource(newName)) {\n      showWarningBox('Another resource with this name already exists', {\n        delayToNextTick: true,\n      });\n      return;\n    }\n\n    this.props.onRenameResource(resource, newName, doRename => {\n      if (!doRename) return;\n      resource.setName(newName);\n      this.forceUpdate();\n    });\n  };\n\n  _moveSelectionTo = (destinationResource: gdResource) => {\n    const { project, selectedResource } = this.props;\n    if (!selectedResource) return;\n\n    const resourcesManager = project.getResourcesManager();\n    resourcesManager.moveResource(\n      resourcesManager.getResourcePosition(selectedResource.getName()),\n      resourcesManager.getResourcePosition(destinationResource.getName())\n    );\n    this.forceUpdateList();\n  };\n\n  forceUpdateList = () => {\n    this.forceUpdate();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _renderResourceMenuTemplate = (i18n: I18nType) => (\n    resource: gdResource,\n    _index: number\n  ): Array<MenuItemTemplate> => {\n    return [\n      {\n        label: i18n._(t`Rename`),\n        click: () => this._editName(resource),\n      },\n      {\n        label: i18n._(t`Remove`),\n        click: () => this._deleteResource(resource),\n      },\n      { type: 'separator' },\n      {\n        label: i18n._(t`Open File`),\n        click: () => this._openResourceFile(resource),\n        enabled: hasElectron,\n      },\n      {\n        label: i18n._(t`Locate File`),\n        click: () => this._locateResourceFile(resource),\n        enabled: hasElectron,\n      },\n      {\n        label: i18n._(t`Copy File Path`),\n        click: () => this._copyResourceFilePath(resource),\n        enabled: hasElectron,\n      },\n      { type: 'separator' },\n      {\n        label: i18n._(t`Scan in the project folder for...`),\n        submenu: allResourceKindsAndMetadata.map(\n          ({ displayName, fileExtensions, createNewResource }) => ({\n            label: i18n._(displayName),\n            click: () => {\n              this._scanForNewResources(fileExtensions, createNewResource);\n            },\n            enabled: hasElectron,\n          })\n        ),\n      },\n      { type: 'separator' },\n      {\n        label: i18n._(t`Remove unused...`),\n        submenu: allResourceKindsAndMetadata.map(({ displayName, kind }) => ({\n          label: i18n._(displayName),\n          click: () => {\n            this.props.onRemoveUnusedResources(kind);\n          },\n        })),\n      },\n      {\n        label: i18n._(t`Remove Resources with Invalid Path`),\n        click: () => {\n          this.props.onRemoveAllResourcesWithInvalidPath();\n        },\n        enabled: hasElectron,\n      },\n    ];\n  };\n\n  checkMissingPaths = () => {\n    const { project } = this.props;\n    const resourcesManager = project.getResourcesManager();\n    const resourceNames = resourcesManager.getAllResourceNames().toJSArray();\n    const resourcesWithErrors = {};\n    resourceNames.forEach(resourceName => {\n      resourcesWithErrors[resourceName] = getResourceFilePathStatus(\n        project,\n        resourceName\n      );\n    });\n    this.setState({ resourcesWithErrors });\n    this.forceUpdateList();\n  };\n\n  componentDidMount() {\n    this.checkMissingPaths();\n  }\n\n  render() {\n    const { project, selectedResource, onSelectResource } = this.props;\n    const { searchText } = this.state;\n\n    const resourcesManager = project.getResourcesManager();\n    const allResourcesList = resourcesManager\n      .getAllResourceNames()\n      .toJSArray()\n      .map(resourceName => resourcesManager.getResource(resourceName));\n    const filteredList = filterResourcesList(allResourcesList, searchText);\n\n    // Force List component to be mounted again if project\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr;\n\n    return (\n      <Background>\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <I18n>\n                {({ i18n }) => (\n                  <SortableVirtualizedItemList\n                    key={listKey}\n                    ref={sortableList => (this.sortableList = sortableList)}\n                    fullList={filteredList}\n                    width={width}\n                    height={height}\n                    getItemName={getResourceName}\n                    getItemThumbnail={this._getResourceThumbnail}\n                    selectedItems={selectedResource ? [selectedResource] : []}\n                    onItemSelected={onSelectResource}\n                    renamedItem={this.state.renamedResource}\n                    onRename={this._rename}\n                    onMoveSelectionToItem={this._moveSelectionTo}\n                    buildMenuTemplate={this._renderResourceMenuTemplate(i18n)}\n                    erroredItems={this.state.resourcesWithErrors}\n                    reactDndType=\"GD_RESOURCE\"\n                  />\n                )}\n              </I18n>\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","// @flow\n\nexport const filterResourcesList = (\n  list: Array<gdResource>,\n  searchText: string\n): Array<gdResource> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter((resource: gdResource) => {\n    return (\n      resource\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n    );\n  });\n};\n","// @flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\n\ntype Props = {|\n  onOpenProjectFolder: () => void,\n  onDeleteSelection: () => void,\n  canDelete: boolean,\n  onOpenProperties: () => void,\n|};\n\ntype State = {||};\n\nexport class Toolbar extends PureComponent<Props, State> {\n  render() {\n    const { canDelete } = this.props;\n\n    return (\n      <ToolbarGroup lastChild>\n        <ToolbarIcon\n          onClick={this.props.onOpenProjectFolder}\n          src=\"res/ribbon_default/open32.png\"\n          tooltip={t`Open the project folder`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.onOpenProperties}\n          src=\"res/ribbon_default/editprop32.png\"\n          tooltip={t`Open the properties panel`}\n        />\n        <ToolbarSeparator />\n        <ToolbarIcon\n          onClick={this.props.onDeleteSelection}\n          src=\"res/ribbon_default/deleteselected32.png\"\n          disabled={!canDelete}\n          tooltip={t`Delete the selected resource`}\n        />\n      </ToolbarGroup>\n    );\n  }\n}\n\nexport default Toolbar;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport SelectField from '../../UI/SelectField';\nimport FlatButton from '../../UI/FlatButton';\nimport SelectOption from '../../UI/SelectOption';\nimport Dialog from '../../UI/Dialog';\nimport { Column, Line } from '../../UI/Grid';\nimport Window from '../../Utils/Window';\nimport PreferencesContext from './PreferencesContext';\nimport AlertMessage from '../../UI/AlertMessage';\nimport LocalesMetadata from '../../locales/LocalesMetadata';\nimport { I18n } from '@lingui/react';\n\ntype Props = {|\n  open: boolean,\n  onClose: (languageDidChange: boolean) => void,\n|};\n\ntype State = {|\n  languageDidChange: boolean,\n|};\n\nconst displayLocaleMetadata = localeMetadata => {\n  if (localeMetadata.languageCode === 'en') return false;\n  if (localeMetadata.languageCode === 'pseudo_LOCALE') return Window.isDev();\n\n  return true;\n};\n\nconst renderLanguageSelectOption = localeMetadata => {\n  const translationRatio = localeMetadata.translationRatio || 0;\n  const percent = (100 * localeMetadata.translationRatio).toFixed(0);\n  const isStarted = translationRatio > 0;\n\n  return (\n    <SelectOption\n      value={localeMetadata.languageCode}\n      primaryText={\n        localeMetadata.languageNativeName +\n        ' (' +\n        localeMetadata.languageName +\n        ')' +\n        (isStarted ? ` - ~${percent}%` : '')\n      }\n      disabled={!isStarted}\n      key={localeMetadata.languageCode}\n    />\n  );\n};\n\nexport default class LanguageDialog extends Component<Props, State> {\n  state = {\n    languageDidChange: false,\n  };\n\n  render() {\n    const { open, onClose } = this.props;\n    if (!open) return null;\n\n    const localesToDisplay = LocalesMetadata.filter(displayLocaleMetadata);\n    const goodProgressLocales = localesToDisplay.filter(\n      localeMetadata => localeMetadata.translationRatio > 0.5\n    );\n    const startedLocales = localesToDisplay.filter(\n      localeMetadata => localeMetadata.translationRatio < 0.5\n    );\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <PreferencesContext.Consumer>\n            {({ values, setLanguage }) => {\n              const isLoadingLanguage =\n                i18n.language !== values.language.replace('_', '-');\n\n              return (\n                <Dialog\n                  actions={[\n                    <FlatButton\n                      label={\n                        isLoadingLanguage ? (\n                          <Trans>Loading...</Trans>\n                        ) : (\n                          <Trans>Close</Trans>\n                        )\n                      }\n                      primary={false}\n                      onClick={() => {\n                        onClose(this.state.languageDidChange);\n                      }}\n                      disabled={isLoadingLanguage}\n                      key=\"close\"\n                    />,\n                  ]}\n                  secondaryActions={[\n                    <FlatButton\n                      label={<Trans>Report a wrong translation</Trans>}\n                      key=\"report-wrong-translation\"\n                      primary={false}\n                      onClick={() =>\n                        Window.openExternalURL(\n                          'https://github.com/4ian/GDevelop/issues/969'\n                        )\n                      }\n                    />,\n                  ]}\n                  onRequestClose={() => onClose(this.state.languageDidChange)}\n                  cannotBeDismissed={false}\n                  open={open}\n                  title={<Trans>Language</Trans>}\n                >\n                  <Column noMargin>\n                    <Line>\n                      <AlertMessage kind=\"info\">\n                        <Trans>\n                          Support for translations is still new and in beta.\n                          GDevelop needs your help to be translated in your\n                          language!\n                        </Trans>\n                      </AlertMessage>\n                    </Line>\n                    <Line expand>\n                      <SelectField\n                        floatingLabelText={\n                          <Trans>Choose GDevelop language</Trans>\n                        }\n                        value={values.language}\n                        onChange={(e, i, value: string) => {\n                          setLanguage(value);\n                          this.setState({\n                            languageDidChange: true,\n                          });\n                        }}\n                        fullWidth\n                      >\n                        <SelectOption\n                          value=\"en\"\n                          primaryText=\"English (default)\"\n                        />\n                        {goodProgressLocales.map(localeMetadata =>\n                          renderLanguageSelectOption(localeMetadata)\n                        )}\n                        {startedLocales.map(localeMetadata =>\n                          renderLanguageSelectOption(localeMetadata)\n                        )}\n                      </SelectField>\n                    </Line>\n                    <Line expand>\n                      <FlatButton\n                        primary\n                        label={\n                          <Trans>Help to translate GD in your language</Trans>\n                        }\n                        onClick={() =>\n                          Window.openExternalURL(\n                            'https://crowdin.com/project/gdevelop'\n                          )\n                        }\n                        fullWidth\n                      />\n                    </Line>\n                  </Column>\n                </Dialog>\n              );\n            }}\n          </PreferencesContext.Consumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// This file is generated by compile-translations.js script\n// prettier-ignore\nmodule.exports = [\n  {\n    \"languageCode\": \"af_ZA\",\n    \"languageName\": \"Afrikaans\",\n    \"languageNativeName\": \"Afrikaans\",\n    \"translationRatio\": 0.05422876638534746\n  },\n  {\n    \"languageCode\": \"ar_SA\",\n    \"languageName\": \"Arabic\",\n    \"languageNativeName\": \"اللغة العربية\",\n    \"translationRatio\": 0.3244747710540492\n  },\n  {\n    \"languageCode\": \"az_AZ\",\n    \"languageName\": \"Azerbaijani\",\n    \"languageNativeName\": \"azərbaycan dili\",\n    \"translationRatio\": 0.0359130903214222\n  },\n  {\n    \"languageCode\": \"bg_BG\",\n    \"languageName\": \"Bulgarian\",\n    \"languageNativeName\": \"български език\",\n    \"translationRatio\": 0.05440833183695459\n  },\n  {\n    \"languageCode\": \"bn_BD\",\n    \"languageName\": \"Bengali\",\n    \"languageNativeName\": \"বাংলা\",\n    \"translationRatio\": 0.06536182438498828\n  },\n  {\n    \"languageCode\": \"ca_ES\",\n    \"languageName\": \"Catalan\",\n    \"languageNativeName\": \"Català\",\n    \"translationRatio\": 0.34368827437601\n  },\n  {\n    \"languageCode\": \"cs_CZ\",\n    \"languageName\": \"Czech\",\n    \"languageNativeName\": \"čeština\",\n    \"translationRatio\": 0.15981325193032858\n  },\n  {\n    \"languageCode\": \"da_DK\",\n    \"languageName\": \"Danish\",\n    \"languageNativeName\": \"dansk\",\n    \"translationRatio\": 0.031244388579637294\n  },\n  {\n    \"languageCode\": \"de_DE\",\n    \"languageName\": \"German\",\n    \"languageNativeName\": \"Deutsch\",\n    \"translationRatio\": 0.7091039683964806\n  },\n  {\n    \"languageCode\": \"el_GR\",\n    \"languageName\": \"Greek\",\n    \"languageNativeName\": \"Ελληνικά\",\n    \"translationRatio\": 0.27617166457173636\n  },\n  {\n    \"languageCode\": \"en\",\n    \"languageName\": \"English\",\n    \"languageNativeName\": \"English\",\n    \"translationRatio\": 0.04704205274411977\n  },\n  {\n    \"languageCode\": \"eo_UY\",\n    \"languageName\": \"Esperanto\",\n    \"languageNativeName\": \"Esperanto\",\n    \"translationRatio\": 0.020111330579996367\n  },\n  {\n    \"languageCode\": \"es_ES\",\n    \"languageName\": \"Spanish\",\n    \"languageNativeName\": \"Español\",\n    \"translationRatio\": 0.9861734602262525\n  },\n  {\n    \"languageCode\": \"fa_IR\",\n    \"languageName\": \"Persian\",\n    \"languageNativeName\": \"فارسی\",\n    \"translationRatio\": 0.23684683066977918\n  },\n  {\n    \"languageCode\": \"fi_FI\",\n    \"languageName\": \"Finnish\",\n    \"languageNativeName\": \"suomi\",\n    \"translationRatio\": 0.26611599928173824\n  },\n  {\n    \"languageCode\": \"fil_PH\",\n    \"languageName\": \"Filipino\",\n    \"languageNativeName\": \"Mga Filipino\",\n    \"translationRatio\": 0.43993535643742143\n  },\n  {\n    \"languageCode\": \"fr_FR\",\n    \"languageName\": \"French\",\n    \"languageNativeName\": \"Français\",\n    \"translationRatio\": 0.9813251930328605\n  },\n  {\n    \"languageCode\": \"ha_HG\",\n    \"languageName\": \"Hausa\",\n    \"languageNativeName\": \"هَوُسَ\",\n    \"translationRatio\": 0.018854372418746657\n  },\n  {\n    \"languageCode\": \"he_IL\",\n    \"languageName\": \"Hebrew\",\n    \"languageNativeName\": \"עברית\",\n    \"translationRatio\": 0.02611806797853311\n  },\n  {\n    \"languageCode\": \"hi_IN\",\n    \"languageName\": \"Hindi\",\n    \"languageNativeName\": \"हिन्दी\",\n    \"translationRatio\": 0.2906976744186046\n  },\n  {\n    \"languageCode\": \"hu_HU\",\n    \"languageName\": \"Hungarian\",\n    \"languageNativeName\": \"magyar\",\n    \"translationRatio\": 0.22772808586762072\n  },\n  {\n    \"languageCode\": \"id_ID\",\n    \"languageName\": \"Indonesian\",\n    \"languageNativeName\": \"Bahasa Indonesia\",\n    \"translationRatio\": 0.5119856887298748\n  },\n  {\n    \"languageCode\": \"it_IT\",\n    \"languageName\": \"Italian\",\n    \"languageNativeName\": \"Italiano\",\n    \"translationRatio\": 0.9322003577817531\n  },\n  {\n    \"languageCode\": \"ja_JP\",\n    \"languageName\": \"Japanese\",\n    \"languageNativeName\": \"日本語\",\n    \"translationRatio\": 0.9864042933810375\n  },\n  {\n    \"languageCode\": \"km_KH\",\n    \"languageName\": \"Khmer\",\n    \"languageNativeName\": \"ខេមរភាសា\",\n    \"translationRatio\": 0.01878354203935595\n  },\n  {\n    \"languageCode\": \"ko_KR\",\n    \"languageName\": \"Korean\",\n    \"languageNativeName\": \"한국어\",\n    \"translationRatio\": 0.6817531305903399\n  },\n  {\n    \"languageCode\": \"lt_LT\",\n    \"languageName\": \"Lithuanian\",\n    \"languageNativeName\": \"lietuvių kalba\",\n    \"translationRatio\": 0.04955277280858672\n  },\n  {\n    \"languageCode\": \"lv_LV\",\n    \"languageName\": \"Latvian\",\n    \"languageNativeName\": \"latviešu valoda\",\n    \"translationRatio\": 0.011806797853309514\n  },\n  {\n    \"languageCode\": \"mr_IN\",\n    \"languageName\": \"Marathi\",\n    \"languageNativeName\": \"मराठी\",\n    \"translationRatio\": 0.012343470483005325\n  },\n  {\n    \"languageCode\": \"ms_MY\",\n    \"languageName\": \"Malay\",\n    \"languageNativeName\": \"Bahasa Malaysia\",\n    \"translationRatio\": 0.046511627906976716\n  },\n  {\n    \"languageCode\": \"my_MM\",\n    \"languageName\": \"Burmese\",\n    \"languageNativeName\": \"ဗမာစာ\",\n    \"translationRatio\": 0.012522361359570633\n  },\n  {\n    \"languageCode\": \"nl_NL\",\n    \"languageName\": \"Dutch\",\n    \"languageNativeName\": \"Nederlands\",\n    \"translationRatio\": 0.3710196779964222\n  },\n  {\n    \"languageCode\": \"no_NO\",\n    \"languageName\": \"Norwegian\",\n    \"languageNativeName\": \"Norsk\",\n    \"translationRatio\": 0.19302325581395352\n  },\n  {\n    \"languageCode\": \"pl_PL\",\n    \"languageName\": \"Polish\",\n    \"languageNativeName\": \"język polski\",\n    \"translationRatio\": 0.8411449016100179\n  },\n  {\n    \"languageCode\": \"pseudo_LOCALE\",\n    \"languageName\": \"for development only\",\n    \"languageNativeName\": \"Pseudolocalization\",\n    \"translationRatio\": 0.99581589958159\n  },\n  {\n    \"languageCode\": \"pt_BR\",\n    \"languageName\": \"Brazilian Portuguese\",\n    \"languageNativeName\": \"Português brasileiro\",\n    \"translationRatio\": 0.9561717352415027\n  },\n  {\n    \"languageCode\": \"pt_PT\",\n    \"languageName\": \"Portuguese\",\n    \"languageNativeName\": \"Português\",\n    \"translationRatio\": 0.4803220035778175\n  },\n  {\n    \"languageCode\": \"ro_RO\",\n    \"languageName\": \"Romanian\",\n    \"languageNativeName\": \"Română\",\n    \"translationRatio\": 0.0661896243291592\n  },\n  {\n    \"languageCode\": \"ru_RU\",\n    \"languageName\": \"Russian\",\n    \"languageNativeName\": \"Русский\",\n    \"translationRatio\": 0.9883720930232558\n  },\n  {\n    \"languageCode\": \"si_LK\",\n    \"languageName\": \"Sinhala\",\n    \"languageNativeName\": \"සිංහල\",\n    \"translationRatio\": 0.012343470483005325\n  },\n  {\n    \"languageCode\": \"sk_SK\",\n    \"languageName\": \"Slovak\",\n    \"languageNativeName\": \"slovenčina\",\n    \"translationRatio\": 0.27728085867620755\n  },\n  {\n    \"languageCode\": \"sl_SI\",\n    \"languageName\": \"Slovene\",\n    \"languageNativeName\": \"slovenski jezik\",\n    \"translationRatio\": 0.989087656529517\n  },\n  {\n    \"languageCode\": \"sr_CS\",\n    \"languageName\": \"Serbian (Latin)\",\n    \"languageNativeName\": \"srpski\",\n    \"translationRatio\": 0.24830053667262975\n  },\n  {\n    \"languageCode\": \"sr_SP\",\n    \"languageName\": \"Serbian\",\n    \"languageNativeName\": \"српски језик\",\n    \"translationRatio\": 0.5091234347048301\n  },\n  {\n    \"languageCode\": \"sv_SE\",\n    \"languageName\": \"Swedish\",\n    \"languageNativeName\": \"svenska\",\n    \"translationRatio\": 0.2211091234347048\n  },\n  {\n    \"languageCode\": \"th_TH\",\n    \"languageName\": \"Thai\",\n    \"languageNativeName\": \"ไทย\",\n    \"translationRatio\": 0.04364937388193202\n  },\n  {\n    \"languageCode\": \"tr_TR\",\n    \"languageName\": \"Turkish\",\n    \"languageNativeName\": \"Türkçe\",\n    \"translationRatio\": 0.7028622540250447\n  },\n  {\n    \"languageCode\": \"uk_UA\",\n    \"languageName\": \"Ukrainian\",\n    \"languageNativeName\": \"Українська\",\n    \"translationRatio\": 0.7423971377459749\n  },\n  {\n    \"languageCode\": \"ur_PK\",\n    \"languageName\": \"Urdu\",\n    \"languageNativeName\": \"اردو\",\n    \"translationRatio\": 0.02146690518783545\n  },\n  {\n    \"languageCode\": \"uz_UZ\",\n    \"languageName\": \"Uzbek\",\n    \"languageNativeName\": \"Ўзбек\",\n    \"translationRatio\": 0.0200357781753131\n  },\n  {\n    \"languageCode\": \"yo_NG\",\n    \"languageName\": \"Yoruba\",\n    \"languageNativeName\": \"Yorùbá\",\n    \"translationRatio\": 0.4763864042933811\n  },\n  {\n    \"languageCode\": \"zh_CN\",\n    \"languageName\": \"Chinese Simplified\",\n    \"languageNativeName\": \"简化字\",\n    \"translationRatio\": 0.9935599284436494\n  },\n  {\n    \"languageCode\": \"zh_TW\",\n    \"languageName\": \"Chinese Traditional\",\n    \"languageNativeName\": \"正體字\",\n    \"translationRatio\": 0.26064400715563507\n  }\n];\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { type StorageProvider } from '.';\nimport { List, ListItem } from '../UI/List';\nimport RaisedButton from '../UI/RaisedButton';\nimport optionalRequire from '../Utils/OptionalRequire';\nimport BackgroundText from '../UI/BackgroundText';\nimport { Column, Line } from '../UI/Grid';\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  storageProviders: Array<StorageProvider>,\n  onChooseProvider: StorageProvider => void,\n  onClose: () => void,\n  onCreateNewProject: () => void,\n|};\n\nconst OpenFromStorageProviderDialog = ({\n  onClose,\n  storageProviders,\n  onChooseProvider,\n  onCreateNewProject,\n}: Props) => {\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Dialog\n          title={<Trans>Choose where to load the project from</Trans>}\n          onRequestClose={onClose}\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              key=\"close\"\n              primary={false}\n              onClick={onClose}\n            />,\n          ]}\n          secondaryActions={[\n            <RaisedButton\n              label={<Trans>Create a new project</Trans>}\n              key=\"create-new-project\"\n              primary\n              onClick={onCreateNewProject}\n            />,\n          ]}\n          cannotBeDismissed={false}\n          open\n          noMargin\n          maxWidth=\"sm\"\n        >\n          <List>\n            {storageProviders\n              .filter(storageProvider => !storageProvider.hiddenInOpenDialog)\n              .map(storageProvider => (\n                <ListItem\n                  key={storageProvider.internalName}\n                  disabled={!!storageProvider.disabled}\n                  primaryText={i18n._(storageProvider.name)}\n                  leftIcon={\n                    storageProvider.renderIcon\n                      ? storageProvider.renderIcon()\n                      : undefined\n                  }\n                  onClick={() => onChooseProvider(storageProvider)}\n                />\n              ))}\n          </List>\n          {!electron && (\n            <Line>\n              <Column>\n                <BackgroundText>\n                  <Trans>\n                    If you have a popup blocker interrupting the opening, allow\n                    the popups and try a second time to open the project.\n                  </Trans>\n                </BackgroundText>\n              </Column>\n            </Line>\n          )}\n        </Dialog>\n      )}\n    </I18n>\n  );\n};\n\nexport default OpenFromStorageProviderDialog;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport { type StorageProvider } from '.';\nimport { List, ListItem } from '../UI/List';\n\ntype Props = {|\n  storageProviders: Array<StorageProvider>,\n  onChooseProvider: StorageProvider => void,\n  onClose: () => void,\n|};\n\nexport default ({ onClose, storageProviders, onChooseProvider }: Props) => {\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Dialog\n          title={<Trans>Choose where to save the project to</Trans>}\n          onRequestClose={onClose}\n          actions={[\n            <FlatButton\n              label={<Trans>Cancel</Trans>}\n              key=\"close\"\n              primary={false}\n              onClick={onClose}\n            />,\n          ]}\n          cannotBeDismissed={true}\n          open\n          noMargin\n          maxWidth=\"sm\"\n        >\n          <List>\n            {storageProviders\n              .filter(storageProvider => !storageProvider.hiddenInSaveDialog)\n              .map(storageProvider => (\n                <ListItem\n                  key={storageProvider.internalName}\n                  disabled={!!storageProvider.disabled}\n                  primaryText={i18n._(storageProvider.name)}\n                  leftIcon={\n                    storageProvider.renderIcon\n                      ? storageProvider.renderIcon()\n                      : undefined\n                  }\n                  onClick={() => onChooseProvider(storageProvider)}\n                />\n              ))}\n          </List>\n        </Dialog>\n      )}\n    </I18n>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport BackgroundText from '../UI/BackgroundText';\nimport { Column, Line } from '../UI/Grid';\nimport Text from '../UI/Text';\nimport { type StorageProviderOperations } from '.';\n\ntype OpenConfirmDialogProps = {|\n  onClose: () => void,\n  onConfirm: () => void,\n|};\n\nexport const OpenConfirmDialog = ({\n  onClose,\n  onConfirm,\n}: OpenConfirmDialogProps) => {\n  return (\n    <Dialog\n      title={<Trans>Confirm the opening</Trans>}\n      actions={[\n        <FlatButton\n          label={<Trans>Cancel</Trans>}\n          key=\"close\"\n          primary={false}\n          onClick={onClose}\n        />,\n        <RaisedButton\n          label={<Trans>Open the project</Trans>}\n          key=\"open-project\"\n          primary\n          onClick={onConfirm}\n        />,\n      ]}\n      cannotBeDismissed={true}\n      open\n      maxWidth=\"sm\"\n    >\n      <Line>\n        <Column>\n          <Text>\n            <Trans>\n              You're about to open (or re-open) a project. Click on \"Open the\n              Project\" to continue.\n            </Trans>\n          </Text>\n        </Column>\n      </Line>\n      <Line>\n        <Column>\n          <BackgroundText>\n            <Trans>\n              If you have a popup blocker interrupting the opening, allow the\n              popups and try a second time to open the project.\n            </Trans>\n          </BackgroundText>\n        </Column>\n      </Line>\n    </Dialog>\n  );\n};\n\nexport const useOpenConfirmDialog = () => {\n  const interactionMade = React.useRef(false);\n  const pendingConfirmationPromiseResolve = React.useRef<?(boolean) => void>(\n    null\n  );\n  const [openConfirmDialogOpen, openOpenConfirmDialog] = React.useState(false);\n\n  return {\n    /**\n     * Ensure that the user does an interaction (i.e: click on a button), before\n     * resolving the promise, if the specified storage provider needs an interaction.\n     * This is for example the case when opening directly the web-app with a file\n     * to open from the URL (like a Google Drive file).\n     */\n    ensureInteractionHappened: (\n      storageProviderOperations: StorageProviderOperations\n    ): Promise<boolean> => {\n      return new Promise(resolve => {\n        if (\n          interactionMade.current ||\n          !storageProviderOperations.doesInitialOpenRequireUserInteraction\n        ) {\n          // No need for any interaction, just proceed.\n          resolve(true);\n          return;\n        }\n\n        // We need an interaction first, display a confirmation dialog\n        console.info(\n          'Displaying confirmation dialog to ensure an interaction is made before continuing.'\n        );\n        pendingConfirmationPromiseResolve.current = resolve;\n        openOpenConfirmDialog(true);\n      });\n    },\n    /**\n     * Render, if needed, the dialog that will ask the user to confirm the opening.\n     */\n    renderOpenConfirmDialog: () => {\n      if (!openConfirmDialogOpen) return null;\n\n      const closeAndResolveWith = (proceed: boolean) => {\n        interactionMade.current = true;\n        openOpenConfirmDialog(false);\n        const resolve = pendingConfirmationPromiseResolve.current;\n        if (resolve) {\n          resolve(proceed);\n          pendingConfirmationPromiseResolve.current = null;\n        }\n      };\n\n      return (\n        <OpenConfirmDialog\n          onClose={() => closeAndResolveWith(false)}\n          onConfirm={() => closeAndResolveWith(true)}\n        />\n      );\n    },\n  };\n};\n","// @flow\nimport { showErrorBox } from '../UI/Messages/MessageBox';\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\n\nexport default function verifyProjectContent(\n  i18n: I18nType,\n  content: Object\n): boolean {\n  if (!content.gdVersion && content.eventsFunctions) {\n    showErrorBox({\n      message: [\n        i18n._(t`Unable to open this file.`),\n        i18n._(\n          t`This file is an extension file for GDevelop 5. You should instead import it, using the window to add a new extension to your project.`\n        ),\n      ].join('\\n'),\n      rawError: undefined,\n      errorId: 'extension-opened-as-project-error',\n      doNotReport: true,\n    });\n    return false;\n  }\n\n  if (!content.gdVersion && !content.eventsFunctions) {\n    showErrorBox({\n      message: [\n        i18n._(t`Unable to open this file.`),\n        i18n._(\n          t`This file is not recognized as a GDevelop 5 project. Be sure to open a file that was saved using GDevelop.`\n        ),\n      ].join('\\n'),\n      rawError: undefined,\n      errorId: 'malformed-project-error',\n      doNotReport: true,\n    });\n    return false;\n  }\n  return true;\n}\n","import React from 'react';\n\n/**\n * A useState hook that returns a promise when the state is set.\n * *Don't use it* excepted for MainFrame. This is used while transitioning\n * MainFrame to hooks - and it's not typed properly.\n */\nexport default function useStateWithCallback(initialValue) {\n  const [state, setState] = React.useState(initialValue);\n  const callback = React.useRef(null);\n\n  const useStateWithCB = React.useCallback(\n    newValue => {\n      return new Promise(resolve => {\n        callback.current = resolve;\n        setState(newValue);\n      });\n    },\n    [setState]\n  );\n\n  React.useEffect(\n    () => {\n      if (callback.current !== null) {\n        callback.current(state);\n        callback.current = null;\n      }\n    },\n    [state]\n  );\n  return [state, useStateWithCB];\n}\n","// @flow\nimport * as React from 'react';\nimport { type I18n } from '@lingui/core';\nimport {\n  useCommand,\n  useCommandWithOptions,\n} from '../CommandPalette/CommandHooks';\nimport {\n  enumerateLayouts,\n  enumerateExternalEvents,\n  enumerateExternalLayouts,\n  enumerateEventsFunctionsExtensions,\n} from '../ProjectManager/EnumerateProjectItems';\n\ntype Item =\n  | gdLayout\n  | gdExternalEvents\n  | gdExternalLayout\n  | gdEventsFunctionsExtension;\n\n/**\n * Helper function to generate options list\n * for each kind of project item\n */\nconst generateProjectItemOptions = <T: Item>(\n  project: ?gdProject,\n  enumerate: (project: gdProject) => Array<T>,\n  onOpen: string => void\n) => {\n  if (!project) return [];\n  return enumerate(project).map(item => ({\n    text: item.getName(),\n    handler: () => onOpen(item.getName()),\n  }));\n};\n\ntype CommandHandlers = {|\n  i18n: I18n,\n  project: ?gdProject,\n  previewEnabled: boolean,\n  hasPreviewsRunning: boolean,\n  onOpenProjectManager: () => void,\n  onLaunchPreview: () => void | Promise<void>,\n  onLaunchDebugPreview: () => void,\n  onLaunchNetworkPreview: () => void,\n  onHotReloadPreview: () => void,\n  allowNetworkPreview: boolean,\n  onOpenStartPage: () => void,\n  onCreateProject: () => void,\n  onOpenProject: () => void,\n  onSaveProject: () => Promise<void>,\n  onSaveProjectAs: () => void,\n  onCloseApp: () => void,\n  onCloseProject: () => Promise<void>,\n  onExportGame: () => void,\n  onOpenLayout: string => void,\n  onOpenExternalEvents: string => void,\n  onOpenExternalLayout: string => void,\n  onOpenEventsFunctionsExtension: string => void,\n  onOpenCommandPalette: () => void,\n  onOpenProfile: () => void,\n  onOpenGamesDashboard: () => void,\n|};\n\nconst useMainFrameCommands = (handlers: CommandHandlers) => {\n  useCommand('QUIT_APP', true, {\n    handler: handlers.onCloseApp,\n  });\n\n  useCommand('OPEN_PROFILE', !!handlers.project, {\n    handler: handlers.onOpenProfile,\n  });\n\n  useCommand('OPEN_GAMES_DASHBOARD', !!handlers.project, {\n    handler: handlers.onOpenGamesDashboard,\n  });\n\n  useCommand('OPEN_PROJECT_MANAGER', !!handlers.project, {\n    handler: handlers.onOpenProjectManager,\n  });\n\n  useCommand('LAUNCH_NEW_PREVIEW', handlers.previewEnabled, {\n    handler: handlers.onLaunchPreview,\n  });\n\n  useCommand('HOT_RELOAD_PREVIEW', handlers.hasPreviewsRunning, {\n    handler: handlers.onHotReloadPreview,\n  });\n\n  useCommand(\n    'LAUNCH_DEBUG_PREVIEW',\n    handlers.previewEnabled && handlers.allowNetworkPreview,\n    {\n      handler: handlers.onLaunchDebugPreview,\n    }\n  );\n\n  useCommand(\n    'LAUNCH_NETWORK_PREVIEW',\n    handlers.previewEnabled && handlers.allowNetworkPreview,\n    {\n      handler: handlers.onLaunchNetworkPreview,\n    }\n  );\n\n  useCommand('OPEN_START_PAGE', true, {\n    handler: handlers.onOpenStartPage,\n  });\n\n  useCommand('CREATE_NEW_PROJECT', true, {\n    handler: handlers.onCreateProject,\n  });\n\n  useCommand('OPEN_PROJECT', true, {\n    handler: handlers.onOpenProject,\n  });\n\n  useCommand('SAVE_PROJECT', !!handlers.project, {\n    handler: handlers.onSaveProject,\n  });\n\n  useCommand('SAVE_PROJECT_AS', !!handlers.project, {\n    handler: handlers.onSaveProjectAs,\n  });\n\n  useCommand('CLOSE_PROJECT', !!handlers.project, {\n    handler: handlers.onCloseProject,\n  });\n\n  useCommand('EXPORT_GAME', !!handlers.project, {\n    handler: handlers.onExportGame,\n  });\n\n  useCommand('OPEN_COMMAND_PALETTE', true, {\n    handler: handlers.onOpenCommandPalette,\n  });\n\n  useCommandWithOptions('OPEN_LAYOUT', !!handlers.project, {\n    generateOptions: React.useCallback(\n      () =>\n        generateProjectItemOptions(\n          handlers.project,\n          enumerateLayouts,\n          handlers.onOpenLayout\n        ),\n      [handlers.project, handlers.onOpenLayout]\n    ),\n  });\n\n  useCommandWithOptions('OPEN_EXTERNAL_EVENTS', !!handlers.project, {\n    generateOptions: React.useCallback(\n      () =>\n        generateProjectItemOptions(\n          handlers.project,\n          enumerateExternalEvents,\n          handlers.onOpenExternalEvents\n        ),\n      [handlers.project, handlers.onOpenExternalEvents]\n    ),\n  });\n\n  useCommandWithOptions('OPEN_EXTERNAL_LAYOUT', !!handlers.project, {\n    generateOptions: React.useCallback(\n      () =>\n        generateProjectItemOptions(\n          handlers.project,\n          enumerateExternalLayouts,\n          handlers.onOpenExternalLayout\n        ),\n      [handlers.project, handlers.onOpenExternalLayout]\n    ),\n  });\n\n  useCommandWithOptions('OPEN_EXTENSION', !!handlers.project, {\n    generateOptions: React.useCallback(\n      () =>\n        generateProjectItemOptions(\n          handlers.project,\n          enumerateEventsFunctionsExtensions,\n          handlers.onOpenEventsFunctionsExtension\n        ),\n      [handlers.project, handlers.onOpenEventsFunctionsExtension]\n    ),\n  });\n};\n\nexport default useMainFrameCommands;\n","// @flow\nimport * as React from 'react';\nimport {\n  CommandManagerInterface,\n  type Command,\n  type NamedCommand,\n} from './CommandManager';\nimport { type CommandName } from './CommandsList';\nimport CommandsContext from './CommandsContext';\nimport useRefInit from './UseRefInitHook';\n\nclass ScopedCommandManager implements CommandManagerInterface {\n  _commands: { [CommandName]: Command };\n  _centralManager: CommandManagerInterface;\n  _isActive: boolean;\n\n  constructor(centralCommandManager) {\n    this._commands = {};\n    this._isActive = false;\n    this._centralManager = centralCommandManager;\n  }\n\n  setActive = (active: boolean) => {\n    this._isActive = active;\n  };\n\n  registerCommand = (commandName: CommandName, command: Command) => {\n    this._commands[commandName] = command;\n    if (this._isActive)\n      this._centralManager.registerCommand(commandName, command);\n  };\n\n  deregisterCommand = (commandName: CommandName) => {\n    delete this._commands[commandName];\n    if (this._isActive) this._centralManager.deregisterCommand(commandName);\n  };\n\n  registerAllCommandsToCentralManager = () => {\n    Object.keys(this._commands).forEach(commandName => {\n      this._centralManager.registerCommand(\n        commandName,\n        this._commands[commandName]\n      );\n    });\n  };\n\n  deregisterAllCommandsFromCentralManager = () => {\n    Object.keys(this._commands).forEach(commandName => {\n      this._centralManager.deregisterCommand(commandName);\n    });\n  };\n\n  getAllNamedCommands = () => {\n    return Object.keys(this._commands).map<NamedCommand>(commandName => {\n      const cmd = this._commands[commandName];\n      // $FlowFixMe\n      return { ...cmd, name: commandName };\n    });\n  };\n\n  getNamedCommand = (commandName: CommandName) => {\n    const command = this._commands[commandName];\n    if (command) return { name: commandName, ...(command: Command) };\n    return this._centralManager.getNamedCommand(commandName);\n  };\n}\n\ntype Props = {|\n  children: React.Node,\n  active: boolean,\n|};\n\nconst CommandsContextScopedProvider = (props: Props) => {\n  const centralManager = React.useContext(CommandsContext);\n  const scopedManager = useRefInit(\n    () => new ScopedCommandManager(centralManager)\n  );\n\n  React.useEffect(\n    () => {\n      if (!props.active) return;\n      scopedManager.setActive(true);\n      scopedManager.registerAllCommandsToCentralManager();\n      return () => {\n        scopedManager.setActive(false);\n        scopedManager.deregisterAllCommandsFromCentralManager();\n      };\n    },\n    [props.active, scopedManager]\n  );\n\n  return (\n    <CommandsContext.Provider value={scopedManager}>\n      {props.children}\n    </CommandsContext.Provider>\n  );\n};\n\nexport default CommandsContextScopedProvider;\n","// @flow\nimport * as React from 'react';\nimport {\n  type PreviewDebuggerServer,\n  type DebuggerId,\n  type HotReloaderLog,\n} from '../Export/PreviewLauncher.flow';\n\n/** Represents what should be run when a preview is launched */\nexport type PreviewState = {|\n  /** The previewed layout name, set by the current editor. */\n  previewLayoutName: ?string,\n  /** The previewed external layout name, set by the current editor. */\n  previewExternalLayoutName: ?string,\n\n  /** If true, the previewed layout/external layout is overriden, */\n  isPreviewOverriden: boolean,\n  /** The layout name to be used instead of the one set by the current editor. */\n  overridenPreviewLayoutName: ?string,\n  /** The external layout name to be used instead of the one set by the current editor. */\n  overridenPreviewExternalLayoutName: ?string,\n|};\n\ntype PreviewDebuggerServerWatcherResults = {|\n  previewDebuggerIds: Array<DebuggerId>,\n  hotReloadLogs: Array<HotReloaderLog>,\n  clearHotReloadLogs: () => void,\n|};\n\n/**\n * Return the ids of the debuggers being run, watching for changes (new\n * debugger launched or existing one closed).\n */\nexport const usePreviewDebuggerServerWatcher = (\n  previewDebuggerServer: ?PreviewDebuggerServer\n): PreviewDebuggerServerWatcherResults => {\n  const [debuggerIds, setDebuggerIds] = React.useState<Array<DebuggerId>>([]);\n  const [hotReloadLogs, setHotReloadLogs] = React.useState<\n    Array<HotReloaderLog>\n  >([]);\n  React.useEffect(\n    () => {\n      if (!previewDebuggerServer) {\n        setDebuggerIds([]);\n        return;\n      }\n\n      const unregisterCallbacks = previewDebuggerServer.registerCallbacks({\n        onErrorReceived: err => {\n          // Nothing to do.\n        },\n        onConnectionClosed: ({ id, debuggerIds }) => {\n          setDebuggerIds([...debuggerIds]);\n        },\n        onConnectionOpened: ({ id, debuggerIds }) => {\n          setDebuggerIds([...debuggerIds]);\n        },\n        onServerStateChanged: () => {\n          // Nothing to do.\n        },\n        onHandleParsedMessage: ({ id, parsedMessage }) => {\n          if (parsedMessage.command === 'hotReloader.logs') {\n            setHotReloadLogs(parsedMessage.payload);\n          }\n        },\n      });\n      return () => {\n        unregisterCallbacks();\n      };\n    },\n    [previewDebuggerServer]\n  );\n  const clearHotReloadLogs = React.useCallback(() => setHotReloadLogs([]), [\n    setHotReloadLogs,\n  ]);\n\n  return { previewDebuggerIds: debuggerIds, hotReloadLogs, clearHotReloadLogs };\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport HelpButton from '../UI/HelpButton';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport Text from '../UI/Text';\nimport { type HotReloaderLog } from '../Export/PreviewLauncher.flow';\nimport { NewPreviewIcon } from './HotReloadPreviewButton';\n\ntype Props = {|\n  logs: Array<HotReloaderLog>,\n  onClose: () => void,\n  onLaunchNewPreview: () => void,\n|};\n\nconst shouldDisplayDialogForLogs = logs =>\n  logs.filter(log => log.kind === 'error' || log.kind === 'fatal').length > 0;\n\nexport default function HotReloadLogsDialog({\n  onClose,\n  onLaunchNewPreview,\n  logs,\n}: Props) {\n  if (!shouldDisplayDialogForLogs(logs)) {\n    return null;\n  }\n\n  return (\n    <Dialog\n      title={<Trans>Restarting the preview from scratch is required</Trans>}\n      onRequestClose={onClose}\n      actions={[\n        <FlatButton\n          label={<Trans>Close</Trans>}\n          key=\"close\"\n          primary={false}\n          onClick={onClose}\n        />,\n        <RaisedButton\n          icon={<NewPreviewIcon />}\n          label={<Trans>Close and launch a new preview</Trans>}\n          key=\"new-preview\"\n          primary\n          onClick={onLaunchNewPreview}\n        />,\n      ]}\n      secondaryActions={[\n        <HelpButton key=\"help\" helpPagePath={'/interface/preview'} />,\n      ]}\n      open\n      cannotBeDismissed\n    >\n      <ColumnStackLayout noMargin>\n        <Text>\n          <Trans>\n            Your latest changes could not be applied to the preview(s) being\n            run. You should start a new preview instead to make sure that all\n            your changes are reflected in the game.\n          </Trans>\n        </Text>\n      </ColumnStackLayout>\n    </Dialog>\n  );\n}\n","// @flow\nimport { useEffect, useState } from 'react';\nimport optionalRequire from './OptionalRequire';\nconst electron = optionalRequire('electron');\nconst ipc = electron ? electron.ipcRenderer : null;\n\nconst richPresenceStartTimestamp = Date.now();\n\nconst updateDiscordRichPresence = (project: ?gdProject) => {\n  if (ipc === null) return;\n\n  const config = {\n    details: project ? 'Working on:' : 'Not working on',\n    state: project ? project.getName() : 'any game',\n    startTimestamp: richPresenceStartTimestamp,\n    largeImageKey: 'gdicon',\n    largeImageText: 'GDevelop',\n  };\n\n  ipc.send('update-discord-rich-presence', config);\n};\n\nexport const useDiscordRichPresence = (project: ?gdProject) => {\n  const [lastCallTime, setLastCallTime] = useState(0);\n  useEffect(() => updateDiscordRichPresence(project));\n  useEffect(\n    () => {\n      if (performance.now() - lastCallTime > 60000) {\n        setLastCallTime(performance.now());\n        updateDiscordRichPresence(project);\n      }\n    },\n    [project, lastCallTime]\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { Trans } from '@lingui/macro';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport Dialog from '../UI/Dialog';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport {\n  type ChooseResourceOptions,\n  type ResourceSource,\n} from './ResourceSource';\nimport FlatButton from '../UI/FlatButton';\nimport { Column, Line } from '../UI/Grid';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport Text from '../UI/Text';\nimport { useScreenType } from '../UI/Reponsive/ScreenTypeMeasurer';\nimport Window from '../Utils/Window';\nimport optionalRequire from '../Utils/OptionalRequire';\n\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  project: gdProject,\n  i18n: I18nType,\n  options: ChooseResourceOptions,\n  resourceSources: Array<ResourceSource>,\n  onClose: () => void,\n  onChooseResources: (resources: Array<gdResource>) => void,\n|};\n\nexport const NewResourceDialog = ({\n  project,\n  options,\n  i18n,\n  resourceSources,\n  onClose,\n  onChooseResources,\n}: Props) => {\n  const screenType = useScreenType();\n  const preferences = React.useContext(PreferencesContext);\n  const possibleResourceSources = resourceSources.filter(\n    ({ kind }) => kind === options.resourceKind\n  );\n  const standaloneTabResourceSources = possibleResourceSources.filter(\n    ({ displayTab }) => displayTab === 'standalone'\n  );\n  const importTabResourceSources = possibleResourceSources.filter(\n    ({ displayTab }) => displayTab === 'import'\n  );\n  const initialSource = possibleResourceSources.find(\n    ({ name }) => name === options.initialSourceName\n  );\n  const isInitialSourceHeadless =\n    initialSource && initialSource.selectResourcesHeadless;\n  const [currentTab, setCurrentTab] = React.useState(() => {\n    if (!initialSource) return 'import';\n\n    if (initialSource.displayTab === 'import') return 'import';\n    if (initialSource.displayTab === 'standalone') {\n      return 'standalone-' + initialSource.name;\n    }\n\n    return 'import';\n  });\n\n  React.useEffect(\n    () => {\n      if (!initialSource) return;\n      const { selectResourcesHeadless } = initialSource;\n      if (!selectResourcesHeadless) return;\n\n      (async () => {\n        try {\n          const resources = await selectResourcesHeadless({\n            i18n,\n            options,\n            project,\n            getLastUsedPath: preferences.getLastUsedPath,\n            setLastUsedPath: preferences.setLastUsedPath,\n          });\n          onChooseResources(resources);\n        } catch (error) {\n          console.error('Unexpected error from a resource source:', error);\n          onChooseResources([]);\n        }\n      })();\n    },\n    // eslint-disable-next-line\n    []\n  );\n\n  if (isInitialSourceHeadless) return null;\n\n  return (\n    <Dialog\n      open\n      onRequestClose={onClose}\n      fullHeight\n      flexBody\n      secondaryActions={[\n        !electron && screenType !== 'touch' ? (\n          <FlatButton\n            key=\"download-gdevelop\"\n            label={\n              <Trans>Download GDevelop to use images from your computer</Trans>\n            }\n            onClick={() =>\n              Window.openExternalURL('https://gdevelop-app.com/download')\n            }\n          />\n        ) : null,\n      ]}\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary\n          onClick={onClose}\n        />,\n      ]}\n      noMargin\n    >\n      <Column expand noMargin>\n        <Tabs value={currentTab} onChange={setCurrentTab}>\n          {standaloneTabResourceSources.map(({ name, displayName }) => (\n            <Tab label={i18n._(displayName)} value={'standalone-' + name} />\n          ))}\n          <Tab label={<Trans>Choose a file</Trans>} value=\"import\" />\n        </Tabs>\n        {standaloneTabResourceSources.map(source => {\n          if (currentTab !== 'standalone-' + source.name) return null;\n\n          return source.renderComponent({\n            i18n,\n            options,\n            project,\n            getLastUsedPath: preferences.getLastUsedPath,\n            setLastUsedPath: preferences.setLastUsedPath,\n            onChooseResources,\n          });\n        })}\n        {currentTab === 'import' ? (\n          <Line expand>\n            <ColumnStackLayout expand>\n              {importTabResourceSources.map(source => (\n                <>\n                  <Text size=\"title\">{i18n._(source.displayName)}</Text>\n                  {source.renderComponent({\n                    i18n,\n                    options,\n                    project,\n                    getLastUsedPath: preferences.getLastUsedPath,\n                    setLastUsedPath: preferences.setLastUsedPath,\n                    onChooseResources,\n                  })}\n                </>\n              ))}\n            </ColumnStackLayout>\n          </Line>\n        ) : null}\n      </Column>\n    </Dialog>\n  );\n};\n","// @flow\nimport * as React from 'react';\nimport { I18nProvider } from '@lingui/react';\nimport { setupI18n } from '@lingui/core';\nimport { getTranslationFunction } from './getTranslationFunction';\nimport { type I18n as I18nType } from '@lingui/core';\nconst gd = global.gd;\n\ntype Catalog = any;\ntype Catalogs = {\n  [string]: Catalog,\n};\n\ntype Props = {|\n  language: string,\n  children: React.Node,\n|};\n\ntype State = {\n  language: string,\n  i18n: ?I18nType,\n  catalogs: Catalogs,\n};\n\nexport default class GDI18nProvider extends React.Component<Props, State> {\n  state = {\n    language: 'en',\n    catalogs: {},\n    i18n: null,\n  };\n\n  componentDidMount() {\n    this._loadLanguage(this.props.language);\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.language !== this.props.language) {\n      this._loadLanguage(this.props.language);\n    }\n  }\n\n  _loadCatalog = (language: string): Promise<Catalogs> => {\n    if (this.state.catalogs[language]) {\n      return Promise.resolve(this.state.catalogs);\n    }\n\n    return import(/* webpackMode: \"lazy\", webpackChunkName: \"locales-[request]\" */\n    `../../locales/${language.replace('-', '_')}/messages`).then(\n      catalog => {\n        return { ...this.state.catalogs, [language]: catalog };\n      },\n      (error: Error) => {\n        console.error('Error while loading language=' + language, error);\n        return this.state.catalogs;\n      }\n    );\n  };\n\n  _loadLanguage(language: string) {\n    this._loadCatalog(language).then(catalogs => {\n      this.setState(\n        {\n          language,\n          catalogs,\n          i18n: setupI18n({\n            language: language,\n            catalogs,\n          }),\n        },\n        () => {\n          const { i18n } = this.state;\n          gd.getTranslation = getTranslationFunction(i18n);\n          console.info(`Loaded \"${language}\" language`);\n        }\n      );\n    });\n  }\n\n  render() {\n    // Use language from the state, as it is synchronized with the catalogs,\n    // while the language from props is the \"target language\", and sometime\n    // can be a language for which the catalog is not loaded yet (which would\n    // create warning and a \"flash\" effect when changing language).\n    const { i18n, catalogs, language } = this.state;\n    const { children } = this.props;\n\n    if (!i18n) return null; // Skip rendering when catalog isn't loaded.\n\n    return (\n      <I18nProvider i18n={i18n} language={language} catalogs={catalogs}>\n        {children}\n      </I18nProvider>\n    );\n  }\n}\n","var map = {\n\t\"./af_ZA/messages\": [\n\t\t1880,\n\t\t5\n\t],\n\t\"./ar_SA/messages\": [\n\t\t1881,\n\t\t6\n\t],\n\t\"./az_AZ/messages\": [\n\t\t1882,\n\t\t7\n\t],\n\t\"./bg_BG/messages\": [\n\t\t1883,\n\t\t8\n\t],\n\t\"./bn_BD/messages\": [\n\t\t1884,\n\t\t9\n\t],\n\t\"./ca_ES/messages\": [\n\t\t1885,\n\t\t10\n\t],\n\t\"./cs_CZ/messages\": [\n\t\t1886,\n\t\t11\n\t],\n\t\"./da_DK/messages\": [\n\t\t1887,\n\t\t12\n\t],\n\t\"./de_DE/messages\": [\n\t\t1888,\n\t\t13\n\t],\n\t\"./el_GR/messages\": [\n\t\t1889,\n\t\t14\n\t],\n\t\"./en/messages\": [\n\t\t1890,\n\t\t15\n\t],\n\t\"./eo_UY/messages\": [\n\t\t1891,\n\t\t16\n\t],\n\t\"./es_ES/messages\": [\n\t\t1892,\n\t\t17\n\t],\n\t\"./fa_IR/messages\": [\n\t\t1893,\n\t\t18\n\t],\n\t\"./fi_FI/messages\": [\n\t\t1894,\n\t\t19\n\t],\n\t\"./fil_PH/messages\": [\n\t\t1895,\n\t\t20\n\t],\n\t\"./fr_FR/messages\": [\n\t\t1896,\n\t\t21\n\t],\n\t\"./ha_HG/messages\": [\n\t\t1897,\n\t\t22\n\t],\n\t\"./he_IL/messages\": [\n\t\t1898,\n\t\t23\n\t],\n\t\"./hi_IN/messages\": [\n\t\t1899,\n\t\t24\n\t],\n\t\"./hu_HU/messages\": [\n\t\t1900,\n\t\t25\n\t],\n\t\"./id_ID/messages\": [\n\t\t1901,\n\t\t26\n\t],\n\t\"./it_IT/messages\": [\n\t\t1902,\n\t\t27\n\t],\n\t\"./ja_JP/messages\": [\n\t\t1903,\n\t\t28\n\t],\n\t\"./km_KH/messages\": [\n\t\t1904,\n\t\t29\n\t],\n\t\"./ko_KR/messages\": [\n\t\t1905,\n\t\t30\n\t],\n\t\"./lt_LT/messages\": [\n\t\t1906,\n\t\t31\n\t],\n\t\"./lv_LV/messages\": [\n\t\t1907,\n\t\t32\n\t],\n\t\"./mr_IN/messages\": [\n\t\t1908,\n\t\t33\n\t],\n\t\"./ms_MY/messages\": [\n\t\t1909,\n\t\t34\n\t],\n\t\"./my_MM/messages\": [\n\t\t1910,\n\t\t35\n\t],\n\t\"./nl_NL/messages\": [\n\t\t1911,\n\t\t36\n\t],\n\t\"./no_NO/messages\": [\n\t\t1912,\n\t\t37\n\t],\n\t\"./pl_PL/messages\": [\n\t\t1913,\n\t\t38\n\t],\n\t\"./pseudo_LOCALE/messages\": [\n\t\t1914,\n\t\t39\n\t],\n\t\"./pt_BR/messages\": [\n\t\t1915,\n\t\t40\n\t],\n\t\"./pt_PT/messages\": [\n\t\t1916,\n\t\t41\n\t],\n\t\"./ro_RO/messages\": [\n\t\t1917,\n\t\t42\n\t],\n\t\"./ru_RU/messages\": [\n\t\t1918,\n\t\t43\n\t],\n\t\"./si_LK/messages\": [\n\t\t1919,\n\t\t44\n\t],\n\t\"./sk_SK/messages\": [\n\t\t1920,\n\t\t45\n\t],\n\t\"./sl_SI/messages\": [\n\t\t1921,\n\t\t46\n\t],\n\t\"./sr_CS/messages\": [\n\t\t1922,\n\t\t47\n\t],\n\t\"./sr_SP/messages\": [\n\t\t1923,\n\t\t48\n\t],\n\t\"./sv_SE/messages\": [\n\t\t1924,\n\t\t49\n\t],\n\t\"./th_TH/messages\": [\n\t\t1925,\n\t\t50\n\t],\n\t\"./tr_TR/messages\": [\n\t\t1926,\n\t\t51\n\t],\n\t\"./uk_UA/messages\": [\n\t\t1927,\n\t\t52\n\t],\n\t\"./ur_PK/messages\": [\n\t\t1928,\n\t\t53\n\t],\n\t\"./uz_UZ/messages\": [\n\t\t1929,\n\t\t54\n\t],\n\t\"./yo_NG/messages\": [\n\t\t1930,\n\t\t55\n\t],\n\t\"./zh_CN/messages\": [\n\t\t1931,\n\t\t56\n\t],\n\t\"./zh_TW/messages\": [\n\t\t1932,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 1740;\nmodule.exports = webpackAsyncContext;","// @flow\nimport * as React from 'react';\nimport Text from '../UI/Text';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport PropertiesEditor from '../PropertiesEditor';\nimport propertiesMapToSchema from '../PropertiesEditor/PropertiesMapToSchema';\nimport { List } from '@material-ui/core';\n\ntype Props = {|\n  project: gdProject,\n|};\n\nfunction ExtensionsProperties(props: Props) {\n  const { project } = props;\n  const allExtensions = project.getCurrentPlatform().getAllPlatformExtensions();\n  const propertyList = [];\n  for (let i = 0; i < allExtensions.size(); i++) {\n    const extension = allExtensions.at(i);\n    const properties = project\n      .getExtensionProperties()\n      .getAllExtensionProperties(extension.getName(), project);\n    if (properties.keys().size() === 0) continue;\n    const propertiesSchema = propertiesMapToSchema(\n      properties,\n      instance =>\n        project\n          .getExtensionProperties()\n          .getAllExtensionProperties(extension.getName(), project),\n      (instance, propertyName, newValue) => {\n        if (\n          project\n            .getExtensionProperties()\n            .getAllExtensionProperties(extension.getName(), project)\n            .get(propertyName)\n            .getType() === 'boolean'\n        ) {\n          project\n            .getExtensionProperties()\n            .setValue(\n              extension.getName(),\n              propertyName,\n              newValue === '1' ? 'true' : 'false'\n            );\n        } else {\n          project\n            .getExtensionProperties()\n            .setValue(extension.getName(), propertyName, newValue);\n        }\n      }\n    );\n\n    propertyList.push(\n      <ColumnStackLayout key={extension.getName()} noMargin>\n        <Text size=\"title\">{extension.getFullName()}</Text>\n        <PropertiesEditor\n          schema={propertiesSchema}\n          instances={[extension.getAllProperties()]}\n        />\n      </ColumnStackLayout>\n    );\n  }\n\n  return propertyList.length ? <List>{propertyList}</List> : null;\n}\n\nexport default ExtensionsProperties;\n","// @flow\nimport { t, Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport SubscriptionChecker from '../Profile/SubscriptionChecker';\nimport Checkbox from '../UI/Checkbox';\nimport ColorField from '../UI/ColorField';\nimport { I18n } from '@lingui/react';\nimport { Line } from '../UI/Grid';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport { ColumnStackLayout, ResponsiveLineStackLayout } from '../UI/Layout';\nimport {\n  hexNumberToRGBString,\n  rgbStringToHexNumber,\n} from '../Utils/ColorTransformer';\nimport useForceUpdate from '../Utils/UseForceUpdate';\nimport ResourceSelectorWithThumbnail from '../ResourcesList/ResourceSelectorWithThumbnail';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Text from '../UI/Text';\n\ntype Props = {\n  loadingScreen: gdLoadingScreen,\n  onChangeSubscription: () => void,\n\n  // For resources:\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n};\n\nexport const LoadingScreenEditor = ({\n  loadingScreen,\n  onChangeSubscription,\n  project,\n  resourceSources,\n  onChooseResource,\n  resourceExternalEditors,\n}: Props) => {\n  const subscriptionChecker = React.useRef<?SubscriptionChecker>(null);\n  const forceUpdate = useForceUpdate();\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <ColumnStackLayout expand noMargin>\n          <Text size=\"title\">\n            <Trans>Background</Trans>\n          </Text>\n          <Line noMargin>\n            <ResourceSelectorWithThumbnail\n              floatingLabelText={<Trans>Background image</Trans>}\n              project={project}\n              resourceSources={resourceSources}\n              onChooseResource={onChooseResource}\n              resourceExternalEditors={resourceExternalEditors}\n              resourceKind=\"image\"\n              resourceName={loadingScreen.getBackgroundImageResourceName()}\n              onChange={resourceName => {\n                loadingScreen.setBackgroundImageResourceName(resourceName);\n                forceUpdate();\n              }}\n            />\n          </Line>\n          <ResponsiveLineStackLayout noMargin>\n            <ColorField\n              fullWidth\n              floatingLabelText={<Trans>Background color</Trans>}\n              disableAlpha\n              color={hexNumberToRGBString(loadingScreen.getBackgroundColor())}\n              onChange={color => {\n                loadingScreen.setBackgroundColor(rgbStringToHexNumber(color));\n                forceUpdate();\n              }}\n            />\n            <SemiControlledTextField\n              floatingLabelText={\n                <Trans>Background fade in duration (in seconds)</Trans>\n              }\n              step={0.1}\n              fullWidth\n              type=\"number\"\n              value={'' + loadingScreen.getBackgroundFadeInDuration()}\n              onChange={value => {\n                loadingScreen.setBackgroundFadeInDuration(\n                  Math.max(0, parseFloat(value))\n                );\n                forceUpdate();\n              }}\n            />\n          </ResponsiveLineStackLayout>\n          <Text size=\"title\">\n            <Trans>Logo</Trans>\n          </Text>\n          <Checkbox\n            label={\n              <Trans>Display GDevelop logo at startup (in exported game)</Trans>\n            }\n            checked={loadingScreen.isGDevelopSplashShown()}\n            onCheck={(e, checked) => {\n              if (!checked) {\n                if (\n                  subscriptionChecker.current &&\n                  !subscriptionChecker.current.checkHasSubscription()\n                )\n                  return;\n              }\n              loadingScreen.showGDevelopSplash(checked);\n              forceUpdate();\n            }}\n          />\n          <SelectField\n            fullWidth\n            floatingLabelText={<Trans>GDevelop logo style</Trans>}\n            value={loadingScreen.getGDevelopLogoStyle()}\n            onChange={(e, i, value: string) => {\n              loadingScreen.setGDevelopLogoStyle(value);\n              forceUpdate();\n            }}\n          >\n            <SelectOption value=\"light\" primaryText={t`Light (plain)`} />\n            <SelectOption\n              value=\"light-colored\"\n              primaryText={t`Light (colored)`}\n            />\n            <SelectOption value=\"dark\" primaryText={t`Dark (plain)`} />\n            <SelectOption\n              value=\"dark-colored\"\n              primaryText={t`Dark (colored)`}\n            />\n          </SelectField>\n          <ResponsiveLineStackLayout noMargin>\n            <SemiControlledTextField\n              floatingLabelText={\n                <Trans>Logo and progress fade in delay (in seconds)</Trans>\n              }\n              step={0.1}\n              fullWidth\n              type=\"number\"\n              value={'' + loadingScreen.getLogoAndProgressLogoFadeInDelay()}\n              onChange={value => {\n                loadingScreen.setLogoAndProgressLogoFadeInDelay(\n                  Math.max(0, parseFloat(value))\n                );\n                forceUpdate();\n              }}\n            />\n            <SemiControlledTextField\n              floatingLabelText={\n                <Trans>Logo and progress fade in duration (in seconds)</Trans>\n              }\n              step={0.1}\n              fullWidth\n              type=\"number\"\n              value={'' + loadingScreen.getLogoAndProgressFadeInDuration()}\n              onChange={value => {\n                loadingScreen.setLogoAndProgressFadeInDuration(\n                  Math.max(0, parseFloat(value))\n                );\n                forceUpdate();\n              }}\n            />\n          </ResponsiveLineStackLayout>\n          <Text size=\"title\">\n            <Trans>Progress bar</Trans>\n          </Text>\n          <Checkbox\n            label={<Trans>Show progress bar</Trans>}\n            checked={loadingScreen.getShowProgressBar()}\n            onCheck={(e, checked) => {\n              loadingScreen.setShowProgressBar(checked);\n              forceUpdate();\n            }}\n          />\n          <ResponsiveLineStackLayout noMargin>\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Progress bar minimum width</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + loadingScreen.getProgressBarMinWidth()}\n              onChange={value => {\n                loadingScreen.setProgressBarMinWidth(\n                  Math.max(0, parseFloat(value))\n                );\n                forceUpdate();\n              }}\n              helperMarkdownText={i18n._(t`In pixels. 0 to ignore.`)}\n            />\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Progress bar width</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + loadingScreen.getProgressBarWidthPercent()}\n              onChange={value => {\n                loadingScreen.setProgressBarWidthPercent(\n                  Math.min(100, Math.max(1, parseFloat(value)))\n                );\n                forceUpdate();\n              }}\n              helperMarkdownText={i18n._(t`As a percent of the game width.`)}\n            />\n            <SemiControlledTextField\n              floatingLabelText={<Trans>Progress bar maximum width</Trans>}\n              fullWidth\n              type=\"number\"\n              value={'' + loadingScreen.getProgressBarMaxWidth()}\n              onChange={value => {\n                loadingScreen.setProgressBarMaxWidth(\n                  Math.max(0, parseFloat(value))\n                );\n                forceUpdate();\n              }}\n              helperMarkdownText={i18n._(t`In pixels. 0 to ignore.`)}\n            />\n          </ResponsiveLineStackLayout>\n          <SemiControlledTextField\n            floatingLabelText={<Trans>Progress bar height</Trans>}\n            fullWidth\n            type=\"number\"\n            value={'' + loadingScreen.getProgressBarHeight()}\n            onChange={value => {\n              loadingScreen.setProgressBarHeight(\n                Math.max(1, parseFloat(value))\n              );\n              forceUpdate();\n            }}\n          />\n          <ColorField\n            fullWidth\n            floatingLabelText={<Trans>Progress bar color</Trans>}\n            disableAlpha\n            color={hexNumberToRGBString(loadingScreen.getProgressBarColor())}\n            onChange={color => {\n              loadingScreen.setProgressBarColor(rgbStringToHexNumber(color));\n              forceUpdate();\n            }}\n          />\n          <Text size=\"title\">\n            <Trans>Duration</Trans>\n          </Text>\n          <SemiControlledTextField\n            floatingLabelText={\n              <Trans>Minimum duration of the screen (in seconds)</Trans>\n            }\n            step={0.1}\n            fullWidth\n            type=\"number\"\n            value={'' + loadingScreen.getMinDuration()}\n            onChange={value => {\n              loadingScreen.setMinDuration(Math.max(0, parseFloat(value)));\n              forceUpdate();\n            }}\n            helperMarkdownText={i18n._(\n              t`When previewing the game in the editor, this duration is ignored (the game preview starts as soon as possible).`\n            )}\n          />\n          <SubscriptionChecker\n            ref={subscriptionChecker}\n            onChangeSubscription={onChangeSubscription}\n            mode=\"mandatory\"\n            id=\"Disable GDevelop splash at startup\"\n            title={<Trans>Disable GDevelop splash at startup</Trans>}\n          />\n        </ColumnStackLayout>\n      )}\n    </I18n>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport Checkbox from '../UI/Checkbox';\nimport SelectField from '../UI/SelectField';\nimport SelectOption from '../UI/SelectOption';\nimport Dialog from '../UI/Dialog';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport {\n  getProjectPropertiesErrors,\n  displayProjectErrorsBox,\n  validatePackageName,\n} from '../Utils/ProjectErrorsChecker';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport HelpButton from '../UI/HelpButton';\nimport { ResponsiveLineStackLayout, ColumnStackLayout } from '../UI/Layout';\nimport Text from '../UI/Text';\nimport ExtensionsProperties from './ExtensionsProperties';\nimport { useSerializableObjectCancelableEditor } from '../Utils/SerializableObjectCancelableEditor';\nimport RaisedButton from '../UI/RaisedButton';\nimport Window from '../Utils/Window';\nimport { I18n } from '@lingui/react';\nimport AlertMessage from '../UI/AlertMessage';\nimport { GameRegistration } from '../GameDashboard/GameRegistration';\nimport { Tab, Tabs } from '../UI/Tabs';\nimport { LoadingScreenEditor } from './LoadingScreenEditor';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport {\n  type HotReloadPreviewButtonProps,\n  NewPreviewIcon,\n} from '../HotReload/HotReloadPreviewButton';\nimport { UsersAutocomplete } from '../Utils/UsersAutocomplete';\n\ntype Props = {|\n  project: gdProject,\n  open: boolean,\n  initialTab: 'properties' | 'loading-screen',\n  onClose: Function,\n  onApply: Function,\n  onChangeSubscription: () => void,\n  hotReloadPreviewButtonProps?: ?HotReloadPreviewButtonProps,\n\n  // For resources:\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\ntype ProjectProperties = {|\n  gameResolutionWidth: number,\n  gameResolutionHeight: number,\n  adaptGameResolutionAtRuntime: boolean,\n  name: string,\n  author: string,\n  authorIds: gdVectorString,\n  version: string,\n  packageName: string,\n  orientation: string,\n  scaleMode: string,\n  pixelsRounding: boolean,\n  sizeOnStartupMode: string,\n  minFPS: number,\n  maxFPS: number,\n  isFolderProject: boolean,\n  useDeprecatedZeroAsDefaultZOrder: boolean,\n|};\n\nfunction loadPropertiesFromProject(project: gdProject): ProjectProperties {\n  return {\n    gameResolutionWidth: project.getGameResolutionWidth(),\n    gameResolutionHeight: project.getGameResolutionHeight(),\n    adaptGameResolutionAtRuntime: project.getAdaptGameResolutionAtRuntime(),\n    name: project.getName(),\n    author: project.getAuthor(),\n    authorIds: project.getAuthorIds(),\n    version: project.getVersion(),\n    packageName: project.getPackageName(),\n    orientation: project.getOrientation(),\n    scaleMode: project.getScaleMode(),\n    pixelsRounding: project.getPixelsRounding(),\n    sizeOnStartupMode: project.getSizeOnStartupMode(),\n    minFPS: project.getMinimumFPS(),\n    maxFPS: project.getMaximumFPS(),\n    isFolderProject: project.isFolderProject(),\n    useDeprecatedZeroAsDefaultZOrder: project.getUseDeprecatedZeroAsDefaultZOrder(),\n  };\n}\n\nfunction applyPropertiesToProject(\n  project: gdProject,\n  newProperties: ProjectProperties\n) {\n  const t = str => str; //TODO\n  const {\n    gameResolutionWidth,\n    gameResolutionHeight,\n    adaptGameResolutionAtRuntime,\n    name,\n    author,\n    version,\n    packageName,\n    orientation,\n    scaleMode,\n    pixelsRounding,\n    sizeOnStartupMode,\n    minFPS,\n    maxFPS,\n    isFolderProject,\n    useDeprecatedZeroAsDefaultZOrder,\n  } = newProperties;\n  project.setGameResolutionSize(gameResolutionWidth, gameResolutionHeight);\n  project.setAdaptGameResolutionAtRuntime(adaptGameResolutionAtRuntime);\n  project.setName(name);\n  project.setAuthor(author);\n  project.setVersion(version);\n  project.setPackageName(packageName);\n  project.setOrientation(orientation);\n  project.setScaleMode(scaleMode);\n  project.setPixelsRounding(pixelsRounding);\n  project.setSizeOnStartupMode(sizeOnStartupMode);\n  project.setMinimumFPS(minFPS);\n  project.setMaximumFPS(maxFPS);\n  project.setFolderProject(isFolderProject);\n  project.setUseDeprecatedZeroAsDefaultZOrder(useDeprecatedZeroAsDefaultZOrder);\n\n  return displayProjectErrorsBox(t, getProjectPropertiesErrors(t, project));\n}\n\nfunction ProjectPropertiesDialog(props: Props) {\n  const { project, hotReloadPreviewButtonProps } = props;\n\n  const initialProperties = React.useMemo(\n    () => loadPropertiesFromProject(project),\n    [project]\n  );\n  let [name, setName] = React.useState(initialProperties.name);\n  let [gameResolutionWidth, setGameResolutionWidth] = React.useState(\n    initialProperties.gameResolutionWidth\n  );\n  let [gameResolutionHeight, setGameResolutionHeight] = React.useState(\n    initialProperties.gameResolutionHeight\n  );\n  let [\n    adaptGameResolutionAtRuntime,\n    setAdaptGameResolutionAtRuntime,\n  ] = React.useState(initialProperties.adaptGameResolutionAtRuntime);\n  let [author, setAuthor] = React.useState(initialProperties.author);\n  let [version, setVersion] = React.useState(initialProperties.version);\n  let [packageName, setPackageName] = React.useState(\n    initialProperties.packageName\n  );\n  let [orientation, setOrientation] = React.useState(\n    initialProperties.orientation\n  );\n  let [scaleMode, setScaleMode] = React.useState(initialProperties.scaleMode);\n  let [pixelsRounding, setPixelsRounding] = React.useState(\n    initialProperties.pixelsRounding\n  );\n  let [sizeOnStartupMode, setSizeOnStartupMode] = React.useState(\n    initialProperties.sizeOnStartupMode\n  );\n  let [minFPS, setMinFPS] = React.useState(initialProperties.minFPS);\n  let [maxFPS, setMaxFPS] = React.useState(initialProperties.maxFPS);\n  let [isFolderProject, setIsFolderProject] = React.useState(\n    initialProperties.isFolderProject\n  );\n  let [\n    useDeprecatedZeroAsDefaultZOrder,\n    setUseDeprecatedZeroAsDefaultZOrder,\n  ] = React.useState(initialProperties.useDeprecatedZeroAsDefaultZOrder);\n\n  const defaultPackageName = 'com.example.mygame';\n  const defaultVersion = '1.0.0';\n\n  const [currentTab, setCurrentTab] = React.useState<\n    'properties' | 'loading-screen'\n  >(props.initialTab);\n\n  const onCancelLoadingScreenChanges = useSerializableObjectCancelableEditor({\n    serializableObject: project.getLoadingScreen(),\n    onCancel: props.onClose,\n  });\n  const onCancelChanges = useSerializableObjectCancelableEditor({\n    serializableObject: project.getExtensionProperties(),\n    onCancel: onCancelLoadingScreenChanges,\n  });\n\n  const onApply = () => {\n    if (\n      applyPropertiesToProject(project, {\n        gameResolutionWidth,\n        gameResolutionHeight,\n        adaptGameResolutionAtRuntime,\n        name,\n        author,\n        authorIds: project.getAuthorIds(),\n        version,\n        packageName,\n        orientation,\n        scaleMode,\n        pixelsRounding,\n        sizeOnStartupMode,\n        minFPS,\n        maxFPS,\n        isFolderProject,\n        useDeprecatedZeroAsDefaultZOrder,\n      })\n    )\n      props.onApply();\n  };\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <React.Fragment>\n          <Dialog\n            onApply={onApply}\n            actions={[\n              <FlatButton\n                label={<Trans>Cancel</Trans>}\n                primary={false}\n                onClick={onCancelChanges}\n                key=\"cancel\"\n              />,\n              <FlatButton\n                label={<Trans>Apply</Trans>}\n                primary={true}\n                onClick={onApply}\n                key=\"apply\"\n              />,\n            ]}\n            secondaryActions={[\n              <HelpButton\n                helpPagePath=\"/interface/project-manager/properties\"\n                key=\"help\"\n              />,\n              hotReloadPreviewButtonProps ? (\n                <FlatButton\n                  key=\"hot-reload-preview-button\"\n                  icon={<NewPreviewIcon />}\n                  label={<Trans>Run a preview (with loading screen)</Trans>}\n                  onClick={\n                    hotReloadPreviewButtonProps.launchProjectWithLoadingScreenPreview\n                  }\n                />\n              ) : null,\n            ]}\n            noTitleMargin\n            open={props.open}\n            onRequestClose={onCancelChanges}\n            fullHeight\n            flexBody\n            title={\n              <div>\n                <Tabs value={currentTab} onChange={setCurrentTab}>\n                  <Tab\n                    label={<Trans>Properties</Trans>}\n                    value={'properties'}\n                    key={'properties'}\n                  />\n                  <Tab\n                    label={<Trans>Loading Screen</Trans>}\n                    value={'loading-screen'}\n                    key={'loading-screen'}\n                  />\n                </Tabs>\n              </div>\n            }\n          >\n            {currentTab === 'properties' && (\n              <ColumnStackLayout expand noMargin>\n                <SemiControlledTextField\n                  floatingLabelText={<Trans>Game name</Trans>}\n                  fullWidth\n                  type=\"text\"\n                  value={name}\n                  onChange={setName}\n                  autoFocus\n                />\n                <SemiControlledTextField\n                  floatingLabelText={<Trans>Version number (X.Y.Z)</Trans>}\n                  fullWidth\n                  hintText={defaultVersion}\n                  type=\"text\"\n                  value={version}\n                  onChange={setVersion}\n                />\n                <SemiControlledTextField\n                  floatingLabelText={\n                    <Trans>Package name (for iOS and Android)</Trans>\n                  }\n                  fullWidth\n                  hintText={defaultPackageName}\n                  type=\"text\"\n                  value={packageName}\n                  onChange={setPackageName}\n                  errorText={\n                    validatePackageName(packageName) ? (\n                      undefined\n                    ) : (\n                      <Trans>\n                        The package name is containing invalid characters or not\n                        following the convention \"xxx.yyy.zzz\" (numbers allowed\n                        after a letter only).\n                      </Trans>\n                    )\n                  }\n                />\n                <UsersAutocomplete\n                  userIds={project.getAuthorIds()}\n                  floatingLabelText={<Trans>Authors</Trans>}\n                  helperText={\n                    <Trans>\n                      Select the usernames of the authors of this project. They\n                      will be displayed in the selected order, if you publish\n                      this game as an example or in the community.\n                    </Trans>\n                  }\n                />\n                {useDeprecatedZeroAsDefaultZOrder ? (\n                  <React.Fragment>\n                    <Text size=\"title\">\n                      <Trans>Z Order of objects created from events</Trans>\n                    </Text>\n                    <AlertMessage kind=\"info\">\n                      <Trans>\n                        When you create an object using an action, GDevelop now\n                        sets the Z order of the object to the maximum value that\n                        was found when starting the scene for each layer. This\n                        allow to make sure that objects that you create are in\n                        front of others. This game was created before this\n                        change, so GDevelop maintains the old behavior: newly\n                        created objects Z order is set to 0. It's recommended\n                        that you switch to the new behavior by clicking the\n                        following button.\n                      </Trans>\n                    </AlertMessage>\n                    <RaisedButton\n                      onClick={() => {\n                        const answer = Window.showConfirmDialog(\n                          i18n._(\n                            t`Make sure to verify all your events creating objects, and optionally add an action to set the Z order back to 0 if it's important for your game. Do you want to continue (recommened)?`\n                          )\n                        );\n                        if (!answer) return;\n\n                        setUseDeprecatedZeroAsDefaultZOrder(false);\n                      }}\n                      label={\n                        <Trans>\n                          Switch to create objects with the highest Z order of\n                          the layer\n                        </Trans>\n                      }\n                    />\n                  </React.Fragment>\n                ) : null}\n                <Text size=\"title\">\n                  <Trans>Analytics</Trans>\n                </Text>\n                <GameRegistration project={project} />\n                <Text size=\"title\">\n                  <Trans>Resolution and rendering</Trans>\n                </Text>\n                <ResponsiveLineStackLayout noMargin>\n                  <SemiControlledTextField\n                    floatingLabelText={<Trans>Game resolution width</Trans>}\n                    fullWidth\n                    type=\"number\"\n                    value={'' + gameResolutionWidth}\n                    onChange={value =>\n                      setGameResolutionWidth(Math.max(1, parseInt(value, 10)))\n                    }\n                  />\n                  <SemiControlledTextField\n                    floatingLabelText={<Trans>Game resolution height</Trans>}\n                    fullWidth\n                    type=\"number\"\n                    value={'' + gameResolutionHeight}\n                    onChange={value =>\n                      setGameResolutionHeight(Math.max(1, parseInt(value, 10)))\n                    }\n                  />\n                </ResponsiveLineStackLayout>\n                <SelectField\n                  fullWidth\n                  floatingLabelText={\n                    <Trans>\n                      Game resolution resize mode (fullscreen or window)\n                    </Trans>\n                  }\n                  value={sizeOnStartupMode}\n                  onChange={(e, i, value: string) =>\n                    setSizeOnStartupMode(value)\n                  }\n                >\n                  <SelectOption\n                    value=\"\"\n                    primaryText={t`No changes to the game size`}\n                  />\n                  <SelectOption\n                    value=\"adaptWidth\"\n                    primaryText={t`Change width to fit the screen or window size`}\n                  />\n                  <SelectOption\n                    value=\"adaptHeight\"\n                    primaryText={t`Change height to fit the screen or window size`}\n                  />\n                </SelectField>\n                <Checkbox\n                  label={\n                    <Trans>\n                      Update resolution during the game to fit the screen or\n                      window size\n                    </Trans>\n                  }\n                  disabled={sizeOnStartupMode === ''}\n                  checked={adaptGameResolutionAtRuntime}\n                  onCheck={(e, checked) =>\n                    setAdaptGameResolutionAtRuntime(checked)\n                  }\n                />\n                <ResponsiveLineStackLayout noMargin>\n                  <SemiControlledTextField\n                    floatingLabelText={<Trans>Minimum FPS</Trans>}\n                    fullWidth\n                    type=\"number\"\n                    value={'' + minFPS}\n                    onChange={value =>\n                      setMinFPS(Math.max(0, parseInt(value, 10)))\n                    }\n                  />\n                  <SemiControlledTextField\n                    floatingLabelText={\n                      <Trans>Maximum FPS (0 for unlimited)</Trans>\n                    }\n                    fullWidth\n                    type=\"number\"\n                    value={'' + maxFPS}\n                    onChange={value =>\n                      setMaxFPS(Math.max(0, parseInt(value, 10)))\n                    }\n                  />\n                </ResponsiveLineStackLayout>\n                {maxFPS > 0 && maxFPS < 60 && (\n                  <DismissableAlertMessage\n                    identifier=\"maximum-fps-too-low\"\n                    kind=\"warning\"\n                  >\n                    <Trans>\n                      Most monitors have a refresh rate of 60 FPS. Setting a\n                      maximum number of FPS under 60 will force the game to skip\n                      frames, and the real number of FPS will be way below 60,\n                      making the game laggy and impacting the gameplay\n                      negatively. Consider putting 60 or more for the maximum\n                      number or FPS, or disable it by setting 0.\n                    </Trans>\n                  </DismissableAlertMessage>\n                )}\n                {minFPS < 20 && (\n                  <DismissableAlertMessage\n                    identifier=\"minimum-fps-too-low\"\n                    kind=\"warning\"\n                  >\n                    <Trans>\n                      Setting the minimum number of FPS below 20 will increase a\n                      lot the time that is allowed between the simulation of two\n                      frames of the game. If case of a sudden slowdown, or on\n                      slow computers, this can create buggy behaviors like\n                      objects passing beyond a wall. Consider setting 20 as the\n                      minimum FPS.\n                    </Trans>\n                  </DismissableAlertMessage>\n                )}\n                <SelectField\n                  fullWidth\n                  floatingLabelText={\n                    <Trans>Device orientation (for iOS and Android)</Trans>\n                  }\n                  value={orientation}\n                  onChange={(e, i, value: string) => setOrientation(value)}\n                >\n                  <SelectOption\n                    value=\"default\"\n                    primaryText={t`Platform default`}\n                  />\n                  <SelectOption value=\"landscape\" primaryText={t`Landscape`} />\n                  <SelectOption value=\"portrait\" primaryText={t`Portrait`} />\n                </SelectField>\n                <SelectField\n                  fullWidth\n                  floatingLabelText={\n                    <Trans>Scale mode (also called \"Sampling\")</Trans>\n                  }\n                  value={scaleMode}\n                  onChange={(e, i, value: string) => setScaleMode(value)}\n                >\n                  <SelectOption\n                    value=\"linear\"\n                    primaryText={t`Linear (antialiased rendering, good for most games)`}\n                  />\n                  <SelectOption\n                    value=\"nearest\"\n                    primaryText={t`Nearest (no antialiasing, good for pixel perfect games)`}\n                  />\n                </SelectField>\n                <Checkbox\n                  label={\n                    <Trans>\n                      Round pixels when rendering, useful for pixel perfect\n                      games.\n                    </Trans>\n                  }\n                  checked={pixelsRounding}\n                  onCheck={(e, checked) => setPixelsRounding(checked)}\n                />\n                {scaleMode === 'nearest' && (\n                  <DismissableAlertMessage\n                    identifier=\"use-non-smoothed-textures\"\n                    kind=\"info\"\n                  >\n                    <Trans>\n                      To obtain the best pixel-perfect effect possible, go in\n                      the resources editor and disable the Smoothing for all\n                      images of your game. It will be done automatically for new\n                      images added from now.\n                    </Trans>\n                  </DismissableAlertMessage>\n                )}\n                <Text size=\"title\">\n                  <Trans>Publishing</Trans>\n                </Text>\n                <SemiControlledTextField\n                  floatingLabelText={<Trans>Publisher name</Trans>}\n                  fullWidth\n                  hintText={t`Your name`}\n                  helperMarkdownText={i18n._(\n                    t`This will be used when packaging and submitting your application to the stores.`\n                  )}\n                  type=\"text\"\n                  value={author}\n                  onChange={setAuthor}\n                />\n                <Text size=\"title\">\n                  <Trans>Project files</Trans>\n                </Text>\n                <SelectField\n                  fullWidth\n                  floatingLabelText={<Trans>Project file type</Trans>}\n                  value={isFolderProject ? 'folder-project' : 'single-file'}\n                  onChange={(e, i, value: string) =>\n                    setIsFolderProject(value === 'folder-project')\n                  }\n                >\n                  <SelectOption\n                    value={'single-file'}\n                    primaryText={t`Single file (default)`}\n                  />\n                  <SelectOption\n                    value={'folder-project'}\n                    primaryText={t`Multiple files, saved in folder next to the main file`}\n                  />\n                </SelectField>\n                <ExtensionsProperties project={project} />\n              </ColumnStackLayout>\n            )}\n            {currentTab === 'loading-screen' && (\n              <LoadingScreenEditor\n                loadingScreen={project.getLoadingScreen()}\n                onChangeSubscription={() => {\n                  onCancelChanges();\n                  props.onChangeSubscription();\n                }}\n                project={project}\n                resourceSources={props.resourceSources}\n                onChooseResource={props.onChooseResource}\n                resourceExternalEditors={props.resourceExternalEditors}\n              />\n            )}\n          </Dialog>\n        </React.Fragment>\n      )}\n    </I18n>\n  );\n}\n\nexport default ProjectPropertiesDialog;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport CloudDownload from '@material-ui/icons/CloudDownload';\nimport { ExtensionStore } from '.';\nimport EventsFunctionsExtensionsContext from '../../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport HelpButton from '../../UI/HelpButton';\nimport { importExtension, installExtension } from './InstallExtension';\nimport InfoBar from '../../UI/Messages/InfoBar';\nimport { type ExtensionShortHeader } from '../../Utils/GDevelopServices/Extension';\nimport AuthenticatedUserContext from '../../Profile/AuthenticatedUserContext';\nimport {\n  ACHIEVEMENT_FEATURE_FLAG,\n  addCreateBadgePreHookIfNotClaimed,\n  TRIVIAL_FIRST_EXTENSION,\n} from '../../Utils/GDevelopServices/Badge';\n\ntype Props = {|\n  project: gdProject,\n  onClose: () => void,\n  onInstallExtension: ExtensionShortHeader => void,\n|};\n\n/**\n * Allows to browse and install events based extensions.\n */\nexport default function ExtensionsSearchDialog({\n  project,\n  onClose,\n  onInstallExtension,\n}: Props) {\n  const [isInstalling, setIsInstalling] = React.useState(false);\n  const [extensionWasInstalled, setExtensionWasInstalled] = React.useState(\n    false\n  );\n  const eventsFunctionsExtensionsState = React.useContext(\n    EventsFunctionsExtensionsContext\n  );\n  const authenticatedUser = React.useContext(AuthenticatedUserContext);\n\n  const installDisplayedExtension = ACHIEVEMENT_FEATURE_FLAG\n    ? addCreateBadgePreHookIfNotClaimed(\n        authenticatedUser,\n        TRIVIAL_FIRST_EXTENSION,\n        installExtension\n      )\n    : installExtension;\n\n  const eventsFunctionsExtensionOpener = eventsFunctionsExtensionsState.getEventsFunctionsExtensionOpener();\n\n  return (\n    <I18n>\n      {({ i18n }) => (\n        <Dialog\n          title={<Trans>Search for New Extensions</Trans>}\n          actions={[\n            <FlatButton\n              key=\"close\"\n              label={<Trans>Close</Trans>}\n              primary\n              onClick={onClose}\n              disabled={isInstalling}\n            />,\n          ]}\n          secondaryActions={[\n            <HelpButton key=\"help\" helpPagePath=\"/extensions/search\" />,\n            eventsFunctionsExtensionOpener ? (\n              <FlatButton\n                icon={<CloudDownload />}\n                key=\"import\"\n                label={<Trans>Import extension</Trans>}\n                onClick={() => {\n                  (async () => {\n                    setIsInstalling(true);\n                    const wasExtensionImported = await importExtension(\n                      i18n,\n                      eventsFunctionsExtensionsState,\n                      project\n                    );\n                    setExtensionWasInstalled(wasExtensionImported);\n                    setIsInstalling(false);\n                  })();\n                }}\n                disabled={isInstalling}\n              />\n            ) : null,\n          ]}\n          cannotBeDismissed={true}\n          flexBody\n          open\n          noMargin\n          onRequestClose={onClose}\n        >\n          <ExtensionStore\n            isInstalling={isInstalling}\n            onInstall={async extensionShortHeader => {\n              setIsInstalling(true);\n              onInstallExtension(extensionShortHeader);\n              const wasExtensionInstalled = await installDisplayedExtension(\n                i18n,\n                project,\n                eventsFunctionsExtensionsState,\n                extensionShortHeader\n              );\n\n              setExtensionWasInstalled(wasExtensionInstalled);\n              setIsInstalling(false);\n            }}\n            project={project}\n            showOnlyWithBehaviors={false}\n          />\n          <InfoBar\n            identifier=\"extension-installed-explanation\"\n            message={\n              <Trans>\n                The extension was added to the project. You can now use it in\n                the list of actions/conditions and, if it's a behavior, in the\n                list of behaviors for an object.\n              </Trans>\n            }\n            show={extensionWasInstalled}\n          />\n        </Dialog>\n      )}\n    </I18n>\n  );\n}\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\n// This is \"AccountTree\" material icon.\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z\" />\n  </SvgIcon>\n));\n","// @flow\nimport { useCommand } from '../CommandPalette/CommandHooks';\n\ntype Props = {|\n  project: ?gdProject,\n  onOpenProjectProperties: () => void,\n  onOpenProjectLoadingScreen: () => void,\n  onOpenProjectVariables: () => void,\n  onOpenResourcesDialog: () => void,\n  onOpenSearchExtensionDialog: () => void,\n  onOpenPlatformSpecificAssetsDialog: () => void,\n|};\n\nconst ProjectManagerCommands = (props: Props) => {\n  useCommand('OPEN_PROJECT_PROPERTIES', !!props.project, {\n    handler: props.onOpenProjectProperties,\n  });\n  useCommand('OPEN_PROJECT_LOADING_SCREEN', !!props.project, {\n    handler: props.onOpenProjectLoadingScreen,\n  });\n\n  useCommand('OPEN_PROJECT_VARIABLES', !!props.project, {\n    handler: props.onOpenProjectVariables,\n  });\n\n  useCommand('OPEN_PLATFORM_SPECIFIC_ASSETS_DIALOG', !!props.project, {\n    handler: props.onOpenPlatformSpecificAssetsDialog,\n  });\n\n  useCommand('OPEN_PROJECT_RESOURCES', !!props.project, {\n    handler: props.onOpenResourcesDialog,\n  });\n\n  useCommand('OPEN_SEARCH_EXTENSIONS_DIALOG', !!props.project, {\n    handler: props.onOpenSearchExtensionDialog,\n  });\n\n  return null;\n};\n\nexport default ProjectManagerCommands;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { List, ListItem } from '../UI/List';\nimport TextField, {\n  noMarginTextFieldInListItemTopOffset,\n} from '../UI/TextField';\nimport SearchBar, { useShouldAutofocusSearchbar } from '../UI/SearchBar';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ListIcon from '../UI/ListIcon';\nimport { AddListItem, SearchListItem } from '../UI/ListCommonItem';\nimport Window from '../Utils/Window';\nimport VariablesEditorDialog from '../VariablesList/VariablesEditorDialog';\nimport ProjectPropertiesDialog from './ProjectPropertiesDialog';\nimport {\n  enumerateLayouts,\n  enumerateExternalEvents,\n  enumerateExternalLayouts,\n  enumerateEventsFunctionsExtensions,\n  filterProjectItemsList,\n} from './EnumerateProjectItems';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport ThemeConsumer from '../UI/Theme/ThemeConsumer';\nimport ExtensionsSearchDialog from '../AssetStore/ExtensionStore/ExtensionsSearchDialog';\nimport Close from '@material-ui/icons/Close';\nimport SettingsApplications from '@material-ui/icons/SettingsApplications';\nimport PhotoLibrary from '@material-ui/icons/PhotoLibrary';\nimport Settings from '@material-ui/icons/Settings';\nimport Save from '@material-ui/icons/Save';\nimport VariableTree from '../UI/CustomSvgIcons/VariableTree';\nimport ArtTrack from '@material-ui/icons/ArtTrack';\nimport AddToHomeScreen from '@material-ui/icons/AddToHomeScreen';\nimport FileCopy from '@material-ui/icons/FileCopy';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport ScenePropertiesDialog from '../SceneEditor/ScenePropertiesDialog';\nimport SceneVariablesDialog from '../SceneEditor/SceneVariablesDialog';\nimport { isExtensionNameTaken } from './EventFunctionExtensionNameVerifier';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport { type MenuItemTemplate } from '../UI/Menu/Menu.flow';\nimport ProjectManagerCommands from './ProjectManagerCommands';\nimport { type HotReloadPreviewButtonProps } from '../HotReload/HotReloadPreviewButton';\nimport { shouldValidate } from '../UI/KeyboardShortcuts/InteractionKeys';\nimport { type ExtensionShortHeader } from '../Utils/GDevelopServices/Extension';\nimport EventsRootVariablesFinder from '../Utils/EventsRootVariablesFinder';\nimport { IconContainer } from '../UI/IconContainer';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { textEllispsisStyle } from '../UI/TextEllipsis';\n\nconst LAYOUT_CLIPBOARD_KIND = 'Layout';\nconst EXTERNAL_LAYOUT_CLIPBOARD_KIND = 'External layout';\nconst EXTERNAL_EVENTS_CLIPBOARD_KIND = 'External events';\nconst EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND = 'Events Functions Extension';\n\nconst styles = {\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    overflowY: 'hidden',\n  },\n  list: {\n    flex: 1,\n    overflowY: 'scroll',\n    padding: 0,\n  },\n  noIndentNestedList: {\n    padding: 0,\n  },\n  itemTextField: {\n    top: noMarginTextFieldInListItemTopOffset,\n  },\n};\n\ntype ProjectStructureItemProps = {|\n  autoGenerateNestedIndicator?: boolean,\n  initiallyOpen?: boolean,\n  leftIcon?: React$Element<any>,\n  indentNestedItems?: boolean,\n  renderNestedItems: () => Array<React$Element<any> | null>,\n  primaryText: React.Node,\n  error?: ?Error,\n  onRefresh?: () => void,\n  open?: boolean,\n|};\n\nconst ProjectStructureItem = (props: ProjectStructureItemProps) => (\n  <ThemeConsumer>\n    {muiTheme => {\n      const {\n        error,\n        leftIcon,\n        onRefresh,\n        indentNestedItems,\n        ...otherProps\n      } = props;\n      return (\n        <ListItem\n          style={{\n            backgroundColor: muiTheme.listItem.groupBackgroundColor,\n            borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n          }}\n          nestedListStyle={\n            indentNestedItems ? undefined : styles.noIndentNestedList\n          }\n          {...otherProps}\n          leftIcon={error ? <WarningIcon /> : leftIcon}\n          displayReloadButton={!!error}\n          onReload={onRefresh}\n          reloadButtonTooltip={`An error has occured in functions. Click to reload them.`}\n        />\n      );\n    }}\n  </ThemeConsumer>\n);\n\ntype ItemProps = {|\n  primaryText: string,\n  editingName: boolean,\n  leftIcon?: ?React.Node,\n  onEdit: () => void,\n  onDelete: () => void,\n  addLabel: string,\n  onAdd: () => void,\n  onRename: string => void,\n  onEditName: () => void,\n  onCopy: () => void,\n  onCut: () => void,\n  onPaste: () => void,\n  onDuplicate: () => void,\n  canPaste: () => boolean,\n  canMoveUp: boolean,\n  onMoveUp: () => void,\n  canMoveDown: boolean,\n  onMoveDown: () => void,\n  buildExtraMenuTemplate?: (i18n: I18nType) => Array<MenuItemTemplate>,\n  style?: ?Object,\n|};\n\nclass Item extends React.Component<ItemProps, {||}> {\n  textField: ?Object;\n\n  componentDidUpdate(prevProps) {\n    if (!prevProps.editingName && this.props.editingName) {\n      setTimeout(() => {\n        if (this.textField) this.textField.focus();\n      }, 100);\n    }\n  }\n\n  render() {\n    const label = this.props.editingName ? (\n      <TextField\n        id=\"rename-item-field\"\n        margin=\"none\"\n        ref={textField => (this.textField = textField)}\n        defaultValue={this.props.primaryText}\n        onBlur={e => this.props.onRename(e.currentTarget.value)}\n        onKeyPress={event => {\n          if (shouldValidate(event)) {\n            if (this.textField) this.textField.blur();\n          }\n        }}\n        fullWidth\n        style={styles.itemTextField}\n      />\n    ) : (\n      <div style={textEllispsisStyle} title={this.props.primaryText}>\n        {this.props.primaryText}\n      </div>\n    );\n\n    return (\n      <ThemeConsumer>\n        {muiTheme => (\n          <I18n>\n            {({ i18n }) => (\n              <ListItem\n                style={{\n                  borderBottom: `1px solid ${muiTheme.listItem.separatorColor}`,\n                  ...this.props.style,\n                }}\n                primaryText={label}\n                leftIcon={this.props.leftIcon}\n                displayMenuButton\n                buildMenuTemplate={(i18n: I18nType) => [\n                  {\n                    label: i18n._(t`Edit`),\n                    click: () => this.props.onEdit(),\n                  },\n                  ...(this.props.buildExtraMenuTemplate\n                    ? this.props.buildExtraMenuTemplate(i18n)\n                    : []),\n                  { type: 'separator' },\n                  {\n                    label: i18n._(t`Rename`),\n                    click: () => this.props.onEditName(),\n                  },\n                  {\n                    label: i18n._(t`Delete`),\n                    click: () => this.props.onDelete(),\n                  },\n                  {\n                    label: this.props.addLabel,\n                    visible: !!this.props.onAdd,\n                    click: () => this.props.onAdd(),\n                  },\n                  { type: 'separator' },\n                  {\n                    label: i18n._(t`Copy`),\n                    click: () => this.props.onCopy(),\n                  },\n                  {\n                    label: i18n._(t`Cut`),\n                    click: () => this.props.onCut(),\n                  },\n                  {\n                    label: i18n._(t`Paste`),\n                    enabled: this.props.canPaste(),\n                    click: () => this.props.onPaste(),\n                  },\n                  {\n                    label: i18n._(t`Duplicate`),\n                    click: () => this.props.onDuplicate(),\n                  },\n                  { type: 'separator' },\n                  {\n                    label: i18n._(t`Move up`),\n                    enabled: this.props.canMoveUp,\n                    click: () => this.props.onMoveUp(),\n                  },\n                  {\n                    label: i18n._(t`Move down`),\n                    enabled: this.props.canMoveDown,\n                    click: () => this.props.onMoveDown(),\n                  },\n                ]}\n                onClick={() => {\n                  // It's essential to discard clicks when editing the name,\n                  // to avoid weird opening of an editor (accompanied with a\n                  // closing of the project manager) when clicking on the text\n                  // field.\n                  if (!this.props.editingName) this.props.onEdit();\n                }}\n              />\n            )}\n          </I18n>\n        )}\n      </ThemeConsumer>\n    );\n  }\n}\n\ntype Props = {|\n  project: gdProject,\n  onDeleteLayout: gdLayout => void,\n  onDeleteExternalEvents: gdExternalEvents => void,\n  onDeleteExternalLayout: gdExternalLayout => void,\n  onDeleteEventsFunctionsExtension: gdEventsFunctionsExtension => void,\n  onRenameLayout: (string, string) => void,\n  onRenameExternalEvents: (string, string) => void,\n  onRenameExternalLayout: (string, string) => void,\n  onRenameEventsFunctionsExtension: (string, string) => void,\n  onOpenLayout: string => void,\n  onOpenExternalEvents: string => void,\n  onOpenExternalLayout: string => void,\n  onOpenEventsFunctionsExtension: string => void,\n  onSaveProject: () => Promise<void>,\n  onSaveProjectAs: () => void,\n  onCloseProject: () => void,\n  onExportProject: () => void,\n  onOpenPreferences: () => void,\n  onOpenProfile: () => void,\n  onOpenGamesDashboard: () => void,\n  onOpenResources: () => void,\n  onAddLayout: () => void,\n  onAddExternalEvents: () => void,\n  onAddExternalLayout: () => void,\n  onAddEventsFunctionsExtension: () => void,\n  onOpenPlatformSpecificAssets: () => void,\n  onChangeSubscription: () => void,\n  eventsFunctionsExtensionsError: ?Error,\n  onReloadEventsFunctionsExtensions: () => void,\n  freezeUpdate: boolean,\n  unsavedChanges?: UnsavedChanges,\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n  onInstallExtension: ExtensionShortHeader => void,\n\n  // For resources:\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n|};\n\ntype State = {|\n  editedPropertiesLayout: ?gdLayout,\n  editedVariablesLayout: ?gdLayout,\n  renamedItemKind: ?string,\n  renamedItemName: string,\n  searchText: string,\n  projectPropertiesDialogOpen: boolean,\n  projectPropertiesDialogInitialTab: 'properties' | 'loading-screen',\n  projectVariablesEditorOpen: boolean,\n  extensionsSearchDialogOpen: boolean,\n  layoutPropertiesDialogOpen: boolean,\n  layoutVariablesDialogOpen: boolean,\n|};\n\nexport default class ProjectManager extends React.Component<Props, State> {\n  _searchBar: ?SearchBar;\n\n  state = {\n    editedPropertiesLayout: null,\n    editedVariablesLayout: null,\n    renamedItemKind: null,\n    renamedItemName: '',\n    searchText: '',\n    projectPropertiesDialogOpen: false,\n    projectPropertiesDialogInitialTab: 'properties',\n    projectVariablesEditorOpen: false,\n    extensionsSearchDialogOpen: false,\n    layoutPropertiesDialogOpen: false,\n    layoutVariablesDialogOpen: false,\n  };\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    if (\n      nextState.projectPropertiesDialogOpen !==\n        this.state.projectPropertiesDialogOpen ||\n      nextState.projectVariablesEditorOpen !==\n        this.state.projectVariablesEditorOpen ||\n      nextState.extensionsSearchDialogOpen !==\n        this.state.extensionsSearchDialogOpen\n    )\n      return true;\n\n    // Rendering the component is (super) costly (~20ms) as it iterates over\n    // every project layouts/external layouts/external events,\n    // so the prop freezeUpdate allow to ask the component to stop\n    // updating, for example when hidden.\n    return !nextProps.freezeUpdate;\n  }\n\n  componentDidUpdate(prevProps: Props) {\n    // Typical usage (don't forget to compare props):\n    if (!this.props.freezeUpdate && prevProps.freezeUpdate) {\n      if (useShouldAutofocusSearchbar() && this._searchBar)\n        this._searchBar.focus();\n    }\n  }\n\n  _openProjectProperties = () => {\n    this.setState({\n      projectPropertiesDialogOpen: true,\n      projectPropertiesDialogInitialTab: 'properties',\n    });\n  };\n\n  _openProjectLoadingScreen = () => {\n    this.setState({\n      projectPropertiesDialogOpen: true,\n      projectPropertiesDialogInitialTab: 'loading-screen',\n    });\n  };\n\n  _openProjectVariables = () => {\n    this.setState({\n      projectVariablesEditorOpen: true,\n    });\n  };\n\n  _openSearchExtensionDialog = () => {\n    this.setState({ extensionsSearchDialogOpen: true });\n  };\n\n  _onEditName = (kind: ?string, name: string) => {\n    this.setState({\n      renamedItemKind: kind,\n      renamedItemName: name,\n    });\n  };\n\n  _copyLayout = (layout: gdLayout) => {\n    Clipboard.set(LAYOUT_CLIPBOARD_KIND, {\n      layout: serializeToJSObject(layout),\n      name: layout.getName(),\n    });\n  };\n\n  _cutLayout = (layout: gdLayout) => {\n    this._copyLayout(layout);\n    this.props.onDeleteLayout(layout);\n  };\n\n  _pasteLayout = (index: number) => {\n    if (!Clipboard.has(LAYOUT_CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(LAYOUT_CLIPBOARD_KIND);\n    const copiedLayout = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'layout'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    if (!name || !copiedLayout) return;\n\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasLayoutNamed(name)\n    );\n\n    const newLayout = project.insertNewLayout(newName, index);\n\n    unserializeFromJSObject(\n      newLayout,\n      copiedLayout,\n      'unserializeFrom',\n      project\n    );\n    newLayout.setName(newName); // Unserialization has overwritten the name.\n    newLayout.updateBehaviorsSharedData(project);\n\n    this._onProjectItemModified();\n  };\n\n  _duplicateLayout = (layout: gdLayout, index: number) => {\n    this._copyLayout(layout);\n    this._pasteLayout(index);\n  };\n\n  _addLayout = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('New scene', name =>\n      project.hasLayoutNamed(name)\n    );\n    const newLayout = project.insertNewLayout(newName, index + 1);\n\n    newLayout.setName(newName);\n    newLayout.updateBehaviorsSharedData(project);\n\n    this._onProjectItemModified();\n  };\n\n  _onOpenLayoutProperties = (layout: ?gdLayout) => {\n    this.setState({ editedPropertiesLayout: layout });\n  };\n\n  _onOpenLayoutVariables = (layout: ?gdLayout) => {\n    this.setState({ editedVariablesLayout: layout });\n  };\n\n  _addExternalEvents = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('NewExternalEvents', name =>\n      project.hasExternalEventsNamed(name)\n    );\n    project.insertNewExternalEvents(newName, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _addExternalLayout = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('NewExternalLayout', name =>\n      project.hasExternalLayoutNamed(name)\n    );\n    project.insertNewExternalLayout(newName, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _addEventsFunctionsExtension = (index: number) => {\n    const { project } = this.props;\n\n    const newName = newNameGenerator('NewExtension', name =>\n      isExtensionNameTaken(name, project)\n    );\n    project.insertNewEventsFunctionsExtension(newName, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _moveUpLayout = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapLayouts(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownLayout = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getLayoutsCount() - 1) return;\n\n    project.swapLayouts(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _copyExternalEvents = (externalEvents: gdExternalEvents) => {\n    Clipboard.set(EXTERNAL_EVENTS_CLIPBOARD_KIND, {\n      externalEvents: serializeToJSObject(externalEvents),\n      name: externalEvents.getName(),\n    });\n  };\n\n  _cutExternalEvents = (externalEvents: gdExternalEvents) => {\n    this._copyExternalEvents(externalEvents);\n    this.props.onDeleteExternalEvents(externalEvents);\n  };\n\n  _pasteExternalEvents = (index: number) => {\n    if (!Clipboard.has(EXTERNAL_EVENTS_CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(EXTERNAL_EVENTS_CLIPBOARD_KIND);\n    const copiedExternalEvents = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'externalEvents'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    if (!name || !copiedExternalEvents) return;\n\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasExternalEventsNamed(name)\n    );\n\n    const newExternalEvents = project.insertNewExternalEvents(newName, index);\n\n    unserializeFromJSObject(\n      newExternalEvents,\n      copiedExternalEvents,\n      'unserializeFrom',\n      project\n    );\n    newExternalEvents.setName(newName); // Unserialization has overwritten the name.\n\n    this._onProjectItemModified();\n  };\n\n  _duplicateExternalEvents = (\n    externalEvents: gdExternalEvents,\n    index: number\n  ) => {\n    this._copyExternalEvents(externalEvents);\n    this._pasteExternalEvents(index);\n  };\n\n  _moveUpExternalEvents = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapExternalEvents(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownExternalEvents = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getExternalEventsCount() - 1) return;\n\n    project.swapExternalEvents(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _copyExternalLayout = (externalLayout: gdExternalLayout) => {\n    Clipboard.set(EXTERNAL_LAYOUT_CLIPBOARD_KIND, {\n      externalLayout: serializeToJSObject(externalLayout),\n      name: externalLayout.getName(),\n    });\n  };\n\n  _cutExternalLayout = (externalLayout: gdExternalLayout) => {\n    this._copyExternalLayout(externalLayout);\n    this.props.onDeleteExternalLayout(externalLayout);\n  };\n\n  _pasteExternalLayout = (index: number) => {\n    if (!Clipboard.has(EXTERNAL_LAYOUT_CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(EXTERNAL_LAYOUT_CLIPBOARD_KIND);\n    const copiedExternalLayout = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'externalLayout'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    if (!name || !copiedExternalLayout) return;\n\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      project.hasExternalLayoutNamed(name)\n    );\n\n    const newExternalLayout = project.insertNewExternalLayout(newName, index);\n\n    unserializeFromJSObject(newExternalLayout, copiedExternalLayout);\n    newExternalLayout.setName(newName); // Unserialization has overwritten the name.\n    this._onProjectItemModified();\n  };\n\n  _duplicateExternalLayout = (\n    externalLayout: gdExternalLayout,\n    index: number\n  ) => {\n    this._copyExternalLayout(externalLayout);\n    this._pasteExternalLayout(index);\n  };\n\n  _moveUpExternalLayout = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapExternalLayouts(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownExternalLayout = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getExternalLayoutsCount() - 1) return;\n\n    project.swapExternalLayouts(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _copyEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension\n  ) => {\n    Clipboard.set(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND, {\n      eventsFunctionsExtension: serializeToJSObject(eventsFunctionsExtension),\n      name: eventsFunctionsExtension.getName(),\n    });\n  };\n\n  _cutEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension\n  ) => {\n    this._copyEventsFunctionsExtension(eventsFunctionsExtension);\n    this.props.onDeleteEventsFunctionsExtension(eventsFunctionsExtension);\n  };\n\n  _duplicateEventsFunctionsExtension = (\n    eventsFunctionsExtension: gdEventsFunctionsExtension,\n    index: number\n  ) => {\n    this._copyEventsFunctionsExtension(eventsFunctionsExtension);\n    this._pasteEventsFunctionsExtension(index);\n  };\n\n  _pasteEventsFunctionsExtension = (index: number) => {\n    if (!Clipboard.has(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(\n      EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND\n    );\n    const copiedEventsFunctionsExtension = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'eventsFunctionsExtension'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    if (!name || !copiedEventsFunctionsExtension) return;\n\n    const { project } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      isExtensionNameTaken(name, project)\n    );\n\n    const newEventsFunctionsExtension = project.insertNewEventsFunctionsExtension(\n      newName,\n      index\n    );\n\n    unserializeFromJSObject(\n      newEventsFunctionsExtension,\n      copiedEventsFunctionsExtension,\n      'unserializeFrom',\n      project\n    );\n    newEventsFunctionsExtension.setName(newName); // Unserialization has overwritten the name.\n\n    this._onProjectItemModified();\n    this.props.onReloadEventsFunctionsExtensions();\n  };\n\n  _moveUpEventsFunctionsExtension = (index: number) => {\n    const { project } = this.props;\n    if (index <= 0) return;\n\n    project.swapEventsFunctionsExtensions(index, index - 1);\n    this._onProjectItemModified();\n  };\n\n  _moveDownEventsFunctionsExtension = (index: number) => {\n    const { project } = this.props;\n    if (index >= project.getEventsFunctionsExtensionsCount() - 1) return;\n\n    project.swapEventsFunctionsExtensions(index, index + 1);\n    this._onProjectItemModified();\n  };\n\n  _renderMenu() {\n    // If there is already a main menu (as the native one made with\n    // Electron), don't show it in the Project Manager.\n    if (Window.hasMainMenu()) return null;\n\n    return (\n      <React.Fragment>\n        <ListItem\n          key=\"save\"\n          primaryText={<Trans>Save</Trans>}\n          leftIcon={<Save />}\n          onClick={() => this.props.onSaveProject()}\n        />\n        <ListItem\n          key=\"save-as\"\n          primaryText={<Trans>Save as...</Trans>}\n          leftIcon={<FileCopy />}\n          onClick={() => this.props.onSaveProjectAs()}\n        />\n        <ListItem\n          key=\"export\"\n          primaryText={<Trans>Export</Trans>}\n          leftIcon={<AddToHomeScreen />}\n          onClick={() => this.props.onExportProject()}\n        />\n        <ListItem\n          key=\"close\"\n          primaryText={<Trans>Close</Trans>}\n          leftIcon={<Close />}\n          onClick={() => this.props.onCloseProject()}\n        />\n        <ListItem\n          key=\"preferences\"\n          primaryText={<Trans>Preferences</Trans>}\n          leftIcon={<Settings />}\n          onClick={() => this.props.onOpenPreferences()}\n        />\n        <ListItem\n          key=\"profile\"\n          primaryText={<Trans>My profile</Trans>}\n          leftIcon={<AccountCircle />}\n          onClick={() => this.props.onOpenProfile()}\n        />\n        <ListItem\n          key=\"games-dashboard\"\n          primaryText={<Trans>Published Games Dashboard</Trans>}\n          leftIcon={<TimelineIcon />}\n          onClick={() => this.props.onOpenGamesDashboard()}\n        />\n      </React.Fragment>\n    );\n  }\n\n  _onSearchChange = (text: string) =>\n    this.setState({\n      searchText: text,\n    });\n\n  _onRequestSearch = () => {\n    /* Do nothing for now, but we could open the first result. */\n  };\n\n  _onProjectItemModified = () => {\n    this.forceUpdate();\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n  };\n\n  render() {\n    const {\n      project,\n      eventsFunctionsExtensionsError,\n      onReloadEventsFunctionsExtensions,\n      onInstallExtension,\n    } = this.props;\n    const { renamedItemKind, renamedItemName, searchText } = this.state;\n\n    const forceOpen = searchText !== '' ? true : undefined;\n\n    return (\n      <div style={styles.container}>\n        <ProjectManagerCommands\n          project={this.props.project}\n          onOpenProjectProperties={this._openProjectProperties}\n          onOpenProjectLoadingScreen={this._openProjectLoadingScreen}\n          onOpenProjectVariables={this._openProjectVariables}\n          onOpenResourcesDialog={this.props.onOpenResources}\n          onOpenPlatformSpecificAssetsDialog={\n            this.props.onOpenPlatformSpecificAssets\n          }\n          onOpenSearchExtensionDialog={this._openSearchExtensionDialog}\n        />\n        <List style={styles.list}>\n          {this._renderMenu()}\n          <ProjectStructureItem\n            primaryText={<Trans>Game settings</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={24}\n                isGDevelopIcon\n                src=\"res/ribbon_default/projectManager32.png\"\n              />\n            }\n            initiallyOpen={false}\n            autoGenerateNestedIndicator={true}\n            indentNestedItems\n            renderNestedItems={() => [\n              <ListItem\n                key=\"properties\"\n                primaryText={<Trans>Properties</Trans>}\n                leftIcon={<SettingsApplications />}\n                onClick={this._openProjectProperties}\n              />,\n              <ListItem\n                key=\"global-variables\"\n                primaryText={<Trans>Global variables</Trans>}\n                leftIcon={<VariableTree />}\n                onClick={this._openProjectVariables}\n              />,\n              <ListItem\n                key=\"icons\"\n                primaryText={<Trans>Icons</Trans>}\n                leftIcon={<PhotoLibrary />}\n                onClick={() => this.props.onOpenPlatformSpecificAssets()}\n              />,\n              <ListItem\n                key=\"resources\"\n                primaryText={<Trans>Resources</Trans>}\n                leftIcon={<ArtTrack />}\n                onClick={() => {\n                  this.props.onOpenResources();\n                }}\n              />,\n            ]}\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>Scenes</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={24}\n                isGDevelopIcon\n                src=\"res/ribbon_default/sceneadd32.png\"\n              />\n            }\n            initiallyOpen={true}\n            open={forceOpen}\n            autoGenerateNestedIndicator={!forceOpen}\n            renderNestedItems={() =>\n              filterProjectItemsList(enumerateLayouts(project), searchText)\n                .map((layout: gdLayout, i: number) => {\n                  const name = layout.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'layout' && renamedItemName === name\n                      }\n                      onEdit={() => this.props.onOpenLayout(name)}\n                      onDelete={() => this.props.onDeleteLayout(layout)}\n                      addLabel={'Add a New Scene'}\n                      onAdd={() => this._addLayout(i)}\n                      onRename={newName => {\n                        this.props.onRenameLayout(name, newName);\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() => this._onEditName('layout', name)}\n                      onCopy={() => this._copyLayout(layout)}\n                      onCut={() => this._cutLayout(layout)}\n                      onPaste={() => this._pasteLayout(i)}\n                      onDuplicate={() => this._duplicateLayout(layout, i)}\n                      canPaste={() => Clipboard.has(LAYOUT_CLIPBOARD_KIND)}\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpLayout(i)}\n                      canMoveDown={i !== project.getLayoutsCount() - 1}\n                      onMoveDown={() => this._moveDownLayout(i)}\n                      buildExtraMenuTemplate={(i18n: I18nType) => [\n                        {\n                          label: i18n._(t`Edit Scene Properties`),\n                          enabled: true,\n                          click: () => this._onOpenLayoutProperties(layout),\n                        },\n                        {\n                          label: i18n._(t`Edit Scene Variables`),\n                          enabled: true,\n                          click: () => this._onOpenLayoutVariables(layout),\n                        },\n                      ]}\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-scene'}\n                    onClick={this.props.onAddLayout}\n                    primaryText={<Trans>Click to add a scene</Trans>}\n                  />\n                )\n            }\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>External events</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={24}\n                isGDevelopIcon\n                src=\"res/ribbon_default/externalevents32.png\"\n              />\n            }\n            initiallyOpen={false}\n            open={forceOpen}\n            autoGenerateNestedIndicator={!forceOpen}\n            renderNestedItems={() =>\n              filterProjectItemsList(\n                enumerateExternalEvents(project),\n                searchText\n              )\n                .map((externalEvents, i) => {\n                  const name = externalEvents.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'external-events' &&\n                        renamedItemName === name\n                      }\n                      onEdit={() => this.props.onOpenExternalEvents(name)}\n                      onDelete={() =>\n                        this.props.onDeleteExternalEvents(externalEvents)\n                      }\n                      addLabel={'Add New External Events'}\n                      onAdd={() => this._addExternalEvents(i)}\n                      onRename={newName => {\n                        this.props.onRenameExternalEvents(name, newName);\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() =>\n                        this._onEditName('external-events', name)\n                      }\n                      onCopy={() => this._copyExternalEvents(externalEvents)}\n                      onCut={() => this._cutExternalEvents(externalEvents)}\n                      onPaste={() => this._pasteExternalEvents(i)}\n                      onDuplicate={() =>\n                        this._duplicateExternalEvents(externalEvents, i)\n                      }\n                      canPaste={() =>\n                        Clipboard.has(EXTERNAL_EVENTS_CLIPBOARD_KIND)\n                      }\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpExternalEvents(i)}\n                      canMoveDown={i !== project.getExternalEventsCount() - 1}\n                      onMoveDown={() => this._moveDownExternalEvents(i)}\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-external-events'}\n                    primaryText={<Trans>Click to add external events</Trans>}\n                    onClick={this.props.onAddExternalEvents}\n                  />\n                )\n            }\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>External layouts</Trans>}\n            leftIcon={\n              <ListIcon\n                iconSize={24}\n                isGDevelopIcon\n                src=\"res/ribbon_default/externallayout32.png\"\n              />\n            }\n            initiallyOpen={false}\n            open={forceOpen}\n            autoGenerateNestedIndicator={!forceOpen}\n            renderNestedItems={() =>\n              filterProjectItemsList(\n                enumerateExternalLayouts(project),\n                searchText\n              )\n                .map((externalLayout, i) => {\n                  const name = externalLayout.getName();\n                  return (\n                    <Item\n                      key={i}\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'external-layout' &&\n                        renamedItemName === name\n                      }\n                      onEdit={() => this.props.onOpenExternalLayout(name)}\n                      onDelete={() =>\n                        this.props.onDeleteExternalLayout(externalLayout)\n                      }\n                      addLabel={'Add a New External Layout'}\n                      onAdd={() => this._addExternalLayout(i)}\n                      onRename={newName => {\n                        this.props.onRenameExternalLayout(name, newName);\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() =>\n                        this._onEditName('external-layout', name)\n                      }\n                      onCopy={() => this._copyExternalLayout(externalLayout)}\n                      onCut={() => this._cutExternalLayout(externalLayout)}\n                      onPaste={() => this._pasteExternalLayout(i)}\n                      onDuplicate={() =>\n                        this._duplicateExternalLayout(externalLayout, i)\n                      }\n                      canPaste={() =>\n                        Clipboard.has(EXTERNAL_LAYOUT_CLIPBOARD_KIND)\n                      }\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpExternalLayout(i)}\n                      canMoveDown={i !== project.getExternalLayoutsCount() - 1}\n                      onMoveDown={() => this._moveDownExternalLayout(i)}\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-external-layout'}\n                    primaryText={<Trans>Click to add an external layout</Trans>}\n                    onClick={this.props.onAddExternalLayout}\n                  />\n                )\n            }\n          />\n          <ProjectStructureItem\n            primaryText={<Trans>Functions/Behaviors</Trans>}\n            error={eventsFunctionsExtensionsError}\n            onRefresh={onReloadEventsFunctionsExtensions}\n            leftIcon={\n              <ListIcon\n                iconSize={24}\n                isGDevelopIcon\n                src=\"res/ribbon_default/function32.png\"\n              />\n            }\n            initiallyOpen={false}\n            open={forceOpen}\n            autoGenerateNestedIndicator={\n              !forceOpen && !eventsFunctionsExtensionsError\n            }\n            renderNestedItems={() =>\n              filterProjectItemsList(\n                enumerateEventsFunctionsExtensions(project),\n                searchText\n              )\n                .map((eventsFunctionsExtension, i) => {\n                  const name = eventsFunctionsExtension.getName();\n                  const iconUrl = eventsFunctionsExtension.getIconUrl();\n                  return (\n                    <Item\n                      key={i}\n                      leftIcon={\n                        iconUrl ? (\n                          <IconContainer\n                            size={24}\n                            alt={eventsFunctionsExtension.getFullName()}\n                            src={iconUrl}\n                          />\n                        ) : null\n                      }\n                      primaryText={name}\n                      editingName={\n                        renamedItemKind === 'events-functions-extension' &&\n                        renamedItemName === name\n                      }\n                      onEdit={() =>\n                        this.props.onOpenEventsFunctionsExtension(name)\n                      }\n                      onDelete={() =>\n                        this.props.onDeleteEventsFunctionsExtension(\n                          eventsFunctionsExtension\n                        )\n                      }\n                      addLabel={'Add a New Extension'}\n                      onAdd={() => this._addEventsFunctionsExtension(i)}\n                      onRename={newName => {\n                        this.props.onRenameEventsFunctionsExtension(\n                          name,\n                          newName\n                        );\n                        this._onEditName(null, '');\n                      }}\n                      onEditName={() =>\n                        this._onEditName('events-functions-extension', name)\n                      }\n                      onCopy={() =>\n                        this._copyEventsFunctionsExtension(\n                          eventsFunctionsExtension\n                        )\n                      }\n                      onCut={() =>\n                        this._cutEventsFunctionsExtension(\n                          eventsFunctionsExtension\n                        )\n                      }\n                      onPaste={() => this._pasteEventsFunctionsExtension(i)}\n                      onDuplicate={() =>\n                        this._duplicateEventsFunctionsExtension(\n                          eventsFunctionsExtension,\n                          i\n                        )\n                      }\n                      canPaste={() =>\n                        Clipboard.has(EVENTS_FUNCTIONS_EXTENSION_CLIPBOARD_KIND)\n                      }\n                      canMoveUp={i !== 0}\n                      onMoveUp={() => this._moveUpEventsFunctionsExtension(i)}\n                      canMoveDown={\n                        i !== project.getEventsFunctionsExtensionsCount() - 1\n                      }\n                      onMoveDown={() =>\n                        this._moveDownEventsFunctionsExtension(i)\n                      }\n                    />\n                  );\n                })\n                .concat(\n                  <AddListItem\n                    key={'add-events-functions-extension'}\n                    primaryText={\n                      <Trans>Click to add functions and behaviors</Trans>\n                    }\n                    onClick={this.props.onAddEventsFunctionsExtension}\n                  />\n                )\n                .concat(\n                  <SearchListItem\n                    key={'extensions-search'}\n                    primaryText={<Trans>Search for new extensions</Trans>}\n                    onClick={this._openSearchExtensionDialog}\n                  />\n                )\n            }\n          />\n        </List>\n        <SearchBar\n          ref={searchBar => (this._searchBar = searchBar)}\n          value={searchText}\n          onRequestSearch={this._onRequestSearch}\n          onChange={this._onSearchChange}\n        />\n        {this.state.projectVariablesEditorOpen && (\n          <VariablesEditorDialog\n            title={<Trans>Global Variables</Trans>}\n            open\n            variablesContainer={project.getVariables()}\n            onCancel={() =>\n              this.setState({ projectVariablesEditorOpen: false })\n            }\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this.setState({ projectVariablesEditorOpen: false });\n            }}\n            emptyExplanationMessage={\n              <Trans>\n                Global variables are variables that are shared amongst all the\n                scenes of the game.\n              </Trans>\n            }\n            emptyExplanationSecondMessage={\n              <Trans>\n                For example, you can have a variable called UnlockedLevelsCount\n                representing the number of levels unlocked by the player.\n              </Trans>\n            }\n            helpPagePath={'/all-features/variables/global-variables'}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n            onComputeAllVariableNames={() =>\n              EventsRootVariablesFinder.findAllGlobalVariables(\n                project.getCurrentPlatform(),\n                project\n              )\n            }\n          />\n        )}\n        {this.state.projectPropertiesDialogOpen && (\n          <ProjectPropertiesDialog\n            open={this.state.projectPropertiesDialogOpen}\n            initialTab={this.state.projectPropertiesDialogInitialTab}\n            project={project}\n            onClose={() =>\n              this.setState({ projectPropertiesDialogOpen: false })\n            }\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this.setState({ projectPropertiesDialogOpen: false });\n            }}\n            onChangeSubscription={this.props.onChangeSubscription}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n          />\n        )}\n        {!!this.state.editedPropertiesLayout && (\n          <ScenePropertiesDialog\n            open\n            layout={this.state.editedPropertiesLayout}\n            project={this.props.project}\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this._onOpenLayoutProperties(null);\n            }}\n            onClose={() => this._onOpenLayoutProperties(null)}\n            onEditVariables={() => {\n              this._onOpenLayoutVariables(this.state.editedPropertiesLayout);\n              this._onOpenLayoutProperties(null);\n            }}\n          />\n        )}\n        {!!this.state.editedVariablesLayout && (\n          <SceneVariablesDialog\n            open\n            project={project}\n            layout={this.state.editedVariablesLayout}\n            onClose={() => this._onOpenLayoutVariables(null)}\n            onApply={() => {\n              if (this.props.unsavedChanges)\n                this.props.unsavedChanges.triggerUnsavedChanges();\n              this._onOpenLayoutVariables(null);\n            }}\n            hotReloadPreviewButtonProps={this.props.hotReloadPreviewButtonProps}\n          />\n        )}\n        {this.state.extensionsSearchDialogOpen && (\n          <ExtensionsSearchDialog\n            project={project}\n            onClose={() => this.setState({ extensionsSearchDialogOpen: false })}\n            onInstallExtension={onInstallExtension}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport FlatButton from '../UI/FlatButton';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport AlertMessage from '../UI/AlertMessage';\nimport { type AuthenticatedUser } from './AuthenticatedUserContext';\nimport { useIsMounted } from '../Utils/UseIsMounted';\nimport ProfileDetails from './ProfileDetails';\n\ntype Props = {|\n  onEditProfile: () => void,\n  onChangeEmail: () => void,\n  authenticatedUser: AuthenticatedUser,\n|};\n\nconst AuthenticatedUserProfileDetails = ({\n  onEditProfile,\n  onChangeEmail,\n  authenticatedUser,\n}: Props) => {\n  const profile = authenticatedUser.profile;\n  const firebaseUser = authenticatedUser.firebaseUser;\n  const isMounted = useIsMounted();\n  const [emailSent, setEmailSent] = React.useState<boolean>(false);\n  const sendEmail = React.useCallback(\n    () => {\n      authenticatedUser.onSendEmailVerification();\n      setEmailSent(true);\n      setTimeout(() => {\n        if (!isMounted.current) return;\n        setEmailSent(false);\n      }, 3000);\n    },\n    [authenticatedUser, isMounted]\n  );\n\n  return firebaseUser && profile ? (\n    <ColumnStackLayout noMargin>\n      {firebaseUser && !firebaseUser.emailVerified && (\n        <AlertMessage\n          kind=\"info\"\n          renderRightButton={() => (\n            <FlatButton\n              label={\n                emailSent ? (\n                  <Trans>Email sent!</Trans>\n                ) : (\n                  <Trans>Send it again</Trans>\n                )\n              }\n              onClick={sendEmail}\n              disabled={emailSent}\n              primary\n            />\n          )}\n        >\n          <Trans>\n            It looks like your email is not verified. Click on the link received\n            by email to verify your account. Didn't receive it?\n          </Trans>\n        </AlertMessage>\n      )}\n      <ProfileDetails\n        // The firebase user is the source of truth for the emails.\n        profile={\n          authenticatedUser.profile\n            ? { ...authenticatedUser.profile, email: firebaseUser.email }\n            : null\n        }\n        isAuthenticatedUserProfile\n        onChangeEmail={onChangeEmail}\n        onEditProfile={onEditProfile}\n        badges={authenticatedUser.badges}\n      />\n    </ColumnStackLayout>\n  ) : (\n    <PlaceholderLoader />\n  );\n};\n\nexport default AuthenticatedUserProfileDetails;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport {\n  Table,\n  TableBody,\n  TableHeader,\n  TableHeaderColumn,\n  TableRow,\n  TableRowColumn,\n} from '../UI/Table';\nimport { type Usages } from '../Utils/GDevelopServices/Usage';\nimport { Column, Line } from '../UI/Grid';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport format from 'date-fns/format';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\n\ntype Props = { usages: ?Usages };\n\nexport default ({ usages }: Props) => (\n  <Column noMargin>\n    <Line>\n      {!usages ? (\n        <PlaceholderLoader />\n      ) : usages.length === 0 ? (\n        <EmptyMessage>\n          <Trans>You don't have any usage of the online services for now</Trans>\n        </EmptyMessage>\n      ) : (\n        <Table>\n          <TableHeader>\n            <TableRow>\n              <TableHeaderColumn>Date</TableHeaderColumn>\n              <TableHeaderColumn>Type</TableHeaderColumn>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {usages.map(usage => (\n              <TableRow key={usage.id}>\n                <TableRowColumn>\n                  {format(usage.createdAt, 'yyyy-MM-dd HH:mm:ss')}\n                </TableRowColumn>\n                <TableRowColumn>{usage.type}</TableRowColumn>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      )}\n    </Line>\n  </Column>\n);\n","// @flow\nimport * as React from 'react';\nimport { Column, Line } from '../UI/Grid';\nimport { type Subscription } from '../Utils/GDevelopServices/Usage';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport RaisedButton from '../UI/RaisedButton';\nimport { Trans } from '@lingui/macro';\nimport Text from '../UI/Text';\n\ntype Props = {\n  subscription: ?Subscription,\n  onChangeSubscription: Function,\n};\n\nexport default ({ subscription, onChangeSubscription }: Props) =>\n  subscription ? (\n    <Column>\n      <Line alignItems=\"center\">\n        <Text size=\"title\">My online services subscriptions</Text>\n      </Line>\n      {subscription.planId ? (\n        <>\n          <Line>\n            <Text>\n              <Trans>\n                You are subscribed to {subscription.planId}. Congratulations!\n                You have access to more online services, including building your\n                game for Android, Windows, macOS and Linux in one click!\n              </Trans>\n            </Text>\n          </Line>\n          <Line justifyContent=\"flex-end\">\n            <RaisedButton\n              label={<Trans>Upgrade/change</Trans>}\n              primary\n              onClick={onChangeSubscription}\n            />\n          </Line>\n        </>\n      ) : (\n        <>\n          <Line>\n            <Text>\n              <Trans>\n                If you don't have a subscription, consider getting one now.\n                Accounts allow you to access all of the online services. With\n                just one click, you can build your game for Android, Windows,\n                macOS and Linux!\n              </Trans>\n            </Text>\n          </Line>\n          <Line justifyContent=\"flex-end\">\n            <RaisedButton\n              label={<Trans>Choose a subscription</Trans>}\n              primary\n              onClick={onChangeSubscription}\n            />\n          </Line>\n        </>\n      )}\n    </Column>\n  ) : (\n    <PlaceholderLoader />\n  );\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AccordionHeader, AccordionBody, Accordion } from '../UI/Accordion';\nimport { IconContainer } from '../UI/IconContainer';\nimport { Column, Line } from '../UI/Grid';\nimport {\n  type ExtensionShortHeader,\n  getUserExtensionShortHeaders,\n} from '../Utils/GDevelopServices/Extension';\nimport {\n  type ExampleShortHeader,\n  getUserExampleShortHeaders,\n} from '../Utils/GDevelopServices/Example';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport Text from '../UI/Text';\nimport BackgroundText from '../UI/BackgroundText';\n\ntype ContributionLineProps = {|\n  fullName: string,\n  previewIconUrl?: string,\n  shortDescription?: string,\n|};\n\nexport const ContributionLine = ({\n  fullName,\n  previewIconUrl,\n  shortDescription,\n}: ContributionLineProps) => (\n  <Line>\n    {previewIconUrl && (\n      <IconContainer alt={fullName} src={previewIconUrl} size={64} />\n    )}\n    <Column expand>\n      <Text noMargin>{fullName}</Text>\n      <Text noMargin size=\"body2\">\n        {shortDescription}\n      </Text>\n    </Column>\n  </Line>\n);\n\ntype ExamplesAccordionProps = {|\n  examples: Array<ExampleShortHeader>,\n  exampleError: ?Error,\n|};\n\nexport const ExamplesAccordion = ({\n  examples,\n  exampleError,\n}: ExamplesAccordionProps) => {\n  if (exampleError)\n    return (\n      <Column>\n        <Line alignItems=\"center\">\n          <Text>\n            <Trans>Error retrieving the examples</Trans>\n          </Text>\n        </Line>\n      </Column>\n    );\n\n  return (\n    <Accordion>\n      <AccordionHeader>\n        <Text displayInlineAsSpan>\n          <Trans>Examples ({examples.length})</Trans>\n        </Text>\n      </AccordionHeader>\n      <AccordionBody disableGutters>\n        <Column>\n          {examples.map(example => (\n            <ContributionLine\n              key={example.name}\n              shortDescription={example.shortDescription}\n              fullName={example.name}\n              previewIconUrl={\n                example.previewImageUrls ? example.previewImageUrls[0] : ''\n              }\n            />\n          ))}\n        </Column>\n      </AccordionBody>\n    </Accordion>\n  );\n};\n\ntype ExtensionsAccordionProps = {|\n  extensions: Array<ExtensionShortHeader>,\n  extensionError: ?Error,\n|};\n\nexport const ExtensionsAccordion = ({\n  extensions,\n  extensionError,\n}: ExtensionsAccordionProps) => {\n  if (extensionError)\n    return (\n      <Column>\n        <Line alignItems=\"center\">\n          <Text>\n            <Trans>Error retrieving the extensions</Trans>\n          </Text>\n        </Line>\n      </Column>\n    );\n\n  return (\n    <Accordion>\n      <AccordionHeader>\n        <Text displayInlineAsSpan>\n          <Trans>Extensions ({extensions.length})</Trans>\n        </Text>\n      </AccordionHeader>\n      <AccordionBody disableGutters>\n        <Column>\n          {extensions.map(extension => (\n            <ContributionLine\n              key={extension.name}\n              shortDescription={extension.shortDescription}\n              fullName={extension.fullName}\n              previewIconUrl={extension.previewIconUrl}\n            />\n          ))}\n        </Column>\n      </AccordionBody>\n    </Accordion>\n  );\n};\n\n// Change examples to assets when the feature is developed.\ntype AssetsAccordionProps = {|\n  examples: ?Array<ExampleShortHeader>,\n|};\n\nconst AssetsAccordion = ({ examples }: AssetsAccordionProps) => (\n  <Accordion>\n    <AccordionHeader>\n      <Text displayInlineAsSpan>\n        <Trans>Assets (coming soon!)</Trans>\n      </Text>\n    </AccordionHeader>\n  </Accordion>\n);\n\ntype Props = {|\n  userId: string,\n|};\n\nexport default ({ userId }: Props) => {\n  const [\n    extensions,\n    setExtensions,\n  ] = React.useState<?Array<ExtensionShortHeader>>(null);\n  const [examples, setExamples] = React.useState<?Array<ExampleShortHeader>>(\n    null\n  );\n  const [extensionError, setExtensionError] = React.useState<?Error>(null);\n  const [exampleError, setExampleError] = React.useState<?Error>(null);\n\n  const fetchUserExtensions = React.useCallback(\n    () => {\n      (async () => {\n        if (!userId) return;\n        try {\n          const extensions = await getUserExtensionShortHeaders(userId);\n          setExtensions(extensions);\n        } catch (error) {\n          console.error('Error while loading extensions:', error);\n          setExtensionError(error);\n        }\n      })();\n    },\n    [userId]\n  );\n\n  React.useEffect(\n    () => {\n      fetchUserExtensions();\n    },\n    [fetchUserExtensions]\n  );\n\n  const fetchUserExamples = React.useCallback(\n    () => {\n      (async () => {\n        if (!userId) return;\n        try {\n          const examples = await getUserExampleShortHeaders(userId);\n          setExamples(examples);\n        } catch (error) {\n          console.error('Error while loading examples:', error);\n          setExampleError(error);\n        }\n      })();\n    },\n    [userId]\n  );\n\n  React.useEffect(\n    () => {\n      fetchUserExamples();\n    },\n    [fetchUserExamples]\n  );\n\n  return (\n    <>\n      <Column>\n        <Line alignItems=\"center\">\n          <Text size=\"title\">\n            <Trans>Contributions</Trans>\n          </Text>\n        </Line>\n      </Column>\n      {examples && extensions ? (\n        <>\n          <ExtensionsAccordion\n            extensions={extensions}\n            extensionError={extensionError}\n          />\n          <ExamplesAccordion examples={examples} exampleError={exampleError} />\n          <AssetsAccordion examples={examples} />\n          <Column>\n            <BackgroundText>\n              <Trans>\n                Missing some contributions? If you are the author, create a Pull\n                Request on the corresponding GitHub repository after adding your\n                username in the authors of the example or the extension - or\n                directly ask the original author to add your username.\n              </Trans>\n            </BackgroundText>\n          </Column>\n        </>\n      ) : (\n        <PlaceholderLoader />\n      )}\n    </>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { Card, CardActions, CardHeader, Chip } from '@material-ui/core';\nimport { format } from 'date-fns';\nimport * as React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport { Line, Spacer } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\nimport { type Game } from '../Utils/GDevelopServices/Game';\nimport TimelineIcon from '@material-ui/icons/Timeline';\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\n\ntype Props = {|\n  game: Game,\n  isCurrentGame: boolean,\n  onOpenAnalytics: () => void,\n  onOpenDetails: () => void,\n  onOpenMonetization: () => void,\n|};\n\nexport const GameCard = ({\n  game,\n  isCurrentGame,\n  onOpenDetails,\n  onOpenAnalytics,\n  onOpenMonetization,\n}: Props) => (\n  <Card key={game.id}>\n    <CardHeader\n      title={game.gameName}\n      subheader={\n        <Line alignItems=\"center\" noMargin>\n          <Trans>\n            Registered on{' '}\n            {format(game.createdAt * 1000 /* TODO */, 'yyyy-MM-dd')}\n          </Trans>\n          {isCurrentGame && (\n            <React.Fragment>\n              <Spacer />\n              <Chip size=\"small\" label={<Trans>Game currently edited</Trans>} />\n            </React.Fragment>\n          )}\n        </Line>\n      }\n    />\n    <CardActions>\n      <Line expand noMargin justifyContent=\"flex-end\">\n        <FlatButton\n          label={<Trans>See details</Trans>}\n          onClick={onOpenDetails}\n        />\n        <RaisedButton\n          primary\n          icon={<TimelineIcon />}\n          label={<Trans>Analytics</Trans>}\n          onClick={onOpenAnalytics}\n        />\n        <Spacer />\n        <RaisedButton\n          primary\n          icon={<MonetizationOnIcon />}\n          label={<Trans>Monetization</Trans>}\n          onClick={onOpenMonetization}\n        />\n      </Line>\n    </CardActions>\n  </Card>\n);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport AuthenticatedUserContext from '../Profile/AuthenticatedUserContext';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport PlaceholderError from '../UI/PlaceholderError';\nimport { type Game, getGames } from '../Utils/GDevelopServices/Game';\nimport { GameCard } from './GameCard';\nimport { ColumnStackLayout } from '../UI/Layout';\nimport { GameRegistration } from './GameRegistration';\nimport { GameDetailsDialog } from './GameDetailsDialog';\n\ntype Props = {|\n  project: ?gdProject,\n|};\n\nexport const GamesList = (props: Props) => {\n  const [error, setError] = React.useState<?Error>(null);\n  const [games, setGames] = React.useState<?Array<Game>>(null);\n  const {\n    authenticated,\n    firebaseUser,\n    getAuthorizationHeader,\n  } = React.useContext(AuthenticatedUserContext);\n  const [openedGame, setOpenedGame] = React.useState<?Game>(null);\n  const [openedGameInitialTab, setOpenedGameInitialTab] = React.useState<\n    'details' | 'analytics' | 'monetization'\n  >('details');\n\n  const loadGames = React.useCallback(\n    async () => {\n      if (!authenticated || !firebaseUser) return;\n\n      try {\n        setError(null);\n        const games = await getGames(getAuthorizationHeader, firebaseUser.uid);\n        setGames(games);\n      } catch (error) {\n        console.error('Error while loading user games.', error);\n        setError(error);\n      }\n    },\n    [authenticated, firebaseUser, getAuthorizationHeader]\n  );\n\n  React.useEffect(\n    () => {\n      loadGames();\n    },\n    [loadGames]\n  );\n\n  if (!authenticated) {\n    return null;\n  }\n\n  if (!games && error) {\n    return (\n      <PlaceholderError\n        onRetry={() => {\n          loadGames();\n        }}\n      >\n        <Trans>\n          Can't load the games. Verify your internet connection or retry later.\n        </Trans>\n      </PlaceholderError>\n    );\n  }\n\n  if (!games) {\n    return <PlaceholderLoader />;\n  }\n\n  const projectUuid = props.project ? props.project.getProjectUuid() : null;\n  const thisGame = games.find(game => !!projectUuid && game.id === projectUuid);\n  const displayedGames = [\n    thisGame,\n    ...games.filter(game => game !== thisGame),\n  ].filter(Boolean);\n\n  return (\n    <ColumnStackLayout noMargin>\n      <GameRegistration\n        project={props.project}\n        hideIfRegistered\n        hideLoader\n        onGameRegistered={() => {\n          loadGames();\n        }}\n      />\n      {displayedGames.map(game => (\n        <GameCard\n          key={game.id}\n          isCurrentGame={!!projectUuid && game.id === projectUuid}\n          game={game}\n          onOpenAnalytics={() => {\n            setOpenedGameInitialTab('analytics');\n            setOpenedGame(game);\n          }}\n          onOpenDetails={() => {\n            setOpenedGameInitialTab('details');\n            setOpenedGame(game);\n          }}\n          onOpenMonetization={() => {\n            setOpenedGameInitialTab('monetization');\n            setOpenedGame(game);\n          }}\n        />\n      ))}\n      {openedGame && (\n        <GameDetailsDialog\n          game={openedGame}\n          project={\n            !!projectUuid && openedGame.id === projectUuid\n              ? props.project\n              : null\n          }\n          initialTab={openedGameInitialTab}\n          onClose={() => {\n            setOpenedGame(null);\n          }}\n          onGameUpdated={updatedGame => {\n            setGames(\n              games.map(game => (game === openedGame ? updatedGame : game))\n            );\n            setOpenedGame(updatedGame);\n          }}\n          onGameDeleted={() => {\n            setOpenedGame(null);\n            loadGames();\n          }}\n        />\n      )}\n    </ColumnStackLayout>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport { Tabs, Tab } from '../UI/Tabs';\nimport Dialog from '../UI/Dialog';\nimport { Column, Line } from '../UI/Grid';\nimport CreateProfile from './CreateProfile';\nimport AuthenticatedUserProfileDetails from './AuthenticatedUserProfileDetails';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport HelpButton from '../UI/HelpButton';\nimport UsagesDetails from './UsagesDetails';\nimport SubscriptionDetails from './SubscriptionDetails';\nimport ContributionsDetails from './ContributionsDetails';\nimport AuthenticatedUserContext from './AuthenticatedUserContext';\nimport { GamesList } from '../GameDashboard/GamesList';\nimport { ColumnStackLayout } from '../UI/Layout';\n\ntype Props = {|\n  currentProject: ?gdProject,\n  open: boolean,\n  onClose: () => void,\n  onChangeSubscription: () => void,\n  initialTab: 'profile' | 'games-dashboard',\n|};\n\nconst ProfileDialog = ({\n  currentProject,\n  open,\n  onClose,\n  onChangeSubscription,\n  initialTab,\n}: Props) => {\n  const [currentTab, setCurrentTab] = React.useState<string>(initialTab);\n  const authenticatedUser = React.useContext(AuthenticatedUserContext);\n\n  const _onChangeTab = React.useCallback(\n    (newTab: string) => {\n      setCurrentTab(newTab);\n    },\n    [setCurrentTab]\n  );\n\n  React.useEffect(\n    () => {\n      if (open) authenticatedUser.onRefreshUserProfile();\n    },\n    // We don't want to fetch again when authenticatedUser changes,\n    // just the first time this page opens.\n    [authenticatedUser.onRefreshUserProfile, open] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  return (\n    <Dialog\n      actions={\n        <FlatButton\n          label={<Trans>Close</Trans>}\n          key=\"close\"\n          primary={false}\n          onClick={onClose}\n        />\n      }\n      secondaryActions={[\n        <HelpButton\n          key=\"help\"\n          helpPagePath={\n            currentTab === 'games-dashboard'\n              ? '/interface/games-dashboard'\n              : '/interface/profile'\n          }\n        />,\n        authenticatedUser.authenticated && authenticatedUser.profile && (\n          <FlatButton\n            label={<Trans>Logout</Trans>}\n            key=\"logout\"\n            onClick={authenticatedUser.onLogout}\n          />\n        ),\n      ]}\n      onRequestClose={onClose}\n      cannotBeDismissed={false}\n      open={open}\n      noMargin\n    >\n      <Tabs value={currentTab} onChange={_onChangeTab}>\n        <Tab label={<Trans>My Profile</Trans>} value=\"profile\" />\n        <Tab label={<Trans>Games Dashboard</Trans>} value=\"games-dashboard\" />\n        <Tab label={<Trans>Services Usage</Trans>} value=\"usage\" />\n      </Tabs>\n      {currentTab === 'profile' &&\n        (authenticatedUser.authenticated && authenticatedUser.profile ? (\n          <Column noMargin>\n            <AuthenticatedUserProfileDetails\n              authenticatedUser={authenticatedUser}\n              onEditProfile={authenticatedUser.onEdit}\n              onChangeEmail={authenticatedUser.onChangeEmail}\n            />\n            <SubscriptionDetails\n              subscription={authenticatedUser.subscription}\n              onChangeSubscription={onChangeSubscription}\n            />\n            <ContributionsDetails userId={authenticatedUser.profile.id} />\n          </Column>\n        ) : (\n          <Column>\n            <CreateProfile\n              onLogin={authenticatedUser.onLogin}\n              onCreateAccount={authenticatedUser.onCreateAccount}\n            />\n          </Column>\n        ))}\n      {currentTab === 'games-dashboard' &&\n        (authenticatedUser.authenticated ? (\n          <Line>\n            <ColumnStackLayout expand>\n              <GamesList project={currentProject} />\n            </ColumnStackLayout>\n          </Line>\n        ) : (\n          <Column>\n            <CreateProfile\n              onLogin={authenticatedUser.onLogin}\n              onCreateAccount={authenticatedUser.onCreateAccount}\n              message={\n                <Trans>\n                  Create an account to register your games and to get access to\n                  metrics collected anonymously, like the number of daily\n                  players and retention of the players after a few days.\n                </Trans>\n              }\n            />\n          </Column>\n        ))}\n      {currentTab === 'usage' &&\n        (authenticatedUser.authenticated ? (\n          <Column noMargin>\n            <UsagesDetails usages={authenticatedUser.usages} />\n          </Column>\n        ) : (\n          <EmptyMessage>\n            <Trans>\n              Register to see the usage that you've made of the online services\n            </Trans>\n          </EmptyMessage>\n        ))}\n    </Dialog>\n  );\n};\n\nexport default ProfileDialog;\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport { Column } from '../../UI/Grid';\nimport { type BehaviorEditorProps } from './BehaviorEditorProps.flow';\n\ntype Props = BehaviorEditorProps;\n\nexport default class BehaviorPropertiesEditor extends React.Component<Props> {\n  render() {\n    const { behavior, behaviorContent, object } = this.props;\n    const properties = behavior.getProperties(behaviorContent.getContent());\n\n    const propertiesSchema = propertiesMapToSchema(\n      properties,\n      behaviorContent => behavior.getProperties(behaviorContent.getContent()),\n      (behaviorContent, name, value) => {\n        behavior.updateProperty(behaviorContent.getContent(), name, value);\n      },\n      object\n    );\n\n    return (\n      <Column expand>\n        {propertiesSchema.length ? (\n          <PropertiesEditor\n            schema={propertiesSchema}\n            instances={[behaviorContent]}\n          />\n        ) : (\n          <EmptyMessage>\n            <Trans>\n              There is nothing to configure for this behavior. You can still use\n              events to interact with the object and this behavior.\n            </Trans>\n          </EmptyMessage>\n        )}\n      </Column>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport useForceUpdate from '../../../Utils/UseForceUpdate';\nimport { type Vertex } from './PolygonEditor';\n\ntype Props = {|\n  shape: string,\n  dimensionA: number,\n  dimensionB: number,\n  offsetX: number,\n  offsetY: number,\n  polygonOrigin: string,\n  vertices: Array<Vertex>,\n  width: number,\n  height: number,\n  frameOffsetTop: number,\n  frameOffsetLeft: number,\n  zoomFactor: number,\n  onMoveVertex: (index: number, newX: number, newY: number) => void,\n|};\n\ntype State = {|\n  draggedVertex: ?Vertex,\n  draggedIndex: number,\n|};\n\nconst ShapePreview = (props: Props) => {\n  const svgRef = React.useRef<React.ElementRef<'svg'> | null>(null);\n  const [state, setState] = React.useState<State>({\n    draggedVertex: null,\n    draggedIndex: -1,\n  });\n\n  const forceUpdate = useForceUpdate();\n\n  const onVertexDown = (vertex: Vertex, index: number) => {\n    if (state.draggedVertex) return;\n    setState({ draggedVertex: vertex, draggedIndex: index });\n  };\n\n  const onMouseUp = () => {\n    const { draggedVertex, draggedIndex } = state;\n    const draggingWasDone = !!draggedVertex;\n    if (draggingWasDone)\n      props.onMoveVertex(\n        draggedIndex,\n        Math.round(draggedVertex ? draggedVertex.x : 0),\n        Math.round(draggedVertex ? draggedVertex.y : 0)\n      );\n    setState({ draggedVertex: null, draggedIndex: -1 });\n  };\n\n  const onMouseMove = (event: any) => {\n    const { polygonOrigin, width, height, zoomFactor } = props;\n    const { draggedVertex } = state;\n    if (!draggedVertex) return;\n\n    // $FlowExpectedError Flow doesn't have SVG typings yet (@facebook/flow#4551)\n    const pointOnScreen = svgRef.current.createSVGPoint();\n    pointOnScreen.x = event.clientX;\n    pointOnScreen.y = event.clientY;\n    // $FlowExpectedError Flow doesn't have SVG typings yet (@facebook/flow#4551)\n    const screenToSvgMatrix = svgRef.current.getScreenCTM().inverse();\n    const pointOnSvg = pointOnScreen.matrixTransform(screenToSvgMatrix);\n\n    const { frameX, frameY } = confinePointToFrame(pointOnSvg.x, pointOnSvg.y);\n\n    draggedVertex.x =\n      frameX / zoomFactor -\n      props.offsetX -\n      (polygonOrigin === 'Center' ? width / 2 : 0);\n    draggedVertex.y =\n      frameY / zoomFactor -\n      props.offsetY -\n      (polygonOrigin === 'Center' ? height / 2 : 0);\n\n    forceUpdate();\n  };\n\n  /**\n   * Given a point's coordinates, returns new coordinates that\n   * are confined inside the sprite frame.\n   */\n  const confinePointToFrame = (freeX: number, freeY: number) => {\n    const maxX = props.width * props.zoomFactor;\n    const maxY = props.height * props.zoomFactor;\n\n    const frameX = Math.min(maxX, Math.max(freeX, 0));\n    const frameY = Math.min(maxY, Math.max(freeY, 0));\n    return { frameX, frameY };\n  };\n\n  const renderBox = () => {\n    const {\n      dimensionA,\n      dimensionB,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = props;\n    const fixedWidth = dimensionA > 0 ? dimensionA : width > 0 ? width : 1;\n    const fixedHeight = dimensionB > 0 ? dimensionB : height > 0 ? height : 1;\n\n    return (\n      <rect\n        key={'boxShape'}\n        fill=\"rgba(255,0,0,0.75)\"\n        strokeWidth={1}\n        x={(offsetX + width / 2 - fixedWidth / 2) * zoomFactor}\n        y={(offsetY + height / 2 - fixedHeight / 2) * zoomFactor}\n        width={fixedWidth * zoomFactor}\n        height={fixedHeight * zoomFactor}\n      />\n    );\n  };\n\n  const renderCircle = () => {\n    const { dimensionA, width, height, offsetX, offsetY, zoomFactor } = props;\n\n    return (\n      <circle\n        key={'circleShape'}\n        fill=\"rgba(255,0,0,0.75)\"\n        strokeWidth={1}\n        cx={(offsetX + width / 2) * zoomFactor}\n        cy={(offsetY + height / 2) * zoomFactor}\n        r={\n          (dimensionA > 0\n            ? dimensionA\n            : width + height > 0\n            ? (width + height) / 4\n            : 1) * zoomFactor\n        }\n      />\n    );\n  };\n\n  const renderEdge = () => {\n    const {\n      dimensionA,\n      dimensionB,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = props;\n\n    const halfLength =\n      (dimensionA > 0 ? dimensionA : width > 0 ? width : 1) / 2;\n    const cos = Math.cos((dimensionB * Math.PI) / 180);\n    const sin = Math.sin((dimensionB * Math.PI) / 180);\n\n    return (\n      <line\n        key={'edgeShape'}\n        stroke=\"rgba(255,0,0,0.75)\"\n        strokeWidth={2}\n        x1={(offsetX + width / 2 - halfLength * cos) * zoomFactor}\n        y1={(offsetY + height / 2 - halfLength * sin) * zoomFactor}\n        x2={(offsetX + width / 2 + halfLength * cos) * zoomFactor}\n        y2={(offsetY + height / 2 + halfLength * sin) * zoomFactor}\n      />\n    );\n  };\n\n  const renderPolygon = () => {\n    const {\n      vertices,\n      polygonOrigin,\n      width,\n      height,\n      offsetX,\n      offsetY,\n      zoomFactor,\n    } = props;\n\n    return (\n      <React.Fragment>\n        <polygon\n          key={'polygonShape'}\n          fill=\"rgba(255,0,0,0.75)\"\n          strokeWidth={1}\n          fillRule=\"evenodd\"\n          points={vertices\n            .map(\n              vertex =>\n                `${(vertex.x +\n                  offsetX +\n                  (polygonOrigin === 'Center' ? width / 2 : 0)) *\n                  zoomFactor},${(vertex.y +\n                  offsetY +\n                  (polygonOrigin === 'Center' ? height / 2 : 0)) *\n                  zoomFactor}`\n            )\n            .join(' ')}\n        />\n        {vertices.map((vertex, index) => (\n          <circle\n            onPointerDown={() => onVertexDown(vertex, index)}\n            key={`vertex-${index}`}\n            fill=\"rgba(150,0,0,0.75)\"\n            strokeWidth={1}\n            style={{ cursor: 'move' }}\n            cx={\n              (vertex.x +\n                offsetX +\n                (polygonOrigin === 'Center' ? width / 2 : 0)) *\n              zoomFactor\n            }\n            cy={\n              (vertex.y +\n                offsetY +\n                (polygonOrigin === 'Center' ? height / 2 : 0)) *\n              zoomFactor\n            }\n            r={5}\n          />\n        ))}\n      </React.Fragment>\n    );\n  };\n\n  const containerStyle = {\n    position: 'relative',\n    width: '100%',\n    height: '100%',\n  };\n\n  const frameStyle = {\n    position: 'absolute',\n    top: props.frameOffsetTop || 0,\n    left: props.frameOffsetLeft || 0,\n    width: props.width * props.zoomFactor,\n    height: props.height * props.zoomFactor,\n    overflow: 'visible',\n  };\n\n  return (\n    <div\n      style={containerStyle}\n      onPointerMove={onMouseMove}\n      onPointerUp={onMouseUp}\n    >\n      <svg style={frameStyle} ref={svgRef}>\n        {props.shape === 'Box' && renderBox()}\n        {props.shape === 'Circle' && renderCircle()}\n        {props.shape === 'Edge' && renderEdge()}\n        {props.shape === 'Polygon' && renderPolygon()}\n      </svg>\n    </div>\n  );\n};\n\nexport default ShapePreview;\n","// @flow\r\nimport * as React from 'react';\r\nimport {\r\n  Table,\r\n  TableRow,\r\n  TableRowColumn,\r\n  TableBody,\r\n  TableHeader,\r\n  TableHeaderColumn,\r\n} from '../../../UI/Table';\r\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\r\nimport Warning from '@material-ui/icons/Warning';\r\nimport IconButton from '../../../UI/IconButton';\r\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\r\nimport AddCircle from '@material-ui/icons/AddCircle';\r\nimport Delete from '@material-ui/icons/Delete';\r\n\r\nexport type Vertex = {|\r\n  x: number,\r\n  y: number,\r\n|};\r\n\r\ntype Props = {|\r\n  vertices: Array<Vertex>,\r\n  onChangeVertexX: (newValue: number, index: number) => void,\r\n  onChangeVertexY: (newValue: number, index: number) => void,\r\n  onAdd: () => void,\r\n  onRemove: (index: number) => void,\r\n|};\r\n\r\nexport default class PolygonEditor extends React.Component<Props> {\r\n  _isPolygonConvex(vertices: Array<Vertex>) {\r\n    // Get edges\r\n    let edges = [];\r\n    let v1 = null;\r\n    let v2 = null;\r\n    for (let i = 0; i < vertices.length; i++) {\r\n      v1 = vertices[i];\r\n      if (i + 1 >= vertices.length) v2 = vertices[0];\r\n      else v2 = vertices[i + 1];\r\n      edges.push({ x: v2.x - v1.x, y: v2.y - v1.y });\r\n    }\r\n\r\n    // Check convexity\r\n    if (edges.length < 3) return false;\r\n\r\n    const zProductIsPositive =\r\n      edges[0].x * edges[0 + 1].y - edges[0].y * edges[0 + 1].x > 0;\r\n\r\n    for (let i = 1; i < edges.length - 1; ++i) {\r\n      let zCrossProduct =\r\n        edges[i].x * edges[i + 1].y - edges[i].y * edges[i + 1].x;\r\n      let zCrossProductIsPositive = zCrossProduct > 0;\r\n      if (zCrossProductIsPositive !== zProductIsPositive) return false;\r\n    }\r\n\r\n    let lastZCrossProduct =\r\n      edges[edges.length - 1].x * edges[0].y -\r\n      edges[edges.length - 1].y * edges[0].x;\r\n    let lastZCrossProductIsPositive = lastZCrossProduct > 0;\r\n    if (lastZCrossProductIsPositive !== zProductIsPositive) return false;\r\n\r\n    // Check for repeated vertices (would crash Box2D during the game)\r\n    for (let i = 0; i < vertices.length - 1; ++i) {\r\n      for (let j = i + 1; j < vertices.length; ++j) {\r\n        if (vertices[i].x === vertices[j].x && vertices[i].y === vertices[j].y)\r\n          return false;\r\n      }\r\n    }\r\n\r\n    // Check if all vertices are aligned (would crash Box2D during the game)\r\n    let alignedX = true;\r\n    let alignedY = true;\r\n    for (let i = 0; i < vertices.length - 1; ++i) {\r\n      if (vertices[i].x !== vertices[i + 1].x) alignedX = false;\r\n      if (vertices[i].y !== vertices[i + 1].y) alignedY = false;\r\n    }\r\n    if (alignedX || alignedY) return false;\r\n\r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      vertices,\r\n      onChangeVertexX,\r\n      onChangeVertexY,\r\n      onAdd,\r\n      onRemove,\r\n    } = this.props;\r\n\r\n    return (\r\n      <ThemeConsumer>\r\n        {muiTheme => (\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHeaderColumn />\r\n                <TableHeaderColumn>X</TableHeaderColumn>\r\n                <TableHeaderColumn>Y</TableHeaderColumn>\r\n                <TableRowColumn />\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {vertices.map((value, index) => {\r\n                return (\r\n                  <TableRow\r\n                    key={`vertexRow${index}`}\r\n                    style={{\r\n                      backgroundColor: muiTheme.list.itemsBackgroundColor,\r\n                    }}\r\n                  >\r\n                    <TableRowColumn>\r\n                      {!this._isPolygonConvex(vertices) && <Warning />}\r\n                    </TableRowColumn>\r\n                    <TableRowColumn>\r\n                      <SemiControlledTextField\r\n                        margin=\"none\"\r\n                        fullWidth\r\n                        value={value.x.toString(10)}\r\n                        onChange={newValue =>\r\n                          onChangeVertexX(parseFloat(newValue) || 0, index)\r\n                        }\r\n                        type=\"number\"\r\n                      />\r\n                    </TableRowColumn>\r\n                    <TableRowColumn>\r\n                      <SemiControlledTextField\r\n                        margin=\"none\"\r\n                        fullWidth\r\n                        value={value.y.toString(10)}\r\n                        onChange={newValue =>\r\n                          onChangeVertexY(parseFloat(newValue) || 0, index)\r\n                        }\r\n                        type=\"number\"\r\n                      />\r\n                    </TableRowColumn>\r\n                    <TableRowColumn>\r\n                      <IconButton size=\"small\" onClick={() => onRemove(index)}>\r\n                        <Delete />\r\n                      </IconButton>\r\n                    </TableRowColumn>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n              <TableRow>\r\n                <TableRowColumn />\r\n                <TableRowColumn />\r\n                <TableRowColumn />\r\n                <TableRowColumn>\r\n                  <IconButton onClick={onAdd}>\r\n                    <AddCircle />\r\n                  </IconButton>\r\n                </TableRowColumn>\r\n              </TableRow>\r\n            </TableBody>\r\n          </Table>\r\n        )}\r\n      </ThemeConsumer>\r\n    );\r\n  }\r\n}\r\n","// @flow\r\nimport { t } from '@lingui/macro';\r\nimport { Trans } from '@lingui/macro';\r\n\r\nimport * as React from 'react';\r\nimport { Line, Column } from '../../../UI/Grid';\r\nimport Checkbox from '../../../UI/Checkbox';\r\nimport SelectField from '../../../UI/SelectField';\r\nimport SelectOption from '../../../UI/SelectOption';\r\nimport SemiControlledTextField from '../../../UI/SemiControlledTextField';\r\nimport ImagePreview from '../../../ResourcesList/ResourcePreview/ImagePreview';\r\nimport ResourceSelector from '../../../ResourcesList/ResourceSelector';\r\nimport ResourcesLoader from '../../../ResourcesLoader';\r\nimport ShapePreview from './ShapePreview.js';\r\nimport PolygonEditor from './PolygonEditor.js';\r\nimport { type BehaviorEditorProps } from '../BehaviorEditorProps.flow';\r\nimport Text from '../../../UI/Text';\r\nimport DismissableAlertMessage from '../../../UI/DismissableAlertMessage';\r\nimport { ResponsiveLineStackLayout } from '../../../UI/Layout';\r\nimport EmptyMessage from '../../../UI/EmptyMessage';\r\nimport useForceUpdate from '../../../Utils/UseForceUpdate';\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\n\r\ntype Props = BehaviorEditorProps;\r\n\r\nconst NumericProperty = (props: {|\r\n  properties: gdMapStringPropertyDescriptor,\r\n  propertyName: string,\r\n  step: number,\r\n  onUpdate: (newValue: string) => void,\r\n|}) => {\r\n  const { properties, propertyName, step, onUpdate } = props;\r\n\r\n  return (\r\n    <SemiControlledTextField\r\n      fullWidth\r\n      value={properties.get(propertyName).getValue()}\r\n      key={propertyName}\r\n      floatingLabelText={properties.get(propertyName).getLabel()}\r\n      step={step}\r\n      onChange={onUpdate}\r\n      type=\"number\"\r\n    />\r\n  );\r\n};\r\n\r\nconst BitGroupEditor = (props: {|\r\n  bits: Array<boolean>,\r\n  onChange: (index: number, value: boolean) => void,\r\n|}) => {\r\n  return (\r\n    <div style={{ overflowX: 'auto', flex: 1 }}>\r\n      <ButtonGroup disableElevation fullWidth>\r\n        {props.bits.map((bit, index) => (\r\n          <Button\r\n            key={index}\r\n            variant={bit ? 'contained' : 'outlined'}\r\n            color={bit ? 'primary' : 'default'}\r\n            onClick={() => props.onChange(index, !bit)}\r\n          >\r\n            {index + 1}\r\n          </Button>\r\n        ))}\r\n      </ButtonGroup>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Physics2Editor = (props: Props) => {\r\n  const { current: resourcesLoader } = React.useRef(ResourcesLoader);\r\n  const [image, setImage] = React.useState('');\r\n  const { behavior, behaviorContent } = props;\r\n  const forceUpdate = useForceUpdate();\r\n\r\n  const isBitEnabled = (bitsValue: number, pos: number) => {\r\n    return !!(bitsValue & (1 << pos));\r\n  };\r\n\r\n  const enableBit = (bitsValue: number, pos: number, enable: boolean) => {\r\n    if (enable) bitsValue |= 1 << pos;\r\n    else bitsValue &= ~(1 << pos);\r\n    return bitsValue;\r\n  };\r\n\r\n  const properties = behavior.getProperties(behaviorContent.getContent());\r\n  const bits = Array(16).fill(null);\r\n  const shape = properties.get('shape').getValue();\r\n  const layersValues = parseInt(properties.get('layers').getValue(), 10);\r\n  const masksValues = parseInt(properties.get('masks').getValue(), 10);\r\n\r\n  return (\r\n    <Column\r\n      expand\r\n      // Avoid overflow on small screens\r\n      noOverflowParent\r\n    >\r\n      <Line>\r\n        <SelectField\r\n          key={'bodyType'}\r\n          fullWidth\r\n          floatingLabelText={properties.get('bodyType').getLabel()}\r\n          value={properties.get('bodyType').getValue()}\r\n          onChange={(e, i, newValue: string) => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'bodyType',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        >\r\n          {[\r\n            <SelectOption\r\n              key={'dynamic'}\r\n              value={'Dynamic'}\r\n              primaryText={t`Dynamic`}\r\n            />,\r\n            <SelectOption\r\n              key={'static'}\r\n              value={'Static'}\r\n              primaryText={t`Static`}\r\n            />,\r\n            <SelectOption\r\n              key={'kinematic'}\r\n              value={'Kinematic'}\r\n              primaryText={t`Kinematic`}\r\n            />,\r\n          ]}\r\n        </SelectField>\r\n      </Line>\r\n      <ResponsiveLineStackLayout>\r\n        <Checkbox\r\n          label={properties.get('bullet').getLabel()}\r\n          checked={properties.get('bullet').getValue() === 'true'}\r\n          onCheck={(e, checked) => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'bullet',\r\n              checked ? '1' : '0'\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n        <Checkbox\r\n          label={properties.get('fixedRotation').getLabel()}\r\n          checked={properties.get('fixedRotation').getValue() === 'true'}\r\n          onCheck={(e, checked) => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'fixedRotation',\r\n              checked ? '1' : '0'\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n        <Checkbox\r\n          label={properties.get('canSleep').getLabel()}\r\n          checked={properties.get('canSleep').getValue() === 'true'}\r\n          onCheck={(e, checked) => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'canSleep',\r\n              checked ? '1' : '0'\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </ResponsiveLineStackLayout>\r\n      <Line>\r\n        <DismissableAlertMessage\r\n          identifier=\"physics2-shape-collisions\"\r\n          kind=\"info\"\r\n        >\r\n          <Trans>\r\n            The shape used in the Physics behavior is independent from the\r\n            collision mask of the object. Be sure to use the \"Collision\"\r\n            condition provided by the Physics behavior in the events. The usual\r\n            \"Collision\" condition won't take into account the shape that you've\r\n            set up here.\r\n          </Trans>\r\n        </DismissableAlertMessage>\r\n      </Line>\r\n      <Line>\r\n        <SelectField\r\n          fullWidth\r\n          floatingLabelText={properties.get('shape').getLabel()}\r\n          value={properties.get('shape').getValue()}\r\n          onChange={(e, i, newValue: string) => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'shape',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        >\r\n          <SelectOption key={'box'} value={'Box'} primaryText={t`Box`} />\r\n          <SelectOption\r\n            key={'circle'}\r\n            value={'Circle'}\r\n            primaryText={t`Circle`}\r\n          />\r\n          <SelectOption key={'edge'} value={'Edge'} primaryText={t`Edge`} />\r\n          <SelectOption\r\n            key={'polygon'}\r\n            value={'Polygon'}\r\n            primaryText={t`Polygon`}\r\n          />\r\n        </SelectField>\r\n      </Line>\r\n      <ResponsiveLineStackLayout>\r\n        {shape !== 'Polygon' && (\r\n          <SemiControlledTextField\r\n            fullWidth\r\n            value={properties\r\n              .get(shape === 'Polygon' ? 'PolygonOriginX' : 'shapeDimensionA')\r\n              .getValue()}\r\n            key={'shapeDimensionA'}\r\n            floatingLabelText={\r\n              shape === 'Circle'\r\n                ? 'Radius'\r\n                : shape === 'Edge'\r\n                ? 'Length'\r\n                : 'Width'\r\n            }\r\n            min={0}\r\n            onChange={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                shape === 'Polygon' ? 'PolygonOriginX' : 'shapeDimensionA',\r\n                newValue\r\n              );\r\n              forceUpdate();\r\n            }}\r\n            type=\"number\"\r\n          />\r\n        )}\r\n        {shape !== 'Polygon' && shape !== 'Circle' && (\r\n          <SemiControlledTextField\r\n            fullWidth\r\n            value={properties\r\n              .get(shape === 'Polygon' ? 'PolygonOriginY' : 'shapeDimensionB')\r\n              .getValue()}\r\n            key={'shapeDimensionB'}\r\n            floatingLabelText={shape === 'Edge' ? 'Angle' : 'Height'}\r\n            min={shape === 'Edge' ? undefined : 0}\r\n            onChange={newValue => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                shape === 'Polygon' ? 'PolygonOriginY' : 'shapeDimensionB',\r\n                newValue\r\n              );\r\n              forceUpdate();\r\n            }}\r\n            type=\"number\"\r\n          />\r\n        )}\r\n        {shape === 'Polygon' && (\r\n          <SelectField\r\n            fullWidth\r\n            floatingLabelText={properties.get('polygonOrigin').getLabel()}\r\n            value={properties.get('polygonOrigin').getValue()}\r\n            onChange={(e, i, newValue: string) => {\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'polygonOrigin',\r\n                newValue\r\n              );\r\n              forceUpdate();\r\n            }}\r\n          >\r\n            {[\r\n              <SelectOption\r\n                key={'center'}\r\n                value={'Center'}\r\n                primaryText={t`Center`}\r\n              />,\r\n              <SelectOption\r\n                key={'origin'}\r\n                value={'Origin'}\r\n                primaryText={t`Origin`}\r\n              />,\r\n              <SelectOption\r\n                key={'topLeft'}\r\n                value={'TopLeft'}\r\n                primaryText={t`Top-Left`}\r\n              />,\r\n            ]}\r\n          </SelectField>\r\n        )}\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'shapeOffsetX'}\r\n          step={1}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'shapeOffsetX',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'shapeOffsetY'}\r\n          step={1}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'shapeOffsetY',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </ResponsiveLineStackLayout>\r\n      <Line>\r\n        <ResourceSelector\r\n          floatingLabelText={\r\n            <Trans>\r\n              A temporary image to help you visualize the shape/polygon\r\n            </Trans>\r\n          }\r\n          project={props.project}\r\n          resourceSources={props.resourceSources}\r\n          onChooseResource={props.onChooseResource}\r\n          resourceExternalEditors={props.resourceExternalEditors}\r\n          resourcesLoader={resourcesLoader}\r\n          resourceKind={'image'}\r\n          initialResourceName={''}\r\n          fullWidth\r\n          onChange={resourceName => {\r\n            setImage(resourceName);\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </Line>\r\n      {!image && (\r\n        <Line>\r\n          <EmptyMessage>\r\n            <Trans>\r\n              To preview the shape that the Physics engine will use for this\r\n              object, choose first a temporary image to use for the preview.\r\n            </Trans>\r\n          </EmptyMessage>\r\n        </Line>\r\n      )}\r\n      {image && (\r\n        <Line>\r\n          <div\r\n            style={{\r\n              width:\r\n                '100%' /* This div prevents ImagePreview to overflow outside the parent */,\r\n            }}\r\n          >\r\n            <ImagePreview\r\n              resourceName={image}\r\n              project={props.project}\r\n              resourcesLoader={resourcesLoader}\r\n              fixedHeight={200}\r\n              renderOverlay={overlayProps => {\r\n                // The result from `getProperties` is temporary, and because this renderOverlay\r\n                // function can be called outside of the render, we must get the properties again.\r\n                const properties = behavior.getProperties(\r\n                  behaviorContent.getContent()\r\n                );\r\n\r\n                return (\r\n                  <ShapePreview\r\n                    shape={properties.get('shape').getValue()}\r\n                    dimensionA={parseFloat(\r\n                      properties.get('shapeDimensionA').getValue()\r\n                    )}\r\n                    dimensionB={parseFloat(\r\n                      properties.get('shapeDimensionB').getValue()\r\n                    )}\r\n                    offsetX={parseFloat(\r\n                      properties.get('shapeOffsetX').getValue()\r\n                    )}\r\n                    offsetY={parseFloat(\r\n                      properties.get('shapeOffsetY').getValue()\r\n                    )}\r\n                    polygonOrigin={properties.get('polygonOrigin').getValue()}\r\n                    vertices={JSON.parse(properties.get('vertices').getValue())}\r\n                    width={overlayProps.imageWidth}\r\n                    height={overlayProps.imageHeight}\r\n                    frameOffsetTop={overlayProps.offsetTop}\r\n                    frameOffsetLeft={overlayProps.offsetLeft}\r\n                    zoomFactor={overlayProps.imageZoomFactor}\r\n                    onMoveVertex={(index, newX, newY) => {\r\n                      let vertices = JSON.parse(\r\n                        properties.get('vertices').getValue()\r\n                      );\r\n                      vertices[index].x = newX;\r\n                      vertices[index].y = newY;\r\n                      behavior.updateProperty(\r\n                        behaviorContent.getContent(),\r\n                        'vertices',\r\n                        JSON.stringify(vertices)\r\n                      );\r\n                      forceUpdate();\r\n                    }}\r\n                  />\r\n                );\r\n              }}\r\n            />\r\n          </div>\r\n        </Line>\r\n      )}\r\n      {shape === 'Polygon' && (\r\n        <Line>\r\n          <PolygonEditor\r\n            vertices={JSON.parse(properties.get('vertices').getValue())}\r\n            onChangeVertexX={(newValue, index) => {\r\n              let vertices = JSON.parse(properties.get('vertices').getValue());\r\n              vertices[index].x = newValue;\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'vertices',\r\n                JSON.stringify(vertices)\r\n              );\r\n              forceUpdate();\r\n            }}\r\n            onChangeVertexY={(newValue, index) => {\r\n              let vertices = JSON.parse(properties.get('vertices').getValue());\r\n              vertices[index].y = newValue;\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'vertices',\r\n                JSON.stringify(vertices)\r\n              );\r\n              forceUpdate();\r\n            }}\r\n            onAdd={() => {\r\n              let vertices = JSON.parse(properties.get('vertices').getValue());\r\n              if (vertices.length >= 8) return;\r\n              vertices.push({ x: 0, y: 0 });\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'vertices',\r\n                JSON.stringify(vertices)\r\n              );\r\n              forceUpdate();\r\n            }}\r\n            onRemove={index => {\r\n              let vertices = JSON.parse(properties.get('vertices').getValue());\r\n              vertices.splice(index, 1);\r\n              behavior.updateProperty(\r\n                behaviorContent.getContent(),\r\n                'vertices',\r\n                JSON.stringify(vertices)\r\n              );\r\n              forceUpdate();\r\n            }}\r\n          />\r\n        </Line>\r\n      )}\r\n      <ResponsiveLineStackLayout>\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'density'}\r\n          step={0.1}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'density',\r\n              parseFloat(newValue) > 0 ? newValue : '0'\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'gravityScale'}\r\n          step={0.1}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'gravityScale',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </ResponsiveLineStackLayout>\r\n      <ResponsiveLineStackLayout>\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'friction'}\r\n          step={0.1}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'friction',\r\n              parseFloat(newValue) > 0 ? newValue : '0'\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'restitution'}\r\n          step={0.1}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'restitution',\r\n              parseFloat(newValue) > 0 ? newValue : '0'\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </ResponsiveLineStackLayout>\r\n      <ResponsiveLineStackLayout>\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'linearDamping'}\r\n          step={0.05}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'linearDamping',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n        <NumericProperty\r\n          properties={properties}\r\n          propertyName={'angularDamping'}\r\n          step={0.05}\r\n          onUpdate={newValue => {\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'angularDamping',\r\n              newValue\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </ResponsiveLineStackLayout>\r\n      <Line>\r\n        <Text style={{ marginRight: 10 }}>\r\n          {properties.get('layers').getLabel()}\r\n        </Text>\r\n        <BitGroupEditor\r\n          bits={bits.map((_, idx) => isBitEnabled(layersValues, idx))}\r\n          onChange={(index, value) => {\r\n            const newValue = enableBit(layersValues, index, value);\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'layers',\r\n              newValue.toString(10)\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </Line>\r\n      <Line>\r\n        <Text style={{ marginRight: 10 }}>\r\n          {properties.get('masks').getLabel()}\r\n        </Text>\r\n        <BitGroupEditor\r\n          bits={bits.map((_, idx) => isBitEnabled(masksValues, idx))}\r\n          onChange={(index, value) => {\r\n            const newValue = enableBit(masksValues, index, value);\r\n            behavior.updateProperty(\r\n              behaviorContent.getContent(),\r\n              'masks',\r\n              newValue.toString(10)\r\n            );\r\n            forceUpdate();\r\n          }}\r\n        />\r\n      </Line>\r\n    </Column>\r\n  );\r\n};\r\n\r\nexport default Physics2Editor;\r\n","// @flow\nimport BehaviorPropertiesEditor from './Editors/BehaviorPropertiesEditor';\nimport Physics2Editor from './Editors/Physics2Editor';\n\n/**\n * A service returning editor components for each behavior type.\n */\nexport default {\n  getEditor(behaviorType: string) {\n    if (!this.components[behaviorType]) {\n      return BehaviorPropertiesEditor; // Default properties editor\n    }\n    return this.components[behaviorType].component; // Custom  behavior editor\n  },\n  components: {\n    'Physics2::Physics2Behavior': {\n      component: Physics2Editor,\n    },\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport { getShortcutMetadataFromEvent, getShortcutDisplayName } from './index';\n\nconst styles = {\n  shortcutBox: {\n    padding: 15,\n    textAlign: 'center',\n  },\n};\n\ntype Props = {|\n  commandText: ?string,\n  onSet: (shortcut: string) => void,\n  onClose: () => void,\n|};\n\nconst DetectShortcutDialog = (props: Props) => {\n  const [shortcutString, setShortcutString] = React.useState('');\n  const [isValid, setIsValid] = React.useState(false);\n\n  const onApply = () => {\n    shortcutString && props.onSet(shortcutString);\n    props.onClose();\n  };\n\n  React.useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      e.preventDefault();\n      const metadata = getShortcutMetadataFromEvent(e);\n      if (e.type === 'keyup') return;\n      setIsValid(metadata.isValid);\n      setShortcutString(metadata.shortcutString);\n    };\n    document.addEventListener('keyup', handler);\n    document.addEventListener('keydown', handler);\n    return () => {\n      document.removeEventListener('keydown', handler);\n      document.removeEventListener('keyup', handler);\n    };\n  }, []);\n\n  return (\n    <Dialog\n      onApply={onApply}\n      open\n      title={<Trans>Set shortcut</Trans>}\n      onRequestClose={props.onClose}\n      cannotBeDismissed={false}\n      maxWidth=\"xs\"\n      actions={[\n        <FlatButton\n          key=\"Cancel\"\n          label={<Trans>Cancel</Trans>}\n          onClick={props.onClose}\n        />,\n        <FlatButton\n          label={<Trans>Set shortcut</Trans>}\n          primary\n          key=\"Set\"\n          onClick={onApply}\n          disabled={!isValid}\n        />,\n      ]}\n      secondaryActions={[\n        <FlatButton\n          key=\"Remove\"\n          label={<Trans>Remove shortcut</Trans>}\n          onClick={() => {\n            props.onSet('');\n            props.onClose();\n          }}\n        />,\n      ]}\n    >\n      <Typography>{props.commandText}</Typography>\n      <Paper variant=\"outlined\" style={styles.shortcutBox}>\n        <Typography>\n          {shortcutString ? (\n            getShortcutDisplayName(shortcutString)\n          ) : (\n            <Trans>Press a shortcut combination...</Trans>\n          )}\n        </Typography>\n      </Paper>\n    </Dialog>\n  );\n};\n\nexport default DetectShortcutDialog;\n","// @flow\nimport * as React from 'react';\nimport { t, Trans } from '@lingui/macro';\nimport { type I18n } from '@lingui/core';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Chip from '@material-ui/core/Chip';\nimport IconButton from '../UI/IconButton';\nimport RotateLeftIcon from '@material-ui/icons/RotateLeft';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport commandsList, { type CommandName } from '../CommandPalette/CommandsList';\n\nconst styles = {\n  shortcutChip: {\n    borderRadius: 3,\n  },\n};\n\ntype Props = {|\n  i18n: I18n,\n  commandName: CommandName,\n  isDefault: boolean,\n  shortcutString: string,\n  isClashing: boolean,\n  onEditShortcut: () => void,\n  onResetShortcut: () => void,\n|};\n\nconst ShortcutsListRow = (props: Props) => {\n  return (\n    <ListItem>\n      <ListItemText\n        primary={props.i18n._(commandsList[props.commandName].displayText)}\n      />\n      <ListItemSecondaryAction>\n        {props.isClashing && (\n          <IconButton tooltip={t`This shortcut clashes with another action.`}>\n            <WarningIcon />\n          </IconButton>\n        )}\n        <Chip\n          style={styles.shortcutChip}\n          label={props.shortcutString || <Trans>No shortcut</Trans>}\n          onClick={props.onEditShortcut}\n          title={props.i18n._(t`Edit shortcut`)}\n          color={props.shortcutString ? 'secondary' : 'default'}\n        />\n        {!props.isDefault && (\n          <IconButton\n            onClick={props.onResetShortcut}\n            tooltip={t`Reset to default`}\n          >\n            <RotateLeftIcon />\n          </IconButton>\n        )}\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n};\n\nexport default ShortcutsListRow;\n","// @flow\nimport * as React from 'react';\nimport { t, Trans } from '@lingui/macro';\nimport { type I18n } from '@lingui/core';\nimport List from '@material-ui/core/List';\nimport Text from '../UI/Text';\nimport DetectShortcutDialog from './DetectShortcutDialog';\nimport { Line } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\nimport DismissableAlertMessage from '../UI/DismissableAlertMessage';\nimport { type ShortcutMap } from './DefaultShortcuts';\nimport { getShortcutDisplayName } from './index';\nimport Window from '../Utils/Window';\nimport defaultShortcuts from '../KeyboardShortcuts/DefaultShortcuts';\nimport ShortcutsListRow from './ShortcutsListRow';\nimport commandsList, {\n  type CommandName,\n  commandAreas,\n} from '../CommandPalette/CommandsList';\n\n/**\n * Sorts all commands into an object keyed by area name, and also creates a\n * reverse mapping from shortcut string to list of commands with that shortcut.\n */\nconst sortCommandsIntoAreasAndGetReverseMap = (\n  userShortcutMap: ShortcutMap\n) => {\n  const areaWiseCommands = {};\n  const shortcutStringToCommands: { [string]: Array<CommandName> } = {};\n  Object.keys(commandsList)\n    .filter(name => !commandsList[name].noShortcut)\n    .forEach(name => {\n      // Sort commands by area\n      const areaName = commandsList[name].area;\n      if (!areaWiseCommands[areaName]) areaWiseCommands[areaName] = [];\n      areaWiseCommands[areaName].push(name);\n\n      // Add to shortcut-command mapping\n      const userShortcut = userShortcutMap[name];\n      const defaultShortcut = defaultShortcuts[name] || '';\n      const shortcutString = userShortcut || defaultShortcut;\n      if (shortcutString === '') return;\n      shortcutStringToCommands[shortcutString] = (\n        shortcutStringToCommands[shortcutString] || []\n      ).concat(name);\n    });\n\n  return [areaWiseCommands, shortcutStringToCommands];\n};\n\ntype Props = {|\n  i18n: I18n,\n  userShortcutMap: ShortcutMap,\n  onEdit: (commandName: CommandName, shortcut: string) => void,\n  onReset: () => void,\n|};\n\nconst ShortcutsList = (props: Props) => {\n  const [\n    editedShortcut,\n    setEditedShortcut,\n  ] = React.useState<null | CommandName>(null);\n\n  const resetAllShortcutsToDefault = () => {\n    const answer = Window.showConfirmDialog(\n      props.i18n._(\n        t`Are you sure you want to reset all shortcuts to their default values?`\n      ),\n      'question'\n    );\n    if (answer) props.onReset();\n  };\n\n  const resetShortcut = (commandName: CommandName) => {\n    props.onEdit(commandName, defaultShortcuts[commandName]);\n  };\n\n  const [\n    areaWiseCommands,\n    shortcutStringToCommands,\n  ] = sortCommandsIntoAreasAndGetReverseMap(props.userShortcutMap);\n\n  const commandPaletteShortcut = getShortcutDisplayName(\n    props.userShortcutMap['OPEN_COMMAND_PALETTE'] ||\n      defaultShortcuts['OPEN_COMMAND_PALETTE']\n  );\n\n  return (\n    <>\n      <Line>\n        <DismissableAlertMessage\n          kind=\"info\"\n          identifier=\"command-palette-shortcut\"\n        >\n          <Trans>You can open the command palette by pressing</Trans>{' '}\n          {commandPaletteShortcut}\n        </DismissableAlertMessage>\n      </Line>\n      <Line>\n        <RaisedButton\n          label={<Trans>Reset all shortcuts to default</Trans>}\n          onClick={resetAllShortcutsToDefault}\n        />\n      </Line>\n      <List>\n        {Object.keys(areaWiseCommands).map(areaName => (\n          <React.Fragment key={areaName}>\n            <Text size=\"title\">{props.i18n._(commandAreas[areaName])}</Text>\n            {areaWiseCommands[areaName].map(commandName => {\n              // Get default and user-set shortcuts\n              const userShortcut = props.userShortcutMap[commandName];\n              const defaultShortcut = defaultShortcuts[commandName] || '';\n              const shortcutString = userShortcut || defaultShortcut;\n              const shortcutDisplayName = getShortcutDisplayName(\n                shortcutString\n              );\n              // Check if shortcut clashes with another command\n              const clashingCommands = shortcutStringToCommands[shortcutString];\n              const hasClash = clashingCommands && clashingCommands.length > 1;\n\n              return (\n                <ShortcutsListRow\n                  i18n={props.i18n}\n                  key={commandName}\n                  shortcutString={shortcutDisplayName}\n                  commandName={commandName}\n                  isDefault={!userShortcut}\n                  isClashing={hasClash}\n                  onEditShortcut={() => setEditedShortcut(commandName)}\n                  onResetShortcut={() => resetShortcut(commandName)}\n                />\n              );\n            })}\n          </React.Fragment>\n        ))}\n      </List>\n      {editedShortcut && (\n        <DetectShortcutDialog\n          commandText={props.i18n._(commandsList[editedShortcut].displayText)}\n          onClose={() => setEditedShortcut(null)}\n          onSet={shortcut => {\n            props.onEdit(editedShortcut, shortcut);\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ShortcutsList;\n","// @flow\nimport { t, Trans } from '@lingui/macro';\nimport { type I18n } from '@lingui/core';\n\nimport React from 'react';\nimport SelectField from '../../UI/SelectField';\nimport FlatButton from '../../UI/FlatButton';\nimport SelectOption from '../../UI/SelectOption';\nimport Toggle from '../../UI/Toggle';\nimport Dialog from '../../UI/Dialog';\nimport { Column, Line, Spacer } from '../../UI/Grid';\nimport { themes } from '../../UI/Theme';\nimport { getAllThemes } from '../../CodeEditor/Theme';\nimport Window from '../../Utils/Window';\nimport optionalRequire from '../../Utils/OptionalRequire';\nimport PreferencesContext from './PreferencesContext';\nimport Text from '../../UI/Text';\nimport { ResponsiveLineStackLayout } from '../../UI/Layout';\nimport { Tabs, Tab } from '../../UI/Tabs';\nimport RaisedButton from '../../UI/RaisedButton';\nimport ShortcutsList from '../../KeyboardShortcuts/ShortcutsList';\nconst electron = optionalRequire('electron');\n\ntype Props = {|\n  i18n: I18n,\n  onClose: Function,\n|};\n\nconst PreferencesDialog = ({ i18n, onClose }: Props) => {\n  const [currentTab, setCurrentTab] = React.useState('preferences');\n  const {\n    values,\n    setThemeName,\n    setCodeEditorThemeName,\n    setAutoDownloadUpdates,\n    showAllAlertMessages,\n    showAllTutorialHints,\n    setAutoDisplayChangelog,\n    setEventsSheetShowObjectThumbnails,\n    setAutosaveOnPreview,\n    setUseNewInstructionEditorDialog,\n    setUseUndefinedVariablesInAutocompletion,\n    setUseGDJSDevelopmentWatcher,\n    setEventsSheetUseAssignmentOperators,\n    getDefaultEditorMosaicNode,\n    setDefaultEditorMosaicNode,\n    setAutoOpenMostRecentProject,\n    resetShortcutsToDefault,\n    setShortcutForCommand,\n    setIsMenuBarHiddenInPreview,\n    setBackdropClickBehavior,\n    setIsAlwaysOnTopInPreview,\n    setEventsSheetCancelInlineParameter,\n  } = React.useContext(PreferencesContext);\n\n  return (\n    <Dialog\n      actions={[\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary={false}\n          onClick={onClose}\n        />,\n      ]}\n      onRequestClose={onClose}\n      cannotBeDismissed={true}\n      open\n      noTitleMargin\n      maxWidth=\"sm\"\n      noMargin\n      title={\n        <Tabs value={currentTab} onChange={setCurrentTab}>\n          <Tab label={<Trans>Preferences</Trans>} value=\"preferences\" />\n          <Tab label={<Trans>Keyboard Shortcuts</Trans>} value=\"shortcuts\" />\n        </Tabs>\n      }\n    >\n      {currentTab === 'preferences' && (\n        <Column>\n          <Text size=\"title\">\n            <Trans>Appearance</Trans>\n          </Text>\n          <ResponsiveLineStackLayout noMargin>\n            <SelectField\n              floatingLabelText={<Trans>UI Theme</Trans>}\n              value={values.themeName}\n              onChange={(e, i, value: string) => setThemeName(value)}\n              fullWidth\n            >\n              {Object.keys(themes).map(themeName => (\n                <SelectOption\n                  value={themeName}\n                  primaryText={themeName}\n                  key={themeName}\n                />\n              ))}\n            </SelectField>\n            <SelectField\n              floatingLabelText={<Trans>Code editor Theme</Trans>}\n              value={values.codeEditorThemeName}\n              onChange={(e, i, value: string) => setCodeEditorThemeName(value)}\n              fullWidth\n            >\n              {getAllThemes().map(codeEditorTheme => (\n                <SelectOption\n                  value={codeEditorTheme.themeName}\n                  primaryText={codeEditorTheme.name}\n                  key={codeEditorTheme.themeName}\n                />\n              ))}\n            </SelectField>\n          </ResponsiveLineStackLayout>\n          <Line noMargin>\n            <Text>\n              <Trans>You can contribute and create your own themes: </Trans>\n            </Text>\n            <FlatButton\n              label={<Trans>Learn more</Trans>}\n              onClick={() => {\n                Window.openExternalURL(\n                  'https://github.com/4ian/GDevelop/tree/master/newIDE#theming'\n                );\n              }}\n            />\n          </Line>\n          <Text size=\"title\">\n            <Trans>Layouts</Trans>\n          </Text>\n          <Line>\n            <Column>\n              <RaisedButton\n                label={<Trans>Reset Scene Editor layout</Trans>}\n                onClick={() => setDefaultEditorMosaicNode('scene-editor', null)}\n                disabled={!getDefaultEditorMosaicNode('scene-editor')}\n              />\n              <Spacer />\n              <RaisedButton\n                label={<Trans>Reset Scene Editor (small window) layout</Trans>}\n                onClick={() =>\n                  setDefaultEditorMosaicNode('scene-editor-small', null)\n                }\n                disabled={!getDefaultEditorMosaicNode('scene-editor-small')}\n              />\n              <Spacer />\n              <RaisedButton\n                label={<Trans>Reset Debugger layout</Trans>}\n                onClick={() => setDefaultEditorMosaicNode('debugger', null)}\n                disabled={!getDefaultEditorMosaicNode('debugger')}\n              />\n              <Spacer />\n              <RaisedButton\n                label={<Trans>Reset Resource Editor layout</Trans>}\n                onClick={() =>\n                  setDefaultEditorMosaicNode('resources-editor', null)\n                }\n                disabled={!getDefaultEditorMosaicNode('resources-editor')}\n              />\n              <Spacer />\n              <RaisedButton\n                label={<Trans>Reset Extension Editor layout</Trans>}\n                onClick={() =>\n                  setDefaultEditorMosaicNode(\n                    'events-functions-extension-editor',\n                    null\n                  )\n                }\n                disabled={\n                  !getDefaultEditorMosaicNode(\n                    'events-functions-extension-editor'\n                  )\n                }\n              />\n            </Column>\n          </Line>\n          <Text size=\"title\">\n            <Trans>Dialogs</Trans>\n          </Text>\n          <Line>\n            <SelectField\n              floatingLabelText={<Trans>Dialog backdrop click behavior</Trans>}\n              value={values.backdropClickBehavior}\n              onChange={(e, i, value: string) =>\n                setBackdropClickBehavior(value)\n              }\n              fullWidth\n            >\n              <SelectOption value=\"cancel\" primaryText={t`Cancel changes`} />\n              <SelectOption value=\"apply\" primaryText={t`Apply changes`} />\n              <SelectOption value=\"nothing\" primaryText={t`Do nothing`} />\n            </SelectField>\n          </Line>\n          <Text size=\"title\">\n            <Trans>Updates</Trans>\n          </Text>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutoDownloadUpdates(check)}\n              toggled={values.autoDownloadUpdates}\n              labelPosition=\"right\"\n              label={\n                <Trans>Auto download and install updates (recommended)</Trans>\n              }\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutoDisplayChangelog(check)}\n              toggled={values.autoDisplayChangelog}\n              labelPosition=\"right\"\n              label={\n                <Trans>\n                  Display What's New when a new version is launched\n                  (recommended)\n                </Trans>\n              }\n            />\n          </Line>\n          <Text size=\"title\">\n            <Trans>Events Sheet</Trans>\n          </Text>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setEventsSheetShowObjectThumbnails(check)}\n              toggled={values.eventsSheetShowObjectThumbnails}\n              labelPosition=\"right\"\n              label={<Trans>Display object thumbnails in Events Sheets</Trans>}\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) =>\n                setEventsSheetUseAssignmentOperators(check)\n              }\n              toggled={values.eventsSheetUseAssignmentOperators}\n              labelPosition=\"right\"\n              label={\n                <Trans>Display assignment operators in Events Sheets</Trans>\n              }\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setUseNewInstructionEditorDialog(check)}\n              toggled={values.useNewInstructionEditorDialog}\n              labelPosition=\"right\"\n              label={<Trans>Use the new action/condition editor</Trans>}\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) =>\n                setUseUndefinedVariablesInAutocompletion(check)\n              }\n              toggled={values.useUndefinedVariablesInAutocompletion}\n              labelPosition=\"right\"\n              label={\n                <Trans>\n                  Suggest names of variables used in events but not declared in\n                  the list of variables\n                </Trans>\n              }\n            />\n          </Line>\n          <Line>\n            <SelectField\n              floatingLabelText={\n                <Trans>\n                  Escape key behavior when editing an parameter inline\n                </Trans>\n              }\n              value={values.eventsSheetCancelInlineParameter}\n              onChange={(e, i, value: string) => {\n                setEventsSheetCancelInlineParameter(value);\n              }}\n              fullWidth\n            >\n              <SelectOption value=\"cancel\" primaryText={t`Cancel changes`} />\n              <SelectOption value=\"apply\" primaryText={t`Apply changes`} />\n            </SelectField>\n          </Line>\n          <Text size=\"title\">\n            <Trans>Embedded help and tutorials</Trans>\n          </Text>\n          <Line>\n            <Column noMargin>\n              <Line>\n                <RaisedButton\n                  label={<Trans>Reset hidden embedded explanations</Trans>}\n                  onClick={() => showAllAlertMessages()}\n                  disabled={!Object.keys(values.hiddenAlertMessages).length}\n                />\n              </Line>\n              <Line>\n                <RaisedButton\n                  label={<Trans>Reset hidden embedded tutorials</Trans>}\n                  onClick={() => showAllTutorialHints()}\n                  disabled={!Object.keys(values.hiddenTutorialHints).length}\n                />\n              </Line>\n            </Column>\n          </Line>\n          <Text size=\"title\">\n            <Trans>Advanced</Trans>\n          </Text>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutosaveOnPreview(check)}\n              toggled={values.autosaveOnPreview}\n              labelPosition=\"right\"\n              label={<Trans>Auto-save project on Preview</Trans>}\n            />\n          </Line>\n          <Line>\n            <Toggle\n              onToggle={(e, check) => setAutoOpenMostRecentProject(check)}\n              toggled={values.autoOpenMostRecentProject}\n              labelPosition=\"right\"\n              label={\n                <Trans>\n                  Automatically re-open the project edited during last session\n                </Trans>\n              }\n            />\n          </Line>\n          {electron && (\n            <>\n              <Line>\n                <Toggle\n                  onToggle={(e, check) => setIsMenuBarHiddenInPreview(check)}\n                  toggled={values.isMenuBarHiddenInPreview}\n                  labelPosition=\"right\"\n                  label={<Trans>Hide the menu bar in the preview window</Trans>}\n                />\n              </Line>\n              <Line>\n                <Toggle\n                  onToggle={(e, check) => setIsAlwaysOnTopInPreview(check)}\n                  toggled={values.isAlwaysOnTopInPreview}\n                  labelPosition=\"right\"\n                  label={\n                    <Trans>\n                      Always display the preview window on top of the editor\n                    </Trans>\n                  }\n                />\n              </Line>\n            </>\n          )}\n          {Window.isDev() && (\n            <Line>\n              <Toggle\n                onToggle={(e, check) => setUseGDJSDevelopmentWatcher(check)}\n                toggled={values.useGDJSDevelopmentWatcher}\n                labelPosition=\"right\"\n                label={\n                  <Trans>\n                    Watch changes in game engine (GDJS) sources and auto import\n                    them (dev only)\n                  </Trans>\n                }\n              />\n            </Line>\n          )}\n        </Column>\n      )}\n      {currentTab === 'shortcuts' && (\n        <Column>\n          <ShortcutsList\n            i18n={i18n}\n            userShortcutMap={values.userShortcutMap}\n            onEdit={setShortcutForCommand}\n            onReset={resetShortcutsToDefault}\n          />\n        </Column>\n      )}\n    </Dialog>\n  );\n};\n\nexport default PreferencesDialog;\n","// @flow\nimport * as React from 'react';\nimport MuiBadge from '@material-ui/core/Badge';\n\ntype Props = {|\n  children: React.Node,\n  badgeContent: React.Node,\n  color: 'error' | 'primary' | 'secondary' | 'default',\n|};\n\nexport default function Badge(props: Props) {\n  return <MuiBadge {...props} />;\n}\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport { TreeTableRow, TreeTableCell } from '../UI/TreeTable';\nimport InlineCheckbox from '../UI/InlineCheckbox';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport FlareIcon from '@material-ui/icons/Flare';\nimport IconButton from '../UI/IconButton';\nimport Delete from '@material-ui/icons/Delete';\nimport TextField from '../UI/TextField';\nimport DragHandle from '../UI/DragHandle';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport EmojiObjectsIcon from '@material-ui/icons/EmojiObjects';\nimport EditIcon from '@material-ui/icons/Edit';\nimport Badge from '../UI/Badge';\n\ntype Props = {|\n  layerName: string,\n  nameError: boolean,\n  onBlur: () => void,\n  onRemove: () => void,\n  isVisible: boolean,\n  isLightingLayer: boolean,\n  onChangeVisibility: boolean => void,\n  effectsCount: number,\n  onEditEffects: () => void,\n  onEdit: () => void,\n  width: number,\n|};\n\nexport default ({\n  layerName,\n  nameError,\n  onBlur,\n  onRemove,\n  isVisible,\n  effectsCount,\n  onEditEffects,\n  onChangeVisibility,\n  width,\n  isLightingLayer,\n  onEdit,\n}: Props) => (\n  <I18n>\n    {({ i18n }) => (\n      <TreeTableRow>\n        <TreeTableCell>\n          <DragHandle />\n        </TreeTableCell>\n        <TreeTableCell expand>\n          <TextField\n            margin=\"none\"\n            defaultValue={layerName || i18n._(t`Base layer`)}\n            id={layerName}\n            errorText={\n              nameError ? <Trans>This name is already taken</Trans> : undefined\n            }\n            disabled={!layerName}\n            onBlur={onBlur}\n            fullWidth\n          />\n        </TreeTableCell>\n        <TreeTableCell>\n          {width < 350 ? (\n            <ElementWithMenu\n              element={\n                <IconButton size=\"small\">\n                  <MoreVert />\n                </IconButton>\n              }\n              buildMenuTemplate={(i18n: I18nType) => [\n                {\n                  label: isLightingLayer\n                    ? i18n._(t`Edit lighting properties`)\n                    : i18n._(t`Edit properties`),\n                  click: onEdit,\n                },\n                {\n                  label: i18n._(t`Edit effects (${effectsCount})`),\n                  click: onEditEffects,\n                },\n                {\n                  type: 'checkbox',\n                  label: i18n._(t`Visible`),\n                  checked: isVisible,\n                  click: () => onChangeVisibility(!isVisible),\n                },\n                { type: 'separator' },\n                {\n                  label: i18n._(t`Delete`),\n                  enabled: !!layerName,\n                  click: onRemove,\n                },\n              ]}\n            />\n          ) : (\n            <React.Fragment>\n              <InlineCheckbox\n                checked={isVisible}\n                checkedIcon={<Visibility />}\n                uncheckedIcon={<VisibilityOff />}\n                onCheck={(e, value) => onChangeVisibility(value)}\n              />\n              <IconButton\n                size=\"small\"\n                onClick={onEditEffects}\n                tooltip={t`Edit effects (${effectsCount})`}\n              >\n                <Badge badgeContent={effectsCount} color=\"primary\">\n                  <FlareIcon />\n                </Badge>\n              </IconButton>\n              <IconButton\n                size=\"small\"\n                onClick={onEdit}\n                tooltip={\n                  isLightingLayer\n                    ? t`Edit lighting properties`\n                    : t`Edit properties`\n                }\n              >\n                {isLightingLayer ? <EmojiObjectsIcon /> : <EditIcon />}\n              </IconButton>\n              <IconButton\n                size=\"small\"\n                onClick={onRemove}\n                disabled={!layerName}\n                tooltip={t`Delete the layer`}\n              >\n                <Delete />\n              </IconButton>\n            </React.Fragment>\n          )}\n        </TreeTableCell>\n      </TreeTableRow>\n    )}\n  </I18n>\n);\n","// @flow\nimport { I18n } from '@lingui/react';\nimport { t } from '@lingui/macro';\nimport React from 'react';\nimport TextField from '../UI/TextField';\nimport ColorPicker from '../UI/ColorField/ColorPicker';\nimport { TreeTableCell, TreeTableRow } from '../UI/TreeTable';\nimport DragHandle from '../UI/DragHandle';\n\ntype Props = {|\n  layout: gdLayout,\n  onBackgroundColorChanged: () => void,\n|};\n\nexport default ({ layout, onBackgroundColorChanged }: Props) => (\n  <I18n>\n    {({ i18n }) => (\n      <TreeTableRow>\n        <TreeTableCell>\n          <DragHandle disabled />\n        </TreeTableCell>\n        <TreeTableCell expand>\n          <TextField\n            fullWidth\n            value={i18n._(t`Background color`)}\n            margin=\"none\"\n            disabled\n          />\n        </TreeTableCell>\n        <TreeTableCell>\n          <ColorPicker\n            disableAlpha\n            color={{\n              r: layout.getBackgroundColorRed(),\n              g: layout.getBackgroundColorGreen(),\n              b: layout.getBackgroundColorBlue(),\n              a: 255,\n            }}\n            onChangeComplete={color => {\n              layout.setBackgroundColor(color.rgb.r, color.rgb.g, color.rgb.b);\n              onBackgroundColorChanged();\n            }}\n          />\n        </TreeTableCell>\n      </TreeTableRow>\n    )}\n  </I18n>\n);\n","// @flow\nimport { t, Trans } from '@lingui/macro';\nimport React, { Component } from 'react';\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport { mapReverseFor } from '../Utils/MapFor';\nimport LayerRow from './LayerRow';\nimport BackgroundColorRow from './BackgroundColorRow';\nimport { Column, Line } from '../UI/Grid';\nimport Add from '@material-ui/icons/Add';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../ResourcesList/ResourceExternalEditor.flow';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\nimport ScrollView from '../UI/ScrollView';\nimport { FullSizeMeasurer } from '../UI/FullSizeMeasurer';\nimport Background from '../UI/Background';\nimport { type HotReloadPreviewButtonProps } from '../HotReload/HotReloadPreviewButton';\nimport RaisedButtonWithSplitMenu from '../UI/RaisedButtonWithSplitMenu';\n\nconst SortableLayerRow = SortableElement(LayerRow);\n\ntype LayersListBodyState = {|\n  nameErrors: { [string]: boolean },\n|};\n\nclass LayersListBody extends Component<*, LayersListBodyState> {\n  state = {\n    nameErrors: {},\n  };\n\n  _onLayerModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  render() {\n    const { layersContainer, onEditEffects, onEdit, width } = this.props;\n\n    const layersCount = layersContainer.getLayersCount();\n    const containerLayersList = mapReverseFor(0, layersCount, i => {\n      const layer = layersContainer.getLayerAt(i);\n      const layerName = layer.getName();\n      const isLightingLayer = layer.isLightingLayer();\n\n      return (\n        <SortableLayerRow\n          index={layersCount - 1 - i}\n          key={'layer-' + layerName}\n          layer={layer}\n          layerName={layerName}\n          isLightingLayer={isLightingLayer}\n          nameError={this.state.nameErrors[layerName]}\n          effectsCount={layer.getEffects().getEffectsCount()}\n          onEditEffects={() => onEditEffects(layer)}\n          onEdit={() => onEdit(layer)}\n          onBlur={event => {\n            const newName = event.target.value;\n            if (layerName === newName) return;\n\n            let success = true;\n            if (layersContainer.hasLayerNamed(newName)) {\n              success = false;\n            } else {\n              this.props.onRenameLayer(layerName, newName, doRename => {\n                if (doRename)\n                  layersContainer.getLayer(layerName).setName(newName);\n              });\n            }\n\n            this.setState({\n              nameErrors: {\n                ...this.state.nameErrors,\n                [layerName]: !success,\n              },\n            });\n          }}\n          onRemove={() => {\n            this.props.onRemoveLayer(layerName, doRemove => {\n              if (!doRemove) return;\n\n              layersContainer.removeLayer(layerName);\n              this._onLayerModified();\n            });\n          }}\n          isVisible={layer.getVisibility()}\n          onChangeVisibility={visible => {\n            layer.setVisibility(visible);\n            this._onLayerModified();\n          }}\n          width={width}\n        />\n      );\n    });\n\n    return (\n      <Column noMargin expand>\n        {containerLayersList}\n        <BackgroundColorRow\n          layout={layersContainer}\n          onBackgroundColorChanged={() => this._onLayerModified()}\n        />\n      </Column>\n    );\n  }\n}\n\nconst SortableLayersListBody = SortableContainer(LayersListBody);\n\ntype Props = {|\n  project: gdProject,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  layersContainer: gdLayout,\n  onEditLayerEffects: (layer: ?gdLayer) => void,\n  onEditLayer: (layer: ?gdLayer) => void,\n  onRemoveLayer: (layerName: string, cb: (done: boolean) => void) => void,\n  onRenameLayer: (\n    oldName: string,\n    newName: string,\n    cb: (done: boolean) => void\n  ) => void,\n  unsavedChanges?: ?UnsavedChanges,\n\n  // Preview:\n  hotReloadPreviewButtonProps: HotReloadPreviewButtonProps,\n|};\n\ntype State = {|\n  effectsEditedLayer: ?gdLayer,\n|};\n\nconst hasLightingLayer = (layout: gdLayout) => {\n  const layersCount = layout.getLayersCount();\n  return (\n    mapReverseFor(0, layersCount, i =>\n      layout.getLayerAt(i).isLightingLayer()\n    ).filter(Boolean).length > 0\n  );\n};\n\nexport default class LayersList extends Component<Props, State> {\n  _addLayer = () => {\n    const { layersContainer } = this.props;\n    const name = newNameGenerator('Layer', name =>\n      layersContainer.hasLayerNamed(name)\n    );\n    layersContainer.insertNewLayer(name, layersContainer.getLayersCount());\n    this._onLayerModified();\n  };\n\n  _addLightingLayer = () => {\n    const { layersContainer } = this.props;\n    const name = newNameGenerator('Lighting', name =>\n      layersContainer.hasLayerNamed(name)\n    );\n    layersContainer.insertNewLayer(name, layersContainer.getLayersCount());\n    const layer = layersContainer.getLayer(name);\n    layer.setLightingLayer(true);\n    layer.setFollowBaseLayerCamera(true);\n    layer.setAmbientLightColor(200, 200, 200);\n    this._onLayerModified();\n  };\n\n  _onLayerModified = () => {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  };\n\n  render() {\n    // Force the list to be mounted again if layersContainer\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = this.props.layersContainer.ptr;\n    const isLightingLayerPresent = hasLightingLayer(this.props.layersContainer);\n\n    return (\n      <Background>\n        <ScrollView autoHideScrollbar>\n          <FullSizeMeasurer>\n            {({ width }) => (\n              // TODO: The list is costly to render when there are many layers, consider\n              // using SortableVirtualizedItemList.\n              <SortableLayersListBody\n                key={listKey}\n                layersContainer={this.props.layersContainer}\n                onEditEffects={this.props.onEditLayerEffects}\n                onEdit={this.props.onEditLayer}\n                onRemoveLayer={this.props.onRemoveLayer}\n                onRenameLayer={this.props.onRenameLayer}\n                onSortEnd={({ oldIndex, newIndex }) => {\n                  const layersCount = this.props.layersContainer.getLayersCount();\n                  this.props.layersContainer.moveLayer(\n                    layersCount - 1 - oldIndex,\n                    layersCount - 1 - newIndex\n                  );\n                  this._onLayerModified();\n                }}\n                helperClass=\"sortable-helper\"\n                useDragHandle\n                unsavedChanges={this.props.unsavedChanges}\n                width={width}\n              />\n            )}\n          </FullSizeMeasurer>\n          <Column>\n            <Line justifyContent=\"flex-end\" expand>\n              <RaisedButtonWithSplitMenu\n                label={<Trans>Add a layer</Trans>}\n                primary\n                onClick={this._addLayer}\n                icon={<Add />}\n                buildMenuTemplate={i18n => [\n                  {\n                    label: i18n._(t`Add lighting layer`),\n                    enabled: !isLightingLayerPresent,\n                    click: this._addLightingLayer,\n                  },\n                ]}\n              />\n            </Line>\n          </Column>\n        </ScrollView>\n      </Background>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport { enumerateObjects } from './EnumerateObjects';\nimport { useCommandWithOptions } from '../CommandPalette/CommandHooks';\nimport { type CommandOption } from '../CommandPalette/CommandManager';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\n\nconst generateLayoutObjectsOptions = (\n  project: gdProject,\n  layout: gdLayout,\n  onChoose: (object: gdObject, arg: ?string) => void,\n  onChooseArg: ?string\n): Array<CommandOption> => {\n  return enumerateObjects(project, layout).containerObjectsList.map(item => ({\n    text: item.object.getName(),\n    handler: () => onChoose(item.object, onChooseArg),\n    iconSrc: ObjectsRenderingService.getThumbnail.bind(ObjectsRenderingService)(\n      project,\n      item.object\n    ),\n  }));\n};\n\ntype Props = {|\n  project: gdProject,\n  layout: gdLayout,\n  onEditObject: (object: gdObject, initialTab: ?string) => void,\n  onEditObjectVariables: (object: gdObject) => void,\n|};\n\nconst useObjectsListCommands = (props: Props) => {\n  const { project, layout, onEditObject, onEditObjectVariables } = props;\n  useCommandWithOptions('EDIT_OBJECT', true, {\n    generateOptions: React.useCallback(\n      () => generateLayoutObjectsOptions(project, layout, onEditObject),\n      [project, layout, onEditObject]\n    ),\n  });\n\n  useCommandWithOptions('EDIT_OBJECT_BEHAVIORS', true, {\n    generateOptions: React.useCallback(\n      () =>\n        generateLayoutObjectsOptions(\n          project,\n          layout,\n          onEditObject,\n          'behaviors'\n        ),\n      [project, layout, onEditObject]\n    ),\n  });\n\n  useCommandWithOptions('EDIT_OBJECT_EFFECTS', true, {\n    generateOptions: React.useCallback(\n      () =>\n        generateLayoutObjectsOptions(project, layout, onEditObject, 'effects'),\n      [project, layout, onEditObject]\n    ),\n  });\n\n  useCommandWithOptions('EDIT_OBJECT_VARIABLES', true, {\n    generateOptions: React.useCallback(\n      () =>\n        generateLayoutObjectsOptions(project, layout, onEditObjectVariables),\n      [project, layout, onEditObjectVariables]\n    ),\n  });\n};\n\nexport default useObjectsListCommands;\n","// @flow\nimport * as React from 'react';\nimport { enumerateGroups } from '../ObjectsList/EnumerateObjects';\nimport { useCommandWithOptions } from '../CommandPalette/CommandHooks';\n\ntype Props = {|\n  project: gdProject,\n  layout: gdLayout,\n  onEditObjectGroup: (group: gdObjectGroup) => void,\n|};\n\nconst useObjectGroupsListCommands = (props: Props) => {\n  const { project, layout, onEditObjectGroup } = props;\n\n  useCommandWithOptions('EDIT_OBJECT_GROUP', true, {\n    generateOptions: React.useCallback(\n      () =>\n        [\n          ...enumerateGroups(layout.getObjectGroups()),\n          ...enumerateGroups(project.getObjectGroups()),\n        ].map(group => ({\n          text: group.getName(),\n          handler: () => onEditObjectGroup(group),\n        })),\n      [onEditObjectGroup, project, layout]\n    ),\n  });\n};\n\nexport default useObjectGroupsListCommands;\n","// @flow\nimport * as React from 'react';\nimport { mapReverseFor } from '../Utils/MapFor';\nimport { useCommandWithOptions } from '../CommandPalette/CommandHooks';\n\ntype Props = {|\n  layout: gdLayout,\n  onEditLayerEffects: (layer: gdLayer) => void,\n  onEditLayer: (layer: gdLayer) => void,\n|};\n\nconst useLayersListCommands = (props: Props) => {\n  const { layout, onEditLayerEffects, onEditLayer } = props;\n\n  useCommandWithOptions('EDIT_LAYER_EFFECTS', true, {\n    generateOptions: React.useCallback(\n      () => {\n        const layersCount = layout.getLayersCount();\n        return mapReverseFor(0, layersCount, i => {\n          const layer = layout.getLayerAt(i);\n          return {\n            text: layer.getName() || 'Base layer',\n            handler: () => onEditLayerEffects(layer),\n          };\n        });\n      },\n      [layout, onEditLayerEffects]\n    ),\n  });\n\n  useCommandWithOptions('EDIT_LAYER', true, {\n    generateOptions: React.useCallback(\n      () => {\n        const layersCount = layout.getLayersCount();\n        return mapReverseFor(0, layersCount, i => {\n          const layer = layout.getLayerAt(i);\n          return {\n            text: layer.getName() || 'Base layer',\n            handler: () => onEditLayer(layer),\n          };\n        });\n      },\n      [layout, onEditLayer]\n    ),\n  });\n};\n\nexport default useLayersListCommands;\n","// @flow\nimport { useCommand } from '../CommandPalette/CommandHooks';\nimport useObjectsListCommands from '../ObjectsList/UseObjectsListCommands';\nimport useObjectGroupsListCommands from '../ObjectGroupsList/UseObjectGroupsListCommands';\nimport useLayersListCommands from '../LayersList/UseLayersListCommands';\n\ntype Props = {|\n  project: gdProject,\n  layout: gdLayout,\n  onEditObject: (object: gdObject) => void,\n  onEditObjectVariables: (object: gdObject) => void,\n  onOpenSceneProperties: () => void,\n  onOpenSceneVariables: () => void,\n  onEditObjectGroup: (group: gdObjectGroup) => void,\n  onEditLayerEffects: (layer: gdLayer) => void,\n  onEditLayer: (layer: gdLayer) => void,\n|};\n\nconst UseSceneEditorCommands = (props: Props) => {\n  const {\n    project,\n    layout,\n    onEditObject,\n    onEditObjectVariables,\n    onOpenSceneProperties,\n    onOpenSceneVariables,\n    onEditObjectGroup,\n    onEditLayerEffects,\n    onEditLayer,\n  } = props;\n\n  useCommand('OPEN_SCENE_PROPERTIES', true, {\n    handler: onOpenSceneProperties,\n  });\n\n  useCommand('OPEN_SCENE_VARIABLES', true, {\n    handler: onOpenSceneVariables,\n  });\n\n  useObjectsListCommands({\n    project,\n    layout,\n    onEditObject,\n    onEditObjectVariables,\n  });\n\n  useObjectGroupsListCommands({\n    project,\n    layout,\n    onEditObjectGroup,\n  });\n\n  useLayersListCommands({\n    layout,\n    onEditLayerEffects,\n    onEditLayer,\n  });\n\n  return null;\n};\n\nexport default UseSceneEditorCommands;\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\n\nconst styles = {\n  logo: {\n    width: '100%',\n  },\n};\n\nconst GDevelopLogo = () => (\n  <ThemeConsumer>\n    {muiTheme => <img src={muiTheme.logo.src} alt=\"\" style={styles.logo} />}\n  </ThemeConsumer>\n);\n\nexport default GDevelopLogo;\n","// @flow\nimport * as React from 'react';\nimport ThemeConsumer from '../../../UI/Theme/ThemeConsumer';\n\nconst styles = {\n  scrollContainer: {\n    flex: 1,\n    display: 'flex',\n    overflowY: 'scroll',\n  },\n};\n\ntype Props = {|\n  children: React.Node,\n|};\n\nconst ScrollBackground = ({ children }: Props) => (\n  <ThemeConsumer>\n    {muiTheme => (\n      <div\n        style={{\n          ...styles.scrollContainer,\n          backgroundColor: muiTheme.palette.canvasColor,\n        }}\n      >\n        {children}\n      </div>\n    )}\n  </ThemeConsumer>\n);\n\nexport default ScrollBackground;\n","// @flow\nimport { Trans, t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport * as React from 'react';\nimport FlatButton from '../../../UI/FlatButton';\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '../../../UI/IconButton';\nimport Language from '@material-ui/icons/Language';\nimport { type RenderEditorContainerPropsWithRef } from '../BaseEditor';\nimport Window from '../../../Utils/Window';\nimport { Line } from '../../../UI/Grid';\nimport GDevelopLogo from './GDevelopLogo';\nimport ScrollBackground from './ScrollBackground';\nimport RaisedButton from '../../../UI/RaisedButton';\nimport Text from '../../../UI/Text';\nimport {\n  ColumnStackLayout,\n  ResponsiveLineStackLayout,\n} from '../../../UI/Layout';\nimport ForumIcon from '@material-ui/icons/Forum';\nimport HelpIcon from '@material-ui/icons/Help';\nimport SportsEsportsIcon from '@material-ui/icons/SportsEsports';\n\nconst styles = {\n  innerContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    minHeight: 400,\n  },\n  centerContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'stretch',\n    justifyContent: 'center',\n    flexShrink: 0,\n    maxWidth: 400,\n  },\n  logoPaper: {\n    marginBottom: 10,\n    width: '100%',\n    textAlign: 'center',\n  },\n};\n\ntype Props = {|\n  project: ?gdProject,\n\n  isActive: boolean,\n  projectItemName: ?string,\n  project: ?gdProject,\n  setToolbar: (?React.Node) => void,\n\n  // Project opening\n  canOpen: boolean,\n  onOpen: () => void,\n  onCreate: () => void,\n  onOpenProjectManager: () => void,\n  onCloseProject: () => Promise<void>,\n\n  // Other dialogs opening:\n  onOpenTutorials: () => void,\n  onOpenGamesShowcase: () => void,\n  onOpenHelpFinder: () => void,\n  onOpenLanguageDialog: () => void,\n|};\n\nexport class StartPage extends React.Component<Props, {||}> {\n  shouldComponentUpdate(nextProps: Props) {\n    // Prevent any update to the editor if the editor is not active,\n    // and so not visible to the user.\n    return nextProps.isActive;\n  }\n\n  getProject() {\n    return undefined;\n  }\n\n  updateToolbar() {\n    if (this.props.setToolbar) this.props.setToolbar(null);\n  }\n\n  forceUpdateEditor() {\n    // No updates to be done\n  }\n\n  render() {\n    const {\n      project,\n      canOpen,\n      onOpen,\n      onCreate,\n      onOpenProjectManager,\n      onCloseProject,\n      onOpenTutorials,\n      onOpenGamesShowcase,\n      onOpenHelpFinder,\n      onOpenLanguageDialog,\n    } = this.props;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <ScrollBackground>\n            <div style={styles.innerContainer}>\n              <Line expand justifyContent=\"center\">\n                <div style={styles.centerContainer}>\n                  <Paper\n                    elevation={2}\n                    style={{\n                      ...styles.logoPaper,\n                    }}\n                  >\n                    <GDevelopLogo />\n                    <Text>\n                      <Trans>\n                        GDevelop is an easy-to-use game creator with no\n                        programming language to learn.\n                      </Trans>\n                    </Text>\n                  </Paper>\n                  <ColumnStackLayout noMargin>\n                    {\n                      <RaisedButton\n                        label={<Trans>Getting Started and Tutorials</Trans>}\n                        fullWidth\n                        onClick={onOpenTutorials}\n                      />\n                    }\n                    {!project && (\n                      <RaisedButton\n                        label={<Trans>Create a new project</Trans>}\n                        fullWidth\n                        onClick={onCreate}\n                        primary\n                      />\n                    )}\n                    {!project && canOpen && (\n                      <RaisedButton\n                        label={<Trans>Open a project</Trans>}\n                        fullWidth\n                        onClick={onOpen}\n                        primary\n                      />\n                    )}\n                    {!!project && (\n                      <RaisedButton\n                        label={<Trans>Open Project Manager</Trans>}\n                        fullWidth\n                        onClick={onOpenProjectManager}\n                        primary\n                      />\n                    )}\n                    {!!project && (\n                      <FlatButton\n                        label={<Trans>Close project</Trans>}\n                        fullWidth\n                        onClick={() => {\n                          onCloseProject();\n                        }}\n                      />\n                    )}\n                  </ColumnStackLayout>\n                </div>\n              </Line>\n              <Line noMargin>\n                <ResponsiveLineStackLayout\n                  alignItems=\"center\"\n                  justifyContent=\"space-between\"\n                  expand\n                >\n                  <Line noMargin justifyContent=\"center\">\n                    <FlatButton\n                      icon={<SportsEsportsIcon />}\n                      label={<Trans>GDevelop Games</Trans>}\n                      onClick={onOpenGamesShowcase}\n                    />\n                    <FlatButton\n                      icon={<ForumIcon />}\n                      label={<Trans>Community Forums</Trans>}\n                      onClick={() =>\n                        Window.openExternalURL('https://forum.gdevelop-app.com')\n                      }\n                    />\n                    <FlatButton\n                      icon={<HelpIcon />}\n                      label={<Trans>Help and documentation</Trans>}\n                      onClick={onOpenHelpFinder}\n                    />\n                  </Line>\n                  <Line noMargin alignItems=\"center\" justifyContent=\"center\">\n                    <IconButton\n                      className=\"icon-youtube\"\n                      onClick={() =>\n                        Window.openExternalURL(\n                          'https://www.youtube.com/c/GDevelopApp'\n                        )\n                      }\n                      tooltip={t`Tutorials on YouTube`}\n                    />\n                    <IconButton\n                      className=\"icon-discord\"\n                      onClick={() =>\n                        Window.openExternalURL('https://discord.gg/gdevelop')\n                      }\n                      tooltip={t`GDevelop on Discord`}\n                    />\n                    <IconButton\n                      className=\"icon-reddit\"\n                      onClick={() =>\n                        Window.openExternalURL(\n                          'https://www.reddit.com/r/gdevelop'\n                        )\n                      }\n                      tooltip={t`GDevelop on Reddit`}\n                    />\n                    <IconButton\n                      className=\"icon-twitter\"\n                      onClick={() =>\n                        Window.openExternalURL(\n                          'https://twitter.com/GDevelopApp'\n                        )\n                      }\n                      tooltip={t`GDevelop on Twitter`}\n                    />\n                    <IconButton\n                      className=\"icon-facebook\"\n                      onClick={() =>\n                        Window.openExternalURL(\n                          'https://www.facebook.com/GDevelopApp'\n                        )\n                      }\n                      tooltip={t`GDevelop on Facebook`}\n                    />\n                    <FlatButton\n                      label={i18n.language}\n                      onClick={onOpenLanguageDialog}\n                      icon={<Language />}\n                    />\n                  </Line>\n                </ResponsiveLineStackLayout>\n              </Line>\n            </div>\n          </ScrollBackground>\n        )}\n      </I18n>\n    );\n  }\n}\n\nexport const renderStartPageContainer = (\n  props: RenderEditorContainerPropsWithRef\n) => (\n  <StartPage\n    ref={props.ref}\n    project={props.project}\n    isActive={props.isActive}\n    projectItemName={props.projectItemName}\n    setToolbar={props.setToolbar}\n    canOpen={props.canOpen}\n    onOpen={props.onOpen}\n    onCreate={props.onCreate}\n    onOpenProjectManager={props.onOpenProjectManager}\n    onCloseProject={props.onCloseProject}\n    onOpenTutorials={props.onOpenTutorials}\n    onOpenGamesShowcase={props.onOpenGamesShowcase}\n    onOpenHelpFinder={props.onOpenHelpFinder}\n    onOpenLanguageDialog={props.onOpenLanguageDialog}\n  />\n);\n","// @flow\nimport { fuzzyOrEmptyFilter } from '../../Utils/FuzzyOrEmptyFilter';\n\n/**\n * Filters options both simply and fuzzy-ly,\n * prioritizing simple-matched options\n */\nconst filterOptions = <T>(\n  options: Array<T>,\n  state: { getOptionLabel: T => string, inputValue: string }\n) => {\n  const searchText = state.inputValue.toLowerCase();\n  if (searchText === '') return options;\n\n  const directMatches = [];\n  const fuzzyMatches = [];\n  options.forEach(option => {\n    const optionText = state.getOptionLabel(option).toLowerCase();\n    if (optionText.includes(searchText)) return directMatches.push(option);\n    if (fuzzyOrEmptyFilter(searchText, optionText))\n      return fuzzyMatches.push(option);\n  });\n\n  return [...directMatches, ...fuzzyMatches];\n};\n\nexport default filterOptions;\n","// @flow\nimport * as React from 'react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport ListIcon from '../../UI/ListIcon';\nimport { useShortcutMap } from '../../KeyboardShortcuts';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Chip from '@material-ui/core/Chip';\nimport TextField from '@material-ui/core/TextField';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\nimport filterOptions from './FilterOptions';\nimport { type NamedCommand, type CommandOption } from '../CommandManager';\nimport commandsList, { commandAreas } from '../CommandsList';\nimport { getShortcutDisplayName } from '../../KeyboardShortcuts';\n\nconst useStyles = makeStyles({\n  shortcutChip: {\n    borderRadius: 3,\n  },\n  listItemContainer: {\n    width: '100%',\n  },\n});\n\ntype Item = NamedCommand | CommandOption;\n\ntype Props<T> = {|\n  onClose: () => void,\n  onSelect: (item: T) => void,\n  items: Array<T>,\n  placeholder: MessageDescriptor,\n  i18n: I18nType,\n|};\n\nconst AutocompletePicker = (\n  props: Props<NamedCommand> | Props<CommandOption>\n) => {\n  const [open, setOpen] = React.useState(true);\n  const shortcutMap = useShortcutMap();\n  const classes = useStyles();\n\n  const handleClose = (_, reason) => {\n    if (reason === 'select-option') return;\n    props.onClose();\n  };\n\n  const handleSelect = (_, item) => {\n    props.onSelect(item);\n  };\n\n  const getItemHint = (item: Item) => {\n    if (item.text) return null;\n    else if (item.name) {\n      const shortcutString = shortcutMap[item.name];\n      if (!shortcutString) return null;\n      const shortcutDisplayName = getShortcutDisplayName(shortcutString);\n      return (\n        <ListItemSecondaryAction>\n          <Chip className={classes.shortcutChip} label={shortcutDisplayName} />\n        </ListItemSecondaryAction>\n      );\n    }\n  };\n\n  const getItemText = (item: Item) => {\n    if (item.text) return item.text;\n    else if (item.name) {\n      const { area, displayText } = commandsList[item.name];\n      const areaText = commandAreas[area];\n      return props.i18n._(areaText) + ' 〉' + props.i18n._(displayText);\n    }\n  };\n\n  const getItemIcon = (item: Item) => {\n    if (item.text && item.iconSrc) {\n      return <ListIcon iconSize={20} src={item.iconSrc} />;\n    } else return <ChevronRightIcon />;\n  };\n\n  return (\n    <Autocomplete\n      open={open}\n      onClose={handleClose}\n      onOpen={() => setOpen(true)}\n      options={props.items}\n      getOptionLabel={getItemText}\n      onChange={handleSelect}\n      openOnFocus\n      autoHighlight\n      filterOptions={filterOptions}\n      renderInput={params => (\n        <TextField\n          {...params}\n          placeholder={props.i18n._(props.placeholder)}\n          variant=\"outlined\"\n          autoFocus\n        />\n      )}\n      renderOption={item => (\n        <ListItem\n          dense\n          component=\"div\"\n          ContainerComponent=\"div\"\n          classes={{ container: classes.listItemContainer }}\n        >\n          <ListItemIcon>{getItemIcon(item)}</ListItemIcon>\n          <ListItemText primary={getItemText(item)} />\n          {getItemHint(item)}\n        </ListItem>\n      )}\n    />\n  );\n};\n\nexport default AutocompletePicker;\n","// @flow\nimport React from 'react';\nimport { I18n } from '@lingui/react';\nimport { t } from '@lingui/macro';\nimport Dialog from '@material-ui/core/Dialog';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CommandsContext from '../CommandsContext';\nimport {\n  type NamedCommand,\n  type NamedCommandWithOptions,\n  type CommandOption,\n} from '../CommandManager';\nimport AutocompletePicker from './AutocompletePicker';\nimport commandsList, { type CommandName } from '../CommandsList';\n\n// Show the command palette dialog at the top of the screen\nconst useStyles = makeStyles({\n  scrollPaper: {\n    alignItems: 'flex-start',\n  },\n});\n\nexport type CommandPaletteInterface = {|\n  open: (open?: boolean) => void,\n  launchCommand: (commandName: CommandName) => void,\n|};\n\ntype PaletteMode = 'closed' | 'command' | 'option';\n\nconst CommandPalette = React.forwardRef<{||}, CommandPaletteInterface>(\n  (props, ref) => {\n    const classes = useStyles();\n    const commandManager = React.useContext(CommandsContext);\n    const [mode, setMode] = React.useState<PaletteMode>('closed');\n    const [\n      selectedCommand,\n      selectCommand,\n    ] = React.useState<null | NamedCommandWithOptions>(null);\n\n    // Takes a command and if simple command, executes handler\n    // If command with options, opens options of the palette\n    const handleCommandChoose = React.useCallback(\n      (command: NamedCommand) => {\n        if (command.handler) {\n          // Simple command\n          command.handler();\n          if (command.name !== 'OPEN_COMMAND_PALETTE') {\n            // Don't close palette if the command is for opening it\n            setMode('closed');\n          }\n        } else {\n          // Command with options\n          selectCommand(command);\n          setMode('option');\n        }\n      },\n      [selectCommand, setMode]\n    );\n\n    // Executes handler of a command option and closes palette\n    const handleOptionChoose = (option: CommandOption) => {\n      option.handler();\n      setMode('closed');\n    };\n\n    // Opens the palette in command mode\n    const openPalette = React.useCallback((open? = true) => {\n      if (open) setMode('command');\n      else setMode('closed');\n    }, []);\n\n    // Takes command name, gets command object from\n    // manager and launches command accordingly\n    const launchCommand = React.useCallback(\n      commandName => {\n        const command = commandManager.getNamedCommand(commandName);\n        if (!command) return;\n        handleCommandChoose(command);\n      },\n      [handleCommandChoose, commandManager]\n    );\n\n    React.useImperativeHandle(ref, () => ({\n      open: openPalette,\n      launchCommand,\n    }));\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Dialog\n            onClose={() => setMode('closed')}\n            aria-label=\"command-palette\"\n            open={mode !== 'closed'}\n            fullWidth\n            hideBackdrop\n            maxWidth=\"sm\"\n            classes={classes}\n            transitionDuration={0}\n          >\n            {mode === 'command' && (\n              // Command picker\n              <AutocompletePicker\n                i18n={i18n}\n                items={\n                  (commandManager\n                    .getAllNamedCommands()\n                    .filter(\n                      command => !commandsList[command.name].ghost\n                    ): Array<NamedCommand>)\n                }\n                placeholder={t`Start typing a command...`}\n                onClose={() => setMode('closed')}\n                onSelect={handleCommandChoose}\n              />\n            )}\n            {mode === 'option' && selectedCommand && (\n              // Command options picker\n              <AutocompletePicker\n                i18n={i18n}\n                items={selectedCommand.generateOptions()}\n                placeholder={commandsList[selectedCommand.name]}\n                onClose={() => setMode('closed')}\n                onSelect={handleOptionChoose}\n              />\n            )}\n          </Dialog>\n        )}\n      </I18n>\n    );\n  }\n);\n\nexport default CommandPalette;\n","// @flow\nimport React, { Component } from 'react';\nimport InstructionOrExpressionSelector from './index';\nimport {\n  createTree,\n  type InstructionTreeNode,\n} from '../../../InstructionOrExpression/CreateTree';\nimport { enumerateAllInstructions } from '../../../InstructionOrExpression/EnumerateInstructions';\nimport {\n  type EnumeratedInstructionMetadata,\n  filterEnumeratedInstructionOrExpressionMetadataByScope,\n} from '../../../InstructionOrExpression/EnumeratedInstructionOrExpressionMetadata.js';\nimport { type EventsScope } from '../../../InstructionOrExpression/EventsScope.flow';\n\ntype Props = {|\n  isCondition: boolean,\n  focusOnMount?: boolean,\n  selectedType: string,\n  onChoose: (type: string, EnumeratedInstructionMetadata) => void,\n  scope: EventsScope,\n|};\n\nconst style = {\n  flex: 1,\n  display: 'flex',\n  flexDirection: 'column',\n};\n\nexport default class InstructionSelector extends Component<Props, {||}> {\n  instructionsInfo: Array<EnumeratedInstructionMetadata> = filterEnumeratedInstructionOrExpressionMetadataByScope(\n    enumerateAllInstructions(this.props.isCondition),\n    this.props.scope\n  );\n  instructionsInfoTree: InstructionTreeNode = createTree(this.instructionsInfo);\n\n  render() {\n    const { isCondition, scope, ...otherProps } = this.props;\n    return (\n      <InstructionOrExpressionSelector\n        style={style}\n        instructionsInfo={this.instructionsInfo}\n        instructionsInfoTree={this.instructionsInfoTree}\n        iconSize={24}\n        {...otherProps}\n      />\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport InstructionSelector from './InstructionOrExpressionSelector/InstructionSelector.js';\nimport InstructionParametersEditor from './InstructionParametersEditor.js';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flex: 1,\n  },\n  parametersEditor: {\n    flex: 2,\n    display: 'flex',\n    zIndex: 1, // Put the Paper shadow on the type selector\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  anchorEl?: any, // Unused\n|};\ntype State = {||};\n\nexport default class InstructionEditor extends React.Component<Props, State> {\n  _instructionParametersEditor: ?InstructionParametersEditor;\n\n  chooseType = (type: string) => {\n    const { instruction } = this.props;\n    instruction.setType(type);\n    this.forceUpdate(() => {\n      if (this._instructionParametersEditor) {\n        this._instructionParametersEditor.focus();\n      }\n    });\n  };\n\n  render() {\n    const {\n      instruction,\n      isCondition,\n      project,\n      globalObjectsContainer,\n      objectsContainer,\n      scope,\n    } = this.props;\n\n    return (\n      <div style={styles.container}>\n        <InstructionSelector\n          isCondition={isCondition}\n          selectedType={instruction.getType()}\n          onChoose={this.chooseType}\n          focusOnMount={!instruction.getType()}\n          scope={scope}\n        />\n        <Paper style={styles.parametersEditor} square elevation={2}>\n          <InstructionParametersEditor\n            project={project}\n            scope={scope}\n            globalObjectsContainer={globalObjectsContainer}\n            objectsContainer={objectsContainer}\n            isCondition={isCondition}\n            instruction={instruction}\n            resourceSources={this.props.resourceSources}\n            onChooseResource={this.props.onChooseResource}\n            resourceExternalEditors={this.props.resourceExternalEditors}\n            openInstructionOrExpression={this.props.openInstructionOrExpression}\n            ref={instructionParametersEditor =>\n              (this._instructionParametersEditor = instructionParametersEditor)\n            }\n            focusOnMount={!!instruction.getType()}\n          />\n        </Paper>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport InstructionEditor from './index.js';\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\nimport { type ResourceExternalEditor } from '../../ResourcesList/ResourceExternalEditor.flow';\nimport { type EventsScope } from '../../InstructionOrExpression/EventsScope.flow';\n\ntype Props = {|\n  project: gdProject,\n  scope: EventsScope,\n  globalObjectsContainer: gdObjectsContainer,\n  objectsContainer: gdObjectsContainer,\n  instruction: gdInstruction,\n  isCondition: boolean,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  style?: Object,\n  isNewInstruction: boolean,\n  onCancel: () => void,\n  onSubmit: () => void,\n  open: boolean,\n  openInstructionOrExpression: (\n    extension: gdPlatformExtension,\n    type: string\n  ) => void,\n  anchorEl?: any, // Unused\n  canPasteInstructions: boolean, // Unused\n  onPasteInstructions: () => void, // Unused\n|};\ntype State = {||};\n\nexport default class InstructionEditorDialog extends React.Component<\n  Props,\n  State\n> {\n  render() {\n    const {\n      isNewInstruction,\n      onCancel,\n      onSubmit,\n      open,\n      canPasteInstructions,\n      onPasteInstructions,\n      ...otherProps\n    } = this.props;\n    const actions = [\n      <FlatButton\n        key=\"cancel\"\n        label={<Trans>Cancel</Trans>}\n        primary={false}\n        onClick={onCancel}\n      />,\n      <FlatButton\n        key=\"ok\"\n        label={<Trans>Ok</Trans>}\n        primary={true}\n        keyboardFocused={false}\n        onClick={onSubmit}\n      />,\n    ];\n\n    return (\n      <Dialog\n        onApply={onSubmit}\n        actions={actions}\n        open={open}\n        cannotBeDismissed={true}\n        onRequestClose={onCancel}\n        maxWidth={false}\n        flexBody\n        noMargin\n      >\n        <InstructionEditor {...otherProps} />\n      </Dialog>\n    );\n  }\n}\n","//@flow\nimport React from 'react';\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\n\nimport TextField from '../../UI/TextField';\nimport { ColumnStackLayout, TextFieldWithButtonLayout } from '../../UI/Layout';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport RaisedButton from '../../UI/RaisedButton';\nimport FlatButton from '../../UI/FlatButton';\nimport { ResourceStore } from '../../AssetStore/ResourceStore';\nimport Dialog from '../../UI/Dialog';\n\nimport useForceUpdate from '../../Utils/UseForceUpdate';\nimport {\n  getHelpLink,\n  isRelativePathToDocumentationRoot,\n  isDocumentationAbsoluteUrl,\n} from '../../Utils/HelpLink';\nimport axios from 'axios';\nimport { useIsMounted } from '../../Utils/UseIsMounted';\nimport { showErrorBox } from '../../UI/Messages/MessageBox';\nimport { UsersAutocomplete } from '../../Utils/UsersAutocomplete';\n\nconst downloadSvgAsBase64 = async (url: string): Promise<string> => {\n  try {\n    const response = await axios.get(url, { responseType: 'arraybuffer' });\n\n    const image = btoa(\n      new Uint8Array(response.data).reduce(\n        (data, byte) => data + String.fromCharCode(byte),\n        ''\n      )\n    );\n    if (image.length > 100 * 1024) {\n      throw new Error(\n        `Icon is too big (size after base64 conversion: ${image.length})`\n      );\n    }\n\n    const contentType = response.headers\n      ? response.headers['content-type'].toLowerCase()\n      : '';\n    if (contentType !== 'image/svg+xml')\n      throw new Error(\n        `Wrong content type. Got: \"${contentType}\", expected \"image/svg+xml\"`\n      );\n\n    return `data:${contentType};base64,${image}`;\n  } catch (err) {\n    console.error('Unable to import the icon.', err);\n    throw err;\n  }\n};\n\ntype HelpPathTextFieldProps = {|\n  i18n: I18nType,\n  helpPath: string,\n  onChangeHelpPath: string => void,\n|};\n\nconst HelpPathTextField = ({\n  i18n,\n  helpPath,\n  onChangeHelpPath,\n}: HelpPathTextFieldProps) => {\n  const isAbsoluteUrl = isDocumentationAbsoluteUrl(helpPath);\n  const isRelativePath = isRelativePathToDocumentationRoot(helpPath);\n  const helperText = helpPath\n    ? (isRelativePath\n        ? i18n._(\n            t`This is a relative path that will open in the GDevelop wiki.`\n          )\n        : i18n._(t`This is link to a webpage.`)) +\n      ` [${i18n._(t`Click here to test the link.`)}](${getHelpLink(helpPath)})`\n    : i18n._(\n        t`This can either be a URL to a web page, or a path starting with a slash that will be opened in the GDevelop wiki. Leave empty if there is no help page, although it's recommended you eventually write one if you distribute the extension.`\n      );\n\n  return (\n    <TextField\n      floatingLabelText={<Trans>Help page URL</Trans>}\n      value={helpPath}\n      onChange={(e, text) => {\n        onChangeHelpPath(text);\n      }}\n      errorText={\n        !!helpPath && !isAbsoluteUrl && !isRelativePath ? (\n          <Trans>\n            This is not a URL starting with \"http://\" or \"https://\".\n          </Trans>\n        ) : null\n      }\n      helperMarkdownText={helperText}\n      fullWidth\n    />\n  );\n};\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onLoadChange: (isLoading: boolean) => void,\n  isLoading: boolean,\n|};\n\nexport const ExtensionOptionsEditor = ({\n  eventsFunctionsExtension,\n  onLoadChange,\n  isLoading,\n}: Props) => {\n  const forceUpdate = useForceUpdate();\n  const [resourceStoreOpen, setResourceStoreOpen] = React.useState(false);\n  const isMounted = useIsMounted();\n\n  return (\n    <I18n>\n      {({ i18n }: { i18n: I18nType }) => (\n        <ColumnStackLayout noMargin>\n          <TextField\n            floatingLabelText={<Trans>Name</Trans>}\n            value={eventsFunctionsExtension.getName()}\n            disabled\n            fullWidth\n          />\n          <TextFieldWithButtonLayout\n            renderButton={style => (\n              <RaisedButton\n                onClick={() => {\n                  setResourceStoreOpen(true);\n                }}\n                primary\n                label={<Trans>Choose</Trans>}\n                disabled={isLoading}\n                style={style}\n              />\n            )}\n            renderTextField={() => (\n              <SemiControlledTextField\n                floatingLabelText={<Trans>Icon URL</Trans>}\n                value={eventsFunctionsExtension.getPreviewIconUrl()}\n                onChange={text => {\n                  eventsFunctionsExtension.setPreviewIconUrl(text);\n                }}\n                disabled\n                fullWidth\n              />\n            )}\n          />\n          <TextField\n            floatingLabelText={<Trans>Name displayed in editor</Trans>}\n            value={eventsFunctionsExtension.getFullName()}\n            onChange={(e, text) => {\n              eventsFunctionsExtension.setFullName(text);\n              forceUpdate();\n            }}\n            fullWidth\n          />\n          <TextField\n            floatingLabelText={<Trans>Short description</Trans>}\n            value={eventsFunctionsExtension.getShortDescription()}\n            onChange={(e, text) => {\n              eventsFunctionsExtension.setShortDescription(text);\n              forceUpdate();\n            }}\n            multiline\n            fullWidth\n            rows={2}\n            rowsMax={2}\n          />\n          <TextField\n            floatingLabelText={<Trans>Description (markdown supported)</Trans>}\n            value={eventsFunctionsExtension.getDescription()}\n            onChange={(e, text) => {\n              eventsFunctionsExtension.setDescription(text);\n              forceUpdate();\n            }}\n            multiline\n            fullWidth\n            rows={5}\n            rowsMax={15}\n          />\n          <TextField\n            floatingLabelText={<Trans>Version</Trans>}\n            value={eventsFunctionsExtension.getVersion()}\n            onChange={(e, text) => {\n              eventsFunctionsExtension.setVersion(text);\n              forceUpdate();\n            }}\n            fullWidth\n          />\n          <SemiControlledTextField\n            floatingLabelText={<Trans>Tags (comma separated)</Trans>}\n            value={eventsFunctionsExtension\n              .getTags()\n              .toJSArray()\n              .join(', ')}\n            onChange={text => {\n              const tags = eventsFunctionsExtension.getTags();\n              tags.clear();\n              text\n                .split(',')\n                .map(tag => tag.trim())\n                .filter(Boolean)\n                .forEach(tag => {\n                  tags.push_back(tag);\n                });\n              forceUpdate();\n            }}\n            fullWidth\n          />\n          <HelpPathTextField\n            i18n={i18n}\n            helpPath={eventsFunctionsExtension.getHelpPath()}\n            onChangeHelpPath={helpPath => {\n              eventsFunctionsExtension.setHelpPath(helpPath);\n              forceUpdate();\n            }}\n          />\n          <UsersAutocomplete\n            userIds={eventsFunctionsExtension.getAuthorIds()}\n            floatingLabelText={<Trans>Authors</Trans>}\n            helperText={\n              <Trans>\n                Select the usernames of the contributors to this extension. They\n                will be displayed in the order selected. Do not see your name?\n                Go to the Profile section and create an account!\n              </Trans>\n            }\n          />\n          {resourceStoreOpen && (\n            <Dialog\n              title={<Trans>Choose an icon for the extension</Trans>}\n              actions={[\n                <FlatButton\n                  key=\"cancel\"\n                  label={<Trans>Cancel</Trans>}\n                  primary={false}\n                  onClick={() => {\n                    setResourceStoreOpen(false);\n                  }}\n                />,\n              ]}\n              cannotBeDismissed={false}\n              open\n              noMargin\n            >\n              <ResourceStore\n                onChoose={resource => {\n                  setResourceStoreOpen(false);\n                  onLoadChange(true);\n                  downloadSvgAsBase64(resource.url)\n                    .then(\n                      base64Svg => {\n                        if (!isMounted.current) return;\n\n                        eventsFunctionsExtension.setPreviewIconUrl(\n                          resource.url\n                        );\n                        eventsFunctionsExtension.setIconUrl(base64Svg);\n                      },\n                      rawError => {\n                        if (!isMounted.current) return;\n\n                        showErrorBox({\n                          message: i18n._(\n                            t`Unable to download the icon. Verify your internet connection or try again later.`\n                          ),\n                          rawError,\n                          errorId: 'icon-download-error',\n                        });\n                      }\n                    )\n                    .then(() => {\n                      if (!isMounted.current) return;\n\n                      onLoadChange(false);\n                    });\n                }}\n                resourceKind={'svg'}\n              />\n            </Dialog>\n          )}\n        </ColumnStackLayout>\n      )}\n    </I18n>\n  );\n};\n","//@flow\nimport React from 'react';\nimport { Trans, t } from '@lingui/macro';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport {\n  Table,\n  TableRow,\n  TableBody,\n  TableRowColumn,\n  TableHeader,\n  TableHeaderColumn,\n} from '../../UI/Table';\nimport Paper from '@material-ui/core/Paper';\nimport RaisedButton from '../../UI/RaisedButton';\nimport IconButton from '../../UI/IconButton';\nimport Add from '@material-ui/icons/Add';\nimport Delete from '@material-ui/icons/Delete';\nimport SemiControlledTextField from '../../UI/SemiControlledTextField';\nimport SelectField from '../../UI/SelectField';\nimport SelectOption from '../../UI/SelectOption';\nimport { Line, Column } from '../../UI/Grid';\n\nimport { mapVector } from '../../Utils/MapFor';\nimport newNameGenerator from '../../Utils/NewNameGenerator';\nimport useForceUpdate from '../../Utils/UseForceUpdate';\nimport BackgroundText from '../../UI/BackgroundText';\nimport { showWarningBox } from '../../UI/Messages/MessageBox';\n\nconst checkNameExists = (\n  name: string,\n  deps: gdVectorDependencyMetadata\n): boolean => {\n  for (let i = 0; i < deps.size(); i++)\n    if (deps.at(i).getName() === name) return true;\n  return false;\n};\n\ntype Props = {| eventsFunctionsExtension: gdEventsFunctionsExtension |};\n\nexport const ExtensionDependenciesEditor = ({\n  eventsFunctionsExtension,\n}: Props) => {\n  const deps = eventsFunctionsExtension.getAllDependencies();\n  const forceUpdate = useForceUpdate();\n\n  const addDependency = () => {\n    eventsFunctionsExtension\n      .addDependency()\n      .setName(\n        newNameGenerator('New Dependency', newName =>\n          checkNameExists(newName, deps)\n        )\n      )\n      .setExportName('my-dependency')\n      .setVersion('1.0.0')\n      .setDependencyType('cordova');\n    forceUpdate();\n  };\n\n  return (\n    <Column>\n      <Line expand>\n        <TableContainer\n          component={({ children }) => (\n            <Paper elevation={4} style={{ minWidth: '100%' }}>\n              {children}\n            </Paper>\n          )}\n        >\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHeaderColumn>\n                  <Trans>Name</Trans>\n                </TableHeaderColumn>\n                <TableHeaderColumn>\n                  <Trans>Export name</Trans>\n                </TableHeaderColumn>\n                <TableHeaderColumn>\n                  <Trans>Version</Trans>\n                </TableHeaderColumn>\n                <TableHeaderColumn>\n                  <Trans>Dependency type</Trans>\n                </TableHeaderColumn>\n                <TableHeaderColumn>\n                  <Trans>Action</Trans>\n                </TableHeaderColumn>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {// $FlowFixMe - unsure why Flow complains about TableRow.\n              mapVector<gdDependencyMetadata, TableRow>(\n                eventsFunctionsExtension.getAllDependencies(),\n                (dependency, index) => (\n                  // $FlowFixMe - unsure why Flow complains about TableRow.\n                  <TableRow key={dependency.getName()}>\n                    <TableRowColumn>\n                      <SemiControlledTextField\n                        commitOnBlur\n                        value={dependency.getName()}\n                        onChange={newName => {\n                          if (newName === dependency.getName()) return;\n\n                          if (checkNameExists(newName, deps)) {\n                            showWarningBox(\n                              `This name is already in use! Please use a unique name.`,\n                              { delayToNextTick: true }\n                            );\n                          } else {\n                            dependency.setName(newName);\n                            forceUpdate();\n                          }\n                        }}\n                        margin=\"none\"\n                      />\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      <SemiControlledTextField\n                        commitOnBlur\n                        value={dependency.getExportName()}\n                        onChange={newExportName => {\n                          if (newExportName === dependency.getExportName())\n                            return;\n\n                          dependency.setExportName(newExportName);\n                          forceUpdate();\n                        }}\n                        margin=\"none\"\n                      />\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      <SemiControlledTextField\n                        commitOnBlur\n                        value={dependency.getVersion()}\n                        onChange={newVersion => {\n                          if (newVersion === dependency.getVersion()) return;\n\n                          dependency.setVersion(newVersion);\n                          forceUpdate();\n                        }}\n                        margin=\"none\"\n                      />\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      <SelectField\n                        value={dependency.getDependencyType()}\n                        onChange={(_, __, newType) => {\n                          if (newType === dependency.getDependencyType())\n                            return;\n\n                          dependency.setDependencyType(newType);\n                          forceUpdate();\n                        }}\n                        margin=\"none\"\n                      >\n                        <SelectOption value=\"npm\" primaryText={t`NPM`} />\n                        <SelectOption\n                          value=\"cordova\"\n                          primaryText={t`Cordova`}\n                        />\n                      </SelectField>\n                    </TableRowColumn>\n                    <TableRowColumn>\n                      <IconButton\n                        tooltip={t`Remove`}\n                        onClick={() => {\n                          eventsFunctionsExtension.removeDependencyAt(index);\n                          forceUpdate();\n                        }}\n                        size=\"small\"\n                      >\n                        <Delete />\n                      </IconButton>\n                    </TableRowColumn>\n                  </TableRow>\n                )\n              )}\n            </TableBody>\n          </Table>\n          <Column expand>\n            <Line justifyContent=\"flex-end\">\n              <RaisedButton\n                primary\n                icon={<Add />}\n                label={<Trans>Add</Trans>}\n                onClick={addDependency}\n              />\n            </Line>\n          </Column>\n        </TableContainer>\n      </Line>\n      <Line>\n        <BackgroundText>\n          <Trans>\n            Dependencies allow to add additional libraries in the exported\n            games. NPM dependencies will be included for Electron builds\n            (Windows, macOS, Linux) and Cordova dependencies will be included\n            for Cordova builds (Android, iOS). Note that this is intended for\n            usage in JavaScript events only. If you are only using standard\n            events, you should not worry about this.\n          </Trans>\n        </BackgroundText>\n      </Line>\n    </Column>\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport CloudUpload from '@material-ui/icons/CloudUpload';\nimport { Column, Line } from '../../UI/Grid';\nimport HelpButton from '../../UI/HelpButton';\nimport EventsFunctionsExtensionsContext, {\n  type EventsFunctionsExtensionsState,\n} from '../../EventsFunctionsExtensionsLoader/EventsFunctionsExtensionsContext';\nimport RaisedButton from '../../UI/RaisedButton';\nimport Window from '../../Utils/Window';\nimport Text from '../../UI/Text';\nimport { ExtensionOptionsEditor } from './ExtensionOptionsEditor';\nimport { Tab, Tabs } from '../../UI/Tabs';\nimport { ExtensionDependenciesEditor } from './ExtensionDependenciesEditor';\n\nconst exportExtension = (\n  eventsFunctionsExtensionsState: EventsFunctionsExtensionsState,\n  eventsFunctionsExtension: gdEventsFunctionsExtension\n) => {\n  const eventsFunctionsExtensionWriter = eventsFunctionsExtensionsState.getEventsFunctionsExtensionWriter();\n  if (!eventsFunctionsExtensionWriter)\n    return Promise.reject(new Error('Not supported'));\n\n  return eventsFunctionsExtensionWriter\n    .chooseEventsFunctionExtensionFile()\n    .then(pathOrUrl => {\n      if (!pathOrUrl) return;\n\n      eventsFunctionsExtensionWriter\n        .writeEventsFunctionsExtension(eventsFunctionsExtension, pathOrUrl)\n        .then();\n    });\n};\n\nconst openGitHubIssue = () => {\n  const body = `\n**⚠️ Please edit and complete this before submitting your extension:**\n\n## Describe the extension\nA clear and concise description of what the extension is, how useful it is.\n\n## Checklist\n\n- [ ] Extension has a proper name and description.\n- [ ] Extension has tags (for example: \"platform, brick, breakable\").\n- [ ] All behaviors have a description.\n- [ ] All functions (actions, conditions, expressions) have descriptions.\n- [ ] I confirm that this extension can be intergrated to this GitHub repository, distributed and MIT licensed.\n\n## Extension file\n\nFinally, attach the .json file of your extension here.\n\nYou also may have to create an account on GitHub before posting.\nIf your extension is high quality and useful, it will be added to the list of GDevelop community extensions.\nWhen you're ready, remove this last paragraph and click on \"Submit new issue\". Thanks 🙌`;\n  Window.openExternalURL(\n    `https://github.com/4ian/GDevelop-extensions/issues/new?body=${encodeURIComponent(\n      body\n    )}&title=New%20extension`\n  );\n};\n\ntype TabName = 'options' | 'dependencies';\n\ntype Props = {|\n  eventsFunctionsExtension: gdEventsFunctionsExtension,\n  onClose: () => void,\n  open: boolean,\n|};\n\nexport default function OptionsEditorDialog({\n  eventsFunctionsExtension,\n  onClose,\n  open,\n}: Props) {\n  const [currentTab, setCurrentTab] = React.useState<TabName>('options');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [exportDialogOpen, setExportDialogOpen] = React.useState(false);\n\n  const eventsFunctionsExtensionsState = React.useContext(\n    EventsFunctionsExtensionsContext\n  );\n  const eventsFunctionsExtensionWriter = eventsFunctionsExtensionsState.getEventsFunctionsExtensionWriter();\n\n  return (\n    <Dialog\n      secondaryActions={[\n        <HelpButton key=\"help\" helpPagePath=\"/extensions/create\" />,\n        eventsFunctionsExtensionWriter ? (\n          <FlatButton\n            icon={<CloudUpload />}\n            key=\"export\"\n            label={<Trans>Export extension</Trans>}\n            onClick={() => {\n              setExportDialogOpen(true);\n            }}\n            disabled={isLoading}\n          />\n        ) : null,\n      ]}\n      actions={[\n        <FlatButton\n          label={<Trans>Close</Trans>}\n          primary={true}\n          keyboardFocused={true}\n          onClick={() => onClose()}\n          disabled={isLoading}\n          key={'close'}\n        />,\n      ]}\n      cannotBeDismissed={true}\n      open={open}\n      noTitleMargin\n      title={\n        <Tabs value={currentTab} onChange={setCurrentTab}>\n          <Tab label={<Trans>Options</Trans>} value=\"options\" />\n          <Tab label={<Trans>Dependencies</Trans>} value=\"dependencies\" />\n        </Tabs>\n      }\n      onRequestClose={isLoading ? () => {} : onClose}\n    >\n      {currentTab === 'options' && (\n        <ExtensionOptionsEditor\n          eventsFunctionsExtension={eventsFunctionsExtension}\n          onLoadChange={setIsLoading}\n          isLoading={isLoading}\n        />\n      )}\n      {currentTab === 'dependencies' && (\n        <ExtensionDependenciesEditor\n          eventsFunctionsExtension={eventsFunctionsExtension}\n        />\n      )}\n      {exportDialogOpen && (\n        <Dialog\n          secondaryActions={[\n            <HelpButton key=\"help\" helpPagePath=\"/extensions/share\" />,\n          ]}\n          actions={[\n            <FlatButton\n              label={<Trans>Close</Trans>}\n              keyboardFocused={true}\n              onClick={() => {\n                setExportDialogOpen(false);\n              }}\n              key={'close'}\n            />,\n          ]}\n          open\n          cannotBeDismissed={false}\n          onRequestClose={() => {\n            setExportDialogOpen(false);\n          }}\n        >\n          <Column expand>\n            <Line>\n              <Text>\n                <Trans>\n                  You can export the extension to a file to easily import it in\n                  another project. If your extension is providing useful and\n                  reusable functions or behaviors, consider sharing it with the\n                  GDevelop community!\n                </Trans>\n              </Text>\n            </Line>\n            <Line>\n              <RaisedButton\n                icon={<CloudUpload />}\n                primary\n                label={<Trans>Export to a file</Trans>}\n                onClick={() => {\n                  exportExtension(\n                    eventsFunctionsExtensionsState,\n                    eventsFunctionsExtension\n                  );\n                }}\n              />\n              <FlatButton\n                label={<Trans>Submit extension to the community</Trans>}\n                onClick={openGitHubIssue}\n              />\n            </Line>\n          </Column>\n        </Dialog>\n      )}\n    </Dialog>\n  );\n}\n","// @flow\nimport * as React from 'react';\nimport CheckeredBackground from '../CheckeredBackground';\n\nconst styles = {\n  previewContainer: {\n    position: 'relative',\n    display: 'flex',\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 200,\n  },\n  iconContainer: {\n    display: 'flex',\n    flex: 1,\n    height: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'relative',\n  },\n  icon: { width: 60, height: 60 },\n};\n\ntype Props = {|\n  renderIcon: ({| style: Object |}) => React.Node,\n|};\n\n/**\n * Display a generic container to display an icon.\n */\nexport default ({ renderIcon }: Props) => (\n  <div style={styles.previewContainer}>\n    <CheckeredBackground />\n    <div style={styles.iconContainer}>{renderIcon({ style: styles.icon })}</div>\n  </div>\n);\n","// @flow\nimport * as React from 'react';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport { type ResourceKind } from '../ResourceSource';\nimport ImagePreview from './ImagePreview';\nimport GenericIconPreview from './GenericIconPreview';\nimport Audiotrack from '@material-ui/icons/Audiotrack';\nimport InsertDriveFile from '@material-ui/icons/InsertDriveFile';\nimport VideoLibrary from '@material-ui/icons/VideoLibrary';\nimport FontDownload from '@material-ui/icons/FontDownload';\n\ntype Props = {|\n  project: gdProject,\n  resourceName: string,\n  resourcePath?: string,\n  resourcesLoader: typeof ResourcesLoader,\n  onSize?: (number, number) => void,\n|};\n\ntype State = {|\n  resourceKind: ?ResourceKind,\n|};\n\n/**\n * Display the right preview for any given resource of a project\n */\nexport default class ResourcePreview extends React.PureComponent<Props, State> {\n  state = this._loadFrom(this.props);\n\n  componentWillReceiveProps(newProps: Props) {\n    if (\n      newProps.resourceName !== this.props.resourceName ||\n      newProps.project !== this.props.project ||\n      newProps.resourcePath !== this.props.resourcePath\n    ) {\n      this.setState(this._loadFrom(newProps));\n    }\n  }\n\n  _loadFrom(props: Props): State {\n    const { project, resourceName } = props;\n    const resourcesManager = project.getResourcesManager();\n    const resourceKind = resourcesManager.hasResource(resourceName)\n      ? resourcesManager.getResource(resourceName).getKind()\n      : null;\n\n    return {\n      resourceKind,\n    };\n  }\n\n  render() {\n    const { resourceKind } = this.state;\n\n    switch (resourceKind) {\n      case 'image':\n        return (\n          <ImagePreview\n            project={this.props.project}\n            resourceName={this.props.resourceName}\n            resourcesLoader={this.props.resourcesLoader}\n            onSize={this.props.onSize}\n            resourcePath={this.props.resourcePath}\n          />\n        );\n      case 'audio':\n        return (\n          <GenericIconPreview renderIcon={props => <Audiotrack {...props} />} />\n        );\n      case 'json':\n        return (\n          <GenericIconPreview\n            renderIcon={props => <InsertDriveFile {...props} />}\n          />\n        );\n      case 'video':\n        return (\n          <GenericIconPreview\n            renderIcon={props => <VideoLibrary {...props} />}\n          />\n        );\n      case 'font':\n      case 'bitmapFont':\n        return (\n          <GenericIconPreview\n            renderIcon={props => <FontDownload {...props} />}\n          />\n        );\n      default:\n        return null;\n    }\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Background from '../../UI/Background';\nimport EmptyMessage from '../../UI/EmptyMessage';\nimport PropertiesEditor from '../../PropertiesEditor';\nimport ResourcePreview from '../../ResourcesList/ResourcePreview';\nimport ResourcesLoader from '../../ResourcesLoader';\nimport propertiesMapToSchema from '../../PropertiesEditor/PropertiesMapToSchema';\nimport { type Schema } from '../../PropertiesEditor';\n\nimport {\n  type ResourceSource,\n  type ChooseResourceFunction,\n} from '../../ResourcesList/ResourceSource';\n\nconst styles = {\n  propertiesContainer: {\n    padding: 8,\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    flex: 2,\n  },\n};\n\ntype Props = {|\n  project: gdProject,\n  resourcesLoader: typeof ResourcesLoader,\n  resources: Array<gdResource>,\n  onResourcePathUpdated: () => void,\n  resourceSources: Array<ResourceSource>,\n  onChooseResource: ChooseResourceFunction,\n|};\n\nexport default class ResourcePropertiesEditor extends React.Component<\n  Props,\n  {}\n> {\n  schema: Schema = [\n    {\n      name: 'Resource name',\n      valueType: 'string',\n      disabled: true,\n      getValue: (resource: gdResource) => resource.getName(),\n      setValue: (resource: gdResource, newValue: string) =>\n        resource.setName(newValue),\n    },\n    {\n      name: 'File',\n      valueType: 'string',\n      getValue: (resource: gdResource) => resource.getFile(),\n      setValue: (resource: gdResource, newValue: string) =>\n        resource.setFile(newValue),\n      onEditButtonClick: () => this._chooseResourcePath(),\n    },\n  ];\n\n  _renderEmpty() {\n    return (\n      <EmptyMessage>\n        <Trans>\n          Resources are automatically added to your project whenever you add an\n          image, a font or a video to an object or when you choose an audio file\n          in events. Choose a resource to display its properties.\n        </Trans>\n      </EmptyMessage>\n    );\n  }\n\n  _chooseResourcePath = () => {\n    const {\n      resources,\n      onResourcePathUpdated,\n      onChooseResource,\n      resourceSources,\n    } = this.props;\n    const resource = resources[0];\n    const sources = resourceSources.filter(\n      source => source.kind === resource.getKind()\n    );\n    if (!sources.length) return;\n    onChooseResource({\n      // Should be updated once new sources are introduced in the desktop app.\n      // Search for \"sources[0]\" in the codebase for other places like this.\n      initialSourceName: sources[0].name,\n      multiSelection: true,\n      resourceKind: resource.getKind(),\n    }).then(resources => {\n      if (!resources.length) return; // No path was chosen by the user.\n      resource.setFile(resources[0].getFile());\n\n      // Important, we are responsible for deleting the resources that were given to us.\n      // Otherwise we have a memory leak.\n      resources.forEach(resource => resource.delete());\n\n      onResourcePathUpdated();\n      this.forceUpdate();\n    });\n  };\n\n  _renderResourcesProperties() {\n    const { resources } = this.props;\n    //TODO: Multiple resources support\n    const properties = resources[0].getProperties();\n    const resourceSchema = propertiesMapToSchema(\n      properties,\n      resource => resource.getProperties(),\n      (resource, name, value) => resource.updateProperty(name, value)\n    );\n\n    return (\n      <div\n        style={styles.propertiesContainer}\n        key={resources.map(resource => '' + resource.ptr).join(';')}\n      >\n        <PropertiesEditor\n          schema={this.schema.concat(resourceSchema)}\n          instances={resources}\n        />\n      </div>\n    );\n  }\n\n  _renderPreview() {\n    const { resources, project, resourcesLoader } = this.props;\n    if (!resources || !resources.length) return;\n\n    return (\n      <ResourcePreview\n        resourceName={resources[0].getName()}\n        resourcePath={resources[0].getFile()}\n        resourcesLoader={resourcesLoader}\n        project={project}\n      />\n    );\n  }\n\n  render() {\n    const { resources } = this.props;\n\n    return (\n      <Background maxWidth>\n        {this._renderPreview()}\n        {!resources || !resources.length\n          ? this._renderEmpty()\n          : this._renderResourcesProperties()}\n      </Background>\n    );\n  }\n}\n","// @flow\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport { t } from '@lingui/macro';\nimport ToolbarIcon from '../../UI/ToolbarIcon';\nimport ElementWithMenu from '../../UI/Menu/ElementWithMenu';\nimport { type PreviewState } from '../PreviewState';\n\nexport type PreviewButtonsProps = {|\n  onPreviewWithoutHotReload: () => void,\n  onOpenDebugger: () => void,\n  onNetworkPreview: () => void,\n  onHotReloadPreview: () => void,\n  setPreviewOverride: ({|\n    isPreviewOverriden: boolean,\n    overridenPreviewLayoutName: ?string,\n    overridenPreviewExternalLayoutName: ?string,\n  |}) => void,\n  canDoNetworkPreview: boolean,\n  isPreviewEnabled: boolean,\n  hasPreviewsRunning: boolean,\n  previewState: PreviewState,\n|};\n\nexport default function PreviewButtons({\n  onPreviewWithoutHotReload,\n  onNetworkPreview,\n  onOpenDebugger,\n  onHotReloadPreview,\n  canDoNetworkPreview,\n  isPreviewEnabled,\n  hasPreviewsRunning,\n  previewState,\n  setPreviewOverride,\n}: PreviewButtonsProps) {\n  const previewIcon = (\n    <ToolbarIcon\n      onClick={onHotReloadPreview}\n      disabled={!isPreviewEnabled}\n      src={\n        hasPreviewsRunning\n          ? 'res/ribbon_default/hotReload64.png'\n          : previewState.isPreviewOverriden\n          ? 'res/ribbon_default/previewOverride32.png'\n          : 'res/ribbon_default/preview64.png'\n      }\n      tooltip={\n        hasPreviewsRunning\n          ? t`Apply changes to the running preview, right click for more`\n          : previewState.isPreviewOverriden\n          ? t`Preview is overridden, right click for more`\n          : previewState.previewExternalLayoutName\n          ? t`Launch a preview of the external layout inside the scene, right click for more`\n          : t`Launch a preview of the scene, right click for more`\n      }\n    />\n  );\n\n  return (\n    <React.Fragment>\n      <ElementWithMenu\n        element={previewIcon}\n        openMenuWithSecondaryClick\n        buildMenuTemplate={(i18n: I18nType) => [\n          {\n            label: i18n._(t`Launch another preview in a new window`),\n            click: onPreviewWithoutHotReload,\n            enabled: isPreviewEnabled && hasPreviewsRunning,\n          },\n          { type: 'separator' },\n          ...(previewState.overridenPreviewLayoutName\n            ? [\n                {\n                  type: 'checkbox',\n                  label: previewState.overridenPreviewExternalLayoutName\n                    ? i18n._(\n                        t`Start all previews from external layout ${\n                          previewState.overridenPreviewExternalLayoutName\n                        }`\n                      )\n                    : i18n._(\n                        t`Start all previews from scene ${\n                          previewState.overridenPreviewLayoutName\n                        }`\n                      ),\n                  checked: previewState.isPreviewOverriden,\n                  click: () =>\n                    setPreviewOverride({\n                      isPreviewOverriden: !previewState.isPreviewOverriden,\n                      overridenPreviewLayoutName:\n                        previewState.overridenPreviewLayoutName,\n                      overridenPreviewExternalLayoutName:\n                        previewState.overridenPreviewExternalLayoutName,\n                    }),\n                },\n                { type: 'separator' },\n              ]\n            : []),\n          {\n            label: previewState.previewExternalLayoutName\n              ? i18n._(\n                  t`Use this external layout inside this scene to start all previews`\n                )\n              : i18n._(t`Use this scene to start all previews`),\n            click: () =>\n              setPreviewOverride({\n                isPreviewOverriden: true,\n                overridenPreviewLayoutName: previewState.previewLayoutName,\n                overridenPreviewExternalLayoutName:\n                  previewState.previewExternalLayoutName,\n              }),\n            enabled:\n              previewState.previewLayoutName !==\n                previewState.overridenPreviewLayoutName ||\n              previewState.previewExternalLayoutName !==\n                previewState.overridenPreviewExternalLayoutName,\n          },\n        ]}\n      />\n      <ElementWithMenu\n        element={\n          <ToolbarIcon\n            disabled={!isPreviewEnabled}\n            src=\"res/ribbon_default/bug32.png\"\n            tooltip={t`Advanced preview options (debugger, network preview...)`}\n          />\n        }\n        buildMenuTemplate={(i18n: I18nType) => [\n          {\n            label: i18n._(t`Start Network Preview (Preview over WiFi/LAN)`),\n            click: () => onNetworkPreview(),\n            enabled: canDoNetworkPreview,\n          },\n          { type: 'separator' },\n          {\n            label: i18n._(\n              t`Start Preview with Debugger and Performance Profiler`\n            ),\n            click: () => onOpenDebugger(),\n          },\n        ]}\n      />\n    </React.Fragment>\n  );\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { Toolbar, ToolbarGroup } from '../../UI/Toolbar';\nimport ToolbarIcon from '../../UI/ToolbarIcon';\nimport ToolbarSeparator from '../../UI/ToolbarSeparator';\nimport ElementWithMenu from '../../UI/Menu/ElementWithMenu';\nimport Window from '../../Utils/Window';\nimport PreviewButtons, { type PreviewButtonsProps } from './PreviewButtons';\n\ntype Props = {|\n  showProjectIcons: boolean,\n  hasProject: boolean,\n  toggleProjectManager: () => void,\n  requestUpdate: ?() => void,\n  simulateUpdateDownloaded: ?() => void,\n  simulateUpdateAvailable: ?() => void,\n  exportProject: () => void,\n  ...PreviewButtonsProps,\n|};\n\ntype State = {|\n  editorToolbar: any,\n|};\n\nexport class MainFrameToolbar extends PureComponent<Props, State> {\n  state = {\n    editorToolbar: null,\n  };\n\n  isDev = Window.isDev();\n\n  setEditorToolbar(editorToolbar: any) {\n    this.setState({\n      editorToolbar,\n    });\n  }\n\n  render() {\n    return (\n      <Toolbar>\n        <ToolbarGroup firstChild>\n          {this.props.showProjectIcons && (\n            <ToolbarIcon\n              onClick={this.props.toggleProjectManager}\n              src=\"res/ribbon_default/projectManager32.png\"\n              disabled={!this.props.hasProject}\n              tooltip={t`Project manager`}\n            />\n          )}\n          {this.props.showProjectIcons && (\n            <ToolbarIcon\n              onClick={this.props.exportProject}\n              src=\"res/ribbon_default/export32.png\"\n              disabled={!this.props.hasProject}\n              tooltip={t`Export the game (Web, Android, iOS...)`}\n            />\n          )}\n          {this.isDev && (\n            <ElementWithMenu\n              element={<ToolbarIcon src=\"res/ribbon_default/bug32.png\" />}\n              buildMenuTemplate={() => [\n                {\n                  label: 'Simulate update downloaded',\n                  disabled: !this.props.simulateUpdateDownloaded,\n                  click: () => {\n                    this.props.simulateUpdateDownloaded &&\n                      this.props.simulateUpdateDownloaded();\n                  },\n                },\n                {\n                  label: 'Simulate update available',\n                  disabled: !this.props.simulateUpdateAvailable,\n                  click: () => {\n                    this.props.simulateUpdateAvailable &&\n                      this.props.simulateUpdateAvailable();\n                  },\n                },\n              ]}\n            />\n          )}\n          <ToolbarSeparator />\n          <PreviewButtons\n            onPreviewWithoutHotReload={this.props.onPreviewWithoutHotReload}\n            onOpenDebugger={this.props.onOpenDebugger}\n            onNetworkPreview={this.props.onNetworkPreview}\n            onHotReloadPreview={this.props.onHotReloadPreview}\n            setPreviewOverride={this.props.setPreviewOverride}\n            canDoNetworkPreview={this.props.canDoNetworkPreview}\n            isPreviewEnabled={this.props.isPreviewEnabled}\n            previewState={this.props.previewState}\n            hasPreviewsRunning={this.props.hasPreviewsRunning}\n          />\n        </ToolbarGroup>\n        {this.state.editorToolbar || <ToolbarGroup />}\n      </Toolbar>\n    );\n  }\n}\n\nexport default MainFrameToolbar;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport TextField from '../UI/TextField';\nimport FlatButton from '../UI/FlatButton';\nimport Window from '../Utils/Window';\nimport { List, ListItem } from '../UI/List';\nimport { Column } from '../UI/Grid';\nimport algoliasearch from 'algoliasearch/lite';\nimport debounce from 'lodash/debounce';\nimport Text from '../UI/Text';\n\nconst styles = {\n  dropdownMenuContainer: {\n    maxHeight: 300,\n    overflowY: 'scroll',\n  },\n};\n\ntype Props = {|\n  onChange: string => void,\n  value: string,\n|};\n\ntype AlgoliaResult = {|\n  content: string,\n  url: string,\n  hierarchy: {|\n    lvl0: ?string,\n    lvl1: ?string,\n    lvl2: ?string,\n    lvl3: ?string,\n    lvl4: ?string,\n    lvl5: ?string,\n    lvl6: ?string,\n  |},\n  objectID: string,\n|};\n\ntype State = {|\n  results: ?Array<AlgoliaResult>,\n  error: ?Error,\n|};\n\nconst fixSomeHtmlCharacters = (str: string) => {\n  return str\n    .replace(/&amp;/g, '&')\n    .replace(/&quot;/g, '\"')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&#x27;/g, \"'\");\n};\n\nconst indexName = 'gdevelop';\nconst appId = 'BH4D9OD16A';\nconst apiKey = '69c73fc1a710bb79543d4b91f6b81c08';\nconst algoliaOptions = { hitsPerPage: 5 };\n\nexport default class DocSearchArea extends React.Component<Props, State> {\n  // $FlowFixMe\n  client = algoliasearch(appId, apiKey, algoliaOptions);\n  state = {\n    results: null,\n    error: null,\n  };\n\n  _handleSearchTextChange = (searchText: string) => {\n    this.props.onChange(searchText);\n  };\n\n  _launchSearchRequest = debounce(() => {\n    if (this.props.value) {\n      this.client\n        // $FlowFixMe\n        .search([\n          {\n            indexName: indexName,\n            query: this.props.value,\n            params: algoliaOptions,\n          },\n        ])\n        .then(\n          data => {\n            let hits = data.results[0].hits;\n            console.log(hits);\n\n            this.setState({\n              results: hits,\n              error: null,\n            });\n          },\n          error => {\n            this.setState({\n              error,\n            });\n          }\n        );\n    }\n  }, 200);\n\n  componentDidUpdate(prevProps: Props) {\n    if (prevProps.value !== this.props.value && this.props.value) {\n      this._launchSearchRequest();\n    }\n  }\n\n  _renderResult = (result: AlgoliaResult) => {\n    const primaryText =\n      result.hierarchy.lvl0 ||\n      result.hierarchy.lvl1 ||\n      result.hierarchy.lvl2 ||\n      result.hierarchy.lvl3 ||\n      result.hierarchy.lvl4 ||\n      result.hierarchy.lvl5 ||\n      result.hierarchy.lvl6 ||\n      '';\n\n    const secondaryText = [\n      result.hierarchy.lvl0,\n      result.hierarchy.lvl1,\n      result.hierarchy.lvl2,\n      result.hierarchy.lvl3,\n      result.hierarchy.lvl4,\n      result.hierarchy.lvl5,\n      result.hierarchy.lvl6,\n    ]\n      .filter(text => !!text)\n      .filter(text => text !== primaryText)\n      .join(' - ');\n\n    return (\n      <ListItem\n        key={result.objectID}\n        primaryText={fixSomeHtmlCharacters(primaryText)}\n        secondaryText={fixSomeHtmlCharacters(result.content || secondaryText)}\n        secondaryTextLines={2}\n        onClick={() => {\n          Window.openExternalURL(result.url);\n        }}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <div>\n        <TextField\n          id={'help-finder-search-bar'}\n          fullWidth\n          hintText={t`Search on the documentation.`}\n          value={this.props.value}\n          onChange={(e, text) => this.props.onChange(text)}\n        />\n        <div\n          id=\"help-finder-dropdown-menu-container\"\n          className=\"algolia-autocomplete\"\n          style={{\n            ...styles.dropdownMenuContainer,\n            visibility: !this.props.value ? 'hidden' : undefined,\n          }}\n        />\n        {this.state.error ? (\n          <Text>\n            <Trans>\n              Unable to search in the documentation. Are you sure you are online\n              and have a proper internet connection?\n            </Trans>\n          </Text>\n        ) : this.state.results ? (\n          <List>\n            {this.state.results.map(result => this._renderResult(result))}\n          </List>\n        ) : (\n          <React.Fragment>\n            <Text>\n              <Trans>Examples:</Trans>\n            </Text>\n            <Column expand>\n              <Text>\n                Coins in platformer\n                <br />\n                Export on Android\n                <br />\n                Add a score\n                <br />\n                Move enemies\n                <br />\n                ...\n                <br />\n              </Text>\n            </Column>\n          </React.Fragment>\n        )}\n        <Text align=\"right\">\n          This search is powered by{' '}\n          <FlatButton\n            onClick={() => Window.openExternalURL('http://algolia.com/')}\n            label={'Algolia'}\n          />\n        </Text>\n      </div>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../UI/Dialog';\nimport FlatButton from '../UI/FlatButton';\nimport Window from '../Utils/Window';\nimport DocSearchArea from './DocSearchArea';\nimport debounce from 'lodash/debounce';\nimport {\n  sendHelpFinderOpened,\n  sendHelpSearch,\n} from '../Utils/Analytics/EventSender';\n\ntype Props = {|\n  open: boolean,\n  onClose: () => void,\n|};\n\ntype State = {|\n  searchText: string,\n|};\n\nexport default class HelpFinder extends React.PureComponent<Props, State> {\n  state = {\n    searchText: '',\n  };\n\n  componentWillReceiveProps(newProps: Props) {\n    if (newProps.open && !this.props.open) {\n      sendHelpFinderOpened();\n    }\n  }\n\n  _handleSearchTextChange = (searchText: string) => {\n    this.setState({\n      searchText,\n    });\n    this._sendHelpSearch();\n  };\n\n  _sendHelpSearch = debounce(() => {\n    if (this.state.searchText) sendHelpSearch(this.state.searchText.trim());\n  }, 2900);\n\n  render() {\n    const { open, onClose } = this.props;\n\n    return (\n      <Dialog\n        title={<Trans>Help!</Trans>}\n        onRequestClose={onClose}\n        actions={[\n          <FlatButton\n            label={<Trans>Close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />,\n        ]}\n        secondaryActions={[\n          <FlatButton\n            key=\"forum\"\n            primary={false}\n            onClick={() => {\n              Window.openExternalURL('https://forum.gdevelop-app.com');\n            }}\n            label={<Trans>Community forum</Trans>}\n          />,\n          <FlatButton\n            key=\"wiki\"\n            primary={false}\n            onClick={() => {\n              Window.openExternalURL(\n                'http://wiki.compilgames.net/doku.php/gdevelop5/start'\n              );\n            }}\n            label={<Trans>Browse the documentation</Trans>}\n          />,\n        ]}\n        cannotBeDismissed={false}\n        open={open}\n      >\n        <DocSearchArea\n          value={this.state.searchText}\n          onChange={this._handleSearchTextChange}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React from 'react';\nimport FlatButton from '../UI/FlatButton';\nimport RaisedButton from '../UI/RaisedButton';\nimport Dialog from '../UI/Dialog';\nimport { type AuthenticatedUser } from './AuthenticatedUserContext';\nimport { Column, Line, Spacer } from '../UI/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport BackgroundText from '../UI/BackgroundText';\nimport VerifiedUser from '@material-ui/icons/VerifiedUser';\nimport Text from '../UI/Text';\nimport { useInterval } from '../Utils/UseInterval';\n\ntype Props = {|\n  onClose: Function,\n  authenticatedUser: AuthenticatedUser,\n|};\n\nexport default function SubscriptionPendingDialog({\n  onClose,\n  authenticatedUser,\n}: Props) {\n  const hasPlan =\n    !!authenticatedUser &&\n    !!authenticatedUser.subscription &&\n    !!authenticatedUser.subscription.planId;\n  useInterval(\n    () => {\n      authenticatedUser.onRefreshUserProfile().catch(() => {\n        // Ignore any error, will be retried anyway.\n      });\n    },\n    hasPlan ? null : 3900\n  );\n\n  return (\n    <Dialog\n      actions={[\n        hasPlan ? (\n          <RaisedButton\n            label={<Trans>Done!</Trans>}\n            key=\"close\"\n            primary\n            onClick={onClose}\n          />\n        ) : (\n          <FlatButton\n            label={<Trans>Cancel and close</Trans>}\n            key=\"close\"\n            primary={false}\n            onClick={onClose}\n          />\n        ),\n      ]}\n      maxWidth=\"sm\"\n      cannotBeDismissed={true}\n      open\n      noMargin\n    >\n      {!hasPlan ? (\n        <Column>\n          <Line>\n            <Text>\n              <Trans>\n                Thanks for getting a subscription and supporting GDevelop!\n              </Trans>{' '}\n              {'❤️'}\n              <b>\n                <Trans>\n                  Your browser will now open to enter your payment details\n                  (handled securely by Stripe.com).\n                </Trans>\n              </b>\n            </Text>\n          </Line>\n          <Line justifyContent=\"center\" alignItems=\"center\">\n            <CircularProgress size={20} />\n            <Spacer />\n            <Text>Waiting for the subscription confirmation...</Text>\n          </Line>\n          <Spacer />\n          <Line justifyContent=\"center\">\n            <BackgroundText>\n              <Trans>\n                Once you're done, come back to GDevelop and your account will be\n                upgraded automatically, unlocking the extra exports and online\n                services.\n              </Trans>\n            </BackgroundText>\n          </Line>\n        </Column>\n      ) : (\n        <Column>\n          <Line>\n            <Text>\n              <Trans>\n                Thanks for getting a subscription and supporting GDevelop!\n              </Trans>{' '}\n              {'❤️'}\n            </Text>\n          </Line>\n          <Line justifyContent=\"center\" alignItems=\"center\">\n            <VerifiedUser />\n            <Spacer />\n            <Text>\n              <b>\n                <Trans>Your new plan is now activated</Trans>\n              </b>\n            </Text>\n          </Line>\n          <Spacer />\n          <Line justifyContent=\"center\">\n            <BackgroundText>\n              <Trans>\n                Your account is upgraded, with the extra exports and online\n                services. If you wish to change later, come back to your profile\n                and choose another plan.\n              </Trans>\n            </BackgroundText>\n          </Line>\n        </Column>\n      )}\n    </Dialog>\n  );\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport * as React from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport FlatButton from '../UI/FlatButton';\nimport Dialog from '../UI/Dialog';\nimport AuthenticatedUserContext, {\n  type AuthenticatedUser,\n} from './AuthenticatedUserContext';\nimport { Column, Line } from '../UI/Grid';\nimport {\n  getSubscriptionPlans,\n  type PlanDetails,\n  changeUserSubscription,\n  getRedirectToCheckoutUrl,\n} from '../Utils/GDevelopServices/Usage';\nimport RaisedButton from '../UI/RaisedButton';\nimport CheckCircle from '@material-ui/icons/CheckCircle';\nimport EmptyMessage from '../UI/EmptyMessage';\nimport { showMessageBox, showErrorBox } from '../UI/Messages/MessageBox';\nimport LeftLoader from '../UI/LeftLoader';\nimport PlaceholderMessage from '../UI/PlaceholderMessage';\nimport {\n  sendSubscriptionDialogShown,\n  sendChoosePlanClicked,\n} from '../Utils/Analytics/EventSender';\nimport SubscriptionPendingDialog from './SubscriptionPendingDialog';\nimport Window from '../Utils/Window';\nimport Text from '../UI/Text';\nimport ThemeConsumer from '../UI/Theme/ThemeConsumer';\n\nconst styles = {\n  descriptionText: {\n    marginLeft: 16,\n    marginRight: 16,\n  },\n  card: {\n    margin: 16,\n  },\n  actions: {\n    textAlign: 'right',\n    display: 'flex',\n    justifyContent: 'flex-end',\n  },\n  bulletIcon: { width: 20, height: 20, marginLeft: 5, marginRight: 10 },\n  bulletText: { flex: 1 },\n};\n\ntype Props = {|\n  open: boolean,\n  onClose: Function,\n|};\n\ntype State = {|\n  isLoading: boolean,\n  subscriptionPendingDialogOpen: boolean,\n|};\n\nexport default class SubscriptionDialog extends React.Component<Props, State> {\n  state = { isLoading: false, subscriptionPendingDialogOpen: false };\n\n  componentDidMount() {\n    if (this.props.open) {\n      sendSubscriptionDialogShown();\n    }\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    if (!this.props.open && newProps.open) {\n      sendSubscriptionDialogShown();\n    }\n  }\n\n  choosePlan = (\n    i18n: I18nType,\n    authenticatedUser: AuthenticatedUser,\n    plan: PlanDetails\n  ) => {\n    const {\n      getAuthorizationHeader,\n      subscription,\n      firebaseUser,\n    } = authenticatedUser;\n    if (!firebaseUser || !subscription) return;\n    sendChoosePlanClicked(plan.planId);\n\n    if (subscription.stripeSubscriptionId) {\n      const answer = Window.showConfirmDialog(\n        plan.planId\n          ? i18n._(t`Are you sure you want to subscribe to this new plan?`)\n          : i18n._(t`Are you sure you want to cancel your subscription?`)\n      );\n      if (!answer) return;\n\n      // We already have a stripe customer, change the subscription without\n      // asking for the user card.\n      this.setState({ isLoading: true });\n      changeUserSubscription(getAuthorizationHeader, firebaseUser.uid, {\n        planId: plan.planId,\n      }).then(\n        () =>\n          this.handleUpdatedSubscriptionSuccess(i18n, authenticatedUser, plan),\n        (err: Error) => this.handleUpdatedSubscriptionFailure(i18n, err)\n      );\n    } else {\n      this.setState({\n        subscriptionPendingDialogOpen: true,\n      });\n      Window.openExternalURL(\n        getRedirectToCheckoutUrl(\n          plan.planId || '',\n          firebaseUser.uid,\n          firebaseUser.email || ''\n        )\n      );\n    }\n  };\n\n  handleUpdatedSubscriptionSuccess = (\n    i18n: I18nType,\n    authenticatedUser: AuthenticatedUser,\n    plan: PlanDetails\n  ) => {\n    authenticatedUser.onRefreshUserProfile();\n    this.setState({ isLoading: false });\n    if (plan.planId) {\n      showMessageBox(\n        i18n._(\n          t`Congratulations, your new subscription is now active!\\n\\nYou can now use the services unlocked with this plan.`\n        )\n      );\n    } else {\n      showMessageBox(\n        i18n._(\n          t`Your subscription was properly cancelled. Sorry to see you go!`\n        )\n      );\n    }\n  };\n\n  handleUpdatedSubscriptionFailure = (i18n: I18nType, rawError: Error) => {\n    this.setState({ isLoading: false });\n    showErrorBox({\n      message: i18n._(\n        t`Your subscription could not be updated. Please try again later!`\n      ),\n      rawError,\n      errorId: 'subscription-update-error',\n    });\n  };\n\n  _renderPrice(plan: PlanDetails): React.Node {\n    return !plan.monthlyPriceInEuros ? (\n      <Trans>Free</Trans>\n    ) : (\n      <Trans>{plan.monthlyPriceInEuros}€/month</Trans>\n    );\n  }\n\n  _isLoading = (authenticatedUser: AuthenticatedUser) =>\n    !authenticatedUser.subscription ||\n    !authenticatedUser.profile ||\n    this.state.isLoading;\n\n  render() {\n    const { open, onClose } = this.props;\n    const { subscriptionPendingDialogOpen } = this.state;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <AuthenticatedUserContext.Consumer>\n            {(authenticatedUser: AuthenticatedUser) => (\n              <ThemeConsumer>\n                {muiTheme => (\n                  <Dialog\n                    actions={[\n                      <FlatButton\n                        label={<Trans>Close</Trans>}\n                        key=\"close\"\n                        primary={false}\n                        onClick={onClose}\n                      />,\n                    ]}\n                    onRequestClose={onClose}\n                    cannotBeDismissed={true}\n                    open={open}\n                    noMargin\n                  >\n                    <Column>\n                      <Line>\n                        <Text>\n                          <Trans>\n                            Get a subscription to gain more one-click exports,\n                            remove the GDevelop splashscreen and messages asking\n                            you to get a subscription. With a subscription,\n                            you're also supporting the development of GDevelop,\n                            which is an open-source software maintained by\n                            volunteers in their free time.\n                          </Trans>\n                        </Text>\n                      </Line>\n                    </Column>\n                    {getSubscriptionPlans().map(plan => (\n                      <Card key={plan.planId || ''} style={styles.card}>\n                        <CardHeader\n                          title={\n                            <span>\n                              <b>{plan.name}</b> - {this._renderPrice(plan)}\n                            </span>\n                          }\n                          subheader={\n                            plan.smallDescription\n                              ? i18n._(plan.smallDescription)\n                              : ''\n                          }\n                        />\n                        <CardContent>\n                          {plan.descriptionBullets.map(\n                            (descriptionBullet, index) => (\n                              <Column key={index} expand>\n                                <Line noMargin alignItems=\"center\">\n                                  {authenticatedUser.subscription &&\n                                  authenticatedUser.subscription.planId ===\n                                    plan.planId ? (\n                                    <CheckCircle\n                                      style={{\n                                        ...styles.bulletIcon,\n                                        color: muiTheme.message.valid,\n                                      }}\n                                    />\n                                  ) : (\n                                    <CheckCircle style={styles.bulletIcon} />\n                                  )}\n                                  <Text style={styles.bulletText}>\n                                    {i18n._(descriptionBullet.message)}{' '}\n                                    {descriptionBullet.isLocalAppOnly && (\n                                      <Trans>(on the desktop app only)</Trans>\n                                    )}\n                                  </Text>\n                                </Line>\n                              </Column>\n                            )\n                          )}\n                          <Text style={styles.descriptionText}>\n                            {plan.extraDescription\n                              ? i18n._(plan.extraDescription)\n                              : ''}\n                          </Text>\n                        </CardContent>\n                        <CardActions style={styles.actions}>\n                          {authenticatedUser.subscription &&\n                          authenticatedUser.subscription.planId ===\n                            plan.planId ? (\n                            <FlatButton\n                              disabled\n                              label={<Trans>This is your current plan</Trans>}\n                              onClick={() =>\n                                this.choosePlan(i18n, authenticatedUser, plan)\n                              }\n                            />\n                          ) : plan.planId ? (\n                            <LeftLoader\n                              isLoading={this._isLoading(authenticatedUser)}\n                            >\n                              <RaisedButton\n                                primary\n                                disabled={this._isLoading(authenticatedUser)}\n                                label={<Trans>Choose this plan</Trans>}\n                                onClick={() =>\n                                  this.choosePlan(i18n, authenticatedUser, plan)\n                                }\n                              />\n                            </LeftLoader>\n                          ) : (\n                            <LeftLoader\n                              isLoading={this._isLoading(authenticatedUser)}\n                            >\n                              <FlatButton\n                                disabled={this._isLoading(authenticatedUser)}\n                                label={<Trans>Cancel your subscription</Trans>}\n                                onClick={() =>\n                                  this.choosePlan(i18n, authenticatedUser, plan)\n                                }\n                              />\n                            </LeftLoader>\n                          )}\n                        </CardActions>\n                      </Card>\n                    ))}\n                    <Column>\n                      <Line>\n                        <EmptyMessage>\n                          <Trans>\n                            Subscriptions can be stopped at any time. GDevelop\n                            uses Stripe.com for secure payment. No credit card\n                            data is stored by GDevelop: everything is managed by\n                            Stripe secure infrastructure.\n                          </Trans>\n                        </EmptyMessage>\n                      </Line>\n                    </Column>\n                    {!authenticatedUser.authenticated && (\n                      <PlaceholderMessage>\n                        <Text>\n                          <Trans>\n                            Create a GDevelop account to continue. It's free and\n                            you'll be able to access to online services like\n                            one-click builds:\n                          </Trans>\n                        </Text>\n                        <RaisedButton\n                          label={<Trans>Create my account</Trans>}\n                          primary\n                          onClick={authenticatedUser.onLogin}\n                        />\n                        <FlatButton\n                          label={<Trans>Not now, thanks</Trans>}\n                          onClick={onClose}\n                        />\n                      </PlaceholderMessage>\n                    )}\n                    {subscriptionPendingDialogOpen && (\n                      <SubscriptionPendingDialog\n                        authenticatedUser={authenticatedUser}\n                        onClose={() => {\n                          this.setState(\n                            {\n                              subscriptionPendingDialogOpen: false,\n                            },\n                            () => authenticatedUser.onRefreshUserProfile()\n                          );\n                        }}\n                      />\n                    )}\n                  </Dialog>\n                )}\n              </ThemeConsumer>\n            )}\n          </AuthenticatedUserContext.Consumer>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport Changelog from '.';\nimport Text from '../../UI/Text';\n\ntype Props = {|\n  open: boolean,\n  onClose: () => void,\n|};\n\ntype State = {||};\n\nexport default class ChangelogDialog extends React.Component<Props, State> {\n  render() {\n    const { open, onClose } = this.props;\n    if (!open) {\n      // Don't render anything, to avoid in particular sending useless requests.\n      return null;\n    }\n\n    const actions = [\n      <FlatButton\n        key=\"close\"\n        label={<Trans>Close</Trans>}\n        primary={true}\n        onClick={onClose}\n      />,\n    ];\n\n    return (\n      <Dialog\n        title={<Trans>What's new in GDevelop?</Trans>}\n        actions={actions}\n        open={open}\n        onRequestClose={onClose}\n        cannotBeDismissed={false}\n      >\n        <Text>\n          <Trans>\n            GDevelop was upgraded to a new version! Check out the changes.\n          </Trans>\n        </Text>\n        <Changelog\n          onUpdated={() => {\n            this.forceUpdate(); /*Force update to ensure dialog is properly positionned*/\n          }}\n        />\n      </Dialog>\n    );\n  }\n}\n","// @flow\nimport * as React from 'react';\nimport ChangelogDialog from './ChangelogDialog';\nimport PreferencesContext from '../Preferences/PreferencesContext';\n\ntype ContainerProps = {|\n  defaultOpen: boolean,\n|};\n\ntype ContainerState = {|\n  open: boolean,\n|};\n\nclass ChangelogDialogContainer extends React.Component<\n  ContainerProps,\n  ContainerState\n> {\n  state = {\n    open: this.props.defaultOpen,\n  };\n\n  render() {\n    const { open } = this.state;\n    return (\n      <ChangelogDialog\n        open={open}\n        onClose={() =>\n          this.setState({\n            open: false,\n          })\n        }\n      />\n    );\n  }\n}\n\n/**\n * The container showing the ChangelogDialog only if a a new version\n * of GDevelop is detected.\n */\nexport default (props: {||}) => (\n  <PreferencesContext.Consumer>\n    {({ values, verifyIfIsNewVersion }) => (\n      <ChangelogDialogContainer\n        defaultOpen={verifyIfIsNewVersion() && values.autoDisplayChangelog}\n      />\n    )}\n  </PreferencesContext.Consumer>\n);\n","// @flow\nimport * as React from 'react';\nimport {\n  useCommand,\n  useCommandWithOptions,\n} from '../CommandPalette/CommandHooks';\nimport { type EventMetadata } from './EnumerateEventsMetadata';\n\ntype Props = {|\n  onAddStandardEvent: () => void,\n  onAddSubEvent: () => void,\n  canAddSubEvent: boolean,\n  onAddCommentEvent: () => void,\n  allEventsMetadata: Array<EventMetadata>,\n  onAddEvent: (eventType: string) => Array<gdBaseEvent>,\n  onRemove: () => void,\n  canRemove: boolean,\n  undo: () => void,\n  canUndo: boolean,\n  redo: () => void,\n  canRedo: boolean,\n  onToggleSearchPanel: () => void,\n  onOpenSettings?: ?() => void,\n|};\n\nconst ToolbarCommands = (props: Props) => {\n  const { onAddEvent } = props;\n\n  useCommand('ADD_STANDARD_EVENT', true, {\n    handler: props.onAddStandardEvent,\n  });\n\n  useCommand('ADD_SUBEVENT', props.canAddSubEvent, {\n    handler: props.onAddSubEvent,\n  });\n\n  useCommand('ADD_COMMENT_EVENT', true, {\n    handler: props.onAddCommentEvent,\n  });\n\n  useCommandWithOptions('CHOOSE_AND_ADD_EVENT', true, {\n    generateOptions: React.useCallback(\n      () =>\n        props.allEventsMetadata.map(metadata => ({\n          text: metadata.fullName,\n          handler: () => {\n            onAddEvent(metadata.type);\n          },\n        })),\n      [props.allEventsMetadata, onAddEvent]\n    ),\n  });\n\n  useCommand('DELETE_SELECTION', props.canRemove, {\n    handler: props.onRemove,\n  });\n\n  useCommand('EVENTS_EDITOR_UNDO', props.canUndo, {\n    handler: props.undo,\n  });\n\n  useCommand('EVENTS_EDITOR_REDO', props.canRedo, {\n    handler: props.redo,\n  });\n\n  useCommand('SEARCH_EVENTS', true, {\n    handler: props.onToggleSearchPanel,\n  });\n\n  useCommand('OPEN_EXTENSION_SETTINGS', !!props.onOpenSettings, {\n    handler: props.onOpenSettings || (() => {}),\n  });\n\n  return null;\n};\n\nexport default ToolbarCommands;\n","//@flow\nimport { t } from '@lingui/macro';\nimport React, { PureComponent } from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport ToolbarCommands from './ToolbarCommands';\nimport { type EventMetadata } from './EnumerateEventsMetadata';\n\ntype Props = {|\n  onAddStandardEvent: () => void,\n  onAddSubEvent: () => void,\n  canAddSubEvent: boolean,\n  onAddCommentEvent: () => void,\n  allEventsMetadata: Array<EventMetadata>,\n  onAddEvent: (eventType: string) => Array<gdBaseEvent>,\n  onRemove: () => void,\n  canRemove: boolean,\n  undo: () => void,\n  canUndo: boolean,\n  redo: () => void,\n  canRedo: boolean,\n  onToggleSearchPanel: () => void,\n  onOpenSettings?: ?() => void,\n|};\n\nexport class Toolbar extends PureComponent<Props> {\n  render() {\n    return (\n      <>\n        <ToolbarCommands {...this.props} />\n        <ToolbarGroup lastChild>\n          <ToolbarIcon\n            onClick={this.props.onAddStandardEvent}\n            src=\"res/ribbon_default/eventadd32.png\"\n            tooltip={t`Add a new empty event`}\n          />\n          <ToolbarIcon\n            onClick={this.props.onAddSubEvent}\n            src=\"res/ribbon_default/subeventadd32.png\"\n            disabled={!this.props.canAddSubEvent}\n            tooltip={t`Add a sub-event to the selected event`}\n          />\n          <ToolbarIcon\n            onClick={this.props.onAddCommentEvent}\n            src=\"res/ribbon_default/commentaireadd32.png\"\n            tooltip={t`Add a comment`}\n          />\n          <ElementWithMenu\n            element={\n              <ToolbarIcon\n                src=\"res/ribbon_default/add32.png\"\n                tooltip={t`Choose and add an event`}\n              />\n            }\n            buildMenuTemplate={() =>\n              this.props.allEventsMetadata.map(metadata => {\n                return {\n                  label: metadata.fullName,\n                  click: () => {\n                    this.props.onAddEvent(metadata.type);\n                  },\n                };\n              })\n            }\n          />\n          <ToolbarSeparator />\n          <ToolbarIcon\n            onClick={this.props.onRemove}\n            src=\"res/ribbon_default/deleteselected32.png\"\n            disabled={!this.props.canRemove}\n            tooltip={t`Delete the selected event(s)`}\n          />\n          <ToolbarIcon\n            onClick={this.props.undo}\n            src=\"res/ribbon_default/undo32.png\"\n            disabled={!this.props.canUndo}\n            tooltip={t`Undo the last changes`}\n          />\n          <ToolbarIcon\n            onClick={this.props.redo}\n            src=\"res/ribbon_default/redo32.png\"\n            disabled={!this.props.canRedo}\n            tooltip={t`Redo the last changes`}\n          />\n          <ToolbarSeparator />\n          <ToolbarIcon\n            onClick={() => this.props.onToggleSearchPanel()}\n            src=\"res/ribbon_default/search32.png\"\n            tooltip={t`Search in events`}\n            acceleratorString={'CmdOrCtrl+F'}\n          />\n          {this.props.onOpenSettings && <ToolbarSeparator />}\n          {this.props.onOpenSettings && (\n            <ToolbarIcon\n              onClick={this.props.onOpenSettings}\n              src=\"res/ribbon_default/pref32.png\"\n              tooltip={t`Open settings`}\n            />\n          )}\n        </ToolbarGroup>\n      </>\n    );\n  }\n}\n\nexport default Toolbar;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport SearchBar from '../UI/SearchBar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport Background from '../UI/Background';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport {\n  enumerateEventsFunctions,\n  filterEventFunctionsList,\n} from './EnumerateEventsFunctions';\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\nconst EVENTS_FUNCTION_CLIPBOARD_KIND = 'Events Function';\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\nexport type EventsFunctionCreationParameters = {|\n  functionType: 0 | 1 | 2,\n  name: ?string,\n|};\n\nconst getEventsFunctionName = (eventsFunction: gdEventsFunction) =>\n  eventsFunction.getName() + (eventsFunction.isPrivate() ? ' (private)' : '');\n\ntype State = {|\n  renamedEventsFunction: ?gdEventsFunction,\n  searchText: string,\n|};\n\ntype Props = {|\n  project: gdProject,\n  eventsFunctionsContainer: gdEventsFunctionsContainer,\n  selectedEventsFunction: ?gdEventsFunction,\n  onSelectEventsFunction: (eventsFunction: ?gdEventsFunction) => void,\n  onDeleteEventsFunction: (\n    eventsFunction: gdEventsFunction,\n    cb: (boolean) => void\n  ) => void,\n  canRename: (eventsFunction: gdEventsFunction) => boolean,\n  onRenameEventsFunction: (\n    eventsFunction: gdEventsFunction,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  onAddEventsFunction: (\n    (parameters: ?EventsFunctionCreationParameters) => void\n  ) => void,\n  onEventsFunctionAdded: (eventsFunction: gdEventsFunction) => void,\n  renderHeader?: () => React.Node,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\nexport default class EventsFunctionsList extends React.Component<Props, State> {\n  static defaultProps = {\n    onDeleteEventsFunction: (\n      eventsFunction: gdEventsFunction,\n      cb: boolean => void\n    ) => cb(true),\n    onRenameEventsFunction: (\n      eventsFunction: gdEventsFunction,\n      newName: string,\n      cb: boolean => void\n    ) => cb(true),\n  };\n\n  sortableList: any;\n  state: State = {\n    renamedEventsFunction: null,\n    searchText: '',\n  };\n\n  _togglePrivate = (eventsFunction: gdEventsFunction) => {\n    eventsFunction.setPrivate(!eventsFunction.isPrivate());\n    this.forceUpdate();\n  };\n\n  _deleteEventsFunction = (\n    eventsFunction: gdEventsFunction,\n    { askForConfirmation }: {| askForConfirmation: boolean |}\n  ) => {\n    const { eventsFunctionsContainer } = this.props;\n\n    if (askForConfirmation) {\n      const answer = Window.showConfirmDialog(\n        \"Are you sure you want to remove this function? This can't be undone.\"\n      );\n      if (!answer) return;\n    }\n\n    this.props.onDeleteEventsFunction(eventsFunction, doRemove => {\n      if (!doRemove) return;\n\n      eventsFunctionsContainer.removeEventsFunction(eventsFunction.getName());\n      this._onEventsFunctionModified();\n    });\n  };\n\n  _editName = (eventsFunction: ?gdEventsFunction) => {\n    this.setState(\n      {\n        renamedEventsFunction: eventsFunction,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _rename = (eventsFunction: gdEventsFunction, newName: string) => {\n    const { eventsFunctionsContainer } = this.props;\n    this.setState({\n      renamedEventsFunction: null,\n    });\n\n    if (eventsFunction.getName() === newName) return;\n\n    if (eventsFunctionsContainer.hasEventsFunctionNamed(newName)) {\n      showWarningBox('Another function with this name already exists.', {\n        delayToNextTick: true,\n      });\n      return;\n    }\n\n    this.props.onRenameEventsFunction(eventsFunction, newName, doRename => {\n      if (!doRename) return;\n      eventsFunction.setName(newName);\n      this._onEventsFunctionModified();\n    });\n  };\n\n  _moveSelectionTo = (destinationEventsFunction: gdEventsFunction) => {\n    const { eventsFunctionsContainer, selectedEventsFunction } = this.props;\n    if (!selectedEventsFunction) return;\n\n    eventsFunctionsContainer.moveEventsFunction(\n      eventsFunctionsContainer.getEventsFunctionPosition(\n        selectedEventsFunction\n      ),\n      eventsFunctionsContainer.getEventsFunctionPosition(\n        destinationEventsFunction\n      )\n    );\n\n    this.forceUpdateList();\n  };\n\n  forceUpdateList = () => {\n    this._onEventsFunctionModified();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _copyEventsFunction = (eventsFunction: gdEventsFunction) => {\n    Clipboard.set(EVENTS_FUNCTION_CLIPBOARD_KIND, {\n      eventsFunction: serializeToJSObject(eventsFunction),\n      name: eventsFunction.getName(),\n    });\n  };\n\n  _cutEventsFunction = (eventsFunction: gdEventsFunction) => {\n    this._copyEventsFunction(eventsFunction);\n    this._deleteEventsFunction(eventsFunction, { askForConfirmation: false });\n  };\n\n  _pasteEventsFunction = (index: number) => {\n    if (!Clipboard.has(EVENTS_FUNCTION_CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(EVENTS_FUNCTION_CLIPBOARD_KIND);\n    const copiedEventsFunction = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'eventsFunction'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    if (!name || !copiedEventsFunction) return;\n\n    const { project, eventsFunctionsContainer } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      eventsFunctionsContainer.hasEventsFunctionNamed(name)\n    );\n\n    const newEventsFunction = eventsFunctionsContainer.insertNewEventsFunction(\n      newName,\n      index\n    );\n\n    unserializeFromJSObject(\n      newEventsFunction,\n      copiedEventsFunction,\n      'unserializeFrom',\n      project\n    );\n    newEventsFunction.setName(newName);\n    this.props.onEventsFunctionAdded(newEventsFunction);\n\n    this._onEventsFunctionModified();\n  };\n\n  _onEventsFunctionModified() {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  }\n\n  _renderEventsFunctionMenuTemplate = (i18n: I18nType) => (\n    eventsFunction: gdEventsFunction,\n    index: number\n  ) => {\n    return [\n      {\n        label: i18n._(t`Rename`),\n        click: () => this._editName(eventsFunction),\n        enabled: this.props.canRename(eventsFunction),\n      },\n      {\n        label: eventsFunction.isPrivate()\n          ? i18n._(t`Make public`)\n          : i18n._(t`Make private`),\n        click: () => this._togglePrivate(eventsFunction),\n      },\n      {\n        label: i18n._(t`Remove`),\n        click: () =>\n          this._deleteEventsFunction(eventsFunction, {\n            askForConfirmation: true,\n          }),\n      },\n      {\n        type: 'separator',\n      },\n      {\n        label: i18n._(t`Copy`),\n        click: () => this._copyEventsFunction(eventsFunction),\n      },\n      {\n        label: i18n._(t`Cut`),\n        click: () => this._cutEventsFunction(eventsFunction),\n      },\n      {\n        label: i18n._(t`Paste`),\n        enabled: Clipboard.has(EVENTS_FUNCTION_CLIPBOARD_KIND),\n        click: () => this._pasteEventsFunction(index),\n      },\n    ];\n  };\n\n  _addNewEventsFunction = () => {\n    const { eventsFunctionsContainer } = this.props;\n\n    this.props.onAddEventsFunction(\n      (parameters: ?EventsFunctionCreationParameters) => {\n        if (!parameters) {\n          return;\n        }\n\n        const eventsFunctionName =\n          parameters.name ||\n          newNameGenerator('Function', name =>\n            eventsFunctionsContainer.hasEventsFunctionNamed(name)\n          );\n\n        const eventsFunction = eventsFunctionsContainer.insertNewEventsFunction(\n          eventsFunctionName,\n          eventsFunctionsContainer.getEventsFunctionsCount()\n        );\n        eventsFunction.setFunctionType(parameters.functionType);\n        this.props.onEventsFunctionAdded(eventsFunction);\n        this._onEventsFunctionModified();\n      }\n    );\n  };\n\n  render() {\n    const {\n      project,\n      eventsFunctionsContainer,\n      selectedEventsFunction,\n      onSelectEventsFunction,\n      renderHeader,\n    } = this.props;\n    const { searchText } = this.state;\n\n    const list = filterEventFunctionsList(\n      enumerateEventsFunctions(eventsFunctionsContainer),\n      searchText\n    );\n\n    // Force List component to be mounted again if project or objectsContainer\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr + ';' + eventsFunctionsContainer.ptr;\n\n    return (\n      <Background>\n        {renderHeader ? renderHeader() : null}\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <I18n>\n                {({ i18n }) => (\n                  <SortableVirtualizedItemList\n                    key={listKey}\n                    ref={sortableList => (this.sortableList = sortableList)}\n                    fullList={list}\n                    width={width}\n                    height={height}\n                    onAddNewItem={this._addNewEventsFunction}\n                    addNewItemLabel={<Trans>Add a new function</Trans>}\n                    getItemName={getEventsFunctionName}\n                    selectedItems={\n                      selectedEventsFunction ? [selectedEventsFunction] : []\n                    }\n                    onItemSelected={onSelectEventsFunction}\n                    renamedItem={this.state.renamedEventsFunction}\n                    onRename={this._rename}\n                    onMoveSelectionToItem={this._moveSelectionTo}\n                    buildMenuTemplate={this._renderEventsFunctionMenuTemplate(\n                      i18n\n                    )}\n                    reactDndType=\"GD_EVENTS_FUNCTION\"\n                  />\n                )}\n              </I18n>\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","//@flow\nimport { mapFor } from '../Utils/MapFor';\n\nexport const enumerateEventsFunctions = (\n  eventsFunctionsContainer: gdEventsFunctionsContainer\n): Array<gdEventsFunction> =>\n  mapFor(0, eventsFunctionsContainer.getEventsFunctionsCount(), i =>\n    eventsFunctionsContainer.getEventsFunctionAt(i)\n  );\n\nexport const filterEventFunctionsList = (\n  list: Array<gdEventsFunction>,\n  searchText: string\n): Array<gdEventsFunction> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(\n    (item: any) =>\n      item\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport { type I18n as I18nType } from '@lingui/core';\nimport { t } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { AutoSizer } from 'react-virtualized';\nimport SortableVirtualizedItemList from '../UI/SortableVirtualizedItemList';\nimport SearchBar from '../UI/SearchBar';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport Background from '../UI/Background';\nimport newNameGenerator from '../Utils/NewNameGenerator';\nimport {\n  enumerateEventsBasedBehaviors,\n  filterEventsBasedBehaviorsList,\n} from './EnumerateEventsBasedBehaviors';\nimport Clipboard, { SafeExtractor } from '../Utils/Clipboard';\nimport Window from '../Utils/Window';\nimport {\n  serializeToJSObject,\n  unserializeFromJSObject,\n} from '../Utils/Serializer';\nimport { type UnsavedChanges } from '../MainFrame/UnsavedChangesContext';\n\nconst EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND = 'Events Based Behavior';\n\nconst styles = {\n  listContainer: {\n    flex: 1,\n  },\n};\n\ntype State = {|\n  renamedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  searchText: string,\n|};\n\nconst getEventsBasedBehaviorName = (\n  eventsBasedBehavior: gdEventsBasedBehavior\n) => eventsBasedBehavior.getName();\n\ntype Props = {|\n  project: gdProject,\n  eventsBasedBehaviorsList: gdEventsBasedBehaviorsList,\n  selectedEventsBasedBehavior: ?gdEventsBasedBehavior,\n  onSelectEventsBasedBehavior: (\n    eventsBasedBehavior: ?gdEventsBasedBehavior\n  ) => void,\n  onDeleteEventsBasedBehavior: (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    cb: (boolean) => void\n  ) => void,\n  onRenameEventsBasedBehavior: (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    newName: string,\n    cb: (boolean) => void\n  ) => void,\n  onEventsBasedBehaviorRenamed: (\n    eventsBasedBehavior: gdEventsBasedBehavior\n  ) => void,\n  onEditProperties: (eventsBasedBehavior: gdEventsBasedBehavior) => void,\n  unsavedChanges?: ?UnsavedChanges,\n|};\n\nexport default class EventsBasedBehaviorsList extends React.Component<\n  Props,\n  State\n> {\n  static defaultProps = {\n    onDeleteEventsBasedBehavior: (\n      eventsBasedBehavior: gdEventsBasedBehavior,\n      cb: boolean => void\n    ) => cb(true),\n    onRenameEventsBasedBehavior: (\n      eventsBasedBehavior: gdEventsBasedBehavior,\n      newName: string,\n      cb: boolean => void\n    ) => cb(true),\n  };\n\n  sortableList: ?SortableVirtualizedItemList<gdEventsBasedBehavior>;\n  state: State = {\n    renamedEventsBasedBehavior: null,\n    searchText: '',\n  };\n\n  _deleteEventsBasedBehavior = (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    { askForConfirmation }: {| askForConfirmation: boolean |}\n  ) => {\n    const { eventsBasedBehaviorsList } = this.props;\n\n    if (askForConfirmation) {\n      const answer = Window.showConfirmDialog(\n        \"Are you sure you want to remove this behavior? This can't be undone.\"\n      );\n      if (!answer) return;\n    }\n\n    this.props.onDeleteEventsBasedBehavior(eventsBasedBehavior, doRemove => {\n      if (!doRemove) return;\n\n      eventsBasedBehaviorsList.remove(eventsBasedBehavior.getName());\n      this._onEventsBasedBehaviorModified();\n    });\n  };\n\n  _editName = (renamedEventsBasedBehavior: ?gdEventsBasedBehavior) => {\n    this.setState(\n      {\n        renamedEventsBasedBehavior,\n      },\n      () => {\n        if (this.sortableList) this.sortableList.forceUpdateGrid();\n      }\n    );\n  };\n\n  _rename = (eventsBasedBehavior: gdEventsBasedBehavior, newName: string) => {\n    const { eventsBasedBehaviorsList } = this.props;\n    this.setState({\n      renamedEventsBasedBehavior: null,\n    });\n\n    if (eventsBasedBehavior.getName() === newName) return;\n\n    if (eventsBasedBehaviorsList.has(newName)) {\n      showWarningBox('Another behavior with this name already exists.', {\n        delayToNextTick: true,\n      });\n      return;\n    }\n\n    this.props.onRenameEventsBasedBehavior(\n      eventsBasedBehavior,\n      newName,\n      doRename => {\n        if (!doRename) return;\n        eventsBasedBehavior.setName(newName);\n        this._onEventsBasedBehaviorModified();\n        this.props.onEventsBasedBehaviorRenamed(eventsBasedBehavior);\n      }\n    );\n  };\n\n  _moveSelectionTo = (\n    destinationEventsBasedBehavior: gdEventsBasedBehavior\n  ) => {\n    const {\n      eventsBasedBehaviorsList,\n      selectedEventsBasedBehavior,\n    } = this.props;\n    if (!selectedEventsBasedBehavior) return;\n\n    eventsBasedBehaviorsList.move(\n      eventsBasedBehaviorsList.getPosition(selectedEventsBasedBehavior),\n      eventsBasedBehaviorsList.getPosition(destinationEventsBasedBehavior)\n    );\n\n    this.forceUpdateList();\n  };\n\n  forceUpdateList = () => {\n    this._onEventsBasedBehaviorModified();\n    if (this.sortableList) this.sortableList.forceUpdateGrid();\n  };\n\n  _copyEventsBasedBehavior = (eventsBasedBehavior: gdEventsBasedBehavior) => {\n    Clipboard.set(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND, {\n      eventsBasedBehavior: serializeToJSObject(eventsBasedBehavior),\n      name: eventsBasedBehavior.getName(),\n    });\n  };\n\n  _cutEventsBasedBehavior = (eventsBasedBehavior: gdEventsBasedBehavior) => {\n    this._copyEventsBasedBehavior(eventsBasedBehavior);\n    this._deleteEventsBasedBehavior(eventsBasedBehavior, {\n      askForConfirmation: false,\n    });\n  };\n\n  _pasteEventsBasedBehavior = (index: number) => {\n    if (!Clipboard.has(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND)) return;\n\n    const clipboardContent = Clipboard.get(\n      EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND\n    );\n    const copiedEventsBasedBehavior = SafeExtractor.extractObjectProperty(\n      clipboardContent,\n      'eventsBasedBehavior'\n    );\n    const name = SafeExtractor.extractStringProperty(clipboardContent, 'name');\n    if (!name || !copiedEventsBasedBehavior) return;\n\n    const { project, eventsBasedBehaviorsList } = this.props;\n\n    const newName = newNameGenerator(name, name =>\n      eventsBasedBehaviorsList.has(name)\n    );\n\n    const newEventsBasedBehavior = eventsBasedBehaviorsList.insertNew(\n      newName,\n      index\n    );\n\n    unserializeFromJSObject(\n      newEventsBasedBehavior,\n      copiedEventsBasedBehavior,\n      'unserializeFrom',\n      project\n    );\n    newEventsBasedBehavior.setName(newName);\n\n    this._onEventsBasedBehaviorModified();\n  };\n\n  _renderEventsBasedBehaviorMenuTemplate = (i18n: I18nType) => (\n    eventsBasedBehavior: gdEventsBasedBehavior,\n    index: number\n  ) => {\n    return [\n      {\n        label: i18n._(t`Properties`),\n        click: () => this.props.onEditProperties(eventsBasedBehavior),\n      },\n      {\n        type: 'separator',\n      },\n      {\n        label: i18n._(t`Rename`),\n        click: () => this._editName(eventsBasedBehavior),\n      },\n      {\n        label: i18n._(t`Remove`),\n        click: () =>\n          this._deleteEventsBasedBehavior(eventsBasedBehavior, {\n            askForConfirmation: true,\n          }),\n      },\n      {\n        type: 'separator',\n      },\n      {\n        label: i18n._(t`Copy`),\n        click: () => this._copyEventsBasedBehavior(eventsBasedBehavior),\n      },\n      {\n        label: i18n._(t`Cut`),\n        click: () => this._cutEventsBasedBehavior(eventsBasedBehavior),\n      },\n      {\n        label: i18n._(t`Paste`),\n        enabled: Clipboard.has(EVENTS_BASED_BEHAVIOR_CLIPBOARD_KIND),\n        click: () => this._pasteEventsBasedBehavior(index),\n      },\n    ];\n  };\n\n  _addNewEventsBasedBehavior = () => {\n    const { eventsBasedBehaviorsList } = this.props;\n\n    const name = newNameGenerator('MyBehavior', name =>\n      eventsBasedBehaviorsList.has(name)\n    );\n    eventsBasedBehaviorsList.insertNew(\n      name,\n      eventsBasedBehaviorsList.getCount()\n    );\n    this._onEventsBasedBehaviorModified();\n  };\n\n  _onEventsBasedBehaviorModified() {\n    if (this.props.unsavedChanges)\n      this.props.unsavedChanges.triggerUnsavedChanges();\n    this.forceUpdate();\n  }\n\n  render() {\n    const {\n      project,\n      eventsBasedBehaviorsList,\n      selectedEventsBasedBehavior,\n      onSelectEventsBasedBehavior,\n    } = this.props;\n    const { searchText } = this.state;\n\n    const list = filterEventsBasedBehaviorsList(\n      enumerateEventsBasedBehaviors(eventsBasedBehaviorsList),\n      searchText\n    );\n\n    // Force List component to be mounted again if project or eventsBasedBehaviorsList\n    // has been changed. Avoid accessing to invalid objects that could\n    // crash the app.\n    const listKey = project.ptr + ';' + eventsBasedBehaviorsList.ptr;\n\n    return (\n      <Background>\n        <div style={styles.listContainer}>\n          <AutoSizer>\n            {({ height, width }) => (\n              <I18n>\n                {({ i18n }) => (\n                  <SortableVirtualizedItemList\n                    key={listKey}\n                    ref={sortableList => (this.sortableList = sortableList)}\n                    fullList={list}\n                    width={width}\n                    height={height}\n                    onAddNewItem={this._addNewEventsBasedBehavior}\n                    addNewItemLabel={<Trans>Add a new behavior</Trans>}\n                    getItemName={getEventsBasedBehaviorName}\n                    selectedItems={\n                      selectedEventsBasedBehavior\n                        ? [selectedEventsBasedBehavior]\n                        : []\n                    }\n                    onItemSelected={onSelectEventsBasedBehavior}\n                    renamedItem={this.state.renamedEventsBasedBehavior}\n                    onRename={this._rename}\n                    onMoveSelectionToItem={this._moveSelectionTo}\n                    buildMenuTemplate={this._renderEventsBasedBehaviorMenuTemplate(\n                      i18n\n                    )}\n                    reactDndType=\"GD_EVENTS_BASED_BEHAVIOR\"\n                  />\n                )}\n              </I18n>\n            )}\n          </AutoSizer>\n        </div>\n        <SearchBar\n          value={searchText}\n          onRequestSearch={() => {}}\n          onChange={text =>\n            this.setState({\n              searchText: text,\n            })\n          }\n        />\n      </Background>\n    );\n  }\n}\n","//@flow\nimport { mapVector } from '../Utils/MapFor';\n\nexport const enumerateEventsBasedBehaviors = (\n  eventsFunctionsContainer: gdEventsBasedBehaviorsList\n): Array<gdEventsBasedBehavior> =>\n  mapVector(\n    eventsFunctionsContainer,\n    eventsBasedBehavior => eventsBasedBehavior\n  );\n\nexport const filterEventsBasedBehaviorsList = (\n  list: Array<gdEventsBasedBehavior>,\n  searchText: string\n): Array<gdEventsBasedBehavior> => {\n  if (!searchText) return list;\n\n  const lowercaseSearchText = searchText.toLowerCase();\n\n  return list.filter(\n    (item: any) =>\n      item\n        .getName()\n        .toLowerCase()\n        .indexOf(lowercaseSearchText) !== -1\n  );\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport { Column, Line, Spacer } from '../../../../UI/Grid';\nimport ImagePreview from '../../../../ResourcesList/ResourcePreview/ImagePreview';\nimport Replay from '@material-ui/icons/Replay';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport Pause from '@material-ui/icons/Pause';\nimport Timer from '@material-ui/icons/Timer';\nimport TextField from '../../../../UI/TextField';\nimport FlatButton from '../../../../UI/FlatButton';\nimport Text from '../../../../UI/Text';\n\ntype Props = {|\n  spritesContainer: Object,\n  resourcesLoader: Object,\n  project: Object,\n  timeBetweenFrames: number,\n  onChangeTimeBetweenFrames: number => void,\n|};\n\ntype State = {|\n  currentFrameIndex: number,\n  currentFrameElapsedTime: number,\n  paused: boolean,\n  fps: number,\n|};\n\nconst styles = {\n  timeField: {\n    width: 75,\n  },\n  timeIcon: {\n    paddingLeft: 6,\n    paddingRight: 8,\n  },\n};\n\nexport default class AnimationPreview extends Component<Props, State> {\n  state = {\n    currentFrameIndex: 0,\n    currentFrameElapsedTime: 0,\n    paused: false,\n    fps: Math.round(1 / this.props.timeBetweenFrames),\n  };\n\n  nextUpdate = null;\n  previousUpdateTimeInMs = 0;\n\n  componentDidMount() {\n    this.nextUpdate = requestAnimationFrame(this._updateAnimation);\n  }\n\n  componentWillUnmount() {\n    if (this.nextUpdate) cancelAnimationFrame(this.nextUpdate);\n  }\n\n  replay = () =>\n    this.setState({\n      currentFrameIndex: 0,\n      currentFrameElapsedTime: 0,\n      paused: false,\n    });\n\n  play = () =>\n    this.setState({\n      paused: false,\n    });\n\n  pause = () =>\n    this.setState({\n      paused: true,\n    });\n\n  _updateAnimation = (updateTimeInMs: number) => {\n    const elapsedTime = this.previousUpdateTimeInMs\n      ? (updateTimeInMs - this.previousUpdateTimeInMs) / 1000\n      : 0;\n\n    const { spritesContainer, timeBetweenFrames } = this.props;\n    const { currentFrameIndex, currentFrameElapsedTime, paused } = this.state;\n\n    let newFrameIndex = currentFrameIndex;\n    let newFrameElapsedTime = currentFrameElapsedTime;\n    newFrameElapsedTime += paused ? 0 : elapsedTime;\n\n    if (newFrameElapsedTime > timeBetweenFrames) {\n      const count = Math.floor(newFrameElapsedTime / timeBetweenFrames);\n      newFrameIndex += count;\n      newFrameElapsedTime = newFrameElapsedTime - count * timeBetweenFrames;\n      if (newFrameElapsedTime < 0) newFrameElapsedTime = 0;\n    }\n\n    if (newFrameIndex >= spritesContainer.getSpritesCount()) {\n      newFrameIndex = spritesContainer.isLooping()\n        ? newFrameIndex % spritesContainer.getSpritesCount()\n        : spritesContainer.getSpritesCount() - 1;\n    }\n    if (newFrameIndex < 0) newFrameIndex = 0; //May happen if there is no frame.\n\n    this.setState({\n      currentFrameIndex: newFrameIndex,\n      currentFrameElapsedTime: newFrameElapsedTime,\n    });\n    this.nextUpdate = requestAnimationFrame(this._updateAnimation);\n    this.previousUpdateTimeInMs = updateTimeInMs;\n  };\n\n  render() {\n    const {\n      spritesContainer,\n      resourcesLoader,\n      project,\n      timeBetweenFrames,\n      onChangeTimeBetweenFrames,\n    } = this.props;\n    const { currentFrameIndex, paused, fps } = this.state;\n\n    const hasValidSprite =\n      currentFrameIndex < spritesContainer.getSpritesCount();\n    const sprite = hasValidSprite\n      ? spritesContainer.getSprite(currentFrameIndex)\n      : null;\n\n    return (\n      <Column expand noOverflowParent>\n        <ImagePreview\n          resourceName={sprite ? sprite.getImageName() : ''}\n          resourcesLoader={resourcesLoader}\n          project={project}\n        />\n        <Line noMargin alignItems=\"center\">\n          <Text>\n            <Trans>FPS:</Trans>\n          </Text>\n          <Spacer />\n          <TextField\n            margin=\"none\"\n            value={fps}\n            onChange={(e, text) => {\n              const fps = parseFloat(text);\n              if (fps > 0) {\n                this.setState({ fps });\n                onChangeTimeBetweenFrames(parseFloat((1 / fps).toFixed(4)));\n                this.replay();\n              }\n            }}\n            id=\"direction-time-between-frames\"\n            type=\"number\"\n            step={1}\n            min={1}\n            max={100}\n            style={styles.timeField}\n            autoFocus={true}\n          />\n          <Timer style={styles.timeIcon} />\n          <TextField\n            margin=\"none\"\n            value={timeBetweenFrames}\n            onChange={(e, text) => {\n              const time = parseFloat(text);\n              if (time > 0) {\n                this.setState({ fps: Math.round(1 / time) });\n                onChangeTimeBetweenFrames(time);\n                this.replay();\n              }\n            }}\n            id=\"direction-time-between-frames\"\n            type=\"number\"\n            step={0.005}\n            precision={2}\n            min={0.01}\n            max={5}\n            style={styles.timeField}\n          />\n          <FlatButton\n            icon={<Replay />}\n            label={<Trans>Replay</Trans>}\n            onClick={this.replay}\n          />\n          <FlatButton\n            icon={paused ? <PlayArrow /> : <Pause />}\n            label={paused ? 'Play' : 'Pause'}\n            onClick={paused ? this.play : this.pause}\n          />\n        </Line>\n      </Column>\n    );\n  }\n}\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport React, { Component } from 'react';\nimport Timer from '@material-ui/icons/Timer';\nimport FlatButton from '../../../UI/FlatButton';\nimport Checkbox from '../../../UI/Checkbox';\nimport Brush from '@material-ui/icons/Brush';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport TextField from '../../../UI/TextField';\nimport Dialog from '../../../UI/Dialog';\nimport AnimationPreview from './AnimationPreview';\nimport ResourcesLoader from '../../../ResourcesLoader';\nimport { type ResourceExternalEditor } from '../../../ResourcesList/ResourceExternalEditor.flow';\nimport { ResponsiveWindowMeasurer } from '../../../UI/Reponsive/ResponsiveWindowMeasurer';\n\nconst styles = {\n  container: {\n    paddingLeft: 12,\n    paddingRight: 12,\n    display: 'flex',\n    alignItems: 'center',\n  },\n  timeField: {\n    width: 75,\n  },\n  timeIcon: {\n    paddingLeft: 6,\n    paddingRight: 6,\n  },\n  spacer: {\n    width: 16,\n  },\n};\n\nconst formatTime = (time: number) => Number(time.toFixed(6));\n\ntype Props = {|\n  direction: gdDirection,\n  resourcesLoader: typeof ResourcesLoader,\n  project: gdProject,\n  resourceExternalEditors: Array<ResourceExternalEditor>,\n  onEditWith: ResourceExternalEditor => void,\n|};\n\ntype State = {|\n  timeBetweenFrames: number,\n  timeError: boolean,\n  previewOpen: boolean,\n|};\n\nexport default class DirectionTools extends Component<Props, State> {\n  state = {\n    timeBetweenFrames: formatTime(this.props.direction.getTimeBetweenFrames()),\n    timeError: false,\n    previewOpen: false,\n  };\n\n  componentWillReceiveProps(newProps: Props) {\n    this.setState({\n      timeBetweenFrames: formatTime(\n        this.props.direction.getTimeBetweenFrames()\n      ),\n      timeError: false,\n    });\n  }\n\n  saveTimeBetweenFrames = () => {\n    const { direction } = this.props;\n\n    const newTime = Math.max(parseFloat(this.state.timeBetweenFrames), 0.00001);\n    const newTimeIsValid = !isNaN(newTime);\n\n    if (newTimeIsValid) direction.setTimeBetweenFrames(newTime);\n    this.setState({\n      timeBetweenFrames: formatTime(\n        this.props.direction.getTimeBetweenFrames()\n      ),\n      timeError: newTimeIsValid,\n    });\n  };\n\n  setLooping = (check: boolean) => {\n    const { direction } = this.props;\n\n    direction.setLoop(!!check);\n    this.forceUpdate();\n  };\n\n  openPreview = (open: boolean) => {\n    this.setState({\n      previewOpen: open,\n    });\n    if (!open) {\n      this.saveTimeBetweenFrames();\n    }\n  };\n\n  render() {\n    const {\n      direction,\n      resourcesLoader,\n      project,\n      resourceExternalEditors,\n      onEditWith,\n    } = this.props;\n\n    const imageResourceExternalEditors = resourceExternalEditors.filter(\n      ({ kind }) => kind === 'image'\n    );\n\n    return (\n      <div style={styles.container}>\n        <ResponsiveWindowMeasurer>\n          {windowWidth =>\n            windowWidth !== 'small' &&\n            !!imageResourceExternalEditors.length && (\n              <FlatButton\n                label={imageResourceExternalEditors[0].displayName}\n                icon={<Brush />}\n                onClick={() => onEditWith(imageResourceExternalEditors[0])}\n              />\n            )\n          }\n        </ResponsiveWindowMeasurer>\n        <FlatButton\n          label={<Trans>Preview</Trans>}\n          icon={<PlayArrow />}\n          onClick={() => this.openPreview(true)}\n        />\n        <Timer style={styles.timeIcon} />\n        <TextField\n          value={this.state.timeBetweenFrames}\n          onChange={(e, text) =>\n            this.setState({ timeBetweenFrames: parseFloat(text) || 0 })\n          }\n          onBlur={() => this.saveTimeBetweenFrames()}\n          id=\"direction-time-between-frames\"\n          margin=\"none\"\n          style={styles.timeField}\n          type=\"number\"\n          step={0.005}\n          precision={2}\n          min={0.01}\n          max={5}\n        />\n        <span style={styles.spacer} />\n        <Checkbox\n          checked={direction.isLooping()}\n          label={<Trans>Loop</Trans>}\n          onCheck={(e, check) => this.setLooping(check)}\n        />\n        {this.state.previewOpen && (\n          <Dialog\n            actions={\n              <FlatButton\n                label={<Trans>OK</Trans>}\n                primary\n                onClick={() => this.openPreview(false)}\n                key=\"ok\"\n              />\n            }\n            noMargin\n            cannotBeDismissed={false}\n            onRequestClose={() => this.openPreview(false)}\n            open={this.state.previewOpen}\n            fullHeight\n            flexBody\n          >\n            <AnimationPreview\n              spritesContainer={direction}\n              resourcesLoader={resourcesLoader}\n              project={project}\n              timeBetweenFrames={this.state.timeBetweenFrames}\n              onChangeTimeBetweenFrames={text =>\n                this.setState({ timeBetweenFrames: text })\n              }\n            />\n          </Dialog>\n        )}\n      </div>\n    );\n  }\n}\n","// @flow\nimport { useCommand } from '../CommandPalette/CommandHooks';\n\ntype Props = {|\n  openObjectsList: () => void,\n  openObjectGroupsList: () => void,\n  openPropertiesPanel: () => void,\n  toggleInstancesList: () => void,\n  toggleLayersList: () => void,\n  undo: () => void,\n  canUndo: boolean,\n  redo: () => void,\n  canRedo: boolean,\n  deleteSelection: () => void,\n  canDeleteSelection: boolean,\n  toggleWindowMask: () => void,\n  toggleGrid: () => void,\n  setupGrid: () => void,\n|};\n\nconst ToolbarCommands = (props: Props) => {\n  useCommand('OPEN_OBJECTS_PANEL', true, {\n    handler: props.openObjectsList,\n  });\n\n  useCommand('OPEN_OBJECT_GROUPS_PANEL', true, {\n    handler: props.openObjectGroupsList,\n  });\n\n  useCommand('OPEN_PROPERTIES_PANEL', true, {\n    handler: props.openPropertiesPanel,\n  });\n\n  useCommand('TOGGLE_INSTANCES_PANEL', true, {\n    handler: props.toggleInstancesList,\n  });\n\n  useCommand('TOGGLE_LAYERS_PANEL', true, {\n    handler: props.toggleLayersList,\n  });\n\n  useCommand('SCENE_EDITOR_UNDO', props.canUndo, {\n    handler: props.undo,\n  });\n\n  useCommand('SCENE_EDITOR_REDO', props.canRedo, {\n    handler: props.redo,\n  });\n\n  useCommand('DELETE_INSTANCES', props.canDeleteSelection, {\n    handler: props.deleteSelection,\n  });\n\n  useCommand('TOGGLE_WINDOW_MASK', true, {\n    handler: props.toggleWindowMask,\n  });\n\n  useCommand('TOGGLE_GRID', true, {\n    handler: props.toggleGrid,\n  });\n\n  useCommand('OPEN_SETUP_GRID', true, {\n    handler: props.setupGrid,\n  });\n\n  return null;\n};\n\nexport default ToolbarCommands;\n","// @flow\nimport { t } from '@lingui/macro';\nimport { type I18n as I18nType } from '@lingui/core';\nimport React, { PureComponent } from 'react';\nimport { ToolbarGroup } from '../UI/Toolbar';\nimport ToolbarSeparator from '../UI/ToolbarSeparator';\nimport ToolbarIcon from '../UI/ToolbarIcon';\nimport ElementWithMenu from '../UI/Menu/ElementWithMenu';\nimport ToolbarCommands from './ToolbarCommands';\nimport InstancesSelection from '../InstancesEditor/InstancesSelection';\n\ntype Props = {|\n  openObjectsList: () => void,\n  openObjectGroupsList: () => void,\n  openProperties: () => void,\n  undo: () => void,\n  canUndo: boolean,\n  redo: () => void,\n  canRedo: boolean,\n  deleteSelection: () => void,\n  instancesSelection: InstancesSelection,\n  toggleInstancesList: () => void,\n  toggleLayersList: () => void,\n  isWindowMaskShown: () => boolean,\n  toggleWindowMask: () => void,\n  isGridShown: () => boolean,\n  toggleGrid: () => void,\n  openSetupGrid: () => void,\n  zoomIn: () => void,\n  zoomOut: () => void,\n  centerView: () => void,\n  setZoomFactor: number => void,\n  onOpenSettings?: ?() => void,\n|};\n\nexport class Toolbar extends PureComponent<Props> {\n  render() {\n    return (\n      <>\n        <ToolbarCommands\n          openObjectsList={this.props.openObjectsList}\n          openObjectGroupsList={this.props.openObjectGroupsList}\n          openPropertiesPanel={this.props.openProperties}\n          toggleInstancesList={this.props.toggleInstancesList}\n          toggleLayersList={this.props.toggleLayersList}\n          undo={this.props.undo}\n          canUndo={this.props.canUndo}\n          redo={this.props.redo}\n          canRedo={this.props.canRedo}\n          deleteSelection={this.props.deleteSelection}\n          toggleWindowMask={this.props.toggleWindowMask}\n          toggleGrid={this.props.toggleGrid}\n          setupGrid={this.props.openSetupGrid}\n          canDeleteSelection={\n            this.props.instancesSelection.getSelectedInstances().length !== 0\n          }\n        />\n        <ToolbarGroup lastChild>\n          <ToolbarIcon\n            onClick={this.props.openObjectsList}\n            src=\"res/ribbon_default/objects64.png\"\n            tooltip={t`Open the objects editor`}\n          />\n          <ToolbarIcon\n            onClick={this.props.openObjectGroupsList}\n            src={'res/ribbon_default/objectsgroups64.png'}\n            tooltip={t`Open the objects groups editor`}\n          />\n          <ToolbarIcon\n            onClick={this.props.openProperties}\n            src=\"res/ribbon_default/editprop32.png\"\n            tooltip={t`Open the properties panel`}\n          />\n          <ToolbarIcon\n            onClick={this.props.toggleInstancesList}\n            src=\"res/ribbon_default/ObjectsPositionsList32.png\"\n            tooltip={t`Open the list of instances`}\n          />\n          <ToolbarIcon\n            onClick={this.props.toggleLayersList}\n            src=\"res/ribbon_default/layers32.png\"\n            tooltip={t`Open the layers editor`}\n          />\n          <ToolbarSeparator />\n          <ToolbarIcon\n            onClick={this.props.undo}\n            src=\"res/ribbon_default/undo32.png\"\n            disabled={!this.props.canUndo}\n            tooltip={t`Undo the last changes`}\n          />\n          <ToolbarIcon\n            onClick={this.props.redo}\n            src=\"res/ribbon_default/redo32.png\"\n            disabled={!this.props.canRedo}\n            tooltip={t`Redo the last changes`}\n          />\n          <ToolbarSeparator />\n          <ToolbarIcon\n            onClick={this.props.deleteSelection}\n            src=\"res/ribbon_default/deleteselected32.png\"\n            disabled={\n              !this.props.instancesSelection.getSelectedInstances().length\n            }\n            tooltip={t`Delete the selected instances from the scene`}\n          />\n          <ToolbarSeparator />\n          <ElementWithMenu\n            element={\n              <ToolbarIcon\n                src=\"res/ribbon_default/grid32.png\"\n                tooltip={t`Toggle/edit grid`}\n              />\n            }\n            buildMenuTemplate={(i18n: I18nType) => [\n              {\n                type: 'checkbox',\n                label: i18n._(t`Show Mask`),\n                checked: this.props.isWindowMaskShown(),\n                click: () => this.props.toggleWindowMask(),\n              },\n              {\n                type: 'checkbox',\n                label: i18n._(t`Show grid`),\n                checked: this.props.isGridShown(),\n                click: () => this.props.toggleGrid(),\n              },\n              { type: 'separator' },\n              {\n                label: i18n._(t`Setup grid`),\n                click: () => this.props.openSetupGrid(),\n              },\n            ]}\n          />\n          <ElementWithMenu\n            element={\n              <ToolbarIcon\n                src=\"res/ribbon_default/zoom32.png\"\n                tooltip={t`Change editor zoom`}\n              />\n            }\n            buildMenuTemplate={(i18n: I18nType) => [\n              {\n                label: i18n._(t`Zoom in`),\n                click: this.props.zoomIn,\n                accelerator: 'CmdOrCtrl+numadd',\n              },\n              {\n                label: i18n._(t`Zoom out`),\n                click: this.props.zoomOut,\n                accelerator: 'CmdOrCtrl+numsub',\n              },\n              {\n                label: i18n._(t`Center View`),\n                click: () => this.props.centerView(),\n              },\n              { type: 'separator' },\n              { label: '5%', click: () => this.props.setZoomFactor(0.05) },\n              { label: '10%', click: () => this.props.setZoomFactor(0.1) },\n              { label: '25%', click: () => this.props.setZoomFactor(0.25) },\n              { label: '50%', click: () => this.props.setZoomFactor(0.5) },\n              { label: '100%', click: () => this.props.setZoomFactor(1.0) },\n              { label: '150%', click: () => this.props.setZoomFactor(1.5) },\n              { label: '200%', click: () => this.props.setZoomFactor(2.0) },\n              { label: '400%', click: () => this.props.setZoomFactor(4.0) },\n            ]}\n          />\n          {this.props.onOpenSettings && <ToolbarSeparator />}\n          {this.props.onOpenSettings && (\n            <ToolbarIcon\n              onClick={this.props.onOpenSettings}\n              src=\"res/ribbon_default/pref32.png\"\n              tooltip={t`Open settings`}\n            />\n          )}\n        </ToolbarGroup>\n      </>\n    );\n  }\n}\n\nexport default Toolbar;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z\" />\n  </SvgIcon>\n));\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport React from 'react';\nimport Add from '@material-ui/icons/Add';\nimport IconButton from '../UI/IconButton';\nimport Copy from '../UI/CustomSvgIcons/Copy';\nimport Paste from '../UI/CustomSvgIcons/Paste';\nimport Delete from '@material-ui/icons/Delete';\nimport { Line, Column } from '../UI/Grid';\nimport RaisedButton from '../UI/RaisedButton';\n\ntype Props = {|\n  onAdd: () => void,\n  onCopy: () => void,\n  hasSelection: boolean,\n  onPaste: () => void,\n  hasClipboard: boolean,\n  onDeleteSelection: () => void,\n|};\n\nconst EditVariableRow = ({\n  onAdd,\n  onCopy,\n  hasSelection,\n  onPaste,\n  hasClipboard,\n  onDeleteSelection,\n}: Props) => (\n  <Line justifyContent=\"space-between\" alignItems=\"center\">\n    <Column>\n      <Line noMargin>\n        <IconButton size=\"small\" onClick={onCopy} disabled={!hasSelection}>\n          <Copy />\n        </IconButton>\n        <IconButton size=\"small\" onClick={onPaste} disabled={!hasClipboard}>\n          <Paste />\n        </IconButton>\n        <IconButton\n          size=\"small\"\n          onClick={onDeleteSelection}\n          disabled={!hasSelection}\n        >\n          <Delete />\n        </IconButton>\n      </Line>\n    </Column>\n\n    <Column>\n      <RaisedButton\n        primary\n        label={<Trans>Add</Trans>}\n        onClick={onAdd}\n        icon={<Add />}\n      />\n    </Column>\n  </Line>\n);\n\nexport default EditVariableRow;\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { largeSelectedArea, largeSelectableArea } from '../ClassNames';\nimport { type EventRendererProps } from './EventRenderer';\n\nexport default class UnknownEvent extends React.Component<\n  EventRendererProps,\n  *\n> {\n  render() {\n    return (\n      <p\n        className={classNames({\n          [largeSelectableArea]: true,\n          [largeSelectedArea]: this.props.selected,\n        })}\n      >\n        {'Unknown event of type ' + this.props.event.getType()}\n      </p>\n    );\n  }\n}\n","import UnknownEvent from './Renderers/UnknownEvent';\nimport StandardEvent from './Renderers/StandardEvent';\nimport GroupEvent from './Renderers/GroupEvent';\nimport CommentEvent from './Renderers/CommentEvent';\nimport ForEachEvent from './Renderers/ForEachEvent';\nimport ForEachChildVariableEvent from './Renderers/ForEachChildVariableEvent';\nimport RepeatEvent from './Renderers/RepeatEvent';\nimport WhileEvent from './Renderers/WhileEvent';\nimport LinkEvent from './Renderers/LinkEvent';\nimport JsCodeEvent from './Renderers/JsCodeEvent';\n\nexport default {\n  components: {\n    unknownEvent: UnknownEvent,\n    'BuiltinCommonInstructions::Standard': StandardEvent,\n    'BuiltinCommonInstructions::Group': GroupEvent,\n    'BuiltinCommonInstructions::Comment': CommentEvent,\n    'BuiltinCommonInstructions::ForEach': ForEachEvent,\n    'BuiltinCommonInstructions::ForEachChildVariable': ForEachChildVariableEvent,\n    'BuiltinCommonInstructions::Repeat': RepeatEvent,\n    'BuiltinCommonInstructions::While': WhileEvent,\n    'BuiltinCommonInstructions::Link': LinkEvent,\n    'BuiltinCommonInstructions::JsCode': JsCodeEvent,\n  },\n  getEventComponent: function(event) {\n    if (this.components.hasOwnProperty(event.getType()))\n      return this.components[event.getType()];\n    else return this.components.unknownEvent;\n  },\n  registerEvent: function(eventType, renderFunction) {\n    if (!this.components.hasOwnProperty(eventType)) {\n      console.warn(\n        'Tried to register renderer for events \"' +\n          eventType +\n          '\", but a renderer already exists.'\n      );\n      return;\n    }\n\n    this.components[eventType] = renderFunction;\n  },\n};\n","//@flow\nimport { findGDJS } from '../GameEngineFinder/LocalGDJSFinder';\nimport optionalRequire from '../Utils/OptionalRequire';\nconst fs = optionalRequire('fs');\nconst path = optionalRequire('path');\n\nexport const setupAutocompletions = (monaco: any) => {\n  const importAllJsFilesFromFolder = (folderPath: string) =>\n    fs.readdir(folderPath, (error: ?Error, filenames: Array<string>) => {\n      if (error) {\n        console.error(\n          'Unable to read GDJS files for setting up autocompletions:',\n          error\n        );\n        return;\n      }\n\n      filenames.forEach(filename => {\n        if (filename.endsWith('.ts') || filename.endsWith('.js')) {\n          const fullPath = path.join(folderPath, filename);\n          fs.readFile(fullPath, 'utf8', (fileError, content) => {\n            if (fileError) {\n              console.error(\n                `Unable to read ${fullPath} for setting up autocompletions:`,\n                fileError\n              );\n              return;\n            }\n\n            monaco.languages.typescript.javascriptDefaults.addExtraLib(\n              content,\n              fullPath\n            );\n          });\n        }\n      });\n    });\n\n  findGDJS().then(({ gdjsRoot }) => {\n    // Autocompletions are generated by reading the sources of the game engine\n    // (much like how autocompletions work in Visual Studio Code) - *not* the built files.\n    // The built files are stripped of their types and documentation, so it would\n    // not work.\n    //\n    // We could also use the TypeScript compiler to emit .d.ts files when building GDJS,\n    // but this would make TypeScript slower (at least 2x slower) and we would still need\n    // to copy and read an equivalent number of files.\n    const runtimePath = path.join(gdjsRoot, 'Runtime-sources');\n    const runtimeTypesPath = path.join(runtimePath, 'types');\n    const runtimeLibsPath = path.join(runtimePath, 'libs');\n    const runtimePixiRenderersPath = path.join(runtimePath, 'pixi-renderers');\n    const runtimeCocosRenderersPath = path.join(runtimePath, 'cocos-renderers');\n    const runtimeHowlerSoundManagerPath = path.join(\n      runtimePath,\n      'howler-sound-manager'\n    );\n    const runtimeCocosSoundManagerPath = path.join(\n      runtimePath,\n      'cocos-sound-manager'\n    );\n    const runtimeFontfaceobserverFontManagerPath = path.join(\n      runtimePath,\n      'fontfaceobserver-font-manager'\n    );\n    const extensionsPath = path.join(runtimePath, 'Extensions');\n    const eventToolsPath = path.join(runtimePath, 'events-tools');\n\n    importAllJsFilesFromFolder(runtimePath);\n    importAllJsFilesFromFolder(runtimeTypesPath);\n    importAllJsFilesFromFolder(runtimeLibsPath);\n    importAllJsFilesFromFolder(runtimePixiRenderersPath);\n    importAllJsFilesFromFolder(runtimeCocosRenderersPath);\n    importAllJsFilesFromFolder(runtimeHowlerSoundManagerPath);\n    importAllJsFilesFromFolder(runtimeCocosSoundManagerPath);\n    importAllJsFilesFromFolder(runtimeFontfaceobserverFontManagerPath);\n    importAllJsFilesFromFolder(eventToolsPath);\n    fs.readdir(extensionsPath, (error: ?Error, folderNames: Array<string>) => {\n      if (error) {\n        console.error(\n          'Unable to read Extensions folders for setting up autocompletions:',\n          error\n        );\n        return;\n      }\n\n      folderNames\n        .filter(\n          folderName =>\n            !folderName.endsWith('.txt') &&\n            !folderName.endsWith('.md') &&\n            !folderName.endsWith('.flow.js') &&\n            !folderName.endsWith('.gitignore')\n        )\n        .forEach(folderName =>\n          importAllJsFilesFromFolder(path.join(extensionsPath, folderName))\n        );\n    });\n\n    monaco.languages.typescript.javascriptDefaults.addExtraLib(\n      `\n/** Represents the scene being played. */\nvar runtimeScene = new gdjs.RuntimeScene();\n\n/**\n * The instances of objects that are passed to your JavaScript function.\n * @type {gdjs.RuntimeObject[]}\n */\nvar objects = [];\n\n/**\n * @type {EventsFunctionContext}\n */\nvar eventsFunctionContext = {};\n`,\n      'this-mock-the-context-of-events.js'\n    );\n  });\n};\n","// @flow\nimport { Trans } from '@lingui/macro';\n\nimport * as React from 'react';\nimport { setupAutocompletions } from './LocalCodeEditorAutocompletions';\nimport PlaceholderLoader from '../UI/PlaceholderLoader';\nimport RaisedButton from '../UI/RaisedButton';\nimport Text from '../UI/Text';\nimport PreferencesContext from '../MainFrame/Preferences/PreferencesContext';\nimport { getAllThemes } from './Theme';\n\nexport type State = {|\n  MonacoEditor: ?any,\n  error: ?Error,\n|};\nexport type Props = {|\n  value: string,\n  onChange: string => void,\n  width?: number,\n  height?: number,\n  onEditorMounted?: () => void,\n|};\n\nconst monacoEditorOptions = {\n  scrollBeyondLastLine: false,\n  minimap: {\n    enabled: false,\n  },\n};\n\n// There is only a single instance of monaco living, keep track\n// of if its initialized or not.\nlet monacoCompletionsInitialized = false;\nlet monacoThemesInitialized = false;\n\nexport class CodeEditor extends React.Component<Props, State> {\n  state = {\n    MonacoEditor: null,\n    error: null,\n  };\n\n  setupEditorThemes = (monaco: any) => {\n    if (!monacoThemesInitialized) {\n      monacoThemesInitialized = true;\n\n      getAllThemes().forEach(codeEditorTheme => {\n        // Builtin themes don't have themeData, don't redefine them.\n        if (codeEditorTheme.themeData) {\n          monaco.editor.defineTheme(\n            codeEditorTheme.themeName,\n            codeEditorTheme.themeData\n          );\n        }\n      });\n    }\n  };\n\n  setupEditorCompletions = (editor: any, monaco: any) => {\n    if (!monacoCompletionsInitialized) {\n      monacoCompletionsInitialized = true;\n\n      monaco.languages.typescript.javascriptDefaults.setCompilerOptions({\n        // noLib: true,\n        target: monaco.languages.typescript.ScriptTarget.ES6,\n        allowNonTsExtensions: true,\n        allowJs: true,\n        checkJs: true,\n      });\n      setupAutocompletions(monaco);\n    }\n\n    if (this.props.onEditorMounted) this.props.onEditorMounted();\n  };\n\n  componentDidMount() {\n    this.loadMonacoEditor();\n  }\n\n  handleLoadError(error: Error) {\n    this.setState({\n      error,\n    });\n  }\n\n  loadMonacoEditor() {\n    this.setState({\n      error: null,\n    });\n\n    // Define the global variable used by Monaco Editor to find its worker\n    // (used, at least, for auto-completions).\n    window.MonacoEnvironment = {\n      getWorkerUrl: function(workerId, label) {\n        return 'external/monaco-editor-min/vs/base/worker/workerMain.js';\n      },\n    };\n\n    import(/* webpackChunkName: \"react-monaco-editor\" */ 'react-monaco-editor')\n      .then(module =>\n        this.setState({\n          MonacoEditor: module.default,\n        })\n      )\n      .catch(this.handleLoadError);\n  }\n\n  _handleContextMenu = (event: SyntheticEvent<>) => {\n    // Prevent right click to bubble up and trigger the context menu\n    // of the event.\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  render() {\n    const { MonacoEditor, error } = this.state;\n    if (error) {\n      return (\n        <React.Fragment>\n          <Text>\n            <Trans>Unable to load the code editor</Trans>\n          </Text>\n          <RaisedButton\n            label={<Trans>Retry</Trans>}\n            onClick={this.loadMonacoEditor}\n          />\n        </React.Fragment>\n      );\n    }\n\n    if (!MonacoEditor) {\n      return <PlaceholderLoader />;\n    }\n\n    return (\n      <div onContextMenu={this._handleContextMenu}>\n        <PreferencesContext.Consumer>\n          {({ values: preferences }) => (\n            <MonacoEditor\n              width={this.props.width || 600}\n              height={this.props.height || 200}\n              language=\"javascript\"\n              theme={preferences.codeEditorThemeName}\n              value={this.props.value}\n              onChange={this.props.onChange}\n              editorWillMount={this.setupEditorThemes}\n              editorDidMount={this.setupEditorCompletions}\n              options={{\n                ...monacoEditorOptions,\n                fontSize: preferences.eventsSheetZoomLevel,\n              }}\n            />\n          )}\n        </PreferencesContext.Consumer>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}